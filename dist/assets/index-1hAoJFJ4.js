const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/viewCourse-DzOGdMGN.js","assets/viewCourse-C3wW6Bpk.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function sd(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const zt={},vr=[],qn=()=>{},hy=()=>!1,Ec=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),id=e=>e.startsWith("onUpdate:"),We=Object.assign,rd=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},CT=Object.prototype.hasOwnProperty,Vt=(e,t)=>CT.call(e,t),gt=Array.isArray,br=e=>ya(e)==="[object Map]",Br=e=>ya(e)==="[object Set]",Ep=e=>ya(e)==="[object Date]",wt=e=>typeof e=="function",_e=e=>typeof e=="string",ns=e=>typeof e=="symbol",Ht=e=>e!==null&&typeof e=="object",dy=e=>(Ht(e)||wt(e))&&wt(e.then)&&wt(e.catch),fy=Object.prototype.toString,ya=e=>fy.call(e),xT=e=>ya(e).slice(8,-1),py=e=>ya(e)==="[object Object]",od=e=>_e(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Oo=sd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Tc=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},kT=/-\w/g,In=Tc(e=>e.replace(kT,t=>t.slice(1).toUpperCase())),PT=/\B([A-Z])/g,Zi=Tc(e=>e.replace(PT,"-$1").toLowerCase()),Ic=Tc(e=>e.charAt(0).toUpperCase()+e.slice(1)),Tu=Tc(e=>e?`on${Ic(e)}`:""),si=(e,t)=>!Object.is(e,t),ml=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},gy=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},Ol=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Tp;const Ac=()=>Tp||(Tp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ss(e){if(gt(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],i=_e(s)?NT(s):ss(s);if(i)for(const r in i)t[r]=i[r]}return t}else if(_e(e)||Ht(e))return e}const DT=/;(?![^(]*\))/g,OT=/:([^]+)/,MT=/\/\*[^]*?\*\//g;function NT(e){const t={};return e.replace(MT,"").split(DT).forEach(n=>{if(n){const s=n.split(OT);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function _n(e){let t="";if(_e(e))t=e;else if(gt(e))for(let n=0;n<e.length;n++){const s=_n(e[n]);s&&(t+=s+" ")}else if(Ht(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const VT="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",LT=sd(VT);function my(e){return!!e||e===""}function FT(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=qi(e[s],t[s]);return n}function qi(e,t){if(e===t)return!0;let n=Ep(e),s=Ep(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=ns(e),s=ns(t),n||s)return e===t;if(n=gt(e),s=gt(t),n||s)return n&&s?FT(e,t):!1;if(n=Ht(e),s=Ht(t),n||s){if(!n||!s)return!1;const i=Object.keys(e).length,r=Object.keys(t).length;if(i!==r)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!qi(e[o],t[o]))return!1}}return String(e)===String(t)}function ad(e,t){return e.findIndex(n=>qi(n,t))}const _y=e=>!!(e&&e.__v_isRef===!0),dt=e=>_e(e)?e:e==null?"":gt(e)||Ht(e)&&(e.toString===fy||!wt(e.toString))?_y(e)?dt(e.value):JSON.stringify(e,yy,2):String(e),yy=(e,t)=>_y(t)?yy(e,t.value):br(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,i],r)=>(n[Iu(s,r)+" =>"]=i,n),{})}:Br(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Iu(n))}:ns(t)?Iu(t):Ht(t)&&!gt(t)&&!py(t)?String(t):t,Iu=(e,t="")=>{var n;return ns(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ue;class vy{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ue,!t&&Ue&&(this.index=(Ue.scopes||(Ue.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Ue;try{return Ue=this,t()}finally{Ue=n}}}on(){++this._on===1&&(this.prevScope=Ue,Ue=this)}off(){this._on>0&&--this._on===0&&(Ue=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function by(e){return new vy(e)}function wy(){return Ue}function UT(e,t=!1){Ue&&Ue.cleanups.push(e)}let Wt;const Au=new WeakSet;class Ey{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ue&&Ue.active&&Ue.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Au.has(this)&&(Au.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Iy(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ip(this),Ay(this);const t=Wt,n=Cn;Wt=this,Cn=!0;try{return this.fn()}finally{Sy(this),Wt=t,Cn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ud(t);this.deps=this.depsTail=void 0,Ip(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Au.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ah(this)&&this.run()}get dirty(){return ah(this)}}let Ty=0,Mo,No;function Iy(e,t=!1){if(e.flags|=8,t){e.next=No,No=e;return}e.next=Mo,Mo=e}function ld(){Ty++}function cd(){if(--Ty>0)return;if(No){let t=No;for(No=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Mo;){let t=Mo;for(Mo=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function Ay(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Sy(e){let t,n=e.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),ud(s),BT(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}e.deps=t,e.depsTail=n}function ah(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Ry(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Ry(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Zo)||(e.globalVersion=Zo,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!ah(e))))return;e.flags|=2;const t=e.dep,n=Wt,s=Cn;Wt=e,Cn=!0;try{Ay(e);const i=e.fn(e._value);(t.version===0||si(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{Wt=n,Cn=s,Sy(e),e.flags&=-3}}function ud(e,t=!1){const{dep:n,prevSub:s,nextSub:i}=e;if(s&&(s.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)ud(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function BT(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Cn=!0;const Cy=[];function Cs(){Cy.push(Cn),Cn=!1}function xs(){const e=Cy.pop();Cn=e===void 0?!0:e}function Ip(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Wt;Wt=void 0;try{t()}finally{Wt=n}}}let Zo=0;class jT{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class hd{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Wt||!Cn||Wt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Wt)n=this.activeLink=new jT(Wt,this),Wt.deps?(n.prevDep=Wt.depsTail,Wt.depsTail.nextDep=n,Wt.depsTail=n):Wt.deps=Wt.depsTail=n,xy(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Wt.depsTail,n.nextDep=void 0,Wt.depsTail.nextDep=n,Wt.depsTail=n,Wt.deps===n&&(Wt.deps=s)}return n}trigger(t){this.version++,Zo++,this.notify(t)}notify(t){ld();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{cd()}}}function xy(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)xy(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Ml=new WeakMap,$i=Symbol(""),lh=Symbol(""),ta=Symbol("");function je(e,t,n){if(Cn&&Wt){let s=Ml.get(e);s||Ml.set(e,s=new Map);let i=s.get(n);i||(s.set(n,i=new hd),i.map=s,i.key=n),i.track()}}function vs(e,t,n,s,i,r){const o=Ml.get(e);if(!o){Zo++;return}const a=l=>{l&&l.trigger()};if(ld(),t==="clear")o.forEach(a);else{const l=gt(e),c=l&&od(n);if(l&&n==="length"){const h=Number(s);o.forEach((d,f)=>{(f==="length"||f===ta||!ns(f)&&f>=h)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(ta)),t){case"add":l?c&&a(o.get("length")):(a(o.get($i)),br(e)&&a(o.get(lh)));break;case"delete":l||(a(o.get($i)),br(e)&&a(o.get(lh)));break;case"set":br(e)&&a(o.get($i));break}}cd()}function $T(e,t){const n=Ml.get(e);return n&&n.get(t)}function lr(e){const t=Dt(e);return t===e?t:(je(t,"iterate",ta),wn(e)?t:t.map(Pe))}function Sc(e){return je(e=Dt(e),"iterate",ta),e}const zT={__proto__:null,[Symbol.iterator](){return Su(this,Symbol.iterator,Pe)},concat(...e){return lr(this).concat(...e.map(t=>gt(t)?lr(t):t))},entries(){return Su(this,"entries",e=>(e[1]=Pe(e[1]),e))},every(e,t){return ds(this,"every",e,t,void 0,arguments)},filter(e,t){return ds(this,"filter",e,t,n=>n.map(Pe),arguments)},find(e,t){return ds(this,"find",e,t,Pe,arguments)},findIndex(e,t){return ds(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ds(this,"findLast",e,t,Pe,arguments)},findLastIndex(e,t){return ds(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ds(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ru(this,"includes",e)},indexOf(...e){return Ru(this,"indexOf",e)},join(e){return lr(this).join(e)},lastIndexOf(...e){return Ru(this,"lastIndexOf",e)},map(e,t){return ds(this,"map",e,t,void 0,arguments)},pop(){return po(this,"pop")},push(...e){return po(this,"push",e)},reduce(e,...t){return Ap(this,"reduce",e,t)},reduceRight(e,...t){return Ap(this,"reduceRight",e,t)},shift(){return po(this,"shift")},some(e,t){return ds(this,"some",e,t,void 0,arguments)},splice(...e){return po(this,"splice",e)},toReversed(){return lr(this).toReversed()},toSorted(e){return lr(this).toSorted(e)},toSpliced(...e){return lr(this).toSpliced(...e)},unshift(...e){return po(this,"unshift",e)},values(){return Su(this,"values",Pe)}};function Su(e,t,n){const s=Sc(e),i=s[t]();return s!==e&&!wn(e)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.done||(r.value=n(r.value)),r}),i}const HT=Array.prototype;function ds(e,t,n,s,i,r){const o=Sc(e),a=o!==e&&!wn(e),l=o[t];if(l!==HT[t]){const d=l.apply(e,r);return a?Pe(d):d}let c=n;o!==e&&(a?c=function(d,f){return n.call(this,Pe(d),f,e)}:n.length>2&&(c=function(d,f){return n.call(this,d,f,e)}));const h=l.call(o,c,s);return a&&i?i(h):h}function Ap(e,t,n,s){const i=Sc(e);let r=n;return i!==e&&(wn(e)?n.length>3&&(r=function(o,a,l){return n.call(this,o,a,l,e)}):r=function(o,a,l){return n.call(this,o,Pe(a),l,e)}),i[t](r,...s)}function Ru(e,t,n){const s=Dt(e);je(s,"iterate",ta);const i=s[t](...n);return(i===-1||i===!1)&&pd(n[0])?(n[0]=Dt(n[0]),s[t](...n)):i}function po(e,t,n=[]){Cs(),ld();const s=Dt(e)[t].apply(e,n);return cd(),xs(),s}const WT=sd("__proto__,__v_isRef,__isVue"),ky=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ns));function qT(e){ns(e)||(e=String(e));const t=Dt(this);return je(t,"has",e),t.hasOwnProperty(e)}class Py{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?nI:Ny:r?My:Oy).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=gt(t);if(!i){let l;if(o&&(l=zT[n]))return l;if(n==="hasOwnProperty")return qT}const a=Reflect.get(t,n,ue(t)?t:s);if((ns(n)?ky.has(n):WT(n))||(i||je(t,"get",n),r))return a;if(ue(a)){const l=o&&od(n)?a:a.value;return i&&Ht(l)?uh(l):l}return Ht(a)?i?uh(a):va(a):a}}class Dy extends Py{constructor(t=!1){super(!1,t)}set(t,n,s,i){let r=t[n];if(!this._isShallow){const l=ui(r);if(!wn(s)&&!ui(s)&&(r=Dt(r),s=Dt(s)),!gt(t)&&ue(r)&&!ue(s))return l||(r.value=s),!0}const o=gt(t)&&od(n)?Number(n)<t.length:Vt(t,n),a=Reflect.set(t,n,s,ue(t)?t:i);return t===Dt(i)&&(o?si(s,r)&&vs(t,"set",n,s):vs(t,"add",n,s)),a}deleteProperty(t,n){const s=Vt(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&s&&vs(t,"delete",n,void 0),i}has(t,n){const s=Reflect.has(t,n);return(!ns(n)||!ky.has(n))&&je(t,"has",n),s}ownKeys(t){return je(t,"iterate",gt(t)?"length":$i),Reflect.ownKeys(t)}}class GT extends Py{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const KT=new Dy,YT=new GT,QT=new Dy(!0);const ch=e=>e,Ga=e=>Reflect.getPrototypeOf(e);function XT(e,t,n){return function(...s){const i=this.__v_raw,r=Dt(i),o=br(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=i[e](...s),h=n?ch:t?Nl:Pe;return!t&&je(r,"iterate",l?lh:$i),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[h(d[0]),h(d[1])]:h(d),done:f}},[Symbol.iterator](){return this}}}}function Ka(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function JT(e,t){const n={get(i){const r=this.__v_raw,o=Dt(r),a=Dt(i);e||(si(i,a)&&je(o,"get",i),je(o,"get",a));const{has:l}=Ga(o),c=t?ch:e?Nl:Pe;if(l.call(o,i))return c(r.get(i));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!e&&je(Dt(i),"iterate",$i),i.size},has(i){const r=this.__v_raw,o=Dt(r),a=Dt(i);return e||(si(i,a)&&je(o,"has",i),je(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=Dt(a),c=t?ch:e?Nl:Pe;return!e&&je(l,"iterate",$i),a.forEach((h,d)=>i.call(r,c(h),c(d),o))}};return We(n,e?{add:Ka("add"),set:Ka("set"),delete:Ka("delete"),clear:Ka("clear")}:{add(i){!t&&!wn(i)&&!ui(i)&&(i=Dt(i));const r=Dt(this);return Ga(r).has.call(r,i)||(r.add(i),vs(r,"add",i,i)),this},set(i,r){!t&&!wn(r)&&!ui(r)&&(r=Dt(r));const o=Dt(this),{has:a,get:l}=Ga(o);let c=a.call(o,i);c||(i=Dt(i),c=a.call(o,i));const h=l.call(o,i);return o.set(i,r),c?si(r,h)&&vs(o,"set",i,r):vs(o,"add",i,r),this},delete(i){const r=Dt(this),{has:o,get:a}=Ga(r);let l=o.call(r,i);l||(i=Dt(i),l=o.call(r,i)),a&&a.call(r,i);const c=r.delete(i);return l&&vs(r,"delete",i,void 0),c},clear(){const i=Dt(this),r=i.size!==0,o=i.clear();return r&&vs(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=XT(i,e,t)}),n}function dd(e,t){const n=JT(e,t);return(s,i,r)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(Vt(n,i)&&i in s?n:s,i,r)}const ZT={get:dd(!1,!1)},tI={get:dd(!1,!0)},eI={get:dd(!0,!1)};const Oy=new WeakMap,My=new WeakMap,Ny=new WeakMap,nI=new WeakMap;function sI(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function iI(e){return e.__v_skip||!Object.isExtensible(e)?0:sI(xT(e))}function va(e){return ui(e)?e:fd(e,!1,KT,ZT,Oy)}function Vy(e){return fd(e,!1,QT,tI,My)}function uh(e){return fd(e,!0,YT,eI,Ny)}function fd(e,t,n,s,i){if(!Ht(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=iI(e);if(r===0)return e;const o=i.get(e);if(o)return o;const a=new Proxy(e,r===2?s:n);return i.set(e,a),a}function ii(e){return ui(e)?ii(e.__v_raw):!!(e&&e.__v_isReactive)}function ui(e){return!!(e&&e.__v_isReadonly)}function wn(e){return!!(e&&e.__v_isShallow)}function pd(e){return e?!!e.__v_raw:!1}function Dt(e){const t=e&&e.__v_raw;return t?Dt(t):e}function gd(e){return!Vt(e,"__v_skip")&&Object.isExtensible(e)&&gy(e,"__v_skip",!0),e}const Pe=e=>Ht(e)?va(e):e,Nl=e=>Ht(e)?uh(e):e;function ue(e){return e?e.__v_isRef===!0:!1}function Z(e){return Ly(e,!1)}function rI(e){return Ly(e,!0)}function Ly(e,t){return ue(e)?e:new oI(e,t)}class oI{constructor(t,n){this.dep=new hd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Dt(t),this._value=n?t:Pe(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||wn(t)||ui(t);t=s?t:Dt(t),si(t,n)&&(this._rawValue=t,this._value=s?t:Pe(t),this.dep.trigger())}}function Gn(e){return ue(e)?e.value:e}const aI={get:(e,t,n)=>t==="__v_raw"?e:Gn(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const i=e[t];return ue(i)&&!ue(n)?(i.value=n,!0):Reflect.set(e,t,n,s)}};function Fy(e){return ii(e)?e:new Proxy(e,aI)}function lI(e){const t=gt(e)?new Array(e.length):{};for(const n in e)t[n]=uI(e,n);return t}class cI{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return $T(Dt(this._object),this._key)}}function uI(e,t,n){const s=e[t];return ue(s)?s:new cI(e,t,n)}class hI{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new hd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Zo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Wt!==this)return Iy(this,!0),!0}get value(){const t=this.dep.track();return Ry(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function dI(e,t,n=!1){let s,i;return wt(e)?s=e:(s=e.get,i=e.set),new hI(s,i,n)}const Ya={},Vl=new WeakMap;let Vi;function fI(e,t=!1,n=Vi){if(n){let s=Vl.get(n);s||Vl.set(n,s=[]),s.push(e)}}function pI(e,t,n=zt){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=n,c=x=>i?x:wn(x)||i===!1||i===0?bs(x,1):bs(x);let h,d,f,g,_=!1,y=!1;if(ue(e)?(d=()=>e.value,_=wn(e)):ii(e)?(d=()=>c(e),_=!0):gt(e)?(y=!0,_=e.some(x=>ii(x)||wn(x)),d=()=>e.map(x=>{if(ue(x))return x.value;if(ii(x))return c(x);if(wt(x))return l?l(x,2):x()})):wt(e)?t?d=l?()=>l(e,2):e:d=()=>{if(f){Cs();try{f()}finally{xs()}}const x=Vi;Vi=h;try{return l?l(e,3,[g]):e(g)}finally{Vi=x}}:d=qn,t&&i){const x=d,L=i===!0?1/0:i;d=()=>bs(x(),L)}const b=wy(),C=()=>{h.stop(),b&&b.active&&rd(b.effects,h)};if(r&&t){const x=t;t=(...L)=>{x(...L),C()}}let R=y?new Array(e.length).fill(Ya):Ya;const I=x=>{if(!(!(h.flags&1)||!h.dirty&&!x))if(t){const L=h.run();if(i||_||(y?L.some((W,E)=>si(W,R[E])):si(L,R))){f&&f();const W=Vi;Vi=h;try{const E=[L,R===Ya?void 0:y&&R[0]===Ya?[]:R,g];R=L,l?l(t,3,E):t(...E)}finally{Vi=W}}}else h.run()};return a&&a(I),h=new Ey(d),h.scheduler=o?()=>o(I,!1):I,g=x=>fI(x,!1,h),f=h.onStop=()=>{const x=Vl.get(h);if(x){if(l)l(x,4);else for(const L of x)L();Vl.delete(h)}},t?s?I(!0):R=h.run():o?o(I.bind(null,!0),!0):h.run(),C.pause=h.pause.bind(h),C.resume=h.resume.bind(h),C.stop=C,C}function bs(e,t=1/0,n){if(t<=0||!Ht(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,ue(e))bs(e.value,t,n);else if(gt(e))for(let s=0;s<e.length;s++)bs(e[s],t,n);else if(Br(e)||br(e))e.forEach(s=>{bs(s,t,n)});else if(py(e)){for(const s in e)bs(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&bs(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ba(e,t,n,s){try{return s?e(...s):e()}catch(i){Rc(i,t,n)}}function is(e,t,n,s){if(wt(e)){const i=ba(e,t,n,s);return i&&dy(i)&&i.catch(r=>{Rc(r,t,n)}),i}if(gt(e)){const i=[];for(let r=0;r<e.length;r++)i.push(is(e[r],t,n,s));return i}}function Rc(e,t,n,s=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||zt;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](e,l,c)===!1)return}a=a.parent}if(r){Cs(),ba(r,null,10,[e,l,c]),xs();return}}gI(e,n,i,s,o)}function gI(e,t,n,s=!0,i=!1){if(i)throw e;console.error(e)}const Xe=[];let Bn=-1;const wr=[];let Gs=null,dr=0;const Uy=Promise.resolve();let Ll=null;function jr(e){const t=Ll||Uy;return e?t.then(this?e.bind(this):e):t}function mI(e){let t=Bn+1,n=Xe.length;for(;t<n;){const s=t+n>>>1,i=Xe[s],r=ea(i);r<e||r===e&&i.flags&2?t=s+1:n=s}return t}function md(e){if(!(e.flags&1)){const t=ea(e),n=Xe[Xe.length-1];!n||!(e.flags&2)&&t>=ea(n)?Xe.push(e):Xe.splice(mI(t),0,e),e.flags|=1,By()}}function By(){Ll||(Ll=Uy.then($y))}function _I(e){gt(e)?wr.push(...e):Gs&&e.id===-1?Gs.splice(dr+1,0,e):e.flags&1||(wr.push(e),e.flags|=1),By()}function Sp(e,t,n=Bn+1){for(;n<Xe.length;n++){const s=Xe[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;Xe.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function jy(e){if(wr.length){const t=[...new Set(wr)].sort((n,s)=>ea(n)-ea(s));if(wr.length=0,Gs){Gs.push(...t);return}for(Gs=t,dr=0;dr<Gs.length;dr++){const n=Gs[dr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Gs=null,dr=0}}const ea=e=>e.id==null?e.flags&2?-1:1/0:e.id;function $y(e){try{for(Bn=0;Bn<Xe.length;Bn++){const t=Xe[Bn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ba(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Bn<Xe.length;Bn++){const t=Xe[Bn];t&&(t.flags&=-2)}Bn=-1,Xe.length=0,jy(),Ll=null,(Xe.length||wr.length)&&$y()}}let dn=null,zy=null;function Fl(e){const t=dn;return dn=e,zy=e&&e.type.__scopeId||null,t}function yI(e,t=dn,n){if(!t||e._n)return e;const s=(...i)=>{s._d&&jl(-1);const r=Fl(t);let o;try{o=e(...i)}finally{Fl(r),s._d&&jl(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Mt(e,t){if(dn===null)return e;const n=Pc(dn),s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,a,l=zt]=t[i];r&&(wt(r)&&(r={mounted:r,updated:r}),r.deep&&bs(o),s.push({dir:r,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function Pi(e,t,n,s){const i=e.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(Cs(),is(l,n,8,[e.el,a,e,t]),xs())}}const vI=Symbol("_vte"),bI=e=>e.__isTeleport,wI=Symbol("_leaveCb");function _d(e,t){e.shapeFlag&6&&e.component?(e.transition=t,_d(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Hy(e,t){return wt(e)?We({name:e.name},t,{setup:e}):e}function Wy(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Ul=new WeakMap;function Vo(e,t,n,s,i=!1){if(gt(e)){e.forEach((_,y)=>Vo(_,t&&(gt(t)?t[y]:t),n,s,i));return}if(Lo(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Vo(e,t,n,s.component.subTree);return}const r=s.shapeFlag&4?Pc(s.component):s.el,o=i?null:r,{i:a,r:l}=e,c=t&&t.r,h=a.refs===zt?a.refs={}:a.refs,d=a.setupState,f=Dt(d),g=d===zt?hy:_=>Vt(f,_);if(c!=null&&c!==l){if(Rp(t),_e(c))h[c]=null,g(c)&&(d[c]=null);else if(ue(c)){c.value=null;const _=t;_.k&&(h[_.k]=null)}}if(wt(l))ba(l,a,12,[o,h]);else{const _=_e(l),y=ue(l);if(_||y){const b=()=>{if(e.f){const C=_?g(l)?d[l]:h[l]:l.value;if(i)gt(C)&&rd(C,r);else if(gt(C))C.includes(r)||C.push(r);else if(_)h[l]=[r],g(l)&&(d[l]=h[l]);else{const R=[r];l.value=R,e.k&&(h[e.k]=R)}}else _?(h[l]=o,g(l)&&(d[l]=o)):y&&(l.value=o,e.k&&(h[e.k]=o))};if(o){const C=()=>{b(),Ul.delete(e)};C.id=-1,Ul.set(e,C),cn(C,n)}else Rp(e),b()}}}function Rp(e){const t=Ul.get(e);t&&(t.flags|=8,Ul.delete(e))}Ac().requestIdleCallback;Ac().cancelIdleCallback;const Lo=e=>!!e.type.__asyncLoader,qy=e=>e.type.__isKeepAlive;function Gy(e,t){Yy(e,"a",t)}function Ky(e,t){Yy(e,"da",t)}function Yy(e,t,n=ze){const s=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Cc(t,s,n),n){let i=n.parent;for(;i&&i.parent;)qy(i.parent.vnode)&&EI(s,t,n,i),i=i.parent}}function EI(e,t,n,s){const i=Cc(t,e,s,!0);yd(()=>{rd(s[t],i)},n)}function Cc(e,t,n=ze,s=!1){if(n){const i=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...o)=>{Cs();const a=wa(n),l=is(t,n,e,o);return a(),xs(),l});return s?i.unshift(r):i.push(r),r}}const Ns=e=>(t,n=ze)=>{(!sa||e==="sp")&&Cc(e,(...s)=>t(...s),n)},TI=Ns("bm"),cs=Ns("m"),II=Ns("bu"),AI=Ns("u"),SI=Ns("bum"),yd=Ns("um"),RI=Ns("sp"),CI=Ns("rtg"),xI=Ns("rtc");function kI(e,t=ze){Cc("ec",e,t)}const PI="components";function DI(e,t){return MI(PI,e,!0,t)||e}const OI=Symbol.for("v-ndc");function MI(e,t,n=!0,s=!1){const i=dn||ze;if(i){const r=i.type;{const a=E0(r,!1);if(a&&(a===t||a===In(t)||a===Ic(In(t))))return r}const o=Cp(i[e]||r[e],t)||Cp(i.appContext[e],t);return!o&&s?r:o}}function Cp(e,t){return e&&(e[t]||e[In(t)]||e[Ic(In(t))])}function Jt(e,t,n,s){let i;const r=n,o=gt(e);if(o||_e(e)){const a=o&&ii(e);let l=!1,c=!1;a&&(l=!wn(e),c=ui(e),e=Sc(e)),i=new Array(e.length);for(let h=0,d=e.length;h<d;h++)i[h]=t(l?c?Nl(Pe(e[h])):Pe(e[h]):e[h],h,void 0,r)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,r)}else if(Ht(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const h=a[l];i[l]=t(e[h],h,l,r)}}else i=[];return i}const hh=e=>e?mv(e)?Pc(e):hh(e.parent):null,Fo=We(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>hh(e.parent),$root:e=>hh(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Xy(e),$forceUpdate:e=>e.f||(e.f=()=>{md(e.update)}),$nextTick:e=>e.n||(e.n=jr.bind(e.proxy)),$watch:e=>n0.bind(e)}),Cu=(e,t)=>e!==zt&&!e.__isScriptSetup&&Vt(e,t),NI={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const g=o[t];if(g!==void 0)switch(g){case 1:return s[t];case 2:return i[t];case 4:return n[t];case 3:return r[t]}else{if(Cu(s,t))return o[t]=1,s[t];if(i!==zt&&Vt(i,t))return o[t]=2,i[t];if((c=e.propsOptions[0])&&Vt(c,t))return o[t]=3,r[t];if(n!==zt&&Vt(n,t))return o[t]=4,n[t];dh&&(o[t]=0)}}const h=Fo[t];let d,f;if(h)return t==="$attrs"&&je(e.attrs,"get",""),h(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(n!==zt&&Vt(n,t))return o[t]=4,n[t];if(f=l.config.globalProperties,Vt(f,t))return f[t]},set({_:e},t,n){const{data:s,setupState:i,ctx:r}=e;return Cu(i,t)?(i[t]=n,!0):s!==zt&&Vt(s,t)?(s[t]=n,!0):Vt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:i,propsOptions:r,type:o}},a){let l,c;return!!(n[a]||e!==zt&&a[0]!=="$"&&Vt(e,a)||Cu(t,a)||(l=r[0])&&Vt(l,a)||Vt(s,a)||Vt(Fo,a)||Vt(i.config.globalProperties,a)||(c=o.__cssModules)&&c[a])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Vt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function xp(e){return gt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let dh=!0;function VI(e){const t=Xy(e),n=e.proxy,s=e.ctx;dh=!1,t.beforeCreate&&kp(t.beforeCreate,e,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:h,beforeMount:d,mounted:f,beforeUpdate:g,updated:_,activated:y,deactivated:b,beforeDestroy:C,beforeUnmount:R,destroyed:I,unmounted:x,render:L,renderTracked:W,renderTriggered:E,errorCaptured:v,serverPrefetch:T,expose:P,inheritAttrs:D,components:M,directives:S,filters:It}=t;if(c&&LI(c,s,null),o)for(const X in o){const U=o[X];wt(U)&&(s[X]=U.bind(n))}if(i){const X=i.call(n,n);Ht(X)&&(e.data=va(X))}if(dh=!0,r)for(const X in r){const U=r[X],tt=wt(U)?U.bind(n,n):wt(U.get)?U.get.bind(n,n):qn,Gt=!wt(U)&&wt(U.set)?U.set.bind(n):qn,Te=Lt({get:tt,set:Gt});Object.defineProperty(s,X,{enumerable:!0,configurable:!0,get:()=>Te.value,set:Zt=>Te.value=Zt})}if(a)for(const X in a)Qy(a[X],s,n,X);if(l){const X=wt(l)?l.call(n):l;Reflect.ownKeys(X).forEach(U=>{_l(U,X[U])})}h&&kp(h,e,"c");function ht(X,U){gt(U)?U.forEach(tt=>X(tt.bind(n))):U&&X(U.bind(n))}if(ht(TI,d),ht(cs,f),ht(II,g),ht(AI,_),ht(Gy,y),ht(Ky,b),ht(kI,v),ht(xI,W),ht(CI,E),ht(SI,R),ht(yd,x),ht(RI,T),gt(P))if(P.length){const X=e.exposed||(e.exposed={});P.forEach(U=>{Object.defineProperty(X,U,{get:()=>n[U],set:tt=>n[U]=tt,enumerable:!0})})}else e.exposed||(e.exposed={});L&&e.render===qn&&(e.render=L),D!=null&&(e.inheritAttrs=D),M&&(e.components=M),S&&(e.directives=S),T&&Wy(e)}function LI(e,t,n=qn){gt(e)&&(e=fh(e));for(const s in e){const i=e[s];let r;Ht(i)?"default"in i?r=mn(i.from||s,i.default,!0):r=mn(i.from||s):r=mn(i),ue(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function kp(e,t,n){is(gt(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function Qy(e,t,n,s){let i=s.includes(".")?uv(n,s):()=>n[s];if(_e(e)){const r=t[e];wt(r)&&As(i,r)}else if(wt(e))As(i,e.bind(n));else if(Ht(e))if(gt(e))e.forEach(r=>Qy(r,t,n,s));else{const r=wt(e.handler)?e.handler.bind(n):t[e.handler];wt(r)&&As(i,r,e)}}function Xy(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!i.length&&!n&&!s?l=t:(l={},i.length&&i.forEach(c=>Bl(l,c,o,!0)),Bl(l,t,o)),Ht(t)&&r.set(t,l),l}function Bl(e,t,n,s=!1){const{mixins:i,extends:r}=t;r&&Bl(e,r,n,!0),i&&i.forEach(o=>Bl(e,o,n,!0));for(const o in t)if(!(s&&o==="expose")){const a=FI[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const FI={data:Pp,props:Dp,emits:Dp,methods:Eo,computed:Eo,beforeCreate:Ye,created:Ye,beforeMount:Ye,mounted:Ye,beforeUpdate:Ye,updated:Ye,beforeDestroy:Ye,beforeUnmount:Ye,destroyed:Ye,unmounted:Ye,activated:Ye,deactivated:Ye,errorCaptured:Ye,serverPrefetch:Ye,components:Eo,directives:Eo,watch:BI,provide:Pp,inject:UI};function Pp(e,t){return t?e?function(){return We(wt(e)?e.call(this,this):e,wt(t)?t.call(this,this):t)}:t:e}function UI(e,t){return Eo(fh(e),fh(t))}function fh(e){if(gt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ye(e,t){return e?[...new Set([].concat(e,t))]:t}function Eo(e,t){return e?We(Object.create(null),e,t):t}function Dp(e,t){return e?gt(e)&&gt(t)?[...new Set([...e,...t])]:We(Object.create(null),xp(e),xp(t??{})):t}function BI(e,t){if(!e)return t;if(!t)return e;const n=We(Object.create(null),e);for(const s in t)n[s]=Ye(e[s],t[s]);return n}function Jy(){return{app:null,config:{isNativeTag:hy,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jI=0;function $I(e,t){return function(s,i=null){wt(s)||(s=We({},s)),i!=null&&!Ht(i)&&(i=null);const r=Jy(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:jI++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:I0,get config(){return r.config},set config(h){},use(h,...d){return o.has(h)||(h&&wt(h.install)?(o.add(h),h.install(c,...d)):wt(h)&&(o.add(h),h(c,...d))),c},mixin(h){return r.mixins.includes(h)||r.mixins.push(h),c},component(h,d){return d?(r.components[h]=d,c):r.components[h]},directive(h,d){return d?(r.directives[h]=d,c):r.directives[h]},mount(h,d,f){if(!l){const g=c._ceVNode||Je(s,i);return g.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),e(g,h,f),l=!0,c._container=h,h.__vue_app__=c,Pc(g.component)}},onUnmount(h){a.push(h)},unmount(){l&&(is(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(h,d){return r.provides[h]=d,c},runWithContext(h){const d=zi;zi=c;try{return h()}finally{zi=d}}};return c}}let zi=null;function _l(e,t){if(ze){let n=ze.provides;const s=ze.parent&&ze.parent.provides;s===n&&(n=ze.provides=Object.create(s)),n[e]=t}}function mn(e,t,n=!1){const s=gv();if(s||zi){let i=zi?zi._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&wt(t)?t.call(s&&s.proxy):t}}function zI(){return!!(gv()||zi)}const Zy={},tv=()=>Object.create(Zy),ev=e=>Object.getPrototypeOf(e)===Zy;function HI(e,t,n,s=!1){const i={},r=tv();e.propsDefaults=Object.create(null),nv(e,t,i,r);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=s?i:Vy(i):e.type.props?e.props=i:e.props=r,e.attrs=r}function WI(e,t,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=e,a=Dt(i),[l]=e.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let d=0;d<h.length;d++){let f=h[d];if(xc(e.emitsOptions,f))continue;const g=t[f];if(l)if(Vt(r,f))g!==r[f]&&(r[f]=g,c=!0);else{const _=In(f);i[_]=ph(l,a,_,g,e,!1)}else g!==r[f]&&(r[f]=g,c=!0)}}}else{nv(e,t,i,r)&&(c=!0);let h;for(const d in a)(!t||!Vt(t,d)&&((h=Zi(d))===d||!Vt(t,h)))&&(l?n&&(n[d]!==void 0||n[h]!==void 0)&&(i[d]=ph(l,a,d,void 0,e,!0)):delete i[d]);if(r!==a)for(const d in r)(!t||!Vt(t,d))&&(delete r[d],c=!0)}c&&vs(e.attrs,"set","")}function nv(e,t,n,s){const[i,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Oo(l))continue;const c=t[l];let h;i&&Vt(i,h=In(l))?!r||!r.includes(h)?n[h]=c:(a||(a={}))[h]=c:xc(e.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(r){const l=Dt(n),c=a||zt;for(let h=0;h<r.length;h++){const d=r[h];n[d]=ph(i,l,d,c[d],e,!Vt(c,d))}}return o}function ph(e,t,n,s,i,r){const o=e[n];if(o!=null){const a=Vt(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&wt(l)){const{propsDefaults:c}=i;if(n in c)s=c[n];else{const h=wa(i);s=c[n]=l.call(null,t),h()}}else s=l;i.ce&&i.ce._setProp(n,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Zi(n))&&(s=!0))}return s}const qI=new WeakMap;function sv(e,t,n=!1){const s=n?qI:t.propsCache,i=s.get(e);if(i)return i;const r=e.props,o={},a=[];let l=!1;if(!wt(e)){const h=d=>{l=!0;const[f,g]=sv(d,t,!0);We(o,f),g&&a.push(...g)};!n&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!r&&!l)return Ht(e)&&s.set(e,vr),vr;if(gt(r))for(let h=0;h<r.length;h++){const d=In(r[h]);Op(d)&&(o[d]=zt)}else if(r)for(const h in r){const d=In(h);if(Op(d)){const f=r[h],g=o[d]=gt(f)||wt(f)?{type:f}:We({},f),_=g.type;let y=!1,b=!0;if(gt(_))for(let C=0;C<_.length;++C){const R=_[C],I=wt(R)&&R.name;if(I==="Boolean"){y=!0;break}else I==="String"&&(b=!1)}else y=wt(_)&&_.name==="Boolean";g[0]=y,g[1]=b,(y||Vt(g,"default"))&&a.push(d)}}const c=[o,a];return Ht(e)&&s.set(e,c),c}function Op(e){return e[0]!=="$"&&!Oo(e)}const vd=e=>e==="_"||e==="_ctx"||e==="$stable",bd=e=>gt(e)?e.map(Hn):[Hn(e)],GI=(e,t,n)=>{if(t._n)return t;const s=yI((...i)=>bd(t(...i)),n);return s._c=!1,s},iv=(e,t,n)=>{const s=e._ctx;for(const i in e){if(vd(i))continue;const r=e[i];if(wt(r))t[i]=GI(i,r,s);else if(r!=null){const o=bd(r);t[i]=()=>o}}},rv=(e,t)=>{const n=bd(t);e.slots.default=()=>n},ov=(e,t,n)=>{for(const s in t)(n||!vd(s))&&(e[s]=t[s])},KI=(e,t,n)=>{const s=e.slots=tv();if(e.vnode.shapeFlag&32){const i=t._;i?(ov(s,t,n),n&&gy(s,"_",i,!0)):iv(t,s)}else t&&rv(e,t)},YI=(e,t,n)=>{const{vnode:s,slots:i}=e;let r=!0,o=zt;if(s.shapeFlag&32){const a=t._;a?n&&a===1?r=!1:ov(i,t,n):(r=!t.$stable,iv(t,i)),o=t}else t&&(rv(e,t),o={default:1});if(r)for(const a in i)!vd(a)&&o[a]==null&&delete i[a]},cn=u0;function QI(e){return XI(e)}function XI(e,t){const n=Ac();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:h,parentNode:d,nextSibling:f,setScopeId:g=qn,insertStaticContent:_}=e,y=(k,O,N,z=null,q=null,B=null,nt=void 0,J=null,Y=!!O.dynamicChildren)=>{if(k===O)return;k&&!go(k,O)&&(z=j(k),Zt(k,q,B,!0),k=null),O.patchFlag===-2&&(Y=!1,O.dynamicChildren=null);const{type:Q,ref:ft,shapeFlag:it}=O;switch(Q){case kc:b(k,O,N,z);break;case hi:C(k,O,N,z);break;case ku:k==null&&R(O,N,z,nt);break;case Et:M(k,O,N,z,q,B,nt,J,Y);break;default:it&1?L(k,O,N,z,q,B,nt,J,Y):it&6?S(k,O,N,z,q,B,nt,J,Y):(it&64||it&128)&&Q.process(k,O,N,z,q,B,nt,J,Y,lt)}ft!=null&&q?Vo(ft,k&&k.ref,B,O||k,!O):ft==null&&k&&k.ref!=null&&Vo(k.ref,null,B,k,!0)},b=(k,O,N,z)=>{if(k==null)s(O.el=a(O.children),N,z);else{const q=O.el=k.el;O.children!==k.children&&c(q,O.children)}},C=(k,O,N,z)=>{k==null?s(O.el=l(O.children||""),N,z):O.el=k.el},R=(k,O,N,z)=>{[k.el,k.anchor]=_(k.children,O,N,z,k.el,k.anchor)},I=({el:k,anchor:O},N,z)=>{let q;for(;k&&k!==O;)q=f(k),s(k,N,z),k=q;s(O,N,z)},x=({el:k,anchor:O})=>{let N;for(;k&&k!==O;)N=f(k),i(k),k=N;i(O)},L=(k,O,N,z,q,B,nt,J,Y)=>{O.type==="svg"?nt="svg":O.type==="math"&&(nt="mathml"),k==null?W(O,N,z,q,B,nt,J,Y):T(k,O,q,B,nt,J,Y)},W=(k,O,N,z,q,B,nt,J)=>{let Y,Q;const{props:ft,shapeFlag:it,transition:ut,dirs:pt}=k;if(Y=k.el=o(k.type,B,ft&&ft.is,ft),it&8?h(Y,k.children):it&16&&v(k.children,Y,null,z,q,xu(k,B),nt,J),pt&&Pi(k,null,z,"created"),E(Y,k,k.scopeId,nt,z),ft){for(const Ut in ft)Ut!=="value"&&!Oo(Ut)&&r(Y,Ut,null,ft[Ut],B,z);"value"in ft&&r(Y,"value",null,ft.value,B),(Q=ft.onVnodeBeforeMount)&&Ln(Q,z,k)}pt&&Pi(k,null,z,"beforeMount");const At=JI(q,ut);At&&ut.beforeEnter(Y),s(Y,O,N),((Q=ft&&ft.onVnodeMounted)||At||pt)&&cn(()=>{Q&&Ln(Q,z,k),At&&ut.enter(Y),pt&&Pi(k,null,z,"mounted")},q)},E=(k,O,N,z,q)=>{if(N&&g(k,N),z)for(let B=0;B<z.length;B++)g(k,z[B]);if(q){let B=q.subTree;if(O===B||dv(B.type)&&(B.ssContent===O||B.ssFallback===O)){const nt=q.vnode;E(k,nt,nt.scopeId,nt.slotScopeIds,q.parent)}}},v=(k,O,N,z,q,B,nt,J,Y=0)=>{for(let Q=Y;Q<k.length;Q++){const ft=k[Q]=J?Ks(k[Q]):Hn(k[Q]);y(null,ft,O,N,z,q,B,nt,J)}},T=(k,O,N,z,q,B,nt)=>{const J=O.el=k.el;let{patchFlag:Y,dynamicChildren:Q,dirs:ft}=O;Y|=k.patchFlag&16;const it=k.props||zt,ut=O.props||zt;let pt;if(N&&Di(N,!1),(pt=ut.onVnodeBeforeUpdate)&&Ln(pt,N,O,k),ft&&Pi(O,k,N,"beforeUpdate"),N&&Di(N,!0),(it.innerHTML&&ut.innerHTML==null||it.textContent&&ut.textContent==null)&&h(J,""),Q?P(k.dynamicChildren,Q,J,N,z,xu(O,q),B):nt||U(k,O,J,null,N,z,xu(O,q),B,!1),Y>0){if(Y&16)D(J,it,ut,N,q);else if(Y&2&&it.class!==ut.class&&r(J,"class",null,ut.class,q),Y&4&&r(J,"style",it.style,ut.style,q),Y&8){const At=O.dynamicProps;for(let Ut=0;Ut<At.length;Ut++){const Pt=At[Ut],Ve=it[Pt],Le=ut[Pt];(Le!==Ve||Pt==="value")&&r(J,Pt,Ve,Le,q,N)}}Y&1&&k.children!==O.children&&h(J,O.children)}else!nt&&Q==null&&D(J,it,ut,N,q);((pt=ut.onVnodeUpdated)||ft)&&cn(()=>{pt&&Ln(pt,N,O,k),ft&&Pi(O,k,N,"updated")},z)},P=(k,O,N,z,q,B,nt)=>{for(let J=0;J<O.length;J++){const Y=k[J],Q=O[J],ft=Y.el&&(Y.type===Et||!go(Y,Q)||Y.shapeFlag&198)?d(Y.el):N;y(Y,Q,ft,null,z,q,B,nt,!0)}},D=(k,O,N,z,q)=>{if(O!==N){if(O!==zt)for(const B in O)!Oo(B)&&!(B in N)&&r(k,B,O[B],null,q,z);for(const B in N){if(Oo(B))continue;const nt=N[B],J=O[B];nt!==J&&B!=="value"&&r(k,B,J,nt,q,z)}"value"in N&&r(k,"value",O.value,N.value,q)}},M=(k,O,N,z,q,B,nt,J,Y)=>{const Q=O.el=k?k.el:a(""),ft=O.anchor=k?k.anchor:a("");let{patchFlag:it,dynamicChildren:ut,slotScopeIds:pt}=O;pt&&(J=J?J.concat(pt):pt),k==null?(s(Q,N,z),s(ft,N,z),v(O.children||[],N,ft,q,B,nt,J,Y)):it>0&&it&64&&ut&&k.dynamicChildren?(P(k.dynamicChildren,ut,N,q,B,nt,J),(O.key!=null||q&&O===q.subTree)&&av(k,O,!0)):U(k,O,N,ft,q,B,nt,J,Y)},S=(k,O,N,z,q,B,nt,J,Y)=>{O.slotScopeIds=J,k==null?O.shapeFlag&512?q.ctx.activate(O,N,z,nt,Y):It(O,N,z,q,B,nt,Y):yt(k,O,Y)},It=(k,O,N,z,q,B,nt)=>{const J=k.component=_0(k,z,q);if(qy(k)&&(J.ctx.renderer=lt),y0(J,!1,nt),J.asyncDep){if(q&&q.registerDep(J,ht,nt),!k.el){const Y=J.subTree=Je(hi);C(null,Y,O,N),k.placeholder=Y.el}}else ht(J,k,O,N,q,B,nt)},yt=(k,O,N)=>{const z=O.component=k.component;if(l0(k,O,N))if(z.asyncDep&&!z.asyncResolved){X(z,O,N);return}else z.next=O,z.update();else O.el=k.el,z.vnode=O},ht=(k,O,N,z,q,B,nt)=>{const J=()=>{if(k.isMounted){let{next:it,bu:ut,u:pt,parent:At,vnode:Ut}=k;{const an=lv(k);if(an){it&&(it.el=Ut.el,X(k,it,nt)),an.asyncDep.then(()=>{k.isUnmounted||J()});return}}let Pt=it,Ve;Di(k,!1),it?(it.el=Ut.el,X(k,it,nt)):it=Ut,ut&&ml(ut),(Ve=it.props&&it.props.onVnodeBeforeUpdate)&&Ln(Ve,At,it,Ut),Di(k,!0);const Le=Np(k),on=k.subTree;k.subTree=Le,y(on,Le,d(on.el),j(on),k,q,B),it.el=Le.el,Pt===null&&c0(k,Le.el),pt&&cn(pt,q),(Ve=it.props&&it.props.onVnodeUpdated)&&cn(()=>Ln(Ve,At,it,Ut),q)}else{let it;const{el:ut,props:pt}=O,{bm:At,m:Ut,parent:Pt,root:Ve,type:Le}=k,on=Lo(O);Di(k,!1),At&&ml(At),!on&&(it=pt&&pt.onVnodeBeforeMount)&&Ln(it,Pt,O),Di(k,!0);{Ve.ce&&Ve.ce._def.shadowRoot!==!1&&Ve.ce._injectChildStyle(Le);const an=k.subTree=Np(k);y(null,an,N,z,k,q,B),O.el=an.el}if(Ut&&cn(Ut,q),!on&&(it=pt&&pt.onVnodeMounted)){const an=O;cn(()=>Ln(it,Pt,an),q)}(O.shapeFlag&256||Pt&&Lo(Pt.vnode)&&Pt.vnode.shapeFlag&256)&&k.a&&cn(k.a,q),k.isMounted=!0,O=N=z=null}};k.scope.on();const Y=k.effect=new Ey(J);k.scope.off();const Q=k.update=Y.run.bind(Y),ft=k.job=Y.runIfDirty.bind(Y);ft.i=k,ft.id=k.uid,Y.scheduler=()=>md(ft),Di(k,!0),Q()},X=(k,O,N)=>{O.component=k;const z=k.vnode.props;k.vnode=O,k.next=null,WI(k,O.props,z,N),YI(k,O.children,N),Cs(),Sp(k),xs()},U=(k,O,N,z,q,B,nt,J,Y=!1)=>{const Q=k&&k.children,ft=k?k.shapeFlag:0,it=O.children,{patchFlag:ut,shapeFlag:pt}=O;if(ut>0){if(ut&128){Gt(Q,it,N,z,q,B,nt,J,Y);return}else if(ut&256){tt(Q,it,N,z,q,B,nt,J,Y);return}}pt&8?(ft&16&&te(Q,q,B),it!==Q&&h(N,it)):ft&16?pt&16?Gt(Q,it,N,z,q,B,nt,J,Y):te(Q,q,B,!0):(ft&8&&h(N,""),pt&16&&v(it,N,z,q,B,nt,J,Y))},tt=(k,O,N,z,q,B,nt,J,Y)=>{k=k||vr,O=O||vr;const Q=k.length,ft=O.length,it=Math.min(Q,ft);let ut;for(ut=0;ut<it;ut++){const pt=O[ut]=Y?Ks(O[ut]):Hn(O[ut]);y(k[ut],pt,N,null,q,B,nt,J,Y)}Q>ft?te(k,q,B,!0,!1,it):v(O,N,z,q,B,nt,J,Y,it)},Gt=(k,O,N,z,q,B,nt,J,Y)=>{let Q=0;const ft=O.length;let it=k.length-1,ut=ft-1;for(;Q<=it&&Q<=ut;){const pt=k[Q],At=O[Q]=Y?Ks(O[Q]):Hn(O[Q]);if(go(pt,At))y(pt,At,N,null,q,B,nt,J,Y);else break;Q++}for(;Q<=it&&Q<=ut;){const pt=k[it],At=O[ut]=Y?Ks(O[ut]):Hn(O[ut]);if(go(pt,At))y(pt,At,N,null,q,B,nt,J,Y);else break;it--,ut--}if(Q>it){if(Q<=ut){const pt=ut+1,At=pt<ft?O[pt].el:z;for(;Q<=ut;)y(null,O[Q]=Y?Ks(O[Q]):Hn(O[Q]),N,At,q,B,nt,J,Y),Q++}}else if(Q>ut)for(;Q<=it;)Zt(k[Q],q,B,!0),Q++;else{const pt=Q,At=Q,Ut=new Map;for(Q=At;Q<=ut;Q++){const xe=O[Q]=Y?Ks(O[Q]):Hn(O[Q]);xe.key!=null&&Ut.set(xe.key,Q)}let Pt,Ve=0;const Le=ut-At+1;let on=!1,an=0;const An=new Array(Le);for(Q=0;Q<Le;Q++)An[Q]=0;for(Q=pt;Q<=it;Q++){const xe=k[Q];if(Ve>=Le){Zt(xe,q,B,!0);continue}let Ie;if(xe.key!=null)Ie=Ut.get(xe.key);else for(Pt=At;Pt<=ut;Pt++)if(An[Pt-At]===0&&go(xe,O[Pt])){Ie=Pt;break}Ie===void 0?Zt(xe,q,B,!0):(An[Ie-At]=Q+1,Ie>=an?an=Ie:on=!0,y(xe,O[Ie],N,null,q,B,nt,J,Y),Ve++)}const ir=on?ZI(An):vr;for(Pt=ir.length-1,Q=Le-1;Q>=0;Q--){const xe=At+Q,Ie=O[xe],Jr=O[xe+1],Si=xe+1<ft?Jr.el||Jr.placeholder:z;An[Q]===0?y(null,Ie,N,Si,q,B,nt,J,Y):on&&(Pt<0||Q!==ir[Pt]?Te(Ie,N,Si,2):Pt--)}}},Te=(k,O,N,z,q=null)=>{const{el:B,type:nt,transition:J,children:Y,shapeFlag:Q}=k;if(Q&6){Te(k.component.subTree,O,N,z);return}if(Q&128){k.suspense.move(O,N,z);return}if(Q&64){nt.move(k,O,N,lt);return}if(nt===Et){s(B,O,N);for(let it=0;it<Y.length;it++)Te(Y[it],O,N,z);s(k.anchor,O,N);return}if(nt===ku){I(k,O,N);return}if(z!==2&&Q&1&&J)if(z===0)J.beforeEnter(B),s(B,O,N),cn(()=>J.enter(B),q);else{const{leave:it,delayLeave:ut,afterLeave:pt}=J,At=()=>{k.ctx.isUnmounted?i(B):s(B,O,N)},Ut=()=>{B._isLeaving&&B[wI](!0),it(B,()=>{At(),pt&&pt()})};ut?ut(B,At,Ut):Ut()}else s(B,O,N)},Zt=(k,O,N,z=!1,q=!1)=>{const{type:B,props:nt,ref:J,children:Y,dynamicChildren:Q,shapeFlag:ft,patchFlag:it,dirs:ut,cacheIndex:pt}=k;if(it===-2&&(q=!1),J!=null&&(Cs(),Vo(J,null,N,k,!0),xs()),pt!=null&&(O.renderCache[pt]=void 0),ft&256){O.ctx.deactivate(k);return}const At=ft&1&&ut,Ut=!Lo(k);let Pt;if(Ut&&(Pt=nt&&nt.onVnodeBeforeUnmount)&&Ln(Pt,O,k),ft&6)Ce(k.component,N,z);else{if(ft&128){k.suspense.unmount(N,z);return}At&&Pi(k,null,O,"beforeUnmount"),ft&64?k.type.remove(k,O,N,lt,z):Q&&!Q.hasOnce&&(B!==Et||it>0&&it&64)?te(Q,O,N,!1,!0):(B===Et&&it&384||!q&&ft&16)&&te(Y,O,N),z&&Ge(k)}(Ut&&(Pt=nt&&nt.onVnodeUnmounted)||At)&&cn(()=>{Pt&&Ln(Pt,O,k),At&&Pi(k,null,O,"unmounted")},N)},Ge=k=>{const{type:O,el:N,anchor:z,transition:q}=k;if(O===Et){ye(N,z);return}if(O===ku){x(k);return}const B=()=>{i(N),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(k.shapeFlag&1&&q&&!q.persisted){const{leave:nt,delayLeave:J}=q,Y=()=>nt(N,B);J?J(k.el,B,Y):Y()}else B()},ye=(k,O)=>{let N;for(;k!==O;)N=f(k),i(k),k=N;i(O)},Ce=(k,O,N)=>{const{bum:z,scope:q,job:B,subTree:nt,um:J,m:Y,a:Q}=k;Mp(Y),Mp(Q),z&&ml(z),q.stop(),B&&(B.flags|=8,Zt(nt,k,O,N)),J&&cn(J,O),cn(()=>{k.isUnmounted=!0},O)},te=(k,O,N,z=!1,q=!1,B=0)=>{for(let nt=B;nt<k.length;nt++)Zt(k[nt],O,N,z,q)},j=k=>{if(k.shapeFlag&6)return j(k.component.subTree);if(k.shapeFlag&128)return k.suspense.next();const O=f(k.anchor||k.el),N=O&&O[vI];return N?f(N):O};let ot=!1;const st=(k,O,N)=>{k==null?O._vnode&&Zt(O._vnode,null,null,!0):y(O._vnode||null,k,O,null,null,null,N),O._vnode=k,ot||(ot=!0,Sp(),jy(),ot=!1)},lt={p:y,um:Zt,m:Te,r:Ge,mt:It,mc:v,pc:U,pbc:P,n:j,o:e};return{render:st,hydrate:void 0,createApp:$I(st)}}function xu({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Di({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function JI(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function av(e,t,n=!1){const s=e.children,i=t.children;if(gt(s)&&gt(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=Ks(i[r]),a.el=o.el),!n&&a.patchFlag!==-2&&av(o,a)),a.type===kc&&a.patchFlag!==-1&&(a.el=o.el),a.type===hi&&!a.el&&(a.el=o.el)}}function ZI(e){const t=e.slice(),n=[0];let s,i,r,o,a;const l=e.length;for(s=0;s<l;s++){const c=e[s];if(c!==0){if(i=n[n.length-1],e[i]<c){t[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,e[n[a]]<c?r=a+1:o=a;c<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=t[o];return n}function lv(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:lv(t)}function Mp(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const t0=Symbol.for("v-scx"),e0=()=>mn(t0);function As(e,t,n){return cv(e,t,n)}function cv(e,t,n=zt){const{immediate:s,deep:i,flush:r,once:o}=n,a=We({},n),l=t&&s||!t&&r!=="post";let c;if(sa){if(r==="sync"){const g=e0();c=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=qn,g.resume=qn,g.pause=qn,g}}const h=ze;a.call=(g,_,y)=>is(g,h,_,y);let d=!1;r==="post"?a.scheduler=g=>{cn(g,h&&h.suspense)}:r!=="sync"&&(d=!0,a.scheduler=(g,_)=>{_?g():md(g)}),a.augmentJob=g=>{t&&(g.flags|=4),d&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const f=pI(e,t,a);return sa&&(c?c.push(f):l&&f()),f}function n0(e,t,n){const s=this.proxy,i=_e(e)?e.includes(".")?uv(s,e):()=>s[e]:e.bind(s,s);let r;wt(t)?r=t:(r=t.handler,n=t);const o=wa(this),a=cv(i,r.bind(s),n);return o(),a}function uv(e,t){const n=t.split(".");return()=>{let s=e;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const s0=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${In(t)}Modifiers`]||e[`${Zi(t)}Modifiers`];function i0(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||zt;let i=n;const r=t.startsWith("update:"),o=r&&s0(s,t.slice(7));o&&(o.trim&&(i=n.map(h=>_e(h)?h.trim():h)),o.number&&(i=n.map(Ol)));let a,l=s[a=Tu(t)]||s[a=Tu(In(t))];!l&&r&&(l=s[a=Tu(Zi(t))]),l&&is(l,e,6,i);const c=s[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,is(c,e,6,i)}}const r0=new WeakMap;function hv(e,t,n=!1){const s=n?r0:t.emitsCache,i=s.get(e);if(i!==void 0)return i;const r=e.emits;let o={},a=!1;if(!wt(e)){const l=c=>{const h=hv(c,t,!0);h&&(a=!0,We(o,h))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(Ht(e)&&s.set(e,null),null):(gt(r)?r.forEach(l=>o[l]=null):We(o,r),Ht(e)&&s.set(e,o),o)}function xc(e,t){return!e||!Ec(t)?!1:(t=t.slice(2).replace(/Once$/,""),Vt(e,t[0].toLowerCase()+t.slice(1))||Vt(e,Zi(t))||Vt(e,t))}function Np(e){const{type:t,vnode:n,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:h,props:d,data:f,setupState:g,ctx:_,inheritAttrs:y}=e,b=Fl(e);let C,R;try{if(n.shapeFlag&4){const x=i||s,L=x;C=Hn(c.call(L,x,h,d,g,f,_)),R=a}else{const x=t;C=Hn(x.length>1?x(d,{attrs:a,slots:o,emit:l}):x(d,null)),R=t.props?a:o0(a)}}catch(x){Uo.length=0,Rc(x,e,1),C=Je(hi)}let I=C;if(R&&y!==!1){const x=Object.keys(R),{shapeFlag:L}=I;x.length&&L&7&&(r&&x.some(id)&&(R=a0(R,r)),I=Cr(I,R,!1,!0))}return n.dirs&&(I=Cr(I,null,!1,!0),I.dirs=I.dirs?I.dirs.concat(n.dirs):n.dirs),n.transition&&_d(I,n.transition),C=I,Fl(b),C}const o0=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ec(n))&&((t||(t={}))[n]=e[n]);return t},a0=(e,t)=>{const n={};for(const s in e)(!id(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function l0(e,t,n){const{props:s,children:i,component:r}=e,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?Vp(s,o,c):!!o;if(l&8){const h=t.dynamicProps;for(let d=0;d<h.length;d++){const f=h[d];if(o[f]!==s[f]&&!xc(c,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Vp(s,o,c):!0:!!o;return!1}function Vp(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==e[r]&&!xc(n,r))return!0}return!1}function c0({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const dv=e=>e.__isSuspense;function u0(e,t){t&&t.pendingBranch?gt(e)?t.effects.push(...e):t.effects.push(e):_I(e)}const Et=Symbol.for("v-fgt"),kc=Symbol.for("v-txt"),hi=Symbol.for("v-cmt"),ku=Symbol.for("v-stc"),Uo=[];let fn=null;function G(e=!1){Uo.push(fn=e?null:[])}function h0(){Uo.pop(),fn=Uo[Uo.length-1]||null}let na=1;function jl(e,t=!1){na+=e,e<0&&fn&&t&&(fn.hasOnce=!0)}function fv(e){return e.dynamicChildren=na>0?fn||vr:null,h0(),na>0&&fn&&fn.push(e),e}function K(e,t,n,s,i,r){return fv(A(e,t,n,s,i,r,!0))}function rs(e,t,n,s,i){return fv(Je(e,t,n,s,i,!0))}function $l(e){return e?e.__v_isVNode===!0:!1}function go(e,t){return e.type===t.type&&e.key===t.key}const pv=({key:e})=>e??null,yl=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?_e(e)||ue(e)||wt(e)?{i:dn,r:e,k:t,f:!!n}:e:null);function A(e,t=null,n=null,s=0,i=null,r=e===Et?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&pv(t),ref:t&&yl(t),scopeId:zy,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:dn};return a?(wd(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=_e(n)?8:16),na>0&&!o&&fn&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&fn.push(l),l}const Je=d0;function d0(e,t=null,n=null,s=0,i=null,r=!1){if((!e||e===OI)&&(e=hi),$l(e)){const a=Cr(e,t,!0);return n&&wd(a,n),na>0&&!r&&fn&&(a.shapeFlag&6?fn[fn.indexOf(e)]=a:fn.push(a)),a.patchFlag=-2,a}if(T0(e)&&(e=e.__vccOpts),t){t=f0(t);let{class:a,style:l}=t;a&&!_e(a)&&(t.class=_n(a)),Ht(l)&&(pd(l)&&!gt(l)&&(l=We({},l)),t.style=ss(l))}const o=_e(e)?1:dv(e)?128:bI(e)?64:Ht(e)?4:wt(e)?2:0;return A(e,t,n,s,i,o,r,!0)}function f0(e){return e?pd(e)||ev(e)?We({},e):e:null}function Cr(e,t,n=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=e,c=t?p0(i||{},t):i,h={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&pv(c),ref:t&&t.ref?n&&r?gt(r)?r.concat(yl(t)):[r,yl(t)]:yl(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Et?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Cr(e.ssContent),ssFallback:e.ssFallback&&Cr(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&_d(h,l.clone(h)),h}function ee(e=" ",t=0){return Je(kc,null,e,t)}function pe(e="",t=!1){return t?(G(),rs(hi,null,e)):Je(hi,null,e)}function Hn(e){return e==null||typeof e=="boolean"?Je(hi):gt(e)?Je(Et,null,e.slice()):$l(e)?Ks(e):Je(kc,null,String(e))}function Ks(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Cr(e)}function wd(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(gt(t))n=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),wd(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!ev(t)?t._ctx=dn:i===3&&dn&&(dn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else wt(t)?(t={default:t,_ctx:dn},n=32):(t=String(t),s&64?(n=16,t=[ee(t)]):n=8);e.children=t,e.shapeFlag|=n}function p0(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=_n([t.class,s.class]));else if(i==="style")t.style=ss([t.style,s.style]);else if(Ec(i)){const r=t[i],o=s[i];o&&r!==o&&!(gt(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=s[i])}return t}function Ln(e,t,n,s=null){is(e,t,7,[n,s])}const g0=Jy();let m0=0;function _0(e,t,n){const s=e.type,i=(t?t.appContext:e.appContext)||g0,r={uid:m0++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new vy(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:sv(s,i),emitsOptions:hv(s,i),emit:null,emitted:null,propsDefaults:zt,inheritAttrs:s.inheritAttrs,ctx:zt,data:zt,props:zt,attrs:zt,slots:zt,refs:zt,setupState:zt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=i0.bind(null,r),e.ce&&e.ce(r),r}let ze=null;const gv=()=>ze||dn;let zl,gh;{const e=Ac(),t=(n,s)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};zl=t("__VUE_INSTANCE_SETTERS__",n=>ze=n),gh=t("__VUE_SSR_SETTERS__",n=>sa=n)}const wa=e=>{const t=ze;return zl(e),e.scope.on(),()=>{e.scope.off(),zl(t)}},Lp=()=>{ze&&ze.scope.off(),zl(null)};function mv(e){return e.vnode.shapeFlag&4}let sa=!1;function y0(e,t=!1,n=!1){t&&gh(t);const{props:s,children:i}=e.vnode,r=mv(e);HI(e,s,r,t),KI(e,i,n||t);const o=r?v0(e,t):void 0;return t&&gh(!1),o}function v0(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,NI);const{setup:s}=n;if(s){Cs();const i=e.setupContext=s.length>1?w0(e):null,r=wa(e),o=ba(s,e,0,[e.props,i]),a=dy(o);if(xs(),r(),(a||e.sp)&&!Lo(e)&&Wy(e),a){if(o.then(Lp,Lp),t)return o.then(l=>{Fp(e,l)}).catch(l=>{Rc(l,e,0)});e.asyncDep=o}else Fp(e,o)}else _v(e)}function Fp(e,t,n){wt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ht(t)&&(e.setupState=Fy(t)),_v(e)}function _v(e,t,n){const s=e.type;e.render||(e.render=s.render||qn);{const i=wa(e);Cs();try{VI(e)}finally{xs(),i()}}}const b0={get(e,t){return je(e,"get",""),e[t]}};function w0(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,b0),slots:e.slots,emit:e.emit,expose:t}}function Pc(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Fy(gd(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Fo)return Fo[n](e)},has(t,n){return n in t||n in Fo}})):e.proxy}function E0(e,t=!0){return wt(e)?e.displayName||e.name:e.name||t&&e.__name}function T0(e){return wt(e)&&"__vccOpts"in e}const Lt=(e,t)=>dI(e,t,sa);function yv(e,t,n){try{jl(-1);const s=arguments.length;return s===2?Ht(t)&&!gt(t)?$l(t)?Je(e,null,[t]):Je(e,t):Je(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&$l(n)&&(n=[n]),Je(e,t,n))}finally{jl(1)}}const I0="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let mh;const Up=typeof window<"u"&&window.trustedTypes;if(Up)try{mh=Up.createPolicy("vue",{createHTML:e=>e})}catch{}const vv=mh?e=>mh.createHTML(e):e=>e,A0="http://www.w3.org/2000/svg",S0="http://www.w3.org/1998/Math/MathML",_s=typeof document<"u"?document:null,Bp=_s&&_s.createElement("template"),R0={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const i=t==="svg"?_s.createElementNS(A0,e):t==="mathml"?_s.createElementNS(S0,e):n?_s.createElement(e,{is:n}):_s.createElement(e);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>_s.createTextNode(e),createComment:e=>_s.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>_s.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,i,r){const o=n?n.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{Bp.innerHTML=vv(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=Bp.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},C0=Symbol("_vtc");function x0(e,t,n){const s=e[C0];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const jp=Symbol("_vod"),k0=Symbol("_vsh"),P0=Symbol(""),D0=/(?:^|;)\s*display\s*:/;function O0(e,t,n){const s=e.style,i=_e(n);let r=!1;if(n&&!i){if(t)if(_e(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&vl(s,a,"")}else for(const o in t)n[o]==null&&vl(s,o,"");for(const o in n)o==="display"&&(r=!0),vl(s,o,n[o])}else if(i){if(t!==n){const o=s[P0];o&&(n+=";"+o),s.cssText=n,r=D0.test(n)}}else t&&e.removeAttribute("style");jp in e&&(e[jp]=r?s.display:"",e[k0]&&(s.display="none"))}const $p=/\s*!important$/;function vl(e,t,n){if(gt(n))n.forEach(s=>vl(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=M0(e,t);$p.test(n)?e.setProperty(Zi(s),n.replace($p,""),"important"):e[s]=n}}const zp=["Webkit","Moz","ms"],Pu={};function M0(e,t){const n=Pu[t];if(n)return n;let s=In(t);if(s!=="filter"&&s in e)return Pu[t]=s;s=Ic(s);for(let i=0;i<zp.length;i++){const r=zp[i]+s;if(r in e)return Pu[t]=r}return t}const Hp="http://www.w3.org/1999/xlink";function Wp(e,t,n,s,i,r=LT(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Hp,t.slice(6,t.length)):e.setAttributeNS(Hp,t,n):n==null||r&&!my(n)?e.removeAttribute(t):e.setAttribute(t,r?"":ns(n)?String(n):n)}function qp(e,t,n,s,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?vv(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=my(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function ws(e,t,n,s){e.addEventListener(t,n,s)}function N0(e,t,n,s){e.removeEventListener(t,n,s)}const Gp=Symbol("_vei");function V0(e,t,n,s,i=null){const r=e[Gp]||(e[Gp]={}),o=r[t];if(s&&o)o.value=s;else{const[a,l]=L0(t);if(s){const c=r[t]=B0(s,i);ws(e,a,c,l)}else o&&(N0(e,a,o,l),r[t]=void 0)}}const Kp=/(?:Once|Passive|Capture)$/;function L0(e){let t;if(Kp.test(e)){t={};let s;for(;s=e.match(Kp);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Zi(e.slice(2)),t]}let Du=0;const F0=Promise.resolve(),U0=()=>Du||(F0.then(()=>Du=0),Du=Date.now());function B0(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;is(j0(s,n.value),t,5,[s])};return n.value=e,n.attached=U0(),n}function j0(e,t){if(gt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const Yp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,$0=(e,t,n,s,i,r)=>{const o=i==="svg";t==="class"?x0(e,s,o):t==="style"?O0(e,n,s):Ec(t)?id(t)||V0(e,t,n,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):z0(e,t,s,o))?(qp(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Wp(e,t,s,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!_e(s))?qp(e,In(t),s,r,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Wp(e,t,s,o))};function z0(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Yp(t)&&wt(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Yp(t)&&_e(n)?!1:t in e}const di=e=>{const t=e.props["onUpdate:modelValue"]||!1;return gt(t)?n=>ml(t,n):t};function H0(e){e.target.composing=!0}function Qp(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const En=Symbol("_assign"),re={created(e,{modifiers:{lazy:t,trim:n,number:s}},i){e[En]=di(i);const r=s||i.props&&i.props.type==="number";ws(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),r&&(a=Ol(a)),e[En](a)}),n&&ws(e,"change",()=>{e.value=e.value.trim()}),t||(ws(e,"compositionstart",H0),ws(e,"compositionend",Qp),ws(e,"change",Qp))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:i,number:r}},o){if(e[En]=di(o),e.composing)return;const a=(r||e.type==="number")&&!/^0\d/.test(e.value)?Ol(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||i&&e.value.trim()===l)||(e.value=l))}},bv={deep:!0,created(e,t,n){e[En]=di(n),ws(e,"change",()=>{const s=e._modelValue,i=xr(e),r=e.checked,o=e[En];if(gt(s)){const a=ad(s,i),l=a!==-1;if(r&&!l)o(s.concat(i));else if(!r&&l){const c=[...s];c.splice(a,1),o(c)}}else if(Br(s)){const a=new Set(s);r?a.add(i):a.delete(i),o(a)}else o(wv(e,r))})},mounted:Xp,beforeUpdate(e,t,n){e[En]=di(n),Xp(e,t,n)}};function Xp(e,{value:t,oldValue:n},s){e._modelValue=t;let i;if(gt(t))i=ad(t,s.props.value)>-1;else if(Br(t))i=t.has(s.props.value);else{if(t===n)return;i=qi(t,wv(e,!0))}e.checked!==i&&(e.checked=i)}const W0={created(e,{value:t},n){e.checked=qi(t,n.props.value),e[En]=di(n),ws(e,"change",()=>{e[En](xr(e))})},beforeUpdate(e,{value:t,oldValue:n},s){e[En]=di(s),t!==n&&(e.checked=qi(t,s.props.value))}},Kn={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const i=Br(t);ws(e,"change",()=>{const r=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?Ol(xr(o)):xr(o));e[En](e.multiple?i?new Set(r):r:r[0]),e._assigning=!0,jr(()=>{e._assigning=!1})}),e[En]=di(s)},mounted(e,{value:t}){Jp(e,t)},beforeUpdate(e,t,n){e[En]=di(n)},updated(e,{value:t}){e._assigning||Jp(e,t)}};function Jp(e,t){const n=e.multiple,s=gt(t);if(!(n&&!s&&!Br(t))){for(let i=0,r=e.options.length;i<r;i++){const o=e.options[i],a=xr(o);if(n)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(c=>String(c)===String(a)):o.selected=ad(t,a)>-1}else o.selected=t.has(a);else if(qi(xr(o),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function xr(e){return"_value"in e?e._value:e.value}function wv(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const q0={created(e,t,n){Qa(e,t,n,null,"created")},mounted(e,t,n){Qa(e,t,n,null,"mounted")},beforeUpdate(e,t,n,s){Qa(e,t,n,s,"beforeUpdate")},updated(e,t,n,s){Qa(e,t,n,s,"updated")}};function G0(e,t){switch(e){case"SELECT":return Kn;case"TEXTAREA":return re;default:switch(t){case"checkbox":return bv;case"radio":return W0;default:return re}}}function Qa(e,t,n,s,i){const o=G0(e.tagName,n.props&&n.props.type)[i];o&&o(e,t,n,s)}const K0=["ctrl","shift","alt","meta"],Y0={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>K0.some(n=>e[`${n}Key`]&&!t.includes(n))},Ed=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=((i,...r)=>{for(let o=0;o<t.length;o++){const a=Y0[t[o]];if(a&&a(i,t))return}return e(i,...r)}))},Q0=We({patchProp:$0},R0);let Zp;function X0(){return Zp||(Zp=QI(Q0))}const J0=((...e)=>{const t=X0().createApp(...e),{mount:n}=t;return t.mount=s=>{const i=tA(s);if(!i)return;const r=t._component;!wt(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,Z0(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t});function Z0(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function tA(e){return _e(e)?document.querySelector(e):e}/*!
 * pinia v3.0.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Ev;const Dc=e=>Ev=e,Tv=Symbol();function _h(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Bo;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Bo||(Bo={}));function eA(){const e=by(!0),t=e.run(()=>Z({}));let n=[],s=[];const i=gd({install(r){Dc(i),i._a=r,r.provide(Tv,i),r.config.globalProperties.$pinia=i,s.forEach(o=>n.push(o)),s=[]},use(r){return this._a?n.push(r):s.push(r),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const Iv=()=>{};function tg(e,t,n,s=Iv){e.add(t);const i=()=>{e.delete(t)&&s()};return!n&&wy()&&UT(i),i}function cr(e,...t){e.forEach(n=>{n(...t)})}const nA=e=>e(),eg=Symbol(),Ou=Symbol();function yh(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,s)=>e.set(s,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const s=t[n],i=e[n];_h(i)&&_h(s)&&e.hasOwnProperty(n)&&!ue(s)&&!ii(s)?e[n]=yh(i,s):e[n]=s}return e}const sA=Symbol();function iA(e){return!_h(e)||!Object.prototype.hasOwnProperty.call(e,sA)}const{assign:qs}=Object;function rA(e){return!!(ue(e)&&e.effect)}function oA(e,t,n,s){const{state:i,actions:r,getters:o}=t,a=n.state.value[e];let l;function c(){a||(n.state.value[e]=i?i():{});const h=lI(n.state.value[e]);return qs(h,r,Object.keys(o||{}).reduce((d,f)=>(d[f]=gd(Lt(()=>{Dc(n);const g=n._s.get(e);return o[f].call(g,g)})),d),{}))}return l=Av(e,c,t,n,s,!0),l}function Av(e,t,n={},s,i,r){let o;const a=qs({actions:{}},n),l={deep:!0};let c,h,d=new Set,f=new Set,g;const _=s.state.value[e];!r&&!_&&(s.state.value[e]={}),Z({});let y;function b(v){let T;c=h=!1,typeof v=="function"?(v(s.state.value[e]),T={type:Bo.patchFunction,storeId:e,events:g}):(yh(s.state.value[e],v),T={type:Bo.patchObject,payload:v,storeId:e,events:g});const P=y=Symbol();jr().then(()=>{y===P&&(c=!0)}),h=!0,cr(d,T,s.state.value[e])}const C=r?function(){const{state:T}=n,P=T?T():{};this.$patch(D=>{qs(D,P)})}:Iv;function R(){o.stop(),d.clear(),f.clear(),s._s.delete(e)}const I=(v,T="")=>{if(eg in v)return v[Ou]=T,v;const P=function(){Dc(s);const D=Array.from(arguments),M=new Set,S=new Set;function It(X){M.add(X)}function yt(X){S.add(X)}cr(f,{args:D,name:P[Ou],store:L,after:It,onError:yt});let ht;try{ht=v.apply(this&&this.$id===e?this:L,D)}catch(X){throw cr(S,X),X}return ht instanceof Promise?ht.then(X=>(cr(M,X),X)).catch(X=>(cr(S,X),Promise.reject(X))):(cr(M,ht),ht)};return P[eg]=!0,P[Ou]=T,P},x={_p:s,$id:e,$onAction:tg.bind(null,f),$patch:b,$reset:C,$subscribe(v,T={}){const P=tg(d,v,T.detached,()=>D()),D=o.run(()=>As(()=>s.state.value[e],M=>{(T.flush==="sync"?h:c)&&v({storeId:e,type:Bo.direct,events:g},M)},qs({},l,T)));return P},$dispose:R},L=va(x);s._s.set(e,L);const E=(s._a&&s._a.runWithContext||nA)(()=>s._e.run(()=>(o=by()).run(()=>t({action:I}))));for(const v in E){const T=E[v];if(ue(T)&&!rA(T)||ii(T))r||(_&&iA(T)&&(ue(T)?T.value=_[v]:yh(T,_[v])),s.state.value[e][v]=T);else if(typeof T=="function"){const P=I(T,v);E[v]=P,a.actions[v]=T}}return qs(L,E),qs(Dt(L),E),Object.defineProperty(L,"$state",{get:()=>s.state.value[e],set:v=>{b(T=>{qs(T,v)})}}),s._p.forEach(v=>{qs(L,o.run(()=>v({store:L,app:s._a,pinia:s,options:a})))}),_&&r&&n.hydrate&&n.hydrate(L.$state,_),c=!0,h=!0,L}/*! #__NO_SIDE_EFFECTS__ */function aA(e,t,n){let s;const i=typeof t=="function";s=i?n:t;function r(o,a){const l=zI();return o=o||(l?mn(Tv,null):null),o&&Dc(o),o=Ev,o._s.has(e)||(i?Av(e,t,s,o):oA(e,s,o)),o._s.get(e)}return r.$id=e,r}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const fr=typeof document<"u";function Sv(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function lA(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Sv(e.default)}const Nt=Object.assign;function Mu(e,t){const n={};for(const s in t){const i=t[s];n[s]=Pn(i)?i.map(e):e(i)}return n}const jo=()=>{},Pn=Array.isArray;function ng(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}const Rv=/#/g,cA=/&/g,uA=/\//g,hA=/=/g,dA=/\?/g,Cv=/\+/g,fA=/%5B/g,pA=/%5D/g,xv=/%5E/g,gA=/%60/g,kv=/%7B/g,mA=/%7C/g,Pv=/%7D/g,_A=/%20/g;function Td(e){return e==null?"":encodeURI(""+e).replace(mA,"|").replace(fA,"[").replace(pA,"]")}function yA(e){return Td(e).replace(kv,"{").replace(Pv,"}").replace(xv,"^")}function vh(e){return Td(e).replace(Cv,"%2B").replace(_A,"+").replace(Rv,"%23").replace(cA,"%26").replace(gA,"`").replace(kv,"{").replace(Pv,"}").replace(xv,"^")}function vA(e){return vh(e).replace(hA,"%3D")}function bA(e){return Td(e).replace(Rv,"%23").replace(dA,"%3F")}function wA(e){return bA(e).replace(uA,"%2F")}function ia(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const EA=/\/$/,TA=e=>e.replace(EA,"");function Nu(e,t,n="/"){let s,i={},r="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(s=t.slice(0,l),r=t.slice(l,a>0?a:t.length),i=e(r.slice(1))),a>=0&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=RA(s??t,n),{fullPath:s+r+o,path:s,query:i,hash:ia(o)}}function IA(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function sg(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function AA(e,t,n){const s=t.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&kr(t.matched[s],n.matched[i])&&Dv(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function kr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Dv(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!SA(e[n],t[n]))return!1;return!0}function SA(e,t){return Pn(e)?ig(e,t):Pn(t)?ig(t,e):e===t}function ig(e,t){return Pn(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function RA(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const Hs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let bh=(function(e){return e.pop="pop",e.push="push",e})({}),Vu=(function(e){return e.back="back",e.forward="forward",e.unknown="",e})({});function CA(e){if(!e)if(fr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),TA(e)}const xA=/^[^#]+#/;function kA(e,t){return e.replace(xA,"#")+t}function PA(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const Oc=()=>({left:window.scrollX,top:window.scrollY});function DA(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=PA(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function rg(e,t){return(history.state?history.state.position-t:-1)+e}const wh=new Map;function OA(e,t){wh.set(e,t)}function MA(e){const t=wh.get(e);return wh.delete(e),t}function NA(e){return typeof e=="string"||e&&typeof e=="object"}function Ov(e){return typeof e=="string"||typeof e=="symbol"}let ie=(function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e})({});const Mv=Symbol("");ie.MATCHER_NOT_FOUND+"",ie.NAVIGATION_GUARD_REDIRECT+"",ie.NAVIGATION_ABORTED+"",ie.NAVIGATION_CANCELLED+"",ie.NAVIGATION_DUPLICATED+"";function Pr(e,t){return Nt(new Error,{type:e,[Mv]:!0},t)}function fs(e,t){return e instanceof Error&&Mv in e&&(t==null||!!(e.type&t))}const VA=["params","query","hash"];function LA(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const n of VA)n in e&&(t[n]=e[n]);return JSON.stringify(t,null,2)}function FA(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<n.length;++s){const i=n[s].replace(Cv," "),r=i.indexOf("="),o=ia(r<0?i:i.slice(0,r)),a=r<0?null:ia(i.slice(r+1));if(o in t){let l=t[o];Pn(l)||(l=t[o]=[l]),l.push(a)}else t[o]=a}return t}function og(e){let t="";for(let n in e){const s=e[n];if(n=vA(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(Pn(s)?s.map(i=>i&&vh(i)):[s&&vh(s)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function UA(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=Pn(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const Nv=Symbol(""),ag=Symbol(""),Mc=Symbol(""),Id=Symbol(""),Eh=Symbol("");function mo(){let e=[];function t(s){return e.push(s),()=>{const i=e.indexOf(s);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function BA(e,t,n){const s=()=>{e[t].delete(n)};yd(s),Ky(s),Gy(()=>{e[t].add(n)}),e[t].add(n)}function jA(e){const t=mn(Nv,{}).value;t&&BA(t,"updateGuards",e)}function Ys(e,t,n,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(Pr(ie.NAVIGATION_ABORTED,{from:n,to:t})):f instanceof Error?l(f):NA(f)?l(Pr(ie.NAVIGATION_GUARD_REDIRECT,{from:t,to:f})):(o&&s.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},h=r(()=>e.call(s&&s.instances[i],t,n,c));let d=Promise.resolve(h);e.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function Lu(e,t,n,s,i=r=>r()){const r=[];for(const o of e)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(Sv(l)){const c=(l.__vccOpts||l)[t];c&&r.push(Ys(c,n,s,o,a,i))}else{let c=l();r.push(()=>c.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=lA(h)?h.default:h;o.mods[a]=h,o.components[a]=d;const f=(d.__vccOpts||d)[t];return f&&Ys(f,n,s,o,a,i)()}))}}return r}function $A(e,t){const n=[],s=[],i=[],r=Math.max(t.matched.length,e.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(e.matched.find(c=>kr(c,a))?s.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>kr(c,l))||i.push(l))}return[n,s,i]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let zA=()=>location.protocol+"//"+location.host;function Vv(e,t){const{pathname:n,search:s,hash:i}=t,r=e.indexOf("#");if(r>-1){let o=i.includes(e.slice(r))?e.slice(r).length:1,a=i.slice(o);return a[0]!=="/"&&(a="/"+a),sg(a,"")}return sg(n,e)+s+i}function HA(e,t,n,s){let i=[],r=[],o=null;const a=({state:f})=>{const g=Vv(e,location),_=n.value,y=t.value;let b=0;if(f){if(n.value=g,t.value=f,o&&o===_){o=null;return}b=y?f.position-y.position:0}else s(g);i.forEach(C=>{C(n.value,_,{delta:b,type:bh.pop,direction:b?b>0?Vu.forward:Vu.back:Vu.unknown})})};function l(){o=n.value}function c(f){i.push(f);const g=()=>{const _=i.indexOf(f);_>-1&&i.splice(_,1)};return r.push(g),g}function h(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(Nt({},f.state,{scroll:Oc()}),"")}}function d(){for(const f of r)f();r=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:l,listen:c,destroy:d}}function lg(e,t,n,s=!1,i=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:i?Oc():null}}function WA(e){const{history:t,location:n}=window,s={value:Vv(e,n)},i={value:t.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,c,h){const d=e.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?e:e.slice(d))+l:zA()+e+l;try{t[h?"replaceState":"pushState"](c,"",f),i.value=c}catch(g){console.error(g),n[h?"replace":"assign"](f)}}function o(l,c){r(l,Nt({},t.state,lg(i.value.back,l,i.value.forward,!0),c,{position:i.value.position}),!0),s.value=l}function a(l,c){const h=Nt({},i.value,t.state,{forward:l,scroll:Oc()});r(h.current,h,!0),r(l,Nt({},lg(s.value,l,null),{position:h.position+1},c),!1),s.value=l}return{location:s,state:i,push:a,replace:o}}function qA(e){e=CA(e);const t=WA(e),n=HA(e,t.state,t.location,t.replace);function s(r,o=!0){o||n.pauseListeners(),history.go(r)}const i=Nt({location:"",base:e,go:s,createHref:kA.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}let Ui=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e})({});var be=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e})(be||{});const GA={type:Ui.Static,value:""},KA=/[a-zA-Z0-9_]/;function YA(e){if(!e)return[[]];if(e==="/")return[[GA]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(g){throw new Error(`ERR (${n})/"${c}": ${g}`)}let n=be.Static,s=n;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,l,c="",h="";function d(){c&&(n===be.Static?r.push({type:Ui.Static,value:c}):n===be.Param||n===be.ParamRegExp||n===be.ParamRegExpEnd?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:Ui.Param,value:c,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==be.ParamRegExp){s=n,n=be.EscapeNext;continue}switch(n){case be.Static:l==="/"?(c&&d(),o()):l===":"?(d(),n=be.Param):f();break;case be.EscapeNext:f(),n=s;break;case be.Param:l==="("?n=be.ParamRegExp:KA.test(l)?f():(d(),n=be.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case be.ParamRegExp:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=be.ParamRegExpEnd:h+=l;break;case be.ParamRegExpEnd:d(),n=be.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:t("Unknown state");break}}return n===be.ParamRegExp&&t(`Unfinished custom RegExp for param "${c}"`),d(),o(),i}const cg="[^/]+?",QA={sensitive:!1,strict:!1,start:!0,end:!0};var Qe=(function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e})(Qe||{});const XA=/[.+*?^${}()[\]/\\]/g;function JA(e,t){const n=Nt({},QA,t),s=[];let i=n.start?"^":"";const r=[];for(const c of e){const h=c.length?[]:[Qe.Root];n.strict&&!c.length&&(i+="/");for(let d=0;d<c.length;d++){const f=c[d];let g=Qe.Segment+(n.sensitive?Qe.BonusCaseSensitive:0);if(f.type===Ui.Static)d||(i+="/"),i+=f.value.replace(XA,"\\$&"),g+=Qe.Static;else if(f.type===Ui.Param){const{value:_,repeatable:y,optional:b,regexp:C}=f;r.push({name:_,repeatable:y,optional:b});const R=C||cg;if(R!==cg){g+=Qe.BonusCustomRegExp;try{`${R}`}catch(x){throw new Error(`Invalid custom RegExp for param "${_}" (${R}): `+x.message)}}let I=y?`((?:${R})(?:/(?:${R}))*)`:`(${R})`;d||(I=b&&c.length<2?`(?:/${I})`:"/"+I),b&&(I+="?"),i+=I,g+=Qe.Dynamic,b&&(g+=Qe.BonusOptional),y&&(g+=Qe.BonusRepeatable),R===".*"&&(g+=Qe.BonusWildcard)}h.push(g)}s.push(h)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=Qe.BonusStrict}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const h=c.match(o),d={};if(!h)return null;for(let f=1;f<h.length;f++){const g=h[f]||"",_=r[f-1];d[_.name]=g&&_.repeatable?g.split("/"):g}return d}function l(c){let h="",d=!1;for(const f of e){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const g of f)if(g.type===Ui.Static)h+=g.value;else if(g.type===Ui.Param){const{value:_,repeatable:y,optional:b}=g,C=_ in c?c[_]:"";if(Pn(C)&&!y)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const R=Pn(C)?C.join("/"):C;if(!R)if(b)f.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${_}"`);h+=R}}return h||"/"}return{re:o,score:s,keys:r,parse:a,stringify:l}}function ZA(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===Qe.Static+Qe.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===Qe.Static+Qe.Segment?1:-1:0}function Lv(e,t){let n=0;const s=e.score,i=t.score;for(;n<s.length&&n<i.length;){const r=ZA(s[n],i[n]);if(r)return r;n++}if(Math.abs(i.length-s.length)===1){if(ug(s))return 1;if(ug(i))return-1}return i.length-s.length}function ug(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const tS={strict:!1,end:!0,sensitive:!1};function eS(e,t,n){const s=JA(YA(e.path),n),i=Nt(s,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function nS(e,t){const n=[],s=new Map;t=ng(tS,t);function i(d){return s.get(d)}function r(d,f,g){const _=!g,y=dg(d);y.aliasOf=g&&g.record;const b=ng(t,d),C=[y];if("alias"in d){const x=typeof d.alias=="string"?[d.alias]:d.alias;for(const L of x)C.push(dg(Nt({},y,{components:g?g.record.components:y.components,path:L,aliasOf:g?g.record:y})))}let R,I;for(const x of C){const{path:L}=x;if(f&&L[0]!=="/"){const W=f.record.path,E=W[W.length-1]==="/"?"":"/";x.path=f.record.path+(L&&E+L)}if(R=eS(x,f,b),g?g.alias.push(R):(I=I||R,I!==R&&I.alias.push(R),_&&d.name&&!fg(R)&&o(d.name)),Fv(R)&&l(R),y.children){const W=y.children;for(let E=0;E<W.length;E++)r(W[E],R,g&&g.children[E])}g=g||R}return I?()=>{o(I)}:jo}function o(d){if(Ov(d)){const f=s.get(d);f&&(s.delete(d),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(d);f>-1&&(n.splice(f,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const f=rS(d,n);n.splice(f,0,d),d.record.name&&!fg(d)&&s.set(d.record.name,d)}function c(d,f){let g,_={},y,b;if("name"in d&&d.name){if(g=s.get(d.name),!g)throw Pr(ie.MATCHER_NOT_FOUND,{location:d});b=g.record.name,_=Nt(hg(f.params,g.keys.filter(I=>!I.optional).concat(g.parent?g.parent.keys.filter(I=>I.optional):[]).map(I=>I.name)),d.params&&hg(d.params,g.keys.map(I=>I.name))),y=g.stringify(_)}else if(d.path!=null)y=d.path,g=n.find(I=>I.re.test(y)),g&&(_=g.parse(y),b=g.record.name);else{if(g=f.name?s.get(f.name):n.find(I=>I.re.test(f.path)),!g)throw Pr(ie.MATCHER_NOT_FOUND,{location:d,currentLocation:f});b=g.record.name,_=Nt({},f.params,d.params),y=g.stringify(_)}const C=[];let R=g;for(;R;)C.unshift(R.record),R=R.parent;return{name:b,path:y,params:_,matched:C,meta:iS(C)}}e.forEach(d=>r(d));function h(){n.length=0,s.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:i}}function hg(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function dg(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:sS(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function sS(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function fg(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function iS(e){return e.reduce((t,n)=>Nt(t,n.meta),{})}function rS(e,t){let n=0,s=t.length;for(;n!==s;){const r=n+s>>1;Lv(e,t[r])<0?s=r:n=r+1}const i=oS(e);return i&&(s=t.lastIndexOf(i,s-1)),s}function oS(e){let t=e;for(;t=t.parent;)if(Fv(t)&&Lv(e,t)===0)return t}function Fv({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function pg(e){const t=mn(Mc),n=mn(Id),s=Lt(()=>{const l=Gn(e.to);return t.resolve(l)}),i=Lt(()=>{const{matched:l}=s.value,{length:c}=l,h=l[c-1],d=n.matched;if(!h||!d.length)return-1;const f=d.findIndex(kr.bind(null,h));if(f>-1)return f;const g=gg(l[c-2]);return c>1&&gg(h)===g&&d[d.length-1].path!==g?d.findIndex(kr.bind(null,l[c-2])):f}),r=Lt(()=>i.value>-1&&hS(n.params,s.value.params)),o=Lt(()=>i.value>-1&&i.value===n.matched.length-1&&Dv(n.params,s.value.params));function a(l={}){if(uS(l)){const c=t[Gn(e.replace)?"replace":"push"](Gn(e.to)).catch(jo);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:Lt(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}function aS(e){return e.length===1?e[0]:e}const lS=Hy({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:pg,setup(e,{slots:t}){const n=va(pg(e)),{options:s}=mn(Mc),i=Lt(()=>({[mg(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[mg(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&aS(t.default(n));return e.custom?r:yv("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),cS=lS;function uS(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function hS(e,t){for(const n in t){const s=t[n],i=e[n];if(typeof s=="string"){if(s!==i)return!1}else if(!Pn(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function gg(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const mg=(e,t,n)=>e??t??n,dS=Hy({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=mn(Eh),i=Lt(()=>e.route||s.value),r=mn(ag,0),o=Lt(()=>{let c=Gn(r);const{matched:h}=i.value;let d;for(;(d=h[c])&&!d.components;)c++;return c}),a=Lt(()=>i.value.matched[o.value]);_l(ag,Lt(()=>o.value+1)),_l(Nv,a),_l(Eh,i);const l=Z();return As(()=>[l.value,a.value,e.name],([c,h,d],[f,g,_])=>{h&&(h.instances[d]=c,g&&g!==h&&c&&c===f&&(h.leaveGuards.size||(h.leaveGuards=g.leaveGuards),h.updateGuards.size||(h.updateGuards=g.updateGuards))),c&&h&&(!g||!kr(h,g)||!f)&&(h.enterCallbacks[d]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=i.value,h=e.name,d=a.value,f=d&&d.components[h];if(!f)return _g(n.default,{Component:f,route:c});const g=d.props[h],_=g?g===!0?c.params:typeof g=="function"?g(c):g:null,b=yv(f,Nt({},_,t,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(d.instances[h]=null)},ref:l}));return _g(n.default,{Component:b,route:c})||b}}});function _g(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const fS=dS;function pS(e){const t=nS(e.routes,e),n=e.parseQuery||FA,s=e.stringifyQuery||og,i=e.history,r=mo(),o=mo(),a=mo(),l=rI(Hs);let c=Hs;fr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Mu.bind(null,j=>""+j),d=Mu.bind(null,wA),f=Mu.bind(null,ia);function g(j,ot){let st,lt;return Ov(j)?(st=t.getRecordMatcher(j),lt=ot):lt=j,t.addRoute(lt,st)}function _(j){const ot=t.getRecordMatcher(j);ot&&t.removeRoute(ot)}function y(){return t.getRoutes().map(j=>j.record)}function b(j){return!!t.getRecordMatcher(j)}function C(j,ot){if(ot=Nt({},ot||l.value),typeof j=="string"){const N=Nu(n,j,ot.path),z=t.resolve({path:N.path},ot),q=i.createHref(N.fullPath);return Nt(N,z,{params:f(z.params),hash:ia(N.hash),redirectedFrom:void 0,href:q})}let st;if(j.path!=null)st=Nt({},j,{path:Nu(n,j.path,ot.path).path});else{const N=Nt({},j.params);for(const z in N)N[z]==null&&delete N[z];st=Nt({},j,{params:d(N)}),ot.params=d(ot.params)}const lt=t.resolve(st,ot),St=j.hash||"";lt.params=h(f(lt.params));const k=IA(s,Nt({},j,{hash:yA(St),path:lt.path})),O=i.createHref(k);return Nt({fullPath:k,hash:St,query:s===og?UA(j.query):j.query||{}},lt,{redirectedFrom:void 0,href:O})}function R(j){return typeof j=="string"?Nu(n,j,l.value.path):Nt({},j)}function I(j,ot){if(c!==j)return Pr(ie.NAVIGATION_CANCELLED,{from:ot,to:j})}function x(j){return E(j)}function L(j){return x(Nt(R(j),{replace:!0}))}function W(j,ot){const st=j.matched[j.matched.length-1];if(st&&st.redirect){const{redirect:lt}=st;let St=typeof lt=="function"?lt(j,ot):lt;return typeof St=="string"&&(St=St.includes("?")||St.includes("#")?St=R(St):{path:St},St.params={}),Nt({query:j.query,hash:j.hash,params:St.path!=null?{}:j.params},St)}}function E(j,ot){const st=c=C(j),lt=l.value,St=j.state,k=j.force,O=j.replace===!0,N=W(st,lt);if(N)return E(Nt(R(N),{state:typeof N=="object"?Nt({},St,N.state):St,force:k,replace:O}),ot||st);const z=st;z.redirectedFrom=ot;let q;return!k&&AA(s,lt,st)&&(q=Pr(ie.NAVIGATION_DUPLICATED,{to:z,from:lt}),Te(lt,lt,!0,!1)),(q?Promise.resolve(q):P(z,lt)).catch(B=>fs(B)?fs(B,ie.NAVIGATION_GUARD_REDIRECT)?B:Gt(B):U(B,z,lt)).then(B=>{if(B){if(fs(B,ie.NAVIGATION_GUARD_REDIRECT))return E(Nt({replace:O},R(B.to),{state:typeof B.to=="object"?Nt({},St,B.to.state):St,force:k}),ot||z)}else B=M(z,lt,!0,O,St);return D(z,lt,B),B})}function v(j,ot){const st=I(j,ot);return st?Promise.reject(st):Promise.resolve()}function T(j){const ot=ye.values().next().value;return ot&&typeof ot.runWithContext=="function"?ot.runWithContext(j):j()}function P(j,ot){let st;const[lt,St,k]=$A(j,ot);st=Lu(lt.reverse(),"beforeRouteLeave",j,ot);for(const N of lt)N.leaveGuards.forEach(z=>{st.push(Ys(z,j,ot))});const O=v.bind(null,j,ot);return st.push(O),te(st).then(()=>{st=[];for(const N of r.list())st.push(Ys(N,j,ot));return st.push(O),te(st)}).then(()=>{st=Lu(St,"beforeRouteUpdate",j,ot);for(const N of St)N.updateGuards.forEach(z=>{st.push(Ys(z,j,ot))});return st.push(O),te(st)}).then(()=>{st=[];for(const N of k)if(N.beforeEnter)if(Pn(N.beforeEnter))for(const z of N.beforeEnter)st.push(Ys(z,j,ot));else st.push(Ys(N.beforeEnter,j,ot));return st.push(O),te(st)}).then(()=>(j.matched.forEach(N=>N.enterCallbacks={}),st=Lu(k,"beforeRouteEnter",j,ot,T),st.push(O),te(st))).then(()=>{st=[];for(const N of o.list())st.push(Ys(N,j,ot));return st.push(O),te(st)}).catch(N=>fs(N,ie.NAVIGATION_CANCELLED)?N:Promise.reject(N))}function D(j,ot,st){a.list().forEach(lt=>T(()=>lt(j,ot,st)))}function M(j,ot,st,lt,St){const k=I(j,ot);if(k)return k;const O=ot===Hs,N=fr?history.state:{};st&&(lt||O?i.replace(j.fullPath,Nt({scroll:O&&N&&N.scroll},St)):i.push(j.fullPath,St)),l.value=j,Te(j,ot,st,O),Gt()}let S;function It(){S||(S=i.listen((j,ot,st)=>{if(!Ce.listening)return;const lt=C(j),St=W(lt,Ce.currentRoute.value);if(St){E(Nt(St,{replace:!0,force:!0}),lt).catch(jo);return}c=lt;const k=l.value;fr&&OA(rg(k.fullPath,st.delta),Oc()),P(lt,k).catch(O=>fs(O,ie.NAVIGATION_ABORTED|ie.NAVIGATION_CANCELLED)?O:fs(O,ie.NAVIGATION_GUARD_REDIRECT)?(E(Nt(R(O.to),{force:!0}),lt).then(N=>{fs(N,ie.NAVIGATION_ABORTED|ie.NAVIGATION_DUPLICATED)&&!st.delta&&st.type===bh.pop&&i.go(-1,!1)}).catch(jo),Promise.reject()):(st.delta&&i.go(-st.delta,!1),U(O,lt,k))).then(O=>{O=O||M(lt,k,!1),O&&(st.delta&&!fs(O,ie.NAVIGATION_CANCELLED)?i.go(-st.delta,!1):st.type===bh.pop&&fs(O,ie.NAVIGATION_ABORTED|ie.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),D(lt,k,O)}).catch(jo)}))}let yt=mo(),ht=mo(),X;function U(j,ot,st){Gt(j);const lt=ht.list();return lt.length?lt.forEach(St=>St(j,ot,st)):console.error(j),Promise.reject(j)}function tt(){return X&&l.value!==Hs?Promise.resolve():new Promise((j,ot)=>{yt.add([j,ot])})}function Gt(j){return X||(X=!j,It(),yt.list().forEach(([ot,st])=>j?st(j):ot()),yt.reset()),j}function Te(j,ot,st,lt){const{scrollBehavior:St}=e;if(!fr||!St)return Promise.resolve();const k=!st&&MA(rg(j.fullPath,0))||(lt||!st)&&history.state&&history.state.scroll||null;return jr().then(()=>St(j,ot,k)).then(O=>O&&DA(O)).catch(O=>U(O,j,ot))}const Zt=j=>i.go(j);let Ge;const ye=new Set,Ce={currentRoute:l,listening:!0,addRoute:g,removeRoute:_,clearRoutes:t.clearRoutes,hasRoute:b,getRoutes:y,resolve:C,options:e,push:x,replace:L,go:Zt,back:()=>Zt(-1),forward:()=>Zt(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:ht.add,isReady:tt,install(j){j.component("RouterLink",cS),j.component("RouterView",fS),j.config.globalProperties.$router=Ce,Object.defineProperty(j.config.globalProperties,"$route",{enumerable:!0,get:()=>Gn(l)}),fr&&!Ge&&l.value===Hs&&(Ge=!0,x(i.location).catch(lt=>{}));const ot={};for(const lt in Hs)Object.defineProperty(ot,lt,{get:()=>l.value[lt],enumerable:!0});j.provide(Mc,Ce),j.provide(Id,Vy(ot)),j.provide(Eh,l);const st=j.unmount;ye.add(j),j.unmount=function(){ye.delete(j),ye.size<1&&(c=Hs,S&&S(),S=null,l.value=Hs,Ge=!1,X=!1),st()}}};function te(j){return j.reduce((ot,st)=>ot.then(()=>T(st)),Promise.resolve())}return Ce}function Ei(){return mn(Mc)}function Uv(e){return mn(Id)}const Ne=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},gS={class:"navigation_bar_holder"},mS=["onClick"],_S={__name:"navigation",setup(e){const t=Uv(),n=Ei(),s={Home:{name:"Home",iconClass:"fa fa-home"},Journal:{name:"Journal",iconClass:"fa fa-book"},Therapists:{name:"Therapists",iconClass:"fa fa-address-book"},Courses:{name:"Courses",iconClass:"fas fa-graduation-cap"},Profile:{name:"Profile",iconClass:"fa fa-id-card"}},i=o=>{t.name!==o&&n.push({name:o})},r=o=>t.name===o||t.name?.toString().startsWith(o);return(o,a)=>(G(),K("div",gS,[(G(),K(Et,null,Jt(s,(l,c)=>A("div",{key:c,class:"navigation_item_holder inter font_size_xxs"},[A("div",{class:_n(["navigation_item",{active:r(c)}]),onClick:h=>i(l.name)},[A("i",{class:_n(l.iconClass)},null,2),A("div",null,dt(l.name),1)],10,mS)])),64))]))}},yS=Ne(_S,[["__scopeId","data-v-4d249d5f"]]),vS={class:"app_holder"},bS={__name:"App",setup(e){return(t,n)=>{const s=DI("router-view");return G(),K("div",vS,[Je(s),Je(yS)])}}},wS="modulepreload",ES=function(e){return"/"+e},yg={},TS=function(t,n,s){let i=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(h=>Promise.resolve(h).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");i=l(n.map(c=>{if(c=ES(c),c in yg)return;yg[c]=!0;const h=c.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=h?"stylesheet":wS,h||(f.as="script"),f.crossOrigin="",f.href=c,a&&f.setAttribute("nonce",a),document.head.appendChild(f),h)return new Promise((g,_)=>{f.addEventListener("load",g),f.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return t().catch(r)})},IS=()=>{};var vg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++s)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},AS=function(e){const t=[];let n=0,s=0;for(;n<e.length;){const i=e[n++];if(i<128)t[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=e[n++];t[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=e[n++],o=e[n++],a=e[n++],l=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;t[s++]=String.fromCharCode(55296+(l>>10)),t[s++]=String.fromCharCode(56320+(l&1023))}else{const r=e[n++],o=e[n++];t[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return t.join("")},jv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<e.length;i+=3){const r=e[i],o=i+1<e.length,a=o?e[i+1]:0,l=i+2<e.length,c=l?e[i+2]:0,h=r>>2,d=(r&3)<<4|a>>4;let f=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(f=64)),s.push(n[h],n[d],n[f],n[g])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Bv(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):AS(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<e.length;){const r=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const c=i<e.length?n[e.charAt(i)]:64;++i;const d=i<e.length?n[e.charAt(i)]:64;if(++i,r==null||a==null||c==null||d==null)throw new SS;const f=r<<2|a>>4;if(s.push(f),c!==64){const g=a<<4&240|c>>2;if(s.push(g),d!==64){const _=c<<6&192|d;s.push(_)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class SS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RS=function(e){const t=Bv(e);return jv.encodeByteArray(t,!0)},Hl=function(e){return RS(e).replace(/\./g,"")},$v=function(e){try{return jv.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=()=>CS().__FIREBASE_DEFAULTS__,kS=()=>{if(typeof process>"u"||typeof vg>"u")return;const e=vg.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},PS=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&$v(e[1]);return t&&JSON.parse(t)},Nc=()=>{try{return IS()||xS()||kS()||PS()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},zv=e=>Nc()?.emulatorHosts?.[e],Hv=e=>{const t=zv(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},Wv=()=>Nc()?.config,qv=e=>Nc()?.[`_${e}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ad(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Hl(JSON.stringify(n)),Hl(JSON.stringify(o)),""].join(".")}const $o={};function OS(){const e={prod:[],emulator:[]};for(const t of Object.keys($o))$o[t]?e.emulator.push(t):e.prod.push(t);return e}function MS(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let bg=!1;function Sd(e,t){if(typeof window>"u"||typeof document>"u"||!tr(window.location.host)||$o[e]===t||$o[e]||bg)return;$o[e]=t;function n(f){return`__firebase__banner__${f}`}const s="__firebase__banner",r=OS().prod.length>0;function o(){const f=document.getElementById(s);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{bg=!0,o()},f}function h(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=MS(s),g=n("text"),_=document.getElementById(g)||document.createElement("span"),y=n("learnmore"),b=document.getElementById(y)||document.createElement("a"),C=n("preprendIcon"),R=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const I=f.element;a(I),h(b,y);const x=c();l(R,C),I.append(R,_,b,x),document.body.appendChild(I)}r?(_.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function VS(){const e=Nc()?.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FS(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function US(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BS(){const e=qe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function jS(){return!VS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $S(){try{return typeof indexedDB=="object"}catch{return!1}}function zS(){return new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="FirebaseError";class us extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=HS,Object.setPrototypeOf(this,us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ea.prototype.create)}}class Ea{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},i=`${this.service}/${t}`,r=this.errors[t],o=r?WS(r,s):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new us(i,a,s)}}function WS(e,t){return e.replace(qS,(n,s)=>{const i=t[s];return i!=null?String(i):`<${s}?>`})}const qS=/\{\$([^}]+)}/g;function GS(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function fi(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const i of n){if(!s.includes(i))return!1;const r=e[i],o=t[i];if(wg(r)&&wg(o)){if(!fi(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function wg(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(e){const t=[];for(const[n,s]of Object.entries(e))Array.isArray(s)?s.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function To(e){const t={};return e.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,r]=s.split("=");t[decodeURIComponent(i)]=decodeURIComponent(r)}}),t}function Io(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function KS(e,t){const n=new YS(e,t);return n.subscribe.bind(n)}class YS{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let i;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");QS(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:s},i.next===void 0&&(i.next=Fu),i.error===void 0&&(i.error=Fu),i.complete===void 0&&(i.complete=Fu);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QS(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Fu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(e){return e&&e._delegate?e._delegate:e}class pi{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new DS;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(ZS(t))try{this.getOrInitializeService({instanceIdentifier:Li})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(t=Li){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Li){return this.instances.has(t)}getOptions(t=Li){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);s===a&&o.resolve(i)}return i}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(s)??new Set;i.add(t),this.onInitCallbacks.set(s,i);const r=this.instances.get(s);return r&&t(r,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:JS(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Li){return this.component?this.component.multipleInstances?t:Li:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JS(e){return e===Li?void 0:e}function ZS(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new XS(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Rt||(Rt={}));const eR={debug:Rt.DEBUG,verbose:Rt.VERBOSE,info:Rt.INFO,warn:Rt.WARN,error:Rt.ERROR,silent:Rt.SILENT},nR=Rt.INFO,sR={[Rt.DEBUG]:"log",[Rt.VERBOSE]:"log",[Rt.INFO]:"info",[Rt.WARN]:"warn",[Rt.ERROR]:"error"},iR=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),i=sR[t];if(i)console[i](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Rd{constructor(t){this.name=t,this._logLevel=nR,this._logHandler=iR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Rt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?eR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Rt.DEBUG,...t),this._logHandler(this,Rt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Rt.VERBOSE,...t),this._logHandler(this,Rt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Rt.INFO,...t),this._logHandler(this,Rt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Rt.WARN,...t),this._logHandler(this,Rt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Rt.ERROR,...t),this._logHandler(this,Rt.ERROR,...t)}}const rR=(e,t)=>t.some(n=>e instanceof n);let Eg,Tg;function oR(){return Eg||(Eg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aR(){return Tg||(Tg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kv=new WeakMap,Th=new WeakMap,Yv=new WeakMap,Uu=new WeakMap,Cd=new WeakMap;function lR(e){const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{n(ri(e.result)),i()},o=()=>{s(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Kv.set(n,e)}).catch(()=>{}),Cd.set(t,e),t}function cR(e){if(Th.has(e))return;const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)});Th.set(e,t)}let Ih={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Th.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Yv.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ri(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function uR(e){Ih=e(Ih)}function hR(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=e.call(Bu(this),t,...n);return Yv.set(s,t.sort?t.sort():[t]),ri(s)}:aR().includes(e)?function(...t){return e.apply(Bu(this),t),ri(Kv.get(this))}:function(...t){return ri(e.apply(Bu(this),t))}}function dR(e){return typeof e=="function"?hR(e):(e instanceof IDBTransaction&&cR(e),rR(e,oR())?new Proxy(e,Ih):e)}function ri(e){if(e instanceof IDBRequest)return lR(e);if(Uu.has(e))return Uu.get(e);const t=dR(e);return t!==e&&(Uu.set(e,t),Cd.set(t,e)),t}const Bu=e=>Cd.get(e);function fR(e,t,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(e,t),a=ri(o);return s&&o.addEventListener("upgradeneeded",l=>{s(ri(o.result),l.oldVersion,l.newVersion,ri(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const pR=["get","getKey","getAll","getAllKeys","count"],gR=["put","add","delete","clear"],ju=new Map;function Ig(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ju.get(t))return ju.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,i=gR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||pR.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return ju.set(t,r),r}uR(e=>({...e,get:(t,n,s)=>Ig(t,n)||e.get(t,n,s),has:(t,n)=>!!Ig(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_R(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function _R(e){return e.getComponent()?.type==="VERSION"}const Ah="@firebase/app",Ag="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new Rd("@firebase/app"),yR="@firebase/app-compat",vR="@firebase/analytics-compat",bR="@firebase/analytics",wR="@firebase/app-check-compat",ER="@firebase/app-check",TR="@firebase/auth",IR="@firebase/auth-compat",AR="@firebase/database",SR="@firebase/data-connect",RR="@firebase/database-compat",CR="@firebase/functions",xR="@firebase/functions-compat",kR="@firebase/installations",PR="@firebase/installations-compat",DR="@firebase/messaging",OR="@firebase/messaging-compat",MR="@firebase/performance",NR="@firebase/performance-compat",VR="@firebase/remote-config",LR="@firebase/remote-config-compat",FR="@firebase/storage",UR="@firebase/storage-compat",BR="@firebase/firestore",jR="@firebase/ai",$R="@firebase/firestore-compat",zR="firebase",HR="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh="[DEFAULT]",WR={[Ah]:"fire-core",[yR]:"fire-core-compat",[bR]:"fire-analytics",[vR]:"fire-analytics-compat",[ER]:"fire-app-check",[wR]:"fire-app-check-compat",[TR]:"fire-auth",[IR]:"fire-auth-compat",[AR]:"fire-rtdb",[SR]:"fire-data-connect",[RR]:"fire-rtdb-compat",[CR]:"fire-fn",[xR]:"fire-fn-compat",[kR]:"fire-iid",[PR]:"fire-iid-compat",[DR]:"fire-fcm",[OR]:"fire-fcm-compat",[MR]:"fire-perf",[NR]:"fire-perf-compat",[VR]:"fire-rc",[LR]:"fire-rc-compat",[FR]:"fire-gcs",[UR]:"fire-gcs-compat",[BR]:"fire-fst",[$R]:"fire-fst-compat",[jR]:"fire-vertex","fire-js":"fire-js",[zR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=new Map,qR=new Map,Rh=new Map;function Sg(e,t){try{e.container.addComponent(t)}catch(n){ks.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Gi(e){const t=e.name;if(Rh.has(t))return ks.debug(`There were multiple attempts to register component ${t}.`),!1;Rh.set(t,e);for(const n of Wl.values())Sg(n,e);for(const n of qR.values())Sg(n,e);return!0}function Vc(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function hn(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oi=new Ea("app","Firebase",GR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new pi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw oi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=HR;function Qv(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const s={name:Sh,automaticDataCollectionEnabled:!0,...t},i=s.name;if(typeof i!="string"||!i)throw oi.create("bad-app-name",{appName:String(i)});if(n||(n=Wv()),!n)throw oi.create("no-options");const r=Wl.get(i);if(r){if(fi(n,r.options)&&fi(s,r.config))return r;throw oi.create("duplicate-app",{appName:i})}const o=new tR(i);for(const l of Rh.values())o.addComponent(l);const a=new KR(n,s,o);return Wl.set(i,a),a}function xd(e=Sh){const t=Wl.get(e);if(!t&&e===Sh&&Wv())return Qv();if(!t)throw oi.create("no-app",{appName:e});return t}function Yn(e,t,n){let s=WR[e]??e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),r=t.match(/\s|\//);if(i||r){const o=[`Unable to register library "${s}" with version "${t}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&r&&o.push("and"),r&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ks.warn(o.join(" "));return}Gi(new pi(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR="firebase-heartbeat-database",QR=1,ra="firebase-heartbeat-store";let $u=null;function Xv(){return $u||($u=fR(YR,QR,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(ra)}catch(n){console.warn(n)}}}}).catch(e=>{throw oi.create("idb-open",{originalErrorMessage:e.message})})),$u}async function XR(e){try{const n=(await Xv()).transaction(ra),s=await n.objectStore(ra).get(Jv(e));return await n.done,s}catch(t){if(t instanceof us)ks.warn(t.message);else{const n=oi.create("idb-get",{originalErrorMessage:t?.message});ks.warn(n.message)}}}async function Rg(e,t){try{const s=(await Xv()).transaction(ra,"readwrite");await s.objectStore(ra).put(t,Jv(e)),await s.done}catch(n){if(n instanceof us)ks.warn(n.message);else{const s=oi.create("idb-set",{originalErrorMessage:n?.message});ks.warn(s.message)}}}function Jv(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=1024,ZR=30;class tC{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new nC(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Cg();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>ZR){const i=sC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){ks.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Cg(),{heartbeatsToSend:n,unsentEntries:s}=eC(this._heartbeatsCache.heartbeats),i=Hl(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return ks.warn(t),""}}}function Cg(){return new Date().toISOString().substring(0,10)}function eC(e,t=JR){const n=[];let s=e.slice();for(const i of e){const r=n.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),xg(n)>t){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),xg(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class nC{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $S()?zS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await XR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Rg(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Rg(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function xg(e){return Hl(JSON.stringify({version:2,heartbeats:e})).length}function sC(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(e){Gi(new pi("platform-logger",t=>new mR(t),"PRIVATE")),Gi(new pi("heartbeat",t=>new tC(t),"PRIVATE")),Yn(Ah,Ag,e),Yn(Ah,Ag,"esm2020"),Yn("fire-js","")}iC("");var kg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ai,Zv;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,v){function T(){}T.prototype=v.prototype,E.F=v.prototype,E.prototype=new T,E.prototype.constructor=E,E.D=function(P,D,M){for(var S=Array(arguments.length-2),It=2;It<arguments.length;It++)S[It-2]=arguments[It];return v.prototype[D].apply(P,S)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,T){T||(T=0);const P=Array(16);if(typeof v=="string")for(var D=0;D<16;++D)P[D]=v.charCodeAt(T++)|v.charCodeAt(T++)<<8|v.charCodeAt(T++)<<16|v.charCodeAt(T++)<<24;else for(D=0;D<16;++D)P[D]=v[T++]|v[T++]<<8|v[T++]<<16|v[T++]<<24;v=E.g[0],T=E.g[1],D=E.g[2];let M=E.g[3],S;S=v+(M^T&(D^M))+P[0]+3614090360&4294967295,v=T+(S<<7&4294967295|S>>>25),S=M+(D^v&(T^D))+P[1]+3905402710&4294967295,M=v+(S<<12&4294967295|S>>>20),S=D+(T^M&(v^T))+P[2]+606105819&4294967295,D=M+(S<<17&4294967295|S>>>15),S=T+(v^D&(M^v))+P[3]+3250441966&4294967295,T=D+(S<<22&4294967295|S>>>10),S=v+(M^T&(D^M))+P[4]+4118548399&4294967295,v=T+(S<<7&4294967295|S>>>25),S=M+(D^v&(T^D))+P[5]+1200080426&4294967295,M=v+(S<<12&4294967295|S>>>20),S=D+(T^M&(v^T))+P[6]+2821735955&4294967295,D=M+(S<<17&4294967295|S>>>15),S=T+(v^D&(M^v))+P[7]+4249261313&4294967295,T=D+(S<<22&4294967295|S>>>10),S=v+(M^T&(D^M))+P[8]+1770035416&4294967295,v=T+(S<<7&4294967295|S>>>25),S=M+(D^v&(T^D))+P[9]+2336552879&4294967295,M=v+(S<<12&4294967295|S>>>20),S=D+(T^M&(v^T))+P[10]+4294925233&4294967295,D=M+(S<<17&4294967295|S>>>15),S=T+(v^D&(M^v))+P[11]+2304563134&4294967295,T=D+(S<<22&4294967295|S>>>10),S=v+(M^T&(D^M))+P[12]+1804603682&4294967295,v=T+(S<<7&4294967295|S>>>25),S=M+(D^v&(T^D))+P[13]+4254626195&4294967295,M=v+(S<<12&4294967295|S>>>20),S=D+(T^M&(v^T))+P[14]+2792965006&4294967295,D=M+(S<<17&4294967295|S>>>15),S=T+(v^D&(M^v))+P[15]+1236535329&4294967295,T=D+(S<<22&4294967295|S>>>10),S=v+(D^M&(T^D))+P[1]+4129170786&4294967295,v=T+(S<<5&4294967295|S>>>27),S=M+(T^D&(v^T))+P[6]+3225465664&4294967295,M=v+(S<<9&4294967295|S>>>23),S=D+(v^T&(M^v))+P[11]+643717713&4294967295,D=M+(S<<14&4294967295|S>>>18),S=T+(M^v&(D^M))+P[0]+3921069994&4294967295,T=D+(S<<20&4294967295|S>>>12),S=v+(D^M&(T^D))+P[5]+3593408605&4294967295,v=T+(S<<5&4294967295|S>>>27),S=M+(T^D&(v^T))+P[10]+38016083&4294967295,M=v+(S<<9&4294967295|S>>>23),S=D+(v^T&(M^v))+P[15]+3634488961&4294967295,D=M+(S<<14&4294967295|S>>>18),S=T+(M^v&(D^M))+P[4]+3889429448&4294967295,T=D+(S<<20&4294967295|S>>>12),S=v+(D^M&(T^D))+P[9]+568446438&4294967295,v=T+(S<<5&4294967295|S>>>27),S=M+(T^D&(v^T))+P[14]+3275163606&4294967295,M=v+(S<<9&4294967295|S>>>23),S=D+(v^T&(M^v))+P[3]+4107603335&4294967295,D=M+(S<<14&4294967295|S>>>18),S=T+(M^v&(D^M))+P[8]+1163531501&4294967295,T=D+(S<<20&4294967295|S>>>12),S=v+(D^M&(T^D))+P[13]+2850285829&4294967295,v=T+(S<<5&4294967295|S>>>27),S=M+(T^D&(v^T))+P[2]+4243563512&4294967295,M=v+(S<<9&4294967295|S>>>23),S=D+(v^T&(M^v))+P[7]+1735328473&4294967295,D=M+(S<<14&4294967295|S>>>18),S=T+(M^v&(D^M))+P[12]+2368359562&4294967295,T=D+(S<<20&4294967295|S>>>12),S=v+(T^D^M)+P[5]+4294588738&4294967295,v=T+(S<<4&4294967295|S>>>28),S=M+(v^T^D)+P[8]+2272392833&4294967295,M=v+(S<<11&4294967295|S>>>21),S=D+(M^v^T)+P[11]+1839030562&4294967295,D=M+(S<<16&4294967295|S>>>16),S=T+(D^M^v)+P[14]+4259657740&4294967295,T=D+(S<<23&4294967295|S>>>9),S=v+(T^D^M)+P[1]+2763975236&4294967295,v=T+(S<<4&4294967295|S>>>28),S=M+(v^T^D)+P[4]+1272893353&4294967295,M=v+(S<<11&4294967295|S>>>21),S=D+(M^v^T)+P[7]+4139469664&4294967295,D=M+(S<<16&4294967295|S>>>16),S=T+(D^M^v)+P[10]+3200236656&4294967295,T=D+(S<<23&4294967295|S>>>9),S=v+(T^D^M)+P[13]+681279174&4294967295,v=T+(S<<4&4294967295|S>>>28),S=M+(v^T^D)+P[0]+3936430074&4294967295,M=v+(S<<11&4294967295|S>>>21),S=D+(M^v^T)+P[3]+3572445317&4294967295,D=M+(S<<16&4294967295|S>>>16),S=T+(D^M^v)+P[6]+76029189&4294967295,T=D+(S<<23&4294967295|S>>>9),S=v+(T^D^M)+P[9]+3654602809&4294967295,v=T+(S<<4&4294967295|S>>>28),S=M+(v^T^D)+P[12]+3873151461&4294967295,M=v+(S<<11&4294967295|S>>>21),S=D+(M^v^T)+P[15]+530742520&4294967295,D=M+(S<<16&4294967295|S>>>16),S=T+(D^M^v)+P[2]+3299628645&4294967295,T=D+(S<<23&4294967295|S>>>9),S=v+(D^(T|~M))+P[0]+4096336452&4294967295,v=T+(S<<6&4294967295|S>>>26),S=M+(T^(v|~D))+P[7]+1126891415&4294967295,M=v+(S<<10&4294967295|S>>>22),S=D+(v^(M|~T))+P[14]+2878612391&4294967295,D=M+(S<<15&4294967295|S>>>17),S=T+(M^(D|~v))+P[5]+4237533241&4294967295,T=D+(S<<21&4294967295|S>>>11),S=v+(D^(T|~M))+P[12]+1700485571&4294967295,v=T+(S<<6&4294967295|S>>>26),S=M+(T^(v|~D))+P[3]+2399980690&4294967295,M=v+(S<<10&4294967295|S>>>22),S=D+(v^(M|~T))+P[10]+4293915773&4294967295,D=M+(S<<15&4294967295|S>>>17),S=T+(M^(D|~v))+P[1]+2240044497&4294967295,T=D+(S<<21&4294967295|S>>>11),S=v+(D^(T|~M))+P[8]+1873313359&4294967295,v=T+(S<<6&4294967295|S>>>26),S=M+(T^(v|~D))+P[15]+4264355552&4294967295,M=v+(S<<10&4294967295|S>>>22),S=D+(v^(M|~T))+P[6]+2734768916&4294967295,D=M+(S<<15&4294967295|S>>>17),S=T+(M^(D|~v))+P[13]+1309151649&4294967295,T=D+(S<<21&4294967295|S>>>11),S=v+(D^(T|~M))+P[4]+4149444226&4294967295,v=T+(S<<6&4294967295|S>>>26),S=M+(T^(v|~D))+P[11]+3174756917&4294967295,M=v+(S<<10&4294967295|S>>>22),S=D+(v^(M|~T))+P[2]+718787259&4294967295,D=M+(S<<15&4294967295|S>>>17),S=T+(M^(D|~v))+P[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(D+(S<<21&4294967295|S>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+M&4294967295}s.prototype.v=function(E,v){v===void 0&&(v=E.length);const T=v-this.blockSize,P=this.C;let D=this.h,M=0;for(;M<v;){if(D==0)for(;M<=T;)i(this,E,M),M+=this.blockSize;if(typeof E=="string"){for(;M<v;)if(P[D++]=E.charCodeAt(M++),D==this.blockSize){i(this,P),D=0;break}}else for(;M<v;)if(P[D++]=E[M++],D==this.blockSize){i(this,P),D=0;break}}this.h=D,this.o+=v},s.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;v=this.o*8;for(var T=E.length-8;T<E.length;++T)E[T]=v&255,v/=256;for(this.v(E),E=Array(16),v=0,T=0;T<4;++T)for(let P=0;P<32;P+=8)E[v++]=this.g[T]>>>P&255;return E};function r(E,v){var T=a;return Object.prototype.hasOwnProperty.call(T,E)?T[E]:T[E]=v(E)}function o(E,v){this.h=v;const T=[];let P=!0;for(let D=E.length-1;D>=0;D--){const M=E[D]|0;P&&M==v||(T[D]=M,P=!1)}this.g=T}var a={};function l(E){return-128<=E&&E<128?r(E,function(v){return new o([v|0],v<0?-1:0)}):new o([E|0],E<0?-1:0)}function c(E){if(isNaN(E)||!isFinite(E))return d;if(E<0)return b(c(-E));const v=[];let T=1;for(let P=0;E>=T;P++)v[P]=E/T|0,T*=4294967296;return new o(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return b(h(E.substring(1),v));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=c(Math.pow(v,8));let P=d;for(let M=0;M<E.length;M+=8){var D=Math.min(8,E.length-M);const S=parseInt(E.substring(M,M+D),v);D<8?(D=c(Math.pow(v,D)),P=P.j(D).add(c(S))):(P=P.j(T),P=P.add(c(S)))}return P}var d=l(0),f=l(1),g=l(16777216);e=o.prototype,e.m=function(){if(y(this))return-b(this).m();let E=0,v=1;for(let T=0;T<this.g.length;T++){const P=this.i(T);E+=(P>=0?P:4294967296+P)*v,v*=4294967296}return E},e.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(_(this))return"0";if(y(this))return"-"+b(this).toString(E);const v=c(Math.pow(E,6));var T=this;let P="";for(;;){const D=x(T,v).g;T=C(T,D.j(v));let M=((T.g.length>0?T.g[0]:T.h)>>>0).toString(E);if(T=D,_(T))return M+P;for(;M.length<6;)M="0"+M;P=M+P}},e.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function _(E){if(E.h!=0)return!1;for(let v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function y(E){return E.h==-1}e.l=function(E){return E=C(this,E),y(E)?-1:_(E)?0:1};function b(E){const v=E.g.length,T=[];for(let P=0;P<v;P++)T[P]=~E.g[P];return new o(T,~E.h).add(f)}e.abs=function(){return y(this)?b(this):this},e.add=function(E){const v=Math.max(this.g.length,E.g.length),T=[];let P=0;for(let D=0;D<=v;D++){let M=P+(this.i(D)&65535)+(E.i(D)&65535),S=(M>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);P=S>>>16,M&=65535,S&=65535,T[D]=S<<16|M}return new o(T,T[T.length-1]&-2147483648?-1:0)};function C(E,v){return E.add(b(v))}e.j=function(E){if(_(this)||_(E))return d;if(y(this))return y(E)?b(this).j(b(E)):b(b(this).j(E));if(y(E))return b(this.j(b(E)));if(this.l(g)<0&&E.l(g)<0)return c(this.m()*E.m());const v=this.g.length+E.g.length,T=[];for(var P=0;P<2*v;P++)T[P]=0;for(P=0;P<this.g.length;P++)for(let D=0;D<E.g.length;D++){const M=this.i(P)>>>16,S=this.i(P)&65535,It=E.i(D)>>>16,yt=E.i(D)&65535;T[2*P+2*D]+=S*yt,R(T,2*P+2*D),T[2*P+2*D+1]+=M*yt,R(T,2*P+2*D+1),T[2*P+2*D+1]+=S*It,R(T,2*P+2*D+1),T[2*P+2*D+2]+=M*It,R(T,2*P+2*D+2)}for(E=0;E<v;E++)T[E]=T[2*E+1]<<16|T[2*E];for(E=v;E<2*v;E++)T[E]=0;return new o(T,0)};function R(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function I(E,v){this.g=E,this.h=v}function x(E,v){if(_(v))throw Error("division by zero");if(_(E))return new I(d,d);if(y(E))return v=x(b(E),v),new I(b(v.g),b(v.h));if(y(v))return v=x(E,b(v)),new I(b(v.g),v.h);if(E.g.length>30){if(y(E)||y(v))throw Error("slowDivide_ only works with positive integers.");for(var T=f,P=v;P.l(E)<=0;)T=L(T),P=L(P);var D=W(T,1),M=W(P,1);for(P=W(P,2),T=W(T,2);!_(P);){var S=M.add(P);S.l(E)<=0&&(D=D.add(T),M=S),P=W(P,1),T=W(T,1)}return v=C(E,D.j(v)),new I(D,v)}for(D=d;E.l(v)>=0;){for(T=Math.max(1,Math.floor(E.m()/v.m())),P=Math.ceil(Math.log(T)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),M=c(T),S=M.j(v);y(S)||S.l(E)>0;)T-=P,M=c(T),S=M.j(v);_(M)&&(M=f),D=D.add(M),E=C(E,S)}return new I(D,E)}e.B=function(E){return x(this,E).h},e.and=function(E){const v=Math.max(this.g.length,E.g.length),T=[];for(let P=0;P<v;P++)T[P]=this.i(P)&E.i(P);return new o(T,this.h&E.h)},e.or=function(E){const v=Math.max(this.g.length,E.g.length),T=[];for(let P=0;P<v;P++)T[P]=this.i(P)|E.i(P);return new o(T,this.h|E.h)},e.xor=function(E){const v=Math.max(this.g.length,E.g.length),T=[];for(let P=0;P<v;P++)T[P]=this.i(P)^E.i(P);return new o(T,this.h^E.h)};function L(E){const v=E.g.length+1,T=[];for(let P=0;P<v;P++)T[P]=E.i(P)<<1|E.i(P-1)>>>31;return new o(T,E.h)}function W(E,v){const T=v>>5;v%=32;const P=E.g.length-T,D=[];for(let M=0;M<P;M++)D[M]=v>0?E.i(M+T)>>>v|E.i(M+T+1)<<32-v:E.i(M+T);return new o(D,E.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Zv=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,ai=o}).apply(typeof kg<"u"?kg:typeof self<"u"?self:typeof window<"u"?window:{});var Xa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tb,Ao,eb,bl,Ch,nb,sb,ib;(function(){var e,t=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xa=="object"&&Xa];for(var p=0;p<u.length;++p){var m=u[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var s=n(this);function i(u,p){if(p)t:{var m=s;u=u.split(".");for(var w=0;w<u.length-1;w++){var V=u[w];if(!(V in m))break t;m=m[V]}u=u[u.length-1],w=m[u],p=p(w),p!=w&&p!=null&&t(m,u,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(p){var m=[],w;for(w in p)Object.prototype.hasOwnProperty.call(p,w)&&m.push([w,p[w]]);return m}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var r=r||{},o=this||self;function a(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function l(u,p,m){return u.call.apply(u.bind,arguments)}function c(u,p,m){return c=l,c.apply(null,arguments)}function h(u,p){var m=Array.prototype.slice.call(arguments,1);return function(){var w=m.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function d(u,p){function m(){}m.prototype=p.prototype,u.Z=p.prototype,u.prototype=new m,u.prototype.constructor=u,u.Ob=function(w,V,F){for(var et=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)et[Tt-2]=arguments[Tt];return p.prototype[V].apply(w,et)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function g(u){const p=u.length;if(p>0){const m=Array(p);for(let w=0;w<p;w++)m[w]=u[w];return m}return[]}function _(u,p){for(let w=1;w<arguments.length;w++){const V=arguments[w];var m=typeof V;if(m=m!="object"?m:V?Array.isArray(V)?"array":m:"null",m=="array"||m=="object"&&typeof V.length=="number"){m=u.length||0;const F=V.length||0;u.length=m+F;for(let et=0;et<F;et++)u[m+et]=V[et]}else u.push(V)}}class y{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function b(u){o.setTimeout(()=>{throw u},0)}function C(){var u=E;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class R{constructor(){this.h=this.g=null}add(p,m){const w=I.get();w.set(p,m),this.h?this.h.next=w:this.g=w,this.h=w}}var I=new y(()=>new x,u=>u.reset());class x{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let L,W=!1,E=new R,v=()=>{const u=Promise.resolve(void 0);L=()=>{u.then(T)}};function T(){for(var u;u=C();){try{u.h.call(u.g)}catch(m){b(m)}var p=I;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}W=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};o.addEventListener("test",m,p),o.removeEventListener("test",m,p)}catch{}return u})();function S(u){return/^[\s\xa0]*$/.test(u)}function It(u,p){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}d(It,D),It.prototype.init=function(u,p){const m=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(m=="mouseover"?p=u.fromElement:m=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&It.Z.h.call(this)},It.prototype.h=function(){It.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var yt="closure_listenable_"+(Math.random()*1e6|0),ht=0;function X(u,p,m,w,V){this.listener=u,this.proxy=null,this.src=p,this.type=m,this.capture=!!w,this.ha=V,this.key=++ht,this.da=this.fa=!1}function U(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function tt(u,p,m){for(const w in u)p.call(m,u[w],w,u)}function Gt(u,p){for(const m in u)p.call(void 0,u[m],m,u)}function Te(u){const p={};for(const m in u)p[m]=u[m];return p}const Zt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ge(u,p){let m,w;for(let V=1;V<arguments.length;V++){w=arguments[V];for(m in w)u[m]=w[m];for(let F=0;F<Zt.length;F++)m=Zt[F],Object.prototype.hasOwnProperty.call(w,m)&&(u[m]=w[m])}}function ye(u){this.src=u,this.g={},this.h=0}ye.prototype.add=function(u,p,m,w,V){const F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);const et=te(u,p,w,V);return et>-1?(p=u[et],m||(p.fa=!1)):(p=new X(p,this.src,F,!!w,V),p.fa=m,u.push(p)),p};function Ce(u,p){const m=p.type;if(m in u.g){var w=u.g[m],V=Array.prototype.indexOf.call(w,p,void 0),F;(F=V>=0)&&Array.prototype.splice.call(w,V,1),F&&(U(p),u.g[m].length==0&&(delete u.g[m],u.h--))}}function te(u,p,m,w){for(let V=0;V<u.length;++V){const F=u[V];if(!F.da&&F.listener==p&&F.capture==!!m&&F.ha==w)return V}return-1}var j="closure_lm_"+(Math.random()*1e6|0),ot={};function st(u,p,m,w,V){if(Array.isArray(p)){for(let F=0;F<p.length;F++)st(u,p[F],m,w,V);return null}return m=nt(m),u&&u[yt]?u.J(p,m,a(w)?!!w.capture:!1,V):lt(u,p,m,!1,w,V)}function lt(u,p,m,w,V,F){if(!p)throw Error("Invalid event type");const et=a(V)?!!V.capture:!!V;let Tt=q(u);if(Tt||(u[j]=Tt=new ye(u)),m=Tt.add(p,m,w,et,F),m.proxy)return m;if(w=St(),m.proxy=w,w.src=u,w.listener=m,u.addEventListener)M||(V=et),V===void 0&&(V=!1),u.addEventListener(p.toString(),w,V);else if(u.attachEvent)u.attachEvent(N(p.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return m}function St(){function u(m){return p.call(u.src,u.listener,m)}const p=z;return u}function k(u,p,m,w,V){if(Array.isArray(p))for(var F=0;F<p.length;F++)k(u,p[F],m,w,V);else w=a(w)?!!w.capture:!!w,m=nt(m),u&&u[yt]?(u=u.i,F=String(p).toString(),F in u.g&&(p=u.g[F],m=te(p,m,w,V),m>-1&&(U(p[m]),Array.prototype.splice.call(p,m,1),p.length==0&&(delete u.g[F],u.h--)))):u&&(u=q(u))&&(p=u.g[p.toString()],u=-1,p&&(u=te(p,m,w,V)),(m=u>-1?p[u]:null)&&O(m))}function O(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[yt])Ce(p.i,u);else{var m=u.type,w=u.proxy;p.removeEventListener?p.removeEventListener(m,w,u.capture):p.detachEvent?p.detachEvent(N(m),w):p.addListener&&p.removeListener&&p.removeListener(w),(m=q(p))?(Ce(m,u),m.h==0&&(m.src=null,p[j]=null)):U(u)}}}function N(u){return u in ot?ot[u]:ot[u]="on"+u}function z(u,p){if(u.da)u=!0;else{p=new It(p,this);const m=u.listener,w=u.ha||u.src;u.fa&&O(u),u=m.call(w,p)}return u}function q(u){return u=u[j],u instanceof ye?u:null}var B="__closure_events_fn_"+(Math.random()*1e9>>>0);function nt(u){return typeof u=="function"?u:(u[B]||(u[B]=function(p){return u.handleEvent(p)}),u[B])}function J(){P.call(this),this.i=new ye(this),this.M=this,this.G=null}d(J,P),J.prototype[yt]=!0,J.prototype.removeEventListener=function(u,p,m,w){k(this,u,p,m,w)};function Y(u,p){var m,w=u.G;if(w)for(m=[];w;w=w.G)m.push(w);if(u=u.M,w=p.type||p,typeof p=="string")p=new D(p,u);else if(p instanceof D)p.target=p.target||u;else{var V=p;p=new D(w,u),Ge(p,V)}V=!0;let F,et;if(m)for(et=m.length-1;et>=0;et--)F=p.g=m[et],V=Q(F,w,!0,p)&&V;if(F=p.g=u,V=Q(F,w,!0,p)&&V,V=Q(F,w,!1,p)&&V,m)for(et=0;et<m.length;et++)F=p.g=m[et],V=Q(F,w,!1,p)&&V}J.prototype.N=function(){if(J.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const m=u.g[p];for(let w=0;w<m.length;w++)U(m[w]);delete u.g[p],u.h--}}this.G=null},J.prototype.J=function(u,p,m,w){return this.i.add(String(u),p,!1,m,w)},J.prototype.K=function(u,p,m,w){return this.i.add(String(u),p,!0,m,w)};function Q(u,p,m,w){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let V=!0;for(let F=0;F<p.length;++F){const et=p[F];if(et&&!et.da&&et.capture==m){const Tt=et.listener,ve=et.ha||et.src;et.fa&&Ce(u.i,et),V=Tt.call(ve,w)!==!1&&V}}return V&&!w.defaultPrevented}function ft(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(u,p||0)}function it(u){u.g=ft(()=>{u.g=null,u.i&&(u.i=!1,it(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class ut extends P{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:it(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pt(u){P.call(this),this.h=u,this.g={}}d(pt,P);var At=[];function Ut(u){tt(u.g,function(p,m){this.g.hasOwnProperty(m)&&O(p)},u),u.g={}}pt.prototype.N=function(){pt.Z.N.call(this),Ut(this)},pt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pt=o.JSON.stringify,Ve=o.JSON.parse,Le=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function on(){}function an(){}var An={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ir(){D.call(this,"d")}d(ir,D);function xe(){D.call(this,"c")}d(xe,D);var Ie={},Jr=null;function Si(){return Jr=Jr||new J}Ie.Ia="serverreachability";function Mf(u){D.call(this,Ie.Ia,u)}d(Mf,D);function Zr(u){const p=Si();Y(p,new Mf(p))}Ie.STAT_EVENT="statevent";function Nf(u,p){D.call(this,Ie.STAT_EVENT,u),this.stat=p}d(Nf,D);function Ke(u){const p=Si();Y(p,new Nf(p,u))}Ie.Ja="timingevent";function Vf(u,p){D.call(this,Ie.Ja,u),this.size=p}d(Vf,D);function to(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},p)}function eo(){this.g=!0}eo.prototype.ua=function(){this.g=!1};function oT(u,p,m,w,V,F){u.info(function(){if(u.g)if(F){var et="",Tt=F.split("&");for(let $t=0;$t<Tt.length;$t++){var ve=Tt[$t].split("=");if(ve.length>1){const Ae=ve[0];ve=ve[1];const Vn=Ae.split("_");et=Vn.length>=2&&Vn[1]=="type"?et+(Ae+"="+ve+"&"):et+(Ae+"=redacted&")}}}else et=null;else et=F;return"XMLHTTP REQ ("+w+") [attempt "+V+"]: "+p+`
`+m+`
`+et})}function aT(u,p,m,w,V,F,et){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+V+"]: "+p+`
`+m+`
`+F+" "+et})}function rr(u,p,m,w){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+cT(u,m)+(w?" "+w:"")})}function lT(u,p){u.info(function(){return"TIMEOUT: "+p})}eo.prototype.info=function(){};function cT(u,p){if(!u.g)return p;if(!p)return null;try{const F=JSON.parse(p);if(F){for(u=0;u<F.length;u++)if(Array.isArray(F[u])){var m=F[u];if(!(m.length<2)){var w=m[1];if(Array.isArray(w)&&!(w.length<1)){var V=w[0];if(V!="noop"&&V!="stop"&&V!="close")for(let et=1;et<w.length;et++)w[et]=""}}}}return Pt(F)}catch{return p}}var La={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Lf={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ff;function cu(){}d(cu,on),cu.prototype.g=function(){return new XMLHttpRequest},Ff=new cu;function no(u){return encodeURIComponent(String(u))}function uT(u){var p=1;u=u.split(":");const m=[];for(;p>0&&u.length;)m.push(u.shift()),p--;return u.length&&m.push(u.join(":")),m}function Fs(u,p,m,w){this.j=u,this.i=p,this.l=m,this.S=w||1,this.V=new pt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Uf}function Uf(){this.i=null,this.g="",this.h=!1}var Bf={},uu={};function hu(u,p,m){u.M=1,u.A=Ua(Nn(p)),u.u=m,u.R=!0,jf(u,null)}function jf(u,p){u.F=Date.now(),Fa(u),u.B=Nn(u.A);var m=u.B,w=u.S;Array.isArray(w)||(w=[String(w)]),tp(m.i,"t",w),u.C=0,m=u.j.L,u.h=new Uf,u.g=yp(u.j,m?p:null,!u.u),u.P>0&&(u.O=new ut(c(u.Y,u,u.g),u.P)),p=u.V,m=u.g,w=u.ba;var V="readystatechange";Array.isArray(V)||(V&&(At[0]=V.toString()),V=At);for(let F=0;F<V.length;F++){const et=st(m,V[F],w||p.handleEvent,!1,p.h||p);if(!et)break;p.g[et.key]=et}p=u.J?Te(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),Zr(),oT(u.i,u.v,u.B,u.l,u.S,u.u)}Fs.prototype.ba=function(u){u=u.target;const p=this.O;p&&js(u)==3?p.j():this.Y(u)},Fs.prototype.Y=function(u){try{if(u==this.g)t:{const Tt=js(this.g),ve=this.g.ya(),$t=this.g.ca();if(!(Tt<3)&&(Tt!=3||this.g&&(this.h.h||this.g.la()||ap(this.g)))){this.K||Tt!=4||ve==7||(ve==8||$t<=0?Zr(3):Zr(2)),du(this);var p=this.g.ca();this.X=p;var m=hT(this);if(this.o=p==200,aT(this.i,this.v,this.B,this.l,this.S,Tt,p),this.o){if(this.U&&!this.L){e:{if(this.g){var w,V=this.g;if((w=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(w)){var F=w;break e}}F=null}if(u=F)rr(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,fu(this,u);else{this.o=!1,this.m=3,Ke(12),Ri(this),so(this);break t}}if(this.R){u=!0;let Ae;for(;!this.K&&this.C<m.length;)if(Ae=dT(this,m),Ae==uu){Tt==4&&(this.m=4,Ke(14),u=!1),rr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ae==Bf){this.m=4,Ke(15),rr(this.i,this.l,m,"[Invalid Chunk]"),u=!1;break}else rr(this.i,this.l,Ae,null),fu(this,Ae);if($f(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tt!=4||m.length!=0||this.h.h||(this.m=1,Ke(16),u=!1),this.o=this.o&&u,!u)rr(this.i,this.l,m,"[Invalid Chunked Response]"),Ri(this),so(this);else if(m.length>0&&!this.W){this.W=!0;var et=this.j;et.g==this&&et.aa&&!et.P&&(et.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),wu(et),et.P=!0,Ke(11))}}else rr(this.i,this.l,m,null),fu(this,m);Tt==4&&Ri(this),this.o&&!this.K&&(Tt==4?pp(this.j,this):(this.o=!1,Fa(this)))}else ST(this.g),p==400&&m.indexOf("Unknown SID")>0?(this.m=3,Ke(12)):(this.m=0,Ke(13)),Ri(this),so(this)}}}catch{}finally{}};function hT(u){if(!$f(u))return u.g.la();const p=ap(u.g);if(p==="")return"";let m="";const w=p.length,V=js(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Ri(u),so(u),"";u.h.i=new o.TextDecoder}for(let F=0;F<w;F++)u.h.h=!0,m+=u.h.i.decode(p[F],{stream:!(V&&F==w-1)});return p.length=0,u.h.g+=m,u.C=0,u.h.g}function $f(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function dT(u,p){var m=u.C,w=p.indexOf(`
`,m);return w==-1?uu:(m=Number(p.substring(m,w)),isNaN(m)?Bf:(w+=1,w+m>p.length?uu:(p=p.slice(w,w+m),u.C=w+m,p)))}Fs.prototype.cancel=function(){this.K=!0,Ri(this)};function Fa(u){u.T=Date.now()+u.H,zf(u,u.H)}function zf(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=to(c(u.aa,u),p)}function du(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Fs.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(lT(this.i,this.B),this.M!=2&&(Zr(),Ke(17)),Ri(this),this.m=2,so(this)):zf(this,this.T-u)};function so(u){u.j.I==0||u.K||pp(u.j,u)}function Ri(u){du(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,Ut(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function fu(u,p){try{var m=u.j;if(m.I!=0&&(m.g==u||pu(m.h,u))){if(!u.L&&pu(m.h,u)&&m.I==3){try{var w=m.Ba.g.parse(p)}catch{w=null}if(Array.isArray(w)&&w.length==3){var V=w;if(V[0]==0){t:if(!m.v){if(m.g)if(m.g.F+3e3<u.F)Ha(m),$a(m);else break t;bu(m),Ke(18)}}else m.xa=V[1],0<m.xa-m.K&&V[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=to(c(m.Va,m),6e3));qf(m.h)<=1&&m.ta&&(m.ta=void 0)}else xi(m,11)}else if((u.L||m.g==u)&&Ha(m),!S(p))for(V=m.Ba.g.parse(p),p=0;p<V.length;p++){let $t=V[p];const Ae=$t[0];if(!(Ae<=m.K))if(m.K=Ae,$t=$t[1],m.I==2)if($t[0]=="c"){m.M=$t[1],m.ba=$t[2];const Vn=$t[3];Vn!=null&&(m.ka=Vn,m.j.info("VER="+m.ka));const ki=$t[4];ki!=null&&(m.za=ki,m.j.info("SVER="+m.za));const $s=$t[5];$s!=null&&typeof $s=="number"&&$s>0&&(w=1.5*$s,m.O=w,m.j.info("backChannelRequestTimeoutMs_="+w)),w=m;const zs=u.g;if(zs){const qa=zs.g?zs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qa){var F=w.h;F.g||qa.indexOf("spdy")==-1&&qa.indexOf("quic")==-1&&qa.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(gu(F,F.h),F.h=null))}if(w.G){const Eu=zs.g?zs.g.getResponseHeader("X-HTTP-Session-Id"):null;Eu&&(w.wa=Eu,Kt(w.J,w.G,Eu))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-u.F,m.j.info("Handshake RTT: "+m.T+"ms")),w=m;var et=u;if(w.na=_p(w,w.L?w.ba:null,w.W),et.L){Gf(w.h,et);var Tt=et,ve=w.O;ve&&(Tt.H=ve),Tt.D&&(du(Tt),Fa(Tt)),w.g=et}else dp(w);m.i.length>0&&za(m)}else $t[0]!="stop"&&$t[0]!="close"||xi(m,7);else m.I==3&&($t[0]=="stop"||$t[0]=="close"?$t[0]=="stop"?xi(m,7):vu(m):$t[0]!="noop"&&m.l&&m.l.qa($t),m.A=0)}}Zr(4)}catch{}}var fT=class{constructor(u,p){this.g=u,this.map=p}};function Hf(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Wf(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function qf(u){return u.h?1:u.g?u.g.size:0}function pu(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function gu(u,p){u.g?u.g.add(p):u.h=p}function Gf(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Hf.prototype.cancel=function(){if(this.i=Kf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Kf(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const m of u.g.values())p=p.concat(m.G);return p}return g(u.i)}var Yf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pT(u,p){if(u){u=u.split("&");for(let m=0;m<u.length;m++){const w=u[m].indexOf("=");let V,F=null;w>=0?(V=u[m].substring(0,w),F=u[m].substring(w+1)):V=u[m],p(V,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Us(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof Us?(this.l=u.l,io(this,u.j),this.o=u.o,this.g=u.g,ro(this,u.u),this.h=u.h,mu(this,ep(u.i)),this.m=u.m):u&&(p=String(u).match(Yf))?(this.l=!1,io(this,p[1]||"",!0),this.o=oo(p[2]||""),this.g=oo(p[3]||"",!0),ro(this,p[4]),this.h=oo(p[5]||"",!0),mu(this,p[6]||"",!0),this.m=oo(p[7]||"")):(this.l=!1,this.i=new lo(null,this.l))}Us.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(ao(p,Qf,!0),":");var m=this.g;return(m||p=="file")&&(u.push("//"),(p=this.o)&&u.push(ao(p,Qf,!0),"@"),u.push(no(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&u.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(ao(m,m.charAt(0)=="/"?_T:mT,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",ao(m,vT)),u.join("")},Us.prototype.resolve=function(u){const p=Nn(this);let m=!!u.j;m?io(p,u.j):m=!!u.o,m?p.o=u.o:m=!!u.g,m?p.g=u.g:m=u.u!=null;var w=u.h;if(m)ro(p,u.u);else if(m=!!u.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var V=p.h.lastIndexOf("/");V!=-1&&(w=p.h.slice(0,V+1)+w)}if(V=w,V==".."||V==".")w="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){w=V.lastIndexOf("/",0)==0,V=V.split("/");const F=[];for(let et=0;et<V.length;){const Tt=V[et++];Tt=="."?w&&et==V.length&&F.push(""):Tt==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),w&&et==V.length&&F.push("")):(F.push(Tt),w=!0)}w=F.join("/")}else w=V}return m?p.h=w:m=u.i.toString()!=="",m?mu(p,ep(u.i)):m=!!u.m,m&&(p.m=u.m),p};function Nn(u){return new Us(u)}function io(u,p,m){u.j=m?oo(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function ro(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function mu(u,p,m){p instanceof lo?(u.i=p,bT(u.i,u.l)):(m||(p=ao(p,yT)),u.i=new lo(p,u.l))}function Kt(u,p,m){u.i.set(p,m)}function Ua(u){return Kt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function oo(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ao(u,p,m){return typeof u=="string"?(u=encodeURI(u).replace(p,gT),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function gT(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Qf=/[#\/\?@]/g,mT=/[#\?:]/g,_T=/[#\?]/g,yT=/[#\?@]/g,vT=/#/g;function lo(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Ci(u){u.g||(u.g=new Map,u.h=0,u.i&&pT(u.i,function(p,m){u.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}e=lo.prototype,e.add=function(u,p){Ci(this),this.i=null,u=or(this,u);let m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(p),this.h+=1,this};function Xf(u,p){Ci(u),p=or(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Jf(u,p){return Ci(u),p=or(u,p),u.g.has(p)}e.forEach=function(u,p){Ci(this),this.g.forEach(function(m,w){m.forEach(function(V){u.call(p,V,w,this)},this)},this)};function Zf(u,p){Ci(u);let m=[];if(typeof p=="string")Jf(u,p)&&(m=m.concat(u.g.get(or(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)m=m.concat(u[p]);return m}e.set=function(u,p){return Ci(this),this.i=null,u=or(this,u),Jf(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},e.get=function(u,p){return u?(u=Zf(this,u),u.length>0?String(u[0]):p):p};function tp(u,p,m){Xf(u,p),m.length>0&&(u.i=null,u.g.set(or(u,p),g(m)),u.h+=m.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let w=0;w<p.length;w++){var m=p[w];const V=no(m);m=Zf(this,m);for(let F=0;F<m.length;F++){let et=V;m[F]!==""&&(et+="="+no(m[F])),u.push(et)}}return this.i=u.join("&")};function ep(u){const p=new lo;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function or(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function bT(u,p){p&&!u.j&&(Ci(u),u.i=null,u.g.forEach(function(m,w){const V=w.toLowerCase();w!=V&&(Xf(this,w),tp(this,V,m))},u)),u.j=p}function wT(u,p){const m=new eo;if(o.Image){const w=new Image;w.onload=h(Bs,m,"TestLoadImage: loaded",!0,p,w),w.onerror=h(Bs,m,"TestLoadImage: error",!1,p,w),w.onabort=h(Bs,m,"TestLoadImage: abort",!1,p,w),w.ontimeout=h(Bs,m,"TestLoadImage: timeout",!1,p,w),o.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else p(!1)}function ET(u,p){const m=new eo,w=new AbortController,V=setTimeout(()=>{w.abort(),Bs(m,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:w.signal}).then(F=>{clearTimeout(V),F.ok?Bs(m,"TestPingServer: ok",!0,p):Bs(m,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(V),Bs(m,"TestPingServer: error",!1,p)})}function Bs(u,p,m,w,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),w(m)}catch{}}function TT(){this.g=new Le}function _u(u){this.i=u.Sb||null,this.h=u.ab||!1}d(_u,on),_u.prototype.g=function(){return new Ba(this.i,this.h)};function Ba(u,p){J.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Ba,J),e=Ba.prototype,e.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,uo(this)},e.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,co(this)),this.readyState=0},e.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,uo(this)),this.g&&(this.readyState=3,uo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;np(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function np(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}e.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?co(this):uo(this),this.readyState==3&&np(this)}},e.Oa=function(u){this.g&&(this.response=this.responseText=u,co(this))},e.Na=function(u){this.g&&(this.response=u,co(this))},e.ga=function(){this.g&&co(this)};function co(u){u.readyState=4,u.l=null,u.j=null,u.B=null,uo(u)}e.setRequestHeader=function(u,p){this.A.append(u,p)},e.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var m=p.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=p.next();return u.join(`\r
`)};function uo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ba.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function sp(u){let p="";return tt(u,function(m,w){p+=w,p+=":",p+=m,p+=`\r
`}),p}function yu(u,p,m){t:{for(w in m){var w=!1;break t}w=!0}w||(m=sp(m),typeof u=="string"?m!=null&&no(m):Kt(u,p,m))}function se(u){J.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(se,J);var IT=/^https?$/i,AT=["POST","PUT"];e=se.prototype,e.Fa=function(u){this.H=u},e.ea=function(u,p,m,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ff.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(F){ip(this,F);return}if(u=m||"",m=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var V in w)m.set(V,w[V]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const F of w.keys())m.set(F,w.get(F));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(m.keys()).find(F=>F.toLowerCase()=="content-type"),V=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(AT,p,void 0)>=0)||w||V||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,et]of m)this.g.setRequestHeader(F,et);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(F){ip(this,F)}};function ip(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,rp(u),ja(u)}function rp(u){u.A||(u.A=!0,Y(u,"complete"),Y(u,"error"))}e.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Y(this,"complete"),Y(this,"abort"),ja(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ja(this,!0)),se.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?op(this):this.Xa())},e.Xa=function(){op(this)};function op(u){if(u.h&&typeof r<"u"){if(u.v&&js(u)==4)setTimeout(u.Ca.bind(u),0);else if(Y(u,"readystatechange"),js(u)==4){u.h=!1;try{const F=u.ca();t:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var m;if(!(m=p)){var w;if(w=F===0){let et=String(u.D).match(Yf)[1]||null;!et&&o.self&&o.self.location&&(et=o.self.location.protocol.slice(0,-1)),w=!IT.test(et?et.toLowerCase():"")}m=w}if(m)Y(u,"complete"),Y(u,"success");else{u.o=6;try{var V=js(u)>2?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.ca()+"]",rp(u)}}finally{ja(u)}}}}function ja(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const m=u.g;u.g=null,p||Y(u,"ready");try{m.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function js(u){return u.g?u.g.readyState:0}e.ca=function(){try{return js(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Ve(p)}};function ap(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ST(u){const p={};u=(u.g&&js(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(S(u[w]))continue;var m=uT(u[w]);const V=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const F=p[V]||[];p[V]=F,F.push(m)}Gt(p,function(w){return w.join(", ")})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ho(u,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||p}function lp(u){this.za=0,this.i=[],this.j=new eo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ho("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ho("baseRetryDelayMs",5e3,u),this.Za=ho("retryDelaySeedMs",1e4,u),this.Ta=ho("forwardChannelMaxRetries",2,u),this.va=ho("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Hf(u&&u.concurrentRequestLimit),this.Ba=new TT,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=lp.prototype,e.ka=8,e.I=1,e.connect=function(u,p,m,w){Ke(0),this.W=u,this.H=p||{},m&&w!==void 0&&(this.H.OSID=m,this.H.OAID=w),this.F=this.X,this.J=_p(this,null,this.W),za(this)};function vu(u){if(cp(u),u.I==3){var p=u.V++,m=Nn(u.J);if(Kt(m,"SID",u.M),Kt(m,"RID",p),Kt(m,"TYPE","terminate"),fo(u,m),p=new Fs(u,u.j,p),p.M=2,p.A=Ua(Nn(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=p.A,m=!0),m||(p.g=yp(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Fa(p)}mp(u)}function $a(u){u.g&&(wu(u),u.g.cancel(),u.g=null)}function cp(u){$a(u),u.v&&(o.clearTimeout(u.v),u.v=null),Ha(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function za(u){if(!Wf(u.h)&&!u.m){u.m=!0;var p=u.Ea;L||v(),W||(L(),W=!0),E.add(p,u),u.D=0}}function RT(u,p){return qf(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=to(c(u.Ea,u,p),gp(u,u.D)),u.D++,!0)}e.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const V=new Fs(this,this.j,u);let F=this.o;if(this.U&&(F?(F=Te(F),Ge(F,this.U)):F=this.U),this.u!==null||this.R||(V.J=F,F=null),this.S)t:{for(var p=0,m=0;m<this.i.length;m++){e:{var w=this.i[m];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break e}w=void 0}if(w===void 0)break;if(p+=w,p>4096){p=m;break t}if(p===4096||m===this.i.length-1){p=m+1;break t}}p=1e3}else p=1e3;p=hp(this,V,p),m=Nn(this.J),Kt(m,"RID",u),Kt(m,"CVER",22),this.G&&Kt(m,"X-HTTP-Session-Id",this.G),fo(this,m),F&&(this.R?p="headers="+no(sp(F))+"&"+p:this.u&&yu(m,this.u,F)),gu(this.h,V),this.Ra&&Kt(m,"TYPE","init"),this.S?(Kt(m,"$req",p),Kt(m,"SID","null"),V.U=!0,hu(V,m,null)):hu(V,m,p),this.I=2}}else this.I==3&&(u?up(this,u):this.i.length==0||Wf(this.h)||up(this))};function up(u,p){var m;p?m=p.l:m=u.V++;const w=Nn(u.J);Kt(w,"SID",u.M),Kt(w,"RID",m),Kt(w,"AID",u.K),fo(u,w),u.u&&u.o&&yu(w,u.u,u.o),m=new Fs(u,u.j,m,u.D+1),u.u===null&&(m.J=u.o),p&&(u.i=p.G.concat(u.i)),p=hp(u,m,1e3),m.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),gu(u.h,m),hu(m,w,p)}function fo(u,p){u.H&&tt(u.H,function(m,w){Kt(p,w,m)}),u.l&&tt({},function(m,w){Kt(p,w,m)})}function hp(u,p,m){m=Math.min(u.i.length,m);const w=u.l?c(u.l.Ka,u.l,u):null;t:{var V=u.i;let Tt=-1;for(;;){const ve=["count="+m];Tt==-1?m>0?(Tt=V[0].g,ve.push("ofs="+Tt)):Tt=0:ve.push("ofs="+Tt);let $t=!0;for(let Ae=0;Ae<m;Ae++){var F=V[Ae].g;const Vn=V[Ae].map;if(F-=Tt,F<0)Tt=Math.max(0,V[Ae].g-100),$t=!1;else try{F="req"+F+"_"||"";try{var et=Vn instanceof Map?Vn:Object.entries(Vn);for(const[ki,$s]of et){let zs=$s;a($s)&&(zs=Pt($s)),ve.push(F+ki+"="+encodeURIComponent(zs))}}catch(ki){throw ve.push(F+"type="+encodeURIComponent("_badmap")),ki}}catch{w&&w(Vn)}}if($t){et=ve.join("&");break t}}et=void 0}return u=u.i.splice(0,m),p.G=u,et}function dp(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;L||v(),W||(L(),W=!0),E.add(p,u),u.A=0}}function bu(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=to(c(u.Da,u),gp(u,u.A)),u.A++,!0)}e.Da=function(){if(this.v=null,fp(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=to(c(this.Wa,this),u)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ke(10),$a(this),fp(this))};function wu(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function fp(u){u.g=new Fs(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=Nn(u.na);Kt(p,"RID","rpc"),Kt(p,"SID",u.M),Kt(p,"AID",u.K),Kt(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&Kt(p,"TO",u.ia),Kt(p,"TYPE","xmlhttp"),fo(u,p),u.u&&u.o&&yu(p,u.u,u.o),u.O&&(u.g.H=u.O);var m=u.g;u=u.ba,m.M=1,m.A=Ua(Nn(p)),m.u=null,m.R=!0,jf(m,u)}e.Va=function(){this.C!=null&&(this.C=null,$a(this),bu(this),Ke(19))};function Ha(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function pp(u,p){var m=null;if(u.g==p){Ha(u),wu(u),u.g=null;var w=2}else if(pu(u.h,p))m=p.G,Gf(u.h,p),w=1;else return;if(u.I!=0){if(p.o)if(w==1){m=p.u?p.u.length:0,p=Date.now()-p.F;var V=u.D;w=Si(),Y(w,new Vf(w,m)),za(u)}else dp(u);else if(V=p.m,V==3||V==0&&p.X>0||!(w==1&&RT(u,p)||w==2&&bu(u)))switch(m&&m.length>0&&(p=u.h,p.i=p.i.concat(m)),V){case 1:xi(u,5);break;case 4:xi(u,10);break;case 3:xi(u,6);break;default:xi(u,2)}}}function gp(u,p){let m=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(m*=2),m*p}function xi(u,p){if(u.j.info("Error code "+p),p==2){var m=c(u.bb,u),w=u.Ua;const V=!w;w=new Us(w||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||io(w,"https"),Ua(w),V?wT(w.toString(),m):ET(w.toString(),m)}else Ke(2);u.I=0,u.l&&u.l.pa(p),mp(u),cp(u)}e.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Ke(2)):(this.j.info("Failed to ping google.com"),Ke(1))};function mp(u){if(u.I=0,u.ja=[],u.l){const p=Kf(u.h);(p.length!=0||u.i.length!=0)&&(_(u.ja,p),_(u.ja,u.i),u.h.i.length=0,g(u.i),u.i.length=0),u.l.oa()}}function _p(u,p,m){var w=m instanceof Us?Nn(m):new Us(m);if(w.g!="")p&&(w.g=p+"."+w.g),ro(w,w.u);else{var V=o.location;w=V.protocol,p=p?p+"."+V.hostname:V.hostname,V=+V.port;const F=new Us(null);w&&io(F,w),p&&(F.g=p),V&&ro(F,V),m&&(F.h=m),w=F}return m=u.G,p=u.wa,m&&p&&Kt(w,m,p),Kt(w,"VER",u.ka),fo(u,w),w}function yp(u,p,m){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new se(new _u({ab:m})):new se(u.ma),p.Fa(u.L),p}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function vp(){}e=vp.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function Wa(){}Wa.prototype.g=function(u,p){return new ln(u,p)};function ln(u,p){J.call(this),this.g=new lp(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!S(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!S(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new ar(this)}d(ln,J),ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){vu(this.g)},ln.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.v&&(m={},m.__data__=Pt(u),u=m);p.i.push(new fT(p.Ya++,u)),p.I==3&&za(p)},ln.prototype.N=function(){this.g.l=null,delete this.j,vu(this.g),delete this.g,ln.Z.N.call(this)};function bp(u){ir.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){t:{for(const m in p){u=m;break t}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}d(bp,ir);function wp(){xe.call(this),this.status=1}d(wp,xe);function ar(u){this.g=u}d(ar,vp),ar.prototype.ra=function(){Y(this.g,"a")},ar.prototype.qa=function(u){Y(this.g,new bp(u))},ar.prototype.pa=function(u){Y(this.g,new wp)},ar.prototype.oa=function(){Y(this.g,"b")},Wa.prototype.createWebChannel=Wa.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,ib=function(){return new Wa},sb=function(){return Si()},nb=Ie,Ch={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},La.NO_ERROR=0,La.TIMEOUT=8,La.HTTP_ERROR=6,bl=La,Lf.COMPLETE="complete",eb=Lf,an.EventType=An,An.OPEN="a",An.CLOSE="b",An.ERROR="c",An.MESSAGE="d",J.prototype.listen=J.prototype.J,Ao=an,se.prototype.listenOnce=se.prototype.K,se.prototype.getLastError=se.prototype.Ha,se.prototype.getLastErrorCode=se.prototype.ya,se.prototype.getStatus=se.prototype.ca,se.prototype.getResponseJson=se.prototype.La,se.prototype.getResponseText=se.prototype.la,se.prototype.send=se.prototype.ea,se.prototype.setWithCredentials=se.prototype.Fa,tb=se}).apply(typeof Xa<"u"?Xa:typeof self<"u"?self:typeof window<"u"?window:{});const Pg="@firebase/firestore",Dg="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Be.UNAUTHENTICATED=new Be(null),Be.GOOGLE_CREDENTIALS=new Be("google-credentials-uid"),Be.FIRST_PARTY=new Be("first-party-uid"),Be.MOCK_USER=new Be("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $r="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new Rd("@firebase/firestore");function pr(){return Ki.logLevel}function at(e,...t){if(Ki.logLevel<=Rt.DEBUG){const n=t.map(kd);Ki.debug(`Firestore (${$r}): ${e}`,...n)}}function Ps(e,...t){if(Ki.logLevel<=Rt.ERROR){const n=t.map(kd);Ki.error(`Firestore (${$r}): ${e}`,...n)}}function Dr(e,...t){if(Ki.logLevel<=Rt.WARN){const n=t.map(kd);Ki.warn(`Firestore (${$r}): ${e}`,...n)}}function kd(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,rb(e,s,n)}function rb(e,t,n){let s=`FIRESTORE (${$r}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ps(s),new Error(s)}function Ft(e,t,n,s){let i="Unexpected state";typeof n=="string"?i=n:s=n,e||rb(t,i,s)}function bt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rt extends us{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class rC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Be.UNAUTHENTICATED)))}shutdown(){}}class oC{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class aC{constructor(t){this.t=t,this.currentUser=Be.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ft(this.o===void 0,42304);let s=this.i;const i=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let r=new Ss;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Ss,t.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const l=r;t.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},a=l=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Ss)}}),0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ft(typeof s.accessToken=="string",31837,{l:s}),new ob(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ft(t===null||typeof t=="string",2055,{h:t}),new Be(t)}}class lC{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Be.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cC{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new lC(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Be.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Og{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uC{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Ft(this.o===void 0,3512);const s=r=>{r.error!=null&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,at("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable((()=>s(r)))};const i=r=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((r=>i(r))),setTimeout((()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?i(r):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Og(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Ft(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Og(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=hC(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<n&&(s+=t.charAt(i[r]%62))}return s}}function Ct(e,t){return e<t?-1:e>t?1:0}function xh(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const i=e.charAt(s),r=t.charAt(s);if(i!==r)return zu(i)===zu(r)?Ct(i,r):zu(i)?1:-1}return Ct(e.length,t.length)}const dC=55296,fC=57343;function zu(e){const t=e.charCodeAt(0);return t>=dC&&t<=fC}function Or(e,t,n){return e.length===t.length&&e.every(((s,i)=>n(s,t[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="__name__";class $n{constructor(t,n,s){n===void 0?n=0:n>t.length&&_t(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&_t(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return $n.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof $n?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let i=0;i<s;i++){const r=$n.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return Ct(t.length,n.length)}static compareSegments(t,n){const s=$n.isNumericId(t),i=$n.isNumericId(n);return s&&!i?-1:!s&&i?1:s&&i?$n.extractNumericId(t).compare($n.extractNumericId(n)):xh(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ai.fromString(t.substring(4,t.length-2))}}class qt extends $n{construct(t,n,s){return new qt(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new rt($.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((i=>i.length>0)))}return new qt(n)}static emptyPath(){return new qt([])}}const pC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class De extends $n{construct(t,n,s){return new De(t,n,s)}static isValidIdentifier(t){return pC.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),De.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Mg}static keyField(){return new De([Mg])}static fromServerFormat(t){const n=[];let s="",i=0;const r=()=>{if(s.length===0)throw new rt($.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new rt($.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new rt($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(s+=a,i++):(r(),i++)}if(r(),o)throw new rt($.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new De(n)}static emptyPath(){return new De([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(t){this.path=t}static fromPath(t){return new ct(qt.fromString(t))}static fromName(t){return new ct(qt.fromString(t).popFirst(5))}static empty(){return new ct(qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&qt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return qt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ct(new qt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(e,t,n){if(!n)throw new rt($.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function gC(e,t,n,s){if(t===!0&&s===!0)throw new rt($.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Ng(e){if(!ct.isDocumentKey(e))throw new rt($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Vg(e){if(ct.isDocumentKey(e))throw new rt($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function lb(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Lc(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":_t(12329,{type:typeof e})}function os(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new rt($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lc(e);throw new rt($.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(e,t){const n={typeString:e};return t&&(n.value=t),n}function Ia(e,t){if(!lb(e))throw new rt($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const i=t[s].typeString,r="value"in t[s]?{value:t[s].value}:void 0;if(!(s in e)){n=`JSON missing required field: '${s}'`;break}const o=e[s];if(i&&typeof o!==i){n=`JSON field '${s}' must be a ${i}.`;break}if(r!==void 0&&o!==r.value){n=`Expected '${s}' field to equal '${r.value}'`;break}}if(n)throw new rt($.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg=-62135596800,Fg=1e6;class Qt{static now(){return Qt.fromMillis(Date.now())}static fromDate(t){return Qt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*Fg);return new Qt(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new rt($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new rt($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Lg)throw new rt($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new rt($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Fg}_compareTo(t){return this.seconds===t.seconds?Ct(this.nanoseconds,t.nanoseconds):Ct(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Ia(t,Qt._jsonSchema))return new Qt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Lg;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qt._jsonSchemaVersion="firestore/timestamp/1.0",Qt._jsonSchema={type:ge("string",Qt._jsonSchemaVersion),seconds:ge("number"),nanoseconds:ge("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{static fromTimestamp(t){return new vt(t)}static min(){return new vt(new Qt(0,0))}static max(){return new vt(new Qt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=-1;function mC(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,i=vt.fromTimestamp(s===1e9?new Qt(n+1,0):new Qt(n,s));return new gi(i,ct.empty(),t)}function _C(e){return new gi(e.readTime,e.key,oa)}class gi{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new gi(vt.min(),ct.empty(),oa)}static max(){return new gi(vt.max(),ct.empty(),oa)}}function yC(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=ct.comparator(e.documentKey,t.documentKey),n!==0?n:Ct(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zr(e){if(e.code!==$.FAILED_PRECONDITION||e.message!==vC)throw e;at("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&_t(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new H(((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(s,i)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):H.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):H.reject(n)}static resolve(t){return new H(((n,s)=>{n(t)}))}static reject(t){return new H(((n,s)=>{s(t)}))}static waitFor(t){return new H(((n,s)=>{let i=0,r=0,o=!1;t.forEach((a=>{++i,a.next((()=>{++r,o&&r===i&&n()}),(l=>s(l)))})),o=!0,r===i&&n()}))}static or(t){let n=H.resolve(!1);for(const s of t)n=n.next((i=>i?H.resolve(i):s()));return n}static forEach(t,n){const s=[];return t.forEach(((i,r)=>{s.push(n.call(this,i,r))})),this.waitFor(s)}static mapArray(t,n){return new H(((s,i)=>{const r=t.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const c=l;n(t[c]).next((h=>{o[c]=h,++a,a===r&&s(o)}),(h=>i(h)))}}))}static doWhile(t,n){return new H(((s,i)=>{const r=()=>{t()===!0?n().next((()=>{r()}),i):s()};r()}))}}function wC(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Hr(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Fc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd=-1;function Uc(e){return e==null}function ql(e){return e===0&&1/e==-1/0}function EC(e){return typeof e=="number"&&Number.isInteger(e)&&!ql(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="";function TC(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ug(t)),t=IC(e.get(n),t);return Ug(t)}function IC(e,t){let n=t;const s=e.length;for(let i=0;i<s;i++){const r=e.charAt(i);switch(r){case"\0":n+="";break;case cb:n+="";break;default:n+=r}}return n}function Ug(e){return e+cb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ti(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ub(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t,n){this.comparator=t,this.root=n||ke.EMPTY}insert(t,n){return new ne(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ke.BLACK,null,null))}remove(t){return new ne(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ke.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(t,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ja(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ja(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ja(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ja(this.root,t,this.comparator,!0)}}class Ja{constructor(t,n,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?s(t.key,n):1,n&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ke{constructor(t,n,s,i,r){this.key=t,this.value=n,this.color=s??ke.RED,this.left=i??ke.EMPTY,this.right=r??ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,i,r){return new ke(t??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let i=this;const r=s(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,n,s),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ke.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return ke.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _t(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _t(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw _t(27949);return t+(this.isRed()?0:1)}}ke.EMPTY=null,ke.RED=!0,ke.BLACK=!1;ke.EMPTY=new class{constructor(){this.size=0}get key(){throw _t(57766)}get value(){throw _t(16141)}get color(){throw _t(16727)}get left(){throw _t(29726)}get right(){throw _t(36894)}copy(t,n,s,i,r){return this}insert(t,n,s){return new ke(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(t){this.comparator=t,this.data=new ne(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new jg(this.data.getIterator())}getIteratorFrom(t){return new jg(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof Ee)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Ee(this.comparator);return n.data=t,n}}class jg{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(t){this.fields=t,t.sort(De.comparator)}static empty(){return new pn([])}unionWith(t){let n=new Ee(De.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new pn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Or(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new hb("Invalid base64 string: "+r):r}})(t);return new Me(n)}static fromUint8Array(t){const n=(function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r})(t);return new Me(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ct(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Me.EMPTY_BYTE_STRING=new Me("");const AC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mi(e){if(Ft(!!e,39018),typeof e=="string"){let t=0;const n=AC.exec(e);if(Ft(!!n,46558,{timestamp:e}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:oe(e.seconds),nanos:oe(e.nanos)}}function oe(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function _i(e){return typeof e=="string"?Me.fromBase64String(e):Me.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="server_timestamp",fb="__type__",pb="__previous_value__",gb="__local_write_time__";function Od(e){return(e?.mapValue?.fields||{})[fb]?.stringValue===db}function Bc(e){const t=e.mapValue.fields[pb];return Od(t)?Bc(t):t}function aa(e){const t=mi(e.mapValue.fields[gb].timestampValue);return new Qt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(t,n,s,i,r,o,a,l,c,h){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h}}const Gl="(default)";class la{constructor(t,n){this.projectId=t,this.database=n||Gl}static empty(){return new la("","")}get isDefaultDatabase(){return this.database===Gl}isEqual(t){return t instanceof la&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="__type__",RC="__max__",Za={mapValue:{}},_b="__vector__",Kl="value";function yi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Od(e)?4:xC(e)?9007199254740991:CC(e)?10:11:_t(28295,{value:e})}function as(e,t){if(e===t)return!0;const n=yi(e);if(n!==yi(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return aa(e).isEqual(aa(t));case 3:return(function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=mi(i.timestampValue),a=mi(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(i,r){return _i(i.bytesValue).isEqual(_i(r.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(i,r){return oe(i.geoPointValue.latitude)===oe(r.geoPointValue.latitude)&&oe(i.geoPointValue.longitude)===oe(r.geoPointValue.longitude)})(e,t);case 2:return(function(i,r){if("integerValue"in i&&"integerValue"in r)return oe(i.integerValue)===oe(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=oe(i.doubleValue),a=oe(r.doubleValue);return o===a?ql(o)===ql(a):isNaN(o)&&isNaN(a)}return!1})(e,t);case 9:return Or(e.arrayValue.values||[],t.arrayValue.values||[],as);case 10:case 11:return(function(i,r){const o=i.mapValue.fields||{},a=r.mapValue.fields||{};if(Bg(o)!==Bg(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!as(o[l],a[l])))return!1;return!0})(e,t);default:return _t(52216,{left:e})}}function ca(e,t){return(e.values||[]).find((n=>as(n,t)))!==void 0}function Mr(e,t){if(e===t)return 0;const n=yi(e),s=yi(t);if(n!==s)return Ct(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ct(e.booleanValue,t.booleanValue);case 2:return(function(r,o){const a=oe(r.integerValue||r.doubleValue),l=oe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(e,t);case 3:return $g(e.timestampValue,t.timestampValue);case 4:return $g(aa(e),aa(t));case 5:return xh(e.stringValue,t.stringValue);case 6:return(function(r,o){const a=_i(r),l=_i(o);return a.compareTo(l)})(e.bytesValue,t.bytesValue);case 7:return(function(r,o){const a=r.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Ct(a[c],l[c]);if(h!==0)return h}return Ct(a.length,l.length)})(e.referenceValue,t.referenceValue);case 8:return(function(r,o){const a=Ct(oe(r.latitude),oe(o.latitude));return a!==0?a:Ct(oe(r.longitude),oe(o.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return zg(e.arrayValue,t.arrayValue);case 10:return(function(r,o){const a=r.fields||{},l=o.fields||{},c=a[Kl]?.arrayValue,h=l[Kl]?.arrayValue,d=Ct(c?.values?.length||0,h?.values?.length||0);return d!==0?d:zg(c,h)})(e.mapValue,t.mapValue);case 11:return(function(r,o){if(r===Za.mapValue&&o===Za.mapValue)return 0;if(r===Za.mapValue)return 1;if(o===Za.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=xh(l[d],h[d]);if(f!==0)return f;const g=Mr(a[l[d]],c[h[d]]);if(g!==0)return g}return Ct(l.length,h.length)})(e.mapValue,t.mapValue);default:throw _t(23264,{he:n})}}function $g(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Ct(e,t);const n=mi(e),s=mi(t),i=Ct(n.seconds,s.seconds);return i!==0?i:Ct(n.nanos,s.nanos)}function zg(e,t){const n=e.values||[],s=t.values||[];for(let i=0;i<n.length&&i<s.length;++i){const r=Mr(n[i],s[i]);if(r)return r}return Ct(n.length,s.length)}function Nr(e){return kh(e)}function kh(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const s=mi(n);return`time(${s.seconds},${s.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return _i(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return ct.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let s="[",i=!0;for(const r of n.values||[])i?i=!1:s+=",",s+=kh(r);return s+"]"})(e.arrayValue):"mapValue"in e?(function(n){const s=Object.keys(n.fields||{}).sort();let i="{",r=!0;for(const o of s)r?r=!1:i+=",",i+=`${o}:${kh(n.fields[o])}`;return i+"}"})(e.mapValue):_t(61005,{value:e})}function wl(e){switch(yi(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Bc(e);return t?16+wl(t):16;case 5:return 2*e.stringValue.length;case 6:return _i(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((i,r)=>i+wl(r)),0)})(e.arrayValue);case 10:case 11:return(function(s){let i=0;return Ti(s.fields,((r,o)=>{i+=r.length+wl(o)})),i})(e.mapValue);default:throw _t(13486,{value:e})}}function Hg(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Ph(e){return!!e&&"integerValue"in e}function Md(e){return!!e&&"arrayValue"in e}function Wg(e){return!!e&&"nullValue"in e}function qg(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function El(e){return!!e&&"mapValue"in e}function CC(e){return(e?.mapValue?.fields||{})[mb]?.stringValue===_b}function zo(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Ti(e.mapValue.fields,((n,s)=>t.mapValue.fields[n]=zo(s))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=zo(e.arrayValue.values[n]);return t}return{...e}}function xC(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===RC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(t){this.value=t}static empty(){return new en({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!El(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=zo(n)}setAll(t){let n=De.emptyPath(),s={},i=[];t.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,i),s={},i=[],n=a.popLast()}o?s[a.lastSegment()]=zo(o):i.push(a.lastSegment())}));const r=this.getFieldsMap(n);this.applyChanges(r,s,i)}delete(t){const n=this.field(t.popLast());El(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return as(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let i=n.mapValue.fields[t.get(s)];El(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,s){Ti(n,((i,r)=>t[i]=r));for(const i of s)delete t[i]}clone(){return new en(zo(this.value))}}function yb(e){const t=[];return Ti(e.fields,((n,s)=>{const i=new De([n]);if(El(s)){const r=yb(s.mapValue).fields;if(r.length===0)t.push(i);else for(const o of r)t.push(i.child(o))}else t.push(i)})),new pn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t,n,s,i,r,o,a){this.key=t,this.documentType=n,this.version=s,this.readTime=i,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(t){return new $e(t,0,vt.min(),vt.min(),vt.min(),en.empty(),0)}static newFoundDocument(t,n,s,i){return new $e(t,1,n,vt.min(),s,i,0)}static newNoDocument(t,n){return new $e(t,2,n,vt.min(),vt.min(),en.empty(),0)}static newUnknownDocument(t,n){return new $e(t,3,n,vt.min(),vt.min(),en.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(vt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof $e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new $e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(t,n){this.position=t,this.inclusive=n}}function Gg(e,t,n){let s=0;for(let i=0;i<e.position.length;i++){const r=t[i],o=e.position[i];if(r.field.isKeyField()?s=ct.comparator(ct.fromName(o.referenceValue),n.key):s=Mr(o,n.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function Kg(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!as(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(t,n="asc"){this.field=t,this.dir=n}}function kC(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{}class de extends vb{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new DC(t,n,s):n==="array-contains"?new NC(t,s):n==="in"?new VC(t,s):n==="not-in"?new LC(t,s):n==="array-contains-any"?new FC(t,s):new de(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new OC(t,s):new MC(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Mr(n,this.value)):n!==null&&yi(this.value)===yi(n)&&this.matchesComparison(Mr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return _t(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dn extends vb{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Dn(t,n)}matches(t){return bb(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function bb(e){return e.op==="and"}function wb(e){return PC(e)&&bb(e)}function PC(e){for(const t of e.filters)if(t instanceof Dn)return!1;return!0}function Dh(e){if(e instanceof de)return e.field.canonicalString()+e.op.toString()+Nr(e.value);if(wb(e))return e.filters.map((t=>Dh(t))).join(",");{const t=e.filters.map((n=>Dh(n))).join(",");return`${e.op}(${t})`}}function Eb(e,t){return e instanceof de?(function(s,i){return i instanceof de&&s.op===i.op&&s.field.isEqual(i.field)&&as(s.value,i.value)})(e,t):e instanceof Dn?(function(s,i){return i instanceof Dn&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce(((r,o,a)=>r&&Eb(o,i.filters[a])),!0):!1})(e,t):void _t(19439)}function Tb(e){return e instanceof de?(function(n){return`${n.field.canonicalString()} ${n.op} ${Nr(n.value)}`})(e):e instanceof Dn?(function(n){return n.op.toString()+" {"+n.getFilters().map(Tb).join(" ,")+"}"})(e):"Filter"}class DC extends de{constructor(t,n,s){super(t,n,s),this.key=ct.fromName(s.referenceValue)}matches(t){const n=ct.comparator(t.key,this.key);return this.matchesComparison(n)}}class OC extends de{constructor(t,n){super(t,"in",n),this.keys=Ib("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class MC extends de{constructor(t,n){super(t,"not-in",n),this.keys=Ib("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function Ib(e,t){return(t.arrayValue?.values||[]).map((n=>ct.fromName(n.referenceValue)))}class NC extends de{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Md(n)&&ca(n.arrayValue,this.value)}}class VC extends de{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&ca(this.value.arrayValue,n)}}class LC extends de{constructor(t,n){super(t,"not-in",n)}matches(t){if(ca(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ca(this.value.arrayValue,n)}}class FC extends de{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Md(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>ca(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(t,n=null,s=[],i=[],r=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=o,this.endAt=a,this.Te=null}}function Yg(e,t=null,n=[],s=[],i=null,r=null,o=null){return new UC(e,t,n,s,i,r,o)}function Nd(e){const t=bt(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>Dh(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(r){return r.field.canonicalString()+r.dir})(s))).join(","),Uc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>Nr(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>Nr(s))).join(",")),t.Te=n}return t.Te}function Vd(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!kC(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Eb(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Kg(e.startAt,t.startAt)&&Kg(e.endAt,t.endAt)}function Oh(e){return ct.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(t,n=null,s=[],i=[],r=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function BC(e,t,n,s,i,r,o,a){return new Aa(e,t,n,s,i,r,o,a)}function Ld(e){return new Aa(e)}function Qg(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Ab(e){return e.collectionGroup!==null}function Ho(e){const t=bt(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),n.add(r.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ee(De.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((c=>{c.isInequality()&&(a=a.add(c.field))}))})),a})(t).forEach((r=>{n.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Ql(r,s))})),n.has(De.keyField().canonicalString())||t.Ie.push(new Ql(De.keyField(),s))}return t.Ie}function Qn(e){const t=bt(e);return t.Ee||(t.Ee=jC(t,Ho(e))),t.Ee}function jC(e,t){if(e.limitType==="F")return Yg(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((i=>{const r=i.dir==="desc"?"asc":"desc";return new Ql(i.field,r)}));const n=e.endAt?new Yl(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Yl(e.startAt.position,e.startAt.inclusive):null;return Yg(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}}function Mh(e,t){const n=e.filters.concat([t]);return new Aa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Nh(e,t,n){return new Aa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function jc(e,t){return Vd(Qn(e),Qn(t))&&e.limitType===t.limitType}function Sb(e){return`${Nd(Qn(e))}|lt:${e.limitType}`}function gr(e){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((i=>Tb(i))).join(", ")}]`),Uc(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((i=>Nr(i))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((i=>Nr(i))).join(",")),`Target(${s})`})(Qn(e))}; limitType=${e.limitType})`}function $c(e,t){return t.isFoundDocument()&&(function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):ct.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)})(e,t)&&(function(s,i){for(const r of Ho(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0})(e,t)&&(function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0})(e,t)&&(function(s,i){return!(s.startAt&&!(function(o,a,l){const c=Gg(o,a,l);return o.inclusive?c<=0:c<0})(s.startAt,Ho(s),i)||s.endAt&&!(function(o,a,l){const c=Gg(o,a,l);return o.inclusive?c>=0:c>0})(s.endAt,Ho(s),i))})(e,t)}function $C(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Rb(e){return(t,n)=>{let s=!1;for(const i of Ho(e)){const r=zC(i,t,n);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function zC(e,t,n){const s=e.field.isKeyField()?ct.comparator(t.key,n.key):(function(r,o,a){const l=o.data.field(r),c=a.data.field(r);return l!==null&&c!==null?Mr(l,c):_t(42886)})(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return _t(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),i=this.inner[s];if(i===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Ti(this.inner,((n,s)=>{for(const[i,r]of s)t(i,r)}))}isEmpty(){return ub(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=new ne(ct.comparator);function Ds(){return HC}const Cb=new ne(ct.comparator);function So(...e){let t=Cb;for(const n of e)t=t.insert(n.key,n);return t}function xb(e){let t=Cb;return e.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function Bi(){return Wo()}function kb(){return Wo()}function Wo(){return new nr((e=>e.toString()),((e,t)=>e.isEqual(t)))}const WC=new ne(ct.comparator),qC=new Ee(ct.comparator);function xt(...e){let t=qC;for(const n of e)t=t.add(n);return t}const GC=new Ee(Ct);function KC(){return GC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ql(t)?"-0":t}}function Pb(e){return{integerValue:""+e}}function YC(e,t){return EC(t)?Pb(t):Fd(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(){this._=void 0}}function QC(e,t,n){return e instanceof ua?(function(i,r){const o={fields:{[fb]:{stringValue:db},[gb]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&Od(r)&&(r=Bc(r)),r&&(o.fields[pb]=r),{mapValue:o}})(n,t):e instanceof Vr?Ob(e,t):e instanceof ha?Mb(e,t):(function(i,r){const o=Db(i,r),a=Xg(o)+Xg(i.Ae);return Ph(o)&&Ph(i.Ae)?Pb(a):Fd(i.serializer,a)})(e,t)}function XC(e,t,n){return e instanceof Vr?Ob(e,t):e instanceof ha?Mb(e,t):n}function Db(e,t){return e instanceof Xl?(function(s){return Ph(s)||(function(r){return!!r&&"doubleValue"in r})(s)})(t)?t:{integerValue:0}:null}class ua extends zc{}class Vr extends zc{constructor(t){super(),this.elements=t}}function Ob(e,t){const n=Nb(t);for(const s of e.elements)n.some((i=>as(i,s)))||n.push(s);return{arrayValue:{values:n}}}class ha extends zc{constructor(t){super(),this.elements=t}}function Mb(e,t){let n=Nb(t);for(const s of e.elements)n=n.filter((i=>!as(i,s)));return{arrayValue:{values:n}}}class Xl extends zc{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function Xg(e){return oe(e.integerValue||e.doubleValue)}function Nb(e){return Md(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(t,n){this.field=t,this.transform=n}}function JC(e,t){return e.field.isEqual(t.field)&&(function(s,i){return s instanceof Vr&&i instanceof Vr||s instanceof ha&&i instanceof ha?Or(s.elements,i.elements,as):s instanceof Xl&&i instanceof Xl?as(s.Ae,i.Ae):s instanceof ua&&i instanceof ua})(e.transform,t.transform)}class ZC{constructor(t,n){this.version=t,this.transformResults=n}}class xn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new xn}static exists(t){return new xn(void 0,t)}static updateTime(t){return new xn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Tl(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Hc{}function Lb(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Ub(e.key,xn.none()):new Sa(e.key,e.data,xn.none());{const n=e.data,s=en.empty();let i=new Ee(De.comparator);for(let r of t.fields)if(!i.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?s.delete(r):s.set(r,o),i=i.add(r)}return new Ii(e.key,s,new pn(i.toArray()),xn.none())}}function tx(e,t,n){e instanceof Sa?(function(i,r,o){const a=i.value.clone(),l=Zg(i.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(e,t,n):e instanceof Ii?(function(i,r,o){if(!Tl(i.precondition,r))return void r.convertToUnknownDocument(o.version);const a=Zg(i.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(Fb(i)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(e,t,n):(function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()})(0,t,n)}function qo(e,t,n,s){return e instanceof Sa?(function(r,o,a,l){if(!Tl(r.precondition,o))return a;const c=r.value.clone(),h=tm(r.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null})(e,t,n,s):e instanceof Ii?(function(r,o,a,l){if(!Tl(r.precondition,o))return a;const c=tm(r.fieldTransforms,l,o),h=o.data;return h.setAll(Fb(r)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map((d=>d.field)))})(e,t,n,s):(function(r,o,a){return Tl(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(e,t,n)}function ex(e,t){let n=null;for(const s of e.fieldTransforms){const i=t.data.field(s.field),r=Db(s.transform,i||null);r!=null&&(n===null&&(n=en.empty()),n.set(s.field,r))}return n||null}function Jg(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&Or(s,i,((r,o)=>JC(r,o)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Sa extends Hc{constructor(t,n,s,i=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ii extends Hc{constructor(t,n,s,i,r=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Fb(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}})),t}function Zg(e,t,n){const s=new Map;Ft(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const r=e[i],o=r.transform,a=t.data.field(r.field);s.set(r.field,XC(o,a,n[i]))}return s}function tm(e,t,n){const s=new Map;for(const i of e){const r=i.transform,o=n.data.field(i.field);s.set(i.field,QC(r,o,t))}return s}class Ub extends Hc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nx extends Hc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(t,n,s,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(t.key)&&tx(r,t,s[i])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=qo(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=qo(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=kb();return this.mutations.forEach((i=>{const r=t.get(i.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(i.key)?null:a;const l=Lb(o,a);l!==null&&s.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(vt.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),xt())}isEqual(t){return this.batchId===t.batchId&&Or(this.mutations,t.mutations,((n,s)=>Jg(n,s)))&&Or(this.baseMutations,t.baseMutations,((n,s)=>Jg(n,s)))}}class Ud{constructor(t,n,s,i){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(t,n,s){Ft(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let i=(function(){return WC})();const r=t.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,s[o].version);return new Ud(t,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he,kt;function ox(e){switch(e){case $.OK:return _t(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return _t(15467,{code:e})}}function Bb(e){if(e===void 0)return Ps("GRPC error has no .code"),$.UNKNOWN;switch(e){case he.OK:return $.OK;case he.CANCELLED:return $.CANCELLED;case he.UNKNOWN:return $.UNKNOWN;case he.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case he.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case he.INTERNAL:return $.INTERNAL;case he.UNAVAILABLE:return $.UNAVAILABLE;case he.UNAUTHENTICATED:return $.UNAUTHENTICATED;case he.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case he.NOT_FOUND:return $.NOT_FOUND;case he.ALREADY_EXISTS:return $.ALREADY_EXISTS;case he.PERMISSION_DENIED:return $.PERMISSION_DENIED;case he.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case he.ABORTED:return $.ABORTED;case he.OUT_OF_RANGE:return $.OUT_OF_RANGE;case he.UNIMPLEMENTED:return $.UNIMPLEMENTED;case he.DATA_LOSS:return $.DATA_LOSS;default:return _t(39323,{code:e})}}(kt=he||(he={}))[kt.OK=0]="OK",kt[kt.CANCELLED=1]="CANCELLED",kt[kt.UNKNOWN=2]="UNKNOWN",kt[kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kt[kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kt[kt.NOT_FOUND=5]="NOT_FOUND",kt[kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",kt[kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",kt[kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",kt[kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kt[kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kt[kt.ABORTED=10]="ABORTED",kt[kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",kt[kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",kt[kt.INTERNAL=13]="INTERNAL",kt[kt.UNAVAILABLE=14]="UNAVAILABLE",kt[kt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=new ai([4294967295,4294967295],0);function em(e){const t=ax().encode(e),n=new Zv;return n.update(t),new Uint8Array(n.digest())}function nm(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new ai([n,s],0),new ai([i,r],0)]}class Bd{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Ro(`Invalid padding: ${n}`);if(s<0)throw new Ro(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Ro(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new Ro(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=ai.fromNumber(this.ge)}ye(t,n,s){let i=t.add(n.multiply(ai.fromNumber(s)));return i.compare(lx)===1&&(i=new ai([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=em(t),[s,i]=nm(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(s,i,r);if(!this.we(o))return!1}return!0}static create(t,n,s){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new Bd(r,i,n);return s.forEach((a=>o.insert(a))),o}insert(t){if(this.ge===0)return;const n=em(t),[s,i]=nm(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(s,i,r);this.Se(o)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class Ro extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(t,n,s,i,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const i=new Map;return i.set(t,Ra.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new Wc(vt.min(),i,new ne(Ct),Ds(),xt())}}class Ra{constructor(t,n,s,i,r){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new Ra(s,n,xt(),xt(),xt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(t,n,s,i){this.be=t,this.removedTargetIds=n,this.key=s,this.De=i}}class jb{constructor(t,n){this.targetId=t,this.Ce=n}}class $b{constructor(t,n,s=Me.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=i}}class sm{constructor(){this.ve=0,this.Fe=im(),this.Me=Me.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=xt(),n=xt(),s=xt();return this.Fe.forEach(((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:_t(38017,{changeType:r})}})),new Ra(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=im()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ft(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class cx{constructor(t){this.Ge=t,this.ze=new Map,this.je=Ds(),this.Je=tl(),this.He=tl(),this.Ye=new ne(Ct)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:_t(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,i)=>{this.rt(i)&&n(i)}))}st(t){const n=t.targetId,s=t.Ce.count,i=this.ot(n);if(i){const r=i.target;if(Oh(r))if(s===0){const o=new ct(r.path);this.et(n,o,$e.newNoDocument(o,vt.min()))}else Ft(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const a=this.ut(t),l=a?this.ct(a,t,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=n;let o,a;try{o=_i(s).toUint8Array()}catch(l){if(l instanceof hb)return Dr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Bd(o,i,r)}catch(l){return Dr(l instanceof Ro?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let i=0;return s.forEach((r=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;t.mightContain(a)||(this.et(n,r,null),i++)})),i}Tt(t){const n=new Map;this.ze.forEach(((r,o)=>{const a=this.ot(o);if(a){if(r.current&&Oh(a.target)){const l=new ct(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,$e.newNoDocument(l,t))}r.Be&&(n.set(o,r.ke()),r.qe())}}));let s=xt();this.He.forEach(((r,o)=>{let a=!0;o.forEachWhile((l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(s=s.add(r))})),this.je.forEach(((r,o)=>o.setReadTime(t)));const i=new Wc(t,n,this.Ye,this.je,s);return this.je=Ds(),this.Je=tl(),this.He=tl(),this.Ye=new ne(Ct),i}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const i=this.nt(t);this.Et(t,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new sm,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Ee(Ct),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Ee(Ct),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||at("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new sm),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function tl(){return new ne(ct.comparator)}function im(){return new ne(ct.comparator)}const ux={asc:"ASCENDING",desc:"DESCENDING"},hx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dx={and:"AND",or:"OR"};class fx{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Vh(e,t){return e.useProto3Json||Uc(t)?t:{value:t}}function Jl(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function zb(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function px(e,t){return Jl(e,t.toTimestamp())}function Xn(e){return Ft(!!e,49232),vt.fromTimestamp((function(n){const s=mi(n);return new Qt(s.seconds,s.nanos)})(e))}function jd(e,t){return Lh(e,t).canonicalString()}function Lh(e,t){const n=(function(i){return new qt(["projects",i.projectId,"databases",i.database])})(e).child("documents");return t===void 0?n:n.child(t)}function Hb(e){const t=qt.fromString(e);return Ft(Yb(t),10190,{key:t.toString()}),t}function Fh(e,t){return jd(e.databaseId,t.path)}function Hu(e,t){const n=Hb(t);if(n.get(1)!==e.databaseId.projectId)throw new rt($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new rt($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ct(qb(n))}function Wb(e,t){return jd(e.databaseId,t)}function gx(e){const t=Hb(e);return t.length===4?qt.emptyPath():qb(t)}function Uh(e){return new qt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function qb(e){return Ft(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function rm(e,t,n){return{name:Fh(e,t),fields:n.value.mapValue.fields}}function mx(e,t){let n;if("targetChange"in t){t.targetChange;const s=(function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:_t(39313,{state:c})})(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],r=(function(c,h){return c.useProto3Json?(Ft(h===void 0||typeof h=="string",58123),Me.fromBase64String(h||"")):(Ft(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Me.fromUint8Array(h||new Uint8Array))})(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&(function(c){const h=c.code===void 0?$.UNKNOWN:Bb(c.code);return new rt(h,c.message||"")})(o);n=new $b(s,i,r,a||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const i=Hu(e,s.document.name),r=Xn(s.document.updateTime),o=s.document.createTime?Xn(s.document.createTime):vt.min(),a=new en({mapValue:{fields:s.document.fields}}),l=$e.newFoundDocument(i,r,o,a),c=s.targetIds||[],h=s.removedTargetIds||[];n=new Il(c,h,l.key,l)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const i=Hu(e,s.document),r=s.readTime?Xn(s.readTime):vt.min(),o=$e.newNoDocument(i,r),a=s.removedTargetIds||[];n=new Il([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const i=Hu(e,s.document),r=s.removedTargetIds||[];n=new Il([],r,i,null)}else{if(!("filter"in t))return _t(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,o=new rx(i,r),a=s.targetId;n=new jb(a,o)}}return n}function _x(e,t){let n;if(t instanceof Sa)n={update:rm(e,t.key,t.value)};else if(t instanceof Ub)n={delete:Fh(e,t.key)};else if(t instanceof Ii)n={update:rm(e,t.key,t.data),updateMask:Sx(t.fieldMask)};else{if(!(t instanceof nx))return _t(16599,{Vt:t.type});n={verify:Fh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(r,o){const a=o.transform;if(a instanceof ua)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Vr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ha)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xl)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw _t(20930,{transform:o.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(i,r){return r.updateTime!==void 0?{updateTime:px(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:_t(27497)})(e,t.precondition)),n}function yx(e,t){return e&&e.length>0?(Ft(t!==void 0,14353),e.map((n=>(function(i,r){let o=i.updateTime?Xn(i.updateTime):Xn(r);return o.isEqual(vt.min())&&(o=Xn(r)),new ZC(o,i.transformResults||[])})(n,t)))):[]}function vx(e,t){return{documents:[Wb(e,t.path)]}}function bx(e,t){const n={structuredQuery:{}},s=t.path;let i;t.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Wb(e,i);const r=(function(c){if(c.length!==0)return Kb(Dn.create(c,"and"))})(t.filters);r&&(n.structuredQuery.where=r);const o=(function(c){if(c.length!==0)return c.map((h=>(function(f){return{field:mr(f.field),direction:Tx(f.dir)}})(h)))})(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Vh(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=(function(c){return{before:c.inclusive,values:c.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(c){return{before:!c.inclusive,values:c.position}})(t.endAt)),{ft:n,parent:i}}function wx(e){let t=gx(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){Ft(s===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:t=t.child(h.collectionId)}let r=[];n.where&&(r=(function(d){const f=Gb(d);return f instanceof Dn&&wb(f)?f.getFilters():[f]})(n.where));let o=[];n.orderBy&&(o=(function(d){return d.map((f=>(function(_){return new Ql(_r(_.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(f)))})(n.orderBy));let a=null;n.limit&&(a=(function(d){let f;return f=typeof d=="object"?d.value:d,Uc(f)?null:f})(n.limit));let l=null;n.startAt&&(l=(function(d){const f=!!d.before,g=d.values||[];return new Yl(g,f)})(n.startAt));let c=null;return n.endAt&&(c=(function(d){const f=!d.before,g=d.values||[];return new Yl(g,f)})(n.endAt)),BC(t,i,o,r,a,"F",l,c)}function Ex(e,t){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _t(28987,{purpose:i})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Gb(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=_r(n.unaryFilter.field);return de.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=_r(n.unaryFilter.field);return de.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=_r(n.unaryFilter.field);return de.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=_r(n.unaryFilter.field);return de.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _t(61313);default:return _t(60726)}})(e):e.fieldFilter!==void 0?(function(n){return de.create(_r(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _t(58110);default:return _t(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return Dn.create(n.compositeFilter.filters.map((s=>Gb(s))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return _t(1026)}})(n.compositeFilter.op))})(e):_t(30097,{filter:e})}function Tx(e){return ux[e]}function Ix(e){return hx[e]}function Ax(e){return dx[e]}function mr(e){return{fieldPath:e.canonicalString()}}function _r(e){return De.fromServerFormat(e.fieldPath)}function Kb(e){return e instanceof de?(function(n){if(n.op==="=="){if(qg(n.value))return{unaryFilter:{field:mr(n.field),op:"IS_NAN"}};if(Wg(n.value))return{unaryFilter:{field:mr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(qg(n.value))return{unaryFilter:{field:mr(n.field),op:"IS_NOT_NAN"}};if(Wg(n.value))return{unaryFilter:{field:mr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mr(n.field),op:Ix(n.op),value:n.value}}})(e):e instanceof Dn?(function(n){const s=n.getFilters().map((i=>Kb(i)));return s.length===1?s[0]:{compositeFilter:{op:Ax(n.op),filters:s}}})(e):_t(54877,{filter:e})}function Sx(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function Yb(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(t,n,s,i,r=vt.min(),o=vt.min(),a=Me.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new Zs(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(t){this.yt=t}}function Cx(e){const t=wx({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Nh(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(){this.Cn=new kx}addToCollectionParentIndex(t,n){return this.Cn.add(n),H.resolve()}getCollectionParents(t,n){return H.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return H.resolve()}deleteFieldIndex(t,n){return H.resolve()}deleteAllFieldIndexes(t){return H.resolve()}createTargetIndexes(t,n){return H.resolve()}getDocumentsMatchingTarget(t,n){return H.resolve(null)}getIndexType(t,n){return H.resolve(0)}getFieldIndexes(t,n){return H.resolve([])}getNextCollectionGroupToUpdate(t){return H.resolve(null)}getMinOffset(t,n){return H.resolve(gi.min())}getMinOffsetFromCollectionGroup(t,n){return H.resolve(gi.min())}updateCollectionGroup(t,n,s){return H.resolve()}updateIndexEntries(t,n){return H.resolve()}}class kx{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n]||new Ee(qt.comparator),r=!i.has(s);return this.index[n]=i.add(s),r}has(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(t){return(this.index[t]||new Ee(qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qb=41943040;class tn{static withCacheSize(t){return new tn(t,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(Qb,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Lr(0)}static cr(){return new Lr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="LruGarbageCollector",Px=1048576;function lm([e,t],[n,s]){const i=Ct(e,n);return i===0?Ct(t,s):i}class Dx{constructor(t){this.Ir=t,this.buffer=new Ee(lm),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();lm(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Ox{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){at(am,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Hr(n)?at(am,"Ignoring IndexedDB error during garbage collection: ",n):await zr(n)}await this.Vr(3e5)}))}}class Mx{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return H.resolve(Fc.ce);const s=new Dx(n);return this.mr.forEachTarget(t,(i=>s.Ar(i.sequenceNumber))).next((()=>this.mr.pr(t,(i=>s.Ar(i))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(at("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(om)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),om):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,i,r,o,a,l,c;const h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(t,i)))).next((d=>(s=d,a=Date.now(),this.removeTargets(t,s,n)))).next((d=>(r=d,l=Date.now(),this.removeOrphanedDocuments(t,s)))).next((d=>(c=Date.now(),pr()<=Rt.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${r} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:d}))))}}function Nx(e,t){return new Mx(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(){this.changes=new nr((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,$e.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?H.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(t,n,s,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((i=>(s=i,this.remoteDocumentCache.getEntry(t,n)))).next((i=>(s!==null&&qo(s.mutation,i,pn.empty(),Qt.now()),i)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,xt()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=xt()){const i=Bi();return this.populateOverlays(t,i,n).next((()=>this.computeViews(t,n,i,s).next((r=>{let o=So();return r.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(t,n){const s=Bi();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,xt())))}populateOverlays(t,n,s){const i=[];return s.forEach((r=>{n.has(r)||i.push(r)})),this.documentOverlayCache.getOverlays(t,i).next((r=>{r.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(t,n,s,i){let r=Ds();const o=Wo(),a=(function(){return Wo()})();return n.forEach(((l,c)=>{const h=s.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Ii)?r=r.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),qo(h.mutation,c,h.mutation.getFieldMask(),Qt.now())):o.set(c.key,pn.empty())})),this.recalculateAndSaveOverlays(t,r).next((l=>(l.forEach(((c,h)=>o.set(c,h))),n.forEach(((c,h)=>a.set(c,new Lx(h,o.get(c)??null)))),a)))}recalculateAndSaveOverlays(t,n){const s=Wo();let i=new ne(((o,a)=>o-a)),r=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((o=>{for(const a of o)a.keys().forEach((l=>{const c=n.get(l);if(c===null)return;let h=s.get(l)||pn.empty();h=a.applyToLocalView(c,h),s.set(l,h);const d=(i.get(a.batchId)||xt()).add(l);i=i.insert(a.batchId,d)}))})).next((()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=kb();h.forEach((f=>{if(!r.has(f)){const g=Lb(n.get(f),s.get(f));g!==null&&d.set(f,g),r=r.add(f)}})),o.push(this.documentOverlayCache.saveOverlays(t,c,d))}return H.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,i){return(function(o){return ct.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Ab(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,i):this.getDocumentsMatchingCollectionQuery(t,n,s,i)}getNextDocuments(t,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,i).next((r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,i-r.size):H.resolve(Bi());let a=oa,l=r;return o.next((c=>H.forEach(c,((h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),r.get(h)?H.resolve():this.remoteDocumentCache.getEntry(t,h).next((f=>{l=l.insert(h,f)}))))).next((()=>this.populateOverlays(t,c,r))).next((()=>this.computeViews(t,l,c,xt()))).next((h=>({batchId:a,changes:xb(h)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ct(n)).next((s=>{let i=So();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,i){const r=n.collectionGroup;let o=So();return this.indexManager.getCollectionParents(t,r).next((a=>H.forEach(a,(l=>{const c=(function(d,f){return new Aa(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(n,l.child(r));return this.getDocumentsMatchingCollectionQuery(t,c,s,i).next((h=>{h.forEach(((d,f)=>{o=o.insert(d,f)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(t,n,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,r,i)))).next((o=>{r.forEach(((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,$e.newInvalidDocument(h)))}));let a=So();return o.forEach(((l,c)=>{const h=r.get(l);h!==void 0&&qo(h.mutation,c,pn.empty(),Qt.now()),$c(n,c)&&(a=a.insert(l,c))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return H.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Xn(i.createTime)}})(n)),H.resolve()}getNamedQuery(t,n){return H.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:Cx(i.bundledQuery),readTime:Xn(i.readTime)}})(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(){this.overlays=new ne(ct.comparator),this.qr=new Map}getOverlay(t,n){return H.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Bi();return H.forEach(n,(i=>this.getOverlay(t,i).next((r=>{r!==null&&s.set(i,r)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((i,r)=>{this.St(t,n,r)})),H.resolve()}removeOverlaysForBatchId(t,n,s){const i=this.qr.get(s);return i!==void 0&&(i.forEach((r=>this.overlays=this.overlays.remove(r))),this.qr.delete(s)),H.resolve()}getOverlaysForCollection(t,n,s){const i=Bi(),r=n.length+1,o=new ct(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>s&&i.set(l.getKey(),l)}return H.resolve(i)}getOverlaysForCollectionGroup(t,n,s,i){let r=new ne(((c,h)=>c-h));const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>s){let h=r.get(c.largestBatchId);h===null&&(h=Bi(),r=r.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Bi(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((c,h)=>a.set(c,h))),!(a.size()>=i)););return H.resolve(a)}St(t,n,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(s.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new ix(n,s));let r=this.qr.get(n);r===void 0&&(r=xt(),this.qr.set(n,r)),this.qr.set(n,r.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(){this.sessionToken=Me.EMPTY_BYTE_STRING}getSessionToken(t){return H.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(){this.Qr=new Ee(Se.$r),this.Ur=new Ee(Se.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new Se(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new Se(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new ct(new qt([])),s=new Se(n,t),i=new Se(n,t+1),r=[];return this.Ur.forEachInRange([s,i],(o=>{this.Gr(o),r.push(o.key)})),r}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new ct(new qt([])),s=new Se(n,t),i=new Se(n,t+1);let r=xt();return this.Ur.forEachInRange([s,i],(o=>{r=r.add(o.key)})),r}containsKey(t){const n=new Se(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Se{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return ct.comparator(t.key,n.key)||Ct(t.Yr,n.Yr)}static Kr(t,n){return Ct(t.Yr,n.Yr)||ct.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ee(Se.$r)}checkEmpty(t){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,i){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new sx(r,n,s,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new Se(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return H.resolve(o)}lookupMutationBatch(t,n){return H.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,i=this.ei(s),r=i<0?0:i;return H.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?Dd:this.tr-1)}getAllMutationBatches(t){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Se(n,0),i=new Se(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([s,i],(o=>{const a=this.Xr(o.Yr);r.push(a)})),H.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Ee(Ct);return n.forEach((i=>{const r=new Se(i,0),o=new Se(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,o],(a=>{s=s.add(a.Yr)}))})),H.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,i=s.length+1;let r=s;ct.isDocumentKey(r)||(r=r.child(""));const o=new Se(new ct(r),0);let a=new Ee(Ct);return this.Zr.forEachWhile((l=>{const c=l.key.path;return!!s.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Yr)),!0)}),o),H.resolve(this.ti(a))}ti(t){const n=[];return t.forEach((s=>{const i=this.Xr(s);i!==null&&n.push(i)})),n}removeMutationBatch(t,n){Ft(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return H.forEach(n.mutations,(i=>{const r=new Se(i.key,n.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new Se(n,0),i=this.Zr.firstAfterOrEqual(s);return H.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,H.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(t){this.ri=t,this.docs=(function(){return new ne(ct.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,i=this.docs.get(s),r=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return H.resolve(s?s.document.mutableCopy():$e.newInvalidDocument(n))}getEntries(t,n){let s=Ds();return n.forEach((i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():$e.newInvalidDocument(i))})),H.resolve(s)}getDocumentsMatchingQuery(t,n,s,i){let r=Ds();const o=n.path,a=new ct(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||yC(_C(h),s)<=0||(i.has(h.key)||$c(n,h))&&(r=r.insert(h.key,h.mutableCopy()))}return H.resolve(r)}getAllFromCollectionGroup(t,n,s,i){_t(9500)}ii(t,n){return H.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new Hx(this)}getSize(t){return H.resolve(this.size)}}class Hx extends Vx{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(t,i)):this.Nr.removeEntry(s)})),H.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(t){this.persistence=t,this.si=new nr((n=>Nd(n)),Vd),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.oi=0,this._i=new $d,this.targetCount=0,this.ai=Lr.ur()}forEachTarget(t,n){return this.si.forEach(((s,i)=>n(i))),H.resolve()}getLastRemoteSnapshotVersion(t){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return H.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),H.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Lr(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,H.resolve()}updateTargetData(t,n){return this.Pr(n),H.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(t,n,s){let i=0;const r=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.si.delete(o),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),H.waitFor(r).next((()=>i))}getTargetCount(t){return H.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return H.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),H.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach((o=>{r.push(i.markPotentiallyOrphaned(t,o))})),H.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),H.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return H.resolve(s)}containsKey(t,n){return H.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(t,n){this.ui={},this.overlays={},this.ci=new Fc(0),this.li=!1,this.li=!0,this.hi=new jx,this.referenceDelegate=t(this),this.Pi=new Wx(this),this.indexManager=new xx,this.remoteDocumentCache=(function(i){return new zx(i)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new Rx(n),this.Ii=new Ux(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Bx,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new $x(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){at("MemoryPersistence","Starting transaction:",t);const i=new qx(this.ci.next());return this.referenceDelegate.Ei(),s(i).next((r=>this.referenceDelegate.di(i).next((()=>r)))).toPromise().then((r=>(i.raiseOnCommittedEvent(),r)))}Ai(t,n){return H.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class qx extends bC{constructor(t){super(),this.currentSequenceNumber=t}}class zd{constructor(t){this.persistence=t,this.Ri=new $d,this.Vi=null}static mi(t){return new zd(t)}get fi(){if(this.Vi)return this.Vi;throw _t(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),H.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),H.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),H.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((i=>{i.forEach((r=>this.fi.add(r.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.fi,(s=>{const i=ct.fromPath(s);return this.gi(t,i).next((r=>{r||n.removeEntry(i,vt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return H.or([()=>H.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Zl{constructor(t,n){this.persistence=t,this.pi=new nr((s=>TC(s.path)),((s,i)=>s.isEqual(i))),this.garbageCollector=Nx(this,n)}static mi(t,n){return new Zl(t,n)}Ei(){}di(t){return H.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((i=>s+i))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return H.forEach(this.pi,((s,i)=>this.br(t,s,i).next((r=>r?H.resolve():n(i)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.ii(t,(o=>this.br(t,o,n).next((a=>{a||(s++,r.removeEntry(o,vt.min()))})))).next((()=>r.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),H.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),H.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),H.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),H.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=wl(t.data.value)),n}br(t,n,s){return H.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.pi.get(n);return H.resolve(i!==void 0&&i>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(t,n,s,i){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=i}static As(t,n){let s=xt(),i=xt();for(const r of n.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Hd(t,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return jS()?8:wC(qe())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,i){const r={result:null};return this.ys(t,n).next((o=>{r.result=o})).next((()=>{if(!r.result)return this.ws(t,n,i,s).next((o=>{r.result=o}))})).next((()=>{if(r.result)return;const o=new Gx;return this.Ss(t,n,o).next((a=>{if(r.result=a,this.Vs)return this.bs(t,n,o,a.size)}))})).next((()=>r.result))}bs(t,n,s,i){return s.documentReadCount<this.fs?(pr()<=Rt.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",gr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),H.resolve()):(pr()<=Rt.DEBUG&&at("QueryEngine","Query:",gr(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.gs*i?(pr()<=Rt.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",gr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Qn(n))):H.resolve())}ys(t,n){if(Qg(n))return H.resolve(null);let s=Qn(n);return this.indexManager.getIndexType(t,s).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Nh(n,null,"F"),s=Qn(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((r=>{const o=xt(...r);return this.ps.getDocuments(t,o).next((a=>this.indexManager.getMinOffset(t,s).next((l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(t,Nh(n,null,"F")):this.vs(t,c,n,l)}))))})))))}ws(t,n,s,i){return Qg(n)||i.isEqual(vt.min())?H.resolve(null):this.ps.getDocuments(t,s).next((r=>{const o=this.Ds(n,r);return this.Cs(n,o,s,i)?H.resolve(null):(pr()<=Rt.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),gr(n)),this.vs(t,o,n,mC(i,oa)).next((a=>a)))}))}Ds(t,n){let s=new Ee(Rb(t));return n.forEach(((i,r)=>{$c(t,r)&&(s=s.add(r))})),s}Cs(t,n,s,i){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ss(t,n,s){return pr()<=Rt.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",gr(n)),this.ps.getDocumentsMatchingQuery(t,n,gi.min(),s)}vs(t,n,s,i){return this.ps.getDocumentsMatchingQuery(t,s,i).next((r=>(n.forEach((o=>{r=r.insert(o.key,o)})),r)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd="LocalStore",Yx=3e8;class Qx{constructor(t,n,s,i){this.persistence=t,this.Fs=n,this.serializer=i,this.Ms=new ne(Ct),this.xs=new nr((r=>Nd(r)),Vd),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Fx(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function Xx(e,t,n,s){return new Qx(e,t,n,s)}async function Jb(e,t){const n=bt(e);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next((r=>(i=r,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((r=>{const o=[],a=[];let l=xt();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of r){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(s,l).next((c=>({Ls:c,removedBatchIds:o,addedBatchIds:a})))}))}))}function Jx(e,t){const n=bt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const i=t.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,c,h){const d=c.batch,f=d.keys();let g=H.resolve();return f.forEach((_=>{g=g.next((()=>h.getEntry(l,_))).next((y=>{const b=c.docVersions.get(_);Ft(b!==null,48541),y.version.compareTo(b)<0&&(d.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),h.addEntry(y)))}))})),g.next((()=>a.mutationQueue.removeMutationBatch(l,d)))})(n,s,t,r).next((()=>r.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(a){let l=xt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l})(t)))).next((()=>n.localDocuments.getDocuments(s,i)))}))}function Zb(e){const t=bt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function Zx(e,t){const n=bt(e),s=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(r=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];t.targetChanges.forEach(((h,d)=>{const f=i.get(d);if(!f)return;a.push(n.Pi.removeMatchingKeys(r,h.removedDocuments,d).next((()=>n.Pi.addMatchingKeys(r,h.addedDocuments,d))));let g=f.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(d)!==null?g=g.withResumeToken(Me.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,s)),i=i.insert(d,g),(function(y,b,C){return y.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=Yx?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0})(f,g,h)&&a.push(n.Pi.updateTargetData(r,g))}));let l=Ds(),c=xt();if(t.documentUpdates.forEach((h=>{t.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,h))})),a.push(tk(r,o,t.documentUpdates).next((h=>{l=h.ks,c=h.qs}))),!s.isEqual(vt.min())){const h=n.Pi.getLastRemoteSnapshotVersion(r).next((d=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,s)));a.push(h)}return H.waitFor(a).next((()=>o.apply(r))).next((()=>n.localDocuments.getLocalViewOfDocuments(r,l,c))).next((()=>l))})).then((r=>(n.Ms=i,r)))}function tk(e,t,n){let s=xt(),i=xt();return n.forEach((r=>s=s.add(r))),t.getEntries(e,s).next((r=>{let o=Ds();return n.forEach(((a,l)=>{const c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(vt.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):at(Wd,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)})),{ks:o,qs:i}}))}function ek(e,t){const n=bt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Dd),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function nk(e,t){const n=bt(e);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let i;return n.Pi.getTargetData(s,t).next((r=>r?(i=r,H.resolve(i)):n.Pi.allocateTargetId(s).next((o=>(i=new Zs(t,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,i).next((()=>i)))))))})).then((s=>{const i=n.Ms.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function Bh(e,t,n){const s=bt(e),i=s.Ms.get(t),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,(o=>s.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Hr(o))throw o;at(Wd,`Failed to update sequence numbers for target ${t}: ${o}`)}s.Ms=s.Ms.remove(t),s.xs.delete(i.target)}function cm(e,t,n){const s=bt(e);let i=vt.min(),r=xt();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,c,h){const d=bt(l),f=d.xs.get(h);return f!==void 0?H.resolve(d.Ms.get(f)):d.Pi.getTargetData(c,h)})(s,o,Qn(t)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{r=l}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,t,n?i:vt.min(),n?r:xt()))).next((a=>(sk(s,$C(t),a),{documents:a,Qs:r})))))}function sk(e,t,n){let s=e.Os.get(t)||vt.min();n.forEach(((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)})),e.Os.set(t,s)}class um{constructor(){this.activeTargetIds=KC()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class ik{constructor(){this.Mo=new um,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new um,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="ConnectivityMonitor";class dm{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){at(hm,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){at(hm,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el=null;function jh(){return el===null?el=(function(){return 268435456+Math.round(2147483648*Math.random())})():el++,"0x"+el.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu="RestConnection",ok={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ak{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${i}`,this.Wo=this.databaseId.database===Gl?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Go(t,n,s,i,r){const o=jh(),a=this.zo(t,n.toUriEncodedString());at(Wu,`Sending RPC '${t}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,r);const{host:c}=new URL(a),h=tr(c);return this.Jo(t,a,l,s,h).then((d=>(at(Wu,`Received RPC '${t}' ${o}: `,d),d)),(d=>{throw Dr(Wu,`RPC '${t}' ${o} failed with error: `,d,"url: ",a,"request:",s),d}))}Ho(t,n,s,i,r,o){return this.Go(t,n,s,i,r)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$r})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,r)=>t[r]=i)),s&&s.headers.forEach(((i,r)=>t[r]=i))}zo(t,n){const s=ok[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fe="WebChannelConnection";class ck extends ak{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,i,r){const o=jh();return new Promise(((a,l)=>{const c=new tb;c.setWithCredentials(!0),c.listenOnce(eb.COMPLETE,(()=>{try{switch(c.getLastErrorCode()){case bl.NO_ERROR:const d=c.getResponseJson();at(Fe,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(d)),a(d);break;case bl.TIMEOUT:at(Fe,`RPC '${t}' ${o} timed out`),l(new rt($.DEADLINE_EXCEEDED,"Request time out"));break;case bl.HTTP_ERROR:const f=c.getStatus();if(at(Fe,`RPC '${t}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g?.error;if(_&&_.status&&_.message){const y=(function(C){const R=C.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(R)>=0?R:$.UNKNOWN})(_.status);l(new rt(y,_.message))}else l(new rt($.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new rt($.UNAVAILABLE,"Connection failed."));break;default:_t(9055,{l_:t,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{at(Fe,`RPC '${t}' ${o} completed.`)}}));const h=JSON.stringify(i);at(Fe,`RPC '${t}' ${o} sending request:`,i),c.send(n,"POST",h,s,15)}))}T_(t,n,s){const i=jh(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=ib(),a=sb(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const h=r.join("");at(Fe,`Creating RPC '${t}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);this.I_(d);let f=!1,g=!1;const _=new lk({Yo:b=>{g?at(Fe,`Not sending because RPC '${t}' stream ${i} is closed:`,b):(f||(at(Fe,`Opening RPC '${t}' stream ${i} transport.`),d.open(),f=!0),at(Fe,`RPC '${t}' stream ${i} sending:`,b),d.send(b))},Zo:()=>d.close()}),y=(b,C,R)=>{b.listen(C,(I=>{try{R(I)}catch(x){setTimeout((()=>{throw x}),0)}}))};return y(d,Ao.EventType.OPEN,(()=>{g||(at(Fe,`RPC '${t}' stream ${i} transport opened.`),_.o_())})),y(d,Ao.EventType.CLOSE,(()=>{g||(g=!0,at(Fe,`RPC '${t}' stream ${i} transport closed`),_.a_(),this.E_(d))})),y(d,Ao.EventType.ERROR,(b=>{g||(g=!0,Dr(Fe,`RPC '${t}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),_.a_(new rt($.UNAVAILABLE,"The operation could not be completed")))})),y(d,Ao.EventType.MESSAGE,(b=>{if(!g){const C=b.data[0];Ft(!!C,16349);const R=C,I=R?.error||R[0]?.error;if(I){at(Fe,`RPC '${t}' stream ${i} received error:`,I);const x=I.status;let L=(function(v){const T=he[v];if(T!==void 0)return Bb(T)})(x),W=I.message;L===void 0&&(L=$.INTERNAL,W="Unknown error status: "+x+" with message "+I.message),g=!0,_.a_(new rt(L,W)),d.close()}else at(Fe,`RPC '${t}' stream ${i} received:`,C),_.u_(C)}})),y(a,nb.STAT_EVENT,(b=>{b.stat===Ch.PROXY?at(Fe,`RPC '${t}' stream ${i} detected buffering proxy`):b.stat===Ch.NOPROXY&&at(Fe,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{_.__()}),0),_}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function qu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(e){return new fx(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(t,n,s=1e3,i=1.5,r=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=i,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-s);i>0&&at("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="PersistentStream";class ew{constructor(t,n,s,i,r,o,a,l){this.Mi=t,this.S_=s,this.b_=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tw(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Ps(n.toString()),Ps("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,i])=>{this.D_===n&&this.G_(s,i)}),(s=>{t((()=>{const i=new rt($.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{s((()=>this.z_(i)))})),this.stream.onMessage((i=>{s((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return at(fm,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(at(fm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class uk extends ew{constructor(t,n,s,i,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=mx(this.serializer,t),s=(function(r){if(!("targetChange"in r))return vt.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?vt.min():o.readTime?Xn(o.readTime):vt.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=Uh(this.serializer),n.addTarget=(function(r,o){let a;const l=o.target;if(a=Oh(l)?{documents:vx(r,l)}:{query:bx(r,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=zb(r,o.resumeToken);const c=Vh(r,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(vt.min())>0){a.readTime=Jl(r,o.snapshotVersion.toTimestamp());const c=Vh(r,o.expectedCount);c!==null&&(a.expectedCount=c)}return a})(this.serializer,t);const s=Ex(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=Uh(this.serializer),n.removeTarget=t,this.q_(n)}}class hk extends ew{constructor(t,n,s,i,r,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Ft(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Ft(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Ft(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=yx(t.writeResults,t.commitTime),s=Xn(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=Uh(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>_x(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{}class fk extends dk{constructor(t,n,s,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new rt($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,o])=>this.connection.Go(t,Lh(n,s),i,r,o))).catch((r=>{throw r.name==="FirebaseError"?(r.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new rt($.UNKNOWN,r.toString())}))}Ho(t,n,s,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(t,Lh(n,s),i,o,a,r))).catch((o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new rt($.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class pk{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ps(n),this.aa=!1):at("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi="RemoteStore";class gk{constructor(t,n,s,i,r){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{sr(this)&&(at(Yi,"Restarting streams for network reachability change."),await(async function(l){const c=bt(l);c.Ea.add(4),await Ca(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Gc(c)})(this))}))})),this.Ra=new pk(s,i)}}async function Gc(e){if(sr(e))for(const t of e.da)await t(!0)}async function Ca(e){for(const t of e.da)await t(!1)}function nw(e,t){const n=bt(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Yd(n)?Kd(n):Wr(n).O_()&&Gd(n,t))}function qd(e,t){const n=bt(e),s=Wr(n);n.Ia.delete(t),s.O_()&&sw(n,t),n.Ia.size===0&&(s.O_()?s.L_():sr(n)&&n.Ra.set("Unknown"))}function Gd(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(vt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Wr(e).Y_(t)}function sw(e,t){e.Va.Ue(t),Wr(e).Z_(t)}function Kd(e){e.Va=new cx({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Wr(e).start(),e.Ra.ua()}function Yd(e){return sr(e)&&!Wr(e).x_()&&e.Ia.size>0}function sr(e){return bt(e).Ea.size===0}function iw(e){e.Va=void 0}async function mk(e){e.Ra.set("Online")}async function _k(e){e.Ia.forEach(((t,n)=>{Gd(e,t)}))}async function yk(e,t){iw(e),Yd(e)?(e.Ra.ha(t),Kd(e)):e.Ra.set("Unknown")}async function vk(e,t,n){if(e.Ra.set("Online"),t instanceof $b&&t.state===2&&t.cause)try{await(async function(i,r){const o=r.cause;for(const a of r.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(e,t)}catch(s){at(Yi,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await tc(e,s)}else if(t instanceof Il?e.Va.Ze(t):t instanceof jb?e.Va.st(t):e.Va.tt(t),!n.isEqual(vt.min()))try{const s=await Zb(e.localStore);n.compareTo(s)>=0&&await(function(r,o){const a=r.Va.Tt(o);return a.targetChanges.forEach(((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=r.Ia.get(c);h&&r.Ia.set(c,h.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,c)=>{const h=r.Ia.get(l);if(!h)return;r.Ia.set(l,h.withResumeToken(Me.EMPTY_BYTE_STRING,h.snapshotVersion)),sw(r,l);const d=new Zs(h.target,l,c,h.sequenceNumber);Gd(r,d)})),r.remoteSyncer.applyRemoteEvent(a)})(e,n)}catch(s){at(Yi,"Failed to raise snapshot:",s),await tc(e,s)}}async function tc(e,t,n){if(!Hr(t))throw t;e.Ea.add(1),await Ca(e),e.Ra.set("Offline"),n||(n=()=>Zb(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{at(Yi,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Gc(e)}))}function rw(e,t){return t().catch((n=>tc(e,n,t)))}async function Kc(e){const t=bt(e),n=vi(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Dd;for(;bk(t);)try{const i=await ek(t.localStore,s);if(i===null){t.Ta.length===0&&n.L_();break}s=i.batchId,wk(t,i)}catch(i){await tc(t,i)}ow(t)&&aw(t)}function bk(e){return sr(e)&&e.Ta.length<10}function wk(e,t){e.Ta.push(t);const n=vi(e);n.O_()&&n.X_&&n.ea(t.mutations)}function ow(e){return sr(e)&&!vi(e).x_()&&e.Ta.length>0}function aw(e){vi(e).start()}async function Ek(e){vi(e).ra()}async function Tk(e){const t=vi(e);for(const n of e.Ta)t.ea(n.mutations)}async function Ik(e,t,n){const s=e.Ta.shift(),i=Ud.from(s,t,n);await rw(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Kc(e)}async function Ak(e,t){t&&vi(e).X_&&await(async function(s,i){if((function(o){return ox(o)&&o!==$.ABORTED})(i.code)){const r=s.Ta.shift();vi(s).B_(),await rw(s,(()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i))),await Kc(s)}})(e,t),ow(e)&&aw(e)}async function pm(e,t){const n=bt(e);n.asyncQueue.verifyOperationInProgress(),at(Yi,"RemoteStore received new credentials");const s=sr(n);n.Ea.add(3),await Ca(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Gc(n)}async function Sk(e,t){const n=bt(e);t?(n.Ea.delete(2),await Gc(n)):t||(n.Ea.add(2),await Ca(n),n.Ra.set("Unknown"))}function Wr(e){return e.ma||(e.ma=(function(n,s,i){const r=bt(n);return r.sa(),new uk(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)})(e.datastore,e.asyncQueue,{Xo:mk.bind(null,e),t_:_k.bind(null,e),r_:yk.bind(null,e),H_:vk.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),Yd(e)?Kd(e):e.Ra.set("Unknown")):(await e.ma.stop(),iw(e))}))),e.ma}function vi(e){return e.fa||(e.fa=(function(n,s,i){const r=bt(n);return r.sa(),new hk(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)})(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Ek.bind(null,e),r_:Ak.bind(null,e),ta:Tk.bind(null,e),na:Ik.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await Kc(e)):(await e.fa.stop(),e.Ta.length>0&&(at(Yi,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(t,n,s,i,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new Ss,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,i,r){const o=Date.now()+s,a=new Qd(t,n,o,i,r);return a.start(s),a}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new rt($.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xd(e,t){if(Ps("AsyncQueue",`${t}: ${e}`),Hr(e))return new rt($.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{static emptySet(t){return new Er(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||ct.comparator(n.key,s.key):(n,s)=>ct.comparator(n.key,s.key),this.keyedMap=So(),this.sortedSet=new ne(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Er)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new Er;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(){this.ga=new ne(ct.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):_t(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class Fr{constructor(t,n,s,i,r,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,s,i,r){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new Fr(t,n,Er.emptySet(n),o,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&jc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class Ck{constructor(){this.queries=mm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const i=bt(n),r=i.queries;i.queries=mm(),r.forEach(((o,a)=>{for(const l of a.Sa)l.onError(s)}))})(this,new rt($.ABORTED,"Firestore shutting down"))}}function mm(){return new nr((e=>Sb(e)),jc)}async function lw(e,t){const n=bt(e);let s=3;const i=t.query;let r=n.queries.get(i);r?!r.ba()&&t.Da()&&(s=2):(r=new Rk,s=t.Da()?0:1);try{switch(s){case 0:r.wa=await n.onListen(i,!0);break;case 1:r.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Xd(o,`Initialization of query '${gr(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,r),r.Sa.push(t),t.va(n.onlineState),r.wa&&t.Fa(r.wa)&&Jd(n)}async function cw(e,t){const n=bt(e),s=t.query;let i=3;const r=n.queries.get(s);if(r){const o=r.Sa.indexOf(t);o>=0&&(r.Sa.splice(o,1),r.Sa.length===0?i=t.Da()?0:1:!r.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function xk(e,t){const n=bt(e);let s=!1;for(const i of t){const r=i.query,o=n.queries.get(r);if(o){for(const a of o.Sa)a.Fa(i)&&(s=!0);o.wa=i}}s&&Jd(n)}function kk(e,t,n){const s=bt(e),i=s.queries.get(t);if(i)for(const r of i.Sa)r.onError(n);s.queries.delete(t)}function Jd(e){e.Ca.forEach((t=>{t.next()}))}var $h,_m;(_m=$h||($h={})).Ma="default",_m.Cache="cache";class uw{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const i of t.docChanges)i.type!==3&&s.push(i);t=new Fr(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Fr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==$h.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(t){this.key=t}}class dw{constructor(t){this.key=t}}class Pk{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xt(),this.mutatedKeys=xt(),this.eu=Rb(t),this.tu=new Er(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new gm,i=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((h,d)=>{const f=i.get(h),g=$c(this.query,d)?d:null,_=!!f&&this.mutatedKeys.has(f.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;f&&g?f.data.isEqual(g.data)?_!==y&&(s.track({type:3,doc:g}),b=!0):this.su(f,g)||(s.track({type:2,doc:g}),b=!0,(l&&this.eu(g,l)>0||c&&this.eu(g,c)<0)&&(a=!0)):!f&&g?(s.track({type:0,doc:g}),b=!0):f&&!g&&(s.track({type:1,doc:f}),b=!0,(l||c)&&(a=!0)),b&&(g?(o=o.add(g),r=y?r.add(h):r.delete(h)):(o=o.delete(h),r=r.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),r=r.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:r}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,i){const r=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort(((h,d)=>(function(g,_){const y=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t(20277,{Rt:b})}};return y(g)-y(_)})(h.type,d.type)||this.eu(h.doc,d.doc))),this.ou(s),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Fr(this.query,t.tu,r,o,t.mutatedKeys,l===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=xt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new dw(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new hw(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=xt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Fr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Zd="SyncEngine";class Dk{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class Ok{constructor(t){this.key=t,this.hu=!1}}class Mk{constructor(t,n,s,i,r,o){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new nr((a=>Sb(a)),jc),this.Iu=new Map,this.Eu=new Set,this.du=new ne(ct.comparator),this.Au=new Map,this.Ru=new $d,this.Vu={},this.mu=new Map,this.fu=Lr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Nk(e,t,n=!0){const s=yw(e);let i;const r=s.Tu.get(t);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.lu()):i=await fw(s,t,n,!0),i}async function Vk(e,t){const n=yw(e);await fw(n,t,!0,!1)}async function fw(e,t,n,s){const i=await nk(e.localStore,Qn(t)),r=i.targetId,o=e.sharedClientState.addLocalQueryTarget(r,n);let a;return s&&(a=await Lk(e,t,r,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&nw(e.remoteStore,i),a}async function Lk(e,t,n,s,i){e.pu=(d,f,g)=>(async function(y,b,C,R){let I=b.view.ru(C);I.Cs&&(I=await cm(y.localStore,b.query,!1).then((({documents:E})=>b.view.ru(E,I))));const x=R&&R.targetChanges.get(b.targetId),L=R&&R.targetMismatches.get(b.targetId)!=null,W=b.view.applyChanges(I,y.isPrimaryClient,x,L);return vm(y,b.targetId,W.au),W.snapshot})(e,d,f,g);const r=await cm(e.localStore,t,!0),o=new Pk(t,r.Qs),a=o.ru(r.documents),l=Ra.createSynthesizedTargetChangeForCurrentChange(n,s&&e.onlineState!=="Offline",i),c=o.applyChanges(a,e.isPrimaryClient,l);vm(e,n,c.au);const h=new Dk(t,n,o);return e.Tu.set(t,h),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function Fk(e,t,n){const s=bt(e),i=s.Tu.get(t),r=s.Iu.get(i.targetId);if(r.length>1)return s.Iu.set(i.targetId,r.filter((o=>!jc(o,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await Bh(s.localStore,i.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(i.targetId),n&&qd(s.remoteStore,i.targetId),zh(s,i.targetId)})).catch(zr)):(zh(s,i.targetId),await Bh(s.localStore,i.targetId,!0))}async function Uk(e,t){const n=bt(e),s=n.Tu.get(t),i=n.Iu.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),qd(n.remoteStore,s.targetId))}async function Bk(e,t,n){const s=Gk(e);try{const i=await(function(o,a){const l=bt(o),c=Qt.now(),h=a.reduce(((g,_)=>g.add(_.key)),xt());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let _=Ds(),y=xt();return l.Ns.getEntries(g,h).next((b=>{_=b,_.forEach(((C,R)=>{R.isValidDocument()||(y=y.add(C))}))})).next((()=>l.localDocuments.getOverlayedDocuments(g,_))).next((b=>{d=b;const C=[];for(const R of a){const I=ex(R,d.get(R.key).overlayedDocument);I!=null&&C.push(new Ii(R.key,I,yb(I.value.mapValue),xn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,C,a)})).next((b=>{f=b;const C=b.applyToLocalDocumentSet(d,y);return l.documentOverlayCache.saveOverlays(g,b.batchId,C)}))})).then((()=>({batchId:f.batchId,changes:xb(d)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(i.batchId),(function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new ne(Ct)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c})(s,i.batchId,n),await xa(s,i.changes),await Kc(s.remoteStore)}catch(i){const r=Xd(i,"Failed to persist write");n.reject(r)}}async function pw(e,t){const n=bt(e);try{const s=await Zx(n.localStore,t);t.targetChanges.forEach(((i,r)=>{const o=n.Au.get(r);o&&(Ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Ft(o.hu,14607):i.removedDocuments.size>0&&(Ft(o.hu,42227),o.hu=!1))})),await xa(n,s,t)}catch(s){await zr(s)}}function ym(e,t,n){const s=bt(e);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.Tu.forEach(((r,o)=>{const a=o.view.va(t);a.snapshot&&i.push(a.snapshot)})),(function(o,a){const l=bt(o);l.onlineState=a;let c=!1;l.queries.forEach(((h,d)=>{for(const f of d.Sa)f.va(a)&&(c=!0)})),c&&Jd(l)})(s.eventManager,t),i.length&&s.Pu.H_(i),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function jk(e,t,n){const s=bt(e);s.sharedClientState.updateQueryState(t,"rejected",n);const i=s.Au.get(t),r=i&&i.key;if(r){let o=new ne(ct.comparator);o=o.insert(r,$e.newNoDocument(r,vt.min()));const a=xt().add(r),l=new Wc(vt.min(),new Map,new ne(Ct),o,a);await pw(s,l),s.du=s.du.remove(r),s.Au.delete(t),tf(s)}else await Bh(s.localStore,t,!1).then((()=>zh(s,t,n))).catch(zr)}async function $k(e,t){const n=bt(e),s=t.batch.batchId;try{const i=await Jx(n.localStore,t);mw(n,s,null),gw(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await xa(n,i)}catch(i){await zr(i)}}async function zk(e,t,n){const s=bt(e);try{const i=await(function(o,a){const l=bt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next((d=>(Ft(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d)))).next((()=>l.mutationQueue.performConsistencyCheck(c))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h))).next((()=>l.localDocuments.getDocuments(c,h)))}))})(s.localStore,t);mw(s,t,n),gw(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await xa(s,i)}catch(i){await zr(i)}}function gw(e,t){(e.mu.get(t)||[]).forEach((n=>{n.resolve()})),e.mu.delete(t)}function mw(e,t,n){const s=bt(e);let i=s.Vu[s.currentUser.toKey()];if(i){const r=i.get(t);r&&(n?r.reject(n):r.resolve(),i=i.remove(t)),s.Vu[s.currentUser.toKey()]=i}}function zh(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.Iu.get(t))e.Tu.delete(s),n&&e.Pu.yu(s,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((s=>{e.Ru.containsKey(s)||_w(e,s)}))}function _w(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(qd(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),tf(e))}function vm(e,t,n){for(const s of n)s instanceof hw?(e.Ru.addReference(s.key,t),Hk(e,s)):s instanceof dw?(at(Zd,"Document no longer in limbo: "+s.key),e.Ru.removeReference(s.key,t),e.Ru.containsKey(s.key)||_w(e,s.key)):_t(19791,{wu:s})}function Hk(e,t){const n=t.key,s=n.path.canonicalString();e.du.get(n)||e.Eu.has(s)||(at(Zd,"New document in limbo: "+n),e.Eu.add(s),tf(e))}function tf(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ct(qt.fromString(t)),s=e.fu.next();e.Au.set(s,new Ok(n)),e.du=e.du.insert(n,s),nw(e.remoteStore,new Zs(Qn(Ld(n.path)),s,"TargetPurposeLimboResolution",Fc.ce))}}async function xa(e,t,n){const s=bt(e),i=[],r=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((a,l)=>{o.push(s.pu(l,t,n).then((c=>{if((c||n)&&s.isPrimaryClient){const h=c?!c.fromCache:n?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=Hd.As(l.targetId,c);r.push(h)}})))})),await Promise.all(o),s.Pu.H_(i),await(async function(l,c){const h=bt(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>H.forEach(c,(f=>H.forEach(f.Es,(g=>h.persistence.referenceDelegate.addReference(d,f.targetId,g))).next((()=>H.forEach(f.ds,(g=>h.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))))))}catch(d){if(!Hr(d))throw d;at(Wd,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const g=h.Ms.get(f),_=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(_);h.Ms=h.Ms.insert(f,y)}}})(s.localStore,r))}async function Wk(e,t){const n=bt(e);if(!n.currentUser.isEqual(t)){at(Zd,"User change. New user:",t.toKey());const s=await Jb(n.localStore,t);n.currentUser=t,(function(r,o){r.mu.forEach((a=>{a.forEach((l=>{l.reject(new rt($.CANCELLED,o))}))})),r.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await xa(n,s.Ls)}}function qk(e,t){const n=bt(e),s=n.Au.get(t);if(s&&s.hu)return xt().add(s.key);{let i=xt();const r=n.Iu.get(t);if(!r)return i;for(const o of r){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function yw(e){const t=bt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=pw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=qk.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=jk.bind(null,t),t.Pu.H_=xk.bind(null,t.eventManager),t.Pu.yu=kk.bind(null,t.eventManager),t}function Gk(e){const t=bt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=$k.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=zk.bind(null,t),t}class ec{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=qc(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return Xx(this.persistence,new Kx,t.initialUser,this.serializer)}Cu(t){return new Xb(zd.mi,this.serializer)}Du(t){return new ik}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ec.provider={build:()=>new ec};class Kk extends ec{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Ft(this.persistence.referenceDelegate instanceof Zl,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Ox(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new Xb((s=>Zl.mi(s,n)),this.serializer)}}class Hh{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>ym(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Wk.bind(null,this.syncEngine),await Sk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new Ck})()}createDatastore(t){const n=qc(t.databaseInfo.databaseId),s=(function(r){return new ck(r)})(t.databaseInfo);return(function(r,o,a,l){return new fk(r,o,a,l)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,i,r,o,a){return new gk(s,i,r,o,a)})(this.localStore,this.datastore,t.asyncQueue,(n=>ym(this.syncEngine,n,0)),(function(){return dm.v()?new dm:new rk})())}createSyncEngine(t,n){return(function(i,r,o,a,l,c,h){const d=new Mk(i,r,o,a,l,c);return h&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=bt(n);at(Yi,"RemoteStore shutting down."),s.Ea.add(5),await Ca(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Hh.provider={build:()=>new Hh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ps("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="FirestoreClient";class Yk{constructor(t,n,s,i,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=Be.UNAUTHENTICATED,this.clientId=Pd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(s,(async o=>{at(bi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(at(bi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ss;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Xd(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function Gu(e,t){e.asyncQueue.verifyOperationInProgress(),at(bi,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener((async i=>{s.isEqual(i)||(await Jb(t.localStore,i),s=i)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function bm(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Qk(e);at(bi,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((s=>pm(t.remoteStore,s))),e.setAppCheckTokenChangeListener(((s,i)=>pm(t.remoteStore,i))),e._onlineComponents=t}async function Qk(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){at(bi,"Using user provided OfflineComponentProvider");try{await Gu(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Dr("Error using user provided cache. Falling back to memory cache: "+n),await Gu(e,new ec)}}else at(bi,"Using default OfflineComponentProvider"),await Gu(e,new Kk(void 0));return e._offlineComponents}async function bw(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(at(bi,"Using user provided OnlineComponentProvider"),await bm(e,e._uninitializedComponentsProvider._online)):(at(bi,"Using default OnlineComponentProvider"),await bm(e,new Hh))),e._onlineComponents}function Xk(e){return bw(e).then((t=>t.syncEngine))}async function ww(e){const t=await bw(e),n=t.eventManager;return n.onListen=Nk.bind(null,t.syncEngine),n.onUnlisten=Fk.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Vk.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Uk.bind(null,t.syncEngine),n}function Jk(e,t,n={}){const s=new Ss;return e.asyncQueue.enqueueAndForget((async()=>(function(r,o,a,l,c){const h=new vw({next:f=>{h.Nu(),o.enqueueAndForget((()=>cw(r,d)));const g=f.docs.has(a);!g&&f.fromCache?c.reject(new rt($.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?c.reject(new rt($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new uw(Ld(a.path),h,{includeMetadataChanges:!0,qa:!0});return lw(r,d)})(await ww(e),e.asyncQueue,t,n,s))),s.promise}function Zk(e,t,n={}){const s=new Ss;return e.asyncQueue.enqueueAndForget((async()=>(function(r,o,a,l,c){const h=new vw({next:f=>{h.Nu(),o.enqueueAndForget((()=>cw(r,d))),f.fromCache&&l.source==="server"?c.reject(new rt($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new uw(a,h,{includeMetadataChanges:!0,qa:!0});return lw(r,d)})(await ww(e),e.asyncQueue,t,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="firestore.googleapis.com",Em=!0;class Tm{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new rt($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Tw,this.ssl=Em}else this.host=t.host,this.ssl=t.ssl??Em;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Qb;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Px)throw new rt($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}gC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ew(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new rt($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new rt($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new rt($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,i){return s.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Yc{constructor(t,n,s,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new rt($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new rt($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tm(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new rC;switch(s.type){case"firstParty":return new cC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new rt($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=wm.get(n);s&&(at("ComponentProvider","Removing Datastore"),wm.delete(n),s.terminate())})(this),Promise.resolve()}}function tP(e,t,n,s={}){e=os(e,Yc);const i=tr(t),r=e._getSettings(),o={...r,emulatorOptions:e._getEmulatorOptions()},a=`${t}:${n}`;i&&(Ad(`https://${a}`),Sd("Firestore",!0)),r.host!==Tw&&r.host!==a&&Dr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...r,host:a,ssl:i,emulatorOptions:s};if(!fi(l,o)&&(e._setSettings(l),s.mockUserToken)){let c,h;if(typeof s.mockUserToken=="string")c=s.mockUserToken,h=Be.MOCK_USER;else{c=Gv(s.mockUserToken,e._app?.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new rt($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Be(d)}e._authCredentials=new oC(new ob(c,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new qr(this.firestore,t,this._query)}}class le{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new li(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new le(this.firestore,t,this._key)}toJSON(){return{type:le._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(Ia(n,le._jsonSchema))return new le(t,s||null,new ct(qt.fromString(n.referencePath)))}}le._jsonSchemaVersion="firestore/documentReference/1.0",le._jsonSchema={type:ge("string",le._jsonSchemaVersion),referencePath:ge("string")};class li extends qr{constructor(t,n,s){super(t,n,Ld(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new le(this.firestore,null,new ct(t))}withConverter(t){return new li(this.firestore,t,this._path)}}function Go(e,t,...n){if(e=Re(e),ab("collection","path",t),e instanceof Yc){const s=qt.fromString(t,...n);return Vg(s),new li(e,null,s)}{if(!(e instanceof le||e instanceof li))throw new rt($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(qt.fromString(t,...n));return Vg(s),new li(e.firestore,null,s)}}function fe(e,t,...n){if(e=Re(e),arguments.length===1&&(t=Pd.newId()),ab("doc","path",t),e instanceof Yc){const s=qt.fromString(t,...n);return Ng(s),new le(e,null,new ct(s))}{if(!(e instanceof le||e instanceof li))throw new rt($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(qt.fromString(t,...n));return Ng(s),new le(e.firestore,e instanceof li?e.converter:null,new ct(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="AsyncQueue";class Am{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tw(this,"async_queue_retry"),this._c=()=>{const s=qu();s&&at(Im,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=qu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=qu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ss;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Hr(t))throw t;at(Im,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,Ps("INTERNAL UNHANDLED ERROR: ",Sm(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const i=Qd.createAndSchedule(this,t,n,s,(r=>this.hc(r)));return this.tc.push(i),i}uc(){this.nc&&_t(47125,{Pc:Sm(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function Sm(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Gr extends Yc{constructor(t,n,s,i){super(t,n,s,i),this.type="firestore",this._queue=new Am,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Am(t),this._firestoreClient=void 0,await t}}}function Iw(e,t){const n=typeof e=="object"?e:xd(),s=typeof e=="string"?e:Gl,i=Vc(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=Hv("firestore");r&&tP(i,...r)}return i}function ef(e){if(e._terminated)throw new rt($.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||eP(e),e._firestoreClient}function eP(e){const t=e._freezeSettings(),n=(function(i,r,o,a){return new SC(i,r,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,Ew(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Yk(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&(function(i){const r=i?._online.build();return{_offline:i?._offline.build(r),_online:r}})(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new vn(Me.fromBase64String(t))}catch(n){throw new rt($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new vn(Me.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Ia(t,vn._jsonSchema))return vn.fromBase64String(t.bytes)}}vn._jsonSchemaVersion="firestore/bytes/1.0",vn._jsonSchema={type:ge("string",vn._jsonSchemaVersion),bytes:ge("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new rt($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new De(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new rt($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new rt($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ct(this._lat,t._lat)||Ct(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Jn._jsonSchemaVersion}}static fromJSON(t){if(Ia(t,Jn._jsonSchema))return new Jn(t.latitude,t.longitude)}}Jn._jsonSchemaVersion="firestore/geoPoint/1.0",Jn._jsonSchema={type:ge("string",Jn._jsonSchemaVersion),latitude:ge("number"),longitude:ge("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,i){if(s.length!==i.length)return!1;for(let r=0;r<s.length;++r)if(s[r]!==i[r])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Zn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Ia(t,Zn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Zn(t.vectorValues);throw new rt($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zn._jsonSchemaVersion="firestore/vectorValue/1.0",Zn._jsonSchema={type:ge("string",Zn._jsonSchemaVersion),vectorValues:ge("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=/^__.*__$/;class sP{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new Ii(t,this.data,this.fieldMask,n,this.fieldTransforms):new Sa(t,this.data,n,this.fieldTransforms)}}class Aw{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new Ii(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Sw(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t(40011,{Ac:e})}}class Xc{constructor(t,n,s,i,r,o){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Xc({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return nc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Sw(this.Ac)&&nP.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class iP{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||qc(t)}Cc(t,n,s,i=!1){return new Xc({Ac:t,methodName:n,Dc:s,path:De.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jc(e){const t=e._freezeSettings(),n=qc(e._databaseId);return new iP(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Rw(e,t,n,s,i,r={}){const o=e.Cc(r.merge||r.mergeFields?2:0,t,n,i);rf("Data must be an object, but it was:",o,s);const a=Cw(s,o);let l,c;if(r.merge)l=new pn(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const h=[];for(const d of r.mergeFields){const f=Wh(t,d,n);if(!o.contains(f))throw new rt($.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);kw(h,f)||h.push(f)}l=new pn(h),c=o.fieldTransforms.filter((d=>l.covers(d.field)))}else l=null,c=o.fieldTransforms;return new sP(new en(a),l,c)}class Zc extends ka{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Zc}}function rP(e,t,n){return new Xc({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class nf extends ka{_toFieldTransform(t){return new Vb(t.path,new ua)}isEqual(t){return t instanceof nf}}class sf extends ka{constructor(t,n){super(t),this.vc=n}_toFieldTransform(t){const n=rP(this,t,!0),s=this.vc.map((r=>Kr(r,n))),i=new Vr(s);return new Vb(t.path,i)}isEqual(t){return t instanceof sf&&fi(this.vc,t.vc)}}function oP(e,t,n,s){const i=e.Cc(1,t,n);rf("Data must be an object, but it was:",i,s);const r=[],o=en.empty();Ti(s,((l,c)=>{const h=of(t,l,n);c=Re(c);const d=i.yc(h);if(c instanceof Zc)r.push(h);else{const f=Kr(c,d);f!=null&&(r.push(h),o.set(h,f))}}));const a=new pn(r);return new Aw(o,a,i.fieldTransforms)}function aP(e,t,n,s,i,r){const o=e.Cc(1,t,n),a=[Wh(t,s,n)],l=[i];if(r.length%2!=0)throw new rt($.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<r.length;f+=2)a.push(Wh(t,r[f])),l.push(r[f+1]);const c=[],h=en.empty();for(let f=a.length-1;f>=0;--f)if(!kw(c,a[f])){const g=a[f];let _=l[f];_=Re(_);const y=o.yc(g);if(_ instanceof Zc)c.push(g);else{const b=Kr(_,y);b!=null&&(c.push(g),h.set(g,b))}}const d=new pn(c);return new Aw(h,d,o.fieldTransforms)}function lP(e,t,n,s=!1){return Kr(n,e.Cc(s?4:3,t))}function Kr(e,t){if(xw(e=Re(e)))return rf("Unsupported field value:",t,e),Cw(e,t);if(e instanceof ka)return(function(s,i){if(!Sw(i.Ac))throw i.Sc(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,i){const r=[];let o=0;for(const a of s){let l=Kr(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}})(e,t)}return(function(s,i){if((s=Re(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return YC(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=Qt.fromDate(s);return{timestampValue:Jl(i.serializer,r)}}if(s instanceof Qt){const r=new Qt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Jl(i.serializer,r)}}if(s instanceof Jn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof vn)return{bytesValue:zb(i.serializer,s._byteString)};if(s instanceof le){const r=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(r))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:jd(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof Zn)return(function(o,a){return{mapValue:{fields:{[mb]:{stringValue:_b},[Kl]:{arrayValue:{values:o.toArray().map((c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return Fd(a.serializer,c)}))}}}}}})(s,i);throw i.Sc(`Unsupported field value: ${Lc(s)}`)})(e,t)}function Cw(e,t){const n={};return ub(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ti(e,((s,i)=>{const r=Kr(i,t.mc(s));r!=null&&(n[s]=r)})),{mapValue:{fields:n}}}function xw(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Qt||e instanceof Jn||e instanceof vn||e instanceof le||e instanceof ka||e instanceof Zn)}function rf(e,t,n){if(!xw(n)||!lb(n)){const s=Lc(n);throw s==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+s)}}function Wh(e,t,n){if((t=Re(t))instanceof Qc)return t._internalPath;if(typeof t=="string")return of(e,t);throw nc("Field path arguments must be of type string or ",e,!1,void 0,n)}const cP=new RegExp("[~\\*/\\[\\]]");function of(e,t,n){if(t.search(cP)>=0)throw nc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Qc(...t.split("."))._internalPath}catch{throw nc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function nc(e,t,n,s,i){const r=s&&!s.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${s}`),o&&(l+=` in document ${i}`),l+=")"),new rt($.INVALID_ARGUMENT,a+e+l)}function kw(e,t){return e.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(t,n,s,i,r){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new le(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new uP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(af("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class uP extends Pw{data(){return super.data()}}function af(e,t){return typeof t=="string"?of(e,t):t instanceof Qc?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new rt($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lf{}class dP extends lf{}function Rm(e,t,...n){let s=[];t instanceof lf&&s.push(t),s=s.concat(n),(function(r){const o=r.filter((l=>l instanceof cf)).length,a=r.filter((l=>l instanceof tu)).length;if(o>1||o>0&&a>0)throw new rt($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const i of s)e=i._apply(e);return e}class tu extends dP{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new tu(t,n,s)}_apply(t){const n=this._parse(t);return Dw(t._query,n),new qr(t.firestore,t.converter,Mh(t._query,n))}_parse(t){const n=Jc(t.firestore);return(function(r,o,a,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new rt($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){km(d,h);const _=[];for(const y of d)_.push(xm(l,r,y));f={arrayValue:{values:_}}}else f=xm(l,r,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||km(d,h),f=lP(a,o,d,h==="in"||h==="not-in");return de.create(c,h,f)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function Cm(e,t,n){const s=t,i=af("where",e);return tu._create(i,s,n)}class cf extends lf{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new cf(t,n)}_parse(t){const n=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Dn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(i,r){let o=i;const a=r.getFlattenedFilters();for(const l of a)Dw(o,l),o=Mh(o,l)})(t._query,n),new qr(t.firestore,t.converter,Mh(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function xm(e,t,n){if(typeof(n=Re(n))=="string"){if(n==="")throw new rt($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ab(t)&&n.indexOf("/")!==-1)throw new rt($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(qt.fromString(n));if(!ct.isDocumentKey(s))throw new rt($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Hg(e,new ct(s))}if(n instanceof le)return Hg(e,n._key);throw new rt($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lc(n)}.`)}function km(e,t){if(!Array.isArray(e)||e.length===0)throw new rt($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Dw(e,t){const n=(function(i,r){for(const o of i)for(const a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null})(e.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new rt($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new rt($.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class fP{convertValue(t,n="none"){switch(yi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return oe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(_i(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw _t(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Ti(t,((i,r)=>{s[i]=this.convertValue(r,n)})),s}convertVectorValue(t){const n=t.fields?.[Kl].arrayValue?.values?.map((s=>oe(s.doubleValue)));return new Zn(n)}convertGeoPoint(t){return new Jn(oe(t.latitude),oe(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=Bc(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(aa(t));default:return null}}convertTimestamp(t){const n=mi(t);return new Qt(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=qt.fromString(t);Ft(Yb(s),9688,{name:t});const i=new la(s.get(1),s.get(3)),r=new ct(s.popFirst(5));return i.isEqual(n)||Ps(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(e,t,n){let s;return s=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,s}class Co{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Hi extends Pw{constructor(t,n,s,i,r,o){super(t,n,s,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Al(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(af("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new rt($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Hi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Hi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hi._jsonSchema={type:ge("string",Hi._jsonSchemaVersion),bundleSource:ge("string","DocumentSnapshot"),bundleName:ge("string"),bundle:ge("string")};class Al extends Hi{data(t={}){return super.data(t)}}class Tr{constructor(t,n,s,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Co(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new Al(this._firestore,this._userDataWriter,s.key,s,new Co(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new rt($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((a=>{const l=new Al(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Co(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>r||a.type!==3)).map((a=>{const l=new Al(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Co(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:pP(a.type),doc:l,oldIndex:c,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new rt($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Tr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Pd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],i=[];return this.docs.forEach((r=>{r._document!==null&&(n.push(r._document),s.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),i.push(r.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function pP(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(e){e=os(e,le);const t=os(e.firestore,Gr);return Jk(ef(t),e._key).then((n=>mP(t,e,n)))}Tr._jsonSchemaVersion="firestore/querySnapshot/1.0",Tr._jsonSchema={type:ge("string",Tr._jsonSchemaVersion),bundleSource:ge("string","QuerySnapshot"),bundleName:ge("string"),bundle:ge("string")};class Mw extends fP{constructor(t){super(),this.firestore=t}convertBytes(t){return new vn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new le(this.firestore,null,n)}}function Sl(e){e=os(e,qr);const t=os(e.firestore,Gr),n=ef(t),s=new Mw(t);return hP(e._query),Zk(n,e._query).then((i=>new Tr(t,s,e,i)))}function Tn(e,t,n){e=os(e,le);const s=os(e.firestore,Gr),i=Ow(e.converter,t,n);return uf(s,[Rw(Jc(s),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,xn.none())])}function Pm(e,t,n,...s){e=os(e,le);const i=os(e.firestore,Gr),r=Jc(i);let o;return o=typeof(t=Re(t))=="string"||t instanceof Qc?aP(r,"updateDoc",e._key,t,n,s):oP(r,"updateDoc",e._key,t),uf(i,[o.toMutation(e._key,xn.exists(!0))])}function gP(e,t){const n=os(e.firestore,Gr),s=fe(e),i=Ow(e.converter,t);return uf(n,[Rw(Jc(e.firestore),"addDoc",s._key,i,e.converter!==null,{}).toMutation(s._key,xn.exists(!1))]).then((()=>s))}function uf(e,t){return(function(s,i){const r=new Ss;return s.asyncQueue.enqueueAndForget((async()=>Bk(await Xk(s),i,r))),r.promise})(ef(e),t)}function mP(e,t,n){const s=n.docs.get(t._key),i=new Mw(e);return new Hi(e,i,t._key,s,new Co(n.hasPendingWrites,n.fromCache),t.converter)}function kn(){return new nf("serverTimestamp")}function pU(...e){return new sf("arrayUnion",e)}(function(t,n=!0){(function(i){$r=i})(er),Gi(new pi("firestore",((s,{instanceIdentifier:i,options:r})=>{const o=s.getProvider("app").getImmediate(),a=new Gr(new aC(s.getProvider("auth-internal")),new uC(o,s.getProvider("app-check-internal")),(function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new rt($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new la(c.options.projectId,h)})(o,i),o);return r={useFetchStreams:n,...r},a._setSettings(r),a}),"PUBLIC").setMultipleInstances(!0)),Yn(Pg,Dg,t),Yn(Pg,Dg,"esm2020")})();var _P="firebase",yP="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn(_P,yP,"app");function Nw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vP=Nw,Vw=new Ea("auth","Firebase",Nw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=new Rd("@firebase/auth");function bP(e,...t){sc.logLevel<=Rt.WARN&&sc.warn(`Auth (${er}): ${e}`,...t)}function Rl(e,...t){sc.logLevel<=Rt.ERROR&&sc.error(`Auth (${er}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(e,...t){throw hf(e,...t)}function ts(e,...t){return hf(e,...t)}function Lw(e,t,n){const s={...vP(),[t]:n};return new Ea("auth","Firebase",s).create(t,{appName:e.name})}function Rs(e){return Lw(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hf(e,...t){if(typeof e!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=e.name),e._errorFactory.create(n,...s)}return Vw.create(e,...t)}function mt(e,t,...n){if(!e)throw hf(t,...n)}function Ts(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Rl(t),new Error(t)}function Os(e,t){e||Ts(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(){return typeof self<"u"&&self.location?.href||""}function wP(){return Dm()==="http:"||Dm()==="https:"}function Dm(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wP()||FS()||"connection"in navigator)?navigator.onLine:!0}function TP(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(t,n){this.shortDelay=t,this.longDelay=n,Os(n>t,"Short delay should be less than long delay!"),this.isMobile=NS()||US()}get(){return EP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(e,t){Os(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],SP=new Pa(3e4,6e4);function Vs(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Ls(e,t,n,s,i={}){return Uw(e,i,async()=>{let r={},o={};s&&(t==="GET"?o=s:r={body:JSON.stringify(s)});const a=Ta({key:e.config.apiKey,...o}).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c={method:t,headers:l,...r};return LS()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&tr(e.emulatorConfig.host)&&(c.credentials="include"),Fw.fetch()(await Bw(e,e.config.apiHost,n,a),c)})}async function Uw(e,t,n){e._canInitEmulator=!1;const s={...IP,...t};try{const i=new CP(e),r=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw nl(e,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw nl(e,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw nl(e,"email-already-in-use",o);if(l==="USER_DISABLED")throw nl(e,"user-disabled",o);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Lw(e,h,c);On(e,h)}}catch(i){if(i instanceof us)throw i;On(e,"network-request-failed",{message:String(i)})}}async function Da(e,t,n,s,i={}){const r=await Ls(e,t,n,s,i);return"mfaPendingCredential"in r&&On(e,"multi-factor-auth-required",{_serverResponse:r}),r}async function Bw(e,t,n,s){const i=`${t}${n}?${s}`,r=e,o=r.config.emulator?df(e.config,i):`${e.config.apiScheme}://${i}`;return AP.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}function RP(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class CP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ts(this.auth,"network-request-failed")),SP.get())})}}function nl(e,t,n){const s={appName:e.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=ts(e,t,s);return i.customData._tokenResponse=n,i}function Om(e){return e!==void 0&&e.enterprise!==void 0}class xP{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return RP(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kP(e,t){return Ls(e,"GET","/v2/recaptchaConfig",Vs(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PP(e,t){return Ls(e,"POST","/v1/accounts:delete",t)}async function ic(e,t){return Ls(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function DP(e,t=!1){const n=Re(e),s=await n.getIdToken(t),i=ff(s);mt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r?.sign_in_provider;return{claims:i,token:s,authTime:Ko(Ku(i.auth_time)),issuedAtTime:Ko(Ku(i.iat)),expirationTime:Ko(Ku(i.exp)),signInProvider:o||null,signInSecondFactor:r?.sign_in_second_factor||null}}function Ku(e){return Number(e)*1e3}function ff(e){const[t,n,s]=e.split(".");if(t===void 0||n===void 0||s===void 0)return Rl("JWT malformed, contained fewer than 3 sections"),null;try{const i=$v(n);return i?JSON.parse(i):(Rl("Failed to decode base64 JWT payload"),null)}catch(i){return Rl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Mm(e){const t=ff(e);return mt(t,"internal-error"),mt(typeof t.exp<"u","internal-error"),mt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function da(e,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof us&&OP(s)&&e.auth.currentUser===e&&await e.auth.signOut(),s}}function OP({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ko(this.lastLoginAt),this.creationTime=Ko(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rc(e){const t=e.auth,n=await e.getIdToken(),s=await da(e,ic(t,{idToken:n}));mt(s?.users.length,t,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const r=i.providerUserInfo?.length?jw(i.providerUserInfo):[],o=VP(e.providerData,r),a=e.isAnonymous,l=!(e.email&&i.passwordHash)&&!o?.length,c=a?l:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Gh(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(e,h)}async function NP(e){const t=Re(e);await rc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function VP(e,t){return[...e.filter(s=>!t.some(i=>i.providerId===s.providerId)),...t]}function jw(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LP(e,t){const n=await Uw(e,{},async()=>{const s=Ta({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,o=await Bw(e,i,"/v1/token",`key=${r}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return e.emulatorConfig&&tr(e.emulatorConfig.host)&&(l.credentials="include"),Fw.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function FP(e,t){return Ls(e,"POST","/v2/accounts:revokeToken",Vs(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){mt(t.idToken,"internal-error"),mt(typeof t.idToken<"u","internal-error"),mt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Mm(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){mt(t.length!==0,"internal-error");const n=Mm(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(mt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:i,expiresIn:r}=await LP(t,n);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:i,expirationTime:r}=n,o=new Ir;return s&&(mt(typeof s=="string","internal-error",{appName:t}),o.refreshToken=s),i&&(mt(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),r&&(mt(typeof r=="number","internal-error",{appName:t}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ir,this.toJSON())}_performRefresh(){return Ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(e,t){mt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Sn{constructor({uid:t,auth:n,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new MP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Gh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const n=await da(this,this.stsTokenManager.getToken(this.auth,t));return mt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return DP(this,t)}reload(){return NP(this)}_assign(t){this!==t&&(mt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Sn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){mt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await rc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hn(this.auth.app))return Promise.reject(Rs(this.auth));const t=await this.getIdToken();return await da(this,PP(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,i=n.email??void 0,r=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:g,providerData:_,stsTokenManager:y}=n;mt(d&&y,t,"internal-error");const b=Ir.fromJSON(this.name,y);mt(typeof d=="string",t,"internal-error"),Ws(s,t.name),Ws(i,t.name),mt(typeof f=="boolean",t,"internal-error"),mt(typeof g=="boolean",t,"internal-error"),Ws(r,t.name),Ws(o,t.name),Ws(a,t.name),Ws(l,t.name),Ws(c,t.name),Ws(h,t.name);const C=new Sn({uid:d,auth:t,email:i,emailVerified:f,displayName:s,isAnonymous:g,photoURL:o,phoneNumber:r,tenantId:a,stsTokenManager:b,createdAt:c,lastLoginAt:h});return _&&Array.isArray(_)&&(C.providerData=_.map(R=>({...R}))),l&&(C._redirectEventId=l),C}static async _fromIdTokenResponse(t,n,s=!1){const i=new Ir;i.updateFromServerResponse(n);const r=new Sn({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:s});return await rc(r),r}static async _fromGetAccountInfoResponse(t,n,s){const i=n.users[0];mt(i.localId!==void 0,"internal-error");const r=i.providerUserInfo!==void 0?jw(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!r?.length,a=new Ir;a.updateFromIdToken(s);const l=new Sn({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new Gh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!r?.length};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm=new Map;function Is(e){Os(e instanceof Function,"Expected a class definition");let t=Nm.get(e);return t?(Os(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Nm.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}$w.type="NONE";const Vm=$w;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(e,t,n){return`firebase:${e}:${t}:${n}`}class Ar{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=Cl(this.userKey,i.apiKey,r),this.fullPersistenceKey=Cl("persistence",i.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await ic(this.auth,{idToken:t}).catch(()=>{});return n?Sn._fromGetAccountInfoResponse(this.auth,n,t):null}return Sn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new Ar(Is(Vm),t,s);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=i[0]||Is(Vm);const o=Cl(s,t.config.apiKey,t.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){let d;if(typeof h=="string"){const f=await ic(t,{idToken:h}).catch(()=>{});if(!f)break;d=await Sn._fromGetAccountInfoResponse(t,f,h)}else d=Sn._fromJSON(t,h);c!==r&&(a=d),r=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new Ar(r,t,s):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new Ar(r,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(qw(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(zw(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Kw(t))return"Blackberry";if(Yw(t))return"Webos";if(Hw(t))return"Safari";if((t.includes("chrome/")||Ww(t))&&!t.includes("edge/"))return"Chrome";if(Gw(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=e.match(n);if(s?.length===2)return s[1]}return"Other"}function zw(e=qe()){return/firefox\//i.test(e)}function Hw(e=qe()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ww(e=qe()){return/crios\//i.test(e)}function qw(e=qe()){return/iemobile/i.test(e)}function Gw(e=qe()){return/android/i.test(e)}function Kw(e=qe()){return/blackberry/i.test(e)}function Yw(e=qe()){return/webos/i.test(e)}function pf(e=qe()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function UP(e=qe()){return pf(e)&&!!window.navigator?.standalone}function BP(){return BS()&&document.documentMode===10}function Qw(e=qe()){return pf(e)||Gw(e)||Yw(e)||Kw(e)||/windows phone/i.test(e)||qw(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(e,t=[]){let n;switch(e){case"Browser":n=Lm(qe());break;case"Worker":n=`${Lm(qe())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${er}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=r=>new Promise((o,a)=>{try{const l=t(r);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $P(e,t={}){return Ls(e,"GET","/v2/passwordPolicy",Vs(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=6;class HP{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??zP,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<t.length;i++)s=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(t,n,s,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fm(this),this.idTokenSubscription=new Fm(this),this.beforeStateQueue=new jP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Is(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ar.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await ic(this,{idToken:t}),s=await Sn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(hn(this.app)){const r=this.app.settings.authIdToken;return r?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(r).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(t);(!r||r===o)&&a?.user&&(s=a.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(r){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(r))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return mt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await rc(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=TP()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(hn(this.app))return Promise.reject(Rs(this));const n=t?Re(t):null;return n&&mt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&mt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return hn(this.app)?Promise.reject(Rs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return hn(this.app)?Promise.reject(Rs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Is(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await $P(this),n=new HP(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Ea("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await FP(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Is(t)||this._popupRedirectResolver;mt(n,this,"argument-error"),this.redirectPersistenceManager=await Ar.create(this,[Is(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,i){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(mt(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const l=t.addObserver(n,s,i);return()=>{o=!0,l()}}else{const l=t.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return mt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Xw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&bP(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Ai(e){return Re(e)}class Fm{constructor(t){this.auth=t,this.observer=null,this.addObserver=KS(n=>this.observer=n)}get next(){return mt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qP(e){eu=e}function Jw(e){return eu.loadJS(e)}function GP(){return eu.recaptchaEnterpriseScript}function KP(){return eu.gapiScript}function YP(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class QP{constructor(){this.enterprise=new XP}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class XP{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const JP="recaptcha-enterprise",Zw="NO_RECAPTCHA";class ZP{constructor(t){this.type=JP,this.auth=Ai(t)}async verify(t="verify",n=!1){async function s(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{kP(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new xP(l);return r.tenantId==null?r._agentRecaptchaConfig=c:r._tenantRecaptchaConfigs[r.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(r,o,a){const l=window.grecaptcha;Om(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:t}).then(c=>{o(c)}).catch(()=>{o(Zw)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new QP().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{s(this.auth).then(a=>{if(!n&&Om(window.grecaptcha))i(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=GP();l.length!==0&&(l+=a),Jw(l).then(()=>{i(a,r,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Um(e,t,n,s=!1,i=!1){const r=new ZP(e);let o;if(i)o=Zw;else try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const a={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function oc(e,t,n,s,i){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Um(e,t,n,n==="getOobCode");return s(e,r)}else return s(e,t).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Um(e,t,n,n==="getOobCode");return s(e,o)}else return Promise.reject(r)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(e,t){const n=Vc(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),r=n.getOptions();if(fi(r,t??{}))return i;On(i,"already-initialized")}return n.initialize({options:t})}function e1(e,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Is);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(s,t?.popupRedirectResolver)}function n1(e,t,n){const s=Ai(e);mt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const i=!1,r=tE(t),{host:o,port:a}=s1(t),l=a===null?"":`:${a}`,c={url:`${r}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){mt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),mt(fi(c,s.config.emulator)&&fi(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=c,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,tr(o)?(Ad(`${r}//${o}${l}`),Sd("Auth",!0)):i1()}function tE(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function s1(e){const t=tE(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:Bm(s.substr(r.length+1))}}else{const[r,o]=s.split(":");return{host:r,port:Bm(o)}}}function Bm(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function i1(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Ts("not implemented")}_getIdTokenResponse(t){return Ts("not implemented")}_linkToIdToken(t,n){return Ts("not implemented")}_getReauthenticationResolver(t){return Ts("not implemented")}}async function r1(e,t){return Ls(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o1(e,t){return Da(e,"POST","/v1/accounts:signInWithPassword",Vs(e,t))}async function a1(e,t){return Ls(e,"POST","/v1/accounts:sendOobCode",Vs(e,t))}async function l1(e,t){return a1(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c1(e,t){return Da(e,"POST","/v1/accounts:signInWithEmailLink",Vs(e,t))}async function u1(e,t){return Da(e,"POST","/v1/accounts:signInWithEmailLink",Vs(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends gf{constructor(t,n,s,i=null){super("password",s),this._email=t,this._password=n,this._tenantId=i}static _fromEmailAndPassword(t,n){return new fa(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new fa(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return oc(t,n,"signInWithPassword",o1);case"emailLink":return c1(t,{email:this._email,oobCode:this._password});default:On(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return oc(t,s,"signUpPassword",r1);case"emailLink":return u1(t,{idToken:n,email:this._email,oobCode:this._password});default:On(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sr(e,t){return Da(e,"POST","/v1/accounts:signInWithIdp",Vs(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="http://localhost";class Qi extends gf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Qi(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):On("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:i,...r}=n;if(!s||!i)return null;const o=new Qi(s,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Sr(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,Sr(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Sr(t,n)}buildRequest(){const t={requestUri:h1,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Ta(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function f1(e){const t=To(Io(e)).link,n=t?To(Io(t)).deep_link_id:null,s=To(Io(e)).deep_link_id;return(s?To(Io(s)).link:null)||s||n||t||e}class mf{constructor(t){const n=To(Io(t)),s=n.apiKey??null,i=n.oobCode??null,r=d1(n.mode??null);mt(s&&i&&r,"argument-error"),this.apiKey=s,this.operation=r,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=f1(t);try{return new mf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(){this.providerId=Yr.PROVIDER_ID}static credential(t,n){return fa._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=mf.parseLink(n);return mt(s,"argument-error"),fa._fromEmailAndCode(t,s.code,s.tenantId)}}Yr.PROVIDER_ID="password";Yr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa extends eE{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends Oa{constructor(){super("facebook.com")}static credential(t){return Qi._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Qs.credentialFromTaggedObject(t)}static credentialFromError(t){return Qs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Qs.credential(t.oauthAccessToken)}catch{return null}}}Qs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends Oa{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Qi._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Es.credentialFromTaggedObject(t)}static credentialFromError(t){return Es.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return Es.credential(n,s)}catch{return null}}}Es.GOOGLE_SIGN_IN_METHOD="google.com";Es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends Oa{constructor(){super("github.com")}static credential(t){return Qi._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Xs.credentialFromTaggedObject(t)}static credentialFromError(t){return Xs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Xs.credential(t.oauthAccessToken)}catch{return null}}}Xs.GITHUB_SIGN_IN_METHOD="github.com";Xs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends Oa{constructor(){super("twitter.com")}static credential(t,n){return Qi._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Js.credentialFromTaggedObject(t)}static credentialFromError(t){return Js.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Js.credential(n,s)}catch{return null}}}Js.TWITTER_SIGN_IN_METHOD="twitter.com";Js.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p1(e,t){return Da(e,"POST","/v1/accounts:signUp",Vs(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,i=!1){const r=await Sn._fromIdTokenResponse(t,s,i),o=jm(s);return new Xi({user:r,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const i=jm(s);return new Xi({user:t,providerId:i,_tokenResponse:s,operationType:n})}}function jm(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac extends us{constructor(t,n,s,i){super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,ac.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,i){return new ac(t,n,s,i)}}function nE(e,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?ac._fromErrorAndOperation(e,r,t,s):r})}async function g1(e,t,n=!1){const s=await da(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Xi._forOperation(e,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(e,t,n=!1){const{auth:s}=e;if(hn(s.app))return Promise.reject(Rs(s));const i="reauthenticate";try{const r=await da(e,nE(s,i,t,e),n);mt(r.idToken,s,"internal-error");const o=ff(r.idToken);mt(o,s,"internal-error");const{sub:a}=o;return mt(e.uid===a,s,"user-mismatch"),Xi._forOperation(e,i,r)}catch(r){throw r?.code==="auth/user-not-found"&&On(s,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sE(e,t,n=!1){if(hn(e.app))return Promise.reject(Rs(e));const s="signIn",i=await nE(e,s,t),r=await Xi._fromIdTokenResponse(e,s,i);return n||await e._updateCurrentUser(r.user),r}async function _1(e,t){return sE(Ai(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iE(e){const t=Ai(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function y1(e,t,n){const s=Ai(e);await oc(s,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",l1)}async function v1(e,t,n){if(hn(e.app))return Promise.reject(Rs(e));const s=Ai(e),o=await oc(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",p1).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&iE(e),l}),a=await Xi._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function b1(e,t,n){return hn(e.app)?Promise.reject(Rs(e)):_1(Re(e),Yr.credential(t,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&iE(e),s})}function w1(e,t,n,s){return Re(e).onIdTokenChanged(t,n,s)}function E1(e,t,n){return Re(e).beforeAuthStateChanged(t,n)}function T1(e){return Re(e).signOut()}const lc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(lc,"1"),this.storage.removeItem(lc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1=1e3,A1=10;class oE extends rE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Qw(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&t(n,i,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},r=this.storage.getItem(s);BP()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,A1):i()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},I1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}oE.type="LOCAL";const S1=oE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE extends rE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}aE.type="SESSION";const lE=aE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const s=new nu(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:i,data:r}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,r)),l=await R1(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:l})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(e="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=_f("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(f.data.response);break;default:clearTimeout(h),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(){return window}function x1(e){es().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(){return typeof es().WorkerGlobalScope<"u"&&typeof es().importScripts=="function"}async function k1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function P1(){return navigator?.serviceWorker?.controller||null}function D1(){return cE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="firebaseLocalStorageDb",O1=1,cc="firebaseLocalStorage",hE="fbase_key";class Ma{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function su(e,t){return e.transaction([cc],t?"readwrite":"readonly").objectStore(cc)}function M1(){const e=indexedDB.deleteDatabase(uE);return new Ma(e).toPromise()}function Kh(){const e=indexedDB.open(uE,O1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const s=e.result;try{s.createObjectStore(cc,{keyPath:hE})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const s=e.result;s.objectStoreNames.contains(cc)?t(s):(s.close(),await M1(),t(await Kh()))})})}async function $m(e,t,n){const s=su(e,!0).put({[hE]:t,value:n});return new Ma(s).toPromise()}async function N1(e,t){const n=su(e,!1).get(t),s=await new Ma(n).toPromise();return s===void 0?null:s.value}function zm(e,t){const n=su(e,!0).delete(t);return new Ma(n).toPromise()}const V1=800,L1=3;class dE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kh(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>L1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nu._getInstance(D1()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await k1(),!this.activeServiceWorker)return;this.sender=new C1(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||P1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Kh();return await $m(t,lc,"1"),await zm(t,lc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>$m(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>N1(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>zm(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const r=su(i,!1).getAll();return new Ma(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:i,value:r}of t)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),V1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dE.type="LOCAL";const F1=dE;new Pa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(e,t){return t?Is(t):(mt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf extends gf{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Sr(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Sr(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Sr(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function B1(e){return sE(e.auth,new yf(e),e.bypassAuthState)}function j1(e){const{auth:t,user:n}=e;return mt(n,t,"internal-error"),m1(n,new yf(e),e.bypassAuthState)}async function $1(e){const{auth:t,user:n}=e;return mt(n,t,"internal-error"),g1(n,new yf(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(t,n,s,i,r=!1){this.auth=t,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:i,tenantId:r,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return B1;case"linkViaPopup":case"linkViaRedirect":return $1;case"reauthViaPopup":case"reauthViaRedirect":return j1;default:On(this.auth,"internal-error")}}resolve(t){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=new Pa(2e3,1e4);class yr extends fE{constructor(t,n,s,i,r){super(t,n,i,r),this.provider=s,this.authWindow=null,this.pollId=null,yr.currentPopupAction&&yr.currentPopupAction.cancel(),yr.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return mt(t,this.auth,"internal-error"),t}async onExecution(){Os(this.filter.length===1,"Popup operations only handle one event");const t=_f();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ts(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ts(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yr.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ts(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,z1.get())};t()}}yr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1="pendingRedirect",xl=new Map;class W1 extends fE{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=xl.get(this.auth._key());if(!t){try{const s=await q1(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}xl.set(this.auth._key(),t)}return this.bypassAuthState||xl.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function q1(e,t){const n=Y1(t),s=K1(e);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function G1(e,t){xl.set(e._key(),t)}function K1(e){return Is(e._redirectPersistence)}function Y1(e){return Cl(H1,e.config.apiKey,e.name)}async function Q1(e,t,n=!1){if(hn(e.app))return Promise.reject(Rs(e));const s=Ai(e),i=U1(s,t),o=await new W1(s,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=600*1e3;class J1{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Z1(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!pE(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(ts(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=X1&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hm(t))}saveEventToCache(t){this.cachedEventUids.add(Hm(t)),this.lastProcessedEventTime=Date.now()}}function Hm(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function pE({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function Z1(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pE(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tD(e,t={}){return Ls(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nD=/^https?/;async function sD(e){if(e.config.emulator)return;const{authorizedDomains:t}=await tD(e);for(const n of t)try{if(iD(n))return}catch{}On(e,"unauthorized-domain")}function iD(e){const t=qh(),{protocol:n,hostname:s}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&s===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!nD.test(n))return!1;if(eD.test(e))return s===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=new Pa(3e4,6e4);function Wm(){const e=es().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function oD(e){return new Promise((t,n)=>{function s(){Wm(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Wm(),n(ts(e,"network-request-failed"))},timeout:rD.get()})}if(es().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(es().gapi?.load)s();else{const i=YP("iframefcb");return es()[i]=()=>{gapi.load?s():n(ts(e,"network-request-failed"))},Jw(`${KP()}?onload=${i}`).catch(r=>n(r))}}).catch(t=>{throw kl=null,t})}let kl=null;function aD(e){return kl=kl||oD(e),kl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=new Pa(5e3,15e3),cD="__/auth/iframe",uD="emulator/auth/iframe",hD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fD(e){const t=e.config;mt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?df(t,uD):`https://${e.config.authDomain}/${cD}`,s={apiKey:t.apiKey,appName:e.name,v:er},i=dD.get(e.config.apiHost);i&&(s.eid=i);const r=e._getFrameworks();return r.length&&(s.fw=r.join(",")),`${n}?${Ta(s).slice(1)}`}async function pD(e){const t=await aD(e),n=es().gapi;return mt(n,e,"internal-error"),t.open({where:document.body,url:fD(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hD,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const o=ts(e,"network-request-failed"),a=es().setTimeout(()=>{r(o)},lD.get());function l(){es().clearTimeout(a),i(s)}s.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mD=500,_D=600,yD="_blank",vD="http://localhost";class qm{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bD(e,t,n,s=mD,i=_D){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...gD,width:s.toString(),height:i.toString(),top:r,left:o},c=qe().toLowerCase();n&&(a=Ww(c)?yD:n),zw(c)&&(t=t||vD,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[g,_])=>`${f}${g}=${_},`,"");if(UP(c)&&a!=="_self")return wD(t||"",a),new qm(null);const d=window.open(t||"",a,h);mt(d,e,"popup-blocked");try{d.focus()}catch{}return new qm(d)}function wD(e,t){const n=document.createElement("a");n.href=e,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED="__/auth/handler",TD="emulator/auth/handler",ID=encodeURIComponent("fac");async function Gm(e,t,n,s,i,r){mt(e.config.authDomain,e,"auth-domain-config-required"),mt(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:er,eventId:i};if(t instanceof eE){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",GS(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(t instanceof Oa){const h=t.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await e._getAppCheckToken(),c=l?`#${ID}=${encodeURIComponent(l)}`:"";return`${AD(e)}?${Ta(a).slice(1)}${c}`}function AD({config:e}){return e.emulator?df(e,TD):`https://${e.authDomain}/${ED}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu="webStorageSupport";class SD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lE,this._completeRedirectFn=Q1,this._overrideRedirectResult=G1}async _openPopup(t,n,s,i){Os(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const r=await Gm(t,n,s,qh(),i);return bD(t,r,_f())}async _openRedirect(t,n,s,i){await this._originValidation(t);const r=await Gm(t,n,s,qh(),i);return x1(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:r}=this.eventManagers[n];return i?Promise.resolve(i):(Os(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await pD(t),s=new J1(t);return n.register("authEvent",i=>(mt(i?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Yu,{type:Yu},i=>{const r=i?.[0]?.[Yu];r!==void 0&&n(!!r),On(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sD(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return Qw()||Hw()||pf()}}const RD=SD;var Km="@firebase/auth",Ym="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){mt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kD(e){Gi(new pi("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;mt(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xw(e)},c=new WP(s,i,r,l);return e1(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Gi(new pi("auth-internal",t=>{const n=Ai(t.getProvider("auth").getImmediate());return(s=>new CD(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yn(Km,Ym,xD(e)),Yn(Km,Ym,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=300,DD=qv("authIdTokenMaxAge")||PD;let Qm=null;const OD=e=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>DD)return;const i=n?.token;Qm!==i&&(Qm=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function iu(e=xd()){const t=Vc(e,"auth");if(t.isInitialized())return t.getImmediate();const n=t1(e,{popupRedirectResolver:RD,persistence:[F1,S1,lE]}),s=qv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(s,location.origin);if(location.origin===r.origin){const o=OD(r.toString());E1(n,o,()=>o(n.currentUser)),w1(n,a=>o(a))}}const i=zv("auth");return i&&n1(n,`http://${i}`),n}function MD(){return document.getElementsByTagName("head")?.[0]??document}qP({loadJS(e){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",e),s.onload=t,s.onerror=i=>{const r=ts("internal-error");r.customData=i,n(r)},s.type="text/javascript",s.charset="UTF-8",MD().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kD("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="firebasestorage.googleapis.com",ND="storageBucket",VD=120*1e3,LD=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends us{constructor(t,n,s=0){super(Qu(t),`Firebase Storage: ${n} (${Qu(t)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hs.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Qu(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ls;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ls||(ls={}));function Qu(e){return"storage/"+e}function FD(){const e="An unknown error occurred, please check the error payload for server response.";return new hs(ls.UNKNOWN,e)}function UD(){return new hs(ls.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function BD(){return new hs(ls.CANCELED,"User canceled the upload/download.")}function jD(e){return new hs(ls.INVALID_URL,"Invalid URL '"+e+"'.")}function $D(e){return new hs(ls.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Xm(e){return new hs(ls.INVALID_ARGUMENT,e)}function mE(){return new hs(ls.APP_DELETED,"The Firebase app was deleted.")}function zD(e){return new hs(ls.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let s;try{s=Rn.makeFromUrl(t,n)}catch{return new Rn(t,"")}if(s.path==="")return s;throw $D(t)}static makeFromUrl(t,n){let s=null;const i="([A-Za-z0-9.\\-_]+)";function r(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(x){x.path_=decodeURIComponent(x.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${d}/${h}/b/${i}/o${f}`,"i"),_={bucket:1,path:3},y=n===gE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",C=new RegExp(`^https?://${y}/${i}/${b}`,"i"),I=[{regex:a,indices:l,postModify:r},{regex:g,indices:_,postModify:c},{regex:C,indices:{bucket:1,path:2},postModify:c}];for(let x=0;x<I.length;x++){const L=I[x],W=L.regex.exec(t);if(W){const E=W[L.indices.bucket];let v=W[L.indices.path];v||(v=""),s=new Rn(E,v),L.postModify(s);break}}if(s==null)throw jD(t);return s}}class HD{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(e,t,n){let s=1,i=null,r=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...b){c||(c=!0,t.apply(null,b))}function d(b){i=setTimeout(()=>{i=null,e(g,l())},b)}function f(){r&&clearTimeout(r)}function g(b,...C){if(c){f();return}if(b){f(),h.call(null,b,...C);return}if(l()||o){f(),h.call(null,b,...C);return}s<64&&(s*=2);let I;a===1?(a=2,I=0):I=(s+Math.random())*1e3,d(I)}let _=!1;function y(b){_||(_=!0,f(),!c&&(i!==null?(b||(a=2),clearTimeout(i),d(0)):b||(a=1)))}return d(0),r=setTimeout(()=>{o=!0,y(!0)},n),y}function qD(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(e){return e!==void 0}function Jm(e,t,n,s){if(s<t)throw Xm(`Invalid value for '${e}'. Expected ${t} or greater.`);if(s>n)throw Xm(`Invalid value for '${e}'. Expected ${n} or less.`)}function KD(e){const t=encodeURIComponent;let n="?";for(const s in e)if(e.hasOwnProperty(s)){const i=t(s)+"="+t(e[s]);n=n+i+"&"}return n=n.slice(0,-1),n}var uc;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(uc||(uc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,r=t.indexOf(e)!==-1;return n||i||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(t,n,s,i,r,o,a,l,c,h,d,f=!0,g=!1){this.url_=t,this.method_=n,this.headers_=s,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,y)=>{this.resolve_=_,this.reject_=y,this.start_()})}start_(){const t=(s,i)=>{if(i){s(!1,new sl(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(o),this.pendingConnection_=null;const a=r.getErrorCode()===uc.NO_ERROR,l=r.getStatus();if(!a||YD(l,this.additionalRetryCodes_)&&this.retry){const h=r.getErrorCode()===uc.ABORT;s(!1,new sl(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;s(!0,new sl(c,r))})},n=(s,i)=>{const r=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());GD(l)?r(l):r()}catch(l){o(l)}else if(a!==null){const l=FD();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?mE():BD();o(l)}else{const l=UD();o(l)}};this.canceled_?n(!1,new sl(!1,null,!0)):this.backoffId_=WD(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&qD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class sl{constructor(t,n,s){this.wasSuccessCode=t,this.connection=n,this.canceled=!!s}}function XD(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function JD(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function ZD(e,t){t&&(e["X-Firebase-GMPID"]=t)}function tO(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function eO(e,t,n,s,i,r,o=!0,a=!1){const l=KD(e.urlParams),c=e.url+l,h=Object.assign({},e.headers);return ZD(h,t),XD(h,n),JD(h,r),tO(h,s),new QD(c,e.method,h,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function sO(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(t,n){this._service=t,n instanceof Rn?this._location=n:this._location=Rn.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new hc(t,n)}get root(){const t=new Rn(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return sO(this._location.path)}get storage(){return this._service}get parent(){const t=nO(this._location.path);if(t===null)return null;const n=new Rn(this._location.bucket,t);return new hc(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw zD(t)}}function Zm(e,t){const n=t?.[ND];return n==null?null:Rn.makeFromBucketSpec(n,e)}function iO(e,t,n,s={}){e.host=`${t}:${n}`;const i=tr(t);i&&(Ad(`https://${e.host}/b`),Sd("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:r}=s;r&&(e._overrideAuthToken=typeof r=="string"?r:Gv(r,e.app.options.projectId))}class rO{constructor(t,n,s,i,r,o=!1){this.app=t,this._authProvider=n,this._appCheckProvider=s,this._url=i,this._firebaseVersion=r,this._isUsingEmulator=o,this._bucket=null,this._host=gE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=VD,this._maxUploadRetryTime=LD,this._requests=new Set,i!=null?this._bucket=Rn.makeFromBucketSpec(i,this._host):this._bucket=Zm(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Rn.makeFromBucketSpec(this._url,t):this._bucket=Zm(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Jm("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Jm("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new hc(this,t)}_makeRequest(t,n,s,i,r=!0){if(this._deleted)return new HD(mE());{const o=eO(t,this._appId,s,i,n,this._firebaseVersion,r,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[s,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,s,i).getPromise()}}const t_="@firebase/storage",e_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="storage";function oO(e=xd(),t){e=Re(e);const s=Vc(e,_E).getImmediate({identifier:t}),i=Hv("storage");return i&&aO(s,...i),s}function aO(e,t,n,s={}){iO(e,t,n,s)}function lO(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new rO(n,s,i,t,er)}function cO(){Gi(new pi(_E,lO,"PUBLIC").setMultipleInstances(!0)),Yn(t_,e_,""),Yn(t_,e_,"esm2020")}cO();const uO={apiKey:"AIzaSyA88mxzUStbuMFKNr9Q0OODtHXmpyuqvBY",authDomain:"findyourfit-93e9f.firebaseapp.com",projectId:"findyourfit-93e9f",storageBucket:"findyourfit-93e9f.firebasestorage.app",messagingSenderId:"715690823951",appId:"1:715690823951:web:f3af86677f7d990c55ae7a",measurementId:"G-2GTC9GRYRL"},vf=Qv(uO),ae=Iw(vf),gn=iu(vf);oO(vf);const rn=aA("user",{state:()=>({userData:null,moodData:null,journalData:null,therapists:null}),actions:{async fetchUserData(){const e=gn.currentUser;if(!e)return;const t=fe(ae,"users",e.uid),n=await Wn(t);n.exists()&&(this.userData=n.data(),this.userData.streak||(this.userData.streak={count:1,lastUpdate:kn()},await Tn(t,this.userData,{merge:!0})),await this.updateStreak(),await this.getMood(),await this.getJournalEntries(),await this.getTherapists())},setUserData(e){this.userData=e},setMoodData(e){this.moodData=e},async updateStreak(){const e=gn.currentUser;if(!e||!this.userData?.streak)return;const{count:t,lastUpdate:n}=this.userData.streak;if(!n||typeof n.toDate!="function"){this.userData.streak={count:1,lastUpdate:kn()},await Tn(fe(ae,"users",e.uid),this.userData,{merge:!0});return}const s=n.toDate(),i=new Date;this.isSameDay(s,i)||(this.isYesterday(s,i)?this.userData.streak.count=t+1:this.userData.streak.count=1,this.userData.streak.lastUpdate=kn(),await Tn(fe(ae,"users",e.uid),this.userData,{merge:!0}))},isSameDay(e,t){return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e.getUTCDate()===t.getUTCDate()},isYesterday(e){const t=e,n=new Date,s=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate());return(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate())-s)/(1e3*60*60*24)===1},async getMood(){const e=gn.currentUser;if(!e)return;const t=fe(ae,"mood",e.uid),n=await Wn(t);n.exists()&&(this.moodData=n.data())},async getJournalEntries(){const e=gn.currentUser;if(!e)return;const t=fe(ae,"journals",e.uid),n=await Wn(t);if(n.exists()){const s=n.data(),i=Object.entries(s).sort((r,o)=>Number(o[0])-Number(r[0])).map(([r,o])=>({id:r,...o}));this.journalData=i}},async getTherapists(){const e=[];return(await Sl(Go(ae,"therapists"))).forEach(n=>{e.push({id:n.id,...n.data()})}),this.therapists=e,this.therapists}}}),hO={class:"modal_holder"},dO={class:"modal_heading_holder inter font_size_xs"},fO=["innerHTML"],pO={__name:"errorModal",props:{errorMessage:{type:String,required:!0}},setup(e){return(t,n)=>(G(),K("div",{class:"modal_overlay",onClick:n[1]||(n[1]=Ed(s=>t.$emit("close"),["self"])),role:"dialog","aria-modal":"true"},[A("div",hO,[A("div",dO,[n[2]||(n[2]=A("span",null,"Attention!",-1)),A("button",{class:"modal_close_button",onClick:n[0]||(n[0]=s=>t.$emit("close"))},"")]),A("div",{class:"modal_content_holder inter font_size_xs",innerHTML:e.errorMessage},null,8,fO)])]))}},Qr=Ne(pO,[["__scopeId","data-v-b33337de"]]),gO={class:"modal_overlay",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},mO={class:"modal_holder"},_O={id:"modal-title",class:"modal_heading_holder inter font_size_xs"},yO={class:"modal_content_holder inter font_size_xs"},vO=["value"],bO=["value"],wO={__name:"userInfoModal",props:{globalUser:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=rn();Ei();const s=e,i=Z([]),r=Z(""),o=Z(""),a=Z(""),l=Z(""),c=Z(""),h=Z([{value:"male",text:"Male"},{value:"female",text:"Female"},{value:"other",text:"Other"}]),d=Z(!1),f=Z("");cs(async()=>{const R=await(await fetch("https://restcountries.com/v3.1/all?fields=name,cca3,flags")).json();i.value=R.sort((I,x)=>I.name.common.localeCompare(x.name.common))});const g=C=>/^\d{10}$/.test(C),_=C=>{if(!/^\d{4}\/\d{2}\/\d{2}$/.test(C))return!1;const[R,I,x]=C.split("/").map(Number),L=new Date(R,I-1,x);return L.getFullYear()===R&&L.getMonth()===I-1&&L.getDate()===x},y=async()=>{if(iu().currentUser,f.value="",d.value=!1,!g(a.value)){f.value="Contact Number must be a valid 10-digit number.",d.value=!0;return}if(!_(l.value)){f.value="Date of Birth must be in the format yyyy/mm/dd.",d.value=!0;return}const R={personalInfo:{name:o.value,contactNumber:a.value,dateOfBirth:l.value,email:s.globalUser.email,country:r.value,gender:c.value},streak:{count:1,lastUpdate:kn()},loginDate:new Date().toISOString(),uid:s.globalUser.uid};await Tn(fe(ae,"users",s.globalUser.uid),R),n.setUserData(R),window.location.reload()},b=()=>{d.value=!1,f.value=""};return(C,R)=>(G(),K("div",gO,[A("div",mO,[A("div",_O,[R[6]||(R[6]=A("span",{style:{width:"80%"}},"User Information",-1)),A("button",{class:"modal_close_button",onClick:R[0]||(R[0]=I=>C.$emit("close"))},"")]),A("div",yO,[R[10]||(R[10]=A("div",{class:"modal_content_description"}," We collect your name, date of birth, and contact number to create your profile, personalize your therapy experience, and stay in touch for updates or support. Your information is kept secure and private at all times. ",-1)),A("form",{class:"modal_form_holder",onSubmit:Ed(y,["prevent"])},[Mt(A("input",{class:"modal_input inter font_size_xs",type:"text",placeholder:"Name & Surname","onUpdate:modelValue":R[1]||(R[1]=I=>o.value=I),required:""},null,512),[[re,o.value]]),Mt(A("input",{class:"modal_input inter font_size_xs",type:"tel",placeholder:"Contact Number","onUpdate:modelValue":R[2]||(R[2]=I=>a.value=I),required:""},null,512),[[re,a.value]]),Mt(A("input",{class:"modal_input inter font_size_xs",type:"text",placeholder:"Date of Birth (yyyy/mm/dd)","onUpdate:modelValue":R[3]||(R[3]=I=>l.value=I),required:""},null,512),[[re,l.value]]),Mt(A("select",{class:"modal_input inter font_size_xs","onUpdate:modelValue":R[4]||(R[4]=I=>c.value=I)},[R[7]||(R[7]=A("option",{disabled:"",value:""},"Please select one",-1)),(G(!0),K(Et,null,Jt(h.value,I=>(G(),K("option",{key:I.value,value:I.value},dt(I.text),9,vO))),128))],512),[[Kn,c.value]]),Mt(A("select",{class:"modal_input inter font_size_xs","onUpdate:modelValue":R[5]||(R[5]=I=>r.value=I),id:"country"},[R[8]||(R[8]=A("option",{disabled:"",value:""},"Select your country",-1)),(G(!0),K(Et,null,Jt(i.value,I=>(G(),K("option",{key:I.cca3,value:I.cca3},dt(I.name.common),9,bO))),128))],512),[[Kn,r.value]]),R[9]||(R[9]=A("button",{type:"submit",class:"modal_button inter font_size_xs"},"Confirm",-1))],32)])]),d.value?(G(),rs(Qr,{key:0,errorMessage:f.value,onClose:b},null,8,["errorMessage"])):pe("",!0)]))}},EO=Ne(wO,[["__scopeId","data-v-252a7fe2"]]),TO={class:"login_page"},IO={class:"login_page_content"},AO={class:"login_page_form"},SO={class:"login_page_form_fields"},RO=["type"],CO={class:"show_password_toggle inter font_size_xs"},xO={class:"login_page_toggle_register inter font_size_xs"},kO={__name:"loginRegister",setup(e){const t=rn(),n=Ei(),s=Z("password"),i=Z(null),r=Z(""),o=Z(""),a=Z("login"),l=Z(!1),c=Z(""),h=Z(!1);new Es().addScope("https://www.googleapis.com/auth/contacts.readonly");const f=()=>{s.value=s.value==="password"?"text":"password"},g=()=>{a.value=a.value==="login"?"register":"login"},_=I=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(I),y=()=>{if(!r.value){c.value="Please enter your email to reset your password!",l.value=!0;return}y1(gn,r.value).then(()=>{c.value="An email has been sent to reset your password!",l.value=!0})},b=I=>{const x=I.toDate(),L=new Date,W=new Date(L.getFullYear(),L.getMonth(),L.getDate()),E=new Date(W);return E.setDate(W.getDate()-1),x>=E&&x<W},C=async I=>{I.streak&&(b(I.streak.lastUpdate)?I.streak.count+=1:I.streak.count=1,I.streak.lastUpdate=kn(),I.loginDate=kn(),await Tn(fe(ae,"users",I.uid),I))},R=async()=>{try{if(c.value="",l.value=!1,!_(r.value)){c.value="Invalid email format!",l.value=!0;return}if(a.value==="register"){const x=(await v1(gn,r.value,o.value)).user;i.value={uid:x.uid,email:x.email},h.value=!0}else{const x=(await b1(gn,r.value,o.value)).user,L=fe(ae,"users",x.uid),W=await Wn(L);if(W.exists()){const E=W.data();E&&(await C(E),t.setUserData(E),n.push({name:"Navigation"}))}}}catch(I){I.code==="auth/invalid-credential"?c.value="Invalid login details.":I.code==="auth/email-already-in-use"?c.value="Email already in use.":c.value="An unexpected error occurred.",l.value=!0}};return(I,x)=>(G(),K("div",TO,[A("div",IO,[x[4]||(x[4]=A("div",{class:"login_page_intro inter font_size_xs"},[A("div",{class:"login_page_intro_text"},[A("div",{class:"font_size_m licorice_regular"},"Welcome to Finding Your Fit"),A("br"),A("br"),ee(" A space designed to help you understand yourself better, build emotional balance, and grow into the life that fits you best. Take a moment to reconnect, reflect, and start working toward your goals  one step at a time. ")])],-1)),A("div",AO,[A("form",SO,[Mt(A("input",{class:"login_page_input inter font_size_xs",type:"text",placeholder:"Email","onUpdate:modelValue":x[0]||(x[0]=L=>r.value=L)},null,512),[[re,r.value]]),Mt(A("input",{class:"login_page_password inter font_size_xs",type:s.value,placeholder:"Password","onUpdate:modelValue":x[1]||(x[1]=L=>o.value=L)},null,8,RO),[[q0,o.value]]),A("div",CO,[A("label",null,[A("input",{type:"checkbox",onChange:f},null,32),x[3]||(x[3]=ee(" Show Password ",-1))])])]),A("button",{class:"login_page_button inter font_size_xs",onClick:R},dt(a.value==="login"?"Login":"Register"),1),A("div",{class:"login_page_forgot_password inter font_size_xs",onClick:y},dt(a.value==="login"?"Forgot Password?":""),1)]),A("div",xO,[A("u",{onClick:g},dt(a.value==="login"?"Register":"Login"),1)])]),l.value?(G(),rs(Qr,{key:0,errorMessage:c.value,onClose:x[2]||(x[2]=L=>l.value=!1)},null,8,["errorMessage"])):pe("",!0),h.value&&i.value?(G(),rs(EO,{key:1,globalUser:i.value},null,8,["globalUser"])):pe("",!0)]))}},PO=Ne(kO,[["__scopeId","data-v-0bd593e9"]]),n_=[{content:"Success is not final, failure is not fatal: It is the courage to continue that counts.",author:"Winston Churchill"},{content:"The only way to do great work is to love what you do.",author:"Steve Jobs"},{content:"Don't watch the clock; do what it does. Keep going.",author:"Sam Levenson"},{content:"You are never too old to set another goal or to dream a new dream.",author:"C.S. Lewis"},{content:"Believe you can and you're halfway there.",author:"Theodore Roosevelt"},{content:"Your limitationits only your imagination.",author:"Unknown"},{content:"Push yourself, because no one else is going to do it for you.",author:"Unknown"},{content:"Great things never come from comfort zones.",author:"Unknown"},{content:"Dream it. Wish it. Do it.",author:"Unknown"},{content:"Success doesnt just find you. You have to go out and get it.",author:"Unknown"},{content:"The harder you work for something, the greater youll feel when you achieve it.",author:"Unknown"},{content:"Dont stop when youre tired. Stop when youre done.",author:"Unknown"},{content:"Wake up with determination. Go to bed with satisfaction.",author:"Unknown"},{content:"Do something today that your future self will thank you for.",author:"Unknown"},{content:"Little things make big days.",author:"Unknown"},{content:"Its going to be hard, but hard does not mean impossible.",author:"Unknown"},{content:"Dont wait for opportunity. Create it.",author:"Unknown"},{content:"Sometimes were tested not to show our weaknesses, but to discover our strengths.",author:"Unknown"},{content:"The key to success is to focus on goals, not obstacles.",author:"Unknown"},{content:"Dream bigger. Do bigger.",author:"Unknown"},{content:"Dont limit your challenges. Challenge your limits.",author:"Unknown"},{content:"What you get by achieving your goals is not as important as what you become by achieving your goals.",author:"Zig Ziglar"},{content:"Start where you are. Use what you have. Do what you can.",author:"Arthur Ashe"},{content:"The future depends on what you do today.",author:"Mahatma Gandhi"},{content:"Hustle in silence. Let your success make the noise.",author:"Unknown"},{content:"If you want to achieve greatness stop asking for permission.",author:"Unknown"},{content:"Opportunities dont happen. You create them.",author:"Chris Grosser"},{content:"Dont watch the clock; do what it does. Keep going.",author:"Sam Levenson"},{content:"Action is the foundational key to all success.",author:"Pablo Picasso"},{content:"The only limit to our realization of tomorrow is our doubts of today.",author:"Franklin D. Roosevelt"},{content:"Hardships often prepare ordinary people for an extraordinary destiny.",author:"C.S. Lewis"},{content:"Dont wait. The time will never be just right.",author:"Napoleon Hill"},{content:"Believe in yourself and all that you are.",author:"Christian D. Larson"},{content:"Fall seven times and stand up eight.",author:"Japanese Proverb"},{content:"Everything youve ever wanted is on the other side of fear.",author:"George Addair"},{content:"Success is what comes after you stop making excuses.",author:"Luis Galarza"},{content:"Your life does not get better by chance, it gets better by change.",author:"Jim Rohn"},{content:"Dont be pushed around by the fears in your mind. Be led by the dreams in your heart.",author:"Roy T. Bennett"},{content:"Doubt kills more dreams than failure ever will.",author:"Suzy Kassem"},{content:"The only way to achieve the impossible is to believe it is possible.",author:"Charles Kingsleigh"},{content:"Do what you can with all you have, wherever you are.",author:"Theodore Roosevelt"},{content:"Dreams dont work unless you do.",author:"John C. Maxwell"},{content:"Dont wait for the perfect moment. Take the moment and make it perfect.",author:"Unknown"},{content:"Work hard in silence. Let success be your noise.",author:"Frank Ocean"},{content:"Success is not in what you have, but who you are.",author:"Bo Bennett"},{content:"The secret of getting ahead is getting started.",author:"Mark Twain"},{content:"Your passion is waiting for your courage to catch up.",author:"Isabelle Lafleche"},{content:"Great things never come from comfort zones.",author:"Unknown"},{content:"Push yourself, because no one else is going to do it for you.",author:"Unknown"},{content:"Failure is the condiment that gives success its flavor.",author:"Truman Capote"},{content:"Dont quit. Suffer now and live the rest of your life as a champion.",author:"Muhammad Ali"},{content:"The harder you work for something, the greater youll feel when you achieve it.",author:"Unknown"},{content:"Do something today that your future self will thank you for.",author:"Sean Patrick Flanery"},{content:"Little by little, day by day, what is meant for you will find its way.",author:"Unknown"},{content:"You are capable of amazing things.",author:"Unknown"},{content:"Start each day with a positive thought and a grateful heart.",author:"Roy T. Bennett"},{content:"The way to get started is to quit talking and begin doing.",author:"Walt Disney"},{content:"Dont let yesterday take up too much of today.",author:"Will Rogers"},{content:"You dont have to be great to start, but you have to start to be great.",author:"Zig Ziglar"},{content:"Opportunities dont happen. You create them.",author:"Chris Grosser"},{content:"It always seems impossible until its done.",author:"Nelson Mandela"},{content:"Push yourself, because no one else is going to do it for you.",author:"Unknown"},{content:"Great things never come from comfort zones.",author:"Unknown"},{content:"Dream it. Wish it. Do it.",author:"Unknown"},{content:"Success doesnt just find you. You have to go out and get it.",author:"Unknown"},{content:"The harder you work for something, the greater youll feel when you achieve it.",author:"Unknown"},{content:"Dont stop when youre tired. Stop when youre done.",author:"Unknown"},{content:"Wake up with determination. Go to bed with satisfaction.",author:"Unknown"},{content:"Do something today that your future self will thank you for.",author:"Unknown"},{content:"Little things make big days.",author:"Unknown"},{content:"Its going to be hard, but hard does not mean impossible.",author:"Unknown"},{content:"Dont wait for opportunity. Create it.",author:"Unknown"},{content:"Sometimes were tested not to show our weaknesses, but to discover our strengths.",author:"Unknown"},{content:"The key to success is to focus on goals, not obstacles.",author:"Unknown"},{content:"Dream bigger. Do bigger.",author:"Unknown"},{content:"Dont limit your challenges. Challenge your limits.",author:"Unknown"},{content:"What you get by achieving your goals is not as important as what you become by achieving your goals.",author:"Zig Ziglar"},{content:"Start where you are. Use what you have. Do what you can.",author:"Arthur Ashe"},{content:"The future depends on what you do today.",author:"Mahatma Gandhi"},{content:"Hustle in silence. Let your success make the noise.",author:"Unknown"},{content:"If you want to achieve greatness stop asking for permission.",author:"Unknown"},{content:"Action is the foundational key to all success.",author:"Pablo Picasso"},{content:"Hardships often prepare ordinary people for an extraordinary destiny.",author:"C.S. Lewis"},{content:"Fall seven times and stand up eight.",author:"Japanese Proverb"},{content:"Everything youve ever wanted is on the other side of fear.",author:"George Addair"},{content:"Your life does not get better by chance, it gets better by change.",author:"Jim Rohn"},{content:"Dont be pushed around by the fears in your mind. Be led by the dreams in your heart.",author:"Roy T. Bennett"},{content:"Doubt kills more dreams than failure ever will.",author:"Suzy Kassem"},{content:"The only way to achieve the impossible is to believe it is possible.",author:"Charles Kingsleigh"},{content:"Do what you can with all you have, wherever you are.",author:"Theodore Roosevelt"},{content:"Dreams dont work unless you do.",author:"John C. Maxwell"},{content:"Dont wait for the perfect moment. Take the moment and make it perfect.",author:"Unknown"},{content:"Work hard in silence. Let success be your noise.",author:"Frank Ocean"},{content:"Success is not in what you have, but who you are.",author:"Bo Bennett"},{content:"The secret of getting ahead is getting started.",author:"Mark Twain"},{content:"Your passion is waiting for your courage to catch up.",author:"Isabelle Lafleche"},{content:"Great things never come from comfort zones.",author:"Unknown"},{content:"Push yourself, because no one else is going to do it for you.",author:"Unknown"},{content:"Failure is the condiment that gives success its flavor.",author:"Truman Capote"},{content:"Dont quit. Suffer now and live the rest of your life as a champion.",author:"Muhammad Ali"},{content:"The harder you work for something, the greater youll feel when you achieve it.",author:"Unknown"},{content:"Do something today that your future self will thank you for.",author:"Sean Patrick Flanery"},{content:"Little by little, day by day, what is meant for you will find its way.",author:"Unknown"},{content:"You are capable of amazing things.",author:"Unknown"},{content:"Start each day with a positive thought and a grateful heart.",author:"Roy T. Bennett"},{content:"The way to get started is to quit talking and begin doing.",author:"Walt Disney"},{content:"Dont let yesterday take up too much of today.",author:"Will Rogers"},{content:"You dont have to be great to start, but you have to start to be great.",author:"Zig Ziglar"},{content:"Opportunities dont happen. You create them.",author:"Chris Grosser"},{content:"It always seems impossible until its done.",author:"Nelson Mandela"},{content:"Do what you love, love what you do.",author:"Unknown"},{content:"Success is the sum of small efforts, repeated day in and day out.",author:"Robert Collier"},{content:"Motivation is what gets you started. Habit is what keeps you going.",author:"Jim Ryun"},{content:"Dont let fear decide your future.",author:"Shalane Flanagan"},{content:"You miss 100% of the shots you dont take.",author:"Wayne Gretzky"},{content:"Start where you are. Use what you have. Do what you can.",author:"Arthur Ashe"},{content:"Do one thing every day that scares you.",author:"Eleanor Roosevelt"},{content:"The best way to predict the future is to invent it.",author:"Alan Kay"},{content:"Difficult roads often lead to beautiful destinations.",author:"Unknown"},{content:"Believe in yourself, take on your challenges, dig deep within yourself to conquer fears.",author:"Chantal Sutherland"},{content:"If it doesnt challenge you, it wont change you.",author:"Fred DeVito"},{content:"It always seems impossible until its done.",author:"Nelson Mandela"},{content:"The expert in anything was once a beginner.",author:"Helen Hayes"},{content:"Dont count the days, make the days count.",author:"Muhammad Ali"},{content:"The harder the battle, the sweeter the victory.",author:"Les Brown"},{content:"Success is liking yourself, liking what you do, and liking how you do it.",author:"Maya Angelou"},{content:"You dont have to see the whole staircase, just take the first step.",author:"Martin Luther King Jr."},{content:"Small daily improvements over time lead to stunning results.",author:"Robin Sharma"},{content:"Dont let what you cannot do interfere with what you can do.",author:"John Wooden"},{content:"The only limit is the one you set yourself.",author:"Felix Baumgartner"},{content:"Great things are done by a series of small things brought together.",author:"Vincent Van Gogh"},{content:"Your dream doesnt have an expiration date. Take a deep breath and try again.",author:"KT Witten"},{content:"Action is the foundational key to all success.",author:"Pablo Picasso"},{content:"You are braver than you believe, stronger than you seem, and smarter than you think.",author:"A.A. Milne"},{content:"Work until you no longer have to introduce yourself.",author:"Unknown"},{content:"The best revenge is massive success.",author:"Frank Sinatra"},{content:"Your only limit is your mind.",author:"Unknown"},{content:"Stop being afraid of what could go wrong and start being excited about what could go right.",author:"Unknown"},{content:"Do not wait to strike till the iron is hot; but make it hot by striking.",author:"William Butler Yeats"},{content:"Dont let perfectionism get in the way of progress.",author:"Unknown"},{content:"Great minds discuss ideas; average minds discuss events; small minds discuss people.",author:"Eleanor Roosevelt"},{content:"Strive not to be a success, but rather to be of value.",author:"Albert Einstein"},{content:"Your passion is waiting for your courage to catch up.",author:"Isabelle Lafleche"},{content:"Do what you can, with what you have, where you are.",author:"Theodore Roosevelt"},{content:"Success is not about the destination, its about the journey.",author:"Zig Ziglar"},{content:"The key to success is to focus on goals, not obstacles.",author:"Unknown"},{content:"A year from now you may wish you had started today.",author:"Karen Lamb"},{content:"Dont stop until youre proud.",author:"Unknown"},{content:"Dream big. Start small. Act now.",author:"Robin Sharma"},{content:"Hard work beats talent when talent doesnt work hard.",author:"Tim Notke"},{content:"Stay positive, work hard, make it happen.",author:"Unknown"},{content:"Your time is limited, dont waste it living someone elses life.",author:"Steve Jobs"},{content:"The difference between ordinary and extraordinary is that little extra.",author:"Jimmy Johnson"},{content:"Dont let yesterday take up too much of today.",author:"Will Rogers"},{content:"Dont wait for opportunity. Create it.",author:"Unknown"},{content:"Success doesnt come to you, you go to it.",author:"Marva Collins"},{content:"A river cuts through rock not because of its power, but because of its persistence.",author:"Jim Watkins"},{content:"Discipline is the bridge between goals and accomplishment.",author:"Jim Rohn"},{content:"Do what is right, not what is easy nor what is popular.",author:"Unknown"},{content:"Be so good they cant ignore you.",author:"Steve Martin"},{content:"Dont limit yourself. Many people limit themselves to what they think they can do.",author:"Mary Kay Ash"},{content:"Your life does not get better by chance, it gets better by change.",author:"Jim Rohn"},{content:"Success is the progressive realization of a worthy goal or ideal.",author:"Earl Nightingale"},{content:"To succeed in life, you need two things: ignorance and confidence.",author:"Mark Twain"},{content:"Courage doesnt always roar. Sometimes courage is the quiet voice at the end of the day saying, I will try again tomorrow.",author:"Mary Anne Radmacher"},{content:"Start each day with a positive thought and a grateful heart.",author:"Roy T. Bennett"},{content:"Dont let small minds convince you that your dreams are too big.",author:"Unknown"},{content:"Success is no accident. It is hard work, perseverance, learning, studying, sacrifice and most of all, love of what you are doing.",author:"Pel"},{content:"The best way out is always through.",author:"Robert Frost"},{content:"Failure is simply the opportunity to begin again, this time more intelligently.",author:"Henry Ford"},{content:"Dont wish it were easier. Wish you were better.",author:"Jim Rohn"},{content:"The mind is everything. What you think you become.",author:"Buddha"},{content:"When you feel like quitting, remember why you started.",author:"Unknown"},{content:"Success usually comes to those who are too busy to be looking for it.",author:"Henry David Thoreau"},{content:"Dont be afraid to give up the good to go for the great.",author:"John D. Rockefeller"},{content:"Do not be embarrassed by your failures, learn from them and start again.",author:"Richard Branson"},{content:"Dont wait for the perfect moment. Take the moment and make it perfect.",author:"Unknown"},{content:"Small deeds done are better than great deeds planned.",author:"Peter Marshall"},{content:"Act as if what you do makes a difference. It does.",author:"William James"},{content:"Success is not how high you have climbed, but how you make a positive difference to the world.",author:"Roy T. Bennett"},{content:"Your future is created by what you do today, not tomorrow.",author:"Robert Kiyosaki"},{content:"The secret of success is to do the common thing uncommonly well.",author:"John D. Rockefeller Jr."},{content:"What seems to us as bitter trials are often blessings in disguise.",author:"Oscar Wilde"},{content:"The only place where success comes before work is in the dictionary.",author:"Vidal Sassoon"},{content:"Happiness is not something ready-made. It comes from your own actions.",author:"Dalai Lama"},{content:"Opportunities multiply as they are seized.",author:"Sun Tzu"},{content:"Do not go where the path may lead, go instead where there is no path and leave a trail.",author:"Ralph Waldo Emerson"},{content:"Success is liking yourself, liking what you do, and liking how you do it.",author:"Maya Angelou"},{content:"Be not afraid of life. Believe that life is worth living, and your belief will help create the fact.",author:"William James"},{content:"Dont be afraid to start over. Its a chance to build something better.",author:"Unknown"},{content:"Success isnt always about greatness. Its about consistency.",author:"Dwayne Johnson"},{content:"You are confined only by the walls you build yourself.",author:"Andrew Murphy"},{content:"The best time to plant a tree was 20 years ago. The second best time is now.",author:"Chinese Proverb"},{content:"Dreams dont work unless you do.",author:"John C. Maxwell"},{content:"Dont let the fear of losing be greater than the excitement of winning.",author:"Robert Kiyosaki"},{content:"You cant cross the sea merely by standing and staring at the water.",author:"Rabindranath Tagore"},{content:"Success is the sum of small efforts, repeated day in and day out.",author:"Robert Collier"},{content:"Be so good they cant ignore you.",author:"Steve Martin"},{content:"Your limitationits only your imagination.",author:"Unknown"},{content:"The journey of a thousand miles begins with one step.",author:"Lao Tzu"},{content:"Dont limit your challenges. Challenge your limits.",author:"Jerry Dunn"},{content:"Great things never come from comfort zones.",author:"Unknown"},{content:"Its not whether you get knocked down, its whether you get up.",author:"Vince Lombardi"},{content:"Everything you can imagine is real.",author:"Pablo Picasso"},{content:"Success is not in never falling, but in rising every time we fall.",author:"Confucius"},{content:"Dont wait for opportunity. Create it.",author:"George Bernard Shaw"},{content:"The best dreams happen when youre awake.",author:"Cherie Gilderbloom"},{content:"Do something today that your future self will thank you for.",author:"Sean Patrick Flanery"},{content:"What you do today can improve all your tomorrows.",author:"Ralph Marston"}];function DO(){const e=Math.floor(Math.random()*n_.length);return n_[e]}const OO="/assets/my_therapist-BGpDoE1u.png",MO="/assets/my_journal-ByAOnFF2.png",NO="/assets/journal-BcWmOkN8.png",VO="/assets/my_courses-DAreBNF0.png",LO="/assets/therapist-sZYqYBaF.png",FO="/assets/mood_track-DScXBvTj.png",UO={class:"home_container"},BO={class:"greeting_section licorice_regular font_size_m"},jO={class:"checkin_section"},$O={class:"feeling_section"},zO={class:"inspiration_section"},HO={class:"quote_text inter font_size_xxs"},WO={class:"offer_section"},qO={class:"offer_list"},GO={class:"offer_icon_wrapper"},KO={class:"offer_content_wrapper"},YO={class:"offer_title inter font_size_xxs"},QO={class:"offer_description inter font_size_xxs"},XO={__name:"home",setup(e){const t=rn(),n=Ei(),s=Z({content:"",author:""});Z(!1);const i=Lt(()=>t.userData?.personalInfo.name||"");Lt(()=>[{label:"My Therapist",url:OO},{label:"Journal Entry",url:MO},{label:"Explore Courses",url:VO}]);const r=Lt(()=>[{label:"Expert support at your fingertips",content:"Find and connect with qualified therapists specializing in various areas.",icon:LO},{label:"Personalized mood tracking",content:"Log your daily mood to visualize trends, identify triggers, and gain insights.",icon:FO},{label:"Journaling",content:"A private space for self-reflection, prompts, and gain thoughts.",icon:NO}]);cs(()=>{s.value=DO()});const o=()=>{const l=new Date().getHours();return l<12?"morning":l<18?"afternoon":"evening"},a=()=>{n.push({name:"Mood"})};return(l,c)=>(G(),K("div",UO,[A("div",BO," Good "+dt(o())+", "+dt(i.value)+"! ",1),A("div",jO,[A("div",$O,[c[1]||(c[1]=A("div",{class:"feeling_heading inter font_size_xs"},[A("b",null,"How are you feeling today?")],-1)),c[2]||(c[2]=A("div",{class:"feeling_image"},null,-1)),A("div",{class:"checkin_button inter font_size_xxs",onClick:c[0]||(c[0]=h=>a())}," Check in now ")])]),A("div",zO,[c[3]||(c[3]=A("div",{class:"inspiration_heading inter font_size_xxs"},[A("b",null,"Inspiration")],-1)),A("div",HO,dt(s.value.content),1)]),A("div",WO,[c[4]||(c[4]=A("div",{class:"offer_heading inter font_size_xs"},[A("b",null,"What we offer")],-1)),A("div",qO,[(G(!0),K(Et,null,Jt(r.value,h=>(G(),K("div",{class:"offer_card",key:h.label},[A("div",GO,[A("div",{class:"feature_icon",style:ss({backgroundImage:`url(${h.icon})`,backgroundSize:"50% 80%",backgroundPosition:"center",backgroundRepeat:"no-repeat"})},null,4)]),A("div",KO,[A("div",YO,[A("b",null,dt(h.label),1)]),A("div",QO,dt(h.content),1)])]))),128))])])]))}},JO=Ne(XO,[["__scopeId","data-v-e2e2b786"]]),ZO={key:0,class:"spinner-wrapper"},tM={class:"courses_selection_holder inter font_size_xs"},eM=["onClick"],nM={key:0,class:"courses_holder inter"},sM={key:0,class:"courses_list"},iM=["onClick"],rM={class:"course_card"},oM={class:"course_days"},aM={class:"days_number"},lM={class:"course_info"},cM={class:"course_title"},uM={class:"course_progress"},hM={key:1,class:"empty_courses_holder"},dM={key:1,class:"inter course_selection_holder"},fM={class:"inter course_selection_holder"},pM=["value"],gM={key:0,class:"discover_courses_holder"},mM={class:"courses_list"},_M=["onClick"],yM={class:"course_card"},vM={class:"course_days"},bM={class:"days_number"},wM={class:"course_info"},EM={class:"course_title"},TM={key:1},IM={key:2,class:"add_courses_holder inter font_size_s"},AM={__name:"coursesPage",setup(e){const t=Z([{value:"depressed",text:"Depressed"},{value:"anxious",text:"Anxious"},{value:"stressed",text:"Stressed"},{value:"overwhelmed",text:"Overwhelmed"},{value:"self_esteem",text:"Self Esteem"},{value:"anger",text:"Anger"},{value:"fear",text:"Fear"},{value:"panic",text:"Panic"},{value:"lonely",text:"Lonely"},{value:"peace",text:"Peace"},{value:"stress",text:"Stress"},{value:"patience",text:"Patience"},{value:"jealousy",text:"Jealousy"},{value:"doubt",text:"Doubt"}]),n=Ei(),s=rn(),i=Z(""),r=Z("myCourses"),o=Z([]),a=Z([]),l=Z(!0),c=Z(null),h=[{key:"myCourses",label:"My Courses",cornerClass:"right-rounded"},{key:"discoverCourses",label:"Discover Courses",cornerClass:"left-rounded"}],d=Lt(()=>!!s.userData?.admin),f=async()=>{try{let R=null;if(i.value){const I=Go(ae,"courses"),x=Rm(I,Cm("courseTheme","==",i.value));R=await Sl(x)}else R=await Sl(Go(ae,"courses"));o.value=R.docs.map(I=>({id:I.id,...I.data()}))}catch(R){c.value=R.message}finally{}},g=async()=>{if(!s.userData||!Array.isArray(s.userData.courses)||s.userData.courses.length===0){l.value=!1,a.value=[];return}try{const R=s.userData.courses.map(E=>({courseId:E.courseId,courseLength:E.courseLength,courseProgress:E.lastDayCompleted})).filter(Boolean);if(R.length===0){a.value=[];return}const I=R.map(E=>E.courseId),x=Go(ae,"courses"),L=Rm(x,Cm("__name__","in",I.slice(0,10))),W=await Sl(L);a.value=W.docs.map(E=>{const v=E.data(),T=R.find(P=>P.courseId===E.id);return{id:E.id,...v,courseLength:T?.courseLength??0,courseProgress:T?.courseProgress??0}})}catch(R){c.value=R.message}finally{l.value=!1}};cs(()=>{f(),g()}),jA((R,I,x)=>{f(),g(),x()});const _=R=>r.value=R,y=()=>n.push({name:"CreateCourses"}),b=R=>n.push({name:"CourseView",params:{id:R.id}}),C=R=>{n.push({name:"DoCourse",params:{id:R.id}})};return(R,I)=>l.value?(G(),K("div",ZO,[...I[2]||(I[2]=[A("div",{class:"spinner"},null,-1)])])):(G(),K(Et,{key:1},[I[9]||(I[9]=A("div",{class:"courses_header_holder inter font_size_xs"}," Courses ",-1)),A("div",tM,[(G(),K(Et,null,Jt(h,x=>A("div",{key:x.key,class:_n(["courses_selection",{active:r.value===x.key,[x.cornerClass]:!0}]),onClick:L=>_(x.key)},dt(x.label),11,eM)),64))]),I[10]||(I[10]=A("br",null,null,-1)),r.value==="myCourses"?(G(),K("div",nM,[a.value.length>0?(G(),K("div",sM,[(G(!0),K(Et,null,Jt(a.value,x=>(G(),K("div",{key:x.id,class:"course_card_holder",onClick:L=>C(x)},[A("div",rM,[I[4]||(I[4]=A("div",{class:"course_image"},[A("div",{class:"image_placeholder"},"IMG")],-1)),A("div",oM,[A("div",aM,dt(x.numberOfDays),1),I[3]||(I[3]=A("div",{class:"days_label"},"Days",-1))]),A("div",lM,[A("div",cM,dt(x.name),1)])]),A("div",uM,[A("div",{style:ss({width:(x.courseProgress+1)/x.courseLength*100+"%",height:"100%",backgroundColor:"#87bfba",borderRadius:"1rem"})},null,4)])],8,iM))),128))])):(G(),K("div",hM," You don't have any courses linked to your profile. "))])):pe("",!0),r.value==="discoverCourses"?(G(),K("div",dM,[A("div",fM,[Mt(A("select",{class:"course_input inter font_size_xs","onUpdate:modelValue":I[0]||(I[0]=x=>i.value=x),onChange:I[1]||(I[1]=x=>f())},[I[5]||(I[5]=A("option",{disabled:"",value:""},"Please select a theme",-1)),(G(!0),K(Et,null,Jt(t.value,x=>(G(),K("option",{key:x.value,value:x.value},dt(x.text),9,pM))),128))],544),[[Kn,i.value]])]),I[8]||(I[8]=A("br",null,null,-1)),o.value.length>0?(G(),K("div",gM,[A("div",mM,[(G(!0),K(Et,null,Jt(o.value,x=>(G(),K("div",{key:x.id,class:"course_card_holder",onClick:L=>b(x)},[A("div",yM,[I[7]||(I[7]=A("div",{class:"course_image"},[A("div",{class:"image_placeholder"},"IMG")],-1)),A("div",vM,[A("div",bM,dt(x.numberOfDays),1),I[6]||(I[6]=A("div",{class:"days_label"},"Days",-1))]),A("div",wM,[A("div",EM,dt(x.name),1)])])],8,_M))),128))])])):(G(),K("div",TM," There are no courses linked to this theme. "))])):pe("",!0),d.value?(G(),K("div",IM,[A("i",{class:"fas fa-plus",onClick:y})])):pe("",!0)],64))}},SM=Ne(AM,[["__scopeId","data-v-3ca2cebf"]]),RM={class:"course_page"},CM={class:"course_page_content"},xM={class:"course_page_form"},kM={class:"course_page_form_fields"},PM={class:"inter course_selection_holder"},DM=["value"],OM={class:"course_day_title inter font_size_xs"},MM=["onUpdate:modelValue"],NM=["onUpdate:modelValue"],VM=["disabled"],LM={class:"add_courses_holder inter font_size_s"},FM={__name:"createCourses",emits:["setPage"],setup(e,{emit:t}){const n=Ei(),s=Z(""),i=Z(""),r=Z(1),o=Z(!1),a=Z([]),l=Z([{value:"depressed",text:"Depressed"},{value:"anxious",text:"Anxious"},{value:"stressed",text:"Stressed"},{value:"overwhelmed",text:"Overwhelmed"},{value:"self_esteem",text:"Self Esteem"},{value:"anger",text:"Anger"},{value:"fear",text:"Fear"},{value:"panic",text:"Panic"},{value:"lonely",text:"Lonely"},{value:"peace",text:"Peace"},{value:"stress",text:"Stress"},{value:"anger",text:"Anger"},{value:"patience",text:"Patience"},{value:"jealousy",text:"Jealousy"},{value:"doubt",text:"Doubt"}]),c=Z(""),h=()=>{a.value=Array.from({length:r.value},(g,_)=>({day:_+1,title:"",content:""}))};h();const d=async()=>{if(!(!s.value||!i.value||!c.value)){o.value=!0;try{await gP(Go(ae,"courses"),{name:s.value,summary:i.value,courseTheme:c.value,numberOfDays:r.value,days:a.value.map(g=>({title:g.title,content:g.content})),createdAt:kn()}),s.value="",i.value="",r.value=1,c.value="",h()}catch(g){console.error(g)}finally{o.value=!1}n.push({name:"Courses"})}},f=g=>{n.push({name:"Courses"})};return(g,_)=>(G(),K(Et,null,[A("div",RM,[A("div",CM,[_[6]||(_[6]=A("div",{class:"course_page_intro inter font_size_xs"},[A("div",{class:"font_size_m licorice_regular"}," Create a New Course "),A("br"),ee(" Build a guided journey by adding daily reflections or lessons. ")],-1)),A("div",xM,[A("div",kM,[Mt(A("input",{class:"course_page_input inter font_size_xs",type:"text",placeholder:"Course name (e.g. Finding Peace Through Anxiety)","onUpdate:modelValue":_[0]||(_[0]=y=>s.value=y)},null,512),[[re,s.value]]),Mt(A("textarea",{class:"course_page_textarea inter font_size_xs",placeholder:"Course summary  what's this course about?","onUpdate:modelValue":_[1]||(_[1]=y=>i.value=y)},null,512),[[re,i.value]]),A("div",PM,[Mt(A("select",{class:"course_input inter font_size_xs","onUpdate:modelValue":_[2]||(_[2]=y=>c.value=y)},[_[5]||(_[5]=A("option",{disabled:"",value:""},"Please select a course theme",-1)),(G(!0),K(Et,null,Jt(l.value,y=>(G(),K("option",{key:y.value,value:y.value},dt(y.text),9,DM))),128))],512),[[Kn,c.value]])]),Mt(A("input",{class:"course_page_input inter font_size_xs",type:"number",min:"1",placeholder:"Number of days","onUpdate:modelValue":_[3]||(_[3]=y=>r.value=y),onChange:h},null,544),[[re,r.value,void 0,{number:!0}]]),(G(!0),K(Et,null,Jt(a.value,(y,b)=>(G(),K("div",{key:b,class:"course_day_block"},[A("div",OM," Day "+dt(b+1),1),Mt(A("input",{class:"course_page_input inter font_size_xs",type:"text",placeholder:"Day title","onUpdate:modelValue":C=>y.title=C},null,8,MM),[[re,y.title]]),Mt(A("textarea",{class:"course_page_textarea inter font_size_xs",placeholder:"Day content","onUpdate:modelValue":C=>y.content=C},null,8,NM),[[re,y.content]])]))),128))]),A("button",{class:"course_page_button inter font_size_xs",onClick:d,disabled:o.value},dt(o.value?"Saving...":"Save Course"),9,VM)])])]),A("div",LM,[A("i",{class:"fas fa-times",onClick:_[4]||(_[4]=y=>f())})])],64))}},UM=Ne(FM,[["__scopeId","data-v-34843de6"]]),BM={class:"do-course-page inter font_size_s"},jM={key:0,class:"spinner-wrapper"},$M={class:"course-title"},zM={key:0},HM={key:0,class:"day-section"},WM={class:"font_size_xs"},qM={class:"font_size_xs"},GM=["disabled"],KM={key:1,class:"next-day-locked font_size_xs"},YM={key:2,class:"next-day-locked font_size_xs"},QM={key:1,class:"next-day-locked"},XM={__name:"doCourse",setup(e){const t=Uv(),n=Iw(),s=rn(),i=Z(null),r=Z(!0),o=Z(0),a=Z(!1),l=Z(!1),c=Z(!1);let h=null;const d=async()=>{r.value=!0;const g=t.params.id,_=await Wn(fe(n,"courses",g));if(!_.exists()){r.value=!1;return}if(i.value=_.data(),!gn.currentUser){r.value=!1;return}const y=fe(n,"users",gn.currentUser.uid),b=await Wn(y);let C=b.exists()?b.data().courses||[]:[],R=C.find(x=>x.courseId===g);const I=new Date().toISOString().split("T")[0];R||(R={courseId:g,lastDayCompleted:-1,lastDayCompletedDate:null},C.push(R),await Pm(y,{courses:C})),h=R,c.value?(o.value=i.value.days.length-1,l.value=!0):o.value=R.lastDayCompleted+1,R.lastDayCompletedDate===I&&!c.value?(a.value=!0,l.value=!0):a.value=!1,R.completed&&(c.value=R.completed),r.value=!1},f=async()=>{if(r.value=!0,!i.value||!gn.currentUser||!h)return;const g=new Date().toISOString().split("T")[0];a.value=!0,l.value=!0;const _=fe(n,"users",gn.currentUser.uid),b=(await Wn(_)).data().courses||[];var C=!1;console.log(b),o.value===i.value.days.length-1&&(C=!0,c.value=!0);const R=b.map(x=>x.courseId===h.courseId?{...x,lastDayCompleted:o.value,lastDayCompletedDate:g,completed:C}:x);await Pm(_,{courses:R});const I=await Wn(_);if(I.exists()){const x=I.data();s.setUserData(x)}h.lastDayCompleted=o.value+1,h.lastDayCompletedDate=g,o.value=h.lastDayCompleted,r.value=!1};return cs(d),(g,_)=>(G(),K("div",BM,[r.value?(G(),K("div",jM,[..._[0]||(_[0]=[A("div",{class:"spinner"},null,-1)])])):(G(),K(Et,{key:1},[A("div",$M,dt(i.value?.name),1),_[3]||(_[3]=ee("  ",-1)),i.value?(G(),K("div",zM,[!l.value&&!c.value&&i.value.days[o.value]?(G(),K("div",HM,[A("div",WM,[A("b",null,"Day "+dt(o.value+1)+": "+dt(i.value.days[o.value].title),1)]),_[1]||(_[1]=A("br",null,null,-1)),A("div",qM,dt(i.value.days[o.value].content),1),_[2]||(_[2]=A("br",null,null,-1)),A("button",{class:"complete-btn",disabled:a.value,onClick:f},dt(a.value?"Completed!":"Mark as Done"),9,GM)])):c.value?(G(),K("div",KM,"  Course completed! Well done. ")):l.value&&!c.value?(G(),K("div",YM," Come back tomorrow for Day "+dt(o.value+1)+". ",1)):pe("",!0)])):(G(),K("p",QM,"Course not found."))],64))]))}},JM=Ne(XM,[["__scopeId","data-v-bdcb5038"]]),ZM={};function tN(e,t){return null}const eN=Ne(ZM,[["render",tN]]),nN={class:"loading_page_holder"},sN={__name:"loadingPage",setup(e){const t=rn(),n=Ei();return cs(()=>{t.userData?.uid?n.push({name:"Home"}):n.push({name:"Login"})}),(s,i)=>(G(),K("div",nN))}},iN=Ne(sN,[["__scopeId","data-v-307b8f7c"]]),rN={class:"modal_overlay",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},oN={class:"modal_holder"},aN={id:"modal-title",class:"modal_heading_holder inter font_size_xs"},lN={class:"modal_content_holder inter font_size_xs"},cN=["value"],uN=["value"],Xu="editProfileForm",hN={__name:"profileEdit",props:{globalUser:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=rn(),s=t,i=e,r=Z([]),o=Z(""),a=Z(""),l=Z(""),c=Z(""),h=Z(""),d=Z(""),f=Z(!1),g=[{value:"male",text:"Male"},{value:"female",text:"Female"},{value:"other",text:"Other"}];cs(async()=>{const I=await(await fetch("https://restcountries.com/v3.1/all?fields=name,cca3")).json();r.value=I.sort((L,W)=>L.name.common.localeCompare(W.name.common));const x=JSON.parse(localStorage.getItem(Xu));x&&(a.value=x.nameSurname||"",l.value=x.contactNumber||"",c.value=x.dateOfBirth||"",h.value=x.selectedOption||"",o.value=x.selectedCountry||"")}),As([a,l,c,h,o],()=>{localStorage.setItem(Xu,JSON.stringify({nameSurname:a.value,contactNumber:l.value,dateOfBirth:c.value,selectedOption:h.value,selectedCountry:o.value}))},{deep:!0});function _(R){return/^\d{10}$/.test(R)}function y(R){if(!/^\d{4}\/\d{2}\/\d{2}$/.test(R))return!1;const[x,L,W]=R.split("/").map(Number),E=new Date(x,L-1,W);return E.getFullYear()===x&&E.getMonth()===L-1&&E.getDate()===W}const b=async()=>{const I=iu().currentUser;if(f.value=!1,d.value="",!_(l.value)){d.value="Contact Number must be a valid 10-digit number.",f.value=!0;return}if(!y(c.value)){d.value="Date of Birth must be in the format yyyy/mm/dd.",f.value=!0;return}const x=i.globalUser.userData,L={personalInfo:{name:a.value,contactNumber:l.value,dateOfBirth:c.value,email:x.email||I.email,gender:h.value,country:o.value},uid:x.uid||I.uid,loginDate:x.loginDate,streak:x.streak,profileEdited:kn()};n.setUserData(L),await Tn(fe(ae,"users",L.uid),L),localStorage.removeItem(Xu),s("close")},C=()=>{f.value=!1,d.value=""};return(R,I)=>(G(),K("div",rN,[A("div",oN,[A("div",aN,[I[6]||(I[6]=A("span",{style:{width:"80%"}},"Edit User Information",-1)),A("button",{class:"modal_close_button",onClick:I[0]||(I[0]=x=>R.$emit("close"))},"")]),A("div",lN,[I[10]||(I[10]=A("div",{class:"modal_content_description"}," We collect your name, date of birth, and contact number to create your profile, personalize your therapy experience, and stay in touch for updates or support. Your information is kept secure and private at all times. ",-1)),A("form",{class:"modal_form_holder",onSubmit:Ed(b,["prevent"])},[Mt(A("input",{class:"modal_input inter font_size_xs",type:"text",placeholder:"Name & Surname","onUpdate:modelValue":I[1]||(I[1]=x=>a.value=x),required:""},null,512),[[re,a.value]]),Mt(A("input",{class:"modal_input inter font_size_xs",type:"tel",placeholder:"Contact Number","onUpdate:modelValue":I[2]||(I[2]=x=>l.value=x),required:""},null,512),[[re,l.value]]),Mt(A("input",{class:"modal_input inter font_size_xs",type:"text",placeholder:"Date of Birth (yyyy/mm/dd)","onUpdate:modelValue":I[3]||(I[3]=x=>c.value=x),required:""},null,512),[[re,c.value]]),Mt(A("select",{class:"modal_input inter font_size_xs","onUpdate:modelValue":I[4]||(I[4]=x=>h.value=x)},[I[7]||(I[7]=A("option",{disabled:"",value:""},"Please select one",-1)),(G(),K(Et,null,Jt(g,x=>A("option",{key:x.value,value:x.value},dt(x.text),9,cN)),64))],512),[[Kn,h.value]]),Mt(A("select",{class:"modal_input inter font_size_xs","onUpdate:modelValue":I[5]||(I[5]=x=>o.value=x)},[I[8]||(I[8]=A("option",{disabled:"",value:""},"Select your country",-1)),(G(!0),K(Et,null,Jt(r.value,x=>(G(),K("option",{key:x.cca3,value:x.cca3},dt(x.name.common),9,uN))),128))],512),[[Kn,o.value]]),I[9]||(I[9]=A("button",{type:"submit",class:"modal_button inter font_size_xs"},"Confirm",-1))],32)])]),f.value?(G(),rs(Qr,{key:0,errorMessage:d.value,onClose:C},null,8,["errorMessage"])):pe("",!0)]))}},s_=Ne(hN,[["__scopeId","data-v-f21fc2c6"]]),yE="/assets/brown_man-DU8HBBmE.png",vE="/assets/blonde_man-Br_WNAu2.png",bE="/assets/ginger_man-D_7vVZja.png",wE="/assets/black_man-DZoPS0-N.png",EE="/assets/brunette_woman-C5YdWLXO.png",TE="/assets/blonde_woman-IP-2iqnM.png",IE="/assets/ginger_woman-5AupqmXa.png",AE="/assets/black_woman-QP95zNq-.png",Yh="/assets/none-BOBk4slU.png",dN={class:"modal_overlay",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},fN={class:"modal_holder"},pN={id:"modal-title",class:"modal_heading_holder inter font_size_xs"},gN={class:"modal_content_holder inter font_size_xs"},mN=["onClick"],_N=["onClick"],yN={__name:"profileAvatar",props:{globalUser:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=rn(),s=Lt(()=>[{label:"Brown Hair",url:yE,ref:"brown_man"},{label:"Blonde Hair",url:vE,ref:"blonde_man"},{label:"Ginger Hair",url:bE,ref:"ginger_man"},{label:"Black Hair",url:wE,ref:"black_man"},{label:"Brown Hair Woman",url:EE,ref:"brown_woman"},{label:"Blonde Hair Woman",url:TE,ref:"blonde_woman"},{label:"Ginger Hair Woman",url:IE,ref:"ginger_woman"},{label:"Black Hair Woman",url:AE,ref:"black_woman"},{label:"None",url:Yh,ref:"none"}]),i=t,r=e,o=Z("none"),a=c=>{o.value=c,localStorage.setItem("selectedAvatar",c)};cs(()=>{const c=localStorage.getItem("selectedAvatar");c&&(o.value=c)});const l=async()=>{const c=iu(),h=r.globalUser.userData,d=c.currentUser;await Tn(fe(ae,"users",h.uid||d.uid),{profileAvatar:o.value,profileEdited:kn()},{merge:!0}),n.userData.profileAvatar=o.value,localStorage.removeItem("selectedAvatar"),i("close")};return(c,h)=>(G(),K("div",dN,[A("div",fN,[A("div",pN,[h[1]||(h[1]=A("span",{style:{width:"80%"}},"Profile Avatar",-1)),A("button",{class:"modal_close_button",onClick:h[0]||(h[0]=d=>c.$emit("close"))},"")]),A("div",gN,[(G(!0),K(Et,null,Jt(s.value,d=>(G(),K("div",{class:"modal_avatars_holder",key:d.ref},[d.ref===o.value?(G(),K("div",{key:0,class:"modal_avatar_selected",onClick:f=>a(d.ref),style:ss({backgroundImage:`url(${d.url})`,backgroundSize:"100% 100%",backgroundPosition:"center center",backgroundRepeat:"no-repeat"})},null,12,mN)):(G(),K("div",{key:1,class:"modal_avatar",onClick:f=>a(d.ref),style:ss({backgroundImage:`url(${d.url})`,backgroundSize:"100% 100%",backgroundPosition:"center center",backgroundRepeat:"no-repeat"})},null,12,_N))]))),128))]),A("button",{type:"submit",class:"modal_button inter font_size_xs",onClick:l}," Confirm ")])]))}},i_=Ne(yN,[["__scopeId","data-v-f54a08c5"]]),vN={class:"profile_container"},bN={class:"profile_header"},wN={class:"profile_edit_btn"},EN={class:"profile_info"},TN={class:"profile_avatar_wrapper"},IN={class:"pfp_edit_button"},AN={class:"profile_user_details font_size_s inter"},SN={class:"font_size_xxs"},RN={class:"profile_stats"},CN=["onClick"],xN={class:"profile_stat_top inter font_size_xs"},kN={key:0,class:"profile_stat_value"},PN={key:0},DN={key:1},ON={key:1,class:"profile_stat_value"},MN={class:"profile_stat_icon"},NN={class:"profile_stat_label inter font_size_xs"},VN={__name:"profile",emits:["setPage"],setup(e,{emit:t}){const n=Ei(),s=rn();s.fetchUserData();const i=Z(!1),r=Z(!1),o=Z(!1),a=Z(null),l={brown_man:yE,blonde_man:vE,ginger_man:bE,black_man:wE,brown_woman:EE,blonde_woman:TE,ginger_woman:IE,black_woman:AE,none:Yh},c=Lt(()=>{const W=s.userData?.profileAvatar||"none";return l[W]||Yh}),h=Lt(()=>s.userData?.personalInfo.name||""),d=Lt(()=>s.userData?.personalInfo.email||""),f=Lt(()=>s.userData?.streak?.count||0),g=Lt(()=>s.userData?.subscription||"Free"),_=Lt(()=>s.journalData&&s.journalData.length||0),y=Lt(()=>[{label:"Very Sad",ref:"very_sad",icon:"far fa-sad-tear"},{label:"Sad",ref:"sad",icon:"far fa-frown"},{label:"Neutral",ref:"neutral",icon:"far fa-meh"},{label:"Happy",ref:"happy",icon:"far fa-grin"},{label:"Very Happy",ref:"very_happy",icon:"far fa-grin-beam"}]),b=Z([{label:"App Streak",value:f.value,icon:"fa fa-signal"},{label:"Journal Entries",value:_.value,icon:"fa fa-book"},{label:"Mood Overview",value:"",icon:"fas fa-chart-line"},{label:"Subscription",value:g,icon:"fas fa-money-bill-wave"}]);cs(()=>{a.value=s.userData;const W=new Date().toISOString().split("T")[0];if(!s.moodData||!s.moodData[W])return;i.value=!0;const E=s.moodData[W];for(const v of y.value)if(v.ref===E.mood){b.value[2].value=v.icon;break}});const C=()=>{r.value=!0},R=async()=>{await T1(gn),n.push({name:"Login"})},I=()=>{o.value=!0},x=W=>{console.log("Image selected:",W.target.files[0])},L=W=>{W.label=="Mood Overview"?n.push({name:"MoodTrends"}):W.label==="Journal Entries"&&n.push({name:"Journal"})};return(W,E)=>(G(),K(Et,null,[A("div",vN,[A("div",bN,[E[5]||(E[5]=A("div",{class:"profile_title font_size_s inter"},null,-1)),A("div",wN,[A("i",{class:"fas fa-edit",onClick:E[0]||(E[0]=v=>C())}),A("i",{class:"fas fa-sign-out-alt",onClick:E[1]||(E[1]=v=>R())})])]),A("div",EN,[A("div",TN,[A("div",{class:"profile_avatar",style:ss({backgroundImage:`url(${c.value})`,backgroundSize:"100% 100%",backgroundPosition:"center center",backgroundRepeat:"no-repeat"})},null,4)]),A("div",IN,[A("i",{class:"fas fa-edit",onClick:E[2]||(E[2]=v=>I())}),A("input",{type:"file",ref:"fileInput",style:{display:"none"},accept:"image/*",onChange:x},null,544)]),A("div",AN,[ee(dt(h.value)+" ",1),A("span",SN,dt(d.value),1)])]),A("div",RN,[(G(!0),K(Et,null,Jt(b.value,(v,T)=>(G(),K("div",{class:"profile_stat_card",key:T,onClick:P=>L(v)},[A("div",xN,[v.label==="Mood Overview"?(G(),K("div",kN,[i.value?(G(),K("div",PN,[A("i",{class:_n(v.value),style:{"font-size":"1.5rem"}},null,2),E[6]||(E[6]=ee(" ",-1))])):(G(),K("div",DN,[...E[7]||(E[7]=[A("i",{class:"far fa-meh",style:{"font-size":"1.5rem"}},null,-1),ee(" ",-1)])]))])):(G(),K("div",ON,dt(v.value),1)),A("div",MN,[A("i",{class:_n(v.icon),style:{color:"#87bfba"}},null,2)])]),A("div",NN,dt(v.label),1)],8,CN))),128))])]),r.value?(G(),rs(s_,{key:0,onClose:E[3]||(E[3]=v=>r.value=!1),globalUser:Gn(s),viewPoint:s_},null,8,["globalUser"])):pe("",!0),o.value?(G(),rs(i_,{key:1,onClose:E[4]||(E[4]=v=>o.value=!1),globalUser:Gn(s),viewPoint:i_},null,8,["globalUser"])):pe("",!0)],64))}},LN=Ne(VN,[["__scopeId","data-v-5c1f3922"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Na(e){return e+.5|0}const ti=(e,t,n)=>Math.max(Math.min(e,n),t);function xo(e){return ti(Na(e*2.55),0,255)}function ci(e){return ti(Na(e*255),0,255)}function ys(e){return ti(Na(e/2.55)/100,0,1)}function r_(e){return ti(Na(e*100),0,100)}const yn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Qh=[..."0123456789ABCDEF"],FN=e=>Qh[e&15],UN=e=>Qh[(e&240)>>4]+Qh[e&15],il=e=>(e&240)>>4===(e&15),BN=e=>il(e.r)&&il(e.g)&&il(e.b)&&il(e.a);function jN(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&yn[e[1]]*17,g:255&yn[e[2]]*17,b:255&yn[e[3]]*17,a:t===5?yn[e[4]]*17:255}:(t===7||t===9)&&(n={r:yn[e[1]]<<4|yn[e[2]],g:yn[e[3]]<<4|yn[e[4]],b:yn[e[5]]<<4|yn[e[6]],a:t===9?yn[e[7]]<<4|yn[e[8]]:255})),n}const $N=(e,t)=>e<255?t(e):"";function zN(e){var t=BN(e)?FN:UN;return e?"#"+t(e.r)+t(e.g)+t(e.b)+$N(e.a,t):void 0}const HN=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function SE(e,t,n){const s=t*Math.min(n,1-n),i=(r,o=(r+e/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function WN(e,t,n){const s=(i,r=(i+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function qN(e,t,n){const s=SE(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)s[i]*=1-t-n,s[i]+=t;return s}function GN(e,t,n,s,i){return e===i?(t-n)/s+(t<n?6:0):t===i?(n-e)/s+2:(e-t)/s+4}function bf(e){const n=e.r/255,s=e.g/255,i=e.b/255,r=Math.max(n,s,i),o=Math.min(n,s,i),a=(r+o)/2;let l,c,h;return r!==o&&(h=r-o,c=a>.5?h/(2-r-o):h/(r+o),l=GN(n,s,i,h,r),l=l*60+.5),[l|0,c||0,a]}function wf(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(ci)}function Ef(e,t,n){return wf(SE,e,t,n)}function KN(e,t,n){return wf(qN,e,t,n)}function YN(e,t,n){return wf(WN,e,t,n)}function RE(e){return(e%360+360)%360}function QN(e){const t=HN.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?xo(+t[5]):ci(+t[5]));const i=RE(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=KN(i,r,o):t[1]==="hsv"?s=YN(i,r,o):s=Ef(i,r,o),{r:s[0],g:s[1],b:s[2],a:n}}function XN(e,t){var n=bf(e);n[0]=RE(n[0]+t),n=Ef(n),e.r=n[0],e.g=n[1],e.b=n[2]}function JN(e){if(!e)return;const t=bf(e),n=t[0],s=r_(t[1]),i=r_(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${i}%, ${ys(e.a)})`:`hsl(${n}, ${s}%, ${i}%)`}const o_={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},a_={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function ZN(){const e={},t=Object.keys(a_),n=Object.keys(o_);let s,i,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],i=0;i<n.length;i++)r=n[i],a=a.replace(r,o_[r]);r=parseInt(a_[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let rl;function tV(e){rl||(rl=ZN(),rl.transparent=[0,0,0,0]);const t=rl[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const eV=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function nV(e){const t=eV.exec(e);let n=255,s,i,r;if(t){if(t[7]!==s){const o=+t[7];n=t[8]?xo(o):ti(o*255,0,255)}return s=+t[1],i=+t[3],r=+t[5],s=255&(t[2]?xo(s):ti(s,0,255)),i=255&(t[4]?xo(i):ti(i,0,255)),r=255&(t[6]?xo(r):ti(r,0,255)),{r:s,g:i,b:r,a:n}}}function sV(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${ys(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Ju=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,ur=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function iV(e,t,n){const s=ur(ys(e.r)),i=ur(ys(e.g)),r=ur(ys(e.b));return{r:ci(Ju(s+n*(ur(ys(t.r))-s))),g:ci(Ju(i+n*(ur(ys(t.g))-i))),b:ci(Ju(r+n*(ur(ys(t.b))-r))),a:e.a+n*(t.a-e.a)}}function ol(e,t,n){if(e){let s=bf(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=Ef(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function CE(e,t){return e&&Object.assign(t||{},e)}function l_(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=ci(e[3]))):(t=CE(e,{r:0,g:0,b:0,a:1}),t.a=ci(t.a)),t}function rV(e){return e.charAt(0)==="r"?nV(e):QN(e)}class pa{constructor(t){if(t instanceof pa)return t;const n=typeof t;let s;n==="object"?s=l_(t):n==="string"&&(s=jN(t)||tV(t)||rV(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=CE(this._rgb);return t&&(t.a=ys(t.a)),t}set rgb(t){this._rgb=l_(t)}rgbString(){return this._valid?sV(this._rgb):void 0}hexString(){return this._valid?zN(this._rgb):void 0}hslString(){return this._valid?JN(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,i=t.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=s.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,s.r=255&c*s.r+r*i.r+.5,s.g=255&c*s.g+r*i.g+.5,s.b=255&c*s.b+r*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=iV(this._rgb,t._rgb,n)),this}clone(){return new pa(this.rgb)}alpha(t){return this._rgb.a=ci(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Na(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return ol(this._rgb,2,t),this}darken(t){return ol(this._rgb,2,-t),this}saturate(t){return ol(this._rgb,1,t),this}desaturate(t){return ol(this._rgb,1,-t),this}rotate(t){return XN(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ps(){}const oV=(()=>{let e=0;return()=>e++})();function He(e){return e==null}function Oe(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ot(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Ms(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Fn(e,t){return Ms(e)?e:t}function jt(e,t){return typeof e>"u"?t:e}const aV=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,xE=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Yt(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Bt(e,t,n,s){let i,r,o;if(Oe(e))for(r=e.length,i=0;i<r;i++)t.call(n,e[i],i);else if(Ot(e))for(o=Object.keys(e),r=o.length,i=0;i<r;i++)t.call(n,e[o[i]],o[i])}function dc(e,t){let n,s,i,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(i=e[n],r=t[n],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function fc(e){if(Oe(e))return e.map(fc);if(Ot(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let i=0;for(;i<s;++i)t[n[i]]=fc(e[n[i]]);return t}return e}function kE(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function lV(e,t,n,s){if(!kE(e))return;const i=t[e],r=n[e];Ot(i)&&Ot(r)?ga(i,r,s):t[e]=fc(r)}function ga(e,t,n){const s=Oe(t)?t:[t],i=s.length;if(!Ot(e))return e;n=n||{};const r=n.merger||lV;let o;for(let a=0;a<i;++a){if(o=s[a],!Ot(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)r(l[c],e,o,n)}return e}function Yo(e,t){return ga(e,t,{merger:cV})}function cV(e,t,n){if(!kE(e))return;const s=t[e],i=n[e];Ot(s)&&Ot(i)?Yo(s,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=fc(i))}const c_={"":e=>e,x:e=>e.x,y:e=>e.y};function uV(e){const t=e.split("."),n=[];let s="";for(const i of t)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function hV(e){const t=uV(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function ma(e,t){return(c_[t]||(c_[t]=hV(t)))(e)}function Tf(e){return e.charAt(0).toUpperCase()+e.slice(1)}const pc=e=>typeof e<"u",wi=e=>typeof e=="function",u_=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function dV(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Xt=Math.PI,me=2*Xt,gc=Number.POSITIVE_INFINITY,fV=Xt/180,we=Xt/2,Oi=Xt/4,h_=Xt*2/3,d_=Math.sign;function pV(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((i,r)=>i-r).pop(),t}function gV(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function mc(e){return!gV(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function ji(e){return e*(Xt/180)}function mV(e){return e*(180/Xt)}function PE(e,t){const n=t.x-e.x,s=t.y-e.y,i=Math.sqrt(n*n+s*s);let r=Math.atan2(s,n);return r<-.5*Xt&&(r+=me),{angle:r,distance:i}}function _V(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function zn(e){return(e%me+me)%me}function _c(e,t,n,s){const i=zn(e),r=zn(t),o=zn(n),a=zn(r-i),l=zn(o-i),c=zn(i-r),h=zn(i-o);return i===r||i===o||s&&r===o||a>l&&c<h}function bn(e,t,n){return Math.max(t,Math.min(n,e))}function yV(e){return bn(e,-32768,32767)}function ko(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function If(e,t,n){n=n||(o=>e[o]<t);let s=e.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,n(r)?i=r:s=r;return{lo:i,hi:s}}const Xh=(e,t,n,s)=>If(e,n,s?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),vV=(e,t,n)=>If(e,n,s=>e[s][t]>=n);function bV(e,t,n){let s=0,i=e.length;for(;s<i&&e[s]<t;)s++;for(;i>s&&e[i-1]>n;)i--;return s>0||i<e.length?e.slice(s,i):e}const DE=["push","pop","shift","splice","unshift"];function wV(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),DE.forEach(n=>{const s="_onData"+Tf(n),i=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function f_(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,i=s.indexOf(t);i!==-1&&s.splice(i,1),!(s.length>0)&&(DE.forEach(r=>{delete e[r]}),delete e._chartjs)}function EV(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const OE=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function ME(e,t){let n=[],s=!1;return function(...i){n=i,s||(s=!0,OE.call(window,()=>{s=!1,e.apply(t,n)}))}}function TV(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const NE=e=>e==="start"?"left":e==="end"?"right":"center",un=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,IV=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t,al=e=>e===0||e===1,p_=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*me/n)),g_=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*me/n)+1,Qo={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*we)+1,easeOutSine:e=>Math.sin(e*we),easeInOutSine:e=>-.5*(Math.cos(Xt*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>al(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>al(e)?e:p_(e,.075,.3),easeOutElastic:e=>al(e)?e:g_(e,.075,.3),easeInOutElastic(e){return al(e)?e:e<.5?.5*p_(e*2,.1125,.45):.5+.5*g_(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Qo.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Qo.easeInBounce(e*2)*.5:Qo.easeOutBounce(e*2-1)*.5+.5};function VE(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function m_(e){return VE(e)?e:new pa(e)}function Zu(e){return VE(e)?e:new pa(e).saturate(.5).darken(.1).hexString()}const AV=["x","y","borderWidth","radius","tension"],SV=["color","borderColor","backgroundColor"];function RV(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:SV},numbers:{type:"number",properties:AV}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function CV(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const __=new Map;function xV(e,t){t=t||{};const n=e+JSON.stringify(t);let s=__.get(n);return s||(s=new Intl.NumberFormat(e,t),__.set(n,s)),s}function kV(e,t,n){return xV(t,n).format(e)}const PV={values(e){return Oe(e)?e:""+e}};var DV={formatters:PV};function OV(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:DV.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Ji=Object.create(null),Jh=Object.create(null);function Xo(e,t){if(!t)return e;const n=t.split(".");for(let s=0,i=n.length;s<i;++s){const r=n[s];e=e[r]||(e[r]=Object.create(null))}return e}function th(e,t,n){return typeof t=="string"?ga(Xo(e,t),n):ga(Xo(e,""),t)}class MV{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>Zu(i.backgroundColor),this.hoverBorderColor=(s,i)=>Zu(i.borderColor),this.hoverColor=(s,i)=>Zu(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return th(this,t,n)}get(t){return Xo(this,t)}describe(t,n){return th(Jh,t,n)}override(t,n){return th(Ji,t,n)}route(t,n,s,i){const r=Xo(this,t),o=Xo(this,s),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Ot(l)?Object.assign({},c,l):jt(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(n=>n(this))}}var ce=new MV({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[RV,CV,OV]);function NV(e){return!e||He(e.size)||He(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function y_(e,t,n,s,i){let r=t[i];return r||(r=t[i]=e.measureText(i).width,n.push(i)),r>s&&(s=r),s}function Mi(e,t,n){const s=e.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((t-i)*s)/s+i}function v_(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function b_(e,t,n,s){LE(e,t,n,s,null)}function LE(e,t,n,s,i){let r,o,a,l,c,h,d,f;const g=t.pointStyle,_=t.rotation,y=t.radius;let b=(_||0)*fV;if(g&&typeof g=="object"&&(r=g.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(b),e.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),e.restore();return}if(!(isNaN(y)||y<=0)){switch(e.beginPath(),g){default:i?e.ellipse(n,s,i/2,y,0,0,me):e.arc(n,s,y,0,me),e.closePath();break;case"triangle":h=i?i/2:y,e.moveTo(n+Math.sin(b)*h,s-Math.cos(b)*y),b+=h_,e.lineTo(n+Math.sin(b)*h,s-Math.cos(b)*y),b+=h_,e.lineTo(n+Math.sin(b)*h,s-Math.cos(b)*y),e.closePath();break;case"rectRounded":c=y*.516,l=y-c,o=Math.cos(b+Oi)*l,d=Math.cos(b+Oi)*(i?i/2-c:l),a=Math.sin(b+Oi)*l,f=Math.sin(b+Oi)*(i?i/2-c:l),e.arc(n-d,s-a,c,b-Xt,b-we),e.arc(n+f,s-o,c,b-we,b),e.arc(n+d,s+a,c,b,b+we),e.arc(n-f,s+o,c,b+we,b+Xt),e.closePath();break;case"rect":if(!_){l=Math.SQRT1_2*y,h=i?i/2:l,e.rect(n-h,s-l,2*h,2*l);break}b+=Oi;case"rectRot":d=Math.cos(b)*(i?i/2:y),o=Math.cos(b)*y,a=Math.sin(b)*y,f=Math.sin(b)*(i?i/2:y),e.moveTo(n-d,s-a),e.lineTo(n+f,s-o),e.lineTo(n+d,s+a),e.lineTo(n-f,s+o),e.closePath();break;case"crossRot":b+=Oi;case"cross":d=Math.cos(b)*(i?i/2:y),o=Math.cos(b)*y,a=Math.sin(b)*y,f=Math.sin(b)*(i?i/2:y),e.moveTo(n-d,s-a),e.lineTo(n+d,s+a),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o);break;case"star":d=Math.cos(b)*(i?i/2:y),o=Math.cos(b)*y,a=Math.sin(b)*y,f=Math.sin(b)*(i?i/2:y),e.moveTo(n-d,s-a),e.lineTo(n+d,s+a),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o),b+=Oi,d=Math.cos(b)*(i?i/2:y),o=Math.cos(b)*y,a=Math.sin(b)*y,f=Math.sin(b)*(i?i/2:y),e.moveTo(n-d,s-a),e.lineTo(n+d,s+a),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o);break;case"line":o=i?i/2:Math.cos(b)*y,a=Math.sin(b)*y,e.moveTo(n-o,s-a),e.lineTo(n+o,s+a);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(b)*(i?i/2:y),s+Math.sin(b)*y);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function FE(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Af(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Sf(e){e.restore()}function VV(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),He(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function LV(e,t,n,s,i){if(i.strikethrough||i.underline){const r=e.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,h=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,h),e.lineTo(a,h),e.stroke()}}function FV(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function yc(e,t,n,s,i,r={}){const o=Oe(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(e.save(),e.font=i.string,VV(e,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&FV(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),He(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,n,s,r.maxWidth)),e.fillText(c,n,s,r.maxWidth),LV(e,n,s,c,r),s+=Number(i.lineHeight);e.restore()}function Zh(e,t){const{x:n,y:s,w:i,h:r,radius:o}=t;e.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*Xt,Xt,!0),e.lineTo(n,s+r-o.bottomLeft),e.arc(n+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,Xt,we,!0),e.lineTo(n+i-o.bottomRight,s+r),e.arc(n+i-o.bottomRight,s+r-o.bottomRight,o.bottomRight,we,0,!0),e.lineTo(n+i,s+o.topRight),e.arc(n+i-o.topRight,s+o.topRight,o.topRight,0,-we,!0),e.lineTo(n+o.topLeft,s)}const UV=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,BV=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function jV(e,t){const n=(""+e).match(UV);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const $V=e=>+e||0;function Rf(e,t){const n={},s=Ot(t),i=s?Object.keys(t):t,r=Ot(e)?s?o=>jt(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of i)n[o]=$V(r(o));return n}function zV(e){return Rf(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Jo(e){return Rf(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Mn(e){const t=zV(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function sn(e,t){e=e||{},t=t||ce.font;let n=jt(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=jt(e.style,t.style);s&&!(""+s).match(BV)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:jt(e.family,t.family),lineHeight:jV(jt(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:jt(e.weight,t.weight),string:""};return i.string=NV(i),i}function ll(e,t,n,s){let i,r,o;for(i=0,r=e.length;i<r;++i)if(o=e[i],o!==void 0&&o!==void 0)return o}function HV(e,t,n){const{min:s,max:i}=e,r=xE(t,(i-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(i,r)}}function Xr(e,t){return Object.assign(Object.create(e),t)}function Cf(e,t=[""],n,s,i=()=>e[0]){const r=n||e;typeof s>"u"&&(s=$E("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:s,_getTarget:i,override:a=>Cf([a,...e],t,r,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return BE(a,l,()=>JV(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return E_(a).includes(l)},ownKeys(a){return E_(a)},set(a,l,c){const h=a._storage||(a._storage=i());return a[l]=h[l]=c,delete a._keys,!0}})}function Ur(e,t,n,s){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:UE(e,s),setContext:r=>Ur(e,r,n,s),override:r=>Ur(e.override(r),t,n,s)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return BE(r,o,()=>qV(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function UE(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:s,isScriptable:wi(n)?n:()=>n,isIndexable:wi(s)?s:()=>s}}const WV=(e,t)=>e?e+Tf(t):t,xf=(e,t)=>Ot(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function BE(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=n();return e[t]=s,s}function qV(e,t,n){const{_proxy:s,_context:i,_subProxy:r,_descriptors:o}=e;let a=s[t];return wi(a)&&o.isScriptable(t)&&(a=GV(t,a,e,n)),Oe(a)&&a.length&&(a=KV(t,a,e,o.isIndexable)),xf(t,a)&&(a=Ur(a,i,r&&r[t],o)),a}function GV(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||s);return a.delete(e),xf(e,l)&&(l=kf(i._scopes,i,e,l)),l}function KV(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&s(e))return t[r.index%t.length];if(Ot(t[0])){const l=t,c=i._scopes.filter(h=>h!==l);t=[];for(const h of l){const d=kf(c,i,e,h);t.push(Ur(d,r,o&&o[e],a))}}return t}function jE(e,t,n){return wi(e)?e(t,n):e}const YV=(e,t)=>e===!0?t:typeof e=="string"?ma(t,e):void 0;function QV(e,t,n,s,i){for(const r of t){const o=YV(n,r);if(o){e.add(o);const a=jE(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function kf(e,t,n,s){const i=t._rootScopes,r=jE(t._fallback,n,s),o=[...e,...i],a=new Set;a.add(s);let l=w_(a,o,n,r||n,s);return l===null||typeof r<"u"&&r!==n&&(l=w_(a,o,r,l,s),l===null)?!1:Cf(Array.from(a),[""],i,r,()=>XV(t,n,s))}function w_(e,t,n,s,i){for(;n;)n=QV(e,t,n,s,i);return n}function XV(e,t,n){const s=e._getTarget();t in s||(s[t]={});const i=s[t];return Oe(i)&&Ot(n)?n:i||{}}function JV(e,t,n,s){let i;for(const r of t)if(i=$E(WV(r,e),n),typeof i<"u")return xf(e,i)?kf(n,s,e,i):i}function $E(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function E_(e){let t=e._keys;return t||(t=e._keys=ZV(e._scopes)),t}function ZV(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(i=>!i.startsWith("_")))t.add(s);return Array.from(t)}function Pf(){return typeof window<"u"&&typeof document<"u"}function Df(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function vc(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const ru=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function t2(e,t){return ru(e).getPropertyValue(t)}const e2=["top","right","bottom","left"];function Wi(e,t,n){const s={};n=n?"-"+n:"";for(let i=0;i<4;i++){const r=e2[i];s[r]=parseFloat(e[t+"-"+r+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const n2=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function s2(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:i,offsetY:r}=s;let o=!1,a,l;if(n2(i,r,e.target))a=i,l=r;else{const c=t.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Fi(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,i=ru(n),r=i.boxSizing==="border-box",o=Wi(i,"padding"),a=Wi(i,"border","width"),{x:l,y:c,box:h}=s2(e,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:g,height:_}=t;return r&&(g-=o.width+a.width,_-=o.height+a.height),{x:Math.round((l-d)/g*n.width/s),y:Math.round((c-f)/_*n.height/s)}}function i2(e,t,n){let s,i;if(t===void 0||n===void 0){const r=e&&Df(e);if(!r)t=e.clientWidth,n=e.clientHeight;else{const o=r.getBoundingClientRect(),a=ru(r),l=Wi(a,"border","width"),c=Wi(a,"padding");t=o.width-c.width-l.width,n=o.height-c.height-l.height,s=vc(a.maxWidth,r,"clientWidth"),i=vc(a.maxHeight,r,"clientHeight")}}return{width:t,height:n,maxWidth:s||gc,maxHeight:i||gc}}const ei=e=>Math.round(e*10)/10;function r2(e,t,n,s){const i=ru(e),r=Wi(i,"margin"),o=vc(i.maxWidth,e,"clientWidth")||gc,a=vc(i.maxHeight,e,"clientHeight")||gc,l=i2(e,t,n);let{width:c,height:h}=l;if(i.boxSizing==="content-box"){const f=Wi(i,"border","width"),g=Wi(i,"padding");c-=g.width+f.width,h-=g.height+f.height}return c=Math.max(0,c-r.width),h=Math.max(0,s?c/s:h-r.height),c=ei(Math.min(c,o,l.maxWidth)),h=ei(Math.min(h,a,l.maxHeight)),c&&!h&&(h=ei(c/2)),(t!==void 0||n!==void 0)&&s&&l.height&&h>l.height&&(h=l.height,c=ei(Math.floor(h*s))),{width:c,height:h}}function T_(e,t,n){const s=t||1,i=ei(e.height*s),r=ei(e.width*s);e.height=ei(e.height),e.width=ei(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==i||o.width!==r?(e.currentDevicePixelRatio=s,o.height=i,o.width=r,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const o2=(function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Pf()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e})();function I_(e,t){const n=t2(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}const a2=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},l2=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Rr(e,t,n){return e?a2(t,n):l2()}function zE(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function HE(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function cl(e,t,n){return e.options.clip?e[n]:t[n]}function c2(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:cl(n,t,"left"),right:cl(n,t,"right"),top:cl(s,t,"top"),bottom:cl(s,t,"bottom")}:t}function u2(e,t){const n=t._clip;if(n.disabled)return!1;const s=c2(t,e.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class h2{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,i){const r=n.listeners[i],o=n.duration;r.forEach(a=>a({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=OE.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,s,t,"progress")),r.length||(s.running=!1,this._notify(i,s,t,"complete"),s.initial=!1),n+=r.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var gs=new h2;const A_="transparent",d2={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=m_(e||A_),i=s.valid&&m_(t||A_);return i&&i.valid?i.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class f2{constructor(t,n,s,i){const r=n[s];i=ll([t.to,i,r,t.from]);const o=ll([t.from,r,i]);this._active=!0,this._fn=t.fn||d2[t.type||typeof o],this._easing=Qo[t.easing]||Qo.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=ll([t.to,n,i,t.from]),this._from=ll([t.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<s),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=r;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][n]()}}class WE{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Ot(t))return;const n=Object.keys(ce.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!Ot(r))return;const o={};for(const a of n)o[a]=r[a];(Oe(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,n){const s=n.options,i=g2(t,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&p2(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,n){const s=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,n));continue}const h=n[c];let d=r[c];const f=s.get(c);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){t[c]=h;continue}r[c]=d=new f2(f,t,c,h),i.push(d)}return i}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return gs.add(this._chart,s),!0}}function p2(e,t){const n=[],s=Object.keys(t);for(let i=0;i<s.length;i++){const r=e[s[i]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function g2(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function S_(e,t){const n=e&&e.options||{},s=n.reverse,i=n.min===void 0?t:0,r=n.max===void 0?t:0;return{start:s?r:i,end:s?i:r}}function m2(e,t,n){if(n===!1)return!1;const s=S_(e,n),i=S_(t,n);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function _2(e){let t,n,s,i;return Ot(e)?(t=e.top,n=e.right,s=e.bottom,i=e.left):t=n=s=i=e,{top:t,right:n,bottom:s,left:i,disabled:e===!1}}function qE(e,t){const n=[],s=e._getSortedDatasetMetas(t);let i,r;for(i=0,r=s.length;i<r;++i)n.push(s[i].index);return n}function R_(e,t,n,s={}){const i=e.keys,r=s.mode==="single";let o,a,l,c;if(t===null)return;let h=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(h=!0,s.all)continue;break}c=e.values[l],Ms(c)&&(r||t===0||d_(t)===d_(c))&&(t+=c)}return!h&&!s.all?0:t}function y2(e,t){const{iScale:n,vScale:s}=t,i=n.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[i]:h,[r]:e[h]};return a}function eh(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function v2(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function b2(e){const{min:t,max:n,minDefined:s,maxDefined:i}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function w2(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function C_(e,t,n,s){for(const i of t.getMatchingVisibleMetas(s).reverse()){const r=e[i.index];if(n&&r>0||!n&&r<0)return i.index}return null}function x_(e,t){const{chart:n,_cachedMeta:s}=e,i=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,c=o.axis,h=v2(r,o,s),d=t.length;let f;for(let g=0;g<d;++g){const _=t[g],{[l]:y,[c]:b}=_,C=_._stacks||(_._stacks={});f=C[c]=w2(i,h,y),f[a]=b,f._top=C_(f,o,!0,s.type),f._bottom=C_(f,o,!1,s.type);const R=f._visualValues||(f._visualValues={});R[a]=b}}function nh(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function E2(e,t){return Xr(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function T2(e,t,n){return Xr(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function _o(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const i of t){const r=i._stacks;if(!r||r[s]===void 0||r[s][n]===void 0)return;delete r[s][n],r[s]._visualValues!==void 0&&r[s]._visualValues[n]!==void 0&&delete r[s]._visualValues[n]}}}const sh=e=>e==="reset"||e==="none",k_=(e,t)=>t?e:Object.assign({},e),I2=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:qE(n,!0),values:null};class GE{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=eh(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&_o(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),i=(d,f,g,_)=>d==="x"?f:d==="r"?_:g,r=n.xAxisID=jt(s.xAxisID,nh(t,"x")),o=n.yAxisID=jt(s.yAxisID,nh(t,"y")),a=n.rAxisID=jt(s.rAxisID,nh(t,"r")),l=n.indexAxis,c=n.iAxisID=i(l,r,o,a),h=n.vAxisID=i(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&f_(this._data,this),t._stacked&&_o(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(Ot(n)){const i=this._cachedMeta;this._data=y2(n,i)}else if(s!==n){if(s){f_(s,this);const i=this._cachedMeta;_o(i),i._parsed=[]}n&&Object.isExtensible(n)&&wV(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=n._stacked;n._stacked=eh(n.vScale,n),n.stack!==s.stack&&(i=!0,_o(n),n.stack=s.stack),this._resyncElements(t),(i||r!==n._stacked)&&(x_(this,n._parsed),n._stacked=eh(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:o}=s,a=r.axis;let l=t===0&&n===i.length?!0:s._sorted,c=t>0&&s._parsed[t-1],h,d,f;if(this._parsing===!1)s._parsed=i,s._sorted=!0,f=i;else{Oe(i[t])?f=this.parseArrayData(s,i,t,n):Ot(i[t])?f=this.parseObjectData(s,i,t,n):f=this.parsePrimitiveData(s,i,t,n);const g=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<n;++h)s._parsed[h+t]=d=f[h],l&&(g()&&(l=!1),c=d);s._sorted=l}o&&x_(this,f)}parsePrimitiveData(t,n,s,i){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),h=r===o,d=new Array(i);let f,g,_;for(f=0,g=i;f<g;++f)_=f+s,d[f]={[a]:h||r.parse(c[_],_),[l]:o.parse(n[_],_)};return d}parseArrayData(t,n,s,i){const{xScale:r,yScale:o}=t,a=new Array(i);let l,c,h,d;for(l=0,c=i;l<c;++l)h=l+s,d=n[h],a[l]={x:r.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(t,n,s,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let h,d,f,g;for(h=0,d=i;h<d;++h)f=h+s,g=n[f],c[h]={x:r.parse(ma(g,a),f),y:o.parse(ma(g,l),f)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const i=this.chart,r=this._cachedMeta,o=n[t.axis],a={keys:qE(i,!0),values:n._stacks[t.axis]._visualValues};return R_(a,o,r.index,{mode:s})}updateRangeFromParsed(t,n,s,i){const r=s[n.axis];let o=r===null?NaN:r;const a=i&&s._stacks[n.axis];i&&a&&(i.values=a,o=R_(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&t===s.iScale,o=i.length,a=this._getOtherScale(t),l=I2(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=b2(a);let f,g;function _(){g=i[f];const y=g[a.axis];return!Ms(g[t.axis])||h>y||d<y}for(f=0;f<o&&!(!_()&&(this.updateRangeFromParsed(c,t,g,l),r));++f);if(r){for(f=o-1;f>=0;--f)if(!_()){this.updateRangeFromParsed(c,t,g,l);break}}return c}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let i,r,o;for(i=0,r=n.length;i<r;++i)o=n[i][t.axis],Ms(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,i=n.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=_2(jt(this.options.clip,m2(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,i=s.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let h;for(s.dataset&&s.dataset.draw(t,r,a,l),h=a;h<a+l;++h){const d=i[h];d.hidden||(d.active&&c?o.push(d):d.draw(t,r))}for(h=0;h<o.length;++h)o[h].draw(t,r)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=T2(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=E2(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const i=n==="active",r=this._cachedDataOpts,o=t+"-"+n,a=r[o],l=this.enableOptionSharing&&pc(s);if(a)return k_(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,t),d=i?[`${t}Hover`,"hover",t,""]:[t,""],f=c.getOptionScopes(this.getDataset(),h),g=Object.keys(ce.elements[t]),_=()=>this.getContext(s,i,n),y=c.resolveNamedOptions(f,g,_,d);return y.$shared&&(y.$shared=l,r[o]=Object.freeze(k_(y,l))),y}_resolveAnimations(t,n,s){const i=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(i.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(t,s,n))}const c=new WE(i,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||sh(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),i=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(n,r)||r!==i;return this.updateSharedOptions(r,n,s),{sharedOptions:r,includeOptions:o}}updateElement(t,n,s,i){sh(i)?Object.assign(t,s):this._resolveAnimations(n,i).update(t,s)}updateSharedOptions(t,n,s){t&&!sh(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,i){t.active=i;const r=this.getStyle(n,i);this._resolveAnimations(n,s,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=s.length,r=n.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,n,s=!0){const i=this._cachedMeta,r=i.data,o=t+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,n),s&&this.updateElements(r,t,n,"reset")}updateElements(t,n,s,i){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(t,n);s._stacked&&_o(s,i)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,i]=t;this[n](s,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function A2(e,t,n){let s=1,i=1,r=0,o=0;if(t<me){const a=e,l=a+t,c=Math.cos(a),h=Math.sin(a),d=Math.cos(l),f=Math.sin(l),g=(I,x,L)=>_c(I,a,l,!0)?1:Math.max(x,x*n,L,L*n),_=(I,x,L)=>_c(I,a,l,!0)?-1:Math.min(x,x*n,L,L*n),y=g(0,c,d),b=g(we,h,f),C=_(Xt,c,d),R=_(Xt+we,h,f);s=(y-C)/2,i=(b-R)/2,r=-(y+C)/2,o=-(b+R)/2}return{ratioX:s,ratioY:i,offsetX:r,offsetY:o}}class S2 extends GE{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data,{labels:{pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=t.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,c)=>{const d=t.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:d.backgroundColor,fontColor:r,hidden:!t.getDataVisibility(c),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:i,pointStyle:s,borderRadius:o&&(a||d.borderRadius),index:c}}):[]}},onClick(t,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}};constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let r=l=>+s[l];if(Ot(s[t])){const{key:l="value"}=this._parsing;r=c=>+ma(s[c],l)}let o,a;for(o=t,a=t+n;o<a;++o)i._parsed[o]=r(o)}}_getRotation(){return ji(this.options.rotation-90)}_getCircumference(){return ji(this.options.circumference)}_getRotationExtents(){let t=me,n=-me;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),n=Math.max(n,r+o)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:s}=n,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(aV(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:g,offsetX:_,offsetY:y}=A2(d,h,l),b=(s.width-o)/f,C=(s.height-o)/g,R=Math.max(Math.min(b,C)/2,0),I=xE(this.options.radius,R),x=Math.max(I*l,0),L=(I-x)/this._getVisibleDatasetWeightTotal();this.offsetX=_*I,this.offsetY=y*I,i.total=this.calculateTotal(),this.outerRadius=I-L*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-L*c,0),this.updateElements(r,0,r.length,t)}_circumference(t,n){const s=this.options,i=this._cachedMeta,r=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/me)}updateElements(t,n,s,i){const r=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,h=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=r&&c.animateScale,g=f?0:this.innerRadius,_=f?0:this.outerRadius,{sharedOptions:y,includeOptions:b}=this._getSharedOptions(n,i);let C=this._getRotation(),R;for(R=0;R<n;++R)C+=this._circumference(R,r);for(R=n;R<n+s;++R){const I=this._circumference(R,r),x=t[R],L={x:h+this.offsetX,y:d+this.offsetY,startAngle:C,endAngle:C+I,circumference:I,outerRadius:_,innerRadius:g};b&&(L.options=y||this.resolveDataElementOptions(R,x.active?"active":i)),C+=I,this.updateElement(x,R,L,i)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let s=0,i;for(i=0;i<n.length;i++){const r=t._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?me*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=kV(n._parsed[t],s.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let n=0;const s=this.chart;let i,r,o,a,l;if(!t){for(i=0,r=s.data.datasets.length;i<r;++i)if(s.isDatasetVisible(i)){o=s.getDatasetMeta(i),t=o.data,a=o.controller;break}}if(!t)return 0;for(i=0,r=t.length;i<r;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let s=0,i=t.length;s<i;++s){const r=this.resolveDataElementOptions(s);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(t){return Math.max(jt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class R2 extends S2{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Ni(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Of{static override(t){Object.assign(Of.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Ni()}parse(){return Ni()}format(){return Ni()}add(){return Ni()}diff(){return Ni()}startOf(){return Ni()}endOf(){return Ni()}}var C2={_date:Of};function x2(e,t,n,s){const{controller:i,data:r,_sorted:o}=e,a=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const c=a._reversePixels?vV:Xh;if(s){if(i._sharedOptions){const h=r[0],d=typeof h.getRange=="function"&&h.getRange(t);if(d){const f=c(r,t,n-d),g=c(r,t,n+d);return{lo:f.lo,hi:g.hi}}}}else{const h=c(r,t,n);if(l){const{vScale:d}=i._cachedMeta,{_parsed:f}=e,g=f.slice(0,h.lo+1).reverse().findIndex(y=>!He(y[d.axis]));h.lo-=Math.max(0,g);const _=f.slice(h.hi).findIndex(y=>!He(y[d.axis]));h.hi+=Math.max(0,_)}return h}}return{lo:0,hi:r.length-1}}function ou(e,t,n,s,i){const r=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:h}=r[a],{lo:d,hi:f}=x2(r[a],t,o,i);for(let g=d;g<=f;++g){const _=h[g];_.skip||s(_,c,g)}}}function k2(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,i){const r=t?Math.abs(s.x-i.x):0,o=n?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function ih(e,t,n,s,i){const r=[];return!i&&!e.isPointInArea(t)||ou(e,n,t,function(a,l,c){!i&&!FE(a,e.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function P2(e,t,n,s){let i=[];function r(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],s),{angle:d}=PE(o,{x:t.x,y:t.y});_c(d,c,h)&&i.push({element:o,datasetIndex:a,index:l})}return ou(e,n,t,r),i}function D2(e,t,n,s,i,r){let o=[];const a=k2(n);let l=Number.POSITIVE_INFINITY;function c(h,d,f){const g=h.inRange(t.x,t.y,i);if(s&&!g)return;const _=h.getCenterPoint(i);if(!(!!r||e.isPointInArea(_))&&!g)return;const b=a(t,_);b<l?(o=[{element:h,datasetIndex:d,index:f}],l=b):b===l&&o.push({element:h,datasetIndex:d,index:f})}return ou(e,n,t,c),o}function rh(e,t,n,s,i,r){return!r&&!e.isPointInArea(t)?[]:n==="r"&&!s?P2(e,t,n,i):D2(e,t,n,s,i,r)}function P_(e,t,n,s,i){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return ou(e,n,t,(l,c,h)=>{l[o]&&l[o](t[n],i)&&(r.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(t.x,t.y,i))}),s&&!a?[]:r}var O2={modes:{index(e,t,n,s){const i=Fi(t,e),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?ih(e,i,r,s,o):rh(e,i,r,!1,s,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(e,t,n,s){const i=Fi(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?ih(e,i,r,s,o):rh(e,i,r,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(e,t,n,s){const i=Fi(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return ih(e,i,r,s,o)},nearest(e,t,n,s){const i=Fi(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return rh(e,i,r,n.intersect,s,o)},x(e,t,n,s){const i=Fi(t,e);return P_(e,i,"x",n.intersect,s)},y(e,t,n,s){const i=Fi(t,e);return P_(e,i,"y",n.intersect,s)}}};const KE=["left","top","right","bottom"];function yo(e,t){return e.filter(n=>n.pos===t)}function D_(e,t){return e.filter(n=>KE.indexOf(n.pos)===-1&&n.box.axis===t)}function vo(e,t){return e.sort((n,s)=>{const i=t?s:n,r=t?n:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function M2(e){const t=[];let n,s,i,r,o,a;for(n=0,s=(e||[]).length;n<s;++n)i=e[n],{position:r,options:{stack:o,stackWeight:a=1}}=i,t.push({index:n,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return t}function N2(e){const t={};for(const n of e){const{stack:s,pos:i,stackWeight:r}=n;if(!s||!KE.includes(i))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function V2(e,t){const n=N2(e),{vBoxMaxWidth:s,hBoxMaxHeight:i}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*s:l&&t.availableWidth,a.height=i):(a.width=s,a.height=h?h*i:l&&t.availableHeight)}return n}function L2(e){const t=M2(e),n=vo(t.filter(c=>c.box.fullSize),!0),s=vo(yo(t,"left"),!0),i=vo(yo(t,"right")),r=vo(yo(t,"top"),!0),o=vo(yo(t,"bottom")),a=D_(t,"x"),l=D_(t,"y");return{fullSize:n,leftAndTop:s.concat(r),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:yo(t,"chartArea"),vertical:s.concat(i).concat(l),horizontal:r.concat(o).concat(a)}}function O_(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function YE(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function F2(e,t,n,s){const{pos:i,box:r}=n,o=e.maxPadding;if(!Ot(i)){n.size&&(e[i]-=n.size);const d=s[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?r.height:r.width),n.size=d.size/d.count,e[i]+=n.size}r.getPadding&&YE(o,r.getPadding());const a=Math.max(0,t.outerWidth-O_(o,e,"left","right")),l=Math.max(0,t.outerHeight-O_(o,e,"top","bottom")),c=a!==e.w,h=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function U2(e){const t=e.maxPadding;function n(s){const i=Math.max(t[s]-e[s],0);return e[s]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function B2(e,t){const n=t.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(t[o],n[o])}),r}return s(e?["left","right"]:["top","bottom"])}function Po(e,t,n,s){const i=[];let r,o,a,l,c,h;for(r=0,o=e.length,c=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,B2(a.horizontal,t));const{same:d,other:f}=F2(t,n,a,s);c|=d&&i.length,h=h||f,l.fullSize||i.push(a)}return c&&Po(i,t,n,s)||h}function ul(e,t,n,s,i){e.top=n,e.left=t,e.right=t+s,e.bottom=n+i,e.width=s,e.height=i}function M_(e,t,n,s){const i=n.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,c=s[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=t.w*h,f=c.size||l.height;pc(c.start)&&(o=c.start),l.fullSize?ul(l,i.left,o,n.outerWidth-i.right-i.left,f):ul(l,t.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=t.h*h,f=c.size||l.width;pc(c.start)&&(r=c.start),l.fullSize?ul(l,r,i.top,f,n.outerHeight-i.bottom-i.top):ul(l,r,t.top+c.placed,f,d),c.start=r,c.placed+=d,r=l.right}}t.x=r,t.y=o}var ni={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const i=Mn(e.options.layout.padding),r=Math.max(t-i.width,0),o=Math.max(n-i.height,0),a=L2(e.boxes),l=a.vertical,c=a.horizontal;Bt(e.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const h=l.reduce((y,b)=>b.box.options&&b.box.options.display===!1?y:y+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},i);YE(f,Mn(s));const g=Object.assign({maxPadding:f,w:r,h:o,x:i.left,y:i.top},i),_=V2(l.concat(c),d);Po(a.fullSize,g,d,_),Po(l,g,d,_),Po(c,g,d,_)&&Po(l,g,d,_),U2(g),M_(a.leftAndTop,g,d,_),g.x+=g.w,g.y+=g.h,M_(a.rightAndBottom,g,d,_),e.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},Bt(a.chartArea,y=>{const b=y.box;Object.assign(b,e.chartArea),b.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class QE{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,i){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,i?Math.floor(n/i):s)}}isAttached(t){return!0}updateConfig(t){}}class j2 extends QE{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Pl="$chartjs",$2={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},N_=e=>e===null||e==="";function z2(e,t){const n=e.style,s=e.getAttribute("height"),i=e.getAttribute("width");if(e[Pl]={initial:{height:s,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",N_(i)){const r=I_(e,"width");r!==void 0&&(e.width=r)}if(N_(s))if(e.style.height==="")e.height=e.width/(t||2);else{const r=I_(e,"height");r!==void 0&&(e.height=r)}return e}const XE=o2?{passive:!0}:!1;function H2(e,t,n){e&&e.addEventListener(t,n,XE)}function W2(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,XE)}function q2(e,t){const n=$2[e.type]||e.type,{x:s,y:i}=Fi(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:i!==void 0?i:null}}function bc(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function G2(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||bc(a.addedNodes,s),o=o&&!bc(a.removedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function K2(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||bc(a.removedNodes,s),o=o&&!bc(a.addedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const _a=new Map;let V_=0;function JE(){const e=window.devicePixelRatio;e!==V_&&(V_=e,_a.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function Y2(e,t){_a.size||window.addEventListener("resize",JE),_a.set(e,t)}function Q2(e){_a.delete(e),_a.size||window.removeEventListener("resize",JE)}function X2(e,t,n){const s=e.canvas,i=s&&Df(s);if(!i)return;const r=ME((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||r(c,h)});return o.observe(i),Y2(e,r),o}function oh(e,t,n){n&&n.disconnect(),t==="resize"&&Q2(e)}function J2(e,t,n){const s=e.canvas,i=ME(r=>{e.ctx!==null&&n(q2(r,e))},e);return H2(s,t,i),i}class Z2 extends QE{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(z2(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[Pl])return!1;const s=n[Pl].initial;["height","width"].forEach(r=>{const o=s[r];He(o)?n.removeAttribute(r):n.setAttribute(r,o)});const i=s.style||{};return Object.keys(i).forEach(r=>{n.style[r]=i[r]}),n.width=n.width,delete n[Pl],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const i=t.$proxies||(t.$proxies={}),o={attach:G2,detach:K2,resize:X2}[n]||J2;i[n]=o(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),i=s[n];if(!i)return;({attach:oh,detach:oh,resize:oh}[n]||W2)(t,n,i),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,i){return r2(t,n,s,i)}isAttached(t){const n=t&&Df(t);return!!(n&&n.isConnected)}}function tL(e){return!Pf()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?j2:Z2}let Va=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return mc(this.x)&&mc(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const i={};return t.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}};function eL(e,t){const n=e.options.ticks,s=nL(e),i=Math.min(n.maxTicksLimit||s,s),r=n.major.enabled?iL(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>i)return rL(t,c,r,o/i),c;const h=sL(r,t,i);if(o>0){let d,f;const g=o>1?Math.round((l-a)/(o-1)):null;for(hl(t,c,h,He(g)?0:a-g,a),d=0,f=o-1;d<f;d++)hl(t,c,h,r[d],r[d+1]);return hl(t,c,h,l,He(g)?t.length:l+g),c}return hl(t,c,h),c}function nL(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(s,i))}function sL(e,t,n){const s=oL(e),i=t.length/n;if(!s)return Math.max(i,1);const r=pV(s);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>i)return l}return Math.max(i,1)}function iL(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function rL(e,t,n,s){let i=0,r=n[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===r&&(t.push(e[o]),i++,r=n[i*s])}function hl(e,t,n,s,i){const r=jt(s,0),o=Math.min(jt(i,e.length),e.length);let a=0,l,c,h;for(n=Math.ceil(n),i&&(l=i-s,n=l/Math.floor(l/n)),h=r;h<0;)a++,h=Math.round(r+a*n);for(c=Math.max(r,0);c<o;c++)c===h&&(t.push(e[c]),a++,h=Math.round(r+a*n))}function oL(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const aL=e=>e==="left"?"right":e==="right"?"left":e,L_=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,F_=(e,t)=>Math.min(t||e,e);function U_(e,t){const n=[],s=e.length/t,i=e.length;let r=0;for(;r<i;r+=s)n.push(e[Math.floor(r)]);return n}function lL(e,t,n){const s=e.ticks.length,i=Math.min(t,s-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(i),c;if(!(n&&(s===1?c=Math.max(l-r,o-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<r-a||l>o+a)))return l}function cL(e,t){Bt(e,n=>{const s=n.gc,i=s.length/2;let r;if(i>t){for(r=0;r<i;++r)delete n.data[s[r]];s.splice(0,i)}})}function bo(e){return e.drawTicks?e.tickLength:0}function B_(e,t){if(!e.display)return 0;const n=sn(e.font,t),s=Mn(e.padding);return(Oe(e.text)?e.text.length:1)*n.lineHeight+s.height}function uL(e,t){return Xr(e,{scale:t,type:"scale"})}function hL(e,t,n){return Xr(e,{tick:n,index:t,type:"tick"})}function dL(e,t,n){let s=NE(e);return(n&&t!=="right"||!n&&t==="right")&&(s=aL(s)),s}function fL(e,t,n,s){const{top:i,left:r,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:h}=l;let d=0,f,g,_;const y=o-i,b=a-r;if(e.isHorizontal()){if(g=un(s,r,a),Ot(n)){const C=Object.keys(n)[0],R=n[C];_=h[C].getPixelForValue(R)+y-t}else n==="center"?_=(c.bottom+c.top)/2+y-t:_=L_(e,n,t);f=a-r}else{if(Ot(n)){const C=Object.keys(n)[0],R=n[C];g=h[C].getPixelForValue(R)-b+t}else n==="center"?g=(c.left+c.right)/2-b+t:g=L_(e,n,t);_=un(s,o,i),d=n==="left"?-we:we}return{titleX:g,titleY:_,maxWidth:f,rotation:d}}class au extends Va{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:i}=this;return t=Fn(t,Number.POSITIVE_INFINITY),n=Fn(n,Number.NEGATIVE_INFINITY),s=Fn(s,Number.POSITIVE_INFINITY),i=Fn(i,Number.NEGATIVE_INFINITY),{min:Fn(t,s),max:Fn(n,i),minDefined:Ms(t),maxDefined:Ms(n)}}getMinMax(t){let{min:n,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),i||(n=Math.min(n,o.min)),r||(s=Math.max(s,o.max));return n=r&&n>s?s:n,s=i&&n>s?n:s,{min:Fn(n,Fn(s,n)),max:Fn(s,Fn(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Yt(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=HV(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?U_(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=eL(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Yt(this.options.afterUpdate,[this])}beforeSetDimensions(){Yt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Yt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Yt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Yt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,i,r;for(s=0,i=t.length;s<i;s++)r=t[s],r.label=Yt(n.callback,[r.value,s,t],this)}afterTickToLabelConversion(){Yt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Yt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=F_(this.ticks.length,t.ticks.maxTicksLimit),i=n.minRotation||0,r=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,g=bn(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/s:g/(s-1),d+6>a&&(a=g/(s-(t.offset?.5:1)),l=this.maxHeight-bo(t.grid)-n.padding-B_(t.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=mV(Math.min(Math.asin(bn((h.highest.height+6)/a,-1,1)),Math.asin(bn(l/c,-1,1))-Math.asin(bn(f/c,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Yt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Yt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=B_(i,n.options.font);if(a?(t.width=this.maxWidth,t.height=bo(r)+l):(t.height=this.maxHeight,t.width=bo(r)+l),s.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:f}=this._getLabelSizes(),g=s.padding*2,_=ji(this.labelRotation),y=Math.cos(_),b=Math.sin(_);if(a){const C=s.mirror?0:b*d.width+y*f.height;t.height=Math.min(this.maxHeight,t.height+C+g)}else{const C=s.mirror?0:y*d.width+b*f.height;t.width=Math.min(this.maxWidth,t.width+C+g)}this._calculatePadding(c,h,b,y)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,i){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,g=0;l?c?(f=i*t.width,g=s*n.height):(f=s*t.height,g=i*n.width):r==="start"?g=n.width:r==="end"?f=t.width:r!=="inner"&&(f=t.width/2,g=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=t.height/2;r==="start"?(h=0,d=t.height):r==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Yt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)He(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=U_(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(n/F_(n,s));let c=0,h=0,d,f,g,_,y,b,C,R,I,x,L;for(d=0;d<n;d+=l){if(_=t[d].label,y=this._resolveTickFontOptions(d),i.font=b=y.string,C=r[b]=r[b]||{data:{},gc:[]},R=y.lineHeight,I=x=0,!He(_)&&!Oe(_))I=y_(i,C.data,C.gc,I,_),x=R;else if(Oe(_))for(f=0,g=_.length;f<g;++f)L=_[f],!He(L)&&!Oe(L)&&(I=y_(i,C.data,C.gc,I,L),x+=R);o.push(I),a.push(x),c=Math.max(I,c),h=Math.max(x,h)}cL(r,n);const W=o.indexOf(c),E=a.indexOf(h),v=T=>({width:o[T]||0,height:a[T]||0});return{first:v(0),last:v(n-1),widest:v(W),highest:v(E),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return yV(this._alignToPixels?Mi(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=hL(this.getContext(),t,s))}return this.$context||(this.$context=uL(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=ji(this.labelRotation),s=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*i?a/s:l/i:l*i<a*s?l/s:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,i=this.options,{grid:r,position:o,border:a}=i,l=r.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=bo(r),g=[],_=a.setContext(this.getContext()),y=_.display?_.width:0,b=y/2,C=function(ht){return Mi(s,ht,y)};let R,I,x,L,W,E,v,T,P,D,M,S;if(o==="top")R=C(this.bottom),E=this.bottom-f,T=R-b,D=C(t.top)+b,S=t.bottom;else if(o==="bottom")R=C(this.top),D=t.top,S=C(t.bottom)-b,E=R+b,T=this.top+f;else if(o==="left")R=C(this.right),W=this.right-f,v=R-b,P=C(t.left)+b,M=t.right;else if(o==="right")R=C(this.left),P=t.left,M=C(t.right)-b,W=R+b,v=this.left+f;else if(n==="x"){if(o==="center")R=C((t.top+t.bottom)/2+.5);else if(Ot(o)){const ht=Object.keys(o)[0],X=o[ht];R=C(this.chart.scales[ht].getPixelForValue(X))}D=t.top,S=t.bottom,E=R+b,T=E+f}else if(n==="y"){if(o==="center")R=C((t.left+t.right)/2);else if(Ot(o)){const ht=Object.keys(o)[0],X=o[ht];R=C(this.chart.scales[ht].getPixelForValue(X))}W=R-b,v=W-f,P=t.left,M=t.right}const It=jt(i.ticks.maxTicksLimit,d),yt=Math.max(1,Math.ceil(d/It));for(I=0;I<d;I+=yt){const ht=this.getContext(I),X=r.setContext(ht),U=a.setContext(ht),tt=X.lineWidth,Gt=X.color,Te=U.dash||[],Zt=U.dashOffset,Ge=X.tickWidth,ye=X.tickColor,Ce=X.tickBorderDash||[],te=X.tickBorderDashOffset;x=lL(this,I,l),x!==void 0&&(L=Mi(s,x,tt),c?W=v=P=M=L:E=T=D=S=L,g.push({tx1:W,ty1:E,tx2:v,ty2:T,x1:P,y1:D,x2:M,y2:S,width:tt,color:Gt,borderDash:Te,borderDashOffset:Zt,tickWidth:Ge,tickColor:ye,tickBorderDash:Ce,tickBorderDashOffset:te}))}return this._ticksLength=d,this._borderValue=R,g}_computeLabelItems(t){const n=this.axis,s=this.options,{position:i,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=r,f=bo(s.grid),g=f+h,_=d?-h:g,y=-ji(this.labelRotation),b=[];let C,R,I,x,L,W,E,v,T,P,D,M,S="middle";if(i==="top")W=this.bottom-_,E=this._getXAxisLabelAlignment();else if(i==="bottom")W=this.top+_,E=this._getXAxisLabelAlignment();else if(i==="left"){const yt=this._getYAxisLabelAlignment(f);E=yt.textAlign,L=yt.x}else if(i==="right"){const yt=this._getYAxisLabelAlignment(f);E=yt.textAlign,L=yt.x}else if(n==="x"){if(i==="center")W=(t.top+t.bottom)/2+g;else if(Ot(i)){const yt=Object.keys(i)[0],ht=i[yt];W=this.chart.scales[yt].getPixelForValue(ht)+g}E=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")L=(t.left+t.right)/2-g;else if(Ot(i)){const yt=Object.keys(i)[0],ht=i[yt];L=this.chart.scales[yt].getPixelForValue(ht)}E=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?S="top":l==="end"&&(S="bottom"));const It=this._getLabelSizes();for(C=0,R=a.length;C<R;++C){I=a[C],x=I.label;const yt=r.setContext(this.getContext(C));v=this.getPixelForTick(C)+r.labelOffset,T=this._resolveTickFontOptions(C),P=T.lineHeight,D=Oe(x)?x.length:1;const ht=D/2,X=yt.color,U=yt.textStrokeColor,tt=yt.textStrokeWidth;let Gt=E;o?(L=v,E==="inner"&&(C===R-1?Gt=this.options.reverse?"left":"right":C===0?Gt=this.options.reverse?"right":"left":Gt="center"),i==="top"?c==="near"||y!==0?M=-D*P+P/2:c==="center"?M=-It.highest.height/2-ht*P+P:M=-It.highest.height+P/2:c==="near"||y!==0?M=P/2:c==="center"?M=It.highest.height/2-ht*P:M=It.highest.height-D*P,d&&(M*=-1),y!==0&&!yt.showLabelBackdrop&&(L+=P/2*Math.sin(y))):(W=v,M=(1-D)*P/2);let Te;if(yt.showLabelBackdrop){const Zt=Mn(yt.backdropPadding),Ge=It.heights[C],ye=It.widths[C];let Ce=M-Zt.top,te=0-Zt.left;switch(S){case"middle":Ce-=Ge/2;break;case"bottom":Ce-=Ge;break}switch(E){case"center":te-=ye/2;break;case"right":te-=ye;break;case"inner":C===R-1?te-=ye:C>0&&(te-=ye/2);break}Te={left:te,top:Ce,width:ye+Zt.width,height:Ge+Zt.height,color:yt.backdropColor}}b.push({label:x,font:T,textOffset:M,options:{rotation:y,color:X,strokeColor:U,strokeWidth:tt,textAlign:Gt,textBaseline:S,translation:[L,W],backdrop:Te}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-ji(this.labelRotation))return t==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,h;return n==="left"?i?(h=this.right+r,s==="near"?c="left":s==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,s==="near"?c="right":s==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?i?(h=this.left+r,s==="near"?c="right":s==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,s==="near"?c="left":s==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:i,width:r,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,i,r,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(r=>r.value===t);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,h)=>{!h.width||!h.color||(s.save(),s.lineWidth=h.width,s.strokeStyle=h.color,s.setLineDash(h.borderDash||[]),s.lineDashOffset=h.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(r=0,o=i.length;r<o;++r){const l=i[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,f;this.isHorizontal()?(c=Mi(t,this.left,o)-o/2,h=Mi(t,this.right,a)+a/2,d=f=l):(d=Mi(t,this.top,o)-o/2,f=Mi(t,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&Af(s,i);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,h=o.textOffset;yc(s,c,0,h,l,a)}i&&Sf(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:i}}=this;if(!s.display)return;const r=sn(s.font),o=Mn(s.padding),a=s.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||Ot(n)?(l+=o.bottom,Oe(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:f}=fL(this,l,n,a);yc(t,s.text,0,0,r,{color:s.color,maxWidth:d,rotation:f,textAlign:dL(a,n,i),textBaseline:"middle",translation:[c,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=jt(t.grid&&t.grid.z,-1),i=jt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==au.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[s]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return sn(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class dl{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;mL(n)&&(s=this.register(n));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,pL(t,o,s),this.override&&ce.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,i=this.scope;s in n&&delete n[s],i&&s in ce[i]&&(delete ce[i][s],this.override&&delete Ji[s])}}function pL(e,t,n){const s=ga(Object.create(null),[n?ce.get(n):{},ce.get(t),e.defaults]);ce.set(t,s),e.defaultRoutes&&gL(t,e.defaultRoutes),e.descriptors&&ce.describe(t,e.descriptors)}function gL(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),i=s.pop(),r=[e].concat(s).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");ce.route(r,i,l,a)})}function mL(e){return"id"in e&&"defaults"in e}class _L{constructor(){this.controllers=new dl(GE,"datasets",!0),this.elements=new dl(Va,"elements"),this.plugins=new dl(Object,"plugins"),this.scales=new dl(au,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(t,r,i):Bt(i,o=>{const a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,n,s){const i=Tf(t);Yt(s["before"+i],[],s),n[t](s),Yt(s["after"+i],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const i=n.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return i}}var jn=new _L;class yL{constructor(){this._init=void 0}notify(t,n,s,i){if(n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,n,s);return n==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,n,s,i){i=i||{};for(const r of t){const o=r.plugin,a=o[s],l=[n,i,r.options];if(Yt(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){He(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,i=jt(s.options&&s.options.plugins,{}),r=vL(s);return i===!1&&!n?[]:wL(t,r,i,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,i=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,s),t,"stop"),this._notify(i(s,n),t,"start")}}function vL(e){const t={},n=[],s=Object.keys(jn.plugins.items);for(let r=0;r<s.length;r++)n.push(jn.getPlugin(s[r]));const i=e.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function bL(e,t){return!t&&e===!1?null:e===!0?{}:e}function wL(e,{plugins:t,localIds:n},s,i){const r=[],o=e.getContext();for(const a of t){const l=a.id,c=bL(s[l],i);c!==null&&r.push({plugin:a,options:EL(e.config,{plugin:a,local:n[l]},c,o)})}return r}function EL(e,{plugin:t,local:n},s,i){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(s,r);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function td(e,t){const n=ce.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function TL(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function IL(e,t){return e===t?"_index_":"_value_"}function j_(e){if(e==="x"||e==="y"||e==="r")return e}function AL(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function ed(e,...t){if(j_(e))return e;for(const n of t){const s=n.axis||AL(n.position)||e.length>1&&j_(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function $_(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function SL(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return $_(e,"x",n[0])||$_(e,"y",n[0])}return{}}function RL(e,t){const n=Ji[e.type]||{scales:{}},s=t.scales||{},i=td(e.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!Ot(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=ed(o,a,SL(o,e),ce.scales[a.type]),c=IL(l,i),h=n.scales||{};r[o]=Yo(Object.create(null),[{axis:l},a,h[l],h[c]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||td(a,t),h=(Ji[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=TL(d,l),g=o[f+"AxisID"]||f;r[g]=r[g]||Object.create(null),Yo(r[g],[{axis:f},s[g],h[d]])})}),Object.keys(r).forEach(o=>{const a=r[o];Yo(a,[ce.scales[a.type],ce.scale])}),r}function ZE(e){const t=e.options||(e.options={});t.plugins=jt(t.plugins,{}),t.scales=RL(e,t)}function tT(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function CL(e){return e=e||{},e.data=tT(e.data),ZE(e),e}const z_=new Map,eT=new Set;function fl(e,t){let n=z_.get(e);return n||(n=t(),z_.set(e,n),eT.add(n)),n}const wo=(e,t,n)=>{const s=ma(t,n);s!==void 0&&e.add(s)};class xL{constructor(t){this._config=CL(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=tT(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),ZE(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return fl(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return fl(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return fl(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return fl(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let i=s.get(t);return(!i||n)&&(i=new Map,s.set(t,i)),i}getOptionScopes(t,n,s){const{options:i,type:r}=this,o=this._cachedScopes(t,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{t&&(l.add(t),h.forEach(d=>wo(l,t,d))),h.forEach(d=>wo(l,i,d)),h.forEach(d=>wo(l,Ji[r]||{},d)),h.forEach(d=>wo(l,ce,d)),h.forEach(d=>wo(l,Jh,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),eT.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:t,type:n}=this;return[t,Ji[n]||{},ce.datasets[n]||{},{type:n},ce,Jh]}resolveNamedOptions(t,n,s,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=H_(this._resolverCache,t,i);let l=o;if(PL(o,n)){r.$shared=!1,s=wi(s)?s():s;const c=this.createResolver(t,s,a);l=Ur(o,s,c)}for(const c of n)r[c]=l[c];return r}createResolver(t,n,s=[""],i){const{resolver:r}=H_(this._resolverCache,t,s);return Ot(n)?Ur(r,n,void 0,i):r}}function H_(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const i=n.join();let r=s.get(i);return r||(r={resolver:Cf(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(i,r)),r}const kL=e=>Ot(e)&&Object.getOwnPropertyNames(e).some(t=>wi(e[t]));function PL(e,t){const{isScriptable:n,isIndexable:s}=UE(e);for(const i of t){const r=n(i),o=s(i),a=(o||r)&&e[i];if(r&&(wi(a)||kL(a))||o&&Oe(a))return!0}return!1}var DL="4.5.1";const OL=["top","bottom","left","right","chartArea"];function W_(e,t){return e==="top"||e==="bottom"||OL.indexOf(e)===-1&&t==="x"}function q_(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function G_(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Yt(n&&n.onComplete,[e],t)}function ML(e){const t=e.chart,n=t.options.animation;Yt(n&&n.onProgress,[e],t)}function nT(e){return Pf()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Dl={},K_=e=>{const t=nT(e);return Object.values(Dl).filter(n=>n.canvas===t).pop()};function NL(e,t,n){const s=Object.keys(e);for(const i of s){const r=+i;if(r>=t){const o=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=o)}}}function VL(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}class nd{static defaults=ce;static instances=Dl;static overrides=Ji;static registry=jn;static version=DL;static getChart=K_;static register(...t){jn.add(...t),Y_()}static unregister(...t){jn.remove(...t),Y_()}constructor(t,n){const s=this.config=new xL(n),i=nT(t),r=K_(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||tL(i)),this.platform.updateConfig(s);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=oV(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new yL,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=TV(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Dl[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}gs.listen(this,"complete",G_),gs.listen(this,"progress",ML),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:i,_aspectRatio:r}=this;return He(t)?n&&r?r:i?s/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return jn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():T_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return v_(this.canvas,this.ctx),this}stop(){return gs.stop(this),this}resize(t,n){gs.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,n,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,T_(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Yt(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Bt(n,(s,i)=>{s.id=i})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,i=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=ed(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),Bt(r,o=>{const a=o.options,l=a.id,c=ed(l,a),h=jt(a.type,o.dtype);(a.position===void 0||W_(a.position,c)!==W_(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in s&&s[l].type===h)d=s[l];else{const f=jn.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),s[d.id]=d}d.init(a,t)}),Bt(i,(o,a)=>{o||delete s[a]}),Bt(s,o=>{ni.configure(this,o,o.options),ni.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((i,r)=>i.index-r.index),s>n){for(let i=n;i<s;++i)this._destroyDatasetMeta(i);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(q_("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,i)=>{n.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=n.length;s<i;s++){const r=n[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||td(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=jn.getController(a),{datasetElementType:c,dataElementType:h}=ce.datasets[a];Object.assign(l,{dataElementType:jn.getElement(h),datasetElementType:c&&jn.getElement(c)}),o.controller=new l(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Bt(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),f=!i&&r.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||Bt(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(q_("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Bt(this.scales,t=>{ni.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!u_(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of n){const o=s==="_removeElements"?-r:r;NL(t,i,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=s(0);for(let r=1;r<n;r++)if(!u_(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ni.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],Bt(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,wi(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),i={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(gs.has(this)?this.attached&&!gs.running(this)&&gs.start(this):(this.draw(),G_({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let i,r;for(i=0,r=n.length;i<r;++i){const o=n[i];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s={meta:t,index:t.index,cancelable:!0},i=u2(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&Af(n,i),t.controller.draw(),i&&Sf(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return FE(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,i){const r=O2.modes[n];return typeof r=="function"?r(this,t,s,i):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let i=s.filter(r=>r&&r._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=Xr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const i=s?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);pc(n)?(r.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),gs.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),v_(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Dl[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(r,o)=>{n.addEventListener(this,r,o),t[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};Bt(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(l,c)=>{n.addEventListener(this,l,c),t[l]=c},i=(l,c)=>{t[l]&&(n.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Bt(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Bt(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const i=s?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!dc(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const i=this.options.hover,r=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=r(n,t),a=s?t:r(t,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},i=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:i=[],options:r}=this,o=n,a=this._getActiveElements(t,i,s,o),l=dV(t),c=VL(t,this._lastEvent,s,l);s&&(this._lastEvent=null,Yt(r.onHover,[t,a,this],this),l&&Yt(r.onClick,[t,a,this],this));const h=!dc(a,i);return(h||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,h}_getActiveElements(t,n,s,i){if(t.type==="mouseout")return[];if(!s)return n;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}}function Y_(){return Bt(nd.instances,e=>e._plugins.invalidate())}function LL(e,t,n){const{startAngle:s,x:i,y:r,outerRadius:o,innerRadius:a,options:l}=t,{borderWidth:c,borderJoinStyle:h}=l,d=Math.min(c/o,zn(s-n));if(e.beginPath(),e.arc(i,r,o-c/2,s+d/2,n-d/2),a>0){const f=Math.min(c/a,zn(s-n));e.arc(i,r,a+c/2,n-f/2,s+f/2,!0)}else{const f=Math.min(c/2,o*zn(s-n));if(h==="round")e.arc(i,r,f,n-Xt/2,s+Xt/2,!0);else if(h==="bevel"){const g=2*f*f,_=-g*Math.cos(n+Xt/2)+i,y=-g*Math.sin(n+Xt/2)+r,b=g*Math.cos(s+Xt/2)+i,C=g*Math.sin(s+Xt/2)+r;e.lineTo(_,y),e.lineTo(b,C)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function FL(e,t,n){const{startAngle:s,pixelMargin:i,x:r,y:o,outerRadius:a,innerRadius:l}=t;let c=i/a;e.beginPath(),e.arc(r,o,a,s-c,n+c),l>i?(c=i/l,e.arc(r,o,l,n+c,s-c,!0)):e.arc(r,o,i,n+we,s-we),e.closePath(),e.clip()}function UL(e){return Rf(e,["outerStart","outerEnd","innerStart","innerEnd"])}function BL(e,t,n,s){const i=UL(e.options.borderRadius),r=(n-t)/2,o=Math.min(r,s*t/2),a=l=>{const c=(n-Math.min(r,l))*s/2;return bn(l,0,Math.min(r,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:bn(i.innerStart,0,o),innerEnd:bn(i.innerEnd,0,o)}}function hr(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function wc(e,t,n,s,i,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=t,d=Math.max(t.outerRadius+s+n-c,0),f=h>0?h+s+n+c:0;let g=0;const _=i-l;if(s){const yt=h>0?h-s:0,ht=d>0?d-s:0,X=(yt+ht)/2,U=X!==0?_*X/(X+s):_;g=(_-U)/2}const y=Math.max(.001,_*d-n/Xt)/d,b=(_-y)/2,C=l+b+g,R=i-b-g,{outerStart:I,outerEnd:x,innerStart:L,innerEnd:W}=BL(t,f,d,R-C),E=d-I,v=d-x,T=C+I/E,P=R-x/v,D=f+L,M=f+W,S=C+L/D,It=R-W/M;if(e.beginPath(),r){const yt=(T+P)/2;if(e.arc(o,a,d,T,yt),e.arc(o,a,d,yt,P),x>0){const tt=hr(v,P,o,a);e.arc(tt.x,tt.y,x,P,R+we)}const ht=hr(M,R,o,a);if(e.lineTo(ht.x,ht.y),W>0){const tt=hr(M,It,o,a);e.arc(tt.x,tt.y,W,R+we,It+Math.PI)}const X=(R-W/f+(C+L/f))/2;if(e.arc(o,a,f,R-W/f,X,!0),e.arc(o,a,f,X,C+L/f,!0),L>0){const tt=hr(D,S,o,a);e.arc(tt.x,tt.y,L,S+Math.PI,C-we)}const U=hr(E,C,o,a);if(e.lineTo(U.x,U.y),I>0){const tt=hr(E,T,o,a);e.arc(tt.x,tt.y,I,C-we,T)}}else{e.moveTo(o,a);const yt=Math.cos(T)*d+o,ht=Math.sin(T)*d+a;e.lineTo(yt,ht);const X=Math.cos(P)*d+o,U=Math.sin(P)*d+a;e.lineTo(X,U)}e.closePath()}function jL(e,t,n,s,i){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){wc(e,t,n,s,l,i);for(let c=0;c<r;++c)e.fill();isNaN(a)||(l=o+(a%me||me))}return wc(e,t,n,s,l,i),e.fill(),l}function $L(e,t,n,s,i){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:h,borderDash:d,borderDashOffset:f,borderRadius:g}=l,_=l.borderAlign==="inner";if(!c)return;e.setLineDash(d||[]),e.lineDashOffset=f,_?(e.lineWidth=c*2,e.lineJoin=h||"round"):(e.lineWidth=c,e.lineJoin=h||"bevel");let y=t.endAngle;if(r){wc(e,t,n,s,y,i);for(let b=0;b<r;++b)e.stroke();isNaN(a)||(y=o+(a%me||me))}_&&FL(e,t,y),l.selfJoin&&y-o>=Xt&&g===0&&h!=="miter"&&LL(e,t,y),r||(wc(e,t,n,s,y,i),e.stroke())}class zL extends Va{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,n,s){const i=this.getProps(["x","y"],s),{angle:r,distance:o}=PE(i,{x:t,y:n}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),f=(this.options.spacing+this.options.borderWidth)/2,g=jt(d,l-a),_=_c(r,a,l)&&a!==l,y=g>=me||_,b=ko(o,c+f,h+f);return y&&b}getCenterPoint(t){const{x:n,y:s,startAngle:i,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:c}=this.options,h=(i+r)/2,d=(o+a+c+l)/2;return{x:n+Math.cos(h)*d,y:s+Math.sin(h)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:n,circumference:s}=this,i=(n.offset||0)/4,r=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>me?Math.floor(s/me):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*i,Math.sin(a)*i);const l=1-Math.sin(Math.min(Xt,s||0)),c=i*l;t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,jL(t,this,c,r,o),$L(t,this,c,r,o),t.restore()}}const Q_=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},HL=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class X_ extends Va{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Yt(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,i)=>t.sort(s,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,i=sn(s.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Q_(s,r);let c,h;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,r,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=i+a;let d=t;r.textAlign="left",r.textBaseline="middle";let f=-1,g=-h;return this.legendItems.forEach((_,y)=>{const b=s+n/2+r.measureText(_.text).width;(y===0||c[c.length-1]+b+2*a>o)&&(d+=h,c[c.length-(y>0?0:1)]=0,g+=h,f++),l[y]={left:0,top:g,row:f,width:b,height:i},c[c.length-1]+=b+a}),d}_fitCols(t,n,s,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-t;let d=a,f=0,g=0,_=0,y=0;return this.legendItems.forEach((b,C)=>{const{itemWidth:R,itemHeight:I}=WL(s,n,r,b,i);C>0&&g+I+2*a>h&&(d+=f+a,c.push({width:f,height:g}),_+=f+a,y++,f=g=0),l[C]={left:_,top:g,col:y,width:R,height:I},f=Math.max(f,R),g+=I+a}),d+=f,c.push({width:f,height:g}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:i},rtl:r}}=this,o=Rr(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=un(s,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=un(s,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+t+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=un(s,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=un(s,this.top+t+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Af(t,this),this._draw(),Sf(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:i}=this,{align:r,labels:o}=t,a=ce.color,l=Rr(t.rtl,this.left,this.width),c=sn(o.font),{padding:h}=o,d=c.size,f=d/2;let g;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:_,boxHeight:y,itemHeight:b}=Q_(o,d),C=function(W,E,v){if(isNaN(_)||_<=0||isNaN(y)||y<0)return;i.save();const T=jt(v.lineWidth,1);if(i.fillStyle=jt(v.fillStyle,a),i.lineCap=jt(v.lineCap,"butt"),i.lineDashOffset=jt(v.lineDashOffset,0),i.lineJoin=jt(v.lineJoin,"miter"),i.lineWidth=T,i.strokeStyle=jt(v.strokeStyle,a),i.setLineDash(jt(v.lineDash,[])),o.usePointStyle){const P={radius:y*Math.SQRT2/2,pointStyle:v.pointStyle,rotation:v.rotation,borderWidth:T},D=l.xPlus(W,_/2),M=E+f;LE(i,P,D,M,o.pointStyleWidth&&_)}else{const P=E+Math.max((d-y)/2,0),D=l.leftForLtr(W,_),M=Jo(v.borderRadius);i.beginPath(),Object.values(M).some(S=>S!==0)?Zh(i,{x:D,y:P,w:_,h:y,radius:M}):i.rect(D,P,_,y),i.fill(),T!==0&&i.stroke()}i.restore()},R=function(W,E,v){yc(i,v.text,W,E+b/2,c,{strikethrough:v.hidden,textAlign:l.textAlign(v.textAlign)})},I=this.isHorizontal(),x=this._computeTitleHeight();I?g={x:un(r,this.left+h,this.right-s[0]),y:this.top+h+x,line:0}:g={x:this.left+h,y:un(r,this.top+x+h,this.bottom-n[0].height),line:0},zE(this.ctx,t.textDirection);const L=b+h;this.legendItems.forEach((W,E)=>{i.strokeStyle=W.fontColor,i.fillStyle=W.fontColor;const v=i.measureText(W.text).width,T=l.textAlign(W.textAlign||(W.textAlign=o.textAlign)),P=_+f+v;let D=g.x,M=g.y;l.setWidth(this.width),I?E>0&&D+P+h>this.right&&(M=g.y+=L,g.line++,D=g.x=un(r,this.left+h,this.right-s[g.line])):E>0&&M+L>this.bottom&&(D=g.x=D+n[g.line].width+h,g.line++,M=g.y=un(r,this.top+x+h,this.bottom-n[g.line].height));const S=l.x(D);if(C(S,M,W),D=IV(T,D+_+f,I?D+P:this.right,t.rtl),R(l.x(D),M,W),I)g.x+=P+h;else if(typeof W.text!="string"){const It=c.lineHeight;g.y+=sT(W,It)+h}else g.y+=L}),HE(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=sn(n.font),i=Mn(n.padding);if(!n.display)return;const r=Rr(t.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,c=i.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+c,d=un(t.align,d,this.right-f);else{const _=this.columnSizes.reduce((y,b)=>Math.max(y,b.height),0);h=c+un(t.align,this.top,this.bottom-_-t.labels.padding-this._computeTitleHeight())}const g=un(a,d,d+f);o.textAlign=r.textAlign(NE(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,yc(o,n.text,g,h,s)}_computeTitleHeight(){const t=this.options.title,n=sn(t.font),s=Mn(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,i,r;if(ko(t,this.left,this.right)&&ko(n,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],ko(t,i.left,i.left+i.width)&&ko(n,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!KL(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,r=HL(i,s);i&&!r&&Yt(n.onLeave,[t,i,this],this),this._hoveredItem=s,s&&!r&&Yt(n.onHover,[t,s,this],this)}else s&&Yt(n.onClick,[t,s,this],this)}}function WL(e,t,n,s,i){const r=qL(s,e,t,n),o=GL(i,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function qL(e,t,n,s){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),t+n.size/2+s.measureText(i).width}function GL(e,t,n){let s=e;return typeof t.text!="string"&&(s=sT(t,n)),s}function sT(e,t){const n=e.text?e.text.length:0;return t*n}function KL(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var YL={id:"legend",_element:X_,start(e,t,n){const s=e.legend=new X_({ctx:e.ctx,options:n,chart:e});ni.configure(e,s,n),ni.addBox(e,s)},stop(e){ni.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;ni.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,i=n.chart;i.isDatasetVisible(s)?(i.hide(s),t.hidden=!0):(i.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=Mn(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};const Do={average(e){if(!e.length)return!1;let t,n,s=new Set,i=0,r=0;for(t=0,n=e.length;t<n;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),i+=l.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:i/r}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=_V(t,c);h<i&&(i=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function Un(e,t){return t&&(Oe(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function ms(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function QL(e,t){const{element:n,datasetIndex:s,index:i}=t,r=e.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:e,label:o,parsed:r.getParsed(i),raw:e.data.datasets[s].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:n}}function J_(e,t){const n=e.chart.ctx,{body:s,footer:i,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=sn(t.bodyFont),c=sn(t.titleFont),h=sn(t.footerFont),d=r.length,f=i.length,g=s.length,_=Mn(t.padding);let y=_.height,b=0,C=s.reduce((x,L)=>x+L.before.length+L.lines.length+L.after.length,0);if(C+=e.beforeBody.length+e.afterBody.length,d&&(y+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),C){const x=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;y+=g*x+(C-g)*l.lineHeight+(C-1)*t.bodySpacing}f&&(y+=t.footerMarginTop+f*h.lineHeight+(f-1)*t.footerSpacing);let R=0;const I=function(x){b=Math.max(b,n.measureText(x).width+R)};return n.save(),n.font=c.string,Bt(e.title,I),n.font=l.string,Bt(e.beforeBody.concat(e.afterBody),I),R=t.displayColors?o+2+t.boxPadding:0,Bt(s,x=>{Bt(x.before,I),Bt(x.lines,I),Bt(x.after,I)}),R=0,n.font=h.string,Bt(e.footer,I),n.restore(),b+=_.width,{width:b,height:y}}function XL(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function JL(e,t,n,s){const{x:i,width:r}=s,o=n.caretSize+n.caretPadding;if(e==="left"&&i+r+o>t.width||e==="right"&&i-r-o<0)return!0}function ZL(e,t,n,s){const{x:i,width:r}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return s==="center"?c=i<=(a+l)/2?"left":"right":i<=r/2?c="left":i>=o-r/2&&(c="right"),JL(c,e,t,n)&&(c="center"),c}function Z_(e,t,n){const s=n.yAlign||t.yAlign||XL(e,n);return{xAlign:n.xAlign||t.xAlign||ZL(e,t,n,s),yAlign:s}}function tF(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function eF(e,t,n){let{y:s,height:i}=e;return t==="top"?s+=n:t==="bottom"?s-=i+n:s-=i/2,s}function ty(e,t,n,s){const{caretSize:i,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=i+r,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:g}=Jo(o);let _=tF(t,a);const y=eF(t,l,c);return l==="center"?a==="left"?_+=c:a==="right"&&(_-=c):a==="left"?_-=Math.max(h,f)+i:a==="right"&&(_+=Math.max(d,g)+i),{x:bn(_,0,s.width-t.width),y:bn(y,0,s.height-t.height)}}function pl(e,t,n){const s=Mn(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function ey(e){return Un([],ms(e))}function nF(e,t,n){return Xr(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function ny(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const iT={beforeTitle:ps,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:ps,beforeBody:ps,beforeLabel:ps,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return He(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ps,afterBody:ps,beforeFooter:ps,footer:ps,afterFooter:ps};function Ze(e,t,n,s){const i=e[t].call(n,s);return typeof i>"u"?iT[t].call(n,s):i}class sy extends Va{static positioners=Do;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&n.options.animation&&s.animations,r=new WE(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=nF(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,i=Ze(s,"beforeTitle",this,t),r=Ze(s,"title",this,t),o=Ze(s,"afterTitle",this,t);let a=[];return a=Un(a,ms(i)),a=Un(a,ms(r)),a=Un(a,ms(o)),a}getBeforeBody(t,n){return ey(Ze(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,i=[];return Bt(t,r=>{const o={before:[],lines:[],after:[]},a=ny(s,r);Un(o.before,ms(Ze(a,"beforeLabel",this,r))),Un(o.lines,Ze(a,"label",this,r)),Un(o.after,ms(Ze(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(t,n){return ey(Ze(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,i=Ze(s,"beforeFooter",this,t),r=Ze(s,"footer",this,t),o=Ze(s,"afterFooter",this,t);let a=[];return a=Un(a,ms(i)),a=Un(a,ms(r)),a=Un(a,ms(o)),a}_createItems(t){const n=this._active,s=this.chart.data,i=[],r=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(QL(this.chart,n[l]));return t.filter&&(a=a.filter((h,d,f)=>t.filter(h,d,f,s))),t.itemSort&&(a=a.sort((h,d)=>t.itemSort(h,d,s))),Bt(a,h=>{const d=ny(t.callbacks,h);i.push(Ze(d,"labelColor",this,h)),r.push(Ze(d,"labelPointStyle",this,h)),o.push(Ze(d,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,n){const s=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=Do[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=J_(this,s),c=Object.assign({},a,l),h=Z_(this.chart,s,c),d=ty(s,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,i){const r=this.getCaretPosition(t,s,i);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(t,n,s){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=Jo(a),{x:f,y:g}=t,{width:_,height:y}=n;let b,C,R,I,x,L;return r==="center"?(x=g+y/2,i==="left"?(b=f,C=b-o,I=x+o,L=x-o):(b=f+_,C=b+o,I=x-o,L=x+o),R=b):(i==="left"?C=f+Math.max(l,h)+o:i==="right"?C=f+_-Math.max(c,d)-o:C=this.caretX,r==="top"?(I=g,x=I-o,b=C-o,R=C+o):(I=g+y,x=I+o,b=C+o,R=C-o),L=I),{x1:b,x2:C,x3:R,y1:I,y2:x,y3:L}}drawTitle(t,n,s){const i=this.title,r=i.length;let o,a,l;if(r){const c=Rr(s.rtl,this.x,this.width);for(t.x=pl(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",o=sn(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(i[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,n,s,i,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=r,h=sn(r.bodyFont),d=pl(this,"left",r),f=i.x(d),g=l<h.lineHeight?(h.lineHeight-l)/2:0,_=n.y+g;if(r.usePointStyle){const y={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=i.leftForLtr(f,c)+c/2,C=_+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,b_(t,y,b,C),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,b_(t,y,b,C)}else{t.lineWidth=Ot(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const y=i.leftForLtr(f,c),b=i.leftForLtr(i.xPlus(f,1),c-2),C=Jo(o.borderRadius);Object.values(C).some(R=>R!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Zh(t,{x:y,y:_,w:c,h:l,radius:C}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Zh(t,{x:b,y:_+1,w:c-2,h:l-2,radius:C}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(y,_,c,l),t.strokeRect(y,_,c,l),t.fillStyle=o.backgroundColor,t.fillRect(b,_+1,c-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=s,d=sn(s.bodyFont);let f=d.lineHeight,g=0;const _=Rr(s.rtl,this.x,this.width),y=function(v){n.fillText(v,_.x(t.x+g),t.y+f/2),t.y+=f+r},b=_.textAlign(o);let C,R,I,x,L,W,E;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,t.x=pl(this,b,s),n.fillStyle=s.bodyColor,Bt(this.beforeBody,y),g=a&&b!=="right"?o==="center"?c/2+h:c+2+h:0,x=0,W=i.length;x<W;++x){for(C=i[x],R=this.labelTextColors[x],n.fillStyle=R,Bt(C.before,y),I=C.lines,a&&I.length&&(this._drawColorBox(n,t,x,_,s),f=Math.max(d.lineHeight,l)),L=0,E=I.length;L<E;++L)y(I[L]),f=d.lineHeight;Bt(C.after,y)}g=0,f=d.lineHeight,Bt(this.afterBody,y),t.y-=r}drawFooter(t,n,s){const i=this.footer,r=i.length;let o,a;if(r){const l=Rr(s.rtl,this.x,this.width);for(t.x=pl(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=sn(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(i[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,n,s,i){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:h}=s,{topLeft:d,topRight:f,bottomLeft:g,bottomRight:_}=Jo(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(t,n,s,i),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&r==="right"&&this.drawCaret(t,n,s,i),n.lineTo(a+c,l+h-_),n.quadraticCurveTo(a+c,l+h,a+c-_,l+h),o==="bottom"&&this.drawCaret(t,n,s,i),n.lineTo(a+g,l+h),n.quadraticCurveTo(a,l+h,a,l+h-g),o==="center"&&r==="left"&&this.drawCaret(t,n,s,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const o=Do[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=J_(this,t),l=Object.assign({},o,this._size),c=Z_(n,t,l),h=ty(t,l,c,n);(i._to!==h.x||r._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Mn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,i,n),zE(t,n.textDirection),r.y+=o.top,this.drawTitle(r,t,n),this.drawBody(r,t,n),this.drawFooter(r,t,n),HE(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,i=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!dc(s,i),o=this._positionChanged(i,n);(r||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,n,s),a=this._positionChanged(o,t),l=n||!dc(o,r)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,s,i){const r=this.options;if(t.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:s,caretY:i,options:r}=this,o=Do[r.position].call(this,t,n);return o!==!1&&(s!==o.x||i!==o.y)}}var sF={id:"tooltip",_element:sy,positioners:Do,afterInit(e,t,n){n&&(e.tooltip=new sy({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:iT},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const lu={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},nn=Object.keys(lu);function iy(e,t){return e-t}function ry(e,t){if(He(t))return null;const n=e._adapter,{parser:s,round:i,isoWeekday:r}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),Ms(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(mc(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,i)),+o)}function oy(e,t,n,s){const i=nn.length;for(let r=nn.indexOf(e);r<i-1;++r){const o=lu[nn[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(a*o.size))<=s)return nn[r]}return nn[i-1]}function iF(e,t,n,s,i){for(let r=nn.length-1;r>=nn.indexOf(n);r--){const o=nn[r];if(lu[o].common&&e._adapter.diff(i,s,o)>=t-1)return o}return nn[n?nn.indexOf(n):0]}function rF(e){for(let t=nn.indexOf(e)+1,n=nn.length;t<n;++t)if(lu[nn[t]].common)return nn[t]}function ay(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:i}=If(n,t),r=n[s]>=t?n[s]:n[i];e[r]=!0}}function oF(e,t,n,s){const i=e._adapter,r=+i.startOf(t[0].value,s),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+i.add(a,1,s))l=n[a],l>=0&&(t[l].major=!0);return t}function ly(e,t,n){const s=[],i={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],i[a]=o,s.push({value:a,major:!1});return r===0||!n?s:oF(e,s,i,n)}class cy extends au{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),i=this._adapter=new C2._date(t.adapters.date);i.init(n),Yo(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:ry(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Ms(i)&&!isNaN(i)?i:+n.startOf(Date.now(),s),r=Ms(r)&&!isNaN(r)?r:+n.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=bV(i,r,o);return this._unit=n.unit||(s.autoSkip?oy(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):iF(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:rF(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),ly(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,i,r;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?n=1-i:n=(this.getDecimalForValue(t[1])-i)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=bn(n,0,o),s=bn(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,i=this.options,r=i.time,o=r.unit||oy(r.minUnit,n,s,this._getLabelCapacity(n)),a=jt(i.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=mc(l)||l===!0,h={};let d=n,f,g;if(c&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,c?"day":o),t.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const _=i.ticks.source==="data"&&this.getDataTimestamps();for(f=d,g=0;f<s;f=+t.add(f,a,o),g++)ay(h,f,_);return(f===s||i.bounds==="ticks"||g===1)&&ay(h,f,_),Object.keys(h).sort(iy).map(y=>+y)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const i=this.options.time.displayFormats,r=this._unit,o=n||i[r];return this._adapter.format(t,o)}_tickFormatFunction(t,n,s,i){const r=this.options,o=r.ticks.callback;if(o)return Yt(o,[t,n,s],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],f=s[n],g=c&&d&&f&&f.major;return this._adapter.format(t,i||(g?d:h))}generateTickLabels(t){let n,s,i;for(n=0,s=t.length;n<s;++n)i=t[n],i.label=this._tickFormatFunction(i.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,i=ji(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,i=s[n.unit]||s.millisecond,r=this._tickFormatFunction(t,0,ly(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,s=i.length;n<s;++n)t=t.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const i=this.getLabels();for(n=0,s=i.length;n<s;++n)t.push(ry(this,i[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return EV(t.sort(iy))}}function gl(e,t,n){let s=0,i=e.length-1,r,o,a,l;n?(t>=e[s].pos&&t<=e[i].pos&&({lo:s,hi:i}=Xh(e,"pos",t)),{pos:r,time:a}=e[s],{pos:o,time:l}=e[i]):(t>=e[s].time&&t<=e[i].time&&({lo:s,hi:i}=Xh(e,"time",t)),{time:r,pos:a}=e[s],{time:o,pos:l}=e[i]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class mU extends cy{static id="timeseries";static defaults=cy.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=gl(n,this.min),this._tableRange=gl(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,i=[],r=[];let o,a,l,c,h;for(o=0,a=t.length;o<a;++o)c=t[o],c>=n&&c<=s&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=i.length;o<a;++o)h=i[o+1],l=i[o-1],c=i[o],Math.round((h+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(gl(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return gl(this._table,s*this._tableRange+this._minPos,!0)}}const aF={class:"mood_trends_holder"},lF={key:0,class:"mood_trends_timerange_holder"},cF=["onClick"],uF={key:1,class:"mood_trends_graph_holder"},hF={key:2,class:"mood_trends_items"},dF={class:"mood_trend_explained_holder"},fF={key:3,class:"inter font_size_xs"},pF={__name:"moodTrends",setup(e){nd.register(R2,zL,sF,YL);const t=Lt(()=>[{label:"Very Sad",ref:"very_sad",icon:"far fa-sad-tear",color:"#6A5D7B"},{label:"Sad",ref:"sad",icon:"far fa-frown",color:"#9FB1BC"},{label:"Neutral",ref:"neutral",icon:"far fa-meh",color:"#87BFBA"},{label:"Happy",ref:"happy",icon:"far fa-grin",color:"#F3C677"},{label:"Very Happy",ref:"very_happy",icon:"far fa-grin-beam",color:"#F28C8C"}]),n=rn(),s=Z("7_days"),i=Z([]),r=Z(null),o=[{key:"7_days",label:"7 Days",days:7},{key:"30_days",label:"30 Days",days:30},{key:"90_days",label:"3 Months",days:90}],a=n.userData.uid;function l(f){const g=o.find(b=>b.key===f),_=new Date,y=new Date;return y.setDate(_.getDate()-g.days),{start:y,end:_}}async function c(){const f=await Wn(fe(ae,"mood",a));if(!f.exists()){i.value=[],d();return}const g=f.data(),{start:_,end:y}=l(s.value);i.value=Object.values(g).filter(b=>{if(!b.mood_logged)return!1;let C;return b.mood_logged.toDate?C=b.mood_logged.toDate():C=new Date(b.mood_logged),C>=_&&C<=y}),d()}function h(){const f={};return i.value.forEach(g=>{const _=g.mood_value||g.mood||"Unknown";f[_]=(f[_]||0)+1}),{labels:Object.keys(f),data:Object.values(f)}}function d(){jr(()=>{const f=document.getElementById("moodPieChart")?.getContext("2d");if(!f)return;const{data:g}=h();r.value?(r.value.data.datasets[0].data=g,r.value.update()):r.value=new nd(f,{type:"pie",data:{datasets:[{data:g,backgroundColor:["#6A5D7B","#9FB1BC","#87BFBA","#F3C677","#F28C8C"]}]},options:{responsive:!0,plugins:{legend:{position:"bottom"},tooltip:{enabled:!0}}}})})}return As(s,c),cs(c),(f,g)=>(G(),K("div",aF,[g[3]||(g[3]=A("div",{class:"mood_trends_heading_holder inter font_size_xs"}," My Mood Overview ",-1)),g[4]||(g[4]=A("br",null,null,-1)),i.value.length>0?(G(),K("div",lF,[(G(),K(Et,null,Jt(o,_=>A("div",{key:_.key,class:_n(["mood_trends_timerange inter font_size_xxs",{mood_trends_timerange_selected:s.value===_.key}]),onClick:y=>s.value=_.key},dt(_.label),11,cF)),64))])):pe("",!0),g[5]||(g[5]=A("br",null,null,-1)),g[6]||(g[6]=A("br",null,null,-1)),i.value.length>0?(G(),K("div",uF,[...g[0]||(g[0]=[A("canvas",{id:"moodPieChart",width:"400",height:"300"},null,-1)])])):pe("",!0),g[7]||(g[7]=A("br",null,null,-1)),i.value.length>0?(G(),K("div",hF,[(G(!0),K(Et,null,Jt(t.value,_=>(G(),K("div",dF,[A("div",{class:"mood_trend_color",style:ss({backgroundColor:_.color})},null,4),g[1]||(g[1]=ee("  ",-1)),A("i",{class:_n(_.icon),style:ss([{"font-size":"1.4rem"},{color:_.color}])},null,6),g[2]||(g[2]=ee(" ",-1))]))),256))])):pe("",!0),i.value.length===0?(G(),K("div",fF,"You have not logged any moods as of yet.")):pe("",!0)]))}},gF=Ne(pF,[["__scopeId","data-v-cefbfe3a"]]),mF={class:"mood_tracker_holder"},_F={class:"mood_icons_holder"},yF=["onClick"],vF=["onClick"],bF={class:"influence_holder",style:{height:"25rem"}},wF={class:"influence_items_holder"},EF=["value"],TF={class:"influence_holder"},IF={style:{width:"100%",height:"15rem",display:"flex","flex-flow":"column nowrap","align-items":"center","justify-content":"center"}},AF={__name:"mood",emits:["close"],setup(e,{emit:t}){const n=rn(),s=t,i=Lt(()=>[{label:"Very Sad",ref:"very_sad",icon:"far fa-sad-tear"},{label:"Sad",ref:"sad",icon:"far fa-frown"},{label:"Neutral",ref:"neutral",icon:"far fa-meh"},{label:"Happy",ref:"happy",icon:"far fa-grin"},{label:"Very Happy",ref:"very_happy",icon:"far fa-grin-beam"}]),r=Lt(()=>[{label:"Sleep Quality",ref:"sleep_quality"},{label:"Nutrition",ref:"nutrition"},{label:"Physical Activity",ref:"physical_activity"},{label:"Social Connection",ref:"social_connection"},{label:"Mindset",ref:"mindset"},{label:"Environment",ref:"environment"},{label:"None",ref:"none"}]),o=Z(!1),a=Z(""),l=Z([]),c=Z(""),h=Z("neutral"),d=_=>{h.value=_},f=async()=>{if(l.value.length===0){o.value=!0,a.value="Please select an influence.";return}const y={[new Date().toISOString().split("T")[0]]:{mood:h.value,influences:l.value,optional_notes:c.value,mood_logged:kn()}};await Tn(fe(ae,"mood",n.userData.uid),y,{merge:!0}),o.value=!0,a.value="Thank you for logging your mood. It will be taken into consideration.",n.setMoodData(y),s("close")},g=()=>{o.value=!1,a.value=""};return(_,y)=>(G(),K(Et,null,[A("div",mF,[y[6]||(y[6]=A("div",{class:"mood_heading_holder inter font_size_xs"},"How am I feeling today?",-1)),A("div",_F,[(G(!0),K(Et,null,Jt(i.value,b=>(G(),K("div",{class:"mood_icon_holder",key:b.ref},[h.value===b.ref?(G(),K("div",{key:0,class:_n(b.icon),style:{"font-size":"3rem",border:"0.2rem solid #87bfba",padding:"0.5rem","border-radius":"50%"},onClick:C=>d(b.ref)},null,10,yF)):(G(),K("div",{key:1,class:_n(b.icon),style:{"font-size":"3rem"},onClick:C=>d(b.ref)},null,10,vF))]))),128))]),A("div",bF,[y[4]||(y[4]=A("div",{class:"influence_heading_holder inter font_size_xs"},[A("b",null,"What might be influencing this?")],-1)),A("div",wF,[(G(!0),K(Et,null,Jt(r.value,b=>(G(),K("div",{class:"influence_item_holder inter font_size_xxs",key:b.ref,style:{height:"12%"}},[y[3]||(y[3]=ee(" ",-1)),Mt(A("input",{type:"checkbox","onUpdate:modelValue":y[0]||(y[0]=C=>l.value=C),value:b.ref},null,8,EF),[[bv,l.value]]),ee(""+dt(b.label),1)]))),128))])]),A("div",TF,[A("div",IF,[y[5]||(y[5]=A("div",{class:"influence_heading_holder inter font_size_xs"},[A("b",null,"Optional Notes")],-1)),Mt(A("textarea",{placeholder:"Write a few words about why you feel the way you feel",style:{width:"90%",height:"60%",padding:"0.5rem",border:"0.1rem solid #87bfba","border-radius":"1rem"},class:"inter font_size_xs","onUpdate:modelValue":y[1]||(y[1]=b=>c.value=b)},null,512),[[re,c.value]])])]),A("div",{class:"save_button inter font_size_xxs",onClick:y[2]||(y[2]=b=>f())},"Save")]),o.value?(G(),rs(Qr,{key:0,errorMessage:a.value,onClose:g},null,8,["errorMessage"])):pe("",!0)],64))}},SF=Ne(AF,[["__scopeId","data-v-7618c925"]]),RF={class:"journal_selection_holder inter font_size_xs"},CF=["onClick"],xF={key:0,class:"journal_entry_holder"},kF={class:"journal_entry_date_holder inter font_size_xs"},PF={class:"journal_entry_content_holder"},DF={key:1},OF={class:"journal_list_holder"},MF={class:"journal_list_heading inter font_size_sm"},NF={class:"journal_list_content inter font_size_xs"},VF={class:"journal_list_timestamp inter font_size_xxs"},LF={key:1,class:"inter font_size_sm"},FF={__name:"journal",emits:["close"],setup(e,{emit:t}){const n=t,s=rn();s.getJournalEntries();const i=Z("journalEntry"),r=[{key:"journalEntry",label:"New Journal Entry",cornerClass:"right-rounded"},{key:"journalList",label:"Journal List",cornerClass:"left-rounded"}],o=Z(new Date().toDateString()),a=Z(new Date().toLocaleTimeString()),l=Z(""),c=Z(""),h=Z(!1),d=Z(""),f=y=>{i.value=y,o.value=new Date().toDateString(),a.value=new Date().toLocaleTimeString(),s.getJournalEntries()},g=()=>{h.value=!1,d.value=""},_=async()=>{if(!l.value){h.value=!0,d.value="Please give a journal title.";return}if(!c.value){h.value=!0,d.value="Please give journal content.";return}const b={[Date.now()]:{journalEntryHeading:l.value,journalEntryContent:c.value,journalEntryLogged:kn()}};try{await Tn(fe(ae,"journals",s.userData.uid),b,{merge:!0}),h.value=!0,d.value="Your journal entry has been logged.",l.value="",c.value="",o.value=new Date().toDateString(),a.value=new Date().toLocaleTimeString(),n("close")}catch(C){console.error("Failed to save journal:",C),h.value=!0,d.value="Failed to save journal. Please try again."}};return(y,b)=>(G(),K(Et,null,[b[4]||(b[4]=A("div",{class:"journal_header_holder inter font_size_xs"}," My Journal ",-1)),A("div",RF,[(G(),K(Et,null,Jt(r,C=>A("div",{key:C.key,class:_n(["journal_selection",{active:i.value===C.key,[C.cornerClass]:!0}]),onClick:R=>f(C.key)},dt(C.label),11,CF)),64))]),i.value==="journalEntry"?(G(),K("div",xF,[A("div",kF,[A("div",null,[ee(dt(o.value)+" ",1),b[2]||(b[2]=A("br",null,null,-1)),ee(" "+dt(a.value),1)])]),A("div",PF,[Mt(A("input",{placeholder:"Give us a title.",class:"journal_input inter font_size_xs","onUpdate:modelValue":b[0]||(b[0]=C=>l.value=C)},null,512),[[re,l.value]]),Mt(A("textarea",{placeholder:"What's weighing on your mind today? Or what's a small win?",class:"journal_textarea inter font_size_xs","onUpdate:modelValue":b[1]||(b[1]=C=>c.value=C)},null,512),[[re,c.value]])]),b[3]||(b[3]=A("br",null,null,-1)),A("div",{class:"save_button inter font_size_xxs",onClick:_}," Save "),h.value?(G(),rs(Qr,{key:0,errorMessage:d.value,onClose:g},null,8,["errorMessage"])):pe("",!0)])):(G(),K("div",DF,[A("div",OF,[Gn(s).journalData?(G(!0),K(Et,{key:0},Jt(Gn(s).journalData,(C,R)=>(G(),K("div",{key:R,class:"journal_list_item inter"},[A("div",MF,dt(C.journalEntryHeading),1),A("div",NF,dt(C.journalEntryContent),1),A("div",VF," Logged on: "+dt(new Date(C.journalEntryLogged.seconds*1e3).toLocaleString()),1)]))),128)):(G(),K("div",LF,"You don't have any journals logged as of yet."))])]))],64))}},UF=Ne(FF,[["__scopeId","data-v-056c2c16"]]),BF={key:0,class:"empty_therapy_list inter font_size_xs"},jF={key:1,class:"therapy_sign_up"},$F={key:0,class:"therapy_sign_up_step_1"},zF={class:"therapist_sign_up_form_holder"},HF=["value"],WF=["value"],qF=["value"],GF={key:1,style:{width:"100%"}},KF={key:0,style:{width:"100%"}},YF={class:"therapist_item_holder"},QF={class:"contact_buttons_holder"},XF=["onClick"],JF=["onClick"],ZF={key:1,class:"empty_therapy_list inter font_size_xs"},tU={key:2,style:{width:"100%"}},eU={class:"search_therapists_holder"},nU={class:"search_input_holder"},sU={key:0,class:"empty_therapy_list inter font_size_xs"},iU={class:"therapist_item_holder"},rU={style:{display:"flex","flex-flow":"row nowrap"}},oU=["onClick"],aU=["onClick"],lU={key:2,class:"sign_up_button_holder inter font_size_s"},cU={key:3,class:"verify_therapists_holder inter font_size_s"},uU={__name:"therapists",setup(e){const t=rn();t.getTherapists();const n=Z(""),s=Z(t.userData.personalInfo.email),i=Z(t.userData.personalInfo.contactNumber),r=Z(t.userData.personalInfo.name),o=Z(""),a=Z(""),l=Z(""),c=Z(""),h=Z(null),d=Z(null),f=Z("home_list"),g=Z(!!t.userData.admin),_=Z(!1),y=Z(""),b=[{value:"dr",text:"Dr."},{value:"mr",text:"Mr."},{value:"mrs",text:"Mrs."},{value:"miss",text:"Miss."},{value:"ms",text:"Ms."}],C=[{value:"phd",text:"PhD"},{value:"msc",text:"MSc"},{value:"ma",text:"MA"}],R=[{value:"psychologist",text:"Psychologist"},{value:"psychiatrist",text:"Psychiatrist"},{value:"social_worker",text:"Social Worker"}],I=X=>X?X.replace("_"," ").replace(/^./,U=>U.toUpperCase()):"",x=Lt(()=>(t.therapists||[]).filter(X=>X.isVerified)),L=Lt(()=>(t.therapists||[]).filter(X=>!X.isVerified)),W=Lt(()=>{if(!n.value)return x.value;const X=n.value.toLowerCase();return x.value.filter(U=>U.nameSurname.toLowerCase().includes(X))});As(L,X=>{f.value==="verify_therapist"&&X.length===0&&(f.value="home_list")});const E=()=>f.value="step_1",v=()=>f.value="verify_therapist",T=()=>f.value="home_list",P=async()=>{if(!h.value){y.value="Please select an address",_.value=!0;return}const X=fe(ae,"therapists",t.userData.uid);if((await Wn(X)).exists()){y.value="You are already registered as a therapist.",_.value=!0;return}await Tn(X,{email:s.value,nameSurname:r.value,userName:o.value,title:a.value,academicTitle:l.value,credential:c.value,address:h.value,isVerified:!1,createdAt:new Date}),y.value="Thank you. You will be redirected shortly.",_.value=!0},D=async X=>{await Tn(fe(ae,"therapists",X.id),{isVerified:!0},{merge:!0}),f.value="home_list",t.getTherapists()},M=X=>Tn(fe(ae,"therapists",X.id),{declined:!0},{merge:!0}),S=()=>new Promise(X=>{if(window.google?.maps?.places)return X();const U=document.createElement("script");U.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBWGRHjfWWoBWojyOBuGi75ACgNAkGobws&libraries=places",U.onload=X,document.head.appendChild(U)});As(f,async X=>{if(X!=="step_1")return;await jr(),await S();const U=new google.maps.places.Autocomplete(d.value,{types:["address"],componentRestrictions:{country:"za"}});U.addListener("place_changed",()=>{const tt=U.getPlace();h.value={city:tt.address_components?.find(Gt=>Gt.types.includes("locality"))?.long_name||"",province:tt.address_components?.find(Gt=>Gt.types.includes("administrative_area_level_1"))?.long_name||""}})});const It=async X=>[],yt=X=>{console.log(X.contactNumber),window.location.href=`tel:${X.contactNumber}`},ht=X=>{const U=encodeURIComponent("Therapy Session Enquiry");window.location.href=`mailto:${X.email}?subject=${U}`};return(X,U)=>(G(),K(Et,null,[f.value==="home_list"&&x.value.length===0&&L.value.length===0?(G(),K("div",BF,[...U[10]||(U[10]=[A("br",null,null,-1),ee(" No therapists are listed at this moment. ",-1)])])):(G(),K("div",jF,[f.value==="step_1"?(G(),K("div",$F,[U[14]||(U[14]=A("div",{class:"therapy_sign_up_heading inter font_size_xs"},[A("br"),A("b",null,"Let's get you signed up and listed!"),A("br"),A("br")],-1)),A("form",zF,[Mt(A("input",{class:"form_input inter font_size_xs",type:"text",placeholder:"Email Address","onUpdate:modelValue":U[0]||(U[0]=tt=>s.value=tt)},null,512),[[re,s.value]]),Mt(A("input",{class:"form_input inter font_size_xs",type:"text",placeholder:"Contact Number","onUpdate:modelValue":U[1]||(U[1]=tt=>i.value=tt)},null,512),[[re,i.value]]),Mt(A("input",{class:"form_input inter font_size_xs",type:"text",placeholder:"Username","onUpdate:modelValue":U[2]||(U[2]=tt=>o.value=tt)},null,512),[[re,o.value]]),Mt(A("select",{class:"form_input inter font_size_xs","onUpdate:modelValue":U[3]||(U[3]=tt=>a.value=tt)},[U[11]||(U[11]=A("option",{disabled:"",value:""},"Select your title",-1)),(G(),K(Et,null,Jt(b,tt=>A("option",{key:tt.value,value:tt.value},dt(tt.text),9,HF)),64))],512),[[Kn,a.value]]),Mt(A("input",{class:"form_input inter font_size_xs",type:"text",placeholder:"Name & Surname","onUpdate:modelValue":U[4]||(U[4]=tt=>r.value=tt)},null,512),[[re,r.value]]),Mt(A("select",{class:"form_input inter font_size_xs","onUpdate:modelValue":U[5]||(U[5]=tt=>l.value=tt)},[U[12]||(U[12]=A("option",{disabled:"",value:""},"Select your academic title",-1)),(G(),K(Et,null,Jt(C,tt=>A("option",{key:tt.value,value:tt.value},dt(tt.text),9,WF)),64))],512),[[Kn,l.value]]),Mt(A("select",{class:"form_input inter font_size_xs","onUpdate:modelValue":U[6]||(U[6]=tt=>c.value=tt)},[U[13]||(U[13]=A("option",{disabled:"",value:""},"Select your credential",-1)),(G(),K(Et,null,Jt(R,tt=>A("option",{key:tt.value,value:tt.value},dt(tt.text),9,qF)),64))],512),[[Kn,c.value]]),A("input",{ref_key:"addressInput",ref:d,class:"form_input inter font_size_xs",type:"text",placeholder:"Search address"},null,512)]),A("button",{class:"form_button inter font_size_xs",onClick:P}," Confirm "),A("div",{class:"sign_up_button_holder inter font_size_s"},[A("i",{class:"fas fa-times",onClick:T})])])):f.value==="verify_therapist"&&g.value?(G(),K("div",GF,[L.value.length?(G(),K("div",KF,[(G(!0),K(Et,null,Jt(L.value,tt=>(G(),K("div",{class:"therapist_items_holder inter font_size_xs",key:tt.id},[A("div",YF,[A("b",null,dt(tt.nameSurname),1),U[17]||(U[17]=A("br",null,null,-1)),ee(" "+dt(tt.email),1),U[18]||(U[18]=A("br",null,null,-1)),ee(" "+dt(I(tt.credential)),1),U[19]||(U[19]=A("br",null,null,-1)),ee(" "+dt(tt.address.city)+", "+dt(tt.address.province)+" ",1),A("div",QF,[A("div",{class:"contact_button",onClick:Gt=>D(tt)},[...U[15]||(U[15]=[A("i",{class:"fas fa-user-check"},null,-1)])],8,XF),A("div",{class:"contact_button",onClick:Gt=>M(tt)},[...U[16]||(U[16]=[A("i",{class:"fas fa-user-times"},null,-1)])],8,JF)])])]))),128))])):(G(),K("div",ZF,[...U[20]||(U[20]=[A("br",null,null,-1),ee(" No therapists need verifying at this moment. ",-1)])])),A("div",{class:"sign_up_button_holder inter font_size_s"},[A("i",{class:"fas fa-times",onClick:T})])])):f.value==="home_list"?(G(),K("div",tU,[A("div",eU,[A("div",nU,[Mt(A("input",{class:"search_input inter font_size_xs",type:"text",placeholder:"Search Therapist","onUpdate:modelValue":U[7]||(U[7]=tt=>n.value=tt)},null,512),[[re,n.value]]),A("div",{class:"search_button_holder",onClick:U[8]||(U[8]=tt=>It())},[...U[21]||(U[21]=[A("i",{class:"fa fa-search"},null,-1)])])]),W.value.length===0?(G(),K("div",sU,[...U[22]||(U[22]=[A("br",null,null,-1),ee(" No verified therapists available yet. ",-1)])])):(G(!0),K(Et,{key:1},Jt(W.value,tt=>(G(),K("div",{class:"therapist_items_holder inter font_size_xs",key:tt.id},[A("div",iU,[A("b",null,dt(tt.nameSurname),1),U[26]||(U[26]=A("br",null,null,-1)),ee(" "+dt(I(tt.credential)),1),U[27]||(U[27]=A("br",null,null,-1)),ee(" "+dt(tt.address.city)+", "+dt(tt.address.province)+" ",1),U[28]||(U[28]=A("br",null,null,-1)),U[29]||(U[29]=A("br",null,null,-1)),A("div",rU,[A("div",{style:{width:"3rem",height:"1.5rem","background-color":"#87bfba",color:"white",display:"flex","flex-flow":"row nowrap","justify-content":"center","align-items":"center","border-radius":"1rem"},onClick:Gt=>yt(tt)},[...U[23]||(U[23]=[A("i",{class:"fa fa-phone"},null,-1)])],8,oU),U[25]||(U[25]=ee("  ",-1)),A("div",{style:{width:"3rem",height:"1.5rem","background-color":"#87bfba",color:"white",display:"flex","flex-flow":"row nowrap","justify-content":"center","align-items":"center","border-radius":"1rem"},onClick:Gt=>ht(tt)},[...U[24]||(U[24]=[A("i",{class:"fa fa-envelope"},null,-1)])],8,aU)])])]))),128))])])):pe("",!0),_.value?(G(),rs(Qr,{key:3,errorMessage:y.value,onClose:U[9]||(U[9]=tt=>_.value=!1)},null,8,["errorMessage"])):pe("",!0)])),f.value==="home_list"?(G(),K("div",lU,[A("i",{class:"fas fa-plus",onClick:E})])):pe("",!0),f.value==="home_list"&&g.value?(G(),K("div",cU,[A("i",{class:"fas fa-award",onClick:v})])):pe("",!0)],64))}},hU=Ne(uU,[["__scopeId","data-v-599ad955"]]),dU=[{path:"/",name:"Loading",component:iN},{path:"/login",name:"Login",component:PO},{path:"/home/",name:"Home",component:JO,props:!0},{path:"/profile/",name:"Profile",component:LN,props:!0},{path:"/journal/",name:"Journal",component:UF,props:!0},{path:"/mood/",name:"MoodTrends",component:gF,props:!0},{path:"/mood/",name:"Mood",component:SF,props:!0},{path:"/courses/",name:"Courses",component:SM,props:!0},{path:"/appStreak/",name:"AppStreak",component:eN,props:!0},{path:"/createCourses/",name:"CreateCourses",component:UM,props:!0},{path:"/courses/:id",name:"DoCourse",component:JM,props:!0},{path:"/courses/:id",name:"CourseView",component:()=>TS(()=>import("./viewCourse-DzOGdMGN.js"),__vite__mapDeps([0,1])),props:!0},{path:"/therapists/",name:"Therapists",component:hU,props:!0}],rT=pS({history:qA(),routes:dU});rT.beforeEach(async(e,t,n)=>{const s=rn();if(s.userData||await s.fetchUserData(),!s.userData?.uid&&e.name!=="Login")return n({name:"Login"});n()});let uy=null;gn.onAuthStateChanged(()=>{if(!uy){const e=J0(bS);e.use(eA()),e.use(rT),e.mount("#app"),uy=e}});export{Ne as _,Uv as a,K as b,Lt as c,pe as d,A as e,fe as f,Wn as g,Ei as h,gn as i,ae as j,Pm as k,pU as l,G as m,cs as o,Z as r,Tn as s,dt as t,rn as u};
