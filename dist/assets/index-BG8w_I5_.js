(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Qh(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const $t={},_r=[],Hn=()=>{},Z_=()=>!1,vc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Xh=e=>e.startsWith("onUpdate:"),He=Object.assign,Jh=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},vT=Object.prototype.hasOwnProperty,Vt=(e,t)=>vT.call(e,t),pt=Array.isArray,yr=e=>pa(e)==="[object Map]",Fr=e=>pa(e)==="[object Set]",pp=e=>pa(e)==="[object Date]",wt=e=>typeof e=="function",me=e=>typeof e=="string",es=e=>typeof e=="symbol",Ht=e=>e!==null&&typeof e=="object",ty=e=>(Ht(e)||wt(e))&&wt(e.then)&&wt(e.catch),ey=Object.prototype.toString,pa=e=>ey.call(e),bT=e=>pa(e).slice(8,-1),ny=e=>pa(e)==="[object Object]",Zh=e=>me(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,xo=Qh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),bc=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},wT=/-\w/g,wn=bc(e=>e.replace(wT,t=>t.slice(1).toUpperCase())),ET=/\B([A-Z])/g,Yi=bc(e=>e.replace(ET,"-$1").toLowerCase()),wc=bc(e=>e.charAt(0).toUpperCase()+e.slice(1)),mu=bc(e=>e?`on${wc(e)}`:""),ei=(e,t)=>!Object.is(e,t),fl=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},sy=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},xl=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let gp;const Ec=()=>gp||(gp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function As(e){if(pt(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],i=me(s)?ST(s):As(s);if(i)for(const r in i)t[r]=i[r]}return t}else if(me(e)||Ht(e))return e}const TT=/;(?![^(]*\))/g,IT=/:([^]+)/,AT=/\/\*[^]*?\*\//g;function ST(e){const t={};return e.replace(AT,"").split(TT).forEach(n=>{if(n){const s=n.split(IT);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function En(e){let t="";if(me(e))t=e;else if(pt(e))for(let n=0;n<e.length;n++){const s=En(e[n]);s&&(t+=s+" ")}else if(Ht(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const RT="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",CT=Qh(RT);function iy(e){return!!e||e===""}function xT(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=ji(e[s],t[s]);return n}function ji(e,t){if(e===t)return!0;let n=pp(e),s=pp(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=es(e),s=es(t),n||s)return e===t;if(n=pt(e),s=pt(t),n||s)return n&&s?xT(e,t):!1;if(n=Ht(e),s=Ht(t),n||s){if(!n||!s)return!1;const i=Object.keys(e).length,r=Object.keys(t).length;if(i!==r)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!ji(e[o],t[o]))return!1}}return String(e)===String(t)}function td(e,t){return e.findIndex(n=>ji(n,t))}const ry=e=>!!(e&&e.__v_isRef===!0),yt=e=>me(e)?e:e==null?"":pt(e)||Ht(e)&&(e.toString===ey||!wt(e.toString))?ry(e)?yt(e.value):JSON.stringify(e,oy,2):String(e),oy=(e,t)=>ry(t)?oy(e,t.value):yr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,i],r)=>(n[_u(s,r)+" =>"]=i,n),{})}:Fr(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>_u(n))}:es(t)?_u(t):Ht(t)&&!pt(t)&&!ny(t)?String(t):t,_u=(e,t="")=>{var n;return es(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Fe;class ay{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Fe,!t&&Fe&&(this.index=(Fe.scopes||(Fe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Fe;try{return Fe=this,t()}finally{Fe=n}}}on(){++this._on===1&&(this.prevScope=Fe,Fe=this)}off(){this._on>0&&--this._on===0&&(Fe=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function ly(e){return new ay(e)}function cy(){return Fe}function PT(e,t=!1){Fe&&Fe.cleanups.push(e)}let Wt;const yu=new WeakSet;class uy{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Fe&&Fe.active&&Fe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,yu.has(this)&&(yu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||dy(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,mp(this),fy(this);const t=Wt,n=Rn;Wt=this,Rn=!0;try{return this.fn()}finally{py(this),Wt=t,Rn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)sd(t);this.deps=this.depsTail=void 0,mp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?yu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){th(this)&&this.run()}get dirty(){return th(this)}}let hy=0,Po,ko;function dy(e,t=!1){if(e.flags|=8,t){e.next=ko,ko=e;return}e.next=Po,Po=e}function ed(){hy++}function nd(){if(--hy>0)return;if(ko){let t=ko;for(ko=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Po;){let t=Po;for(Po=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function fy(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function py(e){let t,n=e.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),sd(s),kT(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}e.deps=t,e.depsTail=n}function th(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(gy(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function gy(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ko)||(e.globalVersion=Ko,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!th(e))))return;e.flags|=2;const t=e.dep,n=Wt,s=Rn;Wt=e,Rn=!0;try{fy(e);const i=e.fn(e._value);(t.version===0||ei(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{Wt=n,Rn=s,py(e),e.flags&=-3}}function sd(e,t=!1){const{dep:n,prevSub:s,nextSub:i}=e;if(s&&(s.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)sd(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function kT(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Rn=!0;const my=[];function Ss(){my.push(Rn),Rn=!1}function Rs(){const e=my.pop();Rn=e===void 0?!0:e}function mp(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Wt;Wt=void 0;try{t()}finally{Wt=n}}}let Ko=0;class DT{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class id{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Wt||!Rn||Wt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Wt)n=this.activeLink=new DT(Wt,this),Wt.deps?(n.prevDep=Wt.depsTail,Wt.depsTail.nextDep=n,Wt.depsTail=n):Wt.deps=Wt.depsTail=n,_y(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Wt.depsTail,n.nextDep=void 0,Wt.depsTail.nextDep=n,Wt.depsTail=n,Wt.deps===n&&(Wt.deps=s)}return n}trigger(t){this.version++,Ko++,this.notify(t)}notify(t){ed();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{nd()}}}function _y(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)_y(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Pl=new WeakMap,Li=Symbol(""),eh=Symbol(""),Yo=Symbol("");function Be(e,t,n){if(Rn&&Wt){let s=Pl.get(e);s||Pl.set(e,s=new Map);let i=s.get(n);i||(s.set(n,i=new id),i.map=s,i.key=n),i.track()}}function gs(e,t,n,s,i,r){const o=Pl.get(e);if(!o){Ko++;return}const a=l=>{l&&l.trigger()};if(ed(),t==="clear")o.forEach(a);else{const l=pt(e),u=l&&Zh(n);if(l&&n==="length"){const h=Number(s);o.forEach((d,f)=>{(f==="length"||f===Yo||!es(f)&&f>=h)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(Yo)),t){case"add":l?u&&a(o.get("length")):(a(o.get(Li)),yr(e)&&a(o.get(eh)));break;case"delete":l||(a(o.get(Li)),yr(e)&&a(o.get(eh)));break;case"set":yr(e)&&a(o.get(Li));break}}nd()}function OT(e,t){const n=Pl.get(e);return n&&n.get(t)}function or(e){const t=Dt(e);return t===e?t:(Be(t,"iterate",Yo),yn(e)?t:t.map(Pe))}function Tc(e){return Be(e=Dt(e),"iterate",Yo),e}const MT={__proto__:null,[Symbol.iterator](){return vu(this,Symbol.iterator,Pe)},concat(...e){return or(this).concat(...e.map(t=>pt(t)?or(t):t))},entries(){return vu(this,"entries",e=>(e[1]=Pe(e[1]),e))},every(e,t){return ls(this,"every",e,t,void 0,arguments)},filter(e,t){return ls(this,"filter",e,t,n=>n.map(Pe),arguments)},find(e,t){return ls(this,"find",e,t,Pe,arguments)},findIndex(e,t){return ls(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ls(this,"findLast",e,t,Pe,arguments)},findLastIndex(e,t){return ls(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ls(this,"forEach",e,t,void 0,arguments)},includes(...e){return bu(this,"includes",e)},indexOf(...e){return bu(this,"indexOf",e)},join(e){return or(this).join(e)},lastIndexOf(...e){return bu(this,"lastIndexOf",e)},map(e,t){return ls(this,"map",e,t,void 0,arguments)},pop(){return co(this,"pop")},push(...e){return co(this,"push",e)},reduce(e,...t){return _p(this,"reduce",e,t)},reduceRight(e,...t){return _p(this,"reduceRight",e,t)},shift(){return co(this,"shift")},some(e,t){return ls(this,"some",e,t,void 0,arguments)},splice(...e){return co(this,"splice",e)},toReversed(){return or(this).toReversed()},toSorted(e){return or(this).toSorted(e)},toSpliced(...e){return or(this).toSpliced(...e)},unshift(...e){return co(this,"unshift",e)},values(){return vu(this,"values",Pe)}};function vu(e,t,n){const s=Tc(e),i=s[t]();return s!==e&&!yn(e)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.done||(r.value=n(r.value)),r}),i}const NT=Array.prototype;function ls(e,t,n,s,i,r){const o=Tc(e),a=o!==e&&!yn(e),l=o[t];if(l!==NT[t]){const d=l.apply(e,r);return a?Pe(d):d}let u=n;o!==e&&(a?u=function(d,f){return n.call(this,Pe(d),f,e)}:n.length>2&&(u=function(d,f){return n.call(this,d,f,e)}));const h=l.call(o,u,s);return a&&i?i(h):h}function _p(e,t,n,s){const i=Tc(e);let r=n;return i!==e&&(yn(e)?n.length>3&&(r=function(o,a,l){return n.call(this,o,a,l,e)}):r=function(o,a,l){return n.call(this,o,Pe(a),l,e)}),i[t](r,...s)}function bu(e,t,n){const s=Dt(e);Be(s,"iterate",Yo);const i=s[t](...n);return(i===-1||i===!1)&&ad(n[0])?(n[0]=Dt(n[0]),s[t](...n)):i}function co(e,t,n=[]){Ss(),ed();const s=Dt(e)[t].apply(e,n);return nd(),Rs(),s}const VT=Qh("__proto__,__v_isRef,__isVue"),yy=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(es));function LT(e){es(e)||(e=String(e));const t=Dt(this);return Be(t,"has",e),t.hasOwnProperty(e)}class vy{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?GT:Ty:r?Ey:wy).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=pt(t);if(!i){let l;if(o&&(l=MT[n]))return l;if(n==="hasOwnProperty")return LT}const a=Reflect.get(t,n,le(t)?t:s);if((es(n)?yy.has(n):VT(n))||(i||Be(t,"get",n),r))return a;if(le(a)){const l=o&&Zh(n)?a:a.value;return i&&Ht(l)?sh(l):l}return Ht(a)?i?sh(a):ga(a):a}}class by extends vy{constructor(t=!1){super(!1,t)}set(t,n,s,i){let r=t[n];if(!this._isShallow){const l=li(r);if(!yn(s)&&!li(s)&&(r=Dt(r),s=Dt(s)),!pt(t)&&le(r)&&!le(s))return l||(r.value=s),!0}const o=pt(t)&&Zh(n)?Number(n)<t.length:Vt(t,n),a=Reflect.set(t,n,s,le(t)?t:i);return t===Dt(i)&&(o?ei(s,r)&&gs(t,"set",n,s):gs(t,"add",n,s)),a}deleteProperty(t,n){const s=Vt(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&s&&gs(t,"delete",n,void 0),i}has(t,n){const s=Reflect.has(t,n);return(!es(n)||!yy.has(n))&&Be(t,"has",n),s}ownKeys(t){return Be(t,"iterate",pt(t)?"length":Li),Reflect.ownKeys(t)}}class FT extends vy{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const UT=new by,BT=new FT,jT=new by(!0);const nh=e=>e,Ha=e=>Reflect.getPrototypeOf(e);function zT(e,t,n){return function(...s){const i=this.__v_raw,r=Dt(i),o=yr(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,u=i[e](...s),h=n?nh:t?kl:Pe;return!t&&Be(r,"iterate",l?eh:Li),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:a?[h(d[0]),h(d[1])]:h(d),done:f}},[Symbol.iterator](){return this}}}}function Wa(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function $T(e,t){const n={get(i){const r=this.__v_raw,o=Dt(r),a=Dt(i);e||(ei(i,a)&&Be(o,"get",i),Be(o,"get",a));const{has:l}=Ha(o),u=t?nh:e?kl:Pe;if(l.call(o,i))return u(r.get(i));if(l.call(o,a))return u(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!e&&Be(Dt(i),"iterate",Li),i.size},has(i){const r=this.__v_raw,o=Dt(r),a=Dt(i);return e||(ei(i,a)&&Be(o,"has",i),Be(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=Dt(a),u=t?nh:e?kl:Pe;return!e&&Be(l,"iterate",Li),a.forEach((h,d)=>i.call(r,u(h),u(d),o))}};return He(n,e?{add:Wa("add"),set:Wa("set"),delete:Wa("delete"),clear:Wa("clear")}:{add(i){!t&&!yn(i)&&!li(i)&&(i=Dt(i));const r=Dt(this);return Ha(r).has.call(r,i)||(r.add(i),gs(r,"add",i,i)),this},set(i,r){!t&&!yn(r)&&!li(r)&&(r=Dt(r));const o=Dt(this),{has:a,get:l}=Ha(o);let u=a.call(o,i);u||(i=Dt(i),u=a.call(o,i));const h=l.call(o,i);return o.set(i,r),u?ei(r,h)&&gs(o,"set",i,r):gs(o,"add",i,r),this},delete(i){const r=Dt(this),{has:o,get:a}=Ha(r);let l=o.call(r,i);l||(i=Dt(i),l=o.call(r,i)),a&&a.call(r,i);const u=r.delete(i);return l&&gs(r,"delete",i,void 0),u},clear(){const i=Dt(this),r=i.size!==0,o=i.clear();return r&&gs(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=zT(i,e,t)}),n}function rd(e,t){const n=$T(e,t);return(s,i,r)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(Vt(n,i)&&i in s?n:s,i,r)}const HT={get:rd(!1,!1)},WT={get:rd(!1,!0)},qT={get:rd(!0,!1)};const wy=new WeakMap,Ey=new WeakMap,Ty=new WeakMap,GT=new WeakMap;function KT(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function YT(e){return e.__v_skip||!Object.isExtensible(e)?0:KT(bT(e))}function ga(e){return li(e)?e:od(e,!1,UT,HT,wy)}function Iy(e){return od(e,!1,jT,WT,Ey)}function sh(e){return od(e,!0,BT,qT,Ty)}function od(e,t,n,s,i){if(!Ht(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=YT(e);if(r===0)return e;const o=i.get(e);if(o)return o;const a=new Proxy(e,r===2?s:n);return i.set(e,a),a}function ni(e){return li(e)?ni(e.__v_raw):!!(e&&e.__v_isReactive)}function li(e){return!!(e&&e.__v_isReadonly)}function yn(e){return!!(e&&e.__v_isShallow)}function ad(e){return e?!!e.__v_raw:!1}function Dt(e){const t=e&&e.__v_raw;return t?Dt(t):e}function ld(e){return!Vt(e,"__v_skip")&&Object.isExtensible(e)&&sy(e,"__v_skip",!0),e}const Pe=e=>Ht(e)?ga(e):e,kl=e=>Ht(e)?sh(e):e;function le(e){return e?e.__v_isRef===!0:!1}function Z(e){return Ay(e,!1)}function QT(e){return Ay(e,!0)}function Ay(e,t){return le(e)?e:new XT(e,t)}class XT{constructor(t,n){this.dep=new id,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Dt(t),this._value=n?t:Pe(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||yn(t)||li(t);t=s?t:Dt(t),ei(t,n)&&(this._rawValue=t,this._value=s?t:Pe(t),this.dep.trigger())}}function Wn(e){return le(e)?e.value:e}const JT={get:(e,t,n)=>t==="__v_raw"?e:Wn(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const i=e[t];return le(i)&&!le(n)?(i.value=n,!0):Reflect.set(e,t,n,s)}};function Sy(e){return ni(e)?e:new Proxy(e,JT)}function ZT(e){const t=pt(e)?new Array(e.length):{};for(const n in e)t[n]=eI(e,n);return t}class tI{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return OT(Dt(this._object),this._key)}}function eI(e,t,n){const s=e[t];return le(s)?s:new tI(e,t,n)}class nI{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new id(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ko-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Wt!==this)return dy(this,!0),!0}get value(){const t=this.dep.track();return gy(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function sI(e,t,n=!1){let s,i;return wt(e)?s=e:(s=e.get,i=e.set),new nI(s,i,n)}const qa={},Dl=new WeakMap;let ki;function iI(e,t=!1,n=ki){if(n){let s=Dl.get(n);s||Dl.set(n,s=[]),s.push(e)}}function rI(e,t,n=$t){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=n,u=O=>i?O:yn(O)||i===!1||i===0?ms(O,1):ms(O);let h,d,f,g,_=!1,y=!1;if(le(e)?(d=()=>e.value,_=yn(e)):ni(e)?(d=()=>u(e),_=!0):pt(e)?(y=!0,_=e.some(O=>ni(O)||yn(O)),d=()=>e.map(O=>{if(le(O))return O.value;if(ni(O))return u(O);if(wt(O))return l?l(O,2):O()})):wt(e)?t?d=l?()=>l(e,2):e:d=()=>{if(f){Ss();try{f()}finally{Rs()}}const O=ki;ki=h;try{return l?l(e,3,[g]):e(g)}finally{ki=O}}:d=Hn,t&&i){const O=d,L=i===!0?1/0:i;d=()=>ms(O(),L)}const b=cy(),I=()=>{h.stop(),b&&b.active&&Jh(b.effects,h)};if(r&&t){const O=t;t=(...L)=>{O(...L),I()}}let R=y?new Array(e.length).fill(qa):qa;const k=O=>{if(!(!(h.flags&1)||!h.dirty&&!O))if(t){const L=h.run();if(i||_||(y?L.some((G,T)=>ei(G,R[T])):ei(L,R))){f&&f();const G=ki;ki=h;try{const T=[L,R===qa?void 0:y&&R[0]===qa?[]:R,g];R=L,l?l(t,3,T):t(...T)}finally{ki=G}}}else h.run()};return a&&a(k),h=new uy(d),h.scheduler=o?()=>o(k,!1):k,g=O=>iI(O,!1,h),f=h.onStop=()=>{const O=Dl.get(h);if(O){if(l)l(O,4);else for(const L of O)L();Dl.delete(h)}},t?s?k(!0):R=h.run():o?o(k.bind(null,!0),!0):h.run(),I.pause=h.pause.bind(h),I.resume=h.resume.bind(h),I.stop=I,I}function ms(e,t=1/0,n){if(t<=0||!Ht(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,le(e))ms(e.value,t,n);else if(pt(e))for(let s=0;s<e.length;s++)ms(e[s],t,n);else if(Fr(e)||yr(e))e.forEach(s=>{ms(s,t,n)});else if(ny(e)){for(const s in e)ms(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&ms(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ma(e,t,n,s){try{return s?e(...s):e()}catch(i){Ic(i,t,n)}}function ns(e,t,n,s){if(wt(e)){const i=ma(e,t,n,s);return i&&ty(i)&&i.catch(r=>{Ic(r,t,n)}),i}if(pt(e)){const i=[];for(let r=0;r<e.length;r++)i.push(ns(e[r],t,n,s));return i}}function Ic(e,t,n,s=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||$t;if(t){let a=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](e,l,u)===!1)return}a=a.parent}if(r){Ss(),ma(r,null,10,[e,l,u]),Rs();return}}oI(e,n,i,s,o)}function oI(e,t,n,s=!0,i=!1){if(i)throw e;console.error(e)}const Xe=[];let Un=-1;const vr=[];let Ws=null,ur=0;const Ry=Promise.resolve();let Ol=null;function Ur(e){const t=Ol||Ry;return e?t.then(this?e.bind(this):e):t}function aI(e){let t=Un+1,n=Xe.length;for(;t<n;){const s=t+n>>>1,i=Xe[s],r=Qo(i);r<e||r===e&&i.flags&2?t=s+1:n=s}return t}function cd(e){if(!(e.flags&1)){const t=Qo(e),n=Xe[Xe.length-1];!n||!(e.flags&2)&&t>=Qo(n)?Xe.push(e):Xe.splice(aI(t),0,e),e.flags|=1,Cy()}}function Cy(){Ol||(Ol=Ry.then(Py))}function lI(e){pt(e)?vr.push(...e):Ws&&e.id===-1?Ws.splice(ur+1,0,e):e.flags&1||(vr.push(e),e.flags|=1),Cy()}function yp(e,t,n=Un+1){for(;n<Xe.length;n++){const s=Xe[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;Xe.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function xy(e){if(vr.length){const t=[...new Set(vr)].sort((n,s)=>Qo(n)-Qo(s));if(vr.length=0,Ws){Ws.push(...t);return}for(Ws=t,ur=0;ur<Ws.length;ur++){const n=Ws[ur];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Ws=null,ur=0}}const Qo=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Py(e){try{for(Un=0;Un<Xe.length;Un++){const t=Xe[Un];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ma(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Un<Xe.length;Un++){const t=Xe[Un];t&&(t.flags&=-2)}Un=-1,Xe.length=0,xy(),Ol=null,(Xe.length||vr.length)&&Py()}}let dn=null,ky=null;function Ml(e){const t=dn;return dn=e,ky=e&&e.type.__scopeId||null,t}function cI(e,t=dn,n){if(!t||e._n)return e;const s=(...i)=>{s._d&&Ll(-1);const r=Ml(t);let o;try{o=e(...i)}finally{Ml(r),s._d&&Ll(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Mt(e,t){if(dn===null)return e;const n=Cc(dn),s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,a,l=$t]=t[i];r&&(wt(r)&&(r={mounted:r,updated:r}),r.deep&&ms(o),s.push({dir:r,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function Si(e,t,n,s){const i=e.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(Ss(),ns(l,n,8,[e.el,a,e,t]),Rs())}}const uI=Symbol("_vte"),hI=e=>e.__isTeleport,dI=Symbol("_leaveCb");function ud(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ud(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Dy(e,t){return wt(e)?He({name:e.name},t,{setup:e}):e}function Oy(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Nl=new WeakMap;function Do(e,t,n,s,i=!1){if(pt(e)){e.forEach((_,y)=>Do(_,t&&(pt(t)?t[y]:t),n,s,i));return}if(Oo(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Do(e,t,n,s.component.subTree);return}const r=s.shapeFlag&4?Cc(s.component):s.el,o=i?null:r,{i:a,r:l}=e,u=t&&t.r,h=a.refs===$t?a.refs={}:a.refs,d=a.setupState,f=Dt(d),g=d===$t?Z_:_=>Vt(f,_);if(u!=null&&u!==l){if(vp(t),me(u))h[u]=null,g(u)&&(d[u]=null);else if(le(u)){u.value=null;const _=t;_.k&&(h[_.k]=null)}}if(wt(l))ma(l,a,12,[o,h]);else{const _=me(l),y=le(l);if(_||y){const b=()=>{if(e.f){const I=_?g(l)?d[l]:h[l]:l.value;if(i)pt(I)&&Jh(I,r);else if(pt(I))I.includes(r)||I.push(r);else if(_)h[l]=[r],g(l)&&(d[l]=h[l]);else{const R=[r];l.value=R,e.k&&(h[e.k]=R)}}else _?(h[l]=o,g(l)&&(d[l]=o)):y&&(l.value=o,e.k&&(h[e.k]=o))};if(o){const I=()=>{b(),Nl.delete(e)};I.id=-1,Nl.set(e,I),cn(I,n)}else vp(e),b()}}}function vp(e){const t=Nl.get(e);t&&(t.flags|=8,Nl.delete(e))}Ec().requestIdleCallback;Ec().cancelIdleCallback;const Oo=e=>!!e.type.__asyncLoader,My=e=>e.type.__isKeepAlive;function fI(e,t){Ny(e,"a",t)}function pI(e,t){Ny(e,"da",t)}function Ny(e,t,n=ze){const s=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Ac(t,s,n),n){let i=n.parent;for(;i&&i.parent;)My(i.parent.vnode)&&gI(s,t,n,i),i=i.parent}}function gI(e,t,n,s){const i=Ac(t,e,s,!0);Vy(()=>{Jh(s[t],i)},n)}function Ac(e,t,n=ze,s=!1){if(n){const i=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...o)=>{Ss();const a=_a(n),l=ns(t,n,e,o);return a(),Rs(),l});return s?i.unshift(r):i.push(r),r}}const Os=e=>(t,n=ze)=>{(!Jo||e==="sp")&&Ac(e,(...s)=>t(...s),n)},mI=Os("bm"),rs=Os("m"),_I=Os("bu"),yI=Os("u"),vI=Os("bum"),Vy=Os("um"),bI=Os("sp"),wI=Os("rtg"),EI=Os("rtc");function TI(e,t=ze){Ac("ec",e,t)}const II="components";function AI(e,t){return RI(II,e,!0,t)||e}const SI=Symbol.for("v-ndc");function RI(e,t,n=!0,s=!1){const i=dn||ze;if(i){const r=i.type;{const a=g0(r,!1);if(a&&(a===t||a===wn(t)||a===wc(wn(t))))return r}const o=bp(i[e]||r[e],t)||bp(i.appContext[e],t);return!o&&s?r:o}}function bp(e,t){return e&&(e[t]||e[wn(t)]||e[wc(wn(t))])}function te(e,t,n,s){let i;const r=n,o=pt(e);if(o||me(e)){const a=o&&ni(e);let l=!1,u=!1;a&&(l=!yn(e),u=li(e),e=Tc(e)),i=new Array(e.length);for(let h=0,d=e.length;h<d;h++)i[h]=t(l?u?kl(Pe(e[h])):Pe(e[h]):e[h],h,void 0,r)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,r)}else if(Ht(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];i[l]=t(e[h],h,l,r)}}else i=[];return i}const ih=e=>e?sv(e)?Cc(e):ih(e.parent):null,Mo=He(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ih(e.parent),$root:e=>ih(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Fy(e),$forceUpdate:e=>e.f||(e.f=()=>{cd(e.update)}),$nextTick:e=>e.n||(e.n=Ur.bind(e.proxy)),$watch:e=>YI.bind(e)}),wu=(e,t)=>e!==$t&&!e.__isScriptSetup&&Vt(e,t),CI={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const g=o[t];if(g!==void 0)switch(g){case 1:return s[t];case 2:return i[t];case 4:return n[t];case 3:return r[t]}else{if(wu(s,t))return o[t]=1,s[t];if(i!==$t&&Vt(i,t))return o[t]=2,i[t];if((u=e.propsOptions[0])&&Vt(u,t))return o[t]=3,r[t];if(n!==$t&&Vt(n,t))return o[t]=4,n[t];rh&&(o[t]=0)}}const h=Mo[t];let d,f;if(h)return t==="$attrs"&&Be(e.attrs,"get",""),h(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(n!==$t&&Vt(n,t))return o[t]=4,n[t];if(f=l.config.globalProperties,Vt(f,t))return f[t]},set({_:e},t,n){const{data:s,setupState:i,ctx:r}=e;return wu(i,t)?(i[t]=n,!0):s!==$t&&Vt(s,t)?(s[t]=n,!0):Vt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:i,propsOptions:r,type:o}},a){let l,u;return!!(n[a]||e!==$t&&a[0]!=="$"&&Vt(e,a)||wu(t,a)||(l=r[0])&&Vt(l,a)||Vt(s,a)||Vt(Mo,a)||Vt(i.config.globalProperties,a)||(u=o.__cssModules)&&u[a])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Vt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function wp(e){return pt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let rh=!0;function xI(e){const t=Fy(e),n=e.proxy,s=e.ctx;rh=!1,t.beforeCreate&&Ep(t.beforeCreate,e,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:d,mounted:f,beforeUpdate:g,updated:_,activated:y,deactivated:b,beforeDestroy:I,beforeUnmount:R,destroyed:k,unmounted:O,render:L,renderTracked:G,renderTriggered:T,errorCaptured:v,serverPrefetch:E,expose:x,inheritAttrs:P,components:M,directives:A,filters:It}=t;if(u&&PI(u,s,null),o)for(const Q in o){const U=o[Q];wt(U)&&(s[Q]=U.bind(n))}if(i){const Q=i.call(n,n);Ht(Q)&&(e.data=ga(Q))}if(rh=!0,r)for(const Q in r){const U=r[Q],tt=wt(U)?U.bind(n,n):wt(U.get)?U.get.bind(n,n):Hn,Gt=!wt(U)&&wt(U.set)?U.set.bind(n):Hn,Ee=Bt({get:tt,set:Gt});Object.defineProperty(s,Q,{enumerable:!0,configurable:!0,get:()=>Ee.value,set:Jt=>Ee.value=Jt})}if(a)for(const Q in a)Ly(a[Q],s,n,Q);if(l){const Q=wt(l)?l.call(n):l;Reflect.ownKeys(Q).forEach(U=>{pl(U,Q[U])})}h&&Ep(h,e,"c");function ht(Q,U){pt(U)?U.forEach(tt=>Q(tt.bind(n))):U&&Q(U.bind(n))}if(ht(mI,d),ht(rs,f),ht(_I,g),ht(yI,_),ht(fI,y),ht(pI,b),ht(TI,v),ht(EI,G),ht(wI,T),ht(vI,R),ht(Vy,O),ht(bI,E),pt(x))if(x.length){const Q=e.exposed||(e.exposed={});x.forEach(U=>{Object.defineProperty(Q,U,{get:()=>n[U],set:tt=>n[U]=tt,enumerable:!0})})}else e.exposed||(e.exposed={});L&&e.render===Hn&&(e.render=L),P!=null&&(e.inheritAttrs=P),M&&(e.components=M),A&&(e.directives=A),E&&Oy(e)}function PI(e,t,n=Hn){pt(e)&&(e=oh(e));for(const s in e){const i=e[s];let r;Ht(i)?"default"in i?r=Cn(i.from||s,i.default,!0):r=Cn(i.from||s):r=Cn(i),le(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function Ep(e,t,n){ns(pt(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function Ly(e,t,n,s){let i=s.includes(".")?Xy(n,s):()=>n[s];if(me(e)){const r=t[e];wt(r)&&Es(i,r)}else if(wt(e))Es(i,e.bind(n));else if(Ht(e))if(pt(e))e.forEach(r=>Ly(r,t,n,s));else{const r=wt(e.handler)?e.handler.bind(n):t[e.handler];wt(r)&&Es(i,r,e)}}function Fy(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!i.length&&!n&&!s?l=t:(l={},i.length&&i.forEach(u=>Vl(l,u,o,!0)),Vl(l,t,o)),Ht(t)&&r.set(t,l),l}function Vl(e,t,n,s=!1){const{mixins:i,extends:r}=t;r&&Vl(e,r,n,!0),i&&i.forEach(o=>Vl(e,o,n,!0));for(const o in t)if(!(s&&o==="expose")){const a=kI[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const kI={data:Tp,props:Ip,emits:Ip,methods:yo,computed:yo,beforeCreate:Ye,created:Ye,beforeMount:Ye,mounted:Ye,beforeUpdate:Ye,updated:Ye,beforeDestroy:Ye,beforeUnmount:Ye,destroyed:Ye,unmounted:Ye,activated:Ye,deactivated:Ye,errorCaptured:Ye,serverPrefetch:Ye,components:yo,directives:yo,watch:OI,provide:Tp,inject:DI};function Tp(e,t){return t?e?function(){return He(wt(e)?e.call(this,this):e,wt(t)?t.call(this,this):t)}:t:e}function DI(e,t){return yo(oh(e),oh(t))}function oh(e){if(pt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ye(e,t){return e?[...new Set([].concat(e,t))]:t}function yo(e,t){return e?He(Object.create(null),e,t):t}function Ip(e,t){return e?pt(e)&&pt(t)?[...new Set([...e,...t])]:He(Object.create(null),wp(e),wp(t??{})):t}function OI(e,t){if(!e)return t;if(!t)return e;const n=He(Object.create(null),e);for(const s in t)n[s]=Ye(e[s],t[s]);return n}function Uy(){return{app:null,config:{isNativeTag:Z_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let MI=0;function NI(e,t){return function(s,i=null){wt(s)||(s=He({},s)),i!=null&&!Ht(i)&&(i=null);const r=Uy(),o=new WeakSet,a=[];let l=!1;const u=r.app={_uid:MI++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:_0,get config(){return r.config},set config(h){},use(h,...d){return o.has(h)||(h&&wt(h.install)?(o.add(h),h.install(u,...d)):wt(h)&&(o.add(h),h(u,...d))),u},mixin(h){return r.mixins.includes(h)||r.mixins.push(h),u},component(h,d){return d?(r.components[h]=d,u):r.components[h]},directive(h,d){return d?(r.directives[h]=d,u):r.directives[h]},mount(h,d,f){if(!l){const g=u._ceVNode||nn(s,i);return g.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),e(g,h,f),l=!0,u._container=h,h.__vue_app__=u,Cc(g.component)}},onUnmount(h){a.push(h)},unmount(){l&&(ns(a,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(h,d){return r.provides[h]=d,u},runWithContext(h){const d=Fi;Fi=u;try{return h()}finally{Fi=d}}};return u}}let Fi=null;function pl(e,t){if(ze){let n=ze.provides;const s=ze.parent&&ze.parent.provides;s===n&&(n=ze.provides=Object.create(s)),n[e]=t}}function Cn(e,t,n=!1){const s=nv();if(s||Fi){let i=Fi?Fi._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&wt(t)?t.call(s&&s.proxy):t}}function VI(){return!!(nv()||Fi)}const By={},jy=()=>Object.create(By),zy=e=>Object.getPrototypeOf(e)===By;function LI(e,t,n,s=!1){const i={},r=jy();e.propsDefaults=Object.create(null),$y(e,t,i,r);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=s?i:Iy(i):e.type.props?e.props=i:e.props=r,e.attrs=r}function FI(e,t,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=e,a=Dt(i),[l]=e.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let d=0;d<h.length;d++){let f=h[d];if(Sc(e.emitsOptions,f))continue;const g=t[f];if(l)if(Vt(r,f))g!==r[f]&&(r[f]=g,u=!0);else{const _=wn(f);i[_]=ah(l,a,_,g,e,!1)}else g!==r[f]&&(r[f]=g,u=!0)}}}else{$y(e,t,i,r)&&(u=!0);let h;for(const d in a)(!t||!Vt(t,d)&&((h=Yi(d))===d||!Vt(t,h)))&&(l?n&&(n[d]!==void 0||n[h]!==void 0)&&(i[d]=ah(l,a,d,void 0,e,!0)):delete i[d]);if(r!==a)for(const d in r)(!t||!Vt(t,d))&&(delete r[d],u=!0)}u&&gs(e.attrs,"set","")}function $y(e,t,n,s){const[i,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(xo(l))continue;const u=t[l];let h;i&&Vt(i,h=wn(l))?!r||!r.includes(h)?n[h]=u:(a||(a={}))[h]=u:Sc(e.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,o=!0)}if(r){const l=Dt(n),u=a||$t;for(let h=0;h<r.length;h++){const d=r[h];n[d]=ah(i,l,d,u[d],e,!Vt(u,d))}}return o}function ah(e,t,n,s,i,r){const o=e[n];if(o!=null){const a=Vt(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&wt(l)){const{propsDefaults:u}=i;if(n in u)s=u[n];else{const h=_a(i);s=u[n]=l.call(null,t),h()}}else s=l;i.ce&&i.ce._setProp(n,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Yi(n))&&(s=!0))}return s}const UI=new WeakMap;function Hy(e,t,n=!1){const s=n?UI:t.propsCache,i=s.get(e);if(i)return i;const r=e.props,o={},a=[];let l=!1;if(!wt(e)){const h=d=>{l=!0;const[f,g]=Hy(d,t,!0);He(o,f),g&&a.push(...g)};!n&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!r&&!l)return Ht(e)&&s.set(e,_r),_r;if(pt(r))for(let h=0;h<r.length;h++){const d=wn(r[h]);Ap(d)&&(o[d]=$t)}else if(r)for(const h in r){const d=wn(h);if(Ap(d)){const f=r[h],g=o[d]=pt(f)||wt(f)?{type:f}:He({},f),_=g.type;let y=!1,b=!0;if(pt(_))for(let I=0;I<_.length;++I){const R=_[I],k=wt(R)&&R.name;if(k==="Boolean"){y=!0;break}else k==="String"&&(b=!1)}else y=wt(_)&&_.name==="Boolean";g[0]=y,g[1]=b,(y||Vt(g,"default"))&&a.push(d)}}const u=[o,a];return Ht(e)&&s.set(e,u),u}function Ap(e){return e[0]!=="$"&&!xo(e)}const hd=e=>e==="_"||e==="_ctx"||e==="$stable",dd=e=>pt(e)?e.map($n):[$n(e)],BI=(e,t,n)=>{if(t._n)return t;const s=cI((...i)=>dd(t(...i)),n);return s._c=!1,s},Wy=(e,t,n)=>{const s=e._ctx;for(const i in e){if(hd(i))continue;const r=e[i];if(wt(r))t[i]=BI(i,r,s);else if(r!=null){const o=dd(r);t[i]=()=>o}}},qy=(e,t)=>{const n=dd(t);e.slots.default=()=>n},Gy=(e,t,n)=>{for(const s in t)(n||!hd(s))&&(e[s]=t[s])},jI=(e,t,n)=>{const s=e.slots=jy();if(e.vnode.shapeFlag&32){const i=t._;i?(Gy(s,t,n),n&&sy(s,"_",i,!0)):Wy(t,s)}else t&&qy(e,t)},zI=(e,t,n)=>{const{vnode:s,slots:i}=e;let r=!0,o=$t;if(s.shapeFlag&32){const a=t._;a?n&&a===1?r=!1:Gy(i,t,n):(r=!t.$stable,Wy(t,i)),o=t}else t&&(qy(e,t),o={default:1});if(r)for(const a in i)!hd(a)&&o[a]==null&&delete i[a]},cn=s0;function $I(e){return HI(e)}function HI(e,t){const n=Ec();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:d,nextSibling:f,setScopeId:g=Hn,insertStaticContent:_}=e,y=(S,D,N,z=null,W=null,B=null,nt=void 0,X=null,K=!!D.dynamicChildren)=>{if(S===D)return;S&&!uo(S,D)&&(z=j(S),Jt(S,W,B,!0),S=null),D.patchFlag===-2&&(K=!1,D.dynamicChildren=null);const{type:Y,ref:dt,shapeFlag:it}=D;switch(Y){case Rc:b(S,D,N,z);break;case ci:I(S,D,N,z);break;case Tu:S==null&&R(D,N,z,nt);break;case Tt:M(S,D,N,z,W,B,nt,X,K);break;default:it&1?L(S,D,N,z,W,B,nt,X,K):it&6?A(S,D,N,z,W,B,nt,X,K):(it&64||it&128)&&Y.process(S,D,N,z,W,B,nt,X,K,lt)}dt!=null&&W?Do(dt,S&&S.ref,B,D||S,!D):dt==null&&S&&S.ref!=null&&Do(S.ref,null,B,S,!0)},b=(S,D,N,z)=>{if(S==null)s(D.el=a(D.children),N,z);else{const W=D.el=S.el;D.children!==S.children&&u(W,D.children)}},I=(S,D,N,z)=>{S==null?s(D.el=l(D.children||""),N,z):D.el=S.el},R=(S,D,N,z)=>{[S.el,S.anchor]=_(S.children,D,N,z,S.el,S.anchor)},k=({el:S,anchor:D},N,z)=>{let W;for(;S&&S!==D;)W=f(S),s(S,N,z),S=W;s(D,N,z)},O=({el:S,anchor:D})=>{let N;for(;S&&S!==D;)N=f(S),i(S),S=N;i(D)},L=(S,D,N,z,W,B,nt,X,K)=>{D.type==="svg"?nt="svg":D.type==="math"&&(nt="mathml"),S==null?G(D,N,z,W,B,nt,X,K):E(S,D,W,B,nt,X,K)},G=(S,D,N,z,W,B,nt,X)=>{let K,Y;const{props:dt,shapeFlag:it,transition:ut,dirs:ft}=S;if(K=S.el=o(S.type,B,dt&&dt.is,dt),it&8?h(K,S.children):it&16&&v(S.children,K,null,z,W,Eu(S,B),nt,X),ft&&Si(S,null,z,"created"),T(K,S,S.scopeId,nt,z),dt){for(const Ft in dt)Ft!=="value"&&!xo(Ft)&&r(K,Ft,null,dt[Ft],B,z);"value"in dt&&r(K,"value",null,dt.value,B),(Y=dt.onVnodeBeforeMount)&&Vn(Y,z,S)}ft&&Si(S,null,z,"beforeMount");const At=WI(W,ut);At&&ut.beforeEnter(K),s(K,D,N),((Y=dt&&dt.onVnodeMounted)||At||ft)&&cn(()=>{Y&&Vn(Y,z,S),At&&ut.enter(K),ft&&Si(S,null,z,"mounted")},W)},T=(S,D,N,z,W)=>{if(N&&g(S,N),z)for(let B=0;B<z.length;B++)g(S,z[B]);if(W){let B=W.subTree;if(D===B||Zy(B.type)&&(B.ssContent===D||B.ssFallback===D)){const nt=W.vnode;T(S,nt,nt.scopeId,nt.slotScopeIds,W.parent)}}},v=(S,D,N,z,W,B,nt,X,K=0)=>{for(let Y=K;Y<S.length;Y++){const dt=S[Y]=X?qs(S[Y]):$n(S[Y]);y(null,dt,D,N,z,W,B,nt,X)}},E=(S,D,N,z,W,B,nt)=>{const X=D.el=S.el;let{patchFlag:K,dynamicChildren:Y,dirs:dt}=D;K|=S.patchFlag&16;const it=S.props||$t,ut=D.props||$t;let ft;if(N&&Ri(N,!1),(ft=ut.onVnodeBeforeUpdate)&&Vn(ft,N,D,S),dt&&Si(D,S,N,"beforeUpdate"),N&&Ri(N,!0),(it.innerHTML&&ut.innerHTML==null||it.textContent&&ut.textContent==null)&&h(X,""),Y?x(S.dynamicChildren,Y,X,N,z,Eu(D,W),B):nt||U(S,D,X,null,N,z,Eu(D,W),B,!1),K>0){if(K&16)P(X,it,ut,N,W);else if(K&2&&it.class!==ut.class&&r(X,"class",null,ut.class,W),K&4&&r(X,"style",it.style,ut.style,W),K&8){const At=D.dynamicProps;for(let Ft=0;Ft<At.length;Ft++){const kt=At[Ft],Ne=it[kt],Ve=ut[kt];(Ve!==Ne||kt==="value")&&r(X,kt,Ne,Ve,W,N)}}K&1&&S.children!==D.children&&h(X,D.children)}else!nt&&Y==null&&P(X,it,ut,N,W);((ft=ut.onVnodeUpdated)||dt)&&cn(()=>{ft&&Vn(ft,N,D,S),dt&&Si(D,S,N,"updated")},z)},x=(S,D,N,z,W,B,nt)=>{for(let X=0;X<D.length;X++){const K=S[X],Y=D[X],dt=K.el&&(K.type===Tt||!uo(K,Y)||K.shapeFlag&198)?d(K.el):N;y(K,Y,dt,null,z,W,B,nt,!0)}},P=(S,D,N,z,W)=>{if(D!==N){if(D!==$t)for(const B in D)!xo(B)&&!(B in N)&&r(S,B,D[B],null,W,z);for(const B in N){if(xo(B))continue;const nt=N[B],X=D[B];nt!==X&&B!=="value"&&r(S,B,X,nt,W,z)}"value"in N&&r(S,"value",D.value,N.value,W)}},M=(S,D,N,z,W,B,nt,X,K)=>{const Y=D.el=S?S.el:a(""),dt=D.anchor=S?S.anchor:a("");let{patchFlag:it,dynamicChildren:ut,slotScopeIds:ft}=D;ft&&(X=X?X.concat(ft):ft),S==null?(s(Y,N,z),s(dt,N,z),v(D.children||[],N,dt,W,B,nt,X,K)):it>0&&it&64&&ut&&S.dynamicChildren?(x(S.dynamicChildren,ut,N,W,B,nt,X),(D.key!=null||W&&D===W.subTree)&&Ky(S,D,!0)):U(S,D,N,dt,W,B,nt,X,K)},A=(S,D,N,z,W,B,nt,X,K)=>{D.slotScopeIds=X,S==null?D.shapeFlag&512?W.ctx.activate(D,N,z,nt,K):It(D,N,z,W,B,nt,K):_t(S,D,K)},It=(S,D,N,z,W,B,nt)=>{const X=S.component=u0(S,z,W);if(My(S)&&(X.ctx.renderer=lt),h0(X,!1,nt),X.asyncDep){if(W&&W.registerDep(X,ht,nt),!S.el){const K=X.subTree=nn(ci);I(null,K,D,N),S.placeholder=K.el}}else ht(X,S,D,N,W,B,nt)},_t=(S,D,N)=>{const z=D.component=S.component;if(e0(S,D,N))if(z.asyncDep&&!z.asyncResolved){Q(z,D,N);return}else z.next=D,z.update();else D.el=S.el,z.vnode=D},ht=(S,D,N,z,W,B,nt)=>{const X=()=>{if(S.isMounted){let{next:it,bu:ut,u:ft,parent:At,vnode:Ft}=S;{const an=Yy(S);if(an){it&&(it.el=Ft.el,Q(S,it,nt)),an.asyncDep.then(()=>{S.isUnmounted||X()});return}}let kt=it,Ne;Ri(S,!1),it?(it.el=Ft.el,Q(S,it,nt)):it=Ft,ut&&fl(ut),(Ne=it.props&&it.props.onVnodeBeforeUpdate)&&Vn(Ne,At,it,Ft),Ri(S,!0);const Ve=Rp(S),on=S.subTree;S.subTree=Ve,y(on,Ve,d(on.el),j(on),S,W,B),it.el=Ve.el,kt===null&&n0(S,Ve.el),ft&&cn(ft,W),(Ne=it.props&&it.props.onVnodeUpdated)&&cn(()=>Vn(Ne,At,it,Ft),W)}else{let it;const{el:ut,props:ft}=D,{bm:At,m:Ft,parent:kt,root:Ne,type:Ve}=S,on=Oo(D);Ri(S,!1),At&&fl(At),!on&&(it=ft&&ft.onVnodeBeforeMount)&&Vn(it,kt,D),Ri(S,!0);{Ne.ce&&Ne.ce._def.shadowRoot!==!1&&Ne.ce._injectChildStyle(Ve);const an=S.subTree=Rp(S);y(null,an,N,z,S,W,B),D.el=an.el}if(Ft&&cn(Ft,W),!on&&(it=ft&&ft.onVnodeMounted)){const an=D;cn(()=>Vn(it,kt,an),W)}(D.shapeFlag&256||kt&&Oo(kt.vnode)&&kt.vnode.shapeFlag&256)&&S.a&&cn(S.a,W),S.isMounted=!0,D=N=z=null}};S.scope.on();const K=S.effect=new uy(X);S.scope.off();const Y=S.update=K.run.bind(K),dt=S.job=K.runIfDirty.bind(K);dt.i=S,dt.id=S.uid,K.scheduler=()=>cd(dt),Ri(S,!0),Y()},Q=(S,D,N)=>{D.component=S;const z=S.vnode.props;S.vnode=D,S.next=null,FI(S,D.props,z,N),zI(S,D.children,N),Ss(),yp(S),Rs()},U=(S,D,N,z,W,B,nt,X,K=!1)=>{const Y=S&&S.children,dt=S?S.shapeFlag:0,it=D.children,{patchFlag:ut,shapeFlag:ft}=D;if(ut>0){if(ut&128){Gt(Y,it,N,z,W,B,nt,X,K);return}else if(ut&256){tt(Y,it,N,z,W,B,nt,X,K);return}}ft&8?(dt&16&&Zt(Y,W,B),it!==Y&&h(N,it)):dt&16?ft&16?Gt(Y,it,N,z,W,B,nt,X,K):Zt(Y,W,B,!0):(dt&8&&h(N,""),ft&16&&v(it,N,z,W,B,nt,X,K))},tt=(S,D,N,z,W,B,nt,X,K)=>{S=S||_r,D=D||_r;const Y=S.length,dt=D.length,it=Math.min(Y,dt);let ut;for(ut=0;ut<it;ut++){const ft=D[ut]=K?qs(D[ut]):$n(D[ut]);y(S[ut],ft,N,null,W,B,nt,X,K)}Y>dt?Zt(S,W,B,!0,!1,it):v(D,N,z,W,B,nt,X,K,it)},Gt=(S,D,N,z,W,B,nt,X,K)=>{let Y=0;const dt=D.length;let it=S.length-1,ut=dt-1;for(;Y<=it&&Y<=ut;){const ft=S[Y],At=D[Y]=K?qs(D[Y]):$n(D[Y]);if(uo(ft,At))y(ft,At,N,null,W,B,nt,X,K);else break;Y++}for(;Y<=it&&Y<=ut;){const ft=S[it],At=D[ut]=K?qs(D[ut]):$n(D[ut]);if(uo(ft,At))y(ft,At,N,null,W,B,nt,X,K);else break;it--,ut--}if(Y>it){if(Y<=ut){const ft=ut+1,At=ft<dt?D[ft].el:z;for(;Y<=ut;)y(null,D[Y]=K?qs(D[Y]):$n(D[Y]),N,At,W,B,nt,X,K),Y++}}else if(Y>ut)for(;Y<=it;)Jt(S[Y],W,B,!0),Y++;else{const ft=Y,At=Y,Ft=new Map;for(Y=At;Y<=ut;Y++){const Ce=D[Y]=K?qs(D[Y]):$n(D[Y]);Ce.key!=null&&Ft.set(Ce.key,Y)}let kt,Ne=0;const Ve=ut-At+1;let on=!1,an=0;const Tn=new Array(Ve);for(Y=0;Y<Ve;Y++)Tn[Y]=0;for(Y=ft;Y<=it;Y++){const Ce=S[Y];if(Ne>=Ve){Jt(Ce,W,B,!0);continue}let Te;if(Ce.key!=null)Te=Ft.get(Ce.key);else for(kt=At;kt<=ut;kt++)if(Tn[kt-At]===0&&uo(Ce,D[kt])){Te=kt;break}Te===void 0?Jt(Ce,W,B,!0):(Tn[Te-At]=Y+1,Te>=an?an=Te:on=!0,y(Ce,D[Te],N,null,W,B,nt,X,K),Ne++)}const nr=on?qI(Tn):_r;for(kt=nr.length-1,Y=Ve-1;Y>=0;Y--){const Ce=At+Y,Te=D[Ce],Kr=D[Ce+1],wi=Ce+1<dt?Kr.el||Kr.placeholder:z;Tn[Y]===0?y(null,Te,N,wi,W,B,nt,X,K):on&&(kt<0||Y!==nr[kt]?Ee(Te,N,wi,2):kt--)}}},Ee=(S,D,N,z,W=null)=>{const{el:B,type:nt,transition:X,children:K,shapeFlag:Y}=S;if(Y&6){Ee(S.component.subTree,D,N,z);return}if(Y&128){S.suspense.move(D,N,z);return}if(Y&64){nt.move(S,D,N,lt);return}if(nt===Tt){s(B,D,N);for(let it=0;it<K.length;it++)Ee(K[it],D,N,z);s(S.anchor,D,N);return}if(nt===Tu){k(S,D,N);return}if(z!==2&&Y&1&&X)if(z===0)X.beforeEnter(B),s(B,D,N),cn(()=>X.enter(B),W);else{const{leave:it,delayLeave:ut,afterLeave:ft}=X,At=()=>{S.ctx.isUnmounted?i(B):s(B,D,N)},Ft=()=>{B._isLeaving&&B[dI](!0),it(B,()=>{At(),ft&&ft()})};ut?ut(B,At,Ft):Ft()}else s(B,D,N)},Jt=(S,D,N,z=!1,W=!1)=>{const{type:B,props:nt,ref:X,children:K,dynamicChildren:Y,shapeFlag:dt,patchFlag:it,dirs:ut,cacheIndex:ft}=S;if(it===-2&&(W=!1),X!=null&&(Ss(),Do(X,null,N,S,!0),Rs()),ft!=null&&(D.renderCache[ft]=void 0),dt&256){D.ctx.deactivate(S);return}const At=dt&1&&ut,Ft=!Oo(S);let kt;if(Ft&&(kt=nt&&nt.onVnodeBeforeUnmount)&&Vn(kt,D,S),dt&6)Re(S.component,N,z);else{if(dt&128){S.suspense.unmount(N,z);return}At&&Si(S,null,D,"beforeUnmount"),dt&64?S.type.remove(S,D,N,lt,z):Y&&!Y.hasOnce&&(B!==Tt||it>0&&it&64)?Zt(Y,D,N,!1,!0):(B===Tt&&it&384||!W&&dt&16)&&Zt(K,D,N),z&&Ge(S)}(Ft&&(kt=nt&&nt.onVnodeUnmounted)||At)&&cn(()=>{kt&&Vn(kt,D,S),At&&Si(S,null,D,"unmounted")},N)},Ge=S=>{const{type:D,el:N,anchor:z,transition:W}=S;if(D===Tt){_e(N,z);return}if(D===Tu){O(S);return}const B=()=>{i(N),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(S.shapeFlag&1&&W&&!W.persisted){const{leave:nt,delayLeave:X}=W,K=()=>nt(N,B);X?X(S.el,B,K):K()}else B()},_e=(S,D)=>{let N;for(;S!==D;)N=f(S),i(S),S=N;i(D)},Re=(S,D,N)=>{const{bum:z,scope:W,job:B,subTree:nt,um:X,m:K,a:Y}=S;Sp(K),Sp(Y),z&&fl(z),W.stop(),B&&(B.flags|=8,Jt(nt,S,D,N)),X&&cn(X,D),cn(()=>{S.isUnmounted=!0},D)},Zt=(S,D,N,z=!1,W=!1,B=0)=>{for(let nt=B;nt<S.length;nt++)Jt(S[nt],D,N,z,W)},j=S=>{if(S.shapeFlag&6)return j(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const D=f(S.anchor||S.el),N=D&&D[uI];return N?f(N):D};let ot=!1;const st=(S,D,N)=>{S==null?D._vnode&&Jt(D._vnode,null,null,!0):y(D._vnode||null,S,D,null,null,null,N),D._vnode=S,ot||(ot=!0,yp(),xy(),ot=!1)},lt={p:y,um:Jt,m:Ee,r:Ge,mt:It,mc:v,pc:U,pbc:x,n:j,o:e};return{render:st,hydrate:void 0,createApp:NI(st)}}function Eu({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Ri({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function WI(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Ky(e,t,n=!1){const s=e.children,i=t.children;if(pt(s)&&pt(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=qs(i[r]),a.el=o.el),!n&&a.patchFlag!==-2&&Ky(o,a)),a.type===Rc&&a.patchFlag!==-1&&(a.el=o.el),a.type===ci&&!a.el&&(a.el=o.el)}}function qI(e){const t=e.slice(),n=[0];let s,i,r,o,a;const l=e.length;for(s=0;s<l;s++){const u=e[s];if(u!==0){if(i=n[n.length-1],e[i]<u){t[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,e[n[a]]<u?r=a+1:o=a;u<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=t[o];return n}function Yy(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Yy(t)}function Sp(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const GI=Symbol.for("v-scx"),KI=()=>Cn(GI);function Es(e,t,n){return Qy(e,t,n)}function Qy(e,t,n=$t){const{immediate:s,deep:i,flush:r,once:o}=n,a=He({},n),l=t&&s||!t&&r!=="post";let u;if(Jo){if(r==="sync"){const g=KI();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=Hn,g.resume=Hn,g.pause=Hn,g}}const h=ze;a.call=(g,_,y)=>ns(g,h,_,y);let d=!1;r==="post"?a.scheduler=g=>{cn(g,h&&h.suspense)}:r!=="sync"&&(d=!0,a.scheduler=(g,_)=>{_?g():cd(g)}),a.augmentJob=g=>{t&&(g.flags|=4),d&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const f=rI(e,t,a);return Jo&&(u?u.push(f):l&&f()),f}function YI(e,t,n){const s=this.proxy,i=me(e)?e.includes(".")?Xy(s,e):()=>s[e]:e.bind(s,s);let r;wt(t)?r=t:(r=t.handler,n=t);const o=_a(this),a=Qy(i,r.bind(s),n);return o(),a}function Xy(e,t){const n=t.split(".");return()=>{let s=e;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const QI=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${wn(t)}Modifiers`]||e[`${Yi(t)}Modifiers`];function XI(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||$t;let i=n;const r=t.startsWith("update:"),o=r&&QI(s,t.slice(7));o&&(o.trim&&(i=n.map(h=>me(h)?h.trim():h)),o.number&&(i=n.map(xl)));let a,l=s[a=mu(t)]||s[a=mu(wn(t))];!l&&r&&(l=s[a=mu(Yi(t))]),l&&ns(l,e,6,i);const u=s[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,ns(u,e,6,i)}}const JI=new WeakMap;function Jy(e,t,n=!1){const s=n?JI:t.emitsCache,i=s.get(e);if(i!==void 0)return i;const r=e.emits;let o={},a=!1;if(!wt(e)){const l=u=>{const h=Jy(u,t,!0);h&&(a=!0,He(o,h))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(Ht(e)&&s.set(e,null),null):(pt(r)?r.forEach(l=>o[l]=null):He(o,r),Ht(e)&&s.set(e,o),o)}function Sc(e,t){return!e||!vc(t)?!1:(t=t.slice(2).replace(/Once$/,""),Vt(e,t[0].toLowerCase()+t.slice(1))||Vt(e,Yi(t))||Vt(e,t))}function Rp(e){const{type:t,vnode:n,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:d,data:f,setupState:g,ctx:_,inheritAttrs:y}=e,b=Ml(e);let I,R;try{if(n.shapeFlag&4){const O=i||s,L=O;I=$n(u.call(L,O,h,d,g,f,_)),R=a}else{const O=t;I=$n(O.length>1?O(d,{attrs:a,slots:o,emit:l}):O(d,null)),R=t.props?a:ZI(a)}}catch(O){No.length=0,Ic(O,e,1),I=nn(ci)}let k=I;if(R&&y!==!1){const O=Object.keys(R),{shapeFlag:L}=k;O.length&&L&7&&(r&&O.some(Xh)&&(R=t0(R,r)),k=Rr(k,R,!1,!0))}return n.dirs&&(k=Rr(k,null,!1,!0),k.dirs=k.dirs?k.dirs.concat(n.dirs):n.dirs),n.transition&&ud(k,n.transition),I=k,Ml(b),I}const ZI=e=>{let t;for(const n in e)(n==="class"||n==="style"||vc(n))&&((t||(t={}))[n]=e[n]);return t},t0=(e,t)=>{const n={};for(const s in e)(!Xh(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function e0(e,t,n){const{props:s,children:i,component:r}=e,{props:o,children:a,patchFlag:l}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?Cp(s,o,u):!!o;if(l&8){const h=t.dynamicProps;for(let d=0;d<h.length;d++){const f=h[d];if(o[f]!==s[f]&&!Sc(u,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Cp(s,o,u):!0:!!o;return!1}function Cp(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==e[r]&&!Sc(n,r))return!0}return!1}function n0({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const Zy=e=>e.__isSuspense;function s0(e,t){t&&t.pendingBranch?pt(e)?t.effects.push(...e):t.effects.push(e):lI(e)}const Tt=Symbol.for("v-fgt"),Rc=Symbol.for("v-txt"),ci=Symbol.for("v-cmt"),Tu=Symbol.for("v-stc"),No=[];let fn=null;function q(e=!1){No.push(fn=e?null:[])}function i0(){No.pop(),fn=No[No.length-1]||null}let Xo=1;function Ll(e,t=!1){Xo+=e,e<0&&fn&&t&&(fn.hasOnce=!0)}function tv(e){return e.dynamicChildren=Xo>0?fn||_r:null,i0(),Xo>0&&fn&&fn.push(e),e}function J(e,t,n,s,i,r){return tv(C(e,t,n,s,i,r,!0))}function Se(e,t,n,s,i){return tv(nn(e,t,n,s,i,!0))}function Fl(e){return e?e.__v_isVNode===!0:!1}function uo(e,t){return e.type===t.type&&e.key===t.key}const ev=({key:e})=>e??null,gl=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?me(e)||le(e)||wt(e)?{i:dn,r:e,k:t,f:!!n}:e:null);function C(e,t=null,n=null,s=0,i=null,r=e===Tt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ev(t),ref:t&&gl(t),scopeId:ky,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:dn};return a?(fd(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=me(n)?8:16),Xo>0&&!o&&fn&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&fn.push(l),l}const nn=r0;function r0(e,t=null,n=null,s=0,i=null,r=!1){if((!e||e===SI)&&(e=ci),Fl(e)){const a=Rr(e,t,!0);return n&&fd(a,n),Xo>0&&!r&&fn&&(a.shapeFlag&6?fn[fn.indexOf(e)]=a:fn.push(a)),a.patchFlag=-2,a}if(m0(e)&&(e=e.__vccOpts),t){t=o0(t);let{class:a,style:l}=t;a&&!me(a)&&(t.class=En(a)),Ht(l)&&(ad(l)&&!pt(l)&&(l=He({},l)),t.style=As(l))}const o=me(e)?1:Zy(e)?128:hI(e)?64:Ht(e)?4:wt(e)?2:0;return C(e,t,n,s,i,o,r,!0)}function o0(e){return e?ad(e)||zy(e)?He({},e):e:null}function Rr(e,t,n=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=e,u=t?a0(i||{},t):i,h={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&ev(u),ref:t&&t.ref?n&&r?pt(r)?r.concat(gl(t)):[r,gl(t)]:gl(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Tt?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Rr(e.ssContent),ssFallback:e.ssFallback&&Rr(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&ud(h,l.clone(h)),h}function ie(e=" ",t=0){return nn(Rc,null,e,t)}function de(e="",t=!1){return t?(q(),Se(ci,null,e)):nn(ci,null,e)}function $n(e){return e==null||typeof e=="boolean"?nn(ci):pt(e)?nn(Tt,null,e.slice()):Fl(e)?qs(e):nn(Rc,null,String(e))}function qs(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Rr(e)}function fd(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(pt(t))n=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),fd(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!zy(t)?t._ctx=dn:i===3&&dn&&(dn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else wt(t)?(t={default:t,_ctx:dn},n=32):(t=String(t),s&64?(n=16,t=[ie(t)]):n=8);e.children=t,e.shapeFlag|=n}function a0(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=En([t.class,s.class]));else if(i==="style")t.style=As([t.style,s.style]);else if(vc(i)){const r=t[i],o=s[i];o&&r!==o&&!(pt(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=s[i])}return t}function Vn(e,t,n,s=null){ns(e,t,7,[n,s])}const l0=Uy();let c0=0;function u0(e,t,n){const s=e.type,i=(t?t.appContext:e.appContext)||l0,r={uid:c0++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ay(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Hy(s,i),emitsOptions:Jy(s,i),emit:null,emitted:null,propsDefaults:$t,inheritAttrs:s.inheritAttrs,ctx:$t,data:$t,props:$t,attrs:$t,slots:$t,refs:$t,setupState:$t,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=XI.bind(null,r),e.ce&&e.ce(r),r}let ze=null;const nv=()=>ze||dn;let Ul,lh;{const e=Ec(),t=(n,s)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};Ul=t("__VUE_INSTANCE_SETTERS__",n=>ze=n),lh=t("__VUE_SSR_SETTERS__",n=>Jo=n)}const _a=e=>{const t=ze;return Ul(e),e.scope.on(),()=>{e.scope.off(),Ul(t)}},xp=()=>{ze&&ze.scope.off(),Ul(null)};function sv(e){return e.vnode.shapeFlag&4}let Jo=!1;function h0(e,t=!1,n=!1){t&&lh(t);const{props:s,children:i}=e.vnode,r=sv(e);LI(e,s,r,t),jI(e,i,n||t);const o=r?d0(e,t):void 0;return t&&lh(!1),o}function d0(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,CI);const{setup:s}=n;if(s){Ss();const i=e.setupContext=s.length>1?p0(e):null,r=_a(e),o=ma(s,e,0,[e.props,i]),a=ty(o);if(Rs(),r(),(a||e.sp)&&!Oo(e)&&Oy(e),a){if(o.then(xp,xp),t)return o.then(l=>{Pp(e,l)}).catch(l=>{Ic(l,e,0)});e.asyncDep=o}else Pp(e,o)}else iv(e)}function Pp(e,t,n){wt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ht(t)&&(e.setupState=Sy(t)),iv(e)}function iv(e,t,n){const s=e.type;e.render||(e.render=s.render||Hn);{const i=_a(e);Ss();try{xI(e)}finally{Rs(),i()}}}const f0={get(e,t){return Be(e,"get",""),e[t]}};function p0(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,f0),slots:e.slots,emit:e.emit,expose:t}}function Cc(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Sy(ld(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Mo)return Mo[n](e)},has(t,n){return n in t||n in Mo}})):e.proxy}function g0(e,t=!0){return wt(e)?e.displayName||e.name:e.name||t&&e.__name}function m0(e){return wt(e)&&"__vccOpts"in e}const Bt=(e,t)=>sI(e,t,Jo);function rv(e,t,n){try{Ll(-1);const s=arguments.length;return s===2?Ht(t)&&!pt(t)?Fl(t)?nn(e,null,[t]):nn(e,t):nn(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Fl(n)&&(n=[n]),nn(e,t,n))}finally{Ll(1)}}const _0="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ch;const kp=typeof window<"u"&&window.trustedTypes;if(kp)try{ch=kp.createPolicy("vue",{createHTML:e=>e})}catch{}const ov=ch?e=>ch.createHTML(e):e=>e,y0="http://www.w3.org/2000/svg",v0="http://www.w3.org/1998/Math/MathML",fs=typeof document<"u"?document:null,Dp=fs&&fs.createElement("template"),b0={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const i=t==="svg"?fs.createElementNS(y0,e):t==="mathml"?fs.createElementNS(v0,e):n?fs.createElement(e,{is:n}):fs.createElement(e);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>fs.createTextNode(e),createComment:e=>fs.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>fs.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,i,r){const o=n?n.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{Dp.innerHTML=ov(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=Dp.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},w0=Symbol("_vtc");function E0(e,t,n){const s=e[w0];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Op=Symbol("_vod"),T0=Symbol("_vsh"),I0=Symbol(""),A0=/(?:^|;)\s*display\s*:/;function S0(e,t,n){const s=e.style,i=me(n);let r=!1;if(n&&!i){if(t)if(me(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&ml(s,a,"")}else for(const o in t)n[o]==null&&ml(s,o,"");for(const o in n)o==="display"&&(r=!0),ml(s,o,n[o])}else if(i){if(t!==n){const o=s[I0];o&&(n+=";"+o),s.cssText=n,r=A0.test(n)}}else t&&e.removeAttribute("style");Op in e&&(e[Op]=r?s.display:"",e[T0]&&(s.display="none"))}const Mp=/\s*!important$/;function ml(e,t,n){if(pt(n))n.forEach(s=>ml(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=R0(e,t);Mp.test(n)?e.setProperty(Yi(s),n.replace(Mp,""),"important"):e[s]=n}}const Np=["Webkit","Moz","ms"],Iu={};function R0(e,t){const n=Iu[t];if(n)return n;let s=wn(t);if(s!=="filter"&&s in e)return Iu[t]=s;s=wc(s);for(let i=0;i<Np.length;i++){const r=Np[i]+s;if(r in e)return Iu[t]=r}return t}const Vp="http://www.w3.org/1999/xlink";function Lp(e,t,n,s,i,r=CT(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Vp,t.slice(6,t.length)):e.setAttributeNS(Vp,t,n):n==null||r&&!iy(n)?e.removeAttribute(t):e.setAttribute(t,r?"":es(n)?String(n):n)}function Fp(e,t,n,s,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?ov(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=iy(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function _s(e,t,n,s){e.addEventListener(t,n,s)}function C0(e,t,n,s){e.removeEventListener(t,n,s)}const Up=Symbol("_vei");function x0(e,t,n,s,i=null){const r=e[Up]||(e[Up]={}),o=r[t];if(s&&o)o.value=s;else{const[a,l]=P0(t);if(s){const u=r[t]=O0(s,i);_s(e,a,u,l)}else o&&(C0(e,a,o,l),r[t]=void 0)}}const Bp=/(?:Once|Passive|Capture)$/;function P0(e){let t;if(Bp.test(e)){t={};let s;for(;s=e.match(Bp);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Yi(e.slice(2)),t]}let Au=0;const k0=Promise.resolve(),D0=()=>Au||(k0.then(()=>Au=0),Au=Date.now());function O0(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;ns(M0(s,n.value),t,5,[s])};return n.value=e,n.attached=D0(),n}function M0(e,t){if(pt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const jp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,N0=(e,t,n,s,i,r)=>{const o=i==="svg";t==="class"?E0(e,s,o):t==="style"?S0(e,n,s):vc(t)?Xh(t)||x0(e,t,n,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):V0(e,t,s,o))?(Fp(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Lp(e,t,s,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!me(s))?Fp(e,wn(t),s,r,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Lp(e,t,s,o))};function V0(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&jp(t)&&wt(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return jp(t)&&me(n)?!1:t in e}const ui=e=>{const t=e.props["onUpdate:modelValue"]||!1;return pt(t)?n=>fl(t,n):t};function L0(e){e.target.composing=!0}function zp(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const vn=Symbol("_assign"),re={created(e,{modifiers:{lazy:t,trim:n,number:s}},i){e[vn]=ui(i);const r=s||i.props&&i.props.type==="number";_s(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),r&&(a=xl(a)),e[vn](a)}),n&&_s(e,"change",()=>{e.value=e.value.trim()}),t||(_s(e,"compositionstart",L0),_s(e,"compositionend",zp),_s(e,"change",zp))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:i,number:r}},o){if(e[vn]=ui(o),e.composing)return;const a=(r||e.type==="number")&&!/^0\d/.test(e.value)?xl(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||i&&e.value.trim()===l)||(e.value=l))}},av={deep:!0,created(e,t,n){e[vn]=ui(n),_s(e,"change",()=>{const s=e._modelValue,i=Cr(e),r=e.checked,o=e[vn];if(pt(s)){const a=td(s,i),l=a!==-1;if(r&&!l)o(s.concat(i));else if(!r&&l){const u=[...s];u.splice(a,1),o(u)}}else if(Fr(s)){const a=new Set(s);r?a.add(i):a.delete(i),o(a)}else o(lv(e,r))})},mounted:$p,beforeUpdate(e,t,n){e[vn]=ui(n),$p(e,t,n)}};function $p(e,{value:t,oldValue:n},s){e._modelValue=t;let i;if(pt(t))i=td(t,s.props.value)>-1;else if(Fr(t))i=t.has(s.props.value);else{if(t===n)return;i=ji(t,lv(e,!0))}e.checked!==i&&(e.checked=i)}const F0={created(e,{value:t},n){e.checked=ji(t,n.props.value),e[vn]=ui(n),_s(e,"change",()=>{e[vn](Cr(e))})},beforeUpdate(e,{value:t,oldValue:n},s){e[vn]=ui(s),t!==n&&(e.checked=ji(t,s.props.value))}},qn={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const i=Fr(t);_s(e,"change",()=>{const r=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?xl(Cr(o)):Cr(o));e[vn](e.multiple?i?new Set(r):r:r[0]),e._assigning=!0,Ur(()=>{e._assigning=!1})}),e[vn]=ui(s)},mounted(e,{value:t}){Hp(e,t)},beforeUpdate(e,t,n){e[vn]=ui(n)},updated(e,{value:t}){e._assigning||Hp(e,t)}};function Hp(e,t){const n=e.multiple,s=pt(t);if(!(n&&!s&&!Fr(t))){for(let i=0,r=e.options.length;i<r;i++){const o=e.options[i],a=Cr(o);if(n)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(u=>String(u)===String(a)):o.selected=td(t,a)>-1}else o.selected=t.has(a);else if(ji(Cr(o),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Cr(e){return"_value"in e?e._value:e.value}function lv(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const U0={created(e,t,n){Ga(e,t,n,null,"created")},mounted(e,t,n){Ga(e,t,n,null,"mounted")},beforeUpdate(e,t,n,s){Ga(e,t,n,s,"beforeUpdate")},updated(e,t,n,s){Ga(e,t,n,s,"updated")}};function B0(e,t){switch(e){case"SELECT":return qn;case"TEXTAREA":return re;default:switch(t){case"checkbox":return av;case"radio":return F0;default:return re}}}function Ga(e,t,n,s,i){const o=B0(e.tagName,n.props&&n.props.type)[i];o&&o(e,t,n,s)}const j0=["ctrl","shift","alt","meta"],z0={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>j0.some(n=>e[`${n}Key`]&&!t.includes(n))},pd=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=((i,...r)=>{for(let o=0;o<t.length;o++){const a=z0[t[o]];if(a&&a(i,t))return}return e(i,...r)}))},$0=He({patchProp:N0},b0);let Wp;function H0(){return Wp||(Wp=$I($0))}const W0=((...e)=>{const t=H0().createApp(...e),{mount:n}=t;return t.mount=s=>{const i=G0(s);if(!i)return;const r=t._component;!wt(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,q0(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t});function q0(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function G0(e){return me(e)?document.querySelector(e):e}/*!
 * pinia v3.0.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let cv;const xc=e=>cv=e,uv=Symbol();function uh(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Vo;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Vo||(Vo={}));function K0(){const e=ly(!0),t=e.run(()=>Z({}));let n=[],s=[];const i=ld({install(r){xc(i),i._a=r,r.provide(uv,i),r.config.globalProperties.$pinia=i,s.forEach(o=>n.push(o)),s=[]},use(r){return this._a?n.push(r):s.push(r),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const hv=()=>{};function qp(e,t,n,s=hv){e.add(t);const i=()=>{e.delete(t)&&s()};return!n&&cy()&&PT(i),i}function ar(e,...t){e.forEach(n=>{n(...t)})}const Y0=e=>e(),Gp=Symbol(),Su=Symbol();function hh(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,s)=>e.set(s,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const s=t[n],i=e[n];uh(i)&&uh(s)&&e.hasOwnProperty(n)&&!le(s)&&!ni(s)?e[n]=hh(i,s):e[n]=s}return e}const Q0=Symbol();function X0(e){return!uh(e)||!Object.prototype.hasOwnProperty.call(e,Q0)}const{assign:Hs}=Object;function J0(e){return!!(le(e)&&e.effect)}function Z0(e,t,n,s){const{state:i,actions:r,getters:o}=t,a=n.state.value[e];let l;function u(){a||(n.state.value[e]=i?i():{});const h=ZT(n.state.value[e]);return Hs(h,r,Object.keys(o||{}).reduce((d,f)=>(d[f]=ld(Bt(()=>{xc(n);const g=n._s.get(e);return o[f].call(g,g)})),d),{}))}return l=dv(e,u,t,n,s,!0),l}function dv(e,t,n={},s,i,r){let o;const a=Hs({actions:{}},n),l={deep:!0};let u,h,d=new Set,f=new Set,g;const _=s.state.value[e];!r&&!_&&(s.state.value[e]={}),Z({});let y;function b(v){let E;u=h=!1,typeof v=="function"?(v(s.state.value[e]),E={type:Vo.patchFunction,storeId:e,events:g}):(hh(s.state.value[e],v),E={type:Vo.patchObject,payload:v,storeId:e,events:g});const x=y=Symbol();Ur().then(()=>{y===x&&(u=!0)}),h=!0,ar(d,E,s.state.value[e])}const I=r?function(){const{state:E}=n,x=E?E():{};this.$patch(P=>{Hs(P,x)})}:hv;function R(){o.stop(),d.clear(),f.clear(),s._s.delete(e)}const k=(v,E="")=>{if(Gp in v)return v[Su]=E,v;const x=function(){xc(s);const P=Array.from(arguments),M=new Set,A=new Set;function It(Q){M.add(Q)}function _t(Q){A.add(Q)}ar(f,{args:P,name:x[Su],store:L,after:It,onError:_t});let ht;try{ht=v.apply(this&&this.$id===e?this:L,P)}catch(Q){throw ar(A,Q),Q}return ht instanceof Promise?ht.then(Q=>(ar(M,Q),Q)).catch(Q=>(ar(A,Q),Promise.reject(Q))):(ar(M,ht),ht)};return x[Gp]=!0,x[Su]=E,x},O={_p:s,$id:e,$onAction:qp.bind(null,f),$patch:b,$reset:I,$subscribe(v,E={}){const x=qp(d,v,E.detached,()=>P()),P=o.run(()=>Es(()=>s.state.value[e],M=>{(E.flush==="sync"?h:u)&&v({storeId:e,type:Vo.direct,events:g},M)},Hs({},l,E)));return x},$dispose:R},L=ga(O);s._s.set(e,L);const T=(s._a&&s._a.runWithContext||Y0)(()=>s._e.run(()=>(o=ly()).run(()=>t({action:k}))));for(const v in T){const E=T[v];if(le(E)&&!J0(E)||ni(E))r||(_&&X0(E)&&(le(E)?E.value=_[v]:hh(E,_[v])),s.state.value[e][v]=E);else if(typeof E=="function"){const x=k(E,v);T[v]=x,a.actions[v]=E}}return Hs(L,T),Hs(Dt(L),T),Object.defineProperty(L,"$state",{get:()=>s.state.value[e],set:v=>{b(E=>{Hs(E,v)})}}),s._p.forEach(v=>{Hs(L,o.run(()=>v({store:L,app:s._a,pinia:s,options:a})))}),_&&r&&n.hydrate&&n.hydrate(L.$state,_),u=!0,h=!0,L}/*! #__NO_SIDE_EFFECTS__ */function tA(e,t,n){let s;const i=typeof t=="function";s=i?n:t;function r(o,a){const l=VI();return o=o||(l?Cn(uv,null):null),o&&xc(o),o=cv,o._s.has(e)||(i?dv(e,t,s,o):Z0(e,s,o)),o._s.get(e)}return r.$id=e,r}const eA={class:"app_holder"},nA={__name:"App",setup(e){return(t,n)=>{const s=AI("router-view");return q(),J("div",eA,[nn(s)])}}};/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const hr=typeof document<"u";function fv(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function sA(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&fv(e.default)}const Nt=Object.assign;function Ru(e,t){const n={};for(const s in t){const i=t[s];n[s]=Pn(i)?i.map(e):e(i)}return n}const Lo=()=>{},Pn=Array.isArray;function Kp(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}const pv=/#/g,iA=/&/g,rA=/\//g,oA=/=/g,aA=/\?/g,gv=/\+/g,lA=/%5B/g,cA=/%5D/g,mv=/%5E/g,uA=/%60/g,_v=/%7B/g,hA=/%7C/g,yv=/%7D/g,dA=/%20/g;function gd(e){return e==null?"":encodeURI(""+e).replace(hA,"|").replace(lA,"[").replace(cA,"]")}function fA(e){return gd(e).replace(_v,"{").replace(yv,"}").replace(mv,"^")}function dh(e){return gd(e).replace(gv,"%2B").replace(dA,"+").replace(pv,"%23").replace(iA,"%26").replace(uA,"`").replace(_v,"{").replace(yv,"}").replace(mv,"^")}function pA(e){return dh(e).replace(oA,"%3D")}function gA(e){return gd(e).replace(pv,"%23").replace(aA,"%3F")}function mA(e){return gA(e).replace(rA,"%2F")}function Zo(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const _A=/\/$/,yA=e=>e.replace(_A,"");function Cu(e,t,n="/"){let s,i={},r="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(s=t.slice(0,l),r=t.slice(l,a>0?a:t.length),i=e(r.slice(1))),a>=0&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=EA(s??t,n),{fullPath:s+r+o,path:s,query:i,hash:Zo(o)}}function vA(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Yp(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function bA(e,t,n){const s=t.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&xr(t.matched[s],n.matched[i])&&vv(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function xr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function vv(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!wA(e[n],t[n]))return!1;return!0}function wA(e,t){return Pn(e)?Qp(e,t):Pn(t)?Qp(t,e):e===t}function Qp(e,t){return Pn(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function EA(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const zs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let fh=(function(e){return e.pop="pop",e.push="push",e})({}),xu=(function(e){return e.back="back",e.forward="forward",e.unknown="",e})({});function TA(e){if(!e)if(hr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),yA(e)}const IA=/^[^#]+#/;function AA(e,t){return e.replace(IA,"#")+t}function SA(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const Pc=()=>({left:window.scrollX,top:window.scrollY});function RA(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=SA(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Xp(e,t){return(history.state?history.state.position-t:-1)+e}const ph=new Map;function CA(e,t){ph.set(e,t)}function xA(e){const t=ph.get(e);return ph.delete(e),t}function PA(e){return typeof e=="string"||e&&typeof e=="object"}function bv(e){return typeof e=="string"||typeof e=="symbol"}let se=(function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e})({});const wv=Symbol("");se.MATCHER_NOT_FOUND+"",se.NAVIGATION_GUARD_REDIRECT+"",se.NAVIGATION_ABORTED+"",se.NAVIGATION_CANCELLED+"",se.NAVIGATION_DUPLICATED+"";function Pr(e,t){return Nt(new Error,{type:e,[wv]:!0},t)}function cs(e,t){return e instanceof Error&&wv in e&&(t==null||!!(e.type&t))}const kA=["params","query","hash"];function DA(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const n of kA)n in e&&(t[n]=e[n]);return JSON.stringify(t,null,2)}function OA(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<n.length;++s){const i=n[s].replace(gv," "),r=i.indexOf("="),o=Zo(r<0?i:i.slice(0,r)),a=r<0?null:Zo(i.slice(r+1));if(o in t){let l=t[o];Pn(l)||(l=t[o]=[l]),l.push(a)}else t[o]=a}return t}function Jp(e){let t="";for(let n in e){const s=e[n];if(n=pA(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(Pn(s)?s.map(i=>i&&dh(i)):[s&&dh(s)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function MA(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=Pn(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const NA=Symbol(""),Zp=Symbol(""),kc=Symbol(""),Ev=Symbol(""),gh=Symbol("");function ho(){let e=[];function t(s){return e.push(s),()=>{const i=e.indexOf(s);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Gs(e,t,n,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const u=f=>{f===!1?l(Pr(se.NAVIGATION_ABORTED,{from:n,to:t})):f instanceof Error?l(f):PA(f)?l(Pr(se.NAVIGATION_GUARD_REDIRECT,{from:t,to:f})):(o&&s.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},h=r(()=>e.call(s&&s.instances[i],t,n,u));let d=Promise.resolve(h);e.length<3&&(d=d.then(u)),d.catch(f=>l(f))})}function Pu(e,t,n,s,i=r=>r()){const r=[];for(const o of e)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(fv(l)){const u=(l.__vccOpts||l)[t];u&&r.push(Gs(u,n,s,o,a,i))}else{let u=l();r.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=sA(h)?h.default:h;o.mods[a]=h,o.components[a]=d;const f=(d.__vccOpts||d)[t];return f&&Gs(f,n,s,o,a,i)()}))}}return r}function VA(e,t){const n=[],s=[],i=[],r=Math.max(t.matched.length,e.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(e.matched.find(u=>xr(u,a))?s.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(u=>xr(u,l))||i.push(l))}return[n,s,i]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let LA=()=>location.protocol+"//"+location.host;function Tv(e,t){const{pathname:n,search:s,hash:i}=t,r=e.indexOf("#");if(r>-1){let o=i.includes(e.slice(r))?e.slice(r).length:1,a=i.slice(o);return a[0]!=="/"&&(a="/"+a),Yp(a,"")}return Yp(n,e)+s+i}function FA(e,t,n,s){let i=[],r=[],o=null;const a=({state:f})=>{const g=Tv(e,location),_=n.value,y=t.value;let b=0;if(f){if(n.value=g,t.value=f,o&&o===_){o=null;return}b=y?f.position-y.position:0}else s(g);i.forEach(I=>{I(n.value,_,{delta:b,type:fh.pop,direction:b?b>0?xu.forward:xu.back:xu.unknown})})};function l(){o=n.value}function u(f){i.push(f);const g=()=>{const _=i.indexOf(f);_>-1&&i.splice(_,1)};return r.push(g),g}function h(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(Nt({},f.state,{scroll:Pc()}),"")}}function d(){for(const f of r)f();r=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:l,listen:u,destroy:d}}function tg(e,t,n,s=!1,i=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:i?Pc():null}}function UA(e){const{history:t,location:n}=window,s={value:Tv(e,n)},i={value:t.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,u,h){const d=e.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?e:e.slice(d))+l:LA()+e+l;try{t[h?"replaceState":"pushState"](u,"",f),i.value=u}catch(g){console.error(g),n[h?"replace":"assign"](f)}}function o(l,u){r(l,Nt({},t.state,tg(i.value.back,l,i.value.forward,!0),u,{position:i.value.position}),!0),s.value=l}function a(l,u){const h=Nt({},i.value,t.state,{forward:l,scroll:Pc()});r(h.current,h,!0),r(l,Nt({},tg(s.value,l,null),{position:h.position+1},u),!1),s.value=l}return{location:s,state:i,push:a,replace:o}}function BA(e){e=TA(e);const t=UA(e),n=FA(e,t.state,t.location,t.replace);function s(r,o=!0){o||n.pauseListeners(),history.go(r)}const i=Nt({location:"",base:e,go:s,createHref:AA.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}let Mi=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e})({});var ve=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e})(ve||{});const jA={type:Mi.Static,value:""},zA=/[a-zA-Z0-9_]/;function $A(e){if(!e)return[[]];if(e==="/")return[[jA]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(g){throw new Error(`ERR (${n})/"${u}": ${g}`)}let n=ve.Static,s=n;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,l,u="",h="";function d(){u&&(n===ve.Static?r.push({type:Mi.Static,value:u}):n===ve.Param||n===ve.ParamRegExp||n===ve.ParamRegExpEnd?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:Mi.Param,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function f(){u+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==ve.ParamRegExp){s=n,n=ve.EscapeNext;continue}switch(n){case ve.Static:l==="/"?(u&&d(),o()):l===":"?(d(),n=ve.Param):f();break;case ve.EscapeNext:f(),n=s;break;case ve.Param:l==="("?n=ve.ParamRegExp:zA.test(l)?f():(d(),n=ve.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case ve.ParamRegExp:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=ve.ParamRegExpEnd:h+=l;break;case ve.ParamRegExpEnd:d(),n=ve.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:t("Unknown state");break}}return n===ve.ParamRegExp&&t(`Unfinished custom RegExp for param "${u}"`),d(),o(),i}const eg="[^/]+?",HA={sensitive:!1,strict:!1,start:!0,end:!0};var Qe=(function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e})(Qe||{});const WA=/[.+*?^${}()[\]/\\]/g;function qA(e,t){const n=Nt({},HA,t),s=[];let i=n.start?"^":"";const r=[];for(const u of e){const h=u.length?[]:[Qe.Root];n.strict&&!u.length&&(i+="/");for(let d=0;d<u.length;d++){const f=u[d];let g=Qe.Segment+(n.sensitive?Qe.BonusCaseSensitive:0);if(f.type===Mi.Static)d||(i+="/"),i+=f.value.replace(WA,"\\$&"),g+=Qe.Static;else if(f.type===Mi.Param){const{value:_,repeatable:y,optional:b,regexp:I}=f;r.push({name:_,repeatable:y,optional:b});const R=I||eg;if(R!==eg){g+=Qe.BonusCustomRegExp;try{`${R}`}catch(O){throw new Error(`Invalid custom RegExp for param "${_}" (${R}): `+O.message)}}let k=y?`((?:${R})(?:/(?:${R}))*)`:`(${R})`;d||(k=b&&u.length<2?`(?:/${k})`:"/"+k),b&&(k+="?"),i+=k,g+=Qe.Dynamic,b&&(g+=Qe.BonusOptional),y&&(g+=Qe.BonusRepeatable),R===".*"&&(g+=Qe.BonusWildcard)}h.push(g)}s.push(h)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=Qe.BonusStrict}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(u){const h=u.match(o),d={};if(!h)return null;for(let f=1;f<h.length;f++){const g=h[f]||"",_=r[f-1];d[_.name]=g&&_.repeatable?g.split("/"):g}return d}function l(u){let h="",d=!1;for(const f of e){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const g of f)if(g.type===Mi.Static)h+=g.value;else if(g.type===Mi.Param){const{value:_,repeatable:y,optional:b}=g,I=_ in u?u[_]:"";if(Pn(I)&&!y)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const R=Pn(I)?I.join("/"):I;if(!R)if(b)f.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${_}"`);h+=R}}return h||"/"}return{re:o,score:s,keys:r,parse:a,stringify:l}}function GA(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===Qe.Static+Qe.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===Qe.Static+Qe.Segment?1:-1:0}function Iv(e,t){let n=0;const s=e.score,i=t.score;for(;n<s.length&&n<i.length;){const r=GA(s[n],i[n]);if(r)return r;n++}if(Math.abs(i.length-s.length)===1){if(ng(s))return 1;if(ng(i))return-1}return i.length-s.length}function ng(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const KA={strict:!1,end:!0,sensitive:!1};function YA(e,t,n){const s=qA($A(e.path),n),i=Nt(s,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function QA(e,t){const n=[],s=new Map;t=Kp(KA,t);function i(d){return s.get(d)}function r(d,f,g){const _=!g,y=ig(d);y.aliasOf=g&&g.record;const b=Kp(t,d),I=[y];if("alias"in d){const O=typeof d.alias=="string"?[d.alias]:d.alias;for(const L of O)I.push(ig(Nt({},y,{components:g?g.record.components:y.components,path:L,aliasOf:g?g.record:y})))}let R,k;for(const O of I){const{path:L}=O;if(f&&L[0]!=="/"){const G=f.record.path,T=G[G.length-1]==="/"?"":"/";O.path=f.record.path+(L&&T+L)}if(R=YA(O,f,b),g?g.alias.push(R):(k=k||R,k!==R&&k.alias.push(R),_&&d.name&&!rg(R)&&o(d.name)),Av(R)&&l(R),y.children){const G=y.children;for(let T=0;T<G.length;T++)r(G[T],R,g&&g.children[T])}g=g||R}return k?()=>{o(k)}:Lo}function o(d){if(bv(d)){const f=s.get(d);f&&(s.delete(d),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(d);f>-1&&(n.splice(f,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const f=ZA(d,n);n.splice(f,0,d),d.record.name&&!rg(d)&&s.set(d.record.name,d)}function u(d,f){let g,_={},y,b;if("name"in d&&d.name){if(g=s.get(d.name),!g)throw Pr(se.MATCHER_NOT_FOUND,{location:d});b=g.record.name,_=Nt(sg(f.params,g.keys.filter(k=>!k.optional).concat(g.parent?g.parent.keys.filter(k=>k.optional):[]).map(k=>k.name)),d.params&&sg(d.params,g.keys.map(k=>k.name))),y=g.stringify(_)}else if(d.path!=null)y=d.path,g=n.find(k=>k.re.test(y)),g&&(_=g.parse(y),b=g.record.name);else{if(g=f.name?s.get(f.name):n.find(k=>k.re.test(f.path)),!g)throw Pr(se.MATCHER_NOT_FOUND,{location:d,currentLocation:f});b=g.record.name,_=Nt({},f.params,d.params),y=g.stringify(_)}const I=[];let R=g;for(;R;)I.unshift(R.record),R=R.parent;return{name:b,path:y,params:_,matched:I,meta:JA(I)}}e.forEach(d=>r(d));function h(){n.length=0,s.clear()}return{addRoute:r,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:i}}function sg(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function ig(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:XA(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function XA(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function rg(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function JA(e){return e.reduce((t,n)=>Nt(t,n.meta),{})}function ZA(e,t){let n=0,s=t.length;for(;n!==s;){const r=n+s>>1;Iv(e,t[r])<0?s=r:n=r+1}const i=tS(e);return i&&(s=t.lastIndexOf(i,s-1)),s}function tS(e){let t=e;for(;t=t.parent;)if(Av(t)&&Iv(e,t)===0)return t}function Av({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function og(e){const t=Cn(kc),n=Cn(Ev),s=Bt(()=>{const l=Wn(e.to);return t.resolve(l)}),i=Bt(()=>{const{matched:l}=s.value,{length:u}=l,h=l[u-1],d=n.matched;if(!h||!d.length)return-1;const f=d.findIndex(xr.bind(null,h));if(f>-1)return f;const g=ag(l[u-2]);return u>1&&ag(h)===g&&d[d.length-1].path!==g?d.findIndex(xr.bind(null,l[u-2])):f}),r=Bt(()=>i.value>-1&&rS(n.params,s.value.params)),o=Bt(()=>i.value>-1&&i.value===n.matched.length-1&&vv(n.params,s.value.params));function a(l={}){if(iS(l)){const u=t[Wn(e.replace)?"replace":"push"](Wn(e.to)).catch(Lo);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:Bt(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}function eS(e){return e.length===1?e[0]:e}const nS=Dy({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:og,setup(e,{slots:t}){const n=ga(og(e)),{options:s}=Cn(kc),i=Bt(()=>({[lg(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[lg(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&eS(t.default(n));return e.custom?r:rv("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),sS=nS;function iS(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function rS(e,t){for(const n in t){const s=t[n],i=e[n];if(typeof s=="string"){if(s!==i)return!1}else if(!Pn(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function ag(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const lg=(e,t,n)=>e??t??n,oS=Dy({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=Cn(gh),i=Bt(()=>e.route||s.value),r=Cn(Zp,0),o=Bt(()=>{let u=Wn(r);const{matched:h}=i.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),a=Bt(()=>i.value.matched[o.value]);pl(Zp,Bt(()=>o.value+1)),pl(NA,a),pl(gh,i);const l=Z();return Es(()=>[l.value,a.value,e.name],([u,h,d],[f,g,_])=>{h&&(h.instances[d]=u,g&&g!==h&&u&&u===f&&(h.leaveGuards.size||(h.leaveGuards=g.leaveGuards),h.updateGuards.size||(h.updateGuards=g.updateGuards))),u&&h&&(!g||!xr(h,g)||!f)&&(h.enterCallbacks[d]||[]).forEach(y=>y(u))},{flush:"post"}),()=>{const u=i.value,h=e.name,d=a.value,f=d&&d.components[h];if(!f)return cg(n.default,{Component:f,route:u});const g=d.props[h],_=g?g===!0?u.params:typeof g=="function"?g(u):g:null,b=rv(f,Nt({},_,t,{onVnodeUnmounted:I=>{I.component.isUnmounted&&(d.instances[h]=null)},ref:l}));return cg(n.default,{Component:b,route:u})||b}}});function cg(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const aS=oS;function lS(e){const t=QA(e.routes,e),n=e.parseQuery||OA,s=e.stringifyQuery||Jp,i=e.history,r=ho(),o=ho(),a=ho(),l=QT(zs);let u=zs;hr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Ru.bind(null,j=>""+j),d=Ru.bind(null,mA),f=Ru.bind(null,Zo);function g(j,ot){let st,lt;return bv(j)?(st=t.getRecordMatcher(j),lt=ot):lt=j,t.addRoute(lt,st)}function _(j){const ot=t.getRecordMatcher(j);ot&&t.removeRoute(ot)}function y(){return t.getRoutes().map(j=>j.record)}function b(j){return!!t.getRecordMatcher(j)}function I(j,ot){if(ot=Nt({},ot||l.value),typeof j=="string"){const N=Cu(n,j,ot.path),z=t.resolve({path:N.path},ot),W=i.createHref(N.fullPath);return Nt(N,z,{params:f(z.params),hash:Zo(N.hash),redirectedFrom:void 0,href:W})}let st;if(j.path!=null)st=Nt({},j,{path:Cu(n,j.path,ot.path).path});else{const N=Nt({},j.params);for(const z in N)N[z]==null&&delete N[z];st=Nt({},j,{params:d(N)}),ot.params=d(ot.params)}const lt=t.resolve(st,ot),St=j.hash||"";lt.params=h(f(lt.params));const S=vA(s,Nt({},j,{hash:fA(St),path:lt.path})),D=i.createHref(S);return Nt({fullPath:S,hash:St,query:s===Jp?MA(j.query):j.query||{}},lt,{redirectedFrom:void 0,href:D})}function R(j){return typeof j=="string"?Cu(n,j,l.value.path):Nt({},j)}function k(j,ot){if(u!==j)return Pr(se.NAVIGATION_CANCELLED,{from:ot,to:j})}function O(j){return T(j)}function L(j){return O(Nt(R(j),{replace:!0}))}function G(j,ot){const st=j.matched[j.matched.length-1];if(st&&st.redirect){const{redirect:lt}=st;let St=typeof lt=="function"?lt(j,ot):lt;return typeof St=="string"&&(St=St.includes("?")||St.includes("#")?St=R(St):{path:St},St.params={}),Nt({query:j.query,hash:j.hash,params:St.path!=null?{}:j.params},St)}}function T(j,ot){const st=u=I(j),lt=l.value,St=j.state,S=j.force,D=j.replace===!0,N=G(st,lt);if(N)return T(Nt(R(N),{state:typeof N=="object"?Nt({},St,N.state):St,force:S,replace:D}),ot||st);const z=st;z.redirectedFrom=ot;let W;return!S&&bA(s,lt,st)&&(W=Pr(se.NAVIGATION_DUPLICATED,{to:z,from:lt}),Ee(lt,lt,!0,!1)),(W?Promise.resolve(W):x(z,lt)).catch(B=>cs(B)?cs(B,se.NAVIGATION_GUARD_REDIRECT)?B:Gt(B):U(B,z,lt)).then(B=>{if(B){if(cs(B,se.NAVIGATION_GUARD_REDIRECT))return T(Nt({replace:D},R(B.to),{state:typeof B.to=="object"?Nt({},St,B.to.state):St,force:S}),ot||z)}else B=M(z,lt,!0,D,St);return P(z,lt,B),B})}function v(j,ot){const st=k(j,ot);return st?Promise.reject(st):Promise.resolve()}function E(j){const ot=_e.values().next().value;return ot&&typeof ot.runWithContext=="function"?ot.runWithContext(j):j()}function x(j,ot){let st;const[lt,St,S]=VA(j,ot);st=Pu(lt.reverse(),"beforeRouteLeave",j,ot);for(const N of lt)N.leaveGuards.forEach(z=>{st.push(Gs(z,j,ot))});const D=v.bind(null,j,ot);return st.push(D),Zt(st).then(()=>{st=[];for(const N of r.list())st.push(Gs(N,j,ot));return st.push(D),Zt(st)}).then(()=>{st=Pu(St,"beforeRouteUpdate",j,ot);for(const N of St)N.updateGuards.forEach(z=>{st.push(Gs(z,j,ot))});return st.push(D),Zt(st)}).then(()=>{st=[];for(const N of S)if(N.beforeEnter)if(Pn(N.beforeEnter))for(const z of N.beforeEnter)st.push(Gs(z,j,ot));else st.push(Gs(N.beforeEnter,j,ot));return st.push(D),Zt(st)}).then(()=>(j.matched.forEach(N=>N.enterCallbacks={}),st=Pu(S,"beforeRouteEnter",j,ot,E),st.push(D),Zt(st))).then(()=>{st=[];for(const N of o.list())st.push(Gs(N,j,ot));return st.push(D),Zt(st)}).catch(N=>cs(N,se.NAVIGATION_CANCELLED)?N:Promise.reject(N))}function P(j,ot,st){a.list().forEach(lt=>E(()=>lt(j,ot,st)))}function M(j,ot,st,lt,St){const S=k(j,ot);if(S)return S;const D=ot===zs,N=hr?history.state:{};st&&(lt||D?i.replace(j.fullPath,Nt({scroll:D&&N&&N.scroll},St)):i.push(j.fullPath,St)),l.value=j,Ee(j,ot,st,D),Gt()}let A;function It(){A||(A=i.listen((j,ot,st)=>{if(!Re.listening)return;const lt=I(j),St=G(lt,Re.currentRoute.value);if(St){T(Nt(St,{replace:!0,force:!0}),lt).catch(Lo);return}u=lt;const S=l.value;hr&&CA(Xp(S.fullPath,st.delta),Pc()),x(lt,S).catch(D=>cs(D,se.NAVIGATION_ABORTED|se.NAVIGATION_CANCELLED)?D:cs(D,se.NAVIGATION_GUARD_REDIRECT)?(T(Nt(R(D.to),{force:!0}),lt).then(N=>{cs(N,se.NAVIGATION_ABORTED|se.NAVIGATION_DUPLICATED)&&!st.delta&&st.type===fh.pop&&i.go(-1,!1)}).catch(Lo),Promise.reject()):(st.delta&&i.go(-st.delta,!1),U(D,lt,S))).then(D=>{D=D||M(lt,S,!1),D&&(st.delta&&!cs(D,se.NAVIGATION_CANCELLED)?i.go(-st.delta,!1):st.type===fh.pop&&cs(D,se.NAVIGATION_ABORTED|se.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),P(lt,S,D)}).catch(Lo)}))}let _t=ho(),ht=ho(),Q;function U(j,ot,st){Gt(j);const lt=ht.list();return lt.length?lt.forEach(St=>St(j,ot,st)):console.error(j),Promise.reject(j)}function tt(){return Q&&l.value!==zs?Promise.resolve():new Promise((j,ot)=>{_t.add([j,ot])})}function Gt(j){return Q||(Q=!j,It(),_t.list().forEach(([ot,st])=>j?st(j):ot()),_t.reset()),j}function Ee(j,ot,st,lt){const{scrollBehavior:St}=e;if(!hr||!St)return Promise.resolve();const S=!st&&xA(Xp(j.fullPath,0))||(lt||!st)&&history.state&&history.state.scroll||null;return Ur().then(()=>St(j,ot,S)).then(D=>D&&RA(D)).catch(D=>U(D,j,ot))}const Jt=j=>i.go(j);let Ge;const _e=new Set,Re={currentRoute:l,listening:!0,addRoute:g,removeRoute:_,clearRoutes:t.clearRoutes,hasRoute:b,getRoutes:y,resolve:I,options:e,push:O,replace:L,go:Jt,back:()=>Jt(-1),forward:()=>Jt(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:ht.add,isReady:tt,install(j){j.component("RouterLink",sS),j.component("RouterView",aS),j.config.globalProperties.$router=Re,Object.defineProperty(j.config.globalProperties,"$route",{enumerable:!0,get:()=>Wn(l)}),hr&&!Ge&&l.value===zs&&(Ge=!0,O(i.location).catch(lt=>{}));const ot={};for(const lt in zs)Object.defineProperty(ot,lt,{get:()=>l.value[lt],enumerable:!0});j.provide(kc,Re),j.provide(Ev,Iy(ot)),j.provide(gh,l);const st=j.unmount;_e.add(j),j.unmount=function(){_e.delete(j),_e.size<1&&(u=zs,A&&A(),A=null,l.value=zs,Ge=!1,Q=!1),st()}}};function Zt(j){return j.reduce((ot,st)=>ot.then(()=>E(st)),Promise.resolve())}return Re}function ya(){return Cn(kc)}const cS=()=>{};var ug={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++s)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},uS=function(e){const t=[];let n=0,s=0;for(;n<e.length;){const i=e[n++];if(i<128)t[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=e[n++];t[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=e[n++],o=e[n++],a=e[n++],l=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;t[s++]=String.fromCharCode(55296+(l>>10)),t[s++]=String.fromCharCode(56320+(l&1023))}else{const r=e[n++],o=e[n++];t[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return t.join("")},Rv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<e.length;i+=3){const r=e[i],o=i+1<e.length,a=o?e[i+1]:0,l=i+2<e.length,u=l?e[i+2]:0,h=r>>2,d=(r&3)<<4|a>>4;let f=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(f=64)),s.push(n[h],n[d],n[f],n[g])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Sv(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):uS(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<e.length;){const r=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const u=i<e.length?n[e.charAt(i)]:64;++i;const d=i<e.length?n[e.charAt(i)]:64;if(++i,r==null||a==null||u==null||d==null)throw new hS;const f=r<<2|a>>4;if(s.push(f),u!==64){const g=a<<4&240|u>>2;if(s.push(g),d!==64){const _=u<<6&192|d;s.push(_)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class hS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dS=function(e){const t=Sv(e);return Rv.encodeByteArray(t,!0)},Bl=function(e){return dS(e).replace(/\./g,"")},Cv=function(e){try{return Rv.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=()=>fS().__FIREBASE_DEFAULTS__,gS=()=>{if(typeof process>"u"||typeof ug>"u")return;const e=ug.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},mS=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Cv(e[1]);return t&&JSON.parse(t)},Dc=()=>{try{return cS()||pS()||gS()||mS()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},xv=e=>Dc()?.emulatorHosts?.[e],Pv=e=>{const t=xv(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},kv=()=>Dc()?.config,Dv=e=>Dc()?.[`_${e}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function md(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Bl(JSON.stringify(n)),Bl(JSON.stringify(o)),""].join(".")}const Fo={};function yS(){const e={prod:[],emulator:[]};for(const t of Object.keys(Fo))Fo[t]?e.emulator.push(t):e.prod.push(t);return e}function vS(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let hg=!1;function _d(e,t){if(typeof window>"u"||typeof document>"u"||!Qi(window.location.host)||Fo[e]===t||Fo[e]||hg)return;Fo[e]=t;function n(f){return`__firebase__banner__${f}`}const s="__firebase__banner",r=yS().prod.length>0;function o(){const f=document.getElementById(s);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{hg=!0,o()},f}function h(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=vS(s),g=n("text"),_=document.getElementById(g)||document.createElement("span"),y=n("learnmore"),b=document.getElementById(y)||document.createElement("a"),I=n("preprendIcon"),R=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const k=f.element;a(k),h(b,y);const O=u();l(R,I),k.append(R,_,b,O),document.body.appendChild(k)}r?(_.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function wS(){const e=Dc()?.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ES(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TS(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function IS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AS(){const e=We();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function SS(){return!wS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RS(){try{return typeof indexedDB=="object"}catch{return!1}}function CS(){return new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="FirebaseError";class os extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=xS,Object.setPrototypeOf(this,os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,va.prototype.create)}}class va{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},i=`${this.service}/${t}`,r=this.errors[t],o=r?PS(r,s):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new os(i,a,s)}}function PS(e,t){return e.replace(kS,(n,s)=>{const i=t[s];return i!=null?String(i):`<${s}?>`})}const kS=/\{\$([^}]+)}/g;function DS(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function zi(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const i of n){if(!s.includes(i))return!1;const r=e[i],o=t[i];if(dg(r)&&dg(o)){if(!zi(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function dg(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(e){const t=[];for(const[n,s]of Object.entries(e))Array.isArray(s)?s.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function vo(e){const t={};return e.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,r]=s.split("=");t[decodeURIComponent(i)]=decodeURIComponent(r)}}),t}function bo(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function OS(e,t){const n=new MS(e,t);return n.subscribe.bind(n)}class MS{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let i;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");NS(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:s},i.next===void 0&&(i.next=ku),i.error===void 0&&(i.error=ku),i.complete===void 0&&(i.complete=ku);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function NS(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function ku(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(e){return e&&e._delegate?e._delegate:e}class hi{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new _S;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(FS(t))try{this.getOrInitializeService({instanceIdentifier:Di})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(t=Di){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Di){return this.instances.has(t)}getOptions(t=Di){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);s===a&&o.resolve(i)}return i}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(s)??new Set;i.add(t),this.onInitCallbacks.set(s,i);const r=this.instances.get(s);return r&&t(r,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:LS(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Di){return this.component?this.component.multipleInstances?t:Di:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LS(e){return e===Di?void 0:e}function FS(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new VS(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Rt||(Rt={}));const BS={debug:Rt.DEBUG,verbose:Rt.VERBOSE,info:Rt.INFO,warn:Rt.WARN,error:Rt.ERROR,silent:Rt.SILENT},jS=Rt.INFO,zS={[Rt.DEBUG]:"log",[Rt.VERBOSE]:"log",[Rt.INFO]:"info",[Rt.WARN]:"warn",[Rt.ERROR]:"error"},$S=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),i=zS[t];if(i)console[i](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class yd{constructor(t){this.name=t,this._logLevel=jS,this._logHandler=$S,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Rt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?BS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Rt.DEBUG,...t),this._logHandler(this,Rt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Rt.VERBOSE,...t),this._logHandler(this,Rt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Rt.INFO,...t),this._logHandler(this,Rt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Rt.WARN,...t),this._logHandler(this,Rt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Rt.ERROR,...t),this._logHandler(this,Rt.ERROR,...t)}}const HS=(e,t)=>t.some(n=>e instanceof n);let fg,pg;function WS(){return fg||(fg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qS(){return pg||(pg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Mv=new WeakMap,mh=new WeakMap,Nv=new WeakMap,Du=new WeakMap,vd=new WeakMap;function GS(e){const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{n(si(e.result)),i()},o=()=>{s(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Mv.set(n,e)}).catch(()=>{}),vd.set(t,e),t}function KS(e){if(mh.has(e))return;const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)});mh.set(e,t)}let _h={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return mh.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Nv.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return si(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function YS(e){_h=e(_h)}function QS(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=e.call(Ou(this),t,...n);return Nv.set(s,t.sort?t.sort():[t]),si(s)}:qS().includes(e)?function(...t){return e.apply(Ou(this),t),si(Mv.get(this))}:function(...t){return si(e.apply(Ou(this),t))}}function XS(e){return typeof e=="function"?QS(e):(e instanceof IDBTransaction&&KS(e),HS(e,WS())?new Proxy(e,_h):e)}function si(e){if(e instanceof IDBRequest)return GS(e);if(Du.has(e))return Du.get(e);const t=XS(e);return t!==e&&(Du.set(e,t),vd.set(t,e)),t}const Ou=e=>vd.get(e);function JS(e,t,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(e,t),a=si(o);return s&&o.addEventListener("upgradeneeded",l=>{s(si(o.result),l.oldVersion,l.newVersion,si(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const ZS=["get","getKey","getAll","getAllKeys","count"],tR=["put","add","delete","clear"],Mu=new Map;function gg(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Mu.get(t))return Mu.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,i=tR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||ZS.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Mu.set(t,r),r}YS(e=>({...e,get:(t,n,s)=>gg(t,n)||e.get(t,n,s),has:(t,n)=>!!gg(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function nR(e){return e.getComponent()?.type==="VERSION"}const yh="@firebase/app",mg="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=new yd("@firebase/app"),sR="@firebase/app-compat",iR="@firebase/analytics-compat",rR="@firebase/analytics",oR="@firebase/app-check-compat",aR="@firebase/app-check",lR="@firebase/auth",cR="@firebase/auth-compat",uR="@firebase/database",hR="@firebase/data-connect",dR="@firebase/database-compat",fR="@firebase/functions",pR="@firebase/functions-compat",gR="@firebase/installations",mR="@firebase/installations-compat",_R="@firebase/messaging",yR="@firebase/messaging-compat",vR="@firebase/performance",bR="@firebase/performance-compat",wR="@firebase/remote-config",ER="@firebase/remote-config-compat",TR="@firebase/storage",IR="@firebase/storage-compat",AR="@firebase/firestore",SR="@firebase/ai",RR="@firebase/firestore-compat",CR="firebase",xR="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh="[DEFAULT]",PR={[yh]:"fire-core",[sR]:"fire-core-compat",[rR]:"fire-analytics",[iR]:"fire-analytics-compat",[aR]:"fire-app-check",[oR]:"fire-app-check-compat",[lR]:"fire-auth",[cR]:"fire-auth-compat",[uR]:"fire-rtdb",[hR]:"fire-data-connect",[dR]:"fire-rtdb-compat",[fR]:"fire-fn",[pR]:"fire-fn-compat",[gR]:"fire-iid",[mR]:"fire-iid-compat",[_R]:"fire-fcm",[yR]:"fire-fcm-compat",[vR]:"fire-perf",[bR]:"fire-perf-compat",[wR]:"fire-rc",[ER]:"fire-rc-compat",[TR]:"fire-gcs",[IR]:"fire-gcs-compat",[AR]:"fire-fst",[RR]:"fire-fst-compat",[SR]:"fire-vertex","fire-js":"fire-js",[CR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl=new Map,kR=new Map,bh=new Map;function _g(e,t){try{e.container.addComponent(t)}catch(n){Cs.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function $i(e){const t=e.name;if(bh.has(t))return Cs.debug(`There were multiple attempts to register component ${t}.`),!1;bh.set(t,e);for(const n of jl.values())_g(n,e);for(const n of kR.values())_g(n,e);return!0}function Oc(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function hn(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ii=new va("app","Firebase",DR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ii.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=xR;function Vv(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const s={name:vh,automaticDataCollectionEnabled:!0,...t},i=s.name;if(typeof i!="string"||!i)throw ii.create("bad-app-name",{appName:String(i)});if(n||(n=kv()),!n)throw ii.create("no-options");const r=jl.get(i);if(r){if(zi(n,r.options)&&zi(s,r.config))return r;throw ii.create("duplicate-app",{appName:i})}const o=new US(i);for(const l of bh.values())o.addComponent(l);const a=new OR(n,s,o);return jl.set(i,a),a}function bd(e=vh){const t=jl.get(e);if(!t&&e===vh&&kv())return Vv();if(!t)throw ii.create("no-app",{appName:e});return t}function Gn(e,t,n){let s=PR[e]??e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),r=t.match(/\s|\//);if(i||r){const o=[`Unable to register library "${s}" with version "${t}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&r&&o.push("and"),r&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Cs.warn(o.join(" "));return}$i(new hi(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="firebase-heartbeat-database",NR=1,ta="firebase-heartbeat-store";let Nu=null;function Lv(){return Nu||(Nu=JS(MR,NR,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(ta)}catch(n){console.warn(n)}}}}).catch(e=>{throw ii.create("idb-open",{originalErrorMessage:e.message})})),Nu}async function VR(e){try{const n=(await Lv()).transaction(ta),s=await n.objectStore(ta).get(Fv(e));return await n.done,s}catch(t){if(t instanceof os)Cs.warn(t.message);else{const n=ii.create("idb-get",{originalErrorMessage:t?.message});Cs.warn(n.message)}}}async function yg(e,t){try{const s=(await Lv()).transaction(ta,"readwrite");await s.objectStore(ta).put(t,Fv(e)),await s.done}catch(n){if(n instanceof os)Cs.warn(n.message);else{const s=ii.create("idb-set",{originalErrorMessage:n?.message});Cs.warn(s.message)}}}function Fv(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=1024,FR=30;class UR{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=vg();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>FR){const i=zR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Cs.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=vg(),{heartbeatsToSend:n,unsentEntries:s}=BR(this._heartbeatsCache.heartbeats),i=Bl(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Cs.warn(t),""}}}function vg(){return new Date().toISOString().substring(0,10)}function BR(e,t=LR){const n=[];let s=e.slice();for(const i of e){const r=n.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),bg(n)>t){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),bg(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class jR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RS()?CS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await VR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return yg(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return yg(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function bg(e){return Bl(JSON.stringify({version:2,heartbeats:e})).length}function zR(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(e){$i(new hi("platform-logger",t=>new eR(t),"PRIVATE")),$i(new hi("heartbeat",t=>new UR(t),"PRIVATE")),Gn(yh,mg,e),Gn(yh,mg,"esm2020"),Gn("fire-js","")}$R("");var wg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ri,Uv;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,v){function E(){}E.prototype=v.prototype,T.F=v.prototype,T.prototype=new E,T.prototype.constructor=T,T.D=function(x,P,M){for(var A=Array(arguments.length-2),It=2;It<arguments.length;It++)A[It-2]=arguments[It];return v.prototype[P].apply(x,A)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,E){E||(E=0);const x=Array(16);if(typeof v=="string")for(var P=0;P<16;++P)x[P]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(P=0;P<16;++P)x[P]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=T.g[0],E=T.g[1],P=T.g[2];let M=T.g[3],A;A=v+(M^E&(P^M))+x[0]+3614090360&4294967295,v=E+(A<<7&4294967295|A>>>25),A=M+(P^v&(E^P))+x[1]+3905402710&4294967295,M=v+(A<<12&4294967295|A>>>20),A=P+(E^M&(v^E))+x[2]+606105819&4294967295,P=M+(A<<17&4294967295|A>>>15),A=E+(v^P&(M^v))+x[3]+3250441966&4294967295,E=P+(A<<22&4294967295|A>>>10),A=v+(M^E&(P^M))+x[4]+4118548399&4294967295,v=E+(A<<7&4294967295|A>>>25),A=M+(P^v&(E^P))+x[5]+1200080426&4294967295,M=v+(A<<12&4294967295|A>>>20),A=P+(E^M&(v^E))+x[6]+2821735955&4294967295,P=M+(A<<17&4294967295|A>>>15),A=E+(v^P&(M^v))+x[7]+4249261313&4294967295,E=P+(A<<22&4294967295|A>>>10),A=v+(M^E&(P^M))+x[8]+1770035416&4294967295,v=E+(A<<7&4294967295|A>>>25),A=M+(P^v&(E^P))+x[9]+2336552879&4294967295,M=v+(A<<12&4294967295|A>>>20),A=P+(E^M&(v^E))+x[10]+4294925233&4294967295,P=M+(A<<17&4294967295|A>>>15),A=E+(v^P&(M^v))+x[11]+2304563134&4294967295,E=P+(A<<22&4294967295|A>>>10),A=v+(M^E&(P^M))+x[12]+1804603682&4294967295,v=E+(A<<7&4294967295|A>>>25),A=M+(P^v&(E^P))+x[13]+4254626195&4294967295,M=v+(A<<12&4294967295|A>>>20),A=P+(E^M&(v^E))+x[14]+2792965006&4294967295,P=M+(A<<17&4294967295|A>>>15),A=E+(v^P&(M^v))+x[15]+1236535329&4294967295,E=P+(A<<22&4294967295|A>>>10),A=v+(P^M&(E^P))+x[1]+4129170786&4294967295,v=E+(A<<5&4294967295|A>>>27),A=M+(E^P&(v^E))+x[6]+3225465664&4294967295,M=v+(A<<9&4294967295|A>>>23),A=P+(v^E&(M^v))+x[11]+643717713&4294967295,P=M+(A<<14&4294967295|A>>>18),A=E+(M^v&(P^M))+x[0]+3921069994&4294967295,E=P+(A<<20&4294967295|A>>>12),A=v+(P^M&(E^P))+x[5]+3593408605&4294967295,v=E+(A<<5&4294967295|A>>>27),A=M+(E^P&(v^E))+x[10]+38016083&4294967295,M=v+(A<<9&4294967295|A>>>23),A=P+(v^E&(M^v))+x[15]+3634488961&4294967295,P=M+(A<<14&4294967295|A>>>18),A=E+(M^v&(P^M))+x[4]+3889429448&4294967295,E=P+(A<<20&4294967295|A>>>12),A=v+(P^M&(E^P))+x[9]+568446438&4294967295,v=E+(A<<5&4294967295|A>>>27),A=M+(E^P&(v^E))+x[14]+3275163606&4294967295,M=v+(A<<9&4294967295|A>>>23),A=P+(v^E&(M^v))+x[3]+4107603335&4294967295,P=M+(A<<14&4294967295|A>>>18),A=E+(M^v&(P^M))+x[8]+1163531501&4294967295,E=P+(A<<20&4294967295|A>>>12),A=v+(P^M&(E^P))+x[13]+2850285829&4294967295,v=E+(A<<5&4294967295|A>>>27),A=M+(E^P&(v^E))+x[2]+4243563512&4294967295,M=v+(A<<9&4294967295|A>>>23),A=P+(v^E&(M^v))+x[7]+1735328473&4294967295,P=M+(A<<14&4294967295|A>>>18),A=E+(M^v&(P^M))+x[12]+2368359562&4294967295,E=P+(A<<20&4294967295|A>>>12),A=v+(E^P^M)+x[5]+4294588738&4294967295,v=E+(A<<4&4294967295|A>>>28),A=M+(v^E^P)+x[8]+2272392833&4294967295,M=v+(A<<11&4294967295|A>>>21),A=P+(M^v^E)+x[11]+1839030562&4294967295,P=M+(A<<16&4294967295|A>>>16),A=E+(P^M^v)+x[14]+4259657740&4294967295,E=P+(A<<23&4294967295|A>>>9),A=v+(E^P^M)+x[1]+2763975236&4294967295,v=E+(A<<4&4294967295|A>>>28),A=M+(v^E^P)+x[4]+1272893353&4294967295,M=v+(A<<11&4294967295|A>>>21),A=P+(M^v^E)+x[7]+4139469664&4294967295,P=M+(A<<16&4294967295|A>>>16),A=E+(P^M^v)+x[10]+3200236656&4294967295,E=P+(A<<23&4294967295|A>>>9),A=v+(E^P^M)+x[13]+681279174&4294967295,v=E+(A<<4&4294967295|A>>>28),A=M+(v^E^P)+x[0]+3936430074&4294967295,M=v+(A<<11&4294967295|A>>>21),A=P+(M^v^E)+x[3]+3572445317&4294967295,P=M+(A<<16&4294967295|A>>>16),A=E+(P^M^v)+x[6]+76029189&4294967295,E=P+(A<<23&4294967295|A>>>9),A=v+(E^P^M)+x[9]+3654602809&4294967295,v=E+(A<<4&4294967295|A>>>28),A=M+(v^E^P)+x[12]+3873151461&4294967295,M=v+(A<<11&4294967295|A>>>21),A=P+(M^v^E)+x[15]+530742520&4294967295,P=M+(A<<16&4294967295|A>>>16),A=E+(P^M^v)+x[2]+3299628645&4294967295,E=P+(A<<23&4294967295|A>>>9),A=v+(P^(E|~M))+x[0]+4096336452&4294967295,v=E+(A<<6&4294967295|A>>>26),A=M+(E^(v|~P))+x[7]+1126891415&4294967295,M=v+(A<<10&4294967295|A>>>22),A=P+(v^(M|~E))+x[14]+2878612391&4294967295,P=M+(A<<15&4294967295|A>>>17),A=E+(M^(P|~v))+x[5]+4237533241&4294967295,E=P+(A<<21&4294967295|A>>>11),A=v+(P^(E|~M))+x[12]+1700485571&4294967295,v=E+(A<<6&4294967295|A>>>26),A=M+(E^(v|~P))+x[3]+2399980690&4294967295,M=v+(A<<10&4294967295|A>>>22),A=P+(v^(M|~E))+x[10]+4293915773&4294967295,P=M+(A<<15&4294967295|A>>>17),A=E+(M^(P|~v))+x[1]+2240044497&4294967295,E=P+(A<<21&4294967295|A>>>11),A=v+(P^(E|~M))+x[8]+1873313359&4294967295,v=E+(A<<6&4294967295|A>>>26),A=M+(E^(v|~P))+x[15]+4264355552&4294967295,M=v+(A<<10&4294967295|A>>>22),A=P+(v^(M|~E))+x[6]+2734768916&4294967295,P=M+(A<<15&4294967295|A>>>17),A=E+(M^(P|~v))+x[13]+1309151649&4294967295,E=P+(A<<21&4294967295|A>>>11),A=v+(P^(E|~M))+x[4]+4149444226&4294967295,v=E+(A<<6&4294967295|A>>>26),A=M+(E^(v|~P))+x[11]+3174756917&4294967295,M=v+(A<<10&4294967295|A>>>22),A=P+(v^(M|~E))+x[2]+718787259&4294967295,P=M+(A<<15&4294967295|A>>>17),A=E+(M^(P|~v))+x[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,T.g[2]=T.g[2]+P&4294967295,T.g[3]=T.g[3]+M&4294967295}s.prototype.v=function(T,v){v===void 0&&(v=T.length);const E=v-this.blockSize,x=this.C;let P=this.h,M=0;for(;M<v;){if(P==0)for(;M<=E;)i(this,T,M),M+=this.blockSize;if(typeof T=="string"){for(;M<v;)if(x[P++]=T.charCodeAt(M++),P==this.blockSize){i(this,x),P=0;break}}else for(;M<v;)if(x[P++]=T[M++],P==this.blockSize){i(this,x),P=0;break}}this.h=P,this.o+=v},s.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;v=this.o*8;for(var E=T.length-8;E<T.length;++E)T[E]=v&255,v/=256;for(this.v(T),T=Array(16),v=0,E=0;E<4;++E)for(let x=0;x<32;x+=8)T[v++]=this.g[E]>>>x&255;return T};function r(T,v){var E=a;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=v(T)}function o(T,v){this.h=v;const E=[];let x=!0;for(let P=T.length-1;P>=0;P--){const M=T[P]|0;x&&M==v||(E[P]=M,x=!1)}this.g=E}var a={};function l(T){return-128<=T&&T<128?r(T,function(v){return new o([v|0],v<0?-1:0)}):new o([T|0],T<0?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return d;if(T<0)return b(u(-T));const v=[];let E=1;for(let x=0;T>=E;x++)v[x]=T/E|0,E*=4294967296;return new o(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return b(h(T.substring(1),v));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=u(Math.pow(v,8));let x=d;for(let M=0;M<T.length;M+=8){var P=Math.min(8,T.length-M);const A=parseInt(T.substring(M,M+P),v);P<8?(P=u(Math.pow(v,P)),x=x.j(P).add(u(A))):(x=x.j(E),x=x.add(u(A)))}return x}var d=l(0),f=l(1),g=l(16777216);e=o.prototype,e.m=function(){if(y(this))return-b(this).m();let T=0,v=1;for(let E=0;E<this.g.length;E++){const x=this.i(E);T+=(x>=0?x:4294967296+x)*v,v*=4294967296}return T},e.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(_(this))return"0";if(y(this))return"-"+b(this).toString(T);const v=u(Math.pow(T,6));var E=this;let x="";for(;;){const P=O(E,v).g;E=I(E,P.j(v));let M=((E.g.length>0?E.g[0]:E.h)>>>0).toString(T);if(E=P,_(E))return M+x;for(;M.length<6;)M="0"+M;x=M+x}},e.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function _(T){if(T.h!=0)return!1;for(let v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function y(T){return T.h==-1}e.l=function(T){return T=I(this,T),y(T)?-1:_(T)?0:1};function b(T){const v=T.g.length,E=[];for(let x=0;x<v;x++)E[x]=~T.g[x];return new o(E,~T.h).add(f)}e.abs=function(){return y(this)?b(this):this},e.add=function(T){const v=Math.max(this.g.length,T.g.length),E=[];let x=0;for(let P=0;P<=v;P++){let M=x+(this.i(P)&65535)+(T.i(P)&65535),A=(M>>>16)+(this.i(P)>>>16)+(T.i(P)>>>16);x=A>>>16,M&=65535,A&=65535,E[P]=A<<16|M}return new o(E,E[E.length-1]&-2147483648?-1:0)};function I(T,v){return T.add(b(v))}e.j=function(T){if(_(this)||_(T))return d;if(y(this))return y(T)?b(this).j(b(T)):b(b(this).j(T));if(y(T))return b(this.j(b(T)));if(this.l(g)<0&&T.l(g)<0)return u(this.m()*T.m());const v=this.g.length+T.g.length,E=[];for(var x=0;x<2*v;x++)E[x]=0;for(x=0;x<this.g.length;x++)for(let P=0;P<T.g.length;P++){const M=this.i(x)>>>16,A=this.i(x)&65535,It=T.i(P)>>>16,_t=T.i(P)&65535;E[2*x+2*P]+=A*_t,R(E,2*x+2*P),E[2*x+2*P+1]+=M*_t,R(E,2*x+2*P+1),E[2*x+2*P+1]+=A*It,R(E,2*x+2*P+1),E[2*x+2*P+2]+=M*It,R(E,2*x+2*P+2)}for(T=0;T<v;T++)E[T]=E[2*T+1]<<16|E[2*T];for(T=v;T<2*v;T++)E[T]=0;return new o(E,0)};function R(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function k(T,v){this.g=T,this.h=v}function O(T,v){if(_(v))throw Error("division by zero");if(_(T))return new k(d,d);if(y(T))return v=O(b(T),v),new k(b(v.g),b(v.h));if(y(v))return v=O(T,b(v)),new k(b(v.g),v.h);if(T.g.length>30){if(y(T)||y(v))throw Error("slowDivide_ only works with positive integers.");for(var E=f,x=v;x.l(T)<=0;)E=L(E),x=L(x);var P=G(E,1),M=G(x,1);for(x=G(x,2),E=G(E,2);!_(x);){var A=M.add(x);A.l(T)<=0&&(P=P.add(E),M=A),x=G(x,1),E=G(E,1)}return v=I(T,P.j(v)),new k(P,v)}for(P=d;T.l(v)>=0;){for(E=Math.max(1,Math.floor(T.m()/v.m())),x=Math.ceil(Math.log(E)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),M=u(E),A=M.j(v);y(A)||A.l(T)>0;)E-=x,M=u(E),A=M.j(v);_(M)&&(M=f),P=P.add(M),T=I(T,A)}return new k(P,T)}e.B=function(T){return O(this,T).h},e.and=function(T){const v=Math.max(this.g.length,T.g.length),E=[];for(let x=0;x<v;x++)E[x]=this.i(x)&T.i(x);return new o(E,this.h&T.h)},e.or=function(T){const v=Math.max(this.g.length,T.g.length),E=[];for(let x=0;x<v;x++)E[x]=this.i(x)|T.i(x);return new o(E,this.h|T.h)},e.xor=function(T){const v=Math.max(this.g.length,T.g.length),E=[];for(let x=0;x<v;x++)E[x]=this.i(x)^T.i(x);return new o(E,this.h^T.h)};function L(T){const v=T.g.length+1,E=[];for(let x=0;x<v;x++)E[x]=T.i(x)<<1|T.i(x-1)>>>31;return new o(E,T.h)}function G(T,v){const E=v>>5;v%=32;const x=T.g.length-E,P=[];for(let M=0;M<x;M++)P[M]=v>0?T.i(M+E)>>>v|T.i(M+E+1)<<32-v:T.i(M+E);return new o(P,T.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Uv=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,ri=o}).apply(typeof wg<"u"?wg:typeof self<"u"?self:typeof window<"u"?window:{});var Ka=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bv,wo,jv,_l,wh,zv,$v,Hv;(function(){var e,t=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ka=="object"&&Ka];for(var p=0;p<c.length;++p){var m=c[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var s=n(this);function i(c,p){if(p)t:{var m=s;c=c.split(".");for(var w=0;w<c.length-1;w++){var V=c[w];if(!(V in m))break t;m=m[V]}c=c[c.length-1],w=m[c],p=p(w),p!=w&&p!=null&&t(m,c,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(p){var m=[],w;for(w in p)Object.prototype.hasOwnProperty.call(p,w)&&m.push([w,p[w]]);return m}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var r=r||{},o=this||self;function a(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function l(c,p,m){return c.call.apply(c.bind,arguments)}function u(c,p,m){return u=l,u.apply(null,arguments)}function h(c,p){var m=Array.prototype.slice.call(arguments,1);return function(){var w=m.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function d(c,p){function m(){}m.prototype=p.prototype,c.Z=p.prototype,c.prototype=new m,c.prototype.constructor=c,c.Ob=function(w,V,F){for(var et=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)et[Et-2]=arguments[Et];return p.prototype[V].apply(w,et)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function g(c){const p=c.length;if(p>0){const m=Array(p);for(let w=0;w<p;w++)m[w]=c[w];return m}return[]}function _(c,p){for(let w=1;w<arguments.length;w++){const V=arguments[w];var m=typeof V;if(m=m!="object"?m:V?Array.isArray(V)?"array":m:"null",m=="array"||m=="object"&&typeof V.length=="number"){m=c.length||0;const F=V.length||0;c.length=m+F;for(let et=0;et<F;et++)c[m+et]=V[et]}else c.push(V)}}class y{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function b(c){o.setTimeout(()=>{throw c},0)}function I(){var c=T;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class R{constructor(){this.h=this.g=null}add(p,m){const w=k.get();w.set(p,m),this.h?this.h.next=w:this.g=w,this.h=w}}var k=new y(()=>new O,c=>c.reset());class O{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let L,G=!1,T=new R,v=()=>{const c=Promise.resolve(void 0);L=()=>{c.then(E)}};function E(){for(var c;c=I();){try{c.h.call(c.g)}catch(m){b(m)}var p=k;p.j(c),p.h<100&&(p.h++,c.next=p.g,p.g=c)}G=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const m=()=>{};o.addEventListener("test",m,p),o.removeEventListener("test",m,p)}catch{}return c})();function A(c){return/^[\s\xa0]*$/.test(c)}function It(c,p){P.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,p)}d(It,P),It.prototype.init=function(c,p){const m=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget,p||(m=="mouseover"?p=c.fromElement:m=="mouseout"&&(p=c.toElement)),this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&It.Z.h.call(this)},It.prototype.h=function(){It.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var _t="closure_listenable_"+(Math.random()*1e6|0),ht=0;function Q(c,p,m,w,V){this.listener=c,this.proxy=null,this.src=p,this.type=m,this.capture=!!w,this.ha=V,this.key=++ht,this.da=this.fa=!1}function U(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function tt(c,p,m){for(const w in c)p.call(m,c[w],w,c)}function Gt(c,p){for(const m in c)p.call(void 0,c[m],m,c)}function Ee(c){const p={};for(const m in c)p[m]=c[m];return p}const Jt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ge(c,p){let m,w;for(let V=1;V<arguments.length;V++){w=arguments[V];for(m in w)c[m]=w[m];for(let F=0;F<Jt.length;F++)m=Jt[F],Object.prototype.hasOwnProperty.call(w,m)&&(c[m]=w[m])}}function _e(c){this.src=c,this.g={},this.h=0}_e.prototype.add=function(c,p,m,w,V){const F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);const et=Zt(c,p,w,V);return et>-1?(p=c[et],m||(p.fa=!1)):(p=new Q(p,this.src,F,!!w,V),p.fa=m,c.push(p)),p};function Re(c,p){const m=p.type;if(m in c.g){var w=c.g[m],V=Array.prototype.indexOf.call(w,p,void 0),F;(F=V>=0)&&Array.prototype.splice.call(w,V,1),F&&(U(p),c.g[m].length==0&&(delete c.g[m],c.h--))}}function Zt(c,p,m,w){for(let V=0;V<c.length;++V){const F=c[V];if(!F.da&&F.listener==p&&F.capture==!!m&&F.ha==w)return V}return-1}var j="closure_lm_"+(Math.random()*1e6|0),ot={};function st(c,p,m,w,V){if(Array.isArray(p)){for(let F=0;F<p.length;F++)st(c,p[F],m,w,V);return null}return m=nt(m),c&&c[_t]?c.J(p,m,a(w)?!!w.capture:!1,V):lt(c,p,m,!1,w,V)}function lt(c,p,m,w,V,F){if(!p)throw Error("Invalid event type");const et=a(V)?!!V.capture:!!V;let Et=W(c);if(Et||(c[j]=Et=new _e(c)),m=Et.add(p,m,w,et,F),m.proxy)return m;if(w=St(),m.proxy=w,w.src=c,w.listener=m,c.addEventListener)M||(V=et),V===void 0&&(V=!1),c.addEventListener(p.toString(),w,V);else if(c.attachEvent)c.attachEvent(N(p.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return m}function St(){function c(m){return p.call(c.src,c.listener,m)}const p=z;return c}function S(c,p,m,w,V){if(Array.isArray(p))for(var F=0;F<p.length;F++)S(c,p[F],m,w,V);else w=a(w)?!!w.capture:!!w,m=nt(m),c&&c[_t]?(c=c.i,F=String(p).toString(),F in c.g&&(p=c.g[F],m=Zt(p,m,w,V),m>-1&&(U(p[m]),Array.prototype.splice.call(p,m,1),p.length==0&&(delete c.g[F],c.h--)))):c&&(c=W(c))&&(p=c.g[p.toString()],c=-1,p&&(c=Zt(p,m,w,V)),(m=c>-1?p[c]:null)&&D(m))}function D(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[_t])Re(p.i,c);else{var m=c.type,w=c.proxy;p.removeEventListener?p.removeEventListener(m,w,c.capture):p.detachEvent?p.detachEvent(N(m),w):p.addListener&&p.removeListener&&p.removeListener(w),(m=W(p))?(Re(m,c),m.h==0&&(m.src=null,p[j]=null)):U(c)}}}function N(c){return c in ot?ot[c]:ot[c]="on"+c}function z(c,p){if(c.da)c=!0;else{p=new It(p,this);const m=c.listener,w=c.ha||c.src;c.fa&&D(c),c=m.call(w,p)}return c}function W(c){return c=c[j],c instanceof _e?c:null}var B="__closure_events_fn_"+(Math.random()*1e9>>>0);function nt(c){return typeof c=="function"?c:(c[B]||(c[B]=function(p){return c.handleEvent(p)}),c[B])}function X(){x.call(this),this.i=new _e(this),this.M=this,this.G=null}d(X,x),X.prototype[_t]=!0,X.prototype.removeEventListener=function(c,p,m,w){S(this,c,p,m,w)};function K(c,p){var m,w=c.G;if(w)for(m=[];w;w=w.G)m.push(w);if(c=c.M,w=p.type||p,typeof p=="string")p=new P(p,c);else if(p instanceof P)p.target=p.target||c;else{var V=p;p=new P(w,c),Ge(p,V)}V=!0;let F,et;if(m)for(et=m.length-1;et>=0;et--)F=p.g=m[et],V=Y(F,w,!0,p)&&V;if(F=p.g=c,V=Y(F,w,!0,p)&&V,V=Y(F,w,!1,p)&&V,m)for(et=0;et<m.length;et++)F=p.g=m[et],V=Y(F,w,!1,p)&&V}X.prototype.N=function(){if(X.Z.N.call(this),this.i){var c=this.i;for(const p in c.g){const m=c.g[p];for(let w=0;w<m.length;w++)U(m[w]);delete c.g[p],c.h--}}this.G=null},X.prototype.J=function(c,p,m,w){return this.i.add(String(c),p,!1,m,w)},X.prototype.K=function(c,p,m,w){return this.i.add(String(c),p,!0,m,w)};function Y(c,p,m,w){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();let V=!0;for(let F=0;F<p.length;++F){const et=p[F];if(et&&!et.da&&et.capture==m){const Et=et.listener,ye=et.ha||et.src;et.fa&&Re(c.i,et),V=Et.call(ye,w)!==!1&&V}}return V&&!w.defaultPrevented}function dt(c,p){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=u(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(c,p||0)}function it(c){c.g=dt(()=>{c.g=null,c.i&&(c.i=!1,it(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class ut extends x{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:it(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ft(c){x.call(this),this.h=c,this.g={}}d(ft,x);var At=[];function Ft(c){tt(c.g,function(p,m){this.g.hasOwnProperty(m)&&D(p)},c),c.g={}}ft.prototype.N=function(){ft.Z.N.call(this),Ft(this)},ft.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kt=o.JSON.stringify,Ne=o.JSON.parse,Ve=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function on(){}function an(){}var Tn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function nr(){P.call(this,"d")}d(nr,P);function Ce(){P.call(this,"c")}d(Ce,P);var Te={},Kr=null;function wi(){return Kr=Kr||new X}Te.Ia="serverreachability";function Sf(c){P.call(this,Te.Ia,c)}d(Sf,P);function Yr(c){const p=wi();K(p,new Sf(p))}Te.STAT_EVENT="statevent";function Rf(c,p){P.call(this,Te.STAT_EVENT,c),this.stat=p}d(Rf,P);function Ke(c){const p=wi();K(p,new Rf(p,c))}Te.Ja="timingevent";function Cf(c,p){P.call(this,Te.Ja,c),this.size=p}d(Cf,P);function Qr(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},p)}function Xr(){this.g=!0}Xr.prototype.ua=function(){this.g=!1};function XE(c,p,m,w,V,F){c.info(function(){if(c.g)if(F){var et="",Et=F.split("&");for(let zt=0;zt<Et.length;zt++){var ye=Et[zt].split("=");if(ye.length>1){const Ie=ye[0];ye=ye[1];const Nn=Ie.split("_");et=Nn.length>=2&&Nn[1]=="type"?et+(Ie+"="+ye+"&"):et+(Ie+"=redacted&")}}}else et=null;else et=F;return"XMLHTTP REQ ("+w+") [attempt "+V+"]: "+p+`
`+m+`
`+et})}function JE(c,p,m,w,V,F,et){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+V+"]: "+p+`
`+m+`
`+F+" "+et})}function sr(c,p,m,w){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+tT(c,m)+(w?" "+w:"")})}function ZE(c,p){c.info(function(){return"TIMEOUT: "+p})}Xr.prototype.info=function(){};function tT(c,p){if(!c.g)return p;if(!p)return null;try{const F=JSON.parse(p);if(F){for(c=0;c<F.length;c++)if(Array.isArray(F[c])){var m=F[c];if(!(m.length<2)){var w=m[1];if(Array.isArray(w)&&!(w.length<1)){var V=w[0];if(V!="noop"&&V!="stop"&&V!="close")for(let et=1;et<w.length;et++)w[et]=""}}}}return kt(F)}catch{return p}}var Ma={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},xf={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Pf;function nu(){}d(nu,on),nu.prototype.g=function(){return new XMLHttpRequest},Pf=new nu;function Jr(c){return encodeURIComponent(String(c))}function eT(c){var p=1;c=c.split(":");const m=[];for(;p>0&&c.length;)m.push(c.shift()),p--;return c.length&&m.push(c.join(":")),m}function Vs(c,p,m,w){this.j=c,this.i=p,this.l=m,this.S=w||1,this.V=new ft(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new kf}function kf(){this.i=null,this.g="",this.h=!1}var Df={},su={};function iu(c,p,m){c.M=1,c.A=Va(Mn(p)),c.u=m,c.R=!0,Of(c,null)}function Of(c,p){c.F=Date.now(),Na(c),c.B=Mn(c.A);var m=c.B,w=c.S;Array.isArray(w)||(w=[String(w)]),qf(m.i,"t",w),c.C=0,m=c.j.L,c.h=new kf,c.g=up(c.j,m?p:null,!c.u),c.P>0&&(c.O=new ut(u(c.Y,c,c.g),c.P)),p=c.V,m=c.g,w=c.ba;var V="readystatechange";Array.isArray(V)||(V&&(At[0]=V.toString()),V=At);for(let F=0;F<V.length;F++){const et=st(m,V[F],w||p.handleEvent,!1,p.h||p);if(!et)break;p.g[et.key]=et}p=c.J?Ee(c.J):{},c.u?(c.v||(c.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,p)):(c.v="GET",c.g.ea(c.B,c.v,null,p)),Yr(),XE(c.i,c.v,c.B,c.l,c.S,c.u)}Vs.prototype.ba=function(c){c=c.target;const p=this.O;p&&Us(c)==3?p.j():this.Y(c)},Vs.prototype.Y=function(c){try{if(c==this.g)t:{const Et=Us(this.g),ye=this.g.ya(),zt=this.g.ca();if(!(Et<3)&&(Et!=3||this.g&&(this.h.h||this.g.la()||Zf(this.g)))){this.K||Et!=4||ye==7||(ye==8||zt<=0?Yr(3):Yr(2)),ru(this);var p=this.g.ca();this.X=p;var m=nT(this);if(this.o=p==200,JE(this.i,this.v,this.B,this.l,this.S,Et,p),this.o){if(this.U&&!this.L){e:{if(this.g){var w,V=this.g;if((w=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(w)){var F=w;break e}}F=null}if(c=F)sr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ou(this,c);else{this.o=!1,this.m=3,Ke(12),Ei(this),Zr(this);break t}}if(this.R){c=!0;let Ie;for(;!this.K&&this.C<m.length;)if(Ie=sT(this,m),Ie==su){Et==4&&(this.m=4,Ke(14),c=!1),sr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ie==Df){this.m=4,Ke(15),sr(this.i,this.l,m,"[Invalid Chunk]"),c=!1;break}else sr(this.i,this.l,Ie,null),ou(this,Ie);if(Mf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Et!=4||m.length!=0||this.h.h||(this.m=1,Ke(16),c=!1),this.o=this.o&&c,!c)sr(this.i,this.l,m,"[Invalid Chunked Response]"),Ei(this),Zr(this);else if(m.length>0&&!this.W){this.W=!0;var et=this.j;et.g==this&&et.aa&&!et.P&&(et.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),pu(et),et.P=!0,Ke(11))}}else sr(this.i,this.l,m,null),ou(this,m);Et==4&&Ei(this),this.o&&!this.K&&(Et==4?op(this.j,this):(this.o=!1,Na(this)))}else _T(this.g),p==400&&m.indexOf("Unknown SID")>0?(this.m=3,Ke(12)):(this.m=0,Ke(13)),Ei(this),Zr(this)}}}catch{}finally{}};function nT(c){if(!Mf(c))return c.g.la();const p=Zf(c.g);if(p==="")return"";let m="";const w=p.length,V=Us(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Ei(c),Zr(c),"";c.h.i=new o.TextDecoder}for(let F=0;F<w;F++)c.h.h=!0,m+=c.h.i.decode(p[F],{stream:!(V&&F==w-1)});return p.length=0,c.h.g+=m,c.C=0,c.h.g}function Mf(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function sT(c,p){var m=c.C,w=p.indexOf(`
`,m);return w==-1?su:(m=Number(p.substring(m,w)),isNaN(m)?Df:(w+=1,w+m>p.length?su:(p=p.slice(w,w+m),c.C=w+m,p)))}Vs.prototype.cancel=function(){this.K=!0,Ei(this)};function Na(c){c.T=Date.now()+c.H,Nf(c,c.H)}function Nf(c,p){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Qr(u(c.aa,c),p)}function ru(c){c.D&&(o.clearTimeout(c.D),c.D=null)}Vs.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(ZE(this.i,this.B),this.M!=2&&(Yr(),Ke(17)),Ei(this),this.m=2,Zr(this)):Nf(this,this.T-c)};function Zr(c){c.j.I==0||c.K||op(c.j,c)}function Ei(c){ru(c);var p=c.O;p&&typeof p.dispose=="function"&&p.dispose(),c.O=null,Ft(c.V),c.g&&(p=c.g,c.g=null,p.abort(),p.dispose())}function ou(c,p){try{var m=c.j;if(m.I!=0&&(m.g==c||au(m.h,c))){if(!c.L&&au(m.h,c)&&m.I==3){try{var w=m.Ba.g.parse(p)}catch{w=null}if(Array.isArray(w)&&w.length==3){var V=w;if(V[0]==0){t:if(!m.v){if(m.g)if(m.g.F+3e3<c.F)ja(m),Ua(m);else break t;fu(m),Ke(18)}}else m.xa=V[1],0<m.xa-m.K&&V[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=Qr(u(m.Va,m),6e3));Ff(m.h)<=1&&m.ta&&(m.ta=void 0)}else Ii(m,11)}else if((c.L||m.g==c)&&ja(m),!A(p))for(V=m.Ba.g.parse(p),p=0;p<V.length;p++){let zt=V[p];const Ie=zt[0];if(!(Ie<=m.K))if(m.K=Ie,zt=zt[1],m.I==2)if(zt[0]=="c"){m.M=zt[1],m.ba=zt[2];const Nn=zt[3];Nn!=null&&(m.ka=Nn,m.j.info("VER="+m.ka));const Ai=zt[4];Ai!=null&&(m.za=Ai,m.j.info("SVER="+m.za));const Bs=zt[5];Bs!=null&&typeof Bs=="number"&&Bs>0&&(w=1.5*Bs,m.O=w,m.j.info("backChannelRequestTimeoutMs_="+w)),w=m;const js=c.g;if(js){const $a=js.g?js.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($a){var F=w.h;F.g||$a.indexOf("spdy")==-1&&$a.indexOf("quic")==-1&&$a.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(lu(F,F.h),F.h=null))}if(w.G){const gu=js.g?js.g.getResponseHeader("X-HTTP-Session-Id"):null;gu&&(w.wa=gu,Kt(w.J,w.G,gu))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-c.F,m.j.info("Handshake RTT: "+m.T+"ms")),w=m;var et=c;if(w.na=cp(w,w.L?w.ba:null,w.W),et.L){Uf(w.h,et);var Et=et,ye=w.O;ye&&(Et.H=ye),Et.D&&(ru(Et),Na(Et)),w.g=et}else ip(w);m.i.length>0&&Ba(m)}else zt[0]!="stop"&&zt[0]!="close"||Ii(m,7);else m.I==3&&(zt[0]=="stop"||zt[0]=="close"?zt[0]=="stop"?Ii(m,7):du(m):zt[0]!="noop"&&m.l&&m.l.qa(zt),m.A=0)}}Yr(4)}catch{}}var iT=class{constructor(c,p){this.g=c,this.map=p}};function Vf(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Lf(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ff(c){return c.h?1:c.g?c.g.size:0}function au(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function lu(c,p){c.g?c.g.add(p):c.h=p}function Uf(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Vf.prototype.cancel=function(){if(this.i=Bf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Bf(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const m of c.g.values())p=p.concat(m.G);return p}return g(c.i)}var jf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rT(c,p){if(c){c=c.split("&");for(let m=0;m<c.length;m++){const w=c[m].indexOf("=");let V,F=null;w>=0?(V=c[m].substring(0,w),F=c[m].substring(w+1)):V=c[m],p(V,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Ls(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;c instanceof Ls?(this.l=c.l,to(this,c.j),this.o=c.o,this.g=c.g,eo(this,c.u),this.h=c.h,cu(this,Gf(c.i)),this.m=c.m):c&&(p=String(c).match(jf))?(this.l=!1,to(this,p[1]||"",!0),this.o=no(p[2]||""),this.g=no(p[3]||"",!0),eo(this,p[4]),this.h=no(p[5]||"",!0),cu(this,p[6]||"",!0),this.m=no(p[7]||"")):(this.l=!1,this.i=new io(null,this.l))}Ls.prototype.toString=function(){const c=[];var p=this.j;p&&c.push(so(p,zf,!0),":");var m=this.g;return(m||p=="file")&&(c.push("//"),(p=this.o)&&c.push(so(p,zf,!0),"@"),c.push(Jr(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&c.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(so(m,m.charAt(0)=="/"?lT:aT,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",so(m,uT)),c.join("")},Ls.prototype.resolve=function(c){const p=Mn(this);let m=!!c.j;m?to(p,c.j):m=!!c.o,m?p.o=c.o:m=!!c.g,m?p.g=c.g:m=c.u!=null;var w=c.h;if(m)eo(p,c.u);else if(m=!!c.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var V=p.h.lastIndexOf("/");V!=-1&&(w=p.h.slice(0,V+1)+w)}if(V=w,V==".."||V==".")w="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){w=V.lastIndexOf("/",0)==0,V=V.split("/");const F=[];for(let et=0;et<V.length;){const Et=V[et++];Et=="."?w&&et==V.length&&F.push(""):Et==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),w&&et==V.length&&F.push("")):(F.push(Et),w=!0)}w=F.join("/")}else w=V}return m?p.h=w:m=c.i.toString()!=="",m?cu(p,Gf(c.i)):m=!!c.m,m&&(p.m=c.m),p};function Mn(c){return new Ls(c)}function to(c,p,m){c.j=m?no(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function eo(c,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);c.u=p}else c.u=null}function cu(c,p,m){p instanceof io?(c.i=p,hT(c.i,c.l)):(m||(p=so(p,cT)),c.i=new io(p,c.l))}function Kt(c,p,m){c.i.set(p,m)}function Va(c){return Kt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function no(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function so(c,p,m){return typeof c=="string"?(c=encodeURI(c).replace(p,oT),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function oT(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var zf=/[#\/\?@]/g,aT=/[#\?:]/g,lT=/[#\?]/g,cT=/[#\?@]/g,uT=/#/g;function io(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Ti(c){c.g||(c.g=new Map,c.h=0,c.i&&rT(c.i,function(p,m){c.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}e=io.prototype,e.add=function(c,p){Ti(this),this.i=null,c=ir(this,c);let m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(p),this.h+=1,this};function $f(c,p){Ti(c),p=ir(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Hf(c,p){return Ti(c),p=ir(c,p),c.g.has(p)}e.forEach=function(c,p){Ti(this),this.g.forEach(function(m,w){m.forEach(function(V){c.call(p,V,w,this)},this)},this)};function Wf(c,p){Ti(c);let m=[];if(typeof p=="string")Hf(c,p)&&(m=m.concat(c.g.get(ir(c,p))));else for(c=Array.from(c.g.values()),p=0;p<c.length;p++)m=m.concat(c[p]);return m}e.set=function(c,p){return Ti(this),this.i=null,c=ir(this,c),Hf(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},e.get=function(c,p){return c?(c=Wf(this,c),c.length>0?String(c[0]):p):p};function qf(c,p,m){$f(c,p),m.length>0&&(c.i=null,c.g.set(ir(c,p),g(m)),c.h+=m.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(let w=0;w<p.length;w++){var m=p[w];const V=Jr(m);m=Wf(this,m);for(let F=0;F<m.length;F++){let et=V;m[F]!==""&&(et+="="+Jr(m[F])),c.push(et)}}return this.i=c.join("&")};function Gf(c){const p=new io;return p.i=c.i,c.g&&(p.g=new Map(c.g),p.h=c.h),p}function ir(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function hT(c,p){p&&!c.j&&(Ti(c),c.i=null,c.g.forEach(function(m,w){const V=w.toLowerCase();w!=V&&($f(this,w),qf(this,V,m))},c)),c.j=p}function dT(c,p){const m=new Xr;if(o.Image){const w=new Image;w.onload=h(Fs,m,"TestLoadImage: loaded",!0,p,w),w.onerror=h(Fs,m,"TestLoadImage: error",!1,p,w),w.onabort=h(Fs,m,"TestLoadImage: abort",!1,p,w),w.ontimeout=h(Fs,m,"TestLoadImage: timeout",!1,p,w),o.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else p(!1)}function fT(c,p){const m=new Xr,w=new AbortController,V=setTimeout(()=>{w.abort(),Fs(m,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:w.signal}).then(F=>{clearTimeout(V),F.ok?Fs(m,"TestPingServer: ok",!0,p):Fs(m,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(V),Fs(m,"TestPingServer: error",!1,p)})}function Fs(c,p,m,w,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),w(m)}catch{}}function pT(){this.g=new Ve}function uu(c){this.i=c.Sb||null,this.h=c.ab||!1}d(uu,on),uu.prototype.g=function(){return new La(this.i,this.h)};function La(c,p){X.call(this),this.H=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(La,X),e=La.prototype,e.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=p,this.readyState=1,oo(this)},e.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(p.body=c),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ro(this)),this.readyState=0},e.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,oo(this)),this.g&&(this.readyState=3,oo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Kf(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Kf(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}e.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?ro(this):oo(this),this.readyState==3&&Kf(this)}},e.Oa=function(c){this.g&&(this.response=this.responseText=c,ro(this))},e.Na=function(c){this.g&&(this.response=c,ro(this))},e.ga=function(){this.g&&ro(this)};function ro(c){c.readyState=4,c.l=null,c.j=null,c.B=null,oo(c)}e.setRequestHeader=function(c,p){this.A.append(c,p)},e.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var m=p.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=p.next();return c.join(`\r
`)};function oo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(La.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Yf(c){let p="";return tt(c,function(m,w){p+=w,p+=":",p+=m,p+=`\r
`}),p}function hu(c,p,m){t:{for(w in m){var w=!1;break t}w=!0}w||(m=Yf(m),typeof c=="string"?m!=null&&Jr(m):Kt(c,p,m))}function ne(c){X.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(ne,X);var gT=/^https?$/i,mT=["POST","PUT"];e=ne.prototype,e.Fa=function(c){this.H=c},e.ea=function(c,p,m,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Pf.g(),this.g.onreadystatechange=f(u(this.Ca,this));try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(F){Qf(this,F);return}if(c=m||"",m=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var V in w)m.set(V,w[V]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const F of w.keys())m.set(F,w.get(F));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(m.keys()).find(F=>F.toLowerCase()=="content-type"),V=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(mT,p,void 0)>=0)||w||V||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,et]of m)this.g.setRequestHeader(F,et);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(F){Qf(this,F)}};function Qf(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.o=5,Xf(c),Fa(c)}function Xf(c){c.A||(c.A=!0,K(c,"complete"),K(c,"error"))}e.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,K(this,"complete"),K(this,"abort"),Fa(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fa(this,!0)),ne.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Jf(this):this.Xa())},e.Xa=function(){Jf(this)};function Jf(c){if(c.h&&typeof r<"u"){if(c.v&&Us(c)==4)setTimeout(c.Ca.bind(c),0);else if(K(c,"readystatechange"),Us(c)==4){c.h=!1;try{const F=c.ca();t:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var m;if(!(m=p)){var w;if(w=F===0){let et=String(c.D).match(jf)[1]||null;!et&&o.self&&o.self.location&&(et=o.self.location.protocol.slice(0,-1)),w=!gT.test(et?et.toLowerCase():"")}m=w}if(m)K(c,"complete"),K(c,"success");else{c.o=6;try{var V=Us(c)>2?c.g.statusText:""}catch{V=""}c.l=V+" ["+c.ca()+"]",Xf(c)}}finally{Fa(c)}}}}function Fa(c,p){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const m=c.g;c.g=null,p||K(c,"ready");try{m.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function Us(c){return c.g?c.g.readyState:0}e.ca=function(){try{return Us(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.La=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),Ne(p)}};function Zf(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function _T(c){const p={};c=(c.g&&Us(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(A(c[w]))continue;var m=eT(c[w]);const V=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const F=p[V]||[];p[V]=F,F.push(m)}Gt(p,function(w){return w.join(", ")})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ao(c,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||p}function tp(c){this.za=0,this.i=[],this.j=new Xr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ao("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ao("baseRetryDelayMs",5e3,c),this.Za=ao("retryDelaySeedMs",1e4,c),this.Ta=ao("forwardChannelMaxRetries",2,c),this.va=ao("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Vf(c&&c.concurrentRequestLimit),this.Ba=new pT,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=tp.prototype,e.ka=8,e.I=1,e.connect=function(c,p,m,w){Ke(0),this.W=c,this.H=p||{},m&&w!==void 0&&(this.H.OSID=m,this.H.OAID=w),this.F=this.X,this.J=cp(this,null,this.W),Ba(this)};function du(c){if(ep(c),c.I==3){var p=c.V++,m=Mn(c.J);if(Kt(m,"SID",c.M),Kt(m,"RID",p),Kt(m,"TYPE","terminate"),lo(c,m),p=new Vs(c,c.j,p),p.M=2,p.A=Va(Mn(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=p.A,m=!0),m||(p.g=up(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Na(p)}lp(c)}function Ua(c){c.g&&(pu(c),c.g.cancel(),c.g=null)}function ep(c){Ua(c),c.v&&(o.clearTimeout(c.v),c.v=null),ja(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function Ba(c){if(!Lf(c.h)&&!c.m){c.m=!0;var p=c.Ea;L||v(),G||(L(),G=!0),T.add(p,c),c.D=0}}function yT(c,p){return Ff(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=p.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Qr(u(c.Ea,c,p),ap(c,c.D)),c.D++,!0)}e.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const V=new Vs(this,this.j,c);let F=this.o;if(this.U&&(F?(F=Ee(F),Ge(F,this.U)):F=this.U),this.u!==null||this.R||(V.J=F,F=null),this.S)t:{for(var p=0,m=0;m<this.i.length;m++){e:{var w=this.i[m];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break e}w=void 0}if(w===void 0)break;if(p+=w,p>4096){p=m;break t}if(p===4096||m===this.i.length-1){p=m+1;break t}}p=1e3}else p=1e3;p=sp(this,V,p),m=Mn(this.J),Kt(m,"RID",c),Kt(m,"CVER",22),this.G&&Kt(m,"X-HTTP-Session-Id",this.G),lo(this,m),F&&(this.R?p="headers="+Jr(Yf(F))+"&"+p:this.u&&hu(m,this.u,F)),lu(this.h,V),this.Ra&&Kt(m,"TYPE","init"),this.S?(Kt(m,"$req",p),Kt(m,"SID","null"),V.U=!0,iu(V,m,null)):iu(V,m,p),this.I=2}}else this.I==3&&(c?np(this,c):this.i.length==0||Lf(this.h)||np(this))};function np(c,p){var m;p?m=p.l:m=c.V++;const w=Mn(c.J);Kt(w,"SID",c.M),Kt(w,"RID",m),Kt(w,"AID",c.K),lo(c,w),c.u&&c.o&&hu(w,c.u,c.o),m=new Vs(c,c.j,m,c.D+1),c.u===null&&(m.J=c.o),p&&(c.i=p.G.concat(c.i)),p=sp(c,m,1e3),m.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),lu(c.h,m),iu(m,w,p)}function lo(c,p){c.H&&tt(c.H,function(m,w){Kt(p,w,m)}),c.l&&tt({},function(m,w){Kt(p,w,m)})}function sp(c,p,m){m=Math.min(c.i.length,m);const w=c.l?u(c.l.Ka,c.l,c):null;t:{var V=c.i;let Et=-1;for(;;){const ye=["count="+m];Et==-1?m>0?(Et=V[0].g,ye.push("ofs="+Et)):Et=0:ye.push("ofs="+Et);let zt=!0;for(let Ie=0;Ie<m;Ie++){var F=V[Ie].g;const Nn=V[Ie].map;if(F-=Et,F<0)Et=Math.max(0,V[Ie].g-100),zt=!1;else try{F="req"+F+"_"||"";try{var et=Nn instanceof Map?Nn:Object.entries(Nn);for(const[Ai,Bs]of et){let js=Bs;a(Bs)&&(js=kt(Bs)),ye.push(F+Ai+"="+encodeURIComponent(js))}}catch(Ai){throw ye.push(F+"type="+encodeURIComponent("_badmap")),Ai}}catch{w&&w(Nn)}}if(zt){et=ye.join("&");break t}}et=void 0}return c=c.i.splice(0,m),p.G=c,et}function ip(c){if(!c.g&&!c.v){c.Y=1;var p=c.Da;L||v(),G||(L(),G=!0),T.add(p,c),c.A=0}}function fu(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Qr(u(c.Da,c),ap(c,c.A)),c.A++,!0)}e.Da=function(){if(this.v=null,rp(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Qr(u(this.Wa,this),c)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ke(10),Ua(this),rp(this))};function pu(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function rp(c){c.g=new Vs(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var p=Mn(c.na);Kt(p,"RID","rpc"),Kt(p,"SID",c.M),Kt(p,"AID",c.K),Kt(p,"CI",c.F?"0":"1"),!c.F&&c.ia&&Kt(p,"TO",c.ia),Kt(p,"TYPE","xmlhttp"),lo(c,p),c.u&&c.o&&hu(p,c.u,c.o),c.O&&(c.g.H=c.O);var m=c.g;c=c.ba,m.M=1,m.A=Va(Mn(p)),m.u=null,m.R=!0,Of(m,c)}e.Va=function(){this.C!=null&&(this.C=null,Ua(this),fu(this),Ke(19))};function ja(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function op(c,p){var m=null;if(c.g==p){ja(c),pu(c),c.g=null;var w=2}else if(au(c.h,p))m=p.G,Uf(c.h,p),w=1;else return;if(c.I!=0){if(p.o)if(w==1){m=p.u?p.u.length:0,p=Date.now()-p.F;var V=c.D;w=wi(),K(w,new Cf(w,m)),Ba(c)}else ip(c);else if(V=p.m,V==3||V==0&&p.X>0||!(w==1&&yT(c,p)||w==2&&fu(c)))switch(m&&m.length>0&&(p=c.h,p.i=p.i.concat(m)),V){case 1:Ii(c,5);break;case 4:Ii(c,10);break;case 3:Ii(c,6);break;default:Ii(c,2)}}}function ap(c,p){let m=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(m*=2),m*p}function Ii(c,p){if(c.j.info("Error code "+p),p==2){var m=u(c.bb,c),w=c.Ua;const V=!w;w=new Ls(w||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||to(w,"https"),Va(w),V?dT(w.toString(),m):fT(w.toString(),m)}else Ke(2);c.I=0,c.l&&c.l.pa(p),lp(c),ep(c)}e.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ke(2)):(this.j.info("Failed to ping google.com"),Ke(1))};function lp(c){if(c.I=0,c.ja=[],c.l){const p=Bf(c.h);(p.length!=0||c.i.length!=0)&&(_(c.ja,p),_(c.ja,c.i),c.h.i.length=0,g(c.i),c.i.length=0),c.l.oa()}}function cp(c,p,m){var w=m instanceof Ls?Mn(m):new Ls(m);if(w.g!="")p&&(w.g=p+"."+w.g),eo(w,w.u);else{var V=o.location;w=V.protocol,p=p?p+"."+V.hostname:V.hostname,V=+V.port;const F=new Ls(null);w&&to(F,w),p&&(F.g=p),V&&eo(F,V),m&&(F.h=m),w=F}return m=c.G,p=c.wa,m&&p&&Kt(w,m,p),Kt(w,"VER",c.ka),lo(c,w),w}function up(c,p,m){if(p&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Aa&&!c.ma?new ne(new uu({ab:m})):new ne(c.ma),p.Fa(c.L),p}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function hp(){}e=hp.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function za(){}za.prototype.g=function(c,p){return new ln(c,p)};function ln(c,p){X.call(this),this.g=new tp(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(c?c["X-WebChannel-Client-Profile"]=p.sa:c={"X-WebChannel-Client-Profile":p.sa}),this.g.U=c,(c=p&&p.Qb)&&!A(c)&&(this.g.u=c),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!A(p)&&(this.g.G=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new rr(this)}d(ln,X),ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){du(this.g)},ln.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.v&&(m={},m.__data__=kt(c),c=m);p.i.push(new iT(p.Ya++,c)),p.I==3&&Ba(p)},ln.prototype.N=function(){this.g.l=null,delete this.j,du(this.g),delete this.g,ln.Z.N.call(this)};function dp(c){nr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const m in p){c=m;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}d(dp,nr);function fp(){Ce.call(this),this.status=1}d(fp,Ce);function rr(c){this.g=c}d(rr,hp),rr.prototype.ra=function(){K(this.g,"a")},rr.prototype.qa=function(c){K(this.g,new dp(c))},rr.prototype.pa=function(c){K(this.g,new fp)},rr.prototype.oa=function(){K(this.g,"b")},za.prototype.createWebChannel=za.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,Hv=function(){return new za},$v=function(){return wi()},zv=Te,wh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ma.NO_ERROR=0,Ma.TIMEOUT=8,Ma.HTTP_ERROR=6,_l=Ma,xf.COMPLETE="complete",jv=xf,an.EventType=Tn,Tn.OPEN="a",Tn.CLOSE="b",Tn.ERROR="c",Tn.MESSAGE="d",X.prototype.listen=X.prototype.J,wo=an,ne.prototype.listenOnce=ne.prototype.K,ne.prototype.getLastError=ne.prototype.Ha,ne.prototype.getLastErrorCode=ne.prototype.ya,ne.prototype.getStatus=ne.prototype.ca,ne.prototype.getResponseJson=ne.prototype.La,ne.prototype.getResponseText=ne.prototype.la,ne.prototype.send=ne.prototype.ea,ne.prototype.setWithCredentials=ne.prototype.Fa,Bv=ne}).apply(typeof Ka<"u"?Ka:typeof self<"u"?self:typeof window<"u"?window:{});const Eg="@firebase/firestore",Tg="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ue.UNAUTHENTICATED=new Ue(null),Ue.GOOGLE_CREDENTIALS=new Ue("google-credentials-uid"),Ue.FIRST_PARTY=new Ue("first-party-uid"),Ue.MOCK_USER=new Ue("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Br="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi=new yd("@firebase/firestore");function dr(){return Hi.logLevel}function at(e,...t){if(Hi.logLevel<=Rt.DEBUG){const n=t.map(wd);Hi.debug(`Firestore (${Br}): ${e}`,...n)}}function xs(e,...t){if(Hi.logLevel<=Rt.ERROR){const n=t.map(wd);Hi.error(`Firestore (${Br}): ${e}`,...n)}}function kr(e,...t){if(Hi.logLevel<=Rt.WARN){const n=t.map(wd);Hi.warn(`Firestore (${Br}): ${e}`,...n)}}function wd(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,Wv(e,s,n)}function Wv(e,t,n){let s=`FIRESTORE (${Br}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw xs(s),new Error(s)}function Lt(e,t,n,s){let i="Unexpected state";typeof n=="string"?i=n:s=n,e||Wv(t,i,s)}function bt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rt extends os{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class HR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Ue.UNAUTHENTICATED)))}shutdown(){}}class WR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class qR{constructor(t){this.t=t,this.currentUser=Ue.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Lt(this.o===void 0,42304);let s=this.i;const i=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let r=new Ts;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Ts,t.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const l=r;t.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},a=l=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Ts)}}),0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Lt(typeof s.accessToken=="string",31837,{l:s}),new qv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Lt(t===null||typeof t=="string",2055,{h:t}),new Ue(t)}}class GR{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Ue.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class KR{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new GR(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Ue.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ig{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YR{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Lt(this.o===void 0,3512);const s=r=>{r.error!=null&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,at("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable((()=>s(r)))};const i=r=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((r=>i(r))),setTimeout((()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?i(r):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ig(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Lt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ig(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=QR(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<n&&(s+=t.charAt(i[r]%62))}return s}}function Ct(e,t){return e<t?-1:e>t?1:0}function Eh(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const i=e.charAt(s),r=t.charAt(s);if(i!==r)return Vu(i)===Vu(r)?Ct(i,r):Vu(i)?1:-1}return Ct(e.length,t.length)}const XR=55296,JR=57343;function Vu(e){const t=e.charCodeAt(0);return t>=XR&&t<=JR}function Dr(e,t,n){return e.length===t.length&&e.every(((s,i)=>n(s,t[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="__name__";class jn{constructor(t,n,s){n===void 0?n=0:n>t.length&&mt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&mt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return jn.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof jn?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let i=0;i<s;i++){const r=jn.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return Ct(t.length,n.length)}static compareSegments(t,n){const s=jn.isNumericId(t),i=jn.isNumericId(n);return s&&!i?-1:!s&&i?1:s&&i?jn.extractNumericId(t).compare(jn.extractNumericId(n)):Eh(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ri.fromString(t.substring(4,t.length-2))}}class qt extends jn{construct(t,n,s){return new qt(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new rt($.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((i=>i.length>0)))}return new qt(n)}static emptyPath(){return new qt([])}}const ZR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ke extends jn{construct(t,n,s){return new ke(t,n,s)}static isValidIdentifier(t){return ZR.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ke.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ag}static keyField(){return new ke([Ag])}static fromServerFormat(t){const n=[];let s="",i=0;const r=()=>{if(s.length===0)throw new rt($.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new rt($.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new rt($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(s+=a,i++):(r(),i++)}if(r(),o)throw new rt($.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ke(n)}static emptyPath(){return new ke([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(t){this.path=t}static fromPath(t){return new ct(qt.fromString(t))}static fromName(t){return new ct(qt.fromString(t).popFirst(5))}static empty(){return new ct(qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&qt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return qt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ct(new qt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(e,t,n){if(!n)throw new rt($.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function tC(e,t,n,s){if(t===!0&&s===!0)throw new rt($.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Sg(e){if(!ct.isDocumentKey(e))throw new rt($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Rg(e){if(ct.isDocumentKey(e))throw new rt($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Kv(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Mc(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":mt(12329,{type:typeof e})}function di(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new rt($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mc(e);throw new rt($.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(e,t){const n={typeString:e};return t&&(n.value=t),n}function wa(e,t){if(!Kv(e))throw new rt($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const i=t[s].typeString,r="value"in t[s]?{value:t[s].value}:void 0;if(!(s in e)){n=`JSON missing required field: '${s}'`;break}const o=e[s];if(i&&typeof o!==i){n=`JSON field '${s}' must be a ${i}.`;break}if(r!==void 0&&o!==r.value){n=`Expected '${s}' field to equal '${r.value}'`;break}}if(n)throw new rt($.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg=-62135596800,xg=1e6;class Qt{static now(){return Qt.fromMillis(Date.now())}static fromDate(t){return Qt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*xg);return new Qt(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new rt($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new rt($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Cg)throw new rt($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new rt($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xg}_compareTo(t){return this.seconds===t.seconds?Ct(this.nanoseconds,t.nanoseconds):Ct(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(wa(t,Qt._jsonSchema))return new Qt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Cg;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qt._jsonSchemaVersion="firestore/timestamp/1.0",Qt._jsonSchema={type:fe("string",Qt._jsonSchemaVersion),seconds:fe("number"),nanoseconds:fe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{static fromTimestamp(t){return new vt(t)}static min(){return new vt(new Qt(0,0))}static max(){return new vt(new Qt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=-1;function eC(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,i=vt.fromTimestamp(s===1e9?new Qt(n+1,0):new Qt(n,s));return new fi(i,ct.empty(),t)}function nC(e){return new fi(e.readTime,e.key,ea)}class fi{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new fi(vt.min(),ct.empty(),ea)}static max(){return new fi(vt.max(),ct.empty(),ea)}}function sC(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=ct.comparator(e.documentKey,t.documentKey),n!==0?n:Ct(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jr(e){if(e.code!==$.FAILED_PRECONDITION||e.message!==iC)throw e;at("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&mt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new H(((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(s,i)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):H.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):H.reject(n)}static resolve(t){return new H(((n,s)=>{n(t)}))}static reject(t){return new H(((n,s)=>{s(t)}))}static waitFor(t){return new H(((n,s)=>{let i=0,r=0,o=!1;t.forEach((a=>{++i,a.next((()=>{++r,o&&r===i&&n()}),(l=>s(l)))})),o=!0,r===i&&n()}))}static or(t){let n=H.resolve(!1);for(const s of t)n=n.next((i=>i?H.resolve(i):s()));return n}static forEach(t,n){const s=[];return t.forEach(((i,r)=>{s.push(n.call(this,i,r))})),this.waitFor(s)}static mapArray(t,n){return new H(((s,i)=>{const r=t.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const u=l;n(t[u]).next((h=>{o[u]=h,++a,a===r&&s(o)}),(h=>i(h)))}}))}static doWhile(t,n){return new H(((s,i)=>{const r=()=>{t()===!0?n().next((()=>{r()}),i):s()};r()}))}}function oC(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zr(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Nc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td=-1;function Vc(e){return e==null}function zl(e){return e===0&&1/e==-1/0}function aC(e){return typeof e=="number"&&Number.isInteger(e)&&!zl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="";function lC(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Pg(t)),t=cC(e.get(n),t);return Pg(t)}function cC(e,t){let n=t;const s=e.length;for(let i=0;i<s;i++){const r=e.charAt(i);switch(r){case"\0":n+="";break;case Yv:n+="";break;default:n+=r}}return n}function Pg(e){return e+Yv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ji(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Qv(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(t,n){this.comparator=t,this.root=n||xe.EMPTY}insert(t,n){return new ee(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,xe.BLACK,null,null))}remove(t){return new ee(this.comparator,this.root.remove(t,this.comparator).copy(null,null,xe.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(t,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ya(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ya(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ya(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ya(this.root,t,this.comparator,!0)}}class Ya{constructor(t,n,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?s(t.key,n):1,n&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class xe{constructor(t,n,s,i,r){this.key=t,this.value=n,this.color=s??xe.RED,this.left=i??xe.EMPTY,this.right=r??xe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,i,r){return new xe(t??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let i=this;const r=s(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,n,s),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return xe.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw mt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw mt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw mt(27949);return t+(this.isRed()?0:1)}}xe.EMPTY=null,xe.RED=!0,xe.BLACK=!1;xe.EMPTY=new class{constructor(){this.size=0}get key(){throw mt(57766)}get value(){throw mt(16141)}get color(){throw mt(16727)}get left(){throw mt(29726)}get right(){throw mt(36894)}copy(t,n,s,i,r){return this}insert(t,n,s){return new xe(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(t){this.comparator=t,this.data=new ee(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dg(this.data.getIterator())}getIteratorFrom(t){return new Dg(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof we)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new we(this.comparator);return n.data=t,n}}class Dg{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(t){this.fields=t,t.sort(ke.comparator)}static empty(){return new In([])}unionWith(t){let n=new we(ke.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new In(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Dr(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Xv("Invalid base64 string: "+r):r}})(t);return new Me(n)}static fromUint8Array(t){const n=(function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r})(t);return new Me(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ct(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Me.EMPTY_BYTE_STRING=new Me("");const uC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pi(e){if(Lt(!!e,39018),typeof e=="string"){let t=0;const n=uC.exec(e);if(Lt(!!n,46558,{timestamp:e}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:oe(e.seconds),nanos:oe(e.nanos)}}function oe(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function gi(e){return typeof e=="string"?Me.fromBase64String(e):Me.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="server_timestamp",Zv="__type__",tb="__previous_value__",eb="__local_write_time__";function Id(e){return(e?.mapValue?.fields||{})[Zv]?.stringValue===Jv}function Lc(e){const t=e.mapValue.fields[tb];return Id(t)?Lc(t):t}function na(e){const t=pi(e.mapValue.fields[eb].timestampValue);return new Qt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(t,n,s,i,r,o,a,l,u,h){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const $l="(default)";class sa{constructor(t,n){this.projectId=t,this.database=n||$l}static empty(){return new sa("","")}get isDefaultDatabase(){return this.database===$l}isEqual(t){return t instanceof sa&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb="__type__",dC="__max__",Qa={mapValue:{}},sb="__vector__",Hl="value";function mi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Id(e)?4:pC(e)?9007199254740991:fC(e)?10:11:mt(28295,{value:e})}function ss(e,t){if(e===t)return!0;const n=mi(e);if(n!==mi(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return na(e).isEqual(na(t));case 3:return(function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=pi(i.timestampValue),a=pi(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(i,r){return gi(i.bytesValue).isEqual(gi(r.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(i,r){return oe(i.geoPointValue.latitude)===oe(r.geoPointValue.latitude)&&oe(i.geoPointValue.longitude)===oe(r.geoPointValue.longitude)})(e,t);case 2:return(function(i,r){if("integerValue"in i&&"integerValue"in r)return oe(i.integerValue)===oe(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=oe(i.doubleValue),a=oe(r.doubleValue);return o===a?zl(o)===zl(a):isNaN(o)&&isNaN(a)}return!1})(e,t);case 9:return Dr(e.arrayValue.values||[],t.arrayValue.values||[],ss);case 10:case 11:return(function(i,r){const o=i.mapValue.fields||{},a=r.mapValue.fields||{};if(kg(o)!==kg(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ss(o[l],a[l])))return!1;return!0})(e,t);default:return mt(52216,{left:e})}}function ia(e,t){return(e.values||[]).find((n=>ss(n,t)))!==void 0}function Or(e,t){if(e===t)return 0;const n=mi(e),s=mi(t);if(n!==s)return Ct(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ct(e.booleanValue,t.booleanValue);case 2:return(function(r,o){const a=oe(r.integerValue||r.doubleValue),l=oe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(e,t);case 3:return Og(e.timestampValue,t.timestampValue);case 4:return Og(na(e),na(t));case 5:return Eh(e.stringValue,t.stringValue);case 6:return(function(r,o){const a=gi(r),l=gi(o);return a.compareTo(l)})(e.bytesValue,t.bytesValue);case 7:return(function(r,o){const a=r.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Ct(a[u],l[u]);if(h!==0)return h}return Ct(a.length,l.length)})(e.referenceValue,t.referenceValue);case 8:return(function(r,o){const a=Ct(oe(r.latitude),oe(o.latitude));return a!==0?a:Ct(oe(r.longitude),oe(o.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return Mg(e.arrayValue,t.arrayValue);case 10:return(function(r,o){const a=r.fields||{},l=o.fields||{},u=a[Hl]?.arrayValue,h=l[Hl]?.arrayValue,d=Ct(u?.values?.length||0,h?.values?.length||0);return d!==0?d:Mg(u,h)})(e.mapValue,t.mapValue);case 11:return(function(r,o){if(r===Qa.mapValue&&o===Qa.mapValue)return 0;if(r===Qa.mapValue)return 1;if(o===Qa.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=Eh(l[d],h[d]);if(f!==0)return f;const g=Or(a[l[d]],u[h[d]]);if(g!==0)return g}return Ct(l.length,h.length)})(e.mapValue,t.mapValue);default:throw mt(23264,{he:n})}}function Og(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Ct(e,t);const n=pi(e),s=pi(t),i=Ct(n.seconds,s.seconds);return i!==0?i:Ct(n.nanos,s.nanos)}function Mg(e,t){const n=e.values||[],s=t.values||[];for(let i=0;i<n.length&&i<s.length;++i){const r=Or(n[i],s[i]);if(r)return r}return Ct(n.length,s.length)}function Mr(e){return Th(e)}function Th(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const s=pi(n);return`time(${s.seconds},${s.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return gi(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return ct.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let s="[",i=!0;for(const r of n.values||[])i?i=!1:s+=",",s+=Th(r);return s+"]"})(e.arrayValue):"mapValue"in e?(function(n){const s=Object.keys(n.fields||{}).sort();let i="{",r=!0;for(const o of s)r?r=!1:i+=",",i+=`${o}:${Th(n.fields[o])}`;return i+"}"})(e.mapValue):mt(61005,{value:e})}function yl(e){switch(mi(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Lc(e);return t?16+yl(t):16;case 5:return 2*e.stringValue.length;case 6:return gi(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((i,r)=>i+yl(r)),0)})(e.arrayValue);case 10:case 11:return(function(s){let i=0;return Ji(s.fields,((r,o)=>{i+=r.length+yl(o)})),i})(e.mapValue);default:throw mt(13486,{value:e})}}function Ng(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Ih(e){return!!e&&"integerValue"in e}function Ad(e){return!!e&&"arrayValue"in e}function Vg(e){return!!e&&"nullValue"in e}function Lg(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function vl(e){return!!e&&"mapValue"in e}function fC(e){return(e?.mapValue?.fields||{})[nb]?.stringValue===sb}function Uo(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Ji(e.mapValue.fields,((n,s)=>t.mapValue.fields[n]=Uo(s))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Uo(e.arrayValue.values[n]);return t}return{...e}}function pC(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===dC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(t){this.value=t}static empty(){return new gn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!vl(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Uo(n)}setAll(t){let n=ke.emptyPath(),s={},i=[];t.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,i),s={},i=[],n=a.popLast()}o?s[a.lastSegment()]=Uo(o):i.push(a.lastSegment())}));const r=this.getFieldsMap(n);this.applyChanges(r,s,i)}delete(t){const n=this.field(t.popLast());vl(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ss(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let i=n.mapValue.fields[t.get(s)];vl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,s){Ji(n,((i,r)=>t[i]=r));for(const i of s)delete t[i]}clone(){return new gn(Uo(this.value))}}function ib(e){const t=[];return Ji(e.fields,((n,s)=>{const i=new ke([n]);if(vl(s)){const r=ib(s.mapValue).fields;if(r.length===0)t.push(i);else for(const o of r)t.push(i.child(o))}else t.push(i)})),new In(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(t,n,s,i,r,o,a){this.key=t,this.documentType=n,this.version=s,this.readTime=i,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(t){return new je(t,0,vt.min(),vt.min(),vt.min(),gn.empty(),0)}static newFoundDocument(t,n,s,i){return new je(t,1,n,vt.min(),s,i,0)}static newNoDocument(t,n){return new je(t,2,n,vt.min(),vt.min(),gn.empty(),0)}static newUnknownDocument(t,n){return new je(t,3,n,vt.min(),vt.min(),gn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(vt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof je&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new je(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(t,n){this.position=t,this.inclusive=n}}function Fg(e,t,n){let s=0;for(let i=0;i<e.position.length;i++){const r=t[i],o=e.position[i];if(r.field.isKeyField()?s=ct.comparator(ct.fromName(o.referenceValue),n.key):s=Or(o,n.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function Ug(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ss(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(t,n="asc"){this.field=t,this.dir=n}}function gC(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{}class he extends rb{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new _C(t,n,s):n==="array-contains"?new bC(t,s):n==="in"?new wC(t,s):n==="not-in"?new EC(t,s):n==="array-contains-any"?new TC(t,s):new he(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new yC(t,s):new vC(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Or(n,this.value)):n!==null&&mi(this.value)===mi(n)&&this.matchesComparison(Or(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return mt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kn extends rb{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new kn(t,n)}matches(t){return ob(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ob(e){return e.op==="and"}function ab(e){return mC(e)&&ob(e)}function mC(e){for(const t of e.filters)if(t instanceof kn)return!1;return!0}function Ah(e){if(e instanceof he)return e.field.canonicalString()+e.op.toString()+Mr(e.value);if(ab(e))return e.filters.map((t=>Ah(t))).join(",");{const t=e.filters.map((n=>Ah(n))).join(",");return`${e.op}(${t})`}}function lb(e,t){return e instanceof he?(function(s,i){return i instanceof he&&s.op===i.op&&s.field.isEqual(i.field)&&ss(s.value,i.value)})(e,t):e instanceof kn?(function(s,i){return i instanceof kn&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce(((r,o,a)=>r&&lb(o,i.filters[a])),!0):!1})(e,t):void mt(19439)}function cb(e){return e instanceof he?(function(n){return`${n.field.canonicalString()} ${n.op} ${Mr(n.value)}`})(e):e instanceof kn?(function(n){return n.op.toString()+" {"+n.getFilters().map(cb).join(" ,")+"}"})(e):"Filter"}class _C extends he{constructor(t,n,s){super(t,n,s),this.key=ct.fromName(s.referenceValue)}matches(t){const n=ct.comparator(t.key,this.key);return this.matchesComparison(n)}}class yC extends he{constructor(t,n){super(t,"in",n),this.keys=ub("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class vC extends he{constructor(t,n){super(t,"not-in",n),this.keys=ub("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function ub(e,t){return(t.arrayValue?.values||[]).map((n=>ct.fromName(n.referenceValue)))}class bC extends he{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Ad(n)&&ia(n.arrayValue,this.value)}}class wC extends he{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&ia(this.value.arrayValue,n)}}class EC extends he{constructor(t,n){super(t,"not-in",n)}matches(t){if(ia(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ia(this.value.arrayValue,n)}}class TC extends he{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Ad(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>ia(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(t,n=null,s=[],i=[],r=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=o,this.endAt=a,this.Te=null}}function Bg(e,t=null,n=[],s=[],i=null,r=null,o=null){return new IC(e,t,n,s,i,r,o)}function Sd(e){const t=bt(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>Ah(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(r){return r.field.canonicalString()+r.dir})(s))).join(","),Vc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>Mr(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>Mr(s))).join(",")),t.Te=n}return t.Te}function Rd(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!gC(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!lb(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ug(e.startAt,t.startAt)&&Ug(e.endAt,t.endAt)}function Sh(e){return ct.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(t,n=null,s=[],i=[],r=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function AC(e,t,n,s,i,r,o,a){return new Ea(e,t,n,s,i,r,o,a)}function Cd(e){return new Ea(e)}function jg(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function hb(e){return e.collectionGroup!==null}function Bo(e){const t=bt(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),n.add(r.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new we(ke.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(t).forEach((r=>{n.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new ql(r,s))})),n.has(ke.keyField().canonicalString())||t.Ie.push(new ql(ke.keyField(),s))}return t.Ie}function Kn(e){const t=bt(e);return t.Ee||(t.Ee=SC(t,Bo(e))),t.Ee}function SC(e,t){if(e.limitType==="F")return Bg(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((i=>{const r=i.dir==="desc"?"asc":"desc";return new ql(i.field,r)}));const n=e.endAt?new Wl(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Wl(e.startAt.position,e.startAt.inclusive):null;return Bg(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}}function Rh(e,t){const n=e.filters.concat([t]);return new Ea(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ch(e,t,n){return new Ea(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Fc(e,t){return Rd(Kn(e),Kn(t))&&e.limitType===t.limitType}function db(e){return`${Sd(Kn(e))}|lt:${e.limitType}`}function fr(e){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((i=>cb(i))).join(", ")}]`),Vc(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((i=>Mr(i))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((i=>Mr(i))).join(",")),`Target(${s})`})(Kn(e))}; limitType=${e.limitType})`}function Uc(e,t){return t.isFoundDocument()&&(function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):ct.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)})(e,t)&&(function(s,i){for(const r of Bo(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0})(e,t)&&(function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0})(e,t)&&(function(s,i){return!(s.startAt&&!(function(o,a,l){const u=Fg(o,a,l);return o.inclusive?u<=0:u<0})(s.startAt,Bo(s),i)||s.endAt&&!(function(o,a,l){const u=Fg(o,a,l);return o.inclusive?u>=0:u>0})(s.endAt,Bo(s),i))})(e,t)}function RC(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function fb(e){return(t,n)=>{let s=!1;for(const i of Bo(e)){const r=CC(i,t,n);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function CC(e,t,n){const s=e.field.isKeyField()?ct.comparator(t.key,n.key):(function(r,o,a){const l=o.data.field(r),u=a.data.field(r);return l!==null&&u!==null?Or(l,u):mt(42886)})(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return mt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),i=this.inner[s];if(i===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Ji(this.inner,((n,s)=>{for(const[i,r]of s)t(i,r)}))}isEmpty(){return Qv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=new ee(ct.comparator);function Ps(){return xC}const pb=new ee(ct.comparator);function Eo(...e){let t=pb;for(const n of e)t=t.insert(n.key,n);return t}function gb(e){let t=pb;return e.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function Ni(){return jo()}function mb(){return jo()}function jo(){return new Zi((e=>e.toString()),((e,t)=>e.isEqual(t)))}const PC=new ee(ct.comparator),kC=new we(ct.comparator);function xt(...e){let t=kC;for(const n of e)t=t.add(n);return t}const DC=new we(Ct);function OC(){return DC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zl(t)?"-0":t}}function _b(e){return{integerValue:""+e}}function MC(e,t){return aC(t)?_b(t):xd(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(){this._=void 0}}function NC(e,t,n){return e instanceof ra?(function(i,r){const o={fields:{[Zv]:{stringValue:Jv},[eb]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&Id(r)&&(r=Lc(r)),r&&(o.fields[tb]=r),{mapValue:o}})(n,t):e instanceof oa?vb(e,t):e instanceof aa?bb(e,t):(function(i,r){const o=yb(i,r),a=zg(o)+zg(i.Ae);return Ih(o)&&Ih(i.Ae)?_b(a):xd(i.serializer,a)})(e,t)}function VC(e,t,n){return e instanceof oa?vb(e,t):e instanceof aa?bb(e,t):n}function yb(e,t){return e instanceof Gl?(function(s){return Ih(s)||(function(r){return!!r&&"doubleValue"in r})(s)})(t)?t:{integerValue:0}:null}class ra extends Bc{}class oa extends Bc{constructor(t){super(),this.elements=t}}function vb(e,t){const n=wb(t);for(const s of e.elements)n.some((i=>ss(i,s)))||n.push(s);return{arrayValue:{values:n}}}class aa extends Bc{constructor(t){super(),this.elements=t}}function bb(e,t){let n=wb(t);for(const s of e.elements)n=n.filter((i=>!ss(i,s)));return{arrayValue:{values:n}}}class Gl extends Bc{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function zg(e){return oe(e.integerValue||e.doubleValue)}function wb(e){return Ad(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(t,n){this.field=t,this.transform=n}}function FC(e,t){return e.field.isEqual(t.field)&&(function(s,i){return s instanceof oa&&i instanceof oa||s instanceof aa&&i instanceof aa?Dr(s.elements,i.elements,ss):s instanceof Gl&&i instanceof Gl?ss(s.Ae,i.Ae):s instanceof ra&&i instanceof ra})(e.transform,t.transform)}class UC{constructor(t,n){this.version=t,this.transformResults=n}}class Yn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Yn}static exists(t){return new Yn(void 0,t)}static updateTime(t){return new Yn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function bl(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class jc{}function Eb(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Ib(e.key,Yn.none()):new Ta(e.key,e.data,Yn.none());{const n=e.data,s=gn.empty();let i=new we(ke.comparator);for(let r of t.fields)if(!i.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?s.delete(r):s.set(r,o),i=i.add(r)}return new tr(e.key,s,new In(i.toArray()),Yn.none())}}function BC(e,t,n){e instanceof Ta?(function(i,r,o){const a=i.value.clone(),l=Hg(i.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(e,t,n):e instanceof tr?(function(i,r,o){if(!bl(i.precondition,r))return void r.convertToUnknownDocument(o.version);const a=Hg(i.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(Tb(i)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(e,t,n):(function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()})(0,t,n)}function zo(e,t,n,s){return e instanceof Ta?(function(r,o,a,l){if(!bl(r.precondition,o))return a;const u=r.value.clone(),h=Wg(r.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(e,t,n,s):e instanceof tr?(function(r,o,a,l){if(!bl(r.precondition,o))return a;const u=Wg(r.fieldTransforms,l,o),h=o.data;return h.setAll(Tb(r)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map((d=>d.field)))})(e,t,n,s):(function(r,o,a){return bl(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(e,t,n)}function jC(e,t){let n=null;for(const s of e.fieldTransforms){const i=t.data.field(s.field),r=yb(s.transform,i||null);r!=null&&(n===null&&(n=gn.empty()),n.set(s.field,r))}return n||null}function $g(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&Dr(s,i,((r,o)=>FC(r,o)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ta extends jc{constructor(t,n,s,i=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class tr extends jc{constructor(t,n,s,i,r=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Tb(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}})),t}function Hg(e,t,n){const s=new Map;Lt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const r=e[i],o=r.transform,a=t.data.field(r.field);s.set(r.field,VC(o,a,n[i]))}return s}function Wg(e,t,n){const s=new Map;for(const i of e){const r=i.transform,o=n.data.field(i.field);s.set(i.field,NC(r,o,t))}return s}class Ib extends jc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zC extends jc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(t,n,s,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(t.key)&&BC(r,t,s[i])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=zo(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=zo(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=mb();return this.mutations.forEach((i=>{const r=t.get(i.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(i.key)?null:a;const l=Eb(o,a);l!==null&&s.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(vt.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),xt())}isEqual(t){return this.batchId===t.batchId&&Dr(this.mutations,t.mutations,((n,s)=>$g(n,s)))&&Dr(this.baseMutations,t.baseMutations,((n,s)=>$g(n,s)))}}class Pd{constructor(t,n,s,i){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(t,n,s){Lt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let i=(function(){return PC})();const r=t.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,s[o].version);return new Pd(t,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ce,Pt;function qC(e){switch(e){case $.OK:return mt(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return mt(15467,{code:e})}}function Ab(e){if(e===void 0)return xs("GRPC error has no .code"),$.UNKNOWN;switch(e){case ce.OK:return $.OK;case ce.CANCELLED:return $.CANCELLED;case ce.UNKNOWN:return $.UNKNOWN;case ce.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case ce.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case ce.INTERNAL:return $.INTERNAL;case ce.UNAVAILABLE:return $.UNAVAILABLE;case ce.UNAUTHENTICATED:return $.UNAUTHENTICATED;case ce.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case ce.NOT_FOUND:return $.NOT_FOUND;case ce.ALREADY_EXISTS:return $.ALREADY_EXISTS;case ce.PERMISSION_DENIED:return $.PERMISSION_DENIED;case ce.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case ce.ABORTED:return $.ABORTED;case ce.OUT_OF_RANGE:return $.OUT_OF_RANGE;case ce.UNIMPLEMENTED:return $.UNIMPLEMENTED;case ce.DATA_LOSS:return $.DATA_LOSS;default:return mt(39323,{code:e})}}(Pt=ce||(ce={}))[Pt.OK=0]="OK",Pt[Pt.CANCELLED=1]="CANCELLED",Pt[Pt.UNKNOWN=2]="UNKNOWN",Pt[Pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pt[Pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pt[Pt.NOT_FOUND=5]="NOT_FOUND",Pt[Pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pt[Pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pt[Pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pt[Pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pt[Pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pt[Pt.ABORTED=10]="ABORTED",Pt[Pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pt[Pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pt[Pt.INTERNAL=13]="INTERNAL",Pt[Pt.UNAVAILABLE=14]="UNAVAILABLE",Pt[Pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=new ri([4294967295,4294967295],0);function qg(e){const t=GC().encode(e),n=new Uv;return n.update(t),new Uint8Array(n.digest())}function Gg(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new ri([n,s],0),new ri([i,r],0)]}class kd{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new To(`Invalid padding: ${n}`);if(s<0)throw new To(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new To(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new To(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=ri.fromNumber(this.ge)}ye(t,n,s){let i=t.add(n.multiply(ri.fromNumber(s)));return i.compare(KC)===1&&(i=new ri([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=qg(t),[s,i]=Gg(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(s,i,r);if(!this.we(o))return!1}return!0}static create(t,n,s){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new kd(r,i,n);return s.forEach((a=>o.insert(a))),o}insert(t){if(this.ge===0)return;const n=qg(t),[s,i]=Gg(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(s,i,r);this.Se(o)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class To extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(t,n,s,i,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const i=new Map;return i.set(t,Ia.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new zc(vt.min(),i,new ee(Ct),Ps(),xt())}}class Ia{constructor(t,n,s,i,r){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new Ia(s,n,xt(),xt(),xt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(t,n,s,i){this.be=t,this.removedTargetIds=n,this.key=s,this.De=i}}class Sb{constructor(t,n){this.targetId=t,this.Ce=n}}class Rb{constructor(t,n,s=Me.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=i}}class Kg{constructor(){this.ve=0,this.Fe=Yg(),this.Me=Me.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=xt(),n=xt(),s=xt();return this.Fe.forEach(((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:mt(38017,{changeType:r})}})),new Ia(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=Yg()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Lt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class YC{constructor(t){this.Ge=t,this.ze=new Map,this.je=Ps(),this.Je=Xa(),this.He=Xa(),this.Ye=new ee(Ct)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:mt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,i)=>{this.rt(i)&&n(i)}))}st(t){const n=t.targetId,s=t.Ce.count,i=this.ot(n);if(i){const r=i.target;if(Sh(r))if(s===0){const o=new ct(r.path);this.et(n,o,je.newNoDocument(o,vt.min()))}else Lt(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const a=this.ut(t),l=a?this.ct(a,t,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=n;let o,a;try{o=gi(s).toUint8Array()}catch(l){if(l instanceof Xv)return kr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new kd(o,i,r)}catch(l){return kr(l instanceof To?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let i=0;return s.forEach((r=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;t.mightContain(a)||(this.et(n,r,null),i++)})),i}Tt(t){const n=new Map;this.ze.forEach(((r,o)=>{const a=this.ot(o);if(a){if(r.current&&Sh(a.target)){const l=new ct(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,je.newNoDocument(l,t))}r.Be&&(n.set(o,r.ke()),r.qe())}}));let s=xt();this.He.forEach(((r,o)=>{let a=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(s=s.add(r))})),this.je.forEach(((r,o)=>o.setReadTime(t)));const i=new zc(t,n,this.Ye,this.je,s);return this.je=Ps(),this.Je=Xa(),this.He=Xa(),this.Ye=new ee(Ct),i}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const i=this.nt(t);this.Et(t,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Kg,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new we(Ct),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new we(Ct),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||at("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Kg),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Xa(){return new ee(ct.comparator)}function Yg(){return new ee(ct.comparator)}const QC={asc:"ASCENDING",desc:"DESCENDING"},XC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JC={and:"AND",or:"OR"};class ZC{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function xh(e,t){return e.useProto3Json||Vc(t)?t:{value:t}}function Kl(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Cb(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function tx(e,t){return Kl(e,t.toTimestamp())}function Qn(e){return Lt(!!e,49232),vt.fromTimestamp((function(n){const s=pi(n);return new Qt(s.seconds,s.nanos)})(e))}function Dd(e,t){return Ph(e,t).canonicalString()}function Ph(e,t){const n=(function(i){return new qt(["projects",i.projectId,"databases",i.database])})(e).child("documents");return t===void 0?n:n.child(t)}function xb(e){const t=qt.fromString(e);return Lt(Mb(t),10190,{key:t.toString()}),t}function kh(e,t){return Dd(e.databaseId,t.path)}function Lu(e,t){const n=xb(t);if(n.get(1)!==e.databaseId.projectId)throw new rt($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new rt($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ct(kb(n))}function Pb(e,t){return Dd(e.databaseId,t)}function ex(e){const t=xb(e);return t.length===4?qt.emptyPath():kb(t)}function Dh(e){return new qt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function kb(e){return Lt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function Qg(e,t,n){return{name:kh(e,t),fields:n.value.mapValue.fields}}function nx(e,t){let n;if("targetChange"in t){t.targetChange;const s=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:mt(39313,{state:u})})(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],r=(function(u,h){return u.useProto3Json?(Lt(h===void 0||typeof h=="string",58123),Me.fromBase64String(h||"")):(Lt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Me.fromUint8Array(h||new Uint8Array))})(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&(function(u){const h=u.code===void 0?$.UNKNOWN:Ab(u.code);return new rt(h,u.message||"")})(o);n=new Rb(s,i,r,a||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const i=Lu(e,s.document.name),r=Qn(s.document.updateTime),o=s.document.createTime?Qn(s.document.createTime):vt.min(),a=new gn({mapValue:{fields:s.document.fields}}),l=je.newFoundDocument(i,r,o,a),u=s.targetIds||[],h=s.removedTargetIds||[];n=new wl(u,h,l.key,l)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const i=Lu(e,s.document),r=s.readTime?Qn(s.readTime):vt.min(),o=je.newNoDocument(i,r),a=s.removedTargetIds||[];n=new wl([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const i=Lu(e,s.document),r=s.removedTargetIds||[];n=new wl([],r,i,null)}else{if(!("filter"in t))return mt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,o=new WC(i,r),a=s.targetId;n=new Sb(a,o)}}return n}function sx(e,t){let n;if(t instanceof Ta)n={update:Qg(e,t.key,t.value)};else if(t instanceof Ib)n={delete:kh(e,t.key)};else if(t instanceof tr)n={update:Qg(e,t.key,t.data),updateMask:dx(t.fieldMask)};else{if(!(t instanceof zC))return mt(16599,{Vt:t.type});n={verify:kh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(r,o){const a=o.transform;if(a instanceof ra)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof oa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof aa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Gl)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw mt(20930,{transform:o.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(i,r){return r.updateTime!==void 0?{updateTime:tx(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:mt(27497)})(e,t.precondition)),n}function ix(e,t){return e&&e.length>0?(Lt(t!==void 0,14353),e.map((n=>(function(i,r){let o=i.updateTime?Qn(i.updateTime):Qn(r);return o.isEqual(vt.min())&&(o=Qn(r)),new UC(o,i.transformResults||[])})(n,t)))):[]}function rx(e,t){return{documents:[Pb(e,t.path)]}}function ox(e,t){const n={structuredQuery:{}},s=t.path;let i;t.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Pb(e,i);const r=(function(u){if(u.length!==0)return Ob(kn.create(u,"and"))})(t.filters);r&&(n.structuredQuery.where=r);const o=(function(u){if(u.length!==0)return u.map((h=>(function(f){return{field:pr(f.field),direction:cx(f.dir)}})(h)))})(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=xh(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(t.endAt)),{ft:n,parent:i}}function ax(e){let t=ex(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){Lt(s===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:t=t.child(h.collectionId)}let r=[];n.where&&(r=(function(d){const f=Db(d);return f instanceof kn&&ab(f)?f.getFilters():[f]})(n.where));let o=[];n.orderBy&&(o=(function(d){return d.map((f=>(function(_){return new ql(gr(_.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(f)))})(n.orderBy));let a=null;n.limit&&(a=(function(d){let f;return f=typeof d=="object"?d.value:d,Vc(f)?null:f})(n.limit));let l=null;n.startAt&&(l=(function(d){const f=!!d.before,g=d.values||[];return new Wl(g,f)})(n.startAt));let u=null;return n.endAt&&(u=(function(d){const f=!d.before,g=d.values||[];return new Wl(g,f)})(n.endAt)),AC(t,i,o,r,a,"F",l,u)}function lx(e,t){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mt(28987,{purpose:i})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Db(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=gr(n.unaryFilter.field);return he.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=gr(n.unaryFilter.field);return he.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=gr(n.unaryFilter.field);return he.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=gr(n.unaryFilter.field);return he.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return mt(61313);default:return mt(60726)}})(e):e.fieldFilter!==void 0?(function(n){return he.create(gr(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return mt(58110);default:return mt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return kn.create(n.compositeFilter.filters.map((s=>Db(s))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return mt(1026)}})(n.compositeFilter.op))})(e):mt(30097,{filter:e})}function cx(e){return QC[e]}function ux(e){return XC[e]}function hx(e){return JC[e]}function pr(e){return{fieldPath:e.canonicalString()}}function gr(e){return ke.fromServerFormat(e.fieldPath)}function Ob(e){return e instanceof he?(function(n){if(n.op==="=="){if(Lg(n.value))return{unaryFilter:{field:pr(n.field),op:"IS_NAN"}};if(Vg(n.value))return{unaryFilter:{field:pr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Lg(n.value))return{unaryFilter:{field:pr(n.field),op:"IS_NOT_NAN"}};if(Vg(n.value))return{unaryFilter:{field:pr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pr(n.field),op:ux(n.op),value:n.value}}})(e):e instanceof kn?(function(n){const s=n.getFilters().map((i=>Ob(i)));return s.length===1?s[0]:{compositeFilter:{op:hx(n.op),filters:s}}})(e):mt(54877,{filter:e})}function dx(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function Mb(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(t,n,s,i,r=vt.min(),o=vt.min(),a=Me.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new Xs(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(t){this.yt=t}}function px(e){const t=ax({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Ch(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(){this.Cn=new mx}addToCollectionParentIndex(t,n){return this.Cn.add(n),H.resolve()}getCollectionParents(t,n){return H.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return H.resolve()}deleteFieldIndex(t,n){return H.resolve()}deleteAllFieldIndexes(t){return H.resolve()}createTargetIndexes(t,n){return H.resolve()}getDocumentsMatchingTarget(t,n){return H.resolve(null)}getIndexType(t,n){return H.resolve(0)}getFieldIndexes(t,n){return H.resolve([])}getNextCollectionGroupToUpdate(t){return H.resolve(null)}getMinOffset(t,n){return H.resolve(fi.min())}getMinOffsetFromCollectionGroup(t,n){return H.resolve(fi.min())}updateCollectionGroup(t,n,s){return H.resolve()}updateIndexEntries(t,n){return H.resolve()}}class mx{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n]||new we(qt.comparator),r=!i.has(s);return this.index[n]=i.add(s),r}has(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(t){return(this.index[t]||new we(qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Nb=41943040;class tn{static withCacheSize(t){return new tn(t,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(Nb,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Nr(0)}static cr(){return new Nr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg="LruGarbageCollector",_x=1048576;function Zg([e,t],[n,s]){const i=Ct(e,n);return i===0?Ct(t,s):i}class yx{constructor(t){this.Ir=t,this.buffer=new we(Zg),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Zg(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class vx{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){at(Jg,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){zr(n)?at(Jg,"Ignoring IndexedDB error during garbage collection: ",n):await jr(n)}await this.Vr(3e5)}))}}class bx{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return H.resolve(Nc.ce);const s=new yx(n);return this.mr.forEachTarget(t,(i=>s.Ar(i.sequenceNumber))).next((()=>this.mr.pr(t,(i=>s.Ar(i))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(at("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(Xg)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xg):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,i,r,o,a,l,u;const h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(t,i)))).next((d=>(s=d,a=Date.now(),this.removeTargets(t,s,n)))).next((d=>(r=d,l=Date.now(),this.removeOrphanedDocuments(t,s)))).next((d=>(u=Date.now(),dr()<=Rt.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${r} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:d}))))}}function wx(e,t){return new bx(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this.changes=new Zi((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,je.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?H.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(t,n,s,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((i=>(s=i,this.remoteDocumentCache.getEntry(t,n)))).next((i=>(s!==null&&zo(s.mutation,i,In.empty(),Qt.now()),i)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,xt()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=xt()){const i=Ni();return this.populateOverlays(t,i,n).next((()=>this.computeViews(t,n,i,s).next((r=>{let o=Eo();return r.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(t,n){const s=Ni();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,xt())))}populateOverlays(t,n,s){const i=[];return s.forEach((r=>{n.has(r)||i.push(r)})),this.documentOverlayCache.getOverlays(t,i).next((r=>{r.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(t,n,s,i){let r=Ps();const o=jo(),a=(function(){return jo()})();return n.forEach(((l,u)=>{const h=s.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof tr)?r=r.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),zo(h.mutation,u,h.mutation.getFieldMask(),Qt.now())):o.set(u.key,In.empty())})),this.recalculateAndSaveOverlays(t,r).next((l=>(l.forEach(((u,h)=>o.set(u,h))),n.forEach(((u,h)=>a.set(u,new Tx(h,o.get(u)??null)))),a)))}recalculateAndSaveOverlays(t,n){const s=jo();let i=new ee(((o,a)=>o-a)),r=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((o=>{for(const a of o)a.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let h=s.get(l)||In.empty();h=a.applyToLocalView(u,h),s.set(l,h);const d=(i.get(a.batchId)||xt()).add(l);i=i.insert(a.batchId,d)}))})).next((()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=mb();h.forEach((f=>{if(!r.has(f)){const g=Eb(n.get(f),s.get(f));g!==null&&d.set(f,g),r=r.add(f)}})),o.push(this.documentOverlayCache.saveOverlays(t,u,d))}return H.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,i){return(function(o){return ct.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):hb(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,i):this.getDocumentsMatchingCollectionQuery(t,n,s,i)}getNextDocuments(t,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,i).next((r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,i-r.size):H.resolve(Ni());let a=ea,l=r;return o.next((u=>H.forEach(u,((h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),r.get(h)?H.resolve():this.remoteDocumentCache.getEntry(t,h).next((f=>{l=l.insert(h,f)}))))).next((()=>this.populateOverlays(t,u,r))).next((()=>this.computeViews(t,l,u,xt()))).next((h=>({batchId:a,changes:gb(h)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ct(n)).next((s=>{let i=Eo();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,i){const r=n.collectionGroup;let o=Eo();return this.indexManager.getCollectionParents(t,r).next((a=>H.forEach(a,(l=>{const u=(function(d,f){return new Ea(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(n,l.child(r));return this.getDocumentsMatchingCollectionQuery(t,u,s,i).next((h=>{h.forEach(((d,f)=>{o=o.insert(d,f)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(t,n,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,r,i)))).next((o=>{r.forEach(((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,je.newInvalidDocument(h)))}));let a=Eo();return o.forEach(((l,u)=>{const h=r.get(l);h!==void 0&&zo(h.mutation,u,In.empty(),Qt.now()),Uc(n,u)&&(a=a.insert(l,u))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return H.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Qn(i.createTime)}})(n)),H.resolve()}getNamedQuery(t,n){return H.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:px(i.bundledQuery),readTime:Qn(i.readTime)}})(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(){this.overlays=new ee(ct.comparator),this.qr=new Map}getOverlay(t,n){return H.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Ni();return H.forEach(n,(i=>this.getOverlay(t,i).next((r=>{r!==null&&s.set(i,r)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((i,r)=>{this.St(t,n,r)})),H.resolve()}removeOverlaysForBatchId(t,n,s){const i=this.qr.get(s);return i!==void 0&&(i.forEach((r=>this.overlays=this.overlays.remove(r))),this.qr.delete(s)),H.resolve()}getOverlaysForCollection(t,n,s){const i=Ni(),r=n.length+1,o=new ct(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===r&&l.largestBatchId>s&&i.set(l.getKey(),l)}return H.resolve(i)}getOverlaysForCollectionGroup(t,n,s,i){let r=new ee(((u,h)=>u-h));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=r.get(u.largestBatchId);h===null&&(h=Ni(),r=r.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Ni(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,h)=>a.set(u,h))),!(a.size()>=i)););return H.resolve(a)}St(t,n,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(s.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new HC(n,s));let r=this.qr.get(n);r===void 0&&(r=xt(),this.qr.set(n,r)),this.qr.set(n,r.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this.sessionToken=Me.EMPTY_BYTE_STRING}getSessionToken(t){return H.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(){this.Qr=new we(Ae.$r),this.Ur=new we(Ae.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new Ae(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new Ae(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new ct(new qt([])),s=new Ae(n,t),i=new Ae(n,t+1),r=[];return this.Ur.forEachInRange([s,i],(o=>{this.Gr(o),r.push(o.key)})),r}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new ct(new qt([])),s=new Ae(n,t),i=new Ae(n,t+1);let r=xt();return this.Ur.forEachInRange([s,i],(o=>{r=r.add(o.key)})),r}containsKey(t){const n=new Ae(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Ae{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return ct.comparator(t.key,n.key)||Ct(t.Yr,n.Yr)}static Kr(t,n){return Ct(t.Yr,n.Yr)||ct.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new we(Ae.$r)}checkEmpty(t){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,i){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new $C(r,n,s,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new Ae(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return H.resolve(o)}lookupMutationBatch(t,n){return H.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,i=this.ei(s),r=i<0?0:i;return H.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?Td:this.tr-1)}getAllMutationBatches(t){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Ae(n,0),i=new Ae(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([s,i],(o=>{const a=this.Xr(o.Yr);r.push(a)})),H.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new we(Ct);return n.forEach((i=>{const r=new Ae(i,0),o=new Ae(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,o],(a=>{s=s.add(a.Yr)}))})),H.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,i=s.length+1;let r=s;ct.isDocumentKey(r)||(r=r.child(""));const o=new Ae(new ct(r),0);let a=new we(Ct);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)}),o),H.resolve(this.ti(a))}ti(t){const n=[];return t.forEach((s=>{const i=this.Xr(s);i!==null&&n.push(i)})),n}removeMutationBatch(t,n){Lt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return H.forEach(n.mutations,(i=>{const r=new Ae(i.key,n.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new Ae(n,0),i=this.Zr.firstAfterOrEqual(s);return H.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,H.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(t){this.ri=t,this.docs=(function(){return new ee(ct.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,i=this.docs.get(s),r=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return H.resolve(s?s.document.mutableCopy():je.newInvalidDocument(n))}getEntries(t,n){let s=Ps();return n.forEach((i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():je.newInvalidDocument(i))})),H.resolve(s)}getDocumentsMatchingQuery(t,n,s,i){let r=Ps();const o=n.path,a=new ct(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||sC(nC(h),s)<=0||(i.has(h.key)||Uc(n,h))&&(r=r.insert(h.key,h.mutableCopy()))}return H.resolve(r)}getAllFromCollectionGroup(t,n,s,i){mt(9500)}ii(t,n){return H.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new Px(this)}getSize(t){return H.resolve(this.size)}}class Px extends Ex{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(t,i)):this.Nr.removeEntry(s)})),H.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(t){this.persistence=t,this.si=new Zi((n=>Sd(n)),Rd),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.oi=0,this._i=new Od,this.targetCount=0,this.ai=Nr.ur()}forEachTarget(t,n){return this.si.forEach(((s,i)=>n(i))),H.resolve()}getLastRemoteSnapshotVersion(t){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return H.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),H.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Nr(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,H.resolve()}updateTargetData(t,n){return this.Pr(n),H.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(t,n,s){let i=0;const r=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.si.delete(o),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),H.waitFor(r).next((()=>i))}getTargetCount(t){return H.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return H.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),H.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach((o=>{r.push(i.markPotentiallyOrphaned(t,o))})),H.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),H.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return H.resolve(s)}containsKey(t,n){return H.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(t,n){this.ui={},this.overlays={},this.ci=new Nc(0),this.li=!1,this.li=!0,this.hi=new Rx,this.referenceDelegate=t(this),this.Pi=new kx(this),this.indexManager=new gx,this.remoteDocumentCache=(function(i){return new xx(i)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new fx(n),this.Ii=new Ax(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Sx,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new Cx(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){at("MemoryPersistence","Starting transaction:",t);const i=new Dx(this.ci.next());return this.referenceDelegate.Ei(),s(i).next((r=>this.referenceDelegate.di(i).next((()=>r)))).toPromise().then((r=>(i.raiseOnCommittedEvent(),r)))}Ai(t,n){return H.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class Dx extends rC{constructor(t){super(),this.currentSequenceNumber=t}}class Md{constructor(t){this.persistence=t,this.Ri=new Od,this.Vi=null}static mi(t){return new Md(t)}get fi(){if(this.Vi)return this.Vi;throw mt(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),H.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),H.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),H.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((i=>{i.forEach((r=>this.fi.add(r.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.fi,(s=>{const i=ct.fromPath(s);return this.gi(t,i).next((r=>{r||n.removeEntry(i,vt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return H.or([()=>H.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Yl{constructor(t,n){this.persistence=t,this.pi=new Zi((s=>lC(s.path)),((s,i)=>s.isEqual(i))),this.garbageCollector=wx(this,n)}static mi(t,n){return new Yl(t,n)}Ei(){}di(t){return H.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((i=>s+i))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return H.forEach(this.pi,((s,i)=>this.br(t,s,i).next((r=>r?H.resolve():n(i)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.ii(t,(o=>this.br(t,o,n).next((a=>{a||(s++,r.removeEntry(o,vt.min()))})))).next((()=>r.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),H.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),H.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),H.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),H.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=yl(t.data.value)),n}br(t,n,s){return H.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.pi.get(n);return H.resolve(i!==void 0&&i>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(t,n,s,i){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=i}static As(t,n){let s=xt(),i=xt();for(const r of n.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Nd(t,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return SS()?8:oC(We())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,i){const r={result:null};return this.ys(t,n).next((o=>{r.result=o})).next((()=>{if(!r.result)return this.ws(t,n,i,s).next((o=>{r.result=o}))})).next((()=>{if(r.result)return;const o=new Ox;return this.Ss(t,n,o).next((a=>{if(r.result=a,this.Vs)return this.bs(t,n,o,a.size)}))})).next((()=>r.result))}bs(t,n,s,i){return s.documentReadCount<this.fs?(dr()<=Rt.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",fr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),H.resolve()):(dr()<=Rt.DEBUG&&at("QueryEngine","Query:",fr(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.gs*i?(dr()<=Rt.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",fr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Kn(n))):H.resolve())}ys(t,n){if(jg(n))return H.resolve(null);let s=Kn(n);return this.indexManager.getIndexType(t,s).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Ch(n,null,"F"),s=Kn(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((r=>{const o=xt(...r);return this.ps.getDocuments(t,o).next((a=>this.indexManager.getMinOffset(t,s).next((l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(t,Ch(n,null,"F")):this.vs(t,u,n,l)}))))})))))}ws(t,n,s,i){return jg(n)||i.isEqual(vt.min())?H.resolve(null):this.ps.getDocuments(t,s).next((r=>{const o=this.Ds(n,r);return this.Cs(n,o,s,i)?H.resolve(null):(dr()<=Rt.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fr(n)),this.vs(t,o,n,eC(i,ea)).next((a=>a)))}))}Ds(t,n){let s=new we(fb(t));return n.forEach(((i,r)=>{Uc(t,r)&&(s=s.add(r))})),s}Cs(t,n,s,i){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ss(t,n,s){return dr()<=Rt.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",fr(n)),this.ps.getDocumentsMatchingQuery(t,n,fi.min(),s)}vs(t,n,s,i){return this.ps.getDocumentsMatchingQuery(t,s,i).next((r=>(n.forEach((o=>{r=r.insert(o.key,o)})),r)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd="LocalStore",Nx=3e8;class Vx{constructor(t,n,s,i){this.persistence=t,this.Fs=n,this.serializer=i,this.Ms=new ee(Ct),this.xs=new Zi((r=>Sd(r)),Rd),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Ix(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function Lx(e,t,n,s){return new Vx(e,t,n,s)}async function Lb(e,t){const n=bt(e);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next((r=>(i=r,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((r=>{const o=[],a=[];let l=xt();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of r){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(s,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:a})))}))}))}function Fx(e,t){const n=bt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const i=t.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,u,h){const d=u.batch,f=d.keys();let g=H.resolve();return f.forEach((_=>{g=g.next((()=>h.getEntry(l,_))).next((y=>{const b=u.docVersions.get(_);Lt(b!==null,48541),y.version.compareTo(b)<0&&(d.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),h.addEntry(y)))}))})),g.next((()=>a.mutationQueue.removeMutationBatch(l,d)))})(n,s,t,r).next((()=>r.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(a){let l=xt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l})(t)))).next((()=>n.localDocuments.getDocuments(s,i)))}))}function Fb(e){const t=bt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function Ux(e,t){const n=bt(e),s=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(r=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];t.targetChanges.forEach(((h,d)=>{const f=i.get(d);if(!f)return;a.push(n.Pi.removeMatchingKeys(r,h.removedDocuments,d).next((()=>n.Pi.addMatchingKeys(r,h.addedDocuments,d))));let g=f.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(d)!==null?g=g.withResumeToken(Me.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,s)),i=i.insert(d,g),(function(y,b,I){return y.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=Nx?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0})(f,g,h)&&a.push(n.Pi.updateTargetData(r,g))}));let l=Ps(),u=xt();if(t.documentUpdates.forEach((h=>{t.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,h))})),a.push(Bx(r,o,t.documentUpdates).next((h=>{l=h.ks,u=h.qs}))),!s.isEqual(vt.min())){const h=n.Pi.getLastRemoteSnapshotVersion(r).next((d=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,s)));a.push(h)}return H.waitFor(a).next((()=>o.apply(r))).next((()=>n.localDocuments.getLocalViewOfDocuments(r,l,u))).next((()=>l))})).then((r=>(n.Ms=i,r)))}function Bx(e,t,n){let s=xt(),i=xt();return n.forEach((r=>s=s.add(r))),t.getEntries(e,s).next((r=>{let o=Ps();return n.forEach(((a,l)=>{const u=r.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(vt.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):at(Vd,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:i}}))}function jx(e,t){const n=bt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Td),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function zx(e,t){const n=bt(e);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let i;return n.Pi.getTargetData(s,t).next((r=>r?(i=r,H.resolve(i)):n.Pi.allocateTargetId(s).next((o=>(i=new Xs(t,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,i).next((()=>i)))))))})).then((s=>{const i=n.Ms.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function Oh(e,t,n){const s=bt(e),i=s.Ms.get(t),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,(o=>s.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!zr(o))throw o;at(Vd,`Failed to update sequence numbers for target ${t}: ${o}`)}s.Ms=s.Ms.remove(t),s.xs.delete(i.target)}function tm(e,t,n){const s=bt(e);let i=vt.min(),r=xt();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,h){const d=bt(l),f=d.xs.get(h);return f!==void 0?H.resolve(d.Ms.get(f)):d.Pi.getTargetData(u,h)})(s,o,Kn(t)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{r=l}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,t,n?i:vt.min(),n?r:xt()))).next((a=>($x(s,RC(t),a),{documents:a,Qs:r})))))}function $x(e,t,n){let s=e.Os.get(t)||vt.min();n.forEach(((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)})),e.Os.set(t,s)}class em{constructor(){this.activeTargetIds=OC()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Hx{constructor(){this.Mo=new em,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new em,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="ConnectivityMonitor";class sm{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){at(nm,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){at(nm,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja=null;function Mh(){return Ja===null?Ja=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ja++,"0x"+Ja.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu="RestConnection",qx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Gx{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${i}`,this.Wo=this.databaseId.database===$l?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Go(t,n,s,i,r){const o=Mh(),a=this.zo(t,n.toUriEncodedString());at(Fu,`Sending RPC '${t}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,r);const{host:u}=new URL(a),h=Qi(u);return this.Jo(t,a,l,s,h).then((d=>(at(Fu,`Received RPC '${t}' ${o}: `,d),d)),(d=>{throw kr(Fu,`RPC '${t}' ${o} failed with error: `,d,"url: ",a,"request:",s),d}))}Ho(t,n,s,i,r,o){return this.Go(t,n,s,i,r)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Br})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,r)=>t[r]=i)),s&&s.headers.forEach(((i,r)=>t[r]=i))}zo(t,n){const s=qx[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Le="WebChannelConnection";class Yx extends Gx{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,i,r){const o=Mh();return new Promise(((a,l)=>{const u=new Bv;u.setWithCredentials(!0),u.listenOnce(jv.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case _l.NO_ERROR:const d=u.getResponseJson();at(Le,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(d)),a(d);break;case _l.TIMEOUT:at(Le,`RPC '${t}' ${o} timed out`),l(new rt($.DEADLINE_EXCEEDED,"Request time out"));break;case _l.HTTP_ERROR:const f=u.getStatus();if(at(Le,`RPC '${t}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g?.error;if(_&&_.status&&_.message){const y=(function(I){const R=I.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(R)>=0?R:$.UNKNOWN})(_.status);l(new rt(y,_.message))}else l(new rt($.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new rt($.UNAVAILABLE,"Connection failed."));break;default:mt(9055,{l_:t,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{at(Le,`RPC '${t}' ${o} completed.`)}}));const h=JSON.stringify(i);at(Le,`RPC '${t}' ${o} sending request:`,i),u.send(n,"POST",h,s,15)}))}T_(t,n,s){const i=Mh(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Hv(),a=$v(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const h=r.join("");at(Le,`Creating RPC '${t}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);this.I_(d);let f=!1,g=!1;const _=new Kx({Yo:b=>{g?at(Le,`Not sending because RPC '${t}' stream ${i} is closed:`,b):(f||(at(Le,`Opening RPC '${t}' stream ${i} transport.`),d.open(),f=!0),at(Le,`RPC '${t}' stream ${i} sending:`,b),d.send(b))},Zo:()=>d.close()}),y=(b,I,R)=>{b.listen(I,(k=>{try{R(k)}catch(O){setTimeout((()=>{throw O}),0)}}))};return y(d,wo.EventType.OPEN,(()=>{g||(at(Le,`RPC '${t}' stream ${i} transport opened.`),_.o_())})),y(d,wo.EventType.CLOSE,(()=>{g||(g=!0,at(Le,`RPC '${t}' stream ${i} transport closed`),_.a_(),this.E_(d))})),y(d,wo.EventType.ERROR,(b=>{g||(g=!0,kr(Le,`RPC '${t}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),_.a_(new rt($.UNAVAILABLE,"The operation could not be completed")))})),y(d,wo.EventType.MESSAGE,(b=>{if(!g){const I=b.data[0];Lt(!!I,16349);const R=I,k=R?.error||R[0]?.error;if(k){at(Le,`RPC '${t}' stream ${i} received error:`,k);const O=k.status;let L=(function(v){const E=ce[v];if(E!==void 0)return Ab(E)})(O),G=k.message;L===void 0&&(L=$.INTERNAL,G="Unknown error status: "+O+" with message "+k.message),g=!0,_.a_(new rt(L,G)),d.close()}else at(Le,`RPC '${t}' stream ${i} received:`,I),_.u_(I)}})),y(a,zv.STAT_EVENT,(b=>{b.stat===wh.PROXY?at(Le,`RPC '${t}' stream ${i} detected buffering proxy`):b.stat===wh.NOPROXY&&at(Le,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{_.__()}),0),_}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function Uu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(e){return new ZC(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(t,n,s=1e3,i=1.5,r=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=i,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-s);i>0&&at("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="PersistentStream";class Bb{constructor(t,n,s,i,r,o,a,l){this.Mi=t,this.S_=s,this.b_=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ub(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(xs(n.toString()),xs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,i])=>{this.D_===n&&this.G_(s,i)}),(s=>{t((()=>{const i=new rt($.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{s((()=>this.z_(i)))})),this.stream.onMessage((i=>{s((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return at(im,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(at(im,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Qx extends Bb{constructor(t,n,s,i,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=nx(this.serializer,t),s=(function(r){if(!("targetChange"in r))return vt.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?vt.min():o.readTime?Qn(o.readTime):vt.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=Dh(this.serializer),n.addTarget=(function(r,o){let a;const l=o.target;if(a=Sh(l)?{documents:rx(r,l)}:{query:ox(r,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Cb(r,o.resumeToken);const u=xh(r,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(vt.min())>0){a.readTime=Kl(r,o.snapshotVersion.toTimestamp());const u=xh(r,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,t);const s=lx(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=Dh(this.serializer),n.removeTarget=t,this.q_(n)}}class Xx extends Bb{constructor(t,n,s,i,r,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Lt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Lt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Lt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=ix(t.writeResults,t.commitTime),s=Qn(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=Dh(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>sx(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{}class Zx extends Jx{constructor(t,n,s,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new rt($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,o])=>this.connection.Go(t,Ph(n,s),i,r,o))).catch((r=>{throw r.name==="FirebaseError"?(r.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new rt($.UNKNOWN,r.toString())}))}Ho(t,n,s,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(t,Ph(n,s),i,o,a,r))).catch((o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new rt($.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class tP{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(xs(n),this.aa=!1):at("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi="RemoteStore";class eP{constructor(t,n,s,i,r){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{er(this)&&(at(Wi,"Restarting streams for network reachability change."),await(async function(l){const u=bt(l);u.Ea.add(4),await Aa(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Hc(u)})(this))}))})),this.Ra=new tP(s,i)}}async function Hc(e){if(er(e))for(const t of e.da)await t(!0)}async function Aa(e){for(const t of e.da)await t(!1)}function jb(e,t){const n=bt(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Bd(n)?Ud(n):$r(n).O_()&&Fd(n,t))}function Ld(e,t){const n=bt(e),s=$r(n);n.Ia.delete(t),s.O_()&&zb(n,t),n.Ia.size===0&&(s.O_()?s.L_():er(n)&&n.Ra.set("Unknown"))}function Fd(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(vt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}$r(e).Y_(t)}function zb(e,t){e.Va.Ue(t),$r(e).Z_(t)}function Ud(e){e.Va=new YC({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),$r(e).start(),e.Ra.ua()}function Bd(e){return er(e)&&!$r(e).x_()&&e.Ia.size>0}function er(e){return bt(e).Ea.size===0}function $b(e){e.Va=void 0}async function nP(e){e.Ra.set("Online")}async function sP(e){e.Ia.forEach(((t,n)=>{Fd(e,t)}))}async function iP(e,t){$b(e),Bd(e)?(e.Ra.ha(t),Ud(e)):e.Ra.set("Unknown")}async function rP(e,t,n){if(e.Ra.set("Online"),t instanceof Rb&&t.state===2&&t.cause)try{await(async function(i,r){const o=r.cause;for(const a of r.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(e,t)}catch(s){at(Wi,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Ql(e,s)}else if(t instanceof wl?e.Va.Ze(t):t instanceof Sb?e.Va.st(t):e.Va.tt(t),!n.isEqual(vt.min()))try{const s=await Fb(e.localStore);n.compareTo(s)>=0&&await(function(r,o){const a=r.Va.Tt(o);return a.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=r.Ia.get(u);h&&r.Ia.set(u,h.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,u)=>{const h=r.Ia.get(l);if(!h)return;r.Ia.set(l,h.withResumeToken(Me.EMPTY_BYTE_STRING,h.snapshotVersion)),zb(r,l);const d=new Xs(h.target,l,u,h.sequenceNumber);Fd(r,d)})),r.remoteSyncer.applyRemoteEvent(a)})(e,n)}catch(s){at(Wi,"Failed to raise snapshot:",s),await Ql(e,s)}}async function Ql(e,t,n){if(!zr(t))throw t;e.Ea.add(1),await Aa(e),e.Ra.set("Offline"),n||(n=()=>Fb(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{at(Wi,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Hc(e)}))}function Hb(e,t){return t().catch((n=>Ql(e,n,t)))}async function Wc(e){const t=bt(e),n=_i(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Td;for(;oP(t);)try{const i=await jx(t.localStore,s);if(i===null){t.Ta.length===0&&n.L_();break}s=i.batchId,aP(t,i)}catch(i){await Ql(t,i)}Wb(t)&&qb(t)}function oP(e){return er(e)&&e.Ta.length<10}function aP(e,t){e.Ta.push(t);const n=_i(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Wb(e){return er(e)&&!_i(e).x_()&&e.Ta.length>0}function qb(e){_i(e).start()}async function lP(e){_i(e).ra()}async function cP(e){const t=_i(e);for(const n of e.Ta)t.ea(n.mutations)}async function uP(e,t,n){const s=e.Ta.shift(),i=Pd.from(s,t,n);await Hb(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Wc(e)}async function hP(e,t){t&&_i(e).X_&&await(async function(s,i){if((function(o){return qC(o)&&o!==$.ABORTED})(i.code)){const r=s.Ta.shift();_i(s).B_(),await Hb(s,(()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i))),await Wc(s)}})(e,t),Wb(e)&&qb(e)}async function rm(e,t){const n=bt(e);n.asyncQueue.verifyOperationInProgress(),at(Wi,"RemoteStore received new credentials");const s=er(n);n.Ea.add(3),await Aa(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Hc(n)}async function dP(e,t){const n=bt(e);t?(n.Ea.delete(2),await Hc(n)):t||(n.Ea.add(2),await Aa(n),n.Ra.set("Unknown"))}function $r(e){return e.ma||(e.ma=(function(n,s,i){const r=bt(n);return r.sa(),new Qx(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)})(e.datastore,e.asyncQueue,{Xo:nP.bind(null,e),t_:sP.bind(null,e),r_:iP.bind(null,e),H_:rP.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),Bd(e)?Ud(e):e.Ra.set("Unknown")):(await e.ma.stop(),$b(e))}))),e.ma}function _i(e){return e.fa||(e.fa=(function(n,s,i){const r=bt(n);return r.sa(),new Xx(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)})(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:lP.bind(null,e),r_:hP.bind(null,e),ta:cP.bind(null,e),na:uP.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await Wc(e)):(await e.fa.stop(),e.Ta.length>0&&(at(Wi,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(t,n,s,i,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new Ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,i,r){const o=Date.now()+s,a=new jd(t,n,o,i,r);return a.start(s),a}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new rt($.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zd(e,t){if(xs("AsyncQueue",`${t}: ${e}`),zr(e))return new rt($.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{static emptySet(t){return new br(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||ct.comparator(n.key,s.key):(n,s)=>ct.comparator(n.key,s.key),this.keyedMap=Eo(),this.sortedSet=new ee(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof br)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new br;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(){this.ga=new ee(ct.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):mt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class Vr{constructor(t,n,s,i,r,o,a,l,u){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,n,s,i,r){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new Vr(t,n,br.emptySet(n),o,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Fc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class pP{constructor(){this.queries=am(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const i=bt(n),r=i.queries;i.queries=am(),r.forEach(((o,a)=>{for(const l of a.Sa)l.onError(s)}))})(this,new rt($.ABORTED,"Firestore shutting down"))}}function am(){return new Zi((e=>db(e)),Fc)}async function Gb(e,t){const n=bt(e);let s=3;const i=t.query;let r=n.queries.get(i);r?!r.ba()&&t.Da()&&(s=2):(r=new fP,s=t.Da()?0:1);try{switch(s){case 0:r.wa=await n.onListen(i,!0);break;case 1:r.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=zd(o,`Initialization of query '${fr(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,r),r.Sa.push(t),t.va(n.onlineState),r.wa&&t.Fa(r.wa)&&$d(n)}async function Kb(e,t){const n=bt(e),s=t.query;let i=3;const r=n.queries.get(s);if(r){const o=r.Sa.indexOf(t);o>=0&&(r.Sa.splice(o,1),r.Sa.length===0?i=t.Da()?0:1:!r.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function gP(e,t){const n=bt(e);let s=!1;for(const i of t){const r=i.query,o=n.queries.get(r);if(o){for(const a of o.Sa)a.Fa(i)&&(s=!0);o.wa=i}}s&&$d(n)}function mP(e,t,n){const s=bt(e),i=s.queries.get(t);if(i)for(const r of i.Sa)r.onError(n);s.queries.delete(t)}function $d(e){e.Ca.forEach((t=>{t.next()}))}var Nh,lm;(lm=Nh||(Nh={})).Ma="default",lm.Cache="cache";class Yb{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const i of t.docChanges)i.type!==3&&s.push(i);t=new Vr(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Vr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Nh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(t){this.key=t}}class Xb{constructor(t){this.key=t}}class _P{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xt(),this.mutatedKeys=xt(),this.eu=fb(t),this.tu=new br(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new om,i=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((h,d)=>{const f=i.get(h),g=Uc(this.query,d)?d:null,_=!!f&&this.mutatedKeys.has(f.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;f&&g?f.data.isEqual(g.data)?_!==y&&(s.track({type:3,doc:g}),b=!0):this.su(f,g)||(s.track({type:2,doc:g}),b=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(a=!0)):!f&&g?(s.track({type:0,doc:g}),b=!0):f&&!g&&(s.track({type:1,doc:f}),b=!0,(l||u)&&(a=!0)),b&&(g?(o=o.add(g),r=y?r.add(h):r.delete(h)):(o=o.delete(h),r=r.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),r=r.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:r}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,i){const r=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort(((h,d)=>(function(g,_){const y=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt(20277,{Rt:b})}};return y(g)-y(_)})(h.type,d.type)||this.eu(h.doc,d.doc))),this.ou(s),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Vr(this.query,t.tu,r,o,t.mutatedKeys,l===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new om,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=xt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new Xb(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new Qb(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=xt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Vr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Hd="SyncEngine";class yP{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class vP{constructor(t){this.key=t,this.hu=!1}}class bP{constructor(t,n,s,i,r,o){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Zi((a=>db(a)),Fc),this.Iu=new Map,this.Eu=new Set,this.du=new ee(ct.comparator),this.Au=new Map,this.Ru=new Od,this.Vu={},this.mu=new Map,this.fu=Nr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wP(e,t,n=!0){const s=sw(e);let i;const r=s.Tu.get(t);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.lu()):i=await Jb(s,t,n,!0),i}async function EP(e,t){const n=sw(e);await Jb(n,t,!0,!1)}async function Jb(e,t,n,s){const i=await zx(e.localStore,Kn(t)),r=i.targetId,o=e.sharedClientState.addLocalQueryTarget(r,n);let a;return s&&(a=await TP(e,t,r,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&jb(e.remoteStore,i),a}async function TP(e,t,n,s,i){e.pu=(d,f,g)=>(async function(y,b,I,R){let k=b.view.ru(I);k.Cs&&(k=await tm(y.localStore,b.query,!1).then((({documents:T})=>b.view.ru(T,k))));const O=R&&R.targetChanges.get(b.targetId),L=R&&R.targetMismatches.get(b.targetId)!=null,G=b.view.applyChanges(k,y.isPrimaryClient,O,L);return um(y,b.targetId,G.au),G.snapshot})(e,d,f,g);const r=await tm(e.localStore,t,!0),o=new _P(t,r.Qs),a=o.ru(r.documents),l=Ia.createSynthesizedTargetChangeForCurrentChange(n,s&&e.onlineState!=="Offline",i),u=o.applyChanges(a,e.isPrimaryClient,l);um(e,n,u.au);const h=new yP(t,n,o);return e.Tu.set(t,h),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),u.snapshot}async function IP(e,t,n){const s=bt(e),i=s.Tu.get(t),r=s.Iu.get(i.targetId);if(r.length>1)return s.Iu.set(i.targetId,r.filter((o=>!Fc(o,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await Oh(s.localStore,i.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(i.targetId),n&&Ld(s.remoteStore,i.targetId),Vh(s,i.targetId)})).catch(jr)):(Vh(s,i.targetId),await Oh(s.localStore,i.targetId,!0))}async function AP(e,t){const n=bt(e),s=n.Tu.get(t),i=n.Iu.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Ld(n.remoteStore,s.targetId))}async function SP(e,t,n){const s=OP(e);try{const i=await(function(o,a){const l=bt(o),u=Qt.now(),h=a.reduce(((g,_)=>g.add(_.key)),xt());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let _=Ps(),y=xt();return l.Ns.getEntries(g,h).next((b=>{_=b,_.forEach(((I,R)=>{R.isValidDocument()||(y=y.add(I))}))})).next((()=>l.localDocuments.getOverlayedDocuments(g,_))).next((b=>{d=b;const I=[];for(const R of a){const k=jC(R,d.get(R.key).overlayedDocument);k!=null&&I.push(new tr(R.key,k,ib(k.value.mapValue),Yn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,I,a)})).next((b=>{f=b;const I=b.applyToLocalDocumentSet(d,y);return l.documentOverlayCache.saveOverlays(g,b.batchId,I)}))})).then((()=>({batchId:f.batchId,changes:gb(d)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(i.batchId),(function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new ee(Ct)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u})(s,i.batchId,n),await Sa(s,i.changes),await Wc(s.remoteStore)}catch(i){const r=zd(i,"Failed to persist write");n.reject(r)}}async function Zb(e,t){const n=bt(e);try{const s=await Ux(n.localStore,t);t.targetChanges.forEach(((i,r)=>{const o=n.Au.get(r);o&&(Lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Lt(o.hu,14607):i.removedDocuments.size>0&&(Lt(o.hu,42227),o.hu=!1))})),await Sa(n,s,t)}catch(s){await jr(s)}}function cm(e,t,n){const s=bt(e);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.Tu.forEach(((r,o)=>{const a=o.view.va(t);a.snapshot&&i.push(a.snapshot)})),(function(o,a){const l=bt(o);l.onlineState=a;let u=!1;l.queries.forEach(((h,d)=>{for(const f of d.Sa)f.va(a)&&(u=!0)})),u&&$d(l)})(s.eventManager,t),i.length&&s.Pu.H_(i),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function RP(e,t,n){const s=bt(e);s.sharedClientState.updateQueryState(t,"rejected",n);const i=s.Au.get(t),r=i&&i.key;if(r){let o=new ee(ct.comparator);o=o.insert(r,je.newNoDocument(r,vt.min()));const a=xt().add(r),l=new zc(vt.min(),new Map,new ee(Ct),o,a);await Zb(s,l),s.du=s.du.remove(r),s.Au.delete(t),Wd(s)}else await Oh(s.localStore,t,!1).then((()=>Vh(s,t,n))).catch(jr)}async function CP(e,t){const n=bt(e),s=t.batch.batchId;try{const i=await Fx(n.localStore,t);ew(n,s,null),tw(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Sa(n,i)}catch(i){await jr(i)}}async function xP(e,t,n){const s=bt(e);try{const i=await(function(o,a){const l=bt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next((d=>(Lt(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>l.localDocuments.getDocuments(u,h)))}))})(s.localStore,t);ew(s,t,n),tw(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Sa(s,i)}catch(i){await jr(i)}}function tw(e,t){(e.mu.get(t)||[]).forEach((n=>{n.resolve()})),e.mu.delete(t)}function ew(e,t,n){const s=bt(e);let i=s.Vu[s.currentUser.toKey()];if(i){const r=i.get(t);r&&(n?r.reject(n):r.resolve(),i=i.remove(t)),s.Vu[s.currentUser.toKey()]=i}}function Vh(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.Iu.get(t))e.Tu.delete(s),n&&e.Pu.yu(s,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((s=>{e.Ru.containsKey(s)||nw(e,s)}))}function nw(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Ld(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Wd(e))}function um(e,t,n){for(const s of n)s instanceof Qb?(e.Ru.addReference(s.key,t),PP(e,s)):s instanceof Xb?(at(Hd,"Document no longer in limbo: "+s.key),e.Ru.removeReference(s.key,t),e.Ru.containsKey(s.key)||nw(e,s.key)):mt(19791,{wu:s})}function PP(e,t){const n=t.key,s=n.path.canonicalString();e.du.get(n)||e.Eu.has(s)||(at(Hd,"New document in limbo: "+n),e.Eu.add(s),Wd(e))}function Wd(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ct(qt.fromString(t)),s=e.fu.next();e.Au.set(s,new vP(n)),e.du=e.du.insert(n,s),jb(e.remoteStore,new Xs(Kn(Cd(n.path)),s,"TargetPurposeLimboResolution",Nc.ce))}}async function Sa(e,t,n){const s=bt(e),i=[],r=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((a,l)=>{o.push(s.pu(l,t,n).then((u=>{if((u||n)&&s.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=Nd.As(l.targetId,u);r.push(h)}})))})),await Promise.all(o),s.Pu.H_(i),await(async function(l,u){const h=bt(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>H.forEach(u,(f=>H.forEach(f.Es,(g=>h.persistence.referenceDelegate.addReference(d,f.targetId,g))).next((()=>H.forEach(f.ds,(g=>h.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))))))}catch(d){if(!zr(d))throw d;at(Vd,"Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const g=h.Ms.get(f),_=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(_);h.Ms=h.Ms.insert(f,y)}}})(s.localStore,r))}async function kP(e,t){const n=bt(e);if(!n.currentUser.isEqual(t)){at(Hd,"User change. New user:",t.toKey());const s=await Lb(n.localStore,t);n.currentUser=t,(function(r,o){r.mu.forEach((a=>{a.forEach((l=>{l.reject(new rt($.CANCELLED,o))}))})),r.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Sa(n,s.Ls)}}function DP(e,t){const n=bt(e),s=n.Au.get(t);if(s&&s.hu)return xt().add(s.key);{let i=xt();const r=n.Iu.get(t);if(!r)return i;for(const o of r){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function sw(e){const t=bt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Zb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=DP.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=RP.bind(null,t),t.Pu.H_=gP.bind(null,t.eventManager),t.Pu.yu=mP.bind(null,t.eventManager),t}function OP(e){const t=bt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=CP.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=xP.bind(null,t),t}class Xl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=$c(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return Lx(this.persistence,new Mx,t.initialUser,this.serializer)}Cu(t){return new Vb(Md.mi,this.serializer)}Du(t){return new Hx}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xl.provider={build:()=>new Xl};class MP extends Xl{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Lt(this.persistence.referenceDelegate instanceof Yl,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new vx(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new Vb((s=>Yl.mi(s,n)),this.serializer)}}class Lh{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>cm(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=kP.bind(null,this.syncEngine),await dP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new pP})()}createDatastore(t){const n=$c(t.databaseInfo.databaseId),s=(function(r){return new Yx(r)})(t.databaseInfo);return(function(r,o,a,l){return new Zx(r,o,a,l)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,i,r,o,a){return new eP(s,i,r,o,a)})(this.localStore,this.datastore,t.asyncQueue,(n=>cm(this.syncEngine,n,0)),(function(){return sm.v()?new sm:new Wx})())}createSyncEngine(t,n){return(function(i,r,o,a,l,u,h){const d=new bP(i,r,o,a,l,u);return h&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=bt(n);at(Wi,"RemoteStore shutting down."),s.Ea.add(5),await Aa(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Lh.provider={build:()=>new Lh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):xs("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi="FirestoreClient";class NP{constructor(t,n,s,i,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=Ue.UNAUTHENTICATED,this.clientId=Ed.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(s,(async o=>{at(yi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(at(yi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=zd(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function Bu(e,t){e.asyncQueue.verifyOperationInProgress(),at(yi,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener((async i=>{s.isEqual(i)||(await Lb(t.localStore,i),s=i)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function hm(e,t){e.asyncQueue.verifyOperationInProgress();const n=await VP(e);at(yi,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((s=>rm(t.remoteStore,s))),e.setAppCheckTokenChangeListener(((s,i)=>rm(t.remoteStore,i))),e._onlineComponents=t}async function VP(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){at(yi,"Using user provided OfflineComponentProvider");try{await Bu(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;kr("Error using user provided cache. Falling back to memory cache: "+n),await Bu(e,new Xl)}}else at(yi,"Using default OfflineComponentProvider"),await Bu(e,new MP(void 0));return e._offlineComponents}async function rw(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(at(yi,"Using user provided OnlineComponentProvider"),await hm(e,e._uninitializedComponentsProvider._online)):(at(yi,"Using default OnlineComponentProvider"),await hm(e,new Lh))),e._onlineComponents}function LP(e){return rw(e).then((t=>t.syncEngine))}async function ow(e){const t=await rw(e),n=t.eventManager;return n.onListen=wP.bind(null,t.syncEngine),n.onUnlisten=IP.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=EP.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=AP.bind(null,t.syncEngine),n}function FP(e,t,n={}){const s=new Ts;return e.asyncQueue.enqueueAndForget((async()=>(function(r,o,a,l,u){const h=new iw({next:f=>{h.Nu(),o.enqueueAndForget((()=>Kb(r,d)));const g=f.docs.has(a);!g&&f.fromCache?u.reject(new rt($.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?u.reject(new rt($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new Yb(Cd(a.path),h,{includeMetadataChanges:!0,qa:!0});return Gb(r,d)})(await ow(e),e.asyncQueue,t,n,s))),s.promise}function UP(e,t,n={}){const s=new Ts;return e.asyncQueue.enqueueAndForget((async()=>(function(r,o,a,l,u){const h=new iw({next:f=>{h.Nu(),o.enqueueAndForget((()=>Kb(r,d))),f.fromCache&&l.source==="server"?u.reject(new rt($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new Yb(a,h,{includeMetadataChanges:!0,qa:!0});return Gb(r,d)})(await ow(e),e.asyncQueue,t,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="firestore.googleapis.com",fm=!0;class pm{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new rt($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lw,this.ssl=fm}else this.host=t.host,this.ssl=t.ssl??fm;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Nb;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<_x)throw new rt($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}tC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aw(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new rt($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new rt($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new rt($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,i){return s.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class qc{constructor(t,n,s,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new rt($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new rt($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pm(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new HR;switch(s.type){case"firstParty":return new KR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new rt($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=dm.get(n);s&&(at("ComponentProvider","Removing Datastore"),dm.delete(n),s.terminate())})(this),Promise.resolve()}}function BP(e,t,n,s={}){e=di(e,qc);const i=Qi(t),r=e._getSettings(),o={...r,emulatorOptions:e._getEmulatorOptions()},a=`${t}:${n}`;i&&(md(`https://${a}`),_d("Firestore",!0)),r.host!==lw&&r.host!==a&&kr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...r,host:a,ssl:i,emulatorOptions:s};if(!zi(l,o)&&(e._setSettings(l),s.mockUserToken)){let u,h;if(typeof s.mockUserToken=="string")u=s.mockUserToken,h=Ue.MOCK_USER;else{u=Ov(s.mockUserToken,e._app?.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new rt($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ue(d)}e._authCredentials=new WR(new qv(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Hr(this.firestore,t,this._query)}}class pe{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new pe(this.firestore,t,this._key)}toJSON(){return{type:pe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(wa(n,pe._jsonSchema))return new pe(t,s||null,new ct(qt.fromString(n.referencePath)))}}pe._jsonSchemaVersion="firestore/documentReference/1.0",pe._jsonSchema={type:fe("string",pe._jsonSchemaVersion),referencePath:fe("string")};class oi extends Hr{constructor(t,n,s){super(t,n,Cd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new pe(this.firestore,null,new ct(t))}withConverter(t){return new oi(this.firestore,t,this._path)}}function Jl(e,t,...n){if(e=Je(e),Gv("collection","path",t),e instanceof qc){const s=qt.fromString(t,...n);return Rg(s),new oi(e,null,s)}{if(!(e instanceof pe||e instanceof oi))throw new rt($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(qt.fromString(t,...n));return Rg(s),new oi(e.firestore,null,s)}}function De(e,t,...n){if(e=Je(e),arguments.length===1&&(t=Ed.newId()),Gv("doc","path",t),e instanceof qc){const s=qt.fromString(t,...n);return Sg(s),new pe(e,null,new ct(s))}{if(!(e instanceof pe||e instanceof oi))throw new rt($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(qt.fromString(t,...n));return Sg(s),new pe(e.firestore,e instanceof oi?e.converter:null,new ct(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm="AsyncQueue";class mm{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ub(this,"async_queue_retry"),this._c=()=>{const s=Uu();s&&at(gm,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=Uu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Uu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ts;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!zr(t))throw t;at(gm,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,xs("INTERNAL UNHANDLED ERROR: ",_m(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const i=jd.createAndSchedule(this,t,n,s,(r=>this.hc(r)));return this.tc.push(i),i}uc(){this.nc&&mt(47125,{Pc:_m(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function _m(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Ra extends qc{constructor(t,n,s,i){super(t,n,s,i),this.type="firestore",this._queue=new mm,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new mm(t),this._firestoreClient=void 0,await t}}}function jP(e,t){const n=typeof e=="object"?e:bd(),s=typeof e=="string"?e:$l,i=Oc(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=Pv("firestore");r&&BP(i,...r)}return i}function qd(e){if(e._terminated)throw new rt($.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||zP(e),e._firestoreClient}function zP(e){const t=e._freezeSettings(),n=(function(i,r,o,a){return new hC(i,r,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,aw(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new NP(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&(function(i){const r=i?._online.build();return{_offline:i?._offline.build(r),_online:r}})(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new mn(Me.fromBase64String(t))}catch(n){throw new rt($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new mn(Me.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:mn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(wa(t,mn._jsonSchema))return mn.fromBase64String(t.bytes)}}mn._jsonSchemaVersion="firestore/bytes/1.0",mn._jsonSchema={type:fe("string",mn._jsonSchemaVersion),bytes:fe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new rt($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ke(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new rt($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new rt($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ct(this._lat,t._lat)||Ct(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xn._jsonSchemaVersion}}static fromJSON(t){if(wa(t,Xn._jsonSchema))return new Xn(t.latitude,t.longitude)}}Xn._jsonSchemaVersion="firestore/geoPoint/1.0",Xn._jsonSchema={type:fe("string",Xn._jsonSchemaVersion),latitude:fe("number"),longitude:fe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,i){if(s.length!==i.length)return!1;for(let r=0;r<s.length;++r)if(s[r]!==i[r])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Jn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(wa(t,Jn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Jn(t.vectorValues);throw new rt($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Jn._jsonSchemaVersion="firestore/vectorValue/1.0",Jn._jsonSchema={type:fe("string",Jn._jsonSchemaVersion),vectorValues:fe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P=/^__.*__$/;class HP{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new tr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Ta(t,this.data,n,this.fieldTransforms)}}function cw(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt(40011,{Ac:e})}}class Yd{constructor(t,n,s,i,r,o){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Yd({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Zl(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(cw(this.Ac)&&$P.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class WP{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||$c(t)}Cc(t,n,s,i=!1){return new Yd({Ac:t,methodName:n,Dc:s,path:ke.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qd(e){const t=e._freezeSettings(),n=$c(e._databaseId);return new WP(e._databaseId,!!t.ignoreUndefinedProperties,n)}function uw(e,t,n,s,i,r={}){const o=e.Cc(r.merge||r.mergeFields?2:0,t,n,i);fw("Data must be an object, but it was:",o,s);const a=hw(s,o);let l,u;if(r.merge)l=new In(o.fieldMask),u=o.fieldTransforms;else if(r.mergeFields){const h=[];for(const d of r.mergeFields){const f=GP(t,d,n);if(!o.contains(f))throw new rt($.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);YP(h,f)||h.push(f)}l=new In(h),u=o.fieldTransforms.filter((d=>l.covers(d.field)))}else l=null,u=o.fieldTransforms;return new HP(new gn(a),l,u)}class Xd extends Kd{_toFieldTransform(t){return new LC(t.path,new ra)}isEqual(t){return t instanceof Xd}}function qP(e,t,n,s=!1){return Jd(n,e.Cc(s?4:3,t))}function Jd(e,t){if(dw(e=Je(e)))return fw("Unsupported field value:",t,e),hw(e,t);if(e instanceof Kd)return(function(s,i){if(!cw(i.Ac))throw i.Sc(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,i){const r=[];let o=0;for(const a of s){let l=Jd(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}})(e,t)}return(function(s,i){if((s=Je(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return MC(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=Qt.fromDate(s);return{timestampValue:Kl(i.serializer,r)}}if(s instanceof Qt){const r=new Qt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Kl(i.serializer,r)}}if(s instanceof Xn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof mn)return{bytesValue:Cb(i.serializer,s._byteString)};if(s instanceof pe){const r=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(r))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Dd(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof Jn)return(function(o,a){return{mapValue:{fields:{[nb]:{stringValue:sb},[Hl]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return xd(a.serializer,u)}))}}}}}})(s,i);throw i.Sc(`Unsupported field value: ${Mc(s)}`)})(e,t)}function hw(e,t){const n={};return Qv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ji(e,((s,i)=>{const r=Jd(i,t.mc(s));r!=null&&(n[s]=r)})),{mapValue:{fields:n}}}function dw(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Qt||e instanceof Xn||e instanceof mn||e instanceof pe||e instanceof Kd||e instanceof Jn)}function fw(e,t,n){if(!dw(n)||!Kv(n)){const s=Mc(n);throw s==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+s)}}function GP(e,t,n){if((t=Je(t))instanceof Gd)return t._internalPath;if(typeof t=="string")return pw(e,t);throw Zl("Field path arguments must be of type string or ",e,!1,void 0,n)}const KP=new RegExp("[~\\*/\\[\\]]");function pw(e,t,n){if(t.search(KP)>=0)throw Zl(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Gd(...t.split("."))._internalPath}catch{throw Zl(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Zl(e,t,n,s,i){const r=s&&!s.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${s}`),o&&(l+=` in document ${i}`),l+=")"),new rt($.INVALID_ARGUMENT,a+e+l)}function YP(e,t){return e.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(t,n,s,i,r){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new QP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Zd("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QP extends gw{data(){return super.data()}}function Zd(e,t){return typeof t=="string"?pw(e,t):t instanceof Gd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new rt($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tf{}class JP extends tf{}function ZP(e,t,...n){let s=[];t instanceof tf&&s.push(t),s=s.concat(n),(function(r){const o=r.filter((l=>l instanceof ef)).length,a=r.filter((l=>l instanceof Gc)).length;if(o>1||o>0&&a>0)throw new rt($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const i of s)e=i._apply(e);return e}class Gc extends JP{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new Gc(t,n,s)}_apply(t){const n=this._parse(t);return mw(t._query,n),new Hr(t.firestore,t.converter,Rh(t._query,n))}_parse(t){const n=Qd(t.firestore);return(function(r,o,a,l,u,h,d){let f;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new rt($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){vm(d,h);const _=[];for(const y of d)_.push(ym(l,r,y));f={arrayValue:{values:_}}}else f=ym(l,r,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||vm(d,h),f=qP(a,o,d,h==="in"||h==="not-in");return he.create(u,h,f)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function tk(e,t,n){const s=t,i=Zd("where",e);return Gc._create(i,s,n)}class ef extends tf{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new ef(t,n)}_parse(t){const n=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:kn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(i,r){let o=i;const a=r.getFlattenedFilters();for(const l of a)mw(o,l),o=Rh(o,l)})(t._query,n),new Hr(t.firestore,t.converter,Rh(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ym(e,t,n){if(typeof(n=Je(n))=="string"){if(n==="")throw new rt($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hb(t)&&n.indexOf("/")!==-1)throw new rt($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(qt.fromString(n));if(!ct.isDocumentKey(s))throw new rt($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ng(e,new ct(s))}if(n instanceof pe)return Ng(e,n._key);throw new rt($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mc(n)}.`)}function vm(e,t){if(!Array.isArray(e)||e.length===0)throw new rt($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function mw(e,t){const n=(function(i,r){for(const o of i)for(const a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null})(e.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new rt($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new rt($.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class ek{convertValue(t,n="none"){switch(mi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return oe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(gi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw mt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Ji(t,((i,r)=>{s[i]=this.convertValue(r,n)})),s}convertVectorValue(t){const n=t.fields?.[Hl].arrayValue?.values?.map((s=>oe(s.doubleValue)));return new Jn(n)}convertGeoPoint(t){return new Xn(oe(t.latitude),oe(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=Lc(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(na(t));default:return null}}convertTimestamp(t){const n=pi(t);return new Qt(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=qt.fromString(t);Lt(Mb(s),9688,{name:t});const i=new sa(s.get(1),s.get(3)),r=new ct(s.popFirst(5));return i.isEqual(n)||xs(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(e,t,n){let s;return s=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,s}class Io{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ui extends gw{constructor(t,n,s,i,r,o){super(t,n,s,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new El(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(Zd("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new rt($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Ui._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ui._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ui._jsonSchema={type:fe("string",Ui._jsonSchemaVersion),bundleSource:fe("string","DocumentSnapshot"),bundleName:fe("string"),bundle:fe("string")};class El extends Ui{data(t={}){return super.data(t)}}class wr{constructor(t,n,s,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Io(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new El(this._firestore,this._userDataWriter,s.key,s,new Io(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new rt($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((a=>{const l=new El(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Io(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>r||a.type!==3)).map((a=>{const l=new El(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Io(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:nk(a.type),doc:l,oldIndex:u,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new rt($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=wr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Ed.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],i=[];return this.docs.forEach((r=>{r._document!==null&&(n.push(r._document),s.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),i.push(r.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function nk(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(e){e=di(e,pe);const t=di(e.firestore,Ra);return FP(qd(t),e._key).then((n=>ik(t,e,n)))}wr._jsonSchemaVersion="firestore/querySnapshot/1.0",wr._jsonSchema={type:fe("string",wr._jsonSchemaVersion),bundleSource:fe("string","QuerySnapshot"),bundleName:fe("string"),bundle:fe("string")};class yw extends ek{constructor(t){super(),this.firestore=t}convertBytes(t){return new mn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new pe(this.firestore,null,n)}}function Fh(e){e=di(e,Hr);const t=di(e.firestore,Ra),n=qd(t),s=new yw(t);return XP(e._query),UP(n,e._query).then((i=>new wr(t,s,e,i)))}function bn(e,t,n){e=di(e,pe);const s=di(e.firestore,Ra),i=_w(e.converter,t,n);return vw(s,[uw(Qd(s),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Yn.none())])}function sk(e,t){const n=di(e.firestore,Ra),s=De(e),i=_w(e.converter,t);return vw(n,[uw(Qd(e.firestore),"addDoc",s._key,i,e.converter!==null,{}).toMutation(s._key,Yn.exists(!1))]).then((()=>s))}function vw(e,t){return(function(s,i){const r=new Ts;return s.asyncQueue.enqueueAndForget((async()=>SP(await LP(s),i,r))),r.promise})(qd(e),t)}function ik(e,t,n){const s=n.docs.get(t._key),i=new yw(e);return new Ui(e,i,t._key,s,new Io(n.hasPendingWrites,n.fromCache),t.converter)}function xn(){return new Xd("serverTimestamp")}(function(t,n=!0){(function(i){Br=i})(Xi),$i(new hi("firestore",((s,{instanceIdentifier:i,options:r})=>{const o=s.getProvider("app").getImmediate(),a=new Ra(new qR(s.getProvider("auth-internal")),new YR(o,s.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new rt($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sa(u.options.projectId,h)})(o,i),o);return r={useFetchStreams:n,...r},a._setSettings(r),a}),"PUBLIC").setMultipleInstances(!0)),Gn(Eg,Tg,t),Gn(Eg,Tg,"esm2020")})();var rk="firebase",ok="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gn(rk,ok,"app");function bw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ak=bw,ww=new va("auth","Firebase",bw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=new yd("@firebase/auth");function lk(e,...t){tc.logLevel<=Rt.WARN&&tc.warn(`Auth (${Xi}): ${e}`,...t)}function Tl(e,...t){tc.logLevel<=Rt.ERROR&&tc.error(`Auth (${Xi}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(e,...t){throw nf(e,...t)}function Zn(e,...t){return nf(e,...t)}function Ew(e,t,n){const s={...ak(),[t]:n};return new va("auth","Firebase",s).create(t,{appName:e.name})}function Is(e){return Ew(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nf(e,...t){if(typeof e!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=e.name),e._errorFactory.create(n,...s)}return ww.create(e,...t)}function gt(e,t,...n){if(!e)throw nf(t,...n)}function vs(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Tl(t),new Error(t)}function ks(e,t){e||vs(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(){return typeof self<"u"&&self.location?.href||""}function ck(){return bm()==="http:"||bm()==="https:"}function bm(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ck()||TS()||"connection"in navigator)?navigator.onLine:!0}function hk(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(t,n){this.shortDelay=t,this.longDelay=n,ks(n>t,"Short delay should be less than long delay!"),this.isMobile=bS()||IS()}get(){return uk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(e,t){ks(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pk=new Ca(3e4,6e4);function Ms(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Ns(e,t,n,s,i={}){return Iw(e,i,async()=>{let r={},o={};s&&(t==="GET"?o=s:r={body:JSON.stringify(s)});const a=ba({key:e.config.apiKey,...o}).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:l,...r};return ES()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&Qi(e.emulatorConfig.host)&&(u.credentials="include"),Tw.fetch()(await Aw(e,e.config.apiHost,n,a),u)})}async function Iw(e,t,n){e._canInitEmulator=!1;const s={...dk,...t};try{const i=new mk(e),r=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Za(e,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Za(e,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Za(e,"email-already-in-use",o);if(l==="USER_DISABLED")throw Za(e,"user-disabled",o);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Ew(e,h,u);Dn(e,h)}}catch(i){if(i instanceof os)throw i;Dn(e,"network-request-failed",{message:String(i)})}}async function xa(e,t,n,s,i={}){const r=await Ns(e,t,n,s,i);return"mfaPendingCredential"in r&&Dn(e,"multi-factor-auth-required",{_serverResponse:r}),r}async function Aw(e,t,n,s){const i=`${t}${n}?${s}`,r=e,o=r.config.emulator?sf(e.config,i):`${e.config.apiScheme}://${i}`;return fk.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}function gk(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Zn(this.auth,"network-request-failed")),pk.get())})}}function Za(e,t,n){const s={appName:e.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=Zn(e,t,s);return i.customData._tokenResponse=n,i}function wm(e){return e!==void 0&&e.enterprise!==void 0}class _k{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return gk(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function yk(e,t){return Ns(e,"GET","/v2/recaptchaConfig",Ms(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk(e,t){return Ns(e,"POST","/v1/accounts:delete",t)}async function ec(e,t){return Ns(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function bk(e,t=!1){const n=Je(e),s=await n.getIdToken(t),i=rf(s);gt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r?.sign_in_provider;return{claims:i,token:s,authTime:$o(ju(i.auth_time)),issuedAtTime:$o(ju(i.iat)),expirationTime:$o(ju(i.exp)),signInProvider:o||null,signInSecondFactor:r?.sign_in_second_factor||null}}function ju(e){return Number(e)*1e3}function rf(e){const[t,n,s]=e.split(".");if(t===void 0||n===void 0||s===void 0)return Tl("JWT malformed, contained fewer than 3 sections"),null;try{const i=Cv(n);return i?JSON.parse(i):(Tl("Failed to decode base64 JWT payload"),null)}catch(i){return Tl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Em(e){const t=rf(e);return gt(t,"internal-error"),gt(typeof t.exp<"u","internal-error"),gt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function la(e,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof os&&wk(s)&&e.auth.currentUser===e&&await e.auth.signOut(),s}}function wk({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$o(this.lastLoginAt),this.creationTime=$o(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nc(e){const t=e.auth,n=await e.getIdToken(),s=await la(e,ec(t,{idToken:n}));gt(s?.users.length,t,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const r=i.providerUserInfo?.length?Sw(i.providerUserInfo):[],o=Ik(e.providerData,r),a=e.isAnonymous,l=!(e.email&&i.passwordHash)&&!o?.length,u=a?l:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Bh(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(e,h)}async function Tk(e){const t=Je(e);await nc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Ik(e,t){return[...e.filter(s=>!t.some(i=>i.providerId===s.providerId)),...t]}function Sw(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ak(e,t){const n=await Iw(e,{},async()=>{const s=ba({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,o=await Aw(e,i,"/v1/token",`key=${r}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return e.emulatorConfig&&Qi(e.emulatorConfig.host)&&(l.credentials="include"),Tw.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Sk(e,t){return Ns(e,"POST","/v2/accounts:revokeToken",Ms(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){gt(t.idToken,"internal-error"),gt(typeof t.idToken<"u","internal-error"),gt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Em(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){gt(t.length!==0,"internal-error");const n=Em(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(gt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:i,expiresIn:r}=await Ak(t,n);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:i,expirationTime:r}=n,o=new Tr;return s&&(gt(typeof s=="string","internal-error",{appName:t}),o.refreshToken=s),i&&(gt(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),r&&(gt(typeof r=="number","internal-error",{appName:t}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Tr,this.toJSON())}_performRefresh(){return vs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(e,t){gt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class An{constructor({uid:t,auth:n,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new Ek(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Bh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const n=await la(this,this.stsTokenManager.getToken(this.auth,t));return gt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return bk(this,t)}reload(){return Tk(this)}_assign(t){this!==t&&(gt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new An({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){gt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await nc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hn(this.auth.app))return Promise.reject(Is(this.auth));const t=await this.getIdToken();return await la(this,vk(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,i=n.email??void 0,r=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:g,providerData:_,stsTokenManager:y}=n;gt(d&&y,t,"internal-error");const b=Tr.fromJSON(this.name,y);gt(typeof d=="string",t,"internal-error"),$s(s,t.name),$s(i,t.name),gt(typeof f=="boolean",t,"internal-error"),gt(typeof g=="boolean",t,"internal-error"),$s(r,t.name),$s(o,t.name),$s(a,t.name),$s(l,t.name),$s(u,t.name),$s(h,t.name);const I=new An({uid:d,auth:t,email:i,emailVerified:f,displayName:s,isAnonymous:g,photoURL:o,phoneNumber:r,tenantId:a,stsTokenManager:b,createdAt:u,lastLoginAt:h});return _&&Array.isArray(_)&&(I.providerData=_.map(R=>({...R}))),l&&(I._redirectEventId=l),I}static async _fromIdTokenResponse(t,n,s=!1){const i=new Tr;i.updateFromServerResponse(n);const r=new An({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:s});return await nc(r),r}static async _fromGetAccountInfoResponse(t,n,s){const i=n.users[0];gt(i.localId!==void 0,"internal-error");const r=i.providerUserInfo!==void 0?Sw(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!r?.length,a=new Tr;a.updateFromIdToken(s);const l=new An({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new Bh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!r?.length};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm=new Map;function bs(e){ks(e instanceof Function,"Expected a class definition");let t=Tm.get(e);return t?(ks(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Tm.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}Rw.type="NONE";const Im=Rw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(e,t,n){return`firebase:${e}:${t}:${n}`}class Ir{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=Il(this.userKey,i.apiKey,r),this.fullPersistenceKey=Il("persistence",i.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await ec(this.auth,{idToken:t}).catch(()=>{});return n?An._fromGetAccountInfoResponse(this.auth,n,t):null}return An._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new Ir(bs(Im),t,s);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let r=i[0]||bs(Im);const o=Il(s,t.config.apiKey,t.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const f=await ec(t,{idToken:h}).catch(()=>{});if(!f)break;d=await An._fromGetAccountInfoResponse(t,f,h)}else d=An._fromJSON(t,h);u!==r&&(a=d),r=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new Ir(r,t,s):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==r)try{await u._remove(o)}catch{}})),new Ir(r,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(kw(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Cw(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ow(t))return"Blackberry";if(Mw(t))return"Webos";if(xw(t))return"Safari";if((t.includes("chrome/")||Pw(t))&&!t.includes("edge/"))return"Chrome";if(Dw(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=e.match(n);if(s?.length===2)return s[1]}return"Other"}function Cw(e=We()){return/firefox\//i.test(e)}function xw(e=We()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Pw(e=We()){return/crios\//i.test(e)}function kw(e=We()){return/iemobile/i.test(e)}function Dw(e=We()){return/android/i.test(e)}function Ow(e=We()){return/blackberry/i.test(e)}function Mw(e=We()){return/webos/i.test(e)}function of(e=We()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Rk(e=We()){return of(e)&&!!window.navigator?.standalone}function Ck(){return AS()&&document.documentMode===10}function Nw(e=We()){return of(e)||Dw(e)||Mw(e)||Ow(e)||/windows phone/i.test(e)||kw(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(e,t=[]){let n;switch(e){case"Browser":n=Am(We());break;case"Worker":n=`${Am(We())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xi}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=r=>new Promise((o,a)=>{try{const l=t(r);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pk(e,t={}){return Ns(e,"GET","/v2/passwordPolicy",Ms(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=6;class Dk{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??kk,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<t.length;i++)s=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(t,n,s,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sm(this),this.idTokenSubscription=new Sm(this),this.beforeStateQueue=new xk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ww,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=bs(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ir.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await ec(this,{idToken:t}),s=await An._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(hn(this.app)){const r=this.app.settings.authIdToken;return r?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(r).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(t);(!r||r===o)&&a?.user&&(s=a.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(r){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(r))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return gt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await nc(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=hk()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(hn(this.app))return Promise.reject(Is(this));const n=t?Je(t):null;return n&&gt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&gt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return hn(this.app)?Promise.reject(Is(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return hn(this.app)?Promise.reject(Is(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bs(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Pk(this),n=new Dk(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new va("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Sk(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&bs(t)||this._popupRedirectResolver;gt(n,this,"argument-error"),this.redirectPersistenceManager=await Ir.create(this,[bs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,i){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(gt(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const l=t.addObserver(n,s,i);return()=>{o=!0,l()}}else{const l=t.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return gt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Vw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&lk(`Error while retrieving App Check token: ${t.error}`),t?.token}}function bi(e){return Je(e)}class Sm{constructor(t){this.auth=t,this.observer=null,this.addObserver=OS(n=>this.observer=n)}get next(){return gt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Mk(e){Kc=e}function Lw(e){return Kc.loadJS(e)}function Nk(){return Kc.recaptchaEnterpriseScript}function Vk(){return Kc.gapiScript}function Lk(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class Fk{constructor(){this.enterprise=new Uk}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class Uk{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const Bk="recaptcha-enterprise",Fw="NO_RECAPTCHA";class jk{constructor(t){this.type=Bk,this.auth=bi(t)}async verify(t="verify",n=!1){async function s(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{yk(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new _k(l);return r.tenantId==null?r._agentRecaptchaConfig=u:r._tenantRecaptchaConfigs[r.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(r,o,a){const l=window.grecaptcha;wm(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:t}).then(u=>{o(u)}).catch(()=>{o(Fw)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Fk().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{s(this.auth).then(a=>{if(!n&&wm(window.grecaptcha))i(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Nk();l.length!==0&&(l+=a),Lw(l).then(()=>{i(a,r,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Rm(e,t,n,s=!1,i=!1){const r=new jk(e);let o;if(i)o=Fw;else try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const a={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function sc(e,t,n,s,i){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Rm(e,t,n,n==="getOobCode");return s(e,r)}else return s(e,t).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Rm(e,t,n,n==="getOobCode");return s(e,o)}else return Promise.reject(r)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(e,t){const n=Oc(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),r=n.getOptions();if(zi(r,t??{}))return i;Dn(i,"already-initialized")}return n.initialize({options:t})}function $k(e,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(bs);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(s,t?.popupRedirectResolver)}function Hk(e,t,n){const s=bi(e);gt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const i=!1,r=Uw(t),{host:o,port:a}=Wk(t),l=a===null?"":`:${a}`,u={url:`${r}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){gt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),gt(zi(u,s.config.emulator)&&zi(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,Qi(o)?(md(`${r}//${o}${l}`),_d("Auth",!0)):qk()}function Uw(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Wk(e){const t=Uw(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:Cm(s.substr(r.length+1))}}else{const[r,o]=s.split(":");return{host:r,port:Cm(o)}}}function Cm(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function qk(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return vs("not implemented")}_getIdTokenResponse(t){return vs("not implemented")}_linkToIdToken(t,n){return vs("not implemented")}_getReauthenticationResolver(t){return vs("not implemented")}}async function Gk(e,t){return Ns(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kk(e,t){return xa(e,"POST","/v1/accounts:signInWithPassword",Ms(e,t))}async function Yk(e,t){return Ns(e,"POST","/v1/accounts:sendOobCode",Ms(e,t))}async function Qk(e,t){return Yk(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xk(e,t){return xa(e,"POST","/v1/accounts:signInWithEmailLink",Ms(e,t))}async function Jk(e,t){return xa(e,"POST","/v1/accounts:signInWithEmailLink",Ms(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends af{constructor(t,n,s,i=null){super("password",s),this._email=t,this._password=n,this._tenantId=i}static _fromEmailAndPassword(t,n){return new ca(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new ca(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sc(t,n,"signInWithPassword",Kk);case"emailLink":return Xk(t,{email:this._email,oobCode:this._password});default:Dn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sc(t,s,"signUpPassword",Gk);case"emailLink":return Jk(t,{idToken:n,email:this._email,oobCode:this._password});default:Dn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ar(e,t){return xa(e,"POST","/v1/accounts:signInWithIdp",Ms(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk="http://localhost";class qi extends af{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new qi(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Dn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:i,...r}=n;if(!s||!i)return null;const o=new qi(s,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Ar(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,Ar(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Ar(t,n)}buildRequest(){const t={requestUri:Zk,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=ba(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function e1(e){const t=vo(bo(e)).link,n=t?vo(bo(t)).deep_link_id:null,s=vo(bo(e)).deep_link_id;return(s?vo(bo(s)).link:null)||s||n||t||e}class lf{constructor(t){const n=vo(bo(t)),s=n.apiKey??null,i=n.oobCode??null,r=t1(n.mode??null);gt(s&&i&&r,"argument-error"),this.apiKey=s,this.operation=r,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=e1(t);try{return new lf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(){this.providerId=Wr.PROVIDER_ID}static credential(t,n){return ca._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=lf.parseLink(n);return gt(s,"argument-error"),ca._fromEmailAndCode(t,s.code,s.tenantId)}}Wr.PROVIDER_ID="password";Wr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa extends Bw{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends Pa{constructor(){super("facebook.com")}static credential(t){return qi._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ks.credentialFromTaggedObject(t)}static credentialFromError(t){return Ks.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ks.credential(t.oauthAccessToken)}catch{return null}}}Ks.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ks.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends Pa{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return qi._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return ys.credentialFromTaggedObject(t)}static credentialFromError(t){return ys.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return ys.credential(n,s)}catch{return null}}}ys.GOOGLE_SIGN_IN_METHOD="google.com";ys.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys extends Pa{constructor(){super("github.com")}static credential(t){return qi._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ys.credentialFromTaggedObject(t)}static credentialFromError(t){return Ys.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ys.credential(t.oauthAccessToken)}catch{return null}}}Ys.GITHUB_SIGN_IN_METHOD="github.com";Ys.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends Pa{constructor(){super("twitter.com")}static credential(t,n){return qi._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Qs.credentialFromTaggedObject(t)}static credentialFromError(t){return Qs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Qs.credential(n,s)}catch{return null}}}Qs.TWITTER_SIGN_IN_METHOD="twitter.com";Qs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n1(e,t){return xa(e,"POST","/v1/accounts:signUp",Ms(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,i=!1){const r=await An._fromIdTokenResponse(t,s,i),o=xm(s);return new Gi({user:r,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const i=xm(s);return new Gi({user:t,providerId:i,_tokenResponse:s,operationType:n})}}function xm(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic extends os{constructor(t,n,s,i){super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,ic.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,i){return new ic(t,n,s,i)}}function jw(e,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?ic._fromErrorAndOperation(e,r,t,s):r})}async function s1(e,t,n=!1){const s=await la(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Gi._forOperation(e,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i1(e,t,n=!1){const{auth:s}=e;if(hn(s.app))return Promise.reject(Is(s));const i="reauthenticate";try{const r=await la(e,jw(s,i,t,e),n);gt(r.idToken,s,"internal-error");const o=rf(r.idToken);gt(o,s,"internal-error");const{sub:a}=o;return gt(e.uid===a,s,"user-mismatch"),Gi._forOperation(e,i,r)}catch(r){throw r?.code==="auth/user-not-found"&&Dn(s,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zw(e,t,n=!1){if(hn(e.app))return Promise.reject(Is(e));const s="signIn",i=await jw(e,s,t),r=await Gi._fromIdTokenResponse(e,s,i);return n||await e._updateCurrentUser(r.user),r}async function r1(e,t){return zw(bi(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $w(e){const t=bi(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function o1(e,t,n){const s=bi(e);await sc(s,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Qk)}async function a1(e,t,n){if(hn(e.app))return Promise.reject(Is(e));const s=bi(e),o=await sc(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",n1).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&$w(e),l}),a=await Gi._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function l1(e,t,n){return hn(e.app)?Promise.reject(Is(e)):r1(Je(e),Wr.credential(t,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&$w(e),s})}function c1(e,t,n,s){return Je(e).onIdTokenChanged(t,n,s)}function u1(e,t,n){return Je(e).beforeAuthStateChanged(t,n)}function h1(e){return Je(e).signOut()}const rc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(rc,"1"),this.storage.removeItem(rc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=1e3,f1=10;class Ww extends Hw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Nw(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&t(n,i,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},r=this.storage.getItem(s);Ck()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,f1):i()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},d1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}Ww.type="LOCAL";const p1=Ww;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw extends Hw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}qw.type="SESSION";const Gw=qw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const s=new Yc(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:i,data:r}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,r)),l=await g1(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:l})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(e="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const u=cf("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(h),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(f.data.response);break;default:clearTimeout(h),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(){return window}function _1(e){ts().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(){return typeof ts().WorkerGlobalScope<"u"&&typeof ts().importScripts=="function"}async function y1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function v1(){return navigator?.serviceWorker?.controller||null}function b1(){return Kw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="firebaseLocalStorageDb",w1=1,oc="firebaseLocalStorage",Qw="fbase_key";class ka{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Qc(e,t){return e.transaction([oc],t?"readwrite":"readonly").objectStore(oc)}function E1(){const e=indexedDB.deleteDatabase(Yw);return new ka(e).toPromise()}function jh(){const e=indexedDB.open(Yw,w1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const s=e.result;try{s.createObjectStore(oc,{keyPath:Qw})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const s=e.result;s.objectStoreNames.contains(oc)?t(s):(s.close(),await E1(),t(await jh()))})})}async function Pm(e,t,n){const s=Qc(e,!0).put({[Qw]:t,value:n});return new ka(s).toPromise()}async function T1(e,t){const n=Qc(e,!1).get(t),s=await new ka(n).toPromise();return s===void 0?null:s.value}function km(e,t){const n=Qc(e,!0).delete(t);return new ka(n).toPromise()}const I1=800,A1=3;class Xw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jh(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>A1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Kw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yc._getInstance(b1()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await y1(),!this.activeServiceWorker)return;this.sender=new m1(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||v1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await jh();return await Pm(t,rc,"1"),await km(t,rc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Pm(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>T1(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>km(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const r=Qc(i,!1).getAll();return new ka(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:i,value:r}of t)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),I1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Xw.type="LOCAL";const S1=Xw;new Ca(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(e,t){return t?bs(t):(gt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf extends af{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ar(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Ar(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Ar(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function C1(e){return zw(e.auth,new uf(e),e.bypassAuthState)}function x1(e){const{auth:t,user:n}=e;return gt(n,t,"internal-error"),i1(n,new uf(e),e.bypassAuthState)}async function P1(e){const{auth:t,user:n}=e;return gt(n,t,"internal-error"),s1(n,new uf(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(t,n,s,i,r=!1){this.auth=t,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:i,tenantId:r,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return C1;case"linkViaPopup":case"linkViaRedirect":return P1;case"reauthViaPopup":case"reauthViaRedirect":return x1;default:Dn(this.auth,"internal-error")}}resolve(t){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=new Ca(2e3,1e4);class mr extends Jw{constructor(t,n,s,i,r){super(t,n,i,r),this.provider=s,this.authWindow=null,this.pollId=null,mr.currentPopupAction&&mr.currentPopupAction.cancel(),mr.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return gt(t,this.auth,"internal-error"),t}async onExecution(){ks(this.filter.length===1,"Popup operations only handle one event");const t=cf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mr.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,k1.get())};t()}}mr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="pendingRedirect",Al=new Map;class O1 extends Jw{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=Al.get(this.auth._key());if(!t){try{const s=await M1(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Al.set(this.auth._key(),t)}return this.bypassAuthState||Al.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function M1(e,t){const n=L1(t),s=V1(e);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function N1(e,t){Al.set(e._key(),t)}function V1(e){return bs(e._redirectPersistence)}function L1(e){return Il(D1,e.config.apiKey,e.name)}async function F1(e,t,n=!1){if(hn(e.app))return Promise.reject(Is(e));const s=bi(e),i=R1(s,t),o=await new O1(s,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1=600*1e3;class B1{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!j1(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!Zw(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Zn(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=U1&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dm(t))}saveEventToCache(t){this.cachedEventUids.add(Dm(t)),this.lastProcessedEventTime=Date.now()}}function Dm(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Zw({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function j1(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zw(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z1(e,t={}){return Ns(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,H1=/^https?/;async function W1(e){if(e.config.emulator)return;const{authorizedDomains:t}=await z1(e);for(const n of t)try{if(q1(n))return}catch{}Dn(e,"unauthorized-domain")}function q1(e){const t=Uh(),{protocol:n,hostname:s}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&s===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!H1.test(n))return!1;if($1.test(e))return s===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=new Ca(3e4,6e4);function Om(){const e=ts().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function K1(e){return new Promise((t,n)=>{function s(){Om(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Om(),n(Zn(e,"network-request-failed"))},timeout:G1.get()})}if(ts().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(ts().gapi?.load)s();else{const i=Lk("iframefcb");return ts()[i]=()=>{gapi.load?s():n(Zn(e,"network-request-failed"))},Lw(`${Vk()}?onload=${i}`).catch(r=>n(r))}}).catch(t=>{throw Sl=null,t})}let Sl=null;function Y1(e){return Sl=Sl||K1(e),Sl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=new Ca(5e3,15e3),X1="__/auth/iframe",J1="emulator/auth/iframe",Z1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eD(e){const t=e.config;gt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?sf(t,J1):`https://${e.config.authDomain}/${X1}`,s={apiKey:t.apiKey,appName:e.name,v:Xi},i=tD.get(e.config.apiHost);i&&(s.eid=i);const r=e._getFrameworks();return r.length&&(s.fw=r.join(",")),`${n}?${ba(s).slice(1)}`}async function nD(e){const t=await Y1(e),n=ts().gapi;return gt(n,e,"internal-error"),t.open({where:document.body,url:eD(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Z1,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const o=Zn(e,"network-request-failed"),a=ts().setTimeout(()=>{r(o)},Q1.get());function l(){ts().clearTimeout(a),i(s)}s.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iD=500,rD=600,oD="_blank",aD="http://localhost";class Mm{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lD(e,t,n,s=iD,i=rD){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...sD,width:s.toString(),height:i.toString(),top:r,left:o},u=We().toLowerCase();n&&(a=Pw(u)?oD:n),Cw(u)&&(t=t||aD,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[g,_])=>`${f}${g}=${_},`,"");if(Rk(u)&&a!=="_self")return cD(t||"",a),new Mm(null);const d=window.open(t||"",a,h);gt(d,e,"popup-blocked");try{d.focus()}catch{}return new Mm(d)}function cD(e,t){const n=document.createElement("a");n.href=e,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD="__/auth/handler",hD="emulator/auth/handler",dD=encodeURIComponent("fac");async function Nm(e,t,n,s,i,r){gt(e.config.authDomain,e,"auth-domain-config-required"),gt(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:Xi,eventId:i};if(t instanceof Bw){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",DS(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(t instanceof Pa){const h=t.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await e._getAppCheckToken(),u=l?`#${dD}=${encodeURIComponent(l)}`:"";return`${fD(e)}?${ba(a).slice(1)}${u}`}function fD({config:e}){return e.emulator?sf(e,hD):`https://${e.authDomain}/${uD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu="webStorageSupport";class pD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gw,this._completeRedirectFn=F1,this._overrideRedirectResult=N1}async _openPopup(t,n,s,i){ks(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const r=await Nm(t,n,s,Uh(),i);return lD(t,r,cf())}async _openRedirect(t,n,s,i){await this._originValidation(t);const r=await Nm(t,n,s,Uh(),i);return _1(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:r}=this.eventManagers[n];return i?Promise.resolve(i):(ks(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await nD(t),s=new B1(t);return n.register("authEvent",i=>(gt(i?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(zu,{type:zu},i=>{const r=i?.[0]?.[zu];r!==void 0&&n(!!r),Dn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=W1(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return Nw()||xw()||of()}}const gD=pD;var Vm="@firebase/auth",Lm="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){gt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yD(e){$i(new hi("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;gt(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vw(e)},u=new Ok(s,i,r,l);return $k(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),$i(new hi("auth-internal",t=>{const n=bi(t.getProvider("auth").getImmediate());return(s=>new mD(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gn(Vm,Lm,_D(e)),Gn(Vm,Lm,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=300,bD=Dv("authIdTokenMaxAge")||vD;let Fm=null;const wD=e=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>bD)return;const i=n?.token;Fm!==i&&(Fm=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Xc(e=bd()){const t=Oc(e,"auth");if(t.isInitialized())return t.getImmediate();const n=zk(e,{popupRedirectResolver:gD,persistence:[S1,p1,Gw]}),s=Dv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(s,location.origin);if(location.origin===r.origin){const o=wD(r.toString());u1(n,o,()=>o(n.currentUser)),c1(n,a=>o(a))}}const i=xv("auth");return i&&Hk(n,`http://${i}`),n}function ED(){return document.getElementsByTagName("head")?.[0]??document}Mk({loadJS(e){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",e),s.onload=t,s.onerror=i=>{const r=Zn("internal-error");r.customData=i,n(r)},s.type="text/javascript",s.charset="UTF-8",ED().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yD("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="firebasestorage.googleapis.com",TD="storageBucket",ID=120*1e3,AD=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends os{constructor(t,n,s=0){super($u(t),`Firebase Storage: ${n} (${$u(t)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,as.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return $u(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var is;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(is||(is={}));function $u(e){return"storage/"+e}function SD(){const e="An unknown error occurred, please check the error payload for server response.";return new as(is.UNKNOWN,e)}function RD(){return new as(is.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function CD(){return new as(is.CANCELED,"User canceled the upload/download.")}function xD(e){return new as(is.INVALID_URL,"Invalid URL '"+e+"'.")}function PD(e){return new as(is.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Um(e){return new as(is.INVALID_ARGUMENT,e)}function eE(){return new as(is.APP_DELETED,"The Firebase app was deleted.")}function kD(e){return new as(is.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let s;try{s=Sn.makeFromUrl(t,n)}catch{return new Sn(t,"")}if(s.path==="")return s;throw PD(t)}static makeFromUrl(t,n){let s=null;const i="([A-Za-z0-9.\\-_]+)";function r(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(O){O.path_=decodeURIComponent(O.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${d}/${h}/b/${i}/o${f}`,"i"),_={bucket:1,path:3},y=n===tE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",I=new RegExp(`^https?://${y}/${i}/${b}`,"i"),k=[{regex:a,indices:l,postModify:r},{regex:g,indices:_,postModify:u},{regex:I,indices:{bucket:1,path:2},postModify:u}];for(let O=0;O<k.length;O++){const L=k[O],G=L.regex.exec(t);if(G){const T=G[L.indices.bucket];let v=G[L.indices.path];v||(v=""),s=new Sn(T,v),L.postModify(s);break}}if(s==null)throw xD(t);return s}}class DD{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(e,t,n){let s=1,i=null,r=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...b){u||(u=!0,t.apply(null,b))}function d(b){i=setTimeout(()=>{i=null,e(g,l())},b)}function f(){r&&clearTimeout(r)}function g(b,...I){if(u){f();return}if(b){f(),h.call(null,b,...I);return}if(l()||o){f(),h.call(null,b,...I);return}s<64&&(s*=2);let k;a===1?(a=2,k=0):k=(s+Math.random())*1e3,d(k)}let _=!1;function y(b){_||(_=!0,f(),!u&&(i!==null?(b||(a=2),clearTimeout(i),d(0)):b||(a=1)))}return d(0),r=setTimeout(()=>{o=!0,y(!0)},n),y}function MD(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(e){return e!==void 0}function Bm(e,t,n,s){if(s<t)throw Um(`Invalid value for '${e}'. Expected ${t} or greater.`);if(s>n)throw Um(`Invalid value for '${e}'. Expected ${n} or less.`)}function VD(e){const t=encodeURIComponent;let n="?";for(const s in e)if(e.hasOwnProperty(s)){const i=t(s)+"="+t(e[s]);n=n+i+"&"}return n=n.slice(0,-1),n}var ac;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(ac||(ac={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,r=t.indexOf(e)!==-1;return n||i||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(t,n,s,i,r,o,a,l,u,h,d,f=!0,g=!1){this.url_=t,this.method_=n,this.headers_=s,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,y)=>{this.resolve_=_,this.reject_=y,this.start_()})}start_(){const t=(s,i)=>{if(i){s(!1,new tl(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(o),this.pendingConnection_=null;const a=r.getErrorCode()===ac.NO_ERROR,l=r.getStatus();if(!a||LD(l,this.additionalRetryCodes_)&&this.retry){const h=r.getErrorCode()===ac.ABORT;s(!1,new tl(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;s(!0,new tl(u,r))})},n=(s,i)=>{const r=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());ND(l)?r(l):r()}catch(l){o(l)}else if(a!==null){const l=SD();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?eE():CD();o(l)}else{const l=RD();o(l)}};this.canceled_?n(!1,new tl(!1,null,!0)):this.backoffId_=OD(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&MD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class tl{constructor(t,n,s){this.wasSuccessCode=t,this.connection=n,this.canceled=!!s}}function UD(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function BD(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function jD(e,t){t&&(e["X-Firebase-GMPID"]=t)}function zD(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function $D(e,t,n,s,i,r,o=!0,a=!1){const l=VD(e.urlParams),u=e.url+l,h=Object.assign({},e.headers);return jD(h,t),UD(h,n),BD(h,r),zD(h,s),new FD(u,e.method,h,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function WD(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(t,n){this._service=t,n instanceof Sn?this._location=n:this._location=Sn.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new lc(t,n)}get root(){const t=new Sn(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return WD(this._location.path)}get storage(){return this._service}get parent(){const t=HD(this._location.path);if(t===null)return null;const n=new Sn(this._location.bucket,t);return new lc(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw kD(t)}}function jm(e,t){const n=t?.[TD];return n==null?null:Sn.makeFromBucketSpec(n,e)}function qD(e,t,n,s={}){e.host=`${t}:${n}`;const i=Qi(t);i&&(md(`https://${e.host}/b`),_d("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:r}=s;r&&(e._overrideAuthToken=typeof r=="string"?r:Ov(r,e.app.options.projectId))}class GD{constructor(t,n,s,i,r,o=!1){this.app=t,this._authProvider=n,this._appCheckProvider=s,this._url=i,this._firebaseVersion=r,this._isUsingEmulator=o,this._bucket=null,this._host=tE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ID,this._maxUploadRetryTime=AD,this._requests=new Set,i!=null?this._bucket=Sn.makeFromBucketSpec(i,this._host):this._bucket=jm(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Sn.makeFromBucketSpec(this._url,t):this._bucket=jm(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Bm("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Bm("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new lc(this,t)}_makeRequest(t,n,s,i,r=!0){if(this._deleted)return new DD(eE());{const o=$D(t,this._appId,s,i,n,this._firebaseVersion,r,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[s,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,s,i).getPromise()}}const zm="@firebase/storage",$m="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="storage";function KD(e=bd(),t){e=Je(e);const s=Oc(e,nE).getImmediate({identifier:t}),i=Pv("storage");return i&&YD(s,...i),s}function YD(e,t,n,s={}){qD(e,t,n,s)}function QD(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new GD(n,s,i,t,Xi)}function XD(){$i(new hi(nE,QD,"PUBLIC").setMultipleInstances(!0)),Gn(zm,$m,""),Gn(zm,$m,"esm2020")}XD();const JD={apiKey:"AIzaSyA88mxzUStbuMFKNr9Q0OODtHXmpyuqvBY",authDomain:"findyourfit-93e9f.firebaseapp.com",projectId:"findyourfit-93e9f",storageBucket:"findyourfit-93e9f.firebasestorage.app",messagingSenderId:"715690823951",appId:"1:715690823951:web:f3af86677f7d990c55ae7a",measurementId:"G-2GTC9GRYRL"},hf=Vv(JD),ue=jP(hf),ws=Xc(hf);KD(hf);const rn=tA("user",{state:()=>({userData:null,moodData:null,journalData:null,therapists:null}),actions:{async fetchUserData(){const e=ws.currentUser;if(!e)return;const t=De(ue,"users",e.uid),n=await Er(t);n.exists()&&(this.userData=n.data(),this.userData.streak||(this.userData.streak={count:1,lastUpdate:xn()},await bn(t,this.userData,{merge:!0})),await this.updateStreak(),await this.getMood(),await this.getJournalEntries(),await this.getTherapists())},setUserData(e){this.userData=e},setMoodData(e){this.moodData=e},async updateStreak(){const e=ws.currentUser;if(!e||!this.userData?.streak)return;const{count:t,lastUpdate:n}=this.userData.streak;if(!n||typeof n.toDate!="function"){this.userData.streak={count:1,lastUpdate:xn()},await bn(De(ue,"users",e.uid),this.userData,{merge:!0});return}const s=n.toDate(),i=new Date;this.isSameDay(s,i)||(this.isYesterday(s,i)?this.userData.streak.count=t+1:this.userData.streak.count=1,this.userData.streak.lastUpdate=xn(),await bn(De(ue,"users",e.uid),this.userData,{merge:!0}))},isSameDay(e,t){return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e.getUTCDate()===t.getUTCDate()},isYesterday(e){const t=e,n=new Date,s=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate());return(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate())-s)/(1e3*60*60*24)===1},async getMood(){const e=ws.currentUser;if(!e)return;const t=De(ue,"mood",e.uid),n=await Er(t);n.exists()&&(this.moodData=n.data())},async getJournalEntries(){const e=ws.currentUser;if(!e)return;const t=De(ue,"journals",e.uid),n=await Er(t);if(n.exists()){const s=n.data(),i=Object.entries(s).sort((r,o)=>Number(o[0])-Number(r[0])).map(([r,o])=>({id:r,...o}));this.journalData=i}},async getTherapists(){const e=[];return(await Fh(Jl(ue,"therapists"))).forEach(n=>{e.push({id:n.id,...n.data()})}),this.therapists=e,this.therapists}}}),qe=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},ZD={class:"modal_holder"},tO={class:"modal_heading_holder inter font_size_xs"},eO=["innerHTML"],nO={__name:"errorModal",props:{errorMessage:{type:String,required:!0}},setup(e){return(t,n)=>(q(),J("div",{class:"modal_overlay",onClick:n[1]||(n[1]=pd(s=>t.$emit("close"),["self"])),role:"dialog","aria-modal":"true"},[C("div",ZD,[C("div",tO,[n[2]||(n[2]=C("span",null,"Attention!",-1)),C("button",{class:"modal_close_button",onClick:n[0]||(n[0]=s=>t.$emit("close"))},"")]),C("div",{class:"modal_content_holder inter font_size_xs",innerHTML:e.errorMessage},null,8,eO)])]))}},qr=qe(nO,[["__scopeId","data-v-b33337de"]]),sO={class:"modal_overlay",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},iO={class:"modal_holder"},rO={id:"modal-title",class:"modal_heading_holder inter font_size_xs"},oO={class:"modal_content_holder inter font_size_xs"},aO=["value"],lO=["value"],cO={__name:"userInfoModal",props:{globalUser:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=rn();ya();const s=e,i=Z([]),r=Z(""),o=Z(""),a=Z(""),l=Z(""),u=Z(""),h=Z([{value:"male",text:"Male"},{value:"female",text:"Female"},{value:"other",text:"Other"}]),d=Z(!1),f=Z("");rs(async()=>{const R=await(await fetch("https://restcountries.com/v3.1/all?fields=name,cca3,flags")).json();i.value=R.sort((k,O)=>k.name.common.localeCompare(O.name.common))});const g=I=>/^\d{10}$/.test(I),_=I=>{if(!/^\d{4}\/\d{2}\/\d{2}$/.test(I))return!1;const[R,k,O]=I.split("/").map(Number),L=new Date(R,k-1,O);return L.getFullYear()===R&&L.getMonth()===k-1&&L.getDate()===O},y=async()=>{if(Xc().currentUser,f.value="",d.value=!1,!g(a.value)){f.value="Contact Number must be a valid 10-digit number.",d.value=!0;return}if(!_(l.value)){f.value="Date of Birth must be in the format yyyy/mm/dd.",d.value=!0;return}const R={personalInfo:{name:o.value,contactNumber:a.value,dateOfBirth:l.value,email:s.globalUser.email,country:r.value,gender:u.value},streak:{count:1,lastUpdate:xn()},loginDate:new Date().toISOString(),uid:s.globalUser.uid};await bn(De(ue,"users",s.globalUser.uid),R),n.setUserData(R),window.location.reload()},b=()=>{d.value=!1,f.value=""};return(I,R)=>(q(),J("div",sO,[C("div",iO,[C("div",rO,[R[6]||(R[6]=C("span",{style:{width:"80%"}},"User Information",-1)),C("button",{class:"modal_close_button",onClick:R[0]||(R[0]=k=>I.$emit("close"))},"")]),C("div",oO,[R[10]||(R[10]=C("div",{class:"modal_content_description"}," We collect your name, date of birth, and contact number to create your profile, personalize your therapy experience, and stay in touch for updates or support. Your information is kept secure and private at all times. ",-1)),C("form",{class:"modal_form_holder",onSubmit:pd(y,["prevent"])},[Mt(C("input",{class:"modal_input inter font_size_xs",type:"text",placeholder:"Name & Surname","onUpdate:modelValue":R[1]||(R[1]=k=>o.value=k),required:""},null,512),[[re,o.value]]),Mt(C("input",{class:"modal_input inter font_size_xs",type:"tel",placeholder:"Contact Number","onUpdate:modelValue":R[2]||(R[2]=k=>a.value=k),required:""},null,512),[[re,a.value]]),Mt(C("input",{class:"modal_input inter font_size_xs",type:"text",placeholder:"Date of Birth (yyyy/mm/dd)","onUpdate:modelValue":R[3]||(R[3]=k=>l.value=k),required:""},null,512),[[re,l.value]]),Mt(C("select",{class:"modal_input inter font_size_xs","onUpdate:modelValue":R[4]||(R[4]=k=>u.value=k)},[R[7]||(R[7]=C("option",{disabled:"",value:""},"Please select one",-1)),(q(!0),J(Tt,null,te(h.value,k=>(q(),J("option",{key:k.value,value:k.value},yt(k.text),9,aO))),128))],512),[[qn,u.value]]),Mt(C("select",{class:"modal_input inter font_size_xs","onUpdate:modelValue":R[5]||(R[5]=k=>r.value=k),id:"country"},[R[8]||(R[8]=C("option",{disabled:"",value:""},"Select your country",-1)),(q(!0),J(Tt,null,te(i.value,k=>(q(),J("option",{key:k.cca3,value:k.cca3},yt(k.name.common),9,lO))),128))],512),[[qn,r.value]]),R[9]||(R[9]=C("button",{type:"submit",class:"modal_button inter font_size_xs"},"Confirm",-1))],32)])]),d.value?(q(),Se(qr,{key:0,errorMessage:f.value,onClose:b},null,8,["errorMessage"])):de("",!0)]))}},uO=qe(cO,[["__scopeId","data-v-252a7fe2"]]),hO={class:"login_page"},dO={class:"login_page_content"},fO={class:"login_page_form"},pO={class:"login_page_form_fields"},gO=["type"],mO={class:"show_password_toggle inter font_size_xs"},_O={class:"login_page_toggle_register inter font_size_xs"},yO={__name:"loginRegister",setup(e){const t=rn(),n=ya(),s=Z("password"),i=Z(null),r=Z(""),o=Z(""),a=Z("login"),l=Z(!1),u=Z(""),h=Z(!1);new ys().addScope("https://www.googleapis.com/auth/contacts.readonly");const f=()=>{s.value=s.value==="password"?"text":"password"},g=()=>{a.value=a.value==="login"?"register":"login"},_=k=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k),y=()=>{if(!r.value){u.value="Please enter your email to reset your password!",l.value=!0;return}o1(ws,r.value).then(()=>{u.value="An email has been sent to reset your password!",l.value=!0})},b=k=>{const O=k.toDate(),L=new Date,G=new Date(L.getFullYear(),L.getMonth(),L.getDate()),T=new Date(G);return T.setDate(G.getDate()-1),O>=T&&O<G},I=async k=>{k.streak&&(b(k.streak.lastUpdate)?k.streak.count+=1:k.streak.count=1,k.streak.lastUpdate=xn(),k.loginDate=xn(),await bn(De(ue,"users",k.uid),k))},R=async()=>{try{if(u.value="",l.value=!1,!_(r.value)){u.value="Invalid email format!",l.value=!0;return}if(a.value==="register"){const O=(await a1(ws,r.value,o.value)).user;i.value={uid:O.uid,email:O.email},h.value=!0}else{const O=(await l1(ws,r.value,o.value)).user,L=De(ue,"users",O.uid),G=await Er(L);if(G.exists()){const T=G.data();T&&(await I(T),t.setUserData(T),n.push({name:"Navigation"}))}}}catch(k){k.code==="auth/invalid-credential"?u.value="Invalid login details.":k.code==="auth/email-already-in-use"?u.value="Email already in use.":u.value="An unexpected error occurred.",l.value=!0}};return(k,O)=>(q(),J("div",hO,[C("div",dO,[O[4]||(O[4]=C("div",{class:"login_page_intro inter font_size_xs"},[C("div",{class:"login_page_intro_text"},[C("div",{class:"font_size_m licorice_regular"},"Welcome to Finding Your Fit"),C("br"),C("br"),ie(" A space designed to help you understand yourself better, build emotional balance, and grow into the life that fits you best. Take a moment to reconnect, reflect, and start working toward your goals  one step at a time. ")])],-1)),C("div",fO,[C("form",pO,[Mt(C("input",{class:"login_page_input inter font_size_xs",type:"text",placeholder:"Email","onUpdate:modelValue":O[0]||(O[0]=L=>r.value=L)},null,512),[[re,r.value]]),Mt(C("input",{class:"login_page_password inter font_size_xs",type:s.value,placeholder:"Password","onUpdate:modelValue":O[1]||(O[1]=L=>o.value=L)},null,8,gO),[[U0,o.value]]),C("div",mO,[C("label",null,[C("input",{type:"checkbox",onChange:f},null,32),O[3]||(O[3]=ie(" Show Password ",-1))])])]),C("button",{class:"login_page_button inter font_size_xs",onClick:R},yt(a.value==="login"?"Login":"Register"),1),C("div",{class:"login_page_forgot_password inter font_size_xs",onClick:y},yt(a.value==="login"?"Forgot Password?":""),1)]),C("div",_O,[C("u",{onClick:g},yt(a.value==="login"?"Register":"Login"),1)])]),l.value?(q(),Se(qr,{key:0,errorMessage:u.value,onClose:O[2]||(O[2]=L=>l.value=!1)},null,8,["errorMessage"])):de("",!0),h.value&&i.value?(q(),Se(uO,{key:1,globalUser:i.value},null,8,["globalUser"])):de("",!0)]))}},vO=qe(yO,[["__scopeId","data-v-0bd593e9"]]),Hm=[{content:"Success is not final, failure is not fatal: It is the courage to continue that counts.",author:"Winston Churchill"},{content:"The only way to do great work is to love what you do.",author:"Steve Jobs"},{content:"Don't watch the clock; do what it does. Keep going.",author:"Sam Levenson"},{content:"You are never too old to set another goal or to dream a new dream.",author:"C.S. Lewis"},{content:"Believe you can and you're halfway there.",author:"Theodore Roosevelt"},{content:"Your limitationits only your imagination.",author:"Unknown"},{content:"Push yourself, because no one else is going to do it for you.",author:"Unknown"},{content:"Great things never come from comfort zones.",author:"Unknown"},{content:"Dream it. Wish it. Do it.",author:"Unknown"},{content:"Success doesnt just find you. You have to go out and get it.",author:"Unknown"},{content:"The harder you work for something, the greater youll feel when you achieve it.",author:"Unknown"},{content:"Dont stop when youre tired. Stop when youre done.",author:"Unknown"},{content:"Wake up with determination. Go to bed with satisfaction.",author:"Unknown"},{content:"Do something today that your future self will thank you for.",author:"Unknown"},{content:"Little things make big days.",author:"Unknown"},{content:"Its going to be hard, but hard does not mean impossible.",author:"Unknown"},{content:"Dont wait for opportunity. Create it.",author:"Unknown"},{content:"Sometimes were tested not to show our weaknesses, but to discover our strengths.",author:"Unknown"},{content:"The key to success is to focus on goals, not obstacles.",author:"Unknown"},{content:"Dream bigger. Do bigger.",author:"Unknown"},{content:"Dont limit your challenges. Challenge your limits.",author:"Unknown"},{content:"What you get by achieving your goals is not as important as what you become by achieving your goals.",author:"Zig Ziglar"},{content:"Start where you are. Use what you have. Do what you can.",author:"Arthur Ashe"},{content:"The future depends on what you do today.",author:"Mahatma Gandhi"},{content:"Hustle in silence. Let your success make the noise.",author:"Unknown"},{content:"If you want to achieve greatness stop asking for permission.",author:"Unknown"},{content:"Opportunities dont happen. You create them.",author:"Chris Grosser"},{content:"Dont watch the clock; do what it does. Keep going.",author:"Sam Levenson"},{content:"Action is the foundational key to all success.",author:"Pablo Picasso"},{content:"The only limit to our realization of tomorrow is our doubts of today.",author:"Franklin D. Roosevelt"},{content:"Hardships often prepare ordinary people for an extraordinary destiny.",author:"C.S. Lewis"},{content:"Dont wait. The time will never be just right.",author:"Napoleon Hill"},{content:"Believe in yourself and all that you are.",author:"Christian D. Larson"},{content:"Fall seven times and stand up eight.",author:"Japanese Proverb"},{content:"Everything youve ever wanted is on the other side of fear.",author:"George Addair"},{content:"Success is what comes after you stop making excuses.",author:"Luis Galarza"},{content:"Your life does not get better by chance, it gets better by change.",author:"Jim Rohn"},{content:"Dont be pushed around by the fears in your mind. Be led by the dreams in your heart.",author:"Roy T. Bennett"},{content:"Doubt kills more dreams than failure ever will.",author:"Suzy Kassem"},{content:"The only way to achieve the impossible is to believe it is possible.",author:"Charles Kingsleigh"},{content:"Do what you can with all you have, wherever you are.",author:"Theodore Roosevelt"},{content:"Dreams dont work unless you do.",author:"John C. Maxwell"},{content:"Dont wait for the perfect moment. Take the moment and make it perfect.",author:"Unknown"},{content:"Work hard in silence. Let success be your noise.",author:"Frank Ocean"},{content:"Success is not in what you have, but who you are.",author:"Bo Bennett"},{content:"The secret of getting ahead is getting started.",author:"Mark Twain"},{content:"Your passion is waiting for your courage to catch up.",author:"Isabelle Lafleche"},{content:"Great things never come from comfort zones.",author:"Unknown"},{content:"Push yourself, because no one else is going to do it for you.",author:"Unknown"},{content:"Failure is the condiment that gives success its flavor.",author:"Truman Capote"},{content:"Dont quit. Suffer now and live the rest of your life as a champion.",author:"Muhammad Ali"},{content:"The harder you work for something, the greater youll feel when you achieve it.",author:"Unknown"},{content:"Do something today that your future self will thank you for.",author:"Sean Patrick Flanery"},{content:"Little by little, day by day, what is meant for you will find its way.",author:"Unknown"},{content:"You are capable of amazing things.",author:"Unknown"},{content:"Start each day with a positive thought and a grateful heart.",author:"Roy T. Bennett"},{content:"The way to get started is to quit talking and begin doing.",author:"Walt Disney"},{content:"Dont let yesterday take up too much of today.",author:"Will Rogers"},{content:"You dont have to be great to start, but you have to start to be great.",author:"Zig Ziglar"},{content:"Opportunities dont happen. You create them.",author:"Chris Grosser"},{content:"It always seems impossible until its done.",author:"Nelson Mandela"},{content:"Push yourself, because no one else is going to do it for you.",author:"Unknown"},{content:"Great things never come from comfort zones.",author:"Unknown"},{content:"Dream it. Wish it. Do it.",author:"Unknown"},{content:"Success doesnt just find you. You have to go out and get it.",author:"Unknown"},{content:"The harder you work for something, the greater youll feel when you achieve it.",author:"Unknown"},{content:"Dont stop when youre tired. Stop when youre done.",author:"Unknown"},{content:"Wake up with determination. Go to bed with satisfaction.",author:"Unknown"},{content:"Do something today that your future self will thank you for.",author:"Unknown"},{content:"Little things make big days.",author:"Unknown"},{content:"Its going to be hard, but hard does not mean impossible.",author:"Unknown"},{content:"Dont wait for opportunity. Create it.",author:"Unknown"},{content:"Sometimes were tested not to show our weaknesses, but to discover our strengths.",author:"Unknown"},{content:"The key to success is to focus on goals, not obstacles.",author:"Unknown"},{content:"Dream bigger. Do bigger.",author:"Unknown"},{content:"Dont limit your challenges. Challenge your limits.",author:"Unknown"},{content:"What you get by achieving your goals is not as important as what you become by achieving your goals.",author:"Zig Ziglar"},{content:"Start where you are. Use what you have. Do what you can.",author:"Arthur Ashe"},{content:"The future depends on what you do today.",author:"Mahatma Gandhi"},{content:"Hustle in silence. Let your success make the noise.",author:"Unknown"},{content:"If you want to achieve greatness stop asking for permission.",author:"Unknown"},{content:"Action is the foundational key to all success.",author:"Pablo Picasso"},{content:"Hardships often prepare ordinary people for an extraordinary destiny.",author:"C.S. Lewis"},{content:"Fall seven times and stand up eight.",author:"Japanese Proverb"},{content:"Everything youve ever wanted is on the other side of fear.",author:"George Addair"},{content:"Your life does not get better by chance, it gets better by change.",author:"Jim Rohn"},{content:"Dont be pushed around by the fears in your mind. Be led by the dreams in your heart.",author:"Roy T. Bennett"},{content:"Doubt kills more dreams than failure ever will.",author:"Suzy Kassem"},{content:"The only way to achieve the impossible is to believe it is possible.",author:"Charles Kingsleigh"},{content:"Do what you can with all you have, wherever you are.",author:"Theodore Roosevelt"},{content:"Dreams dont work unless you do.",author:"John C. Maxwell"},{content:"Dont wait for the perfect moment. Take the moment and make it perfect.",author:"Unknown"},{content:"Work hard in silence. Let success be your noise.",author:"Frank Ocean"},{content:"Success is not in what you have, but who you are.",author:"Bo Bennett"},{content:"The secret of getting ahead is getting started.",author:"Mark Twain"},{content:"Your passion is waiting for your courage to catch up.",author:"Isabelle Lafleche"},{content:"Great things never come from comfort zones.",author:"Unknown"},{content:"Push yourself, because no one else is going to do it for you.",author:"Unknown"},{content:"Failure is the condiment that gives success its flavor.",author:"Truman Capote"},{content:"Dont quit. Suffer now and live the rest of your life as a champion.",author:"Muhammad Ali"},{content:"The harder you work for something, the greater youll feel when you achieve it.",author:"Unknown"},{content:"Do something today that your future self will thank you for.",author:"Sean Patrick Flanery"},{content:"Little by little, day by day, what is meant for you will find its way.",author:"Unknown"},{content:"You are capable of amazing things.",author:"Unknown"},{content:"Start each day with a positive thought and a grateful heart.",author:"Roy T. Bennett"},{content:"The way to get started is to quit talking and begin doing.",author:"Walt Disney"},{content:"Dont let yesterday take up too much of today.",author:"Will Rogers"},{content:"You dont have to be great to start, but you have to start to be great.",author:"Zig Ziglar"},{content:"Opportunities dont happen. You create them.",author:"Chris Grosser"},{content:"It always seems impossible until its done.",author:"Nelson Mandela"},{content:"Do what you love, love what you do.",author:"Unknown"},{content:"Success is the sum of small efforts, repeated day in and day out.",author:"Robert Collier"},{content:"Motivation is what gets you started. Habit is what keeps you going.",author:"Jim Ryun"},{content:"Dont let fear decide your future.",author:"Shalane Flanagan"},{content:"You miss 100% of the shots you dont take.",author:"Wayne Gretzky"},{content:"Start where you are. Use what you have. Do what you can.",author:"Arthur Ashe"},{content:"Do one thing every day that scares you.",author:"Eleanor Roosevelt"},{content:"The best way to predict the future is to invent it.",author:"Alan Kay"},{content:"Difficult roads often lead to beautiful destinations.",author:"Unknown"},{content:"Believe in yourself, take on your challenges, dig deep within yourself to conquer fears.",author:"Chantal Sutherland"},{content:"If it doesnt challenge you, it wont change you.",author:"Fred DeVito"},{content:"It always seems impossible until its done.",author:"Nelson Mandela"},{content:"The expert in anything was once a beginner.",author:"Helen Hayes"},{content:"Dont count the days, make the days count.",author:"Muhammad Ali"},{content:"The harder the battle, the sweeter the victory.",author:"Les Brown"},{content:"Success is liking yourself, liking what you do, and liking how you do it.",author:"Maya Angelou"},{content:"You dont have to see the whole staircase, just take the first step.",author:"Martin Luther King Jr."},{content:"Small daily improvements over time lead to stunning results.",author:"Robin Sharma"},{content:"Dont let what you cannot do interfere with what you can do.",author:"John Wooden"},{content:"The only limit is the one you set yourself.",author:"Felix Baumgartner"},{content:"Great things are done by a series of small things brought together.",author:"Vincent Van Gogh"},{content:"Your dream doesnt have an expiration date. Take a deep breath and try again.",author:"KT Witten"},{content:"Action is the foundational key to all success.",author:"Pablo Picasso"},{content:"You are braver than you believe, stronger than you seem, and smarter than you think.",author:"A.A. Milne"},{content:"Work until you no longer have to introduce yourself.",author:"Unknown"},{content:"The best revenge is massive success.",author:"Frank Sinatra"},{content:"Your only limit is your mind.",author:"Unknown"},{content:"Stop being afraid of what could go wrong and start being excited about what could go right.",author:"Unknown"},{content:"Do not wait to strike till the iron is hot; but make it hot by striking.",author:"William Butler Yeats"},{content:"Dont let perfectionism get in the way of progress.",author:"Unknown"},{content:"Great minds discuss ideas; average minds discuss events; small minds discuss people.",author:"Eleanor Roosevelt"},{content:"Strive not to be a success, but rather to be of value.",author:"Albert Einstein"},{content:"Your passion is waiting for your courage to catch up.",author:"Isabelle Lafleche"},{content:"Do what you can, with what you have, where you are.",author:"Theodore Roosevelt"},{content:"Success is not about the destination, its about the journey.",author:"Zig Ziglar"},{content:"The key to success is to focus on goals, not obstacles.",author:"Unknown"},{content:"A year from now you may wish you had started today.",author:"Karen Lamb"},{content:"Dont stop until youre proud.",author:"Unknown"},{content:"Dream big. Start small. Act now.",author:"Robin Sharma"},{content:"Hard work beats talent when talent doesnt work hard.",author:"Tim Notke"},{content:"Stay positive, work hard, make it happen.",author:"Unknown"},{content:"Your time is limited, dont waste it living someone elses life.",author:"Steve Jobs"},{content:"The difference between ordinary and extraordinary is that little extra.",author:"Jimmy Johnson"},{content:"Dont let yesterday take up too much of today.",author:"Will Rogers"},{content:"Dont wait for opportunity. Create it.",author:"Unknown"},{content:"Success doesnt come to you, you go to it.",author:"Marva Collins"},{content:"A river cuts through rock not because of its power, but because of its persistence.",author:"Jim Watkins"},{content:"Discipline is the bridge between goals and accomplishment.",author:"Jim Rohn"},{content:"Do what is right, not what is easy nor what is popular.",author:"Unknown"},{content:"Be so good they cant ignore you.",author:"Steve Martin"},{content:"Dont limit yourself. Many people limit themselves to what they think they can do.",author:"Mary Kay Ash"},{content:"Your life does not get better by chance, it gets better by change.",author:"Jim Rohn"},{content:"Success is the progressive realization of a worthy goal or ideal.",author:"Earl Nightingale"},{content:"To succeed in life, you need two things: ignorance and confidence.",author:"Mark Twain"},{content:"Courage doesnt always roar. Sometimes courage is the quiet voice at the end of the day saying, I will try again tomorrow.",author:"Mary Anne Radmacher"},{content:"Start each day with a positive thought and a grateful heart.",author:"Roy T. Bennett"},{content:"Dont let small minds convince you that your dreams are too big.",author:"Unknown"},{content:"Success is no accident. It is hard work, perseverance, learning, studying, sacrifice and most of all, love of what you are doing.",author:"Pel"},{content:"The best way out is always through.",author:"Robert Frost"},{content:"Failure is simply the opportunity to begin again, this time more intelligently.",author:"Henry Ford"},{content:"Dont wish it were easier. Wish you were better.",author:"Jim Rohn"},{content:"The mind is everything. What you think you become.",author:"Buddha"},{content:"When you feel like quitting, remember why you started.",author:"Unknown"},{content:"Success usually comes to those who are too busy to be looking for it.",author:"Henry David Thoreau"},{content:"Dont be afraid to give up the good to go for the great.",author:"John D. Rockefeller"},{content:"Do not be embarrassed by your failures, learn from them and start again.",author:"Richard Branson"},{content:"Dont wait for the perfect moment. Take the moment and make it perfect.",author:"Unknown"},{content:"Small deeds done are better than great deeds planned.",author:"Peter Marshall"},{content:"Act as if what you do makes a difference. It does.",author:"William James"},{content:"Success is not how high you have climbed, but how you make a positive difference to the world.",author:"Roy T. Bennett"},{content:"Your future is created by what you do today, not tomorrow.",author:"Robert Kiyosaki"},{content:"The secret of success is to do the common thing uncommonly well.",author:"John D. Rockefeller Jr."},{content:"What seems to us as bitter trials are often blessings in disguise.",author:"Oscar Wilde"},{content:"The only place where success comes before work is in the dictionary.",author:"Vidal Sassoon"},{content:"Happiness is not something ready-made. It comes from your own actions.",author:"Dalai Lama"},{content:"Opportunities multiply as they are seized.",author:"Sun Tzu"},{content:"Do not go where the path may lead, go instead where there is no path and leave a trail.",author:"Ralph Waldo Emerson"},{content:"Success is liking yourself, liking what you do, and liking how you do it.",author:"Maya Angelou"},{content:"Be not afraid of life. Believe that life is worth living, and your belief will help create the fact.",author:"William James"},{content:"Dont be afraid to start over. Its a chance to build something better.",author:"Unknown"},{content:"Success isnt always about greatness. Its about consistency.",author:"Dwayne Johnson"},{content:"You are confined only by the walls you build yourself.",author:"Andrew Murphy"},{content:"The best time to plant a tree was 20 years ago. The second best time is now.",author:"Chinese Proverb"},{content:"Dreams dont work unless you do.",author:"John C. Maxwell"},{content:"Dont let the fear of losing be greater than the excitement of winning.",author:"Robert Kiyosaki"},{content:"You cant cross the sea merely by standing and staring at the water.",author:"Rabindranath Tagore"},{content:"Success is the sum of small efforts, repeated day in and day out.",author:"Robert Collier"},{content:"Be so good they cant ignore you.",author:"Steve Martin"},{content:"Your limitationits only your imagination.",author:"Unknown"},{content:"The journey of a thousand miles begins with one step.",author:"Lao Tzu"},{content:"Dont limit your challenges. Challenge your limits.",author:"Jerry Dunn"},{content:"Great things never come from comfort zones.",author:"Unknown"},{content:"Its not whether you get knocked down, its whether you get up.",author:"Vince Lombardi"},{content:"Everything you can imagine is real.",author:"Pablo Picasso"},{content:"Success is not in never falling, but in rising every time we fall.",author:"Confucius"},{content:"Dont wait for opportunity. Create it.",author:"George Bernard Shaw"},{content:"The best dreams happen when youre awake.",author:"Cherie Gilderbloom"},{content:"Do something today that your future self will thank you for.",author:"Sean Patrick Flanery"},{content:"What you do today can improve all your tomorrows.",author:"Ralph Marston"}];function bO(){const e=Math.floor(Math.random()*Hm.length);return Hm[e]}const wO="/assets/my_therapist-BGpDoE1u.png",EO="/assets/my_journal-ByAOnFF2.png",TO="/assets/journal-BcWmOkN8.png",IO="/assets/my_courses-DAreBNF0.png",AO="/assets/therapist-sZYqYBaF.png",SO="/assets/mood_track-DScXBvTj.png",RO={class:"home_container"},CO={class:"greeting_section licorice_regular font_size_m"},xO={class:"checkin_section"},PO={class:"feeling_section"},kO={class:"inspiration_section"},DO={class:"quote_text inter font_size_xxs"},OO={class:"offer_section"},MO={class:"offer_list"},NO={class:"offer_icon_wrapper"},VO={class:"offer_content_wrapper"},LO={class:"offer_title inter font_size_xxs"},FO={class:"offer_description inter font_size_xxs"},UO={__name:"home",setup(e){const t=rn(),n=Z({content:"",author:""});Z(!1);const s=Bt(()=>t.userData?.personalInfo.name||"");Bt(()=>[{label:"My Therapist",url:wO},{label:"Journal Entry",url:EO},{label:"Explore Courses",url:IO}]);const i=Bt(()=>[{label:"Expert support at your fingertips",content:"Find and connect with qualified therapists specializing in various areas.",icon:AO},{label:"Personalized mood tracking",content:"Log your daily mood to visualize trends, identify triggers, and gain insights.",icon:SO},{label:"Journaling",content:"A private space for self-reflection, prompts, and gain thoughts.",icon:TO}]);rs(()=>{console.log("Home mounted"),n.value=bO()});const r=()=>{const o=new Date().getHours();return o<12?"morning":o<18?"afternoon":"evening"};return(o,a)=>(q(),J("div",RO,[C("div",CO," Good "+yt(r())+", "+yt(s.value)+"! ",1),C("div",xO,[C("div",PO,[a[1]||(a[1]=C("div",{class:"feeling_heading inter font_size_xs"},[C("b",null,"How are you feeling today?")],-1)),a[2]||(a[2]=C("div",{class:"feeling_image"},null,-1)),C("div",{class:"checkin_button inter font_size_xxs",onClick:a[0]||(a[0]=l=>o.$emit("setPage","mood"))}," Check in now ")])]),C("div",kO,[a[3]||(a[3]=C("div",{class:"inspiration_heading inter font_size_xxs"},[C("b",null,"Inspiration")],-1)),C("div",DO,yt(n.value.content),1)]),C("div",OO,[a[4]||(a[4]=C("div",{class:"offer_heading inter font_size_xs"},[C("b",null,"What we offer")],-1)),C("div",MO,[(q(!0),J(Tt,null,te(i.value,l=>(q(),J("div",{class:"offer_card",key:l.label},[C("div",NO,[C("div",{class:"feature_icon",style:As({backgroundImage:`url(${l.icon})`,backgroundSize:"50% 80%",backgroundPosition:"center",backgroundRepeat:"no-repeat"})},null,4)]),C("div",VO,[C("div",LO,[C("b",null,yt(l.label),1)]),C("div",FO,yt(l.content),1)])]))),128))])])]))}},sE=qe(UO,[["__scopeId","data-v-b59b103f"]]),BO={class:"courses_selection_holder inter font_size_xs"},jO=["onClick"],zO={class:"inter course_selection_holder"},$O=["value"],HO={class:"courses_holder inter"},WO={key:0,class:"empty_courses_holder"},qO={key:0,class:"inter course_selection_holder"},GO={key:0,class:"discover_courses_holder"},KO={class:"courses_list"},YO={class:"course_days"},QO={class:"days_number"},XO={class:"course_info"},JO={class:"course_title"},ZO={class:"course_summary"},tM={key:1},eM={key:1,class:"add_courses_holder inter font_size_s"},nM={__name:"coursesPage",emits:["setPage"],setup(e,{emit:t}){Z("");const n=t,s=rn(),i=Z(!!s.userData.admin),r=Z(""),o=Z("myCourses");Z("saved");const a=[{key:"myCourses",label:"My Courses",cornerClass:"right-rounded"},{key:"discoverCourses",label:"Discover Courses",cornerClass:"left-rounded"}],l=b=>{o.value=b},u=b=>{n("setPage","createCourses")},h=Z([]),d=Z([]),f=Z(!1),g=Z(null),_=async()=>{f.value=!0;try{let b=null;if(r.value){const I=Jl(ue,"courses"),R=ZP(I,tk("courseTheme","==",r.value));b=await Fh(R)}else b=await Fh(Jl(ue,"courses"));h.value=b.docs.map(I=>({id:I.id,...I.data()})),console.log(h.value)}catch(b){g.value=b.message}finally{f.value=!1}};rs(_);const y=Z([{value:"depressed",text:"Depressed"},{value:"anxious",text:"Anxious"},{value:"stressed",text:"Stressed"},{value:"overwhelmed",text:"Overwhelmed"},{value:"self_esteem",text:"Self Esteem"},{value:"anger",text:"Anger"},{value:"fear",text:"Fear"},{value:"panic",text:"Panic"},{value:"lonely",text:"Lonely"},{value:"peace",text:"Peace"},{value:"stress",text:"Stress"},{value:"anger",text:"Anger"},{value:"patience",text:"Patience"},{value:"jealousy",text:"Jealousy"},{value:"doubt",text:"Doubt"}]);return(b,I)=>(q(),J(Tt,null,[I[6]||(I[6]=C("div",{class:"courses_header_holder inter font_size_xs"}," Courses ",-1)),C("div",BO,[(q(),J(Tt,null,te(a,R=>C("div",{key:R.key,class:En(["courses_selection",{active:o.value===R.key,[R.cornerClass]:!0}]),onClick:k=>l(R.key)},yt(R.label),11,jO)),64))]),I[7]||(I[7]=C("br",null,null,-1)),C("div",zO,[Mt(C("select",{class:"course_input inter font_size_xs","onUpdate:modelValue":I[0]||(I[0]=R=>r.value=R),onChange:I[1]||(I[1]=R=>_())},[I[2]||(I[2]=C("option",{disabled:"",value:""},"Please select a theme",-1)),(q(!0),J(Tt,null,te(y.value,R=>(q(),J("option",{key:R.value,value:R.value},yt(R.text),9,$O))),128))],544),[[qn,r.value]])]),C("div",HO,[d.value.length===0&&o.value==="myCourses"?(q(),J("div",WO," You don't have any courses linked to your profile. ")):de("",!0)]),o.value==="discoverCourses"?(q(),J("div",qO,[I[5]||(I[5]=C("br",null,null,-1)),h.value.length>0?(q(),J("div",GO,[C("div",KO,[(q(!0),J(Tt,null,te(h.value,R=>(q(),J("div",{key:R.id,class:"course_card"},[I[4]||(I[4]=C("div",{class:"course_image"},[C("div",{class:"image_placeholder"},"IMG")],-1)),C("div",YO,[C("div",QO,yt(R.days),1),I[3]||(I[3]=C("div",{class:"days_label"},"Days",-1))]),C("div",XO,[C("div",JO,yt(R.name),1),C("div",ZO,yt(R.summary),1)])]))),128))])])):(q(),J("div",tM," There are no courses linked to this theme. "))])):de("",!0),i.value?(q(),J("div",eM,[C("i",{class:"fas fa-plus",onClick:u})])):de("",!0)],64))}},iE=qe(nM,[["__scopeId","data-v-378af4b7"]]),sM={class:"course_page"},iM={class:"course_page_content"},rM={class:"course_page_form"},oM={class:"course_page_form_fields"},aM={class:"inter course_selection_holder"},lM=["value"],cM={class:"course_day_title inter font_size_xs"},uM=["onUpdate:modelValue"],hM=["onUpdate:modelValue"],dM=["disabled"],fM={class:"add_courses_holder inter font_size_s"},pM={__name:"createCourses",emits:["setPage"],setup(e,{emit:t}){const n=t;ya();const s=Z(""),i=Z(""),r=Z(1),o=Z(!1),a=Z([]),l=Z([{value:"depressed",text:"Depressed"},{value:"anxious",text:"Anxious"},{value:"stressed",text:"Stressed"},{value:"overwhelmed",text:"Overwhelmed"},{value:"self_esteem",text:"Self Esteem"},{value:"anger",text:"Anger"},{value:"fear",text:"Fear"},{value:"panic",text:"Panic"},{value:"lonely",text:"Lonely"},{value:"peace",text:"Peace"},{value:"stress",text:"Stress"},{value:"anger",text:"Anger"},{value:"patience",text:"Patience"},{value:"jealousy",text:"Jealousy"},{value:"doubt",text:"Doubt"}]),u=Z(""),h=()=>{a.value=Array.from({length:r.value},(g,_)=>({day:_+1,title:"",content:""}))};h();const d=async()=>{if(!(!s.value||!i.value)){o.value=!0;try{await sk(Jl(ue,"courses"),{name:s.value,summary:i.value,days:r.value,content:a.value,createdAt:xn(),courseTheme:u.value}),s.value="",i.value="",r.value=1,h()}catch(g){console.error(g)}finally{o.value=!1}}},f=g=>{n("setPage","courses")};return(g,_)=>(q(),J(Tt,null,[C("div",sM,[C("div",iM,[_[6]||(_[6]=C("div",{class:"course_page_intro inter font_size_xs"},[C("div",{class:"font_size_m licorice_regular"}," Create a New Course "),C("br"),ie(" Build a guided journey by adding daily reflections or lessons. ")],-1)),C("div",rM,[C("div",oM,[Mt(C("input",{class:"course_page_input inter font_size_xs",type:"text",placeholder:"Course name (e.g. Finding Peace Through Anxiety)","onUpdate:modelValue":_[0]||(_[0]=y=>s.value=y)},null,512),[[re,s.value]]),Mt(C("textarea",{class:"course_page_textarea inter font_size_xs",placeholder:"Course summary  what's this course about?","onUpdate:modelValue":_[1]||(_[1]=y=>i.value=y)},null,512),[[re,i.value]]),C("div",aM,[Mt(C("select",{class:"course_input inter font_size_xs","onUpdate:modelValue":_[2]||(_[2]=y=>u.value=y)},[_[5]||(_[5]=C("option",{disabled:"",value:""},"Please select a course theme",-1)),(q(!0),J(Tt,null,te(l.value,y=>(q(),J("option",{key:y.value,value:y.value},yt(y.text),9,lM))),128))],512),[[qn,u.value]])]),Mt(C("input",{class:"course_page_input inter font_size_xs",type:"number",min:"1",placeholder:"Number of days","onUpdate:modelValue":_[3]||(_[3]=y=>r.value=y),onChange:h},null,544),[[re,r.value,void 0,{number:!0}]]),(q(!0),J(Tt,null,te(a.value,(y,b)=>(q(),J("div",{key:b,class:"course_day_block"},[C("div",cM," Day "+yt(b+1),1),Mt(C("input",{class:"course_page_input inter font_size_xs",type:"text",placeholder:"Day title","onUpdate:modelValue":I=>y.title=I},null,8,uM),[[re,y.title]]),Mt(C("textarea",{class:"course_page_textarea inter font_size_xs",placeholder:"Day content","onUpdate:modelValue":I=>y.content=I},null,8,hM),[[re,y.content]])]))),128))]),C("button",{class:"course_page_button inter font_size_xs",onClick:d,disabled:o.value},yt(o.value?"Saving...":"Save Course"),9,dM)])])]),C("div",fM,[C("i",{class:"fas fa-times",onClick:_[4]||(_[4]=y=>f())})])],64))}},rE=qe(pM,[["__scopeId","data-v-b4599953"]]),gM={};function mM(e,t){return null}const _M=qe(gM,[["render",mM]]),yM={class:"loading_page_holder"},vM={__name:"loadingPage",setup(e){const t=rn(),n=ya();return rs(()=>{t.userData?.uid?n.push({name:"Navigation"}):n.push({name:"Login"})}),(s,i)=>(q(),J("div",yM))}},bM=qe(vM,[["__scopeId","data-v-5093d853"]]),wM={class:"modal_overlay",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},EM={class:"modal_holder"},TM={id:"modal-title",class:"modal_heading_holder inter font_size_xs"},IM={class:"modal_content_holder inter font_size_xs"},AM=["value"],SM=["value"],Hu="editProfileForm",RM={__name:"profileEdit",props:{globalUser:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=rn(),s=t,i=e,r=Z([]),o=Z(""),a=Z(""),l=Z(""),u=Z(""),h=Z(""),d=Z(""),f=Z(!1),g=[{value:"male",text:"Male"},{value:"female",text:"Female"},{value:"other",text:"Other"}];rs(async()=>{const k=await(await fetch("https://restcountries.com/v3.1/all?fields=name,cca3")).json();r.value=k.sort((L,G)=>L.name.common.localeCompare(G.name.common));const O=JSON.parse(localStorage.getItem(Hu));O&&(a.value=O.nameSurname||"",l.value=O.contactNumber||"",u.value=O.dateOfBirth||"",h.value=O.selectedOption||"",o.value=O.selectedCountry||"")}),Es([a,l,u,h,o],()=>{localStorage.setItem(Hu,JSON.stringify({nameSurname:a.value,contactNumber:l.value,dateOfBirth:u.value,selectedOption:h.value,selectedCountry:o.value}))},{deep:!0});function _(R){return/^\d{10}$/.test(R)}function y(R){if(!/^\d{4}\/\d{2}\/\d{2}$/.test(R))return!1;const[O,L,G]=R.split("/").map(Number),T=new Date(O,L-1,G);return T.getFullYear()===O&&T.getMonth()===L-1&&T.getDate()===G}const b=async()=>{const k=Xc().currentUser;if(f.value=!1,d.value="",!_(l.value)){d.value="Contact Number must be a valid 10-digit number.",f.value=!0;return}if(!y(u.value)){d.value="Date of Birth must be in the format yyyy/mm/dd.",f.value=!0;return}const O=i.globalUser.userData,L={personalInfo:{name:a.value,contactNumber:l.value,dateOfBirth:u.value,email:O.email||k.email,gender:h.value,country:o.value},uid:O.uid||k.uid,loginDate:O.loginDate,streak:O.streak,profileEdited:xn()};n.setUserData(L),await bn(De(ue,"users",L.uid),L),localStorage.removeItem(Hu),s("close")},I=()=>{f.value=!1,d.value=""};return(R,k)=>(q(),J("div",wM,[C("div",EM,[C("div",TM,[k[6]||(k[6]=C("span",{style:{width:"80%"}},"Edit User Information",-1)),C("button",{class:"modal_close_button",onClick:k[0]||(k[0]=O=>R.$emit("close"))},"")]),C("div",IM,[k[10]||(k[10]=C("div",{class:"modal_content_description"}," We collect your name, date of birth, and contact number to create your profile, personalize your therapy experience, and stay in touch for updates or support. Your information is kept secure and private at all times. ",-1)),C("form",{class:"modal_form_holder",onSubmit:pd(b,["prevent"])},[Mt(C("input",{class:"modal_input inter font_size_xs",type:"text",placeholder:"Name & Surname","onUpdate:modelValue":k[1]||(k[1]=O=>a.value=O),required:""},null,512),[[re,a.value]]),Mt(C("input",{class:"modal_input inter font_size_xs",type:"tel",placeholder:"Contact Number","onUpdate:modelValue":k[2]||(k[2]=O=>l.value=O),required:""},null,512),[[re,l.value]]),Mt(C("input",{class:"modal_input inter font_size_xs",type:"text",placeholder:"Date of Birth (yyyy/mm/dd)","onUpdate:modelValue":k[3]||(k[3]=O=>u.value=O),required:""},null,512),[[re,u.value]]),Mt(C("select",{class:"modal_input inter font_size_xs","onUpdate:modelValue":k[4]||(k[4]=O=>h.value=O)},[k[7]||(k[7]=C("option",{disabled:"",value:""},"Please select one",-1)),(q(),J(Tt,null,te(g,O=>C("option",{key:O.value,value:O.value},yt(O.text),9,AM)),64))],512),[[qn,h.value]]),Mt(C("select",{class:"modal_input inter font_size_xs","onUpdate:modelValue":k[5]||(k[5]=O=>o.value=O)},[k[8]||(k[8]=C("option",{disabled:"",value:""},"Select your country",-1)),(q(!0),J(Tt,null,te(r.value,O=>(q(),J("option",{key:O.cca3,value:O.cca3},yt(O.name.common),9,SM))),128))],512),[[qn,o.value]]),k[9]||(k[9]=C("button",{type:"submit",class:"modal_button inter font_size_xs"},"Confirm",-1))],32)])]),f.value?(q(),Se(qr,{key:0,errorMessage:d.value,onClose:I},null,8,["errorMessage"])):de("",!0)]))}},Wm=qe(RM,[["__scopeId","data-v-f21fc2c6"]]),oE="/assets/brown_man-DU8HBBmE.png",aE="/assets/blonde_man-Br_WNAu2.png",lE="/assets/ginger_man-D_7vVZja.png",cE="/assets/black_man-DZoPS0-N.png",uE="/assets/brunette_woman-C5YdWLXO.png",hE="/assets/blonde_woman-IP-2iqnM.png",dE="/assets/ginger_woman-5AupqmXa.png",fE="/assets/black_woman-QP95zNq-.png",zh="/assets/none-BOBk4slU.png",CM={class:"modal_overlay",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},xM={class:"modal_holder"},PM={id:"modal-title",class:"modal_heading_holder inter font_size_xs"},kM={class:"modal_content_holder inter font_size_xs"},DM=["onClick"],OM=["onClick"],MM={__name:"profileAvatar",props:{globalUser:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=rn(),s=Bt(()=>[{label:"Brown Hair",url:oE,ref:"brown_man"},{label:"Blonde Hair",url:aE,ref:"blonde_man"},{label:"Ginger Hair",url:lE,ref:"ginger_man"},{label:"Black Hair",url:cE,ref:"black_man"},{label:"Brown Hair Woman",url:uE,ref:"brown_woman"},{label:"Blonde Hair Woman",url:hE,ref:"blonde_woman"},{label:"Ginger Hair Woman",url:dE,ref:"ginger_woman"},{label:"Black Hair Woman",url:fE,ref:"black_woman"},{label:"None",url:zh,ref:"none"}]),i=t,r=e,o=Z("none"),a=u=>{o.value=u,localStorage.setItem("selectedAvatar",u)};rs(()=>{const u=localStorage.getItem("selectedAvatar");u&&(o.value=u)});const l=async()=>{const u=Xc(),h=r.globalUser.userData,d=u.currentUser;await bn(De(ue,"users",h.uid||d.uid),{profileAvatar:o.value,profileEdited:xn()},{merge:!0}),n.userData.profileAvatar=o.value,localStorage.removeItem("selectedAvatar"),i("close")};return(u,h)=>(q(),J("div",CM,[C("div",xM,[C("div",PM,[h[1]||(h[1]=C("span",{style:{width:"80%"}},"Profile Avatar",-1)),C("button",{class:"modal_close_button",onClick:h[0]||(h[0]=d=>u.$emit("close"))},"")]),C("div",kM,[(q(!0),J(Tt,null,te(s.value,d=>(q(),J("div",{class:"modal_avatars_holder",key:d.ref},[d.ref===o.value?(q(),J("div",{key:0,class:"modal_avatar_selected",onClick:f=>a(d.ref),style:As({backgroundImage:`url(${d.url})`,backgroundSize:"100% 100%",backgroundPosition:"center center",backgroundRepeat:"no-repeat"})},null,12,DM)):(q(),J("div",{key:1,class:"modal_avatar",onClick:f=>a(d.ref),style:As({backgroundImage:`url(${d.url})`,backgroundSize:"100% 100%",backgroundPosition:"center center",backgroundRepeat:"no-repeat"})},null,12,OM))]))),128))]),C("button",{type:"submit",class:"modal_button inter font_size_xs",onClick:l}," Confirm ")])]))}},qm=qe(MM,[["__scopeId","data-v-f54a08c5"]]),NM={class:"profile_container"},VM={class:"profile_header"},LM={class:"profile_edit_btn"},FM={class:"profile_info"},UM={class:"profile_avatar_wrapper"},BM={class:"pfp_edit_button"},jM={class:"profile_user_details font_size_s inter"},zM={class:"font_size_xxs"},$M={class:"profile_stats"},HM=["onClick"],WM={class:"profile_stat_top inter font_size_xs"},qM={key:0,class:"profile_stat_value"},GM={key:0},KM={key:1},YM={key:1,class:"profile_stat_value"},QM={class:"profile_stat_icon"},XM={class:"profile_stat_label inter font_size_xs"},JM={__name:"profile",emits:["setPage"],setup(e,{emit:t}){const n=t,s=ya(),i=rn();i.fetchUserData();const r=Z(!1),o=Z(!1),a=Z(!1),l=Z(null),u={brown_man:oE,blonde_man:aE,ginger_man:lE,black_man:cE,brown_woman:uE,blonde_woman:hE,ginger_woman:dE,black_woman:fE,none:zh},h=Bt(()=>{const T=i.userData?.profileAvatar||"none";return u[T]||zh}),d=Bt(()=>i.userData?.personalInfo.name||""),f=Bt(()=>i.userData?.personalInfo.email||""),g=Bt(()=>i.userData?.streak?.count||0),_=Bt(()=>i.userData?.subscription||"Free"),y=Bt(()=>i.journalData&&i.journalData.length||0),b=Bt(()=>[{label:"Very Sad",ref:"very_sad",icon:"far fa-sad-tear"},{label:"Sad",ref:"sad",icon:"far fa-frown"},{label:"Neutral",ref:"neutral",icon:"far fa-meh"},{label:"Happy",ref:"happy",icon:"far fa-grin"},{label:"Very Happy",ref:"very_happy",icon:"far fa-grin-beam"}]),I=Z([{label:"App Streak",value:g.value,icon:"fa fa-signal"},{label:"Journal Entries",value:y.value,icon:"fa fa-book"},{label:"Mood Overview",value:"",icon:"fas fa-chart-line"},{label:"Subscription",value:_,icon:"fas fa-money-bill-wave"}]);rs(()=>{l.value=i.userData;const T=new Date().toISOString().split("T")[0];if(!i.moodData||!i.moodData[T])return;r.value=!0;const v=i.moodData[T];for(const E of b.value)if(E.ref===v.mood){I.value[2].value=E.icon;break}});const R=()=>{o.value=!0},k=async()=>{await h1(ws),s.push({name:"Login"})},O=()=>{a.value=!0},L=T=>{console.log("Image selected:",T.target.files[0])},G=T=>{console.log(T),T.label=="Mood Overview"?n("setPage","moodTrends"):T.label==="Journal Entries"&&n("setPage","journal")};return(T,v)=>(q(),J(Tt,null,[C("div",NM,[C("div",VM,[v[5]||(v[5]=C("div",{class:"profile_title font_size_s inter"},null,-1)),C("div",LM,[C("i",{class:"fas fa-edit",onClick:v[0]||(v[0]=E=>R())}),C("i",{class:"fas fa-sign-out-alt",onClick:v[1]||(v[1]=E=>k())})])]),C("div",FM,[C("div",UM,[C("div",{class:"profile_avatar",style:As({backgroundImage:`url(${h.value})`,backgroundSize:"100% 100%",backgroundPosition:"center center",backgroundRepeat:"no-repeat"})},null,4)]),C("div",BM,[C("i",{class:"fas fa-edit",onClick:v[2]||(v[2]=E=>O())}),C("input",{type:"file",ref:"fileInput",style:{display:"none"},accept:"image/*",onChange:L},null,544)]),C("div",jM,[ie(yt(d.value)+" ",1),C("span",zM,yt(f.value),1)])]),C("div",$M,[(q(!0),J(Tt,null,te(I.value,(E,x)=>(q(),J("div",{class:"profile_stat_card",key:x,onClick:P=>G(E)},[C("div",WM,[E.label==="Mood Overview"?(q(),J("div",qM,[r.value?(q(),J("div",GM,[C("i",{class:En(E.value),style:{"font-size":"1.5rem"}},null,2),v[6]||(v[6]=ie(" ",-1))])):(q(),J("div",KM,[...v[7]||(v[7]=[C("i",{class:"far fa-meh",style:{"font-size":"1.5rem"}},null,-1),ie(" ",-1)])]))])):(q(),J("div",YM,yt(E.value),1)),C("div",QM,[C("i",{class:En(E.icon),style:{color:"#87bfba"}},null,2)])]),C("div",XM,yt(E.label),1)],8,HM))),128))])]),o.value?(q(),Se(Wm,{key:0,onClose:v[3]||(v[3]=E=>o.value=!1),globalUser:Wn(i),viewPoint:Wm},null,8,["globalUser"])):de("",!0),a.value?(q(),Se(qm,{key:1,onClose:v[4]||(v[4]=E=>a.value=!1),globalUser:Wn(i),viewPoint:qm},null,8,["globalUser"])):de("",!0)],64))}},pE=qe(JM,[["__scopeId","data-v-70a449e8"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Da(e){return e+.5|0}const Js=(e,t,n)=>Math.max(Math.min(e,n),t);function Ao(e){return Js(Da(e*2.55),0,255)}function ai(e){return Js(Da(e*255),0,255)}function ps(e){return Js(Da(e/2.55)/100,0,1)}function Gm(e){return Js(Da(e*100),0,100)}const pn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},$h=[..."0123456789ABCDEF"],ZM=e=>$h[e&15],tN=e=>$h[(e&240)>>4]+$h[e&15],el=e=>(e&240)>>4===(e&15),eN=e=>el(e.r)&&el(e.g)&&el(e.b)&&el(e.a);function nN(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&pn[e[1]]*17,g:255&pn[e[2]]*17,b:255&pn[e[3]]*17,a:t===5?pn[e[4]]*17:255}:(t===7||t===9)&&(n={r:pn[e[1]]<<4|pn[e[2]],g:pn[e[3]]<<4|pn[e[4]],b:pn[e[5]]<<4|pn[e[6]],a:t===9?pn[e[7]]<<4|pn[e[8]]:255})),n}const sN=(e,t)=>e<255?t(e):"";function iN(e){var t=eN(e)?ZM:tN;return e?"#"+t(e.r)+t(e.g)+t(e.b)+sN(e.a,t):void 0}const rN=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function gE(e,t,n){const s=t*Math.min(n,1-n),i=(r,o=(r+e/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function oN(e,t,n){const s=(i,r=(i+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function aN(e,t,n){const s=gE(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)s[i]*=1-t-n,s[i]+=t;return s}function lN(e,t,n,s,i){return e===i?(t-n)/s+(t<n?6:0):t===i?(n-e)/s+2:(e-t)/s+4}function df(e){const n=e.r/255,s=e.g/255,i=e.b/255,r=Math.max(n,s,i),o=Math.min(n,s,i),a=(r+o)/2;let l,u,h;return r!==o&&(h=r-o,u=a>.5?h/(2-r-o):h/(r+o),l=lN(n,s,i,h,r),l=l*60+.5),[l|0,u||0,a]}function ff(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(ai)}function pf(e,t,n){return ff(gE,e,t,n)}function cN(e,t,n){return ff(aN,e,t,n)}function uN(e,t,n){return ff(oN,e,t,n)}function mE(e){return(e%360+360)%360}function hN(e){const t=rN.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?Ao(+t[5]):ai(+t[5]));const i=mE(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=cN(i,r,o):t[1]==="hsv"?s=uN(i,r,o):s=pf(i,r,o),{r:s[0],g:s[1],b:s[2],a:n}}function dN(e,t){var n=df(e);n[0]=mE(n[0]+t),n=pf(n),e.r=n[0],e.g=n[1],e.b=n[2]}function fN(e){if(!e)return;const t=df(e),n=t[0],s=Gm(t[1]),i=Gm(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${i}%, ${ps(e.a)})`:`hsl(${n}, ${s}%, ${i}%)`}const Km={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ym={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function pN(){const e={},t=Object.keys(Ym),n=Object.keys(Km);let s,i,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],i=0;i<n.length;i++)r=n[i],a=a.replace(r,Km[r]);r=parseInt(Ym[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let nl;function gN(e){nl||(nl=pN(),nl.transparent=[0,0,0,0]);const t=nl[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const mN=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function _N(e){const t=mN.exec(e);let n=255,s,i,r;if(t){if(t[7]!==s){const o=+t[7];n=t[8]?Ao(o):Js(o*255,0,255)}return s=+t[1],i=+t[3],r=+t[5],s=255&(t[2]?Ao(s):Js(s,0,255)),i=255&(t[4]?Ao(i):Js(i,0,255)),r=255&(t[6]?Ao(r):Js(r,0,255)),{r:s,g:i,b:r,a:n}}}function yN(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${ps(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Wu=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,lr=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function vN(e,t,n){const s=lr(ps(e.r)),i=lr(ps(e.g)),r=lr(ps(e.b));return{r:ai(Wu(s+n*(lr(ps(t.r))-s))),g:ai(Wu(i+n*(lr(ps(t.g))-i))),b:ai(Wu(r+n*(lr(ps(t.b))-r))),a:e.a+n*(t.a-e.a)}}function sl(e,t,n){if(e){let s=df(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=pf(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function _E(e,t){return e&&Object.assign(t||{},e)}function Qm(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=ai(e[3]))):(t=_E(e,{r:0,g:0,b:0,a:1}),t.a=ai(t.a)),t}function bN(e){return e.charAt(0)==="r"?_N(e):hN(e)}class ua{constructor(t){if(t instanceof ua)return t;const n=typeof t;let s;n==="object"?s=Qm(t):n==="string"&&(s=nN(t)||gN(t)||bN(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=_E(this._rgb);return t&&(t.a=ps(t.a)),t}set rgb(t){this._rgb=Qm(t)}rgbString(){return this._valid?yN(this._rgb):void 0}hexString(){return this._valid?iN(this._rgb):void 0}hslString(){return this._valid?fN(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,i=t.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=s.a-i.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-u,s.r=255&u*s.r+r*i.r+.5,s.g=255&u*s.g+r*i.g+.5,s.b=255&u*s.b+r*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=vN(this._rgb,t._rgb,n)),this}clone(){return new ua(this.rgb)}alpha(t){return this._rgb.a=ai(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Da(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return sl(this._rgb,2,t),this}darken(t){return sl(this._rgb,2,-t),this}saturate(t){return sl(this._rgb,1,t),this}desaturate(t){return sl(this._rgb,1,-t),this}rotate(t){return dN(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function us(){}const wN=(()=>{let e=0;return()=>e++})();function $e(e){return e==null}function Oe(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ot(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Ds(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Ln(e,t){return Ds(e)?e:t}function jt(e,t){return typeof e>"u"?t:e}const EN=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,yE=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Yt(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Ut(e,t,n,s){let i,r,o;if(Oe(e))for(r=e.length,i=0;i<r;i++)t.call(n,e[i],i);else if(Ot(e))for(o=Object.keys(e),r=o.length,i=0;i<r;i++)t.call(n,e[o[i]],o[i])}function cc(e,t){let n,s,i,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(i=e[n],r=t[n],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function uc(e){if(Oe(e))return e.map(uc);if(Ot(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let i=0;for(;i<s;++i)t[n[i]]=uc(e[n[i]]);return t}return e}function vE(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function TN(e,t,n,s){if(!vE(e))return;const i=t[e],r=n[e];Ot(i)&&Ot(r)?ha(i,r,s):t[e]=uc(r)}function ha(e,t,n){const s=Oe(t)?t:[t],i=s.length;if(!Ot(e))return e;n=n||{};const r=n.merger||TN;let o;for(let a=0;a<i;++a){if(o=s[a],!Ot(o))continue;const l=Object.keys(o);for(let u=0,h=l.length;u<h;++u)r(l[u],e,o,n)}return e}function Ho(e,t){return ha(e,t,{merger:IN})}function IN(e,t,n){if(!vE(e))return;const s=t[e],i=n[e];Ot(s)&&Ot(i)?Ho(s,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=uc(i))}const Xm={"":e=>e,x:e=>e.x,y:e=>e.y};function AN(e){const t=e.split("."),n=[];let s="";for(const i of t)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function SN(e){const t=AN(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function da(e,t){return(Xm[t]||(Xm[t]=SN(t)))(e)}function gf(e){return e.charAt(0).toUpperCase()+e.slice(1)}const hc=e=>typeof e<"u",vi=e=>typeof e=="function",Jm=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function RN(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Xt=Math.PI,ge=2*Xt,dc=Number.POSITIVE_INFINITY,CN=Xt/180,be=Xt/2,Ci=Xt/4,Zm=Xt*2/3,t_=Math.sign;function xN(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((i,r)=>i-r).pop(),t}function PN(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function fc(e){return!PN(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Vi(e){return e*(Xt/180)}function kN(e){return e*(180/Xt)}function bE(e,t){const n=t.x-e.x,s=t.y-e.y,i=Math.sqrt(n*n+s*s);let r=Math.atan2(s,n);return r<-.5*Xt&&(r+=ge),{angle:r,distance:i}}function DN(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function zn(e){return(e%ge+ge)%ge}function pc(e,t,n,s){const i=zn(e),r=zn(t),o=zn(n),a=zn(r-i),l=zn(o-i),u=zn(i-r),h=zn(i-o);return i===r||i===o||s&&r===o||a>l&&u<h}function _n(e,t,n){return Math.max(t,Math.min(n,e))}function ON(e){return _n(e,-32768,32767)}function So(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function mf(e,t,n){n=n||(o=>e[o]<t);let s=e.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,n(r)?i=r:s=r;return{lo:i,hi:s}}const Hh=(e,t,n,s)=>mf(e,n,s?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),MN=(e,t,n)=>mf(e,n,s=>e[s][t]>=n);function NN(e,t,n){let s=0,i=e.length;for(;s<i&&e[s]<t;)s++;for(;i>s&&e[i-1]>n;)i--;return s>0||i<e.length?e.slice(s,i):e}const wE=["push","pop","shift","splice","unshift"];function VN(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),wE.forEach(n=>{const s="_onData"+gf(n),i=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function e_(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,i=s.indexOf(t);i!==-1&&s.splice(i,1),!(s.length>0)&&(wE.forEach(r=>{delete e[r]}),delete e._chartjs)}function LN(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const EE=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function TE(e,t){let n=[],s=!1;return function(...i){n=i,s||(s=!0,EE.call(window,()=>{s=!1,e.apply(t,n)}))}}function FN(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const IE=e=>e==="start"?"left":e==="end"?"right":"center",un=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,UN=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t,il=e=>e===0||e===1,n_=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*ge/n)),s_=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*ge/n)+1,Wo={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*be)+1,easeOutSine:e=>Math.sin(e*be),easeInOutSine:e=>-.5*(Math.cos(Xt*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>il(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>il(e)?e:n_(e,.075,.3),easeOutElastic:e=>il(e)?e:s_(e,.075,.3),easeInOutElastic(e){return il(e)?e:e<.5?.5*n_(e*2,.1125,.45):.5+.5*s_(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Wo.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Wo.easeInBounce(e*2)*.5:Wo.easeOutBounce(e*2-1)*.5+.5};function AE(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function i_(e){return AE(e)?e:new ua(e)}function qu(e){return AE(e)?e:new ua(e).saturate(.5).darken(.1).hexString()}const BN=["x","y","borderWidth","radius","tension"],jN=["color","borderColor","backgroundColor"];function zN(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:jN},numbers:{type:"number",properties:BN}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function $N(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const r_=new Map;function HN(e,t){t=t||{};const n=e+JSON.stringify(t);let s=r_.get(n);return s||(s=new Intl.NumberFormat(e,t),r_.set(n,s)),s}function WN(e,t,n){return HN(t,n).format(e)}const qN={values(e){return Oe(e)?e:""+e}};var GN={formatters:qN};function KN(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:GN.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Ki=Object.create(null),Wh=Object.create(null);function qo(e,t){if(!t)return e;const n=t.split(".");for(let s=0,i=n.length;s<i;++s){const r=n[s];e=e[r]||(e[r]=Object.create(null))}return e}function Gu(e,t,n){return typeof t=="string"?ha(qo(e,t),n):ha(qo(e,""),t)}class YN{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>qu(i.backgroundColor),this.hoverBorderColor=(s,i)=>qu(i.borderColor),this.hoverColor=(s,i)=>qu(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return Gu(this,t,n)}get(t){return qo(this,t)}describe(t,n){return Gu(Wh,t,n)}override(t,n){return Gu(Ki,t,n)}route(t,n,s,i){const r=qo(this,t),o=qo(this,s),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=o[i];return Ot(l)?Object.assign({},u,l):jt(l,u)},set(l){this[a]=l}}})}apply(t){t.forEach(n=>n(this))}}var ae=new YN({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[zN,$N,KN]);function QN(e){return!e||$e(e.size)||$e(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function o_(e,t,n,s,i){let r=t[i];return r||(r=t[i]=e.measureText(i).width,n.push(i)),r>s&&(s=r),s}function xi(e,t,n){const s=e.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((t-i)*s)/s+i}function a_(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function l_(e,t,n,s){SE(e,t,n,s,null)}function SE(e,t,n,s,i){let r,o,a,l,u,h,d,f;const g=t.pointStyle,_=t.rotation,y=t.radius;let b=(_||0)*CN;if(g&&typeof g=="object"&&(r=g.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(b),e.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),e.restore();return}if(!(isNaN(y)||y<=0)){switch(e.beginPath(),g){default:i?e.ellipse(n,s,i/2,y,0,0,ge):e.arc(n,s,y,0,ge),e.closePath();break;case"triangle":h=i?i/2:y,e.moveTo(n+Math.sin(b)*h,s-Math.cos(b)*y),b+=Zm,e.lineTo(n+Math.sin(b)*h,s-Math.cos(b)*y),b+=Zm,e.lineTo(n+Math.sin(b)*h,s-Math.cos(b)*y),e.closePath();break;case"rectRounded":u=y*.516,l=y-u,o=Math.cos(b+Ci)*l,d=Math.cos(b+Ci)*(i?i/2-u:l),a=Math.sin(b+Ci)*l,f=Math.sin(b+Ci)*(i?i/2-u:l),e.arc(n-d,s-a,u,b-Xt,b-be),e.arc(n+f,s-o,u,b-be,b),e.arc(n+d,s+a,u,b,b+be),e.arc(n-f,s+o,u,b+be,b+Xt),e.closePath();break;case"rect":if(!_){l=Math.SQRT1_2*y,h=i?i/2:l,e.rect(n-h,s-l,2*h,2*l);break}b+=Ci;case"rectRot":d=Math.cos(b)*(i?i/2:y),o=Math.cos(b)*y,a=Math.sin(b)*y,f=Math.sin(b)*(i?i/2:y),e.moveTo(n-d,s-a),e.lineTo(n+f,s-o),e.lineTo(n+d,s+a),e.lineTo(n-f,s+o),e.closePath();break;case"crossRot":b+=Ci;case"cross":d=Math.cos(b)*(i?i/2:y),o=Math.cos(b)*y,a=Math.sin(b)*y,f=Math.sin(b)*(i?i/2:y),e.moveTo(n-d,s-a),e.lineTo(n+d,s+a),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o);break;case"star":d=Math.cos(b)*(i?i/2:y),o=Math.cos(b)*y,a=Math.sin(b)*y,f=Math.sin(b)*(i?i/2:y),e.moveTo(n-d,s-a),e.lineTo(n+d,s+a),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o),b+=Ci,d=Math.cos(b)*(i?i/2:y),o=Math.cos(b)*y,a=Math.sin(b)*y,f=Math.sin(b)*(i?i/2:y),e.moveTo(n-d,s-a),e.lineTo(n+d,s+a),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o);break;case"line":o=i?i/2:Math.cos(b)*y,a=Math.sin(b)*y,e.moveTo(n-o,s-a),e.lineTo(n+o,s+a);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(b)*(i?i/2:y),s+Math.sin(b)*y);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function RE(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function _f(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function yf(e){e.restore()}function XN(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),$e(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function JN(e,t,n,s,i){if(i.strikethrough||i.underline){const r=e.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,u=n+r.actualBoundingBoxDescent,h=i.strikethrough?(l+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,h),e.lineTo(a,h),e.stroke()}}function ZN(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function gc(e,t,n,s,i,r={}){const o=Oe(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,u;for(e.save(),e.font=i.string,XN(e,r),l=0;l<o.length;++l)u=o[l],r.backdrop&&ZN(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),$e(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(u,n,s,r.maxWidth)),e.fillText(u,n,s,r.maxWidth),JN(e,n,s,u,r),s+=Number(i.lineHeight);e.restore()}function qh(e,t){const{x:n,y:s,w:i,h:r,radius:o}=t;e.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*Xt,Xt,!0),e.lineTo(n,s+r-o.bottomLeft),e.arc(n+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,Xt,be,!0),e.lineTo(n+i-o.bottomRight,s+r),e.arc(n+i-o.bottomRight,s+r-o.bottomRight,o.bottomRight,be,0,!0),e.lineTo(n+i,s+o.topRight),e.arc(n+i-o.topRight,s+o.topRight,o.topRight,0,-be,!0),e.lineTo(n+o.topLeft,s)}const tV=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,eV=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function nV(e,t){const n=(""+e).match(tV);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const sV=e=>+e||0;function vf(e,t){const n={},s=Ot(t),i=s?Object.keys(t):t,r=Ot(e)?s?o=>jt(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of i)n[o]=sV(r(o));return n}function iV(e){return vf(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Go(e){return vf(e,["topLeft","topRight","bottomLeft","bottomRight"])}function On(e){const t=iV(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function sn(e,t){e=e||{},t=t||ae.font;let n=jt(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=jt(e.style,t.style);s&&!(""+s).match(eV)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:jt(e.family,t.family),lineHeight:nV(jt(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:jt(e.weight,t.weight),string:""};return i.string=QN(i),i}function rl(e,t,n,s){let i,r,o;for(i=0,r=e.length;i<r;++i)if(o=e[i],o!==void 0&&o!==void 0)return o}function rV(e,t,n){const{min:s,max:i}=e,r=yE(t,(i-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(i,r)}}function Gr(e,t){return Object.assign(Object.create(e),t)}function bf(e,t=[""],n,s,i=()=>e[0]){const r=n||e;typeof s>"u"&&(s=kE("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:s,_getTarget:i,override:a=>bf([a,...e],t,r,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return xE(a,l,()=>fV(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return u_(a).includes(l)},ownKeys(a){return u_(a)},set(a,l,u){const h=a._storage||(a._storage=i());return a[l]=h[l]=u,delete a._keys,!0}})}function Lr(e,t,n,s){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:CE(e,s),setContext:r=>Lr(e,r,n,s),override:r=>Lr(e.override(r),t,n,s)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return xE(r,o,()=>aV(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function CE(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:s,isScriptable:vi(n)?n:()=>n,isIndexable:vi(s)?s:()=>s}}const oV=(e,t)=>e?e+gf(t):t,wf=(e,t)=>Ot(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function xE(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=n();return e[t]=s,s}function aV(e,t,n){const{_proxy:s,_context:i,_subProxy:r,_descriptors:o}=e;let a=s[t];return vi(a)&&o.isScriptable(t)&&(a=lV(t,a,e,n)),Oe(a)&&a.length&&(a=cV(t,a,e,o.isIndexable)),wf(t,a)&&(a=Lr(a,i,r&&r[t],o)),a}function lV(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||s);return a.delete(e),wf(e,l)&&(l=Ef(i._scopes,i,e,l)),l}function cV(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&s(e))return t[r.index%t.length];if(Ot(t[0])){const l=t,u=i._scopes.filter(h=>h!==l);t=[];for(const h of l){const d=Ef(u,i,e,h);t.push(Lr(d,r,o&&o[e],a))}}return t}function PE(e,t,n){return vi(e)?e(t,n):e}const uV=(e,t)=>e===!0?t:typeof e=="string"?da(t,e):void 0;function hV(e,t,n,s,i){for(const r of t){const o=uV(n,r);if(o){e.add(o);const a=PE(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function Ef(e,t,n,s){const i=t._rootScopes,r=PE(t._fallback,n,s),o=[...e,...i],a=new Set;a.add(s);let l=c_(a,o,n,r||n,s);return l===null||typeof r<"u"&&r!==n&&(l=c_(a,o,r,l,s),l===null)?!1:bf(Array.from(a),[""],i,r,()=>dV(t,n,s))}function c_(e,t,n,s,i){for(;n;)n=hV(e,t,n,s,i);return n}function dV(e,t,n){const s=e._getTarget();t in s||(s[t]={});const i=s[t];return Oe(i)&&Ot(n)?n:i||{}}function fV(e,t,n,s){let i;for(const r of t)if(i=kE(oV(r,e),n),typeof i<"u")return wf(e,i)?Ef(n,s,e,i):i}function kE(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function u_(e){let t=e._keys;return t||(t=e._keys=pV(e._scopes)),t}function pV(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(i=>!i.startsWith("_")))t.add(s);return Array.from(t)}function Tf(){return typeof window<"u"&&typeof document<"u"}function If(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function mc(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const Jc=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function gV(e,t){return Jc(e).getPropertyValue(t)}const mV=["top","right","bottom","left"];function Bi(e,t,n){const s={};n=n?"-"+n:"";for(let i=0;i<4;i++){const r=mV[i];s[r]=parseFloat(e[t+"-"+r+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const _V=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function yV(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:i,offsetY:r}=s;let o=!1,a,l;if(_V(i,r,e.target))a=i,l=r;else{const u=t.getBoundingClientRect();a=s.clientX-u.left,l=s.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function Oi(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,i=Jc(n),r=i.boxSizing==="border-box",o=Bi(i,"padding"),a=Bi(i,"border","width"),{x:l,y:u,box:h}=yV(e,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:g,height:_}=t;return r&&(g-=o.width+a.width,_-=o.height+a.height),{x:Math.round((l-d)/g*n.width/s),y:Math.round((u-f)/_*n.height/s)}}function vV(e,t,n){let s,i;if(t===void 0||n===void 0){const r=e&&If(e);if(!r)t=e.clientWidth,n=e.clientHeight;else{const o=r.getBoundingClientRect(),a=Jc(r),l=Bi(a,"border","width"),u=Bi(a,"padding");t=o.width-u.width-l.width,n=o.height-u.height-l.height,s=mc(a.maxWidth,r,"clientWidth"),i=mc(a.maxHeight,r,"clientHeight")}}return{width:t,height:n,maxWidth:s||dc,maxHeight:i||dc}}const Zs=e=>Math.round(e*10)/10;function bV(e,t,n,s){const i=Jc(e),r=Bi(i,"margin"),o=mc(i.maxWidth,e,"clientWidth")||dc,a=mc(i.maxHeight,e,"clientHeight")||dc,l=vV(e,t,n);let{width:u,height:h}=l;if(i.boxSizing==="content-box"){const f=Bi(i,"border","width"),g=Bi(i,"padding");u-=g.width+f.width,h-=g.height+f.height}return u=Math.max(0,u-r.width),h=Math.max(0,s?u/s:h-r.height),u=Zs(Math.min(u,o,l.maxWidth)),h=Zs(Math.min(h,a,l.maxHeight)),u&&!h&&(h=Zs(u/2)),(t!==void 0||n!==void 0)&&s&&l.height&&h>l.height&&(h=l.height,u=Zs(Math.floor(h*s))),{width:u,height:h}}function h_(e,t,n){const s=t||1,i=Zs(e.height*s),r=Zs(e.width*s);e.height=Zs(e.height),e.width=Zs(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==i||o.width!==r?(e.currentDevicePixelRatio=s,o.height=i,o.width=r,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const wV=(function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Tf()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e})();function d_(e,t){const n=gV(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}const EV=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},TV=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Sr(e,t,n){return e?EV(t,n):TV()}function DE(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function OE(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function ol(e,t,n){return e.options.clip?e[n]:t[n]}function IV(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:ol(n,t,"left"),right:ol(n,t,"right"),top:ol(s,t,"top"),bottom:ol(s,t,"bottom")}:t}function AV(e,t){const n=t._clip;if(n.disabled)return!1;const s=IV(t,e.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class SV{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,i){const r=n.listeners[i],o=n.duration;r.forEach(a=>a({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=EE.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,s,t,"progress")),r.length||(s.running=!1,this._notify(i,s,t,"complete"),s.initial=!1),n+=r.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var hs=new SV;const f_="transparent",RV={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=i_(e||f_),i=s.valid&&i_(t||f_);return i&&i.valid?i.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class CV{constructor(t,n,s,i){const r=n[s];i=rl([t.to,i,r,t.from]);const o=rl([t.from,r,i]);this._active=!0,this._fn=t.fn||RV[t.type||typeof o],this._easing=Wo[t.easing]||Wo.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=rl([t.to,n,i,t.from]),this._from=rl([t.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<s),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=r;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][n]()}}class ME{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Ot(t))return;const n=Object.keys(ae.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!Ot(r))return;const o={};for(const a of n)o[a]=r[a];(Oe(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,n){const s=n.options,i=PV(t,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&xV(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,n){const s=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){i.push(...this._animateOptions(t,n));continue}const h=n[u];let d=r[u];const f=s.get(u);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){t[u]=h;continue}r[u]=d=new CV(f,t,u,h),i.push(d)}return i}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return hs.add(this._chart,s),!0}}function xV(e,t){const n=[],s=Object.keys(t);for(let i=0;i<s.length;i++){const r=e[s[i]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function PV(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function p_(e,t){const n=e&&e.options||{},s=n.reverse,i=n.min===void 0?t:0,r=n.max===void 0?t:0;return{start:s?r:i,end:s?i:r}}function kV(e,t,n){if(n===!1)return!1;const s=p_(e,n),i=p_(t,n);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function DV(e){let t,n,s,i;return Ot(e)?(t=e.top,n=e.right,s=e.bottom,i=e.left):t=n=s=i=e,{top:t,right:n,bottom:s,left:i,disabled:e===!1}}function NE(e,t){const n=[],s=e._getSortedDatasetMetas(t);let i,r;for(i=0,r=s.length;i<r;++i)n.push(s[i].index);return n}function g_(e,t,n,s={}){const i=e.keys,r=s.mode==="single";let o,a,l,u;if(t===null)return;let h=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(h=!0,s.all)continue;break}u=e.values[l],Ds(u)&&(r||t===0||t_(t)===t_(u))&&(t+=u)}return!h&&!s.all?0:t}function OV(e,t){const{iScale:n,vScale:s}=t,i=n.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,u,h;for(l=0,u=o.length;l<u;++l)h=o[l],a[l]={[i]:h,[r]:e[h]};return a}function Ku(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function MV(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function NV(e){const{min:t,max:n,minDefined:s,maxDefined:i}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function VV(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function m_(e,t,n,s){for(const i of t.getMatchingVisibleMetas(s).reverse()){const r=e[i.index];if(n&&r>0||!n&&r<0)return i.index}return null}function __(e,t){const{chart:n,_cachedMeta:s}=e,i=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,u=o.axis,h=MV(r,o,s),d=t.length;let f;for(let g=0;g<d;++g){const _=t[g],{[l]:y,[u]:b}=_,I=_._stacks||(_._stacks={});f=I[u]=VV(i,h,y),f[a]=b,f._top=m_(f,o,!0,s.type),f._bottom=m_(f,o,!1,s.type);const R=f._visualValues||(f._visualValues={});R[a]=b}}function Yu(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function LV(e,t){return Gr(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function FV(e,t,n){return Gr(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function fo(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const i of t){const r=i._stacks;if(!r||r[s]===void 0||r[s][n]===void 0)return;delete r[s][n],r[s]._visualValues!==void 0&&r[s]._visualValues[n]!==void 0&&delete r[s]._visualValues[n]}}}const Qu=e=>e==="reset"||e==="none",y_=(e,t)=>t?e:Object.assign({},e),UV=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:NE(n,!0),values:null};class VE{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Ku(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&fo(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),i=(d,f,g,_)=>d==="x"?f:d==="r"?_:g,r=n.xAxisID=jt(s.xAxisID,Yu(t,"x")),o=n.yAxisID=jt(s.yAxisID,Yu(t,"y")),a=n.rAxisID=jt(s.rAxisID,Yu(t,"r")),l=n.indexAxis,u=n.iAxisID=i(l,r,o,a),h=n.vAxisID=i(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&e_(this._data,this),t._stacked&&fo(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(Ot(n)){const i=this._cachedMeta;this._data=OV(n,i)}else if(s!==n){if(s){e_(s,this);const i=this._cachedMeta;fo(i),i._parsed=[]}n&&Object.isExtensible(n)&&VN(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=n._stacked;n._stacked=Ku(n.vScale,n),n.stack!==s.stack&&(i=!0,fo(n),n.stack=s.stack),this._resyncElements(t),(i||r!==n._stacked)&&(__(this,n._parsed),n._stacked=Ku(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:o}=s,a=r.axis;let l=t===0&&n===i.length?!0:s._sorted,u=t>0&&s._parsed[t-1],h,d,f;if(this._parsing===!1)s._parsed=i,s._sorted=!0,f=i;else{Oe(i[t])?f=this.parseArrayData(s,i,t,n):Ot(i[t])?f=this.parseObjectData(s,i,t,n):f=this.parsePrimitiveData(s,i,t,n);const g=()=>d[a]===null||u&&d[a]<u[a];for(h=0;h<n;++h)s._parsed[h+t]=d=f[h],l&&(g()&&(l=!1),u=d);s._sorted=l}o&&__(this,f)}parsePrimitiveData(t,n,s,i){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,u=r.getLabels(),h=r===o,d=new Array(i);let f,g,_;for(f=0,g=i;f<g;++f)_=f+s,d[f]={[a]:h||r.parse(u[_],_),[l]:o.parse(n[_],_)};return d}parseArrayData(t,n,s,i){const{xScale:r,yScale:o}=t,a=new Array(i);let l,u,h,d;for(l=0,u=i;l<u;++l)h=l+s,d=n[h],a[l]={x:r.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(t,n,s,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(i);let h,d,f,g;for(h=0,d=i;h<d;++h)f=h+s,g=n[f],u[h]={x:r.parse(da(g,a),f),y:o.parse(da(g,l),f)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const i=this.chart,r=this._cachedMeta,o=n[t.axis],a={keys:NE(i,!0),values:n._stacks[t.axis]._visualValues};return g_(a,o,r.index,{mode:s})}updateRangeFromParsed(t,n,s,i){const r=s[n.axis];let o=r===null?NaN:r;const a=i&&s._stacks[n.axis];i&&a&&(i.values=a,o=g_(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&t===s.iScale,o=i.length,a=this._getOtherScale(t),l=UV(n,s,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=NV(a);let f,g;function _(){g=i[f];const y=g[a.axis];return!Ds(g[t.axis])||h>y||d<y}for(f=0;f<o&&!(!_()&&(this.updateRangeFromParsed(u,t,g,l),r));++f);if(r){for(f=o-1;f>=0;--f)if(!_()){this.updateRangeFromParsed(u,t,g,l);break}}return u}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let i,r,o;for(i=0,r=n.length;i<r;++i)o=n[i][t.axis],Ds(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,i=n.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=DV(jt(this.options.clip,kV(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,i=s.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,u=this.options.drawActiveElementsOnTop;let h;for(s.dataset&&s.dataset.draw(t,r,a,l),h=a;h<a+l;++h){const d=i[h];d.hidden||(d.active&&u?o.push(d):d.draw(t,r))}for(h=0;h<o.length;++h)o[h].draw(t,r)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=FV(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=LV(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const i=n==="active",r=this._cachedDataOpts,o=t+"-"+n,a=r[o],l=this.enableOptionSharing&&hc(s);if(a)return y_(a,l);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,t),d=i?[`${t}Hover`,"hover",t,""]:[t,""],f=u.getOptionScopes(this.getDataset(),h),g=Object.keys(ae.elements[t]),_=()=>this.getContext(s,i,n),y=u.resolveNamedOptions(f,g,_,d);return y.$shared&&(y.$shared=l,r[o]=Object.freeze(y_(y,l))),y}_resolveAnimations(t,n,s){const i=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(i.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(t,s,n))}const u=new ME(i,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||Qu(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),i=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(n,r)||r!==i;return this.updateSharedOptions(r,n,s),{sharedOptions:r,includeOptions:o}}updateElement(t,n,s,i){Qu(i)?Object.assign(t,s):this._resolveAnimations(n,i).update(t,s)}updateSharedOptions(t,n,s){t&&!Qu(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,i){t.active=i;const r=this.getStyle(n,i);this._resolveAnimations(n,s,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const i=s.length,r=n.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,n,s=!0){const i=this._cachedMeta,r=i.data,o=t+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=o;a--)u[a]=u[a-n]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,n),s&&this.updateElements(r,t,n,"reset")}updateElements(t,n,s,i){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(t,n);s._stacked&&fo(s,i)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,i]=t;this[n](s,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function BV(e,t,n){let s=1,i=1,r=0,o=0;if(t<ge){const a=e,l=a+t,u=Math.cos(a),h=Math.sin(a),d=Math.cos(l),f=Math.sin(l),g=(k,O,L)=>pc(k,a,l,!0)?1:Math.max(O,O*n,L,L*n),_=(k,O,L)=>pc(k,a,l,!0)?-1:Math.min(O,O*n,L,L*n),y=g(0,u,d),b=g(be,h,f),I=_(Xt,u,d),R=_(Xt+be,h,f);s=(y-I)/2,i=(b-R)/2,r=-(y+I)/2,o=-(b+R)/2}return{ratioX:s,ratioY:i,offsetX:r,offsetY:o}}class jV extends VE{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data,{labels:{pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=t.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,u)=>{const d=t.getDatasetMeta(0).controller.getStyle(u);return{text:l,fillStyle:d.backgroundColor,fontColor:r,hidden:!t.getDataVisibility(u),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:i,pointStyle:s,borderRadius:o&&(a||d.borderRadius),index:u}}):[]}},onClick(t,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}};constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let r=l=>+s[l];if(Ot(s[t])){const{key:l="value"}=this._parsing;r=u=>+da(s[u],l)}let o,a;for(o=t,a=t+n;o<a;++o)i._parsed[o]=r(o)}}_getRotation(){return Vi(this.options.rotation-90)}_getCircumference(){return Vi(this.options.circumference)}_getRotationExtents(){let t=ge,n=-ge;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),n=Math.max(n,r+o)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:s}=n,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(EN(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:g,offsetX:_,offsetY:y}=BV(d,h,l),b=(s.width-o)/f,I=(s.height-o)/g,R=Math.max(Math.min(b,I)/2,0),k=yE(this.options.radius,R),O=Math.max(k*l,0),L=(k-O)/this._getVisibleDatasetWeightTotal();this.offsetX=_*k,this.offsetY=y*k,i.total=this.calculateTotal(),this.outerRadius=k-L*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-L*u,0),this.updateElements(r,0,r.length,t)}_circumference(t,n){const s=this.options,i=this._cachedMeta,r=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/ge)}updateElements(t,n,s,i){const r=i==="reset",o=this.chart,a=o.chartArea,u=o.options.animation,h=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=r&&u.animateScale,g=f?0:this.innerRadius,_=f?0:this.outerRadius,{sharedOptions:y,includeOptions:b}=this._getSharedOptions(n,i);let I=this._getRotation(),R;for(R=0;R<n;++R)I+=this._circumference(R,r);for(R=n;R<n+s;++R){const k=this._circumference(R,r),O=t[R],L={x:h+this.offsetX,y:d+this.offsetY,startAngle:I,endAngle:I+k,circumference:k,outerRadius:_,innerRadius:g};b&&(L.options=y||this.resolveDataElementOptions(R,O.active?"active":i)),I+=k,this.updateElement(O,R,L,i)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let s=0,i;for(i=0;i<n.length;i++){const r=t._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?ge*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=WN(n._parsed[t],s.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let n=0;const s=this.chart;let i,r,o,a,l;if(!t){for(i=0,r=s.data.datasets.length;i<r;++i)if(s.isDatasetVisible(i)){o=s.getDatasetMeta(i),t=o.data,a=o.controller;break}}if(!t)return 0;for(i=0,r=t.length;i<r;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let s=0,i=t.length;s<i;++s){const r=this.resolveDataElementOptions(s);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(t){return Math.max(jt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class zV extends jV{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Pi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Af{static override(t){Object.assign(Af.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Pi()}parse(){return Pi()}format(){return Pi()}add(){return Pi()}diff(){return Pi()}startOf(){return Pi()}endOf(){return Pi()}}var $V={_date:Af};function HV(e,t,n,s){const{controller:i,data:r,_sorted:o}=e,a=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const u=a._reversePixels?MN:Hh;if(s){if(i._sharedOptions){const h=r[0],d=typeof h.getRange=="function"&&h.getRange(t);if(d){const f=u(r,t,n-d),g=u(r,t,n+d);return{lo:f.lo,hi:g.hi}}}}else{const h=u(r,t,n);if(l){const{vScale:d}=i._cachedMeta,{_parsed:f}=e,g=f.slice(0,h.lo+1).reverse().findIndex(y=>!$e(y[d.axis]));h.lo-=Math.max(0,g);const _=f.slice(h.hi).findIndex(y=>!$e(y[d.axis]));h.hi+=Math.max(0,_)}return h}}return{lo:0,hi:r.length-1}}function Zc(e,t,n,s,i){const r=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=r.length;a<l;++a){const{index:u,data:h}=r[a],{lo:d,hi:f}=HV(r[a],t,o,i);for(let g=d;g<=f;++g){const _=h[g];_.skip||s(_,u,g)}}}function WV(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,i){const r=t?Math.abs(s.x-i.x):0,o=n?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Xu(e,t,n,s,i){const r=[];return!i&&!e.isPointInArea(t)||Zc(e,n,t,function(a,l,u){!i&&!RE(a,e.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:l,index:u})},!0),r}function qV(e,t,n,s){let i=[];function r(o,a,l){const{startAngle:u,endAngle:h}=o.getProps(["startAngle","endAngle"],s),{angle:d}=bE(o,{x:t.x,y:t.y});pc(d,u,h)&&i.push({element:o,datasetIndex:a,index:l})}return Zc(e,n,t,r),i}function GV(e,t,n,s,i,r){let o=[];const a=WV(n);let l=Number.POSITIVE_INFINITY;function u(h,d,f){const g=h.inRange(t.x,t.y,i);if(s&&!g)return;const _=h.getCenterPoint(i);if(!(!!r||e.isPointInArea(_))&&!g)return;const b=a(t,_);b<l?(o=[{element:h,datasetIndex:d,index:f}],l=b):b===l&&o.push({element:h,datasetIndex:d,index:f})}return Zc(e,n,t,u),o}function Ju(e,t,n,s,i,r){return!r&&!e.isPointInArea(t)?[]:n==="r"&&!s?qV(e,t,n,i):GV(e,t,n,s,i,r)}function v_(e,t,n,s,i){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Zc(e,n,t,(l,u,h)=>{l[o]&&l[o](t[n],i)&&(r.push({element:l,datasetIndex:u,index:h}),a=a||l.inRange(t.x,t.y,i))}),s&&!a?[]:r}var KV={modes:{index(e,t,n,s){const i=Oi(t,e),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Xu(e,i,r,s,o):Ju(e,i,r,!1,s,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(u=>{const h=a[0].index,d=u.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:u.index,index:h})}),l):[]},dataset(e,t,n,s){const i=Oi(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Xu(e,i,r,s,o):Ju(e,i,r,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,u=e.getDatasetMeta(l).data;a=[];for(let h=0;h<u.length;++h)a.push({element:u[h],datasetIndex:l,index:h})}return a},point(e,t,n,s){const i=Oi(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return Xu(e,i,r,s,o)},nearest(e,t,n,s){const i=Oi(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return Ju(e,i,r,n.intersect,s,o)},x(e,t,n,s){const i=Oi(t,e);return v_(e,i,"x",n.intersect,s)},y(e,t,n,s){const i=Oi(t,e);return v_(e,i,"y",n.intersect,s)}}};const LE=["left","top","right","bottom"];function po(e,t){return e.filter(n=>n.pos===t)}function b_(e,t){return e.filter(n=>LE.indexOf(n.pos)===-1&&n.box.axis===t)}function go(e,t){return e.sort((n,s)=>{const i=t?s:n,r=t?n:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function YV(e){const t=[];let n,s,i,r,o,a;for(n=0,s=(e||[]).length;n<s;++n)i=e[n],{position:r,options:{stack:o,stackWeight:a=1}}=i,t.push({index:n,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return t}function QV(e){const t={};for(const n of e){const{stack:s,pos:i,stackWeight:r}=n;if(!s||!LE.includes(i))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function XV(e,t){const n=QV(e),{vBoxMaxWidth:s,hBoxMaxHeight:i}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,u=n[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*s:l&&t.availableWidth,a.height=i):(a.width=s,a.height=h?h*i:l&&t.availableHeight)}return n}function JV(e){const t=YV(e),n=go(t.filter(u=>u.box.fullSize),!0),s=go(po(t,"left"),!0),i=go(po(t,"right")),r=go(po(t,"top"),!0),o=go(po(t,"bottom")),a=b_(t,"x"),l=b_(t,"y");return{fullSize:n,leftAndTop:s.concat(r),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:po(t,"chartArea"),vertical:s.concat(i).concat(l),horizontal:r.concat(o).concat(a)}}function w_(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function FE(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function ZV(e,t,n,s){const{pos:i,box:r}=n,o=e.maxPadding;if(!Ot(i)){n.size&&(e[i]-=n.size);const d=s[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?r.height:r.width),n.size=d.size/d.count,e[i]+=n.size}r.getPadding&&FE(o,r.getPadding());const a=Math.max(0,t.outerWidth-w_(o,e,"left","right")),l=Math.max(0,t.outerHeight-w_(o,e,"top","bottom")),u=a!==e.w,h=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:u,other:h}:{same:h,other:u}}function t2(e){const t=e.maxPadding;function n(s){const i=Math.max(t[s]-e[s],0);return e[s]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function e2(e,t){const n=t.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(t[o],n[o])}),r}return s(e?["left","right"]:["top","bottom"])}function Ro(e,t,n,s){const i=[];let r,o,a,l,u,h;for(r=0,o=e.length,u=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,e2(a.horizontal,t));const{same:d,other:f}=ZV(t,n,a,s);u|=d&&i.length,h=h||f,l.fullSize||i.push(a)}return u&&Ro(i,t,n,s)||h}function al(e,t,n,s,i){e.top=n,e.left=t,e.right=t+s,e.bottom=n+i,e.width=s,e.height=i}function E_(e,t,n,s){const i=n.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,u=s[a.stack]||{placed:0,weight:1},h=a.stackWeight/u.weight||1;if(a.horizontal){const d=t.w*h,f=u.size||l.height;hc(u.start)&&(o=u.start),l.fullSize?al(l,i.left,o,n.outerWidth-i.right-i.left,f):al(l,t.left+u.placed,o,d,f),u.start=o,u.placed+=d,o=l.bottom}else{const d=t.h*h,f=u.size||l.width;hc(u.start)&&(r=u.start),l.fullSize?al(l,r,i.top,f,n.outerHeight-i.bottom-i.top):al(l,r,t.top+u.placed,f,d),u.start=r,u.placed+=d,r=l.right}}t.x=r,t.y=o}var ti={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const i=On(e.options.layout.padding),r=Math.max(t-i.width,0),o=Math.max(n-i.height,0),a=JV(e.boxes),l=a.vertical,u=a.horizontal;Ut(e.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const h=l.reduce((y,b)=>b.box.options&&b.box.options.display===!1?y:y+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},i);FE(f,On(s));const g=Object.assign({maxPadding:f,w:r,h:o,x:i.left,y:i.top},i),_=XV(l.concat(u),d);Ro(a.fullSize,g,d,_),Ro(l,g,d,_),Ro(u,g,d,_)&&Ro(l,g,d,_),t2(g),E_(a.leftAndTop,g,d,_),g.x+=g.w,g.y+=g.h,E_(a.rightAndBottom,g,d,_),e.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},Ut(a.chartArea,y=>{const b=y.box;Object.assign(b,e.chartArea),b.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class UE{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,i){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,i?Math.floor(n/i):s)}}isAttached(t){return!0}updateConfig(t){}}class n2 extends UE{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Rl="$chartjs",s2={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},T_=e=>e===null||e==="";function i2(e,t){const n=e.style,s=e.getAttribute("height"),i=e.getAttribute("width");if(e[Rl]={initial:{height:s,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",T_(i)){const r=d_(e,"width");r!==void 0&&(e.width=r)}if(T_(s))if(e.style.height==="")e.height=e.width/(t||2);else{const r=d_(e,"height");r!==void 0&&(e.height=r)}return e}const BE=wV?{passive:!0}:!1;function r2(e,t,n){e&&e.addEventListener(t,n,BE)}function o2(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,BE)}function a2(e,t){const n=s2[e.type]||e.type,{x:s,y:i}=Oi(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:i!==void 0?i:null}}function _c(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function l2(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||_c(a.addedNodes,s),o=o&&!_c(a.removedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function c2(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||_c(a.removedNodes,s),o=o&&!_c(a.addedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const fa=new Map;let I_=0;function jE(){const e=window.devicePixelRatio;e!==I_&&(I_=e,fa.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function u2(e,t){fa.size||window.addEventListener("resize",jE),fa.set(e,t)}function h2(e){fa.delete(e),fa.size||window.removeEventListener("resize",jE)}function d2(e,t,n){const s=e.canvas,i=s&&If(s);if(!i)return;const r=TE((a,l)=>{const u=i.clientWidth;n(a,l),u<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,h=l.contentRect.height;u===0&&h===0||r(u,h)});return o.observe(i),u2(e,r),o}function Zu(e,t,n){n&&n.disconnect(),t==="resize"&&h2(e)}function f2(e,t,n){const s=e.canvas,i=TE(r=>{e.ctx!==null&&n(a2(r,e))},e);return r2(s,t,i),i}class p2 extends UE{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(i2(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[Rl])return!1;const s=n[Rl].initial;["height","width"].forEach(r=>{const o=s[r];$e(o)?n.removeAttribute(r):n.setAttribute(r,o)});const i=s.style||{};return Object.keys(i).forEach(r=>{n.style[r]=i[r]}),n.width=n.width,delete n[Rl],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const i=t.$proxies||(t.$proxies={}),o={attach:l2,detach:c2,resize:d2}[n]||f2;i[n]=o(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),i=s[n];if(!i)return;({attach:Zu,detach:Zu,resize:Zu}[n]||o2)(t,n,i),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,i){return bV(t,n,s,i)}isAttached(t){const n=t&&If(t);return!!(n&&n.isConnected)}}function g2(e){return!Tf()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?n2:p2}let Oa=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return fc(this.x)&&fc(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const i={};return t.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}};function m2(e,t){const n=e.options.ticks,s=_2(e),i=Math.min(n.maxTicksLimit||s,s),r=n.major.enabled?v2(t):[],o=r.length,a=r[0],l=r[o-1],u=[];if(o>i)return b2(t,u,r,o/i),u;const h=y2(r,t,i);if(o>0){let d,f;const g=o>1?Math.round((l-a)/(o-1)):null;for(ll(t,u,h,$e(g)?0:a-g,a),d=0,f=o-1;d<f;d++)ll(t,u,h,r[d],r[d+1]);return ll(t,u,h,l,$e(g)?t.length:l+g),u}return ll(t,u,h),u}function _2(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(s,i))}function y2(e,t,n){const s=w2(e),i=t.length/n;if(!s)return Math.max(i,1);const r=xN(s);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>i)return l}return Math.max(i,1)}function v2(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function b2(e,t,n,s){let i=0,r=n[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===r&&(t.push(e[o]),i++,r=n[i*s])}function ll(e,t,n,s,i){const r=jt(s,0),o=Math.min(jt(i,e.length),e.length);let a=0,l,u,h;for(n=Math.ceil(n),i&&(l=i-s,n=l/Math.floor(l/n)),h=r;h<0;)a++,h=Math.round(r+a*n);for(u=Math.max(r,0);u<o;u++)u===h&&(t.push(e[u]),a++,h=Math.round(r+a*n))}function w2(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const E2=e=>e==="left"?"right":e==="right"?"left":e,A_=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,S_=(e,t)=>Math.min(t||e,e);function R_(e,t){const n=[],s=e.length/t,i=e.length;let r=0;for(;r<i;r+=s)n.push(e[Math.floor(r)]);return n}function T2(e,t,n){const s=e.ticks.length,i=Math.min(t,s-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(i),u;if(!(n&&(s===1?u=Math.max(l-r,o-l):t===0?u=(e.getPixelForTick(1)-l)/2:u=(l-e.getPixelForTick(i-1))/2,l+=i<t?u:-u,l<r-a||l>o+a)))return l}function I2(e,t){Ut(e,n=>{const s=n.gc,i=s.length/2;let r;if(i>t){for(r=0;r<i;++r)delete n.data[s[r]];s.splice(0,i)}})}function mo(e){return e.drawTicks?e.tickLength:0}function C_(e,t){if(!e.display)return 0;const n=sn(e.font,t),s=On(e.padding);return(Oe(e.text)?e.text.length:1)*n.lineHeight+s.height}function A2(e,t){return Gr(e,{scale:t,type:"scale"})}function S2(e,t,n){return Gr(e,{tick:n,index:t,type:"tick"})}function R2(e,t,n){let s=IE(e);return(n&&t!=="right"||!n&&t==="right")&&(s=E2(s)),s}function C2(e,t,n,s){const{top:i,left:r,bottom:o,right:a,chart:l}=e,{chartArea:u,scales:h}=l;let d=0,f,g,_;const y=o-i,b=a-r;if(e.isHorizontal()){if(g=un(s,r,a),Ot(n)){const I=Object.keys(n)[0],R=n[I];_=h[I].getPixelForValue(R)+y-t}else n==="center"?_=(u.bottom+u.top)/2+y-t:_=A_(e,n,t);f=a-r}else{if(Ot(n)){const I=Object.keys(n)[0],R=n[I];g=h[I].getPixelForValue(R)-b+t}else n==="center"?g=(u.left+u.right)/2-b+t:g=A_(e,n,t);_=un(s,o,i),d=n==="left"?-be:be}return{titleX:g,titleY:_,maxWidth:f,rotation:d}}class tu extends Oa{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:i}=this;return t=Ln(t,Number.POSITIVE_INFINITY),n=Ln(n,Number.NEGATIVE_INFINITY),s=Ln(s,Number.POSITIVE_INFINITY),i=Ln(i,Number.NEGATIVE_INFINITY),{min:Ln(t,s),max:Ln(n,i),minDefined:Ds(t),maxDefined:Ds(n)}}getMinMax(t){let{min:n,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,t),i||(n=Math.min(n,o.min)),r||(s=Math.max(s,o.max));return n=r&&n>s?s:n,s=i&&n>s?n:s,{min:Ln(n,Ln(s,n)),max:Ln(s,Ln(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Yt(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=rV(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?R_(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=m2(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Yt(this.options.afterUpdate,[this])}beforeSetDimensions(){Yt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Yt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Yt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Yt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,i,r;for(s=0,i=t.length;s<i;s++)r=t[s],r.label=Yt(n.callback,[r.value,s,t],this)}afterTickToLabelConversion(){Yt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Yt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=S_(this.ticks.length,t.ticks.maxTicksLimit),i=n.minRotation||0,r=n.maxRotation;let o=i,a,l,u;if(!this._isVisible()||!n.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,g=_n(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/s:g/(s-1),d+6>a&&(a=g/(s-(t.offset?.5:1)),l=this.maxHeight-mo(t.grid)-n.padding-C_(t.title,this.chart.options.font),u=Math.sqrt(d*d+f*f),o=kN(Math.min(Math.asin(_n((h.highest.height+6)/a,-1,1)),Math.asin(_n(l/u,-1,1))-Math.asin(_n(f/u,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Yt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Yt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=C_(i,n.options.font);if(a?(t.width=this.maxWidth,t.height=mo(r)+l):(t.height=this.maxHeight,t.width=mo(r)+l),s.display&&this.ticks.length){const{first:u,last:h,widest:d,highest:f}=this._getLabelSizes(),g=s.padding*2,_=Vi(this.labelRotation),y=Math.cos(_),b=Math.sin(_);if(a){const I=s.mirror?0:b*d.width+y*f.height;t.height=Math.min(this.maxHeight,t.height+I+g)}else{const I=s.mirror?0:y*d.width+b*f.height;t.width=Math.min(this.maxWidth,t.width+I+g)}this._calculatePadding(u,h,b,y)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,i){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,g=0;l?u?(f=i*t.width,g=s*n.height):(f=s*t.height,g=i*n.width):r==="start"?g=n.width:r==="end"?f=t.width:r!=="inner"&&(f=t.width/2,g=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=t.height/2;r==="start"?(h=0,d=t.height):r==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Yt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)$e(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=R_(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(n/S_(n,s));let u=0,h=0,d,f,g,_,y,b,I,R,k,O,L;for(d=0;d<n;d+=l){if(_=t[d].label,y=this._resolveTickFontOptions(d),i.font=b=y.string,I=r[b]=r[b]||{data:{},gc:[]},R=y.lineHeight,k=O=0,!$e(_)&&!Oe(_))k=o_(i,I.data,I.gc,k,_),O=R;else if(Oe(_))for(f=0,g=_.length;f<g;++f)L=_[f],!$e(L)&&!Oe(L)&&(k=o_(i,I.data,I.gc,k,L),O+=R);o.push(k),a.push(O),u=Math.max(k,u),h=Math.max(O,h)}I2(r,n);const G=o.indexOf(u),T=a.indexOf(h),v=E=>({width:o[E]||0,height:a[E]||0});return{first:v(0),last:v(n-1),widest:v(G),highest:v(T),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return ON(this._alignToPixels?xi(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=S2(this.getContext(),t,s))}return this.$context||(this.$context=A2(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=Vi(this.labelRotation),s=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*i?a/s:l/i:l*i<a*s?l/s:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,i=this.options,{grid:r,position:o,border:a}=i,l=r.offset,u=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=mo(r),g=[],_=a.setContext(this.getContext()),y=_.display?_.width:0,b=y/2,I=function(ht){return xi(s,ht,y)};let R,k,O,L,G,T,v,E,x,P,M,A;if(o==="top")R=I(this.bottom),T=this.bottom-f,E=R-b,P=I(t.top)+b,A=t.bottom;else if(o==="bottom")R=I(this.top),P=t.top,A=I(t.bottom)-b,T=R+b,E=this.top+f;else if(o==="left")R=I(this.right),G=this.right-f,v=R-b,x=I(t.left)+b,M=t.right;else if(o==="right")R=I(this.left),x=t.left,M=I(t.right)-b,G=R+b,v=this.left+f;else if(n==="x"){if(o==="center")R=I((t.top+t.bottom)/2+.5);else if(Ot(o)){const ht=Object.keys(o)[0],Q=o[ht];R=I(this.chart.scales[ht].getPixelForValue(Q))}P=t.top,A=t.bottom,T=R+b,E=T+f}else if(n==="y"){if(o==="center")R=I((t.left+t.right)/2);else if(Ot(o)){const ht=Object.keys(o)[0],Q=o[ht];R=I(this.chart.scales[ht].getPixelForValue(Q))}G=R-b,v=G-f,x=t.left,M=t.right}const It=jt(i.ticks.maxTicksLimit,d),_t=Math.max(1,Math.ceil(d/It));for(k=0;k<d;k+=_t){const ht=this.getContext(k),Q=r.setContext(ht),U=a.setContext(ht),tt=Q.lineWidth,Gt=Q.color,Ee=U.dash||[],Jt=U.dashOffset,Ge=Q.tickWidth,_e=Q.tickColor,Re=Q.tickBorderDash||[],Zt=Q.tickBorderDashOffset;O=T2(this,k,l),O!==void 0&&(L=xi(s,O,tt),u?G=v=x=M=L:T=E=P=A=L,g.push({tx1:G,ty1:T,tx2:v,ty2:E,x1:x,y1:P,x2:M,y2:A,width:tt,color:Gt,borderDash:Ee,borderDashOffset:Jt,tickWidth:Ge,tickColor:_e,tickBorderDash:Re,tickBorderDashOffset:Zt}))}return this._ticksLength=d,this._borderValue=R,g}_computeLabelItems(t){const n=this.axis,s=this.options,{position:i,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:h,mirror:d}=r,f=mo(s.grid),g=f+h,_=d?-h:g,y=-Vi(this.labelRotation),b=[];let I,R,k,O,L,G,T,v,E,x,P,M,A="middle";if(i==="top")G=this.bottom-_,T=this._getXAxisLabelAlignment();else if(i==="bottom")G=this.top+_,T=this._getXAxisLabelAlignment();else if(i==="left"){const _t=this._getYAxisLabelAlignment(f);T=_t.textAlign,L=_t.x}else if(i==="right"){const _t=this._getYAxisLabelAlignment(f);T=_t.textAlign,L=_t.x}else if(n==="x"){if(i==="center")G=(t.top+t.bottom)/2+g;else if(Ot(i)){const _t=Object.keys(i)[0],ht=i[_t];G=this.chart.scales[_t].getPixelForValue(ht)+g}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")L=(t.left+t.right)/2-g;else if(Ot(i)){const _t=Object.keys(i)[0],ht=i[_t];L=this.chart.scales[_t].getPixelForValue(ht)}T=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?A="top":l==="end"&&(A="bottom"));const It=this._getLabelSizes();for(I=0,R=a.length;I<R;++I){k=a[I],O=k.label;const _t=r.setContext(this.getContext(I));v=this.getPixelForTick(I)+r.labelOffset,E=this._resolveTickFontOptions(I),x=E.lineHeight,P=Oe(O)?O.length:1;const ht=P/2,Q=_t.color,U=_t.textStrokeColor,tt=_t.textStrokeWidth;let Gt=T;o?(L=v,T==="inner"&&(I===R-1?Gt=this.options.reverse?"left":"right":I===0?Gt=this.options.reverse?"right":"left":Gt="center"),i==="top"?u==="near"||y!==0?M=-P*x+x/2:u==="center"?M=-It.highest.height/2-ht*x+x:M=-It.highest.height+x/2:u==="near"||y!==0?M=x/2:u==="center"?M=It.highest.height/2-ht*x:M=It.highest.height-P*x,d&&(M*=-1),y!==0&&!_t.showLabelBackdrop&&(L+=x/2*Math.sin(y))):(G=v,M=(1-P)*x/2);let Ee;if(_t.showLabelBackdrop){const Jt=On(_t.backdropPadding),Ge=It.heights[I],_e=It.widths[I];let Re=M-Jt.top,Zt=0-Jt.left;switch(A){case"middle":Re-=Ge/2;break;case"bottom":Re-=Ge;break}switch(T){case"center":Zt-=_e/2;break;case"right":Zt-=_e;break;case"inner":I===R-1?Zt-=_e:I>0&&(Zt-=_e/2);break}Ee={left:Zt,top:Re,width:_e+Jt.width,height:Ge+Jt.height,color:_t.backdropColor}}b.push({label:O,font:E,textOffset:M,options:{rotation:y,color:Q,strokeColor:U,strokeWidth:tt,textAlign:Gt,textBaseline:A,translation:[L,G],backdrop:Ee}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-Vi(this.labelRotation))return t==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let u,h;return n==="left"?i?(h=this.right+r,s==="near"?u="left":s==="center"?(u="center",h+=l/2):(u="right",h+=l)):(h=this.right-a,s==="near"?u="right":s==="center"?(u="center",h-=l/2):(u="left",h=this.left)):n==="right"?i?(h=this.left+r,s==="near"?u="right":s==="center"?(u="center",h-=l/2):(u="left",h-=l)):(h=this.left+a,s==="near"?u="left":s==="center"?(u="center",h+=l/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:i,width:r,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,i,r,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(r=>r.value===t);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,u,h)=>{!h.width||!h.color||(s.save(),s.lineWidth=h.width,s.strokeStyle=h.color,s.setLineDash(h.borderDash||[]),s.lineDashOffset=h.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(u.x,u.y),s.stroke(),s.restore())};if(n.display)for(r=0,o=i.length;r<o;++r){const l=i[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,h,d,f;this.isHorizontal()?(u=xi(t,this.left,o)-o/2,h=xi(t,this.right,a)+a/2,d=f=l):(d=xi(t,this.top,o)-o/2,f=xi(t,this.bottom,a)+a/2,u=h=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(u,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&_f(s,i);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,u=o.label,h=o.textOffset;gc(s,u,0,h,l,a)}i&&yf(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:i}}=this;if(!s.display)return;const r=sn(s.font),o=On(s.padding),a=s.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||Ot(n)?(l+=o.bottom,Oe(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:u,titleY:h,maxWidth:d,rotation:f}=C2(this,l,n,a);gc(t,s.text,0,0,r,{color:s.color,maxWidth:d,rotation:f,textAlign:R2(a,n,i),textBaseline:"middle",translation:[u,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=jt(t.grid&&t.grid.z,-1),i=jt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==tu.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[s]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return sn(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class cl{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;k2(n)&&(s=this.register(n));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,x2(t,o,s),this.override&&ae.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,i=this.scope;s in n&&delete n[s],i&&s in ae[i]&&(delete ae[i][s],this.override&&delete Ki[s])}}function x2(e,t,n){const s=ha(Object.create(null),[n?ae.get(n):{},ae.get(t),e.defaults]);ae.set(t,s),e.defaultRoutes&&P2(t,e.defaultRoutes),e.descriptors&&ae.describe(t,e.descriptors)}function P2(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),i=s.pop(),r=[e].concat(s).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");ae.route(r,i,l,a)})}function k2(e){return"id"in e&&"defaults"in e}class D2{constructor(){this.controllers=new cl(VE,"datasets",!0),this.elements=new cl(Oa,"elements"),this.plugins=new cl(Object,"plugins"),this.scales=new cl(tu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(t,r,i):Ut(i,o=>{const a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,n,s){const i=gf(t);Yt(s["before"+i],[],s),n[t](s),Yt(s["after"+i],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const i=n.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return i}}var Bn=new D2;class O2{constructor(){this._init=void 0}notify(t,n,s,i){if(n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,n,s);return n==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,n,s,i){i=i||{};for(const r of t){const o=r.plugin,a=o[s],l=[n,i,r.options];if(Yt(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){$e(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,i=jt(s.options&&s.options.plugins,{}),r=M2(s);return i===!1&&!n?[]:V2(t,r,i,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,i=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,s),t,"stop"),this._notify(i(s,n),t,"start")}}function M2(e){const t={},n=[],s=Object.keys(Bn.plugins.items);for(let r=0;r<s.length;r++)n.push(Bn.getPlugin(s[r]));const i=e.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function N2(e,t){return!t&&e===!1?null:e===!0?{}:e}function V2(e,{plugins:t,localIds:n},s,i){const r=[],o=e.getContext();for(const a of t){const l=a.id,u=N2(s[l],i);u!==null&&r.push({plugin:a,options:L2(e.config,{plugin:a,local:n[l]},u,o)})}return r}function L2(e,{plugin:t,local:n},s,i){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(s,r);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Gh(e,t){const n=ae.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function F2(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function U2(e,t){return e===t?"_index_":"_value_"}function x_(e){if(e==="x"||e==="y"||e==="r")return e}function B2(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Kh(e,...t){if(x_(e))return e;for(const n of t){const s=n.axis||B2(n.position)||e.length>1&&x_(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function P_(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function j2(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return P_(e,"x",n[0])||P_(e,"y",n[0])}return{}}function z2(e,t){const n=Ki[e.type]||{scales:{}},s=t.scales||{},i=Gh(e.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!Ot(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Kh(o,a,j2(o,e),ae.scales[a.type]),u=U2(l,i),h=n.scales||{};r[o]=Ho(Object.create(null),[{axis:l},a,h[l],h[u]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||Gh(a,t),h=(Ki[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=F2(d,l),g=o[f+"AxisID"]||f;r[g]=r[g]||Object.create(null),Ho(r[g],[{axis:f},s[g],h[d]])})}),Object.keys(r).forEach(o=>{const a=r[o];Ho(a,[ae.scales[a.type],ae.scale])}),r}function zE(e){const t=e.options||(e.options={});t.plugins=jt(t.plugins,{}),t.scales=z2(e,t)}function $E(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function $2(e){return e=e||{},e.data=$E(e.data),zE(e),e}const k_=new Map,HE=new Set;function ul(e,t){let n=k_.get(e);return n||(n=t(),k_.set(e,n),HE.add(n)),n}const _o=(e,t,n)=>{const s=da(t,n);s!==void 0&&e.add(s)};class H2{constructor(t){this._config=$2(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=$E(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),zE(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return ul(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return ul(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return ul(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return ul(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let i=s.get(t);return(!i||n)&&(i=new Map,s.set(t,i)),i}getOptionScopes(t,n,s){const{options:i,type:r}=this,o=this._cachedScopes(t,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{t&&(l.add(t),h.forEach(d=>_o(l,t,d))),h.forEach(d=>_o(l,i,d)),h.forEach(d=>_o(l,Ki[r]||{},d)),h.forEach(d=>_o(l,ae,d)),h.forEach(d=>_o(l,Wh,d))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),HE.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:t,type:n}=this;return[t,Ki[n]||{},ae.datasets[n]||{},{type:n},ae,Wh]}resolveNamedOptions(t,n,s,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=D_(this._resolverCache,t,i);let l=o;if(q2(o,n)){r.$shared=!1,s=vi(s)?s():s;const u=this.createResolver(t,s,a);l=Lr(o,s,u)}for(const u of n)r[u]=l[u];return r}createResolver(t,n,s=[""],i){const{resolver:r}=D_(this._resolverCache,t,s);return Ot(n)?Lr(r,n,void 0,i):r}}function D_(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const i=n.join();let r=s.get(i);return r||(r={resolver:bf(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(i,r)),r}const W2=e=>Ot(e)&&Object.getOwnPropertyNames(e).some(t=>vi(e[t]));function q2(e,t){const{isScriptable:n,isIndexable:s}=CE(e);for(const i of t){const r=n(i),o=s(i),a=(o||r)&&e[i];if(r&&(vi(a)||W2(a))||o&&Oe(a))return!0}return!1}var G2="4.5.1";const K2=["top","bottom","left","right","chartArea"];function O_(e,t){return e==="top"||e==="bottom"||K2.indexOf(e)===-1&&t==="x"}function M_(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function N_(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Yt(n&&n.onComplete,[e],t)}function Y2(e){const t=e.chart,n=t.options.animation;Yt(n&&n.onProgress,[e],t)}function WE(e){return Tf()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Cl={},V_=e=>{const t=WE(e);return Object.values(Cl).filter(n=>n.canvas===t).pop()};function Q2(e,t,n){const s=Object.keys(e);for(const i of s){const r=+i;if(r>=t){const o=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=o)}}}function X2(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}class Yh{static defaults=ae;static instances=Cl;static overrides=Ki;static registry=Bn;static version=G2;static getChart=V_;static register(...t){Bn.add(...t),L_()}static unregister(...t){Bn.remove(...t),L_()}constructor(t,n){const s=this.config=new H2(n),i=WE(t),r=V_(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||g2(i)),this.platform.updateConfig(s);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,h=l&&l.width;if(this.id=wN(),this.ctx=a,this.canvas=l,this.width=h,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new O2,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=FN(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Cl[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}hs.listen(this,"complete",N_),hs.listen(this,"progress",Y2),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:i,_aspectRatio:r}=this;return $e(t)?n&&r?r:i?s/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Bn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():h_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return a_(this.canvas,this.ctx),this}stop(){return hs.stop(this),this}resize(t,n){hs.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,n,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,h_(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Yt(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ut(n,(s,i)=>{s.id=i})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,i=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=Kh(o,a),u=l==="r",h=l==="x";return{options:a,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),Ut(r,o=>{const a=o.options,l=a.id,u=Kh(l,a),h=jt(a.type,o.dtype);(a.position===void 0||O_(a.position,u)!==O_(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in s&&s[l].type===h)d=s[l];else{const f=Bn.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),s[d.id]=d}d.init(a,t)}),Ut(i,(o,a)=>{o||delete s[a]}),Ut(s,o=>{ti.configure(this,o,o.options),ti.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((i,r)=>i.index-r.index),s>n){for(let i=n;i<s;++i)this._destroyDatasetMeta(i);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(M_("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,i)=>{n.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=n.length;s<i;s++){const r=n[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||Gh(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=Bn.getController(a),{datasetElementType:u,dataElementType:h}=ae.datasets[a];Object.assign(l,{dataElementType:Bn.getElement(h),datasetElementType:u&&Bn.getElement(u)}),o.controller=new l(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Ut(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:d}=this.getDatasetMeta(u),f=!i&&r.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||Ut(r,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(M_("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ut(this.scales,t=>{ti.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!Jm(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of n){const o=s==="_removeElements"?-r:r;Q2(t,i,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=s(0);for(let r=1;r<n;r++)if(!Jm(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ti.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],Ut(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,vi(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),i={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(hs.has(this)?this.attached&&!hs.running(this)&&hs.start(this):(this.draw(),N_({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let i,r;for(i=0,r=n.length;i<r;++i){const o=n[i];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s={meta:t,index:t.index,cancelable:!0},i=AV(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&_f(n,i),t.controller.draw(),i&&yf(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return RE(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,i){const r=KV.modes[n];return typeof r=="function"?r(this,t,s,i):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let i=s.filter(r=>r&&r._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=Gr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const i=s?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);hc(n)?(r.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),hs.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),a_(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Cl[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(r,o)=>{n.addEventListener(this,r,o),t[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};Ut(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(l,u)=>{n.addEventListener(this,l,u),t[l]=u},i=(l,u)=>{t[l]&&(n.removeEventListener(this,l,u),delete t[l])},r=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ut(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Ut(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const i=s?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!cc(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const i=this.options.hover,r=(l,u)=>l.filter(h=>!u.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=r(n,t),a=s?t:r(t,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},i=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:i=[],options:r}=this,o=n,a=this._getActiveElements(t,i,s,o),l=RN(t),u=X2(t,this._lastEvent,s,l);s&&(this._lastEvent=null,Yt(r.onHover,[t,a,this],this),l&&Yt(r.onClick,[t,a,this],this));const h=!cc(a,i);return(h||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=u,h}_getActiveElements(t,n,s,i){if(t.type==="mouseout")return[];if(!s)return n;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}}function L_(){return Ut(Yh.instances,e=>e._plugins.invalidate())}function J2(e,t,n){const{startAngle:s,x:i,y:r,outerRadius:o,innerRadius:a,options:l}=t,{borderWidth:u,borderJoinStyle:h}=l,d=Math.min(u/o,zn(s-n));if(e.beginPath(),e.arc(i,r,o-u/2,s+d/2,n-d/2),a>0){const f=Math.min(u/a,zn(s-n));e.arc(i,r,a+u/2,n-f/2,s+f/2,!0)}else{const f=Math.min(u/2,o*zn(s-n));if(h==="round")e.arc(i,r,f,n-Xt/2,s+Xt/2,!0);else if(h==="bevel"){const g=2*f*f,_=-g*Math.cos(n+Xt/2)+i,y=-g*Math.sin(n+Xt/2)+r,b=g*Math.cos(s+Xt/2)+i,I=g*Math.sin(s+Xt/2)+r;e.lineTo(_,y),e.lineTo(b,I)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function Z2(e,t,n){const{startAngle:s,pixelMargin:i,x:r,y:o,outerRadius:a,innerRadius:l}=t;let u=i/a;e.beginPath(),e.arc(r,o,a,s-u,n+u),l>i?(u=i/l,e.arc(r,o,l,n+u,s-u,!0)):e.arc(r,o,i,n+be,s-be),e.closePath(),e.clip()}function tL(e){return vf(e,["outerStart","outerEnd","innerStart","innerEnd"])}function eL(e,t,n,s){const i=tL(e.options.borderRadius),r=(n-t)/2,o=Math.min(r,s*t/2),a=l=>{const u=(n-Math.min(r,l))*s/2;return _n(l,0,Math.min(r,u))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:_n(i.innerStart,0,o),innerEnd:_n(i.innerEnd,0,o)}}function cr(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function yc(e,t,n,s,i,r){const{x:o,y:a,startAngle:l,pixelMargin:u,innerRadius:h}=t,d=Math.max(t.outerRadius+s+n-u,0),f=h>0?h+s+n+u:0;let g=0;const _=i-l;if(s){const _t=h>0?h-s:0,ht=d>0?d-s:0,Q=(_t+ht)/2,U=Q!==0?_*Q/(Q+s):_;g=(_-U)/2}const y=Math.max(.001,_*d-n/Xt)/d,b=(_-y)/2,I=l+b+g,R=i-b-g,{outerStart:k,outerEnd:O,innerStart:L,innerEnd:G}=eL(t,f,d,R-I),T=d-k,v=d-O,E=I+k/T,x=R-O/v,P=f+L,M=f+G,A=I+L/P,It=R-G/M;if(e.beginPath(),r){const _t=(E+x)/2;if(e.arc(o,a,d,E,_t),e.arc(o,a,d,_t,x),O>0){const tt=cr(v,x,o,a);e.arc(tt.x,tt.y,O,x,R+be)}const ht=cr(M,R,o,a);if(e.lineTo(ht.x,ht.y),G>0){const tt=cr(M,It,o,a);e.arc(tt.x,tt.y,G,R+be,It+Math.PI)}const Q=(R-G/f+(I+L/f))/2;if(e.arc(o,a,f,R-G/f,Q,!0),e.arc(o,a,f,Q,I+L/f,!0),L>0){const tt=cr(P,A,o,a);e.arc(tt.x,tt.y,L,A+Math.PI,I-be)}const U=cr(T,I,o,a);if(e.lineTo(U.x,U.y),k>0){const tt=cr(T,E,o,a);e.arc(tt.x,tt.y,k,I-be,E)}}else{e.moveTo(o,a);const _t=Math.cos(E)*d+o,ht=Math.sin(E)*d+a;e.lineTo(_t,ht);const Q=Math.cos(x)*d+o,U=Math.sin(x)*d+a;e.lineTo(Q,U)}e.closePath()}function nL(e,t,n,s,i){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){yc(e,t,n,s,l,i);for(let u=0;u<r;++u)e.fill();isNaN(a)||(l=o+(a%ge||ge))}return yc(e,t,n,s,l,i),e.fill(),l}function sL(e,t,n,s,i){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:u,borderJoinStyle:h,borderDash:d,borderDashOffset:f,borderRadius:g}=l,_=l.borderAlign==="inner";if(!u)return;e.setLineDash(d||[]),e.lineDashOffset=f,_?(e.lineWidth=u*2,e.lineJoin=h||"round"):(e.lineWidth=u,e.lineJoin=h||"bevel");let y=t.endAngle;if(r){yc(e,t,n,s,y,i);for(let b=0;b<r;++b)e.stroke();isNaN(a)||(y=o+(a%ge||ge))}_&&Z2(e,t,y),l.selfJoin&&y-o>=Xt&&g===0&&h!=="miter"&&J2(e,t,y),r||(yc(e,t,n,s,y,i),e.stroke())}class iL extends Oa{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,n,s){const i=this.getProps(["x","y"],s),{angle:r,distance:o}=bE(i,{x:t,y:n}),{startAngle:a,endAngle:l,innerRadius:u,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),f=(this.options.spacing+this.options.borderWidth)/2,g=jt(d,l-a),_=pc(r,a,l)&&a!==l,y=g>=ge||_,b=So(o,u+f,h+f);return y&&b}getCenterPoint(t){const{x:n,y:s,startAngle:i,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:u}=this.options,h=(i+r)/2,d=(o+a+u+l)/2;return{x:n+Math.cos(h)*d,y:s+Math.sin(h)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:n,circumference:s}=this,i=(n.offset||0)/4,r=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>ge?Math.floor(s/ge):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*i,Math.sin(a)*i);const l=1-Math.sin(Math.min(Xt,s||0)),u=i*l;t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,nL(t,this,u,r,o),sL(t,this,u,r,o),t.restore()}}const F_=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},rL=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class U_ extends Oa{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Yt(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,i)=>t.sort(s,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,i=sn(s.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=F_(s,r);let u,h;n.font=i.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(o,r,a,l)+10):(h=this.maxHeight,u=this._fitCols(o,i,a,l)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],h=i+a;let d=t;r.textAlign="left",r.textBaseline="middle";let f=-1,g=-h;return this.legendItems.forEach((_,y)=>{const b=s+n/2+r.measureText(_.text).width;(y===0||u[u.length-1]+b+2*a>o)&&(d+=h,u[u.length-(y>0?0:1)]=0,g+=h,f++),l[y]={left:0,top:g,row:f,width:b,height:i},u[u.length-1]+=b+a}),d}_fitCols(t,n,s,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],h=o-t;let d=a,f=0,g=0,_=0,y=0;return this.legendItems.forEach((b,I)=>{const{itemWidth:R,itemHeight:k}=oL(s,n,r,b,i);I>0&&g+k+2*a>h&&(d+=f+a,u.push({width:f,height:g}),_+=f+a,y++,f=g=0),l[I]={left:_,top:g,col:y,width:R,height:k},f=Math.max(f,R),g+=k+a}),d+=f,u.push({width:f,height:g}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:i},rtl:r}}=this,o=Sr(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=un(s,this.left+i,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=un(s,this.left+i,this.right-this.lineWidths[a])),u.top+=this.top+t+i,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+i}else{let a=0,l=un(s,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=un(s,this.top+t+i,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+i,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;_f(t,this),this._draw(),yf(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:i}=this,{align:r,labels:o}=t,a=ae.color,l=Sr(t.rtl,this.left,this.width),u=sn(o.font),{padding:h}=o,d=u.size,f=d/2;let g;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=u.string;const{boxWidth:_,boxHeight:y,itemHeight:b}=F_(o,d),I=function(G,T,v){if(isNaN(_)||_<=0||isNaN(y)||y<0)return;i.save();const E=jt(v.lineWidth,1);if(i.fillStyle=jt(v.fillStyle,a),i.lineCap=jt(v.lineCap,"butt"),i.lineDashOffset=jt(v.lineDashOffset,0),i.lineJoin=jt(v.lineJoin,"miter"),i.lineWidth=E,i.strokeStyle=jt(v.strokeStyle,a),i.setLineDash(jt(v.lineDash,[])),o.usePointStyle){const x={radius:y*Math.SQRT2/2,pointStyle:v.pointStyle,rotation:v.rotation,borderWidth:E},P=l.xPlus(G,_/2),M=T+f;SE(i,x,P,M,o.pointStyleWidth&&_)}else{const x=T+Math.max((d-y)/2,0),P=l.leftForLtr(G,_),M=Go(v.borderRadius);i.beginPath(),Object.values(M).some(A=>A!==0)?qh(i,{x:P,y:x,w:_,h:y,radius:M}):i.rect(P,x,_,y),i.fill(),E!==0&&i.stroke()}i.restore()},R=function(G,T,v){gc(i,v.text,G,T+b/2,u,{strikethrough:v.hidden,textAlign:l.textAlign(v.textAlign)})},k=this.isHorizontal(),O=this._computeTitleHeight();k?g={x:un(r,this.left+h,this.right-s[0]),y:this.top+h+O,line:0}:g={x:this.left+h,y:un(r,this.top+O+h,this.bottom-n[0].height),line:0},DE(this.ctx,t.textDirection);const L=b+h;this.legendItems.forEach((G,T)=>{i.strokeStyle=G.fontColor,i.fillStyle=G.fontColor;const v=i.measureText(G.text).width,E=l.textAlign(G.textAlign||(G.textAlign=o.textAlign)),x=_+f+v;let P=g.x,M=g.y;l.setWidth(this.width),k?T>0&&P+x+h>this.right&&(M=g.y+=L,g.line++,P=g.x=un(r,this.left+h,this.right-s[g.line])):T>0&&M+L>this.bottom&&(P=g.x=P+n[g.line].width+h,g.line++,M=g.y=un(r,this.top+O+h,this.bottom-n[g.line].height));const A=l.x(P);if(I(A,M,G),P=UN(E,P+_+f,k?P+x:this.right,t.rtl),R(l.x(P),M,G),k)g.x+=x+h;else if(typeof G.text!="string"){const It=u.lineHeight;g.y+=qE(G,It)+h}else g.y+=L}),OE(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=sn(n.font),i=On(n.padding);if(!n.display)return;const r=Sr(t.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,u=i.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+u,d=un(t.align,d,this.right-f);else{const _=this.columnSizes.reduce((y,b)=>Math.max(y,b.height),0);h=u+un(t.align,this.top,this.bottom-_-t.labels.padding-this._computeTitleHeight())}const g=un(a,d,d+f);o.textAlign=r.textAlign(IE(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,gc(o,n.text,g,h,s)}_computeTitleHeight(){const t=this.options.title,n=sn(t.font),s=On(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,i,r;if(So(t,this.left,this.right)&&So(n,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],So(t,i.left,i.left+i.width)&&So(n,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!cL(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,r=rL(i,s);i&&!r&&Yt(n.onLeave,[t,i,this],this),this._hoveredItem=s,s&&!r&&Yt(n.onHover,[t,s,this],this)}else s&&Yt(n.onClick,[t,s,this],this)}}function oL(e,t,n,s,i){const r=aL(s,e,t,n),o=lL(i,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function aL(e,t,n,s){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),t+n.size/2+s.measureText(i).width}function lL(e,t,n){let s=e;return typeof t.text!="string"&&(s=qE(t,n)),s}function qE(e,t){const n=e.text?e.text.length:0;return t*n}function cL(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var uL={id:"legend",_element:U_,start(e,t,n){const s=e.legend=new U_({ctx:e.ctx,options:n,chart:e});ti.configure(e,s,n),ti.addBox(e,s)},stop(e){ti.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;ti.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,i=n.chart;i.isDatasetVisible(s)?(i.hide(s),t.hidden=!0):(i.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(n?0:void 0),h=On(u.borderWidth);return{text:t[l.index].label,fillStyle:u.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:s||u.pointStyle,rotation:u.rotation,textAlign:i||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};const Co={average(e){if(!e.length)return!1;let t,n,s=new Set,i=0,r=0;for(t=0,n=e.length;t<n;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),i+=l.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:i/r}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),h=DN(t,u);h<i&&(i=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function Fn(e,t){return t&&(Oe(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function ds(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function hL(e,t){const{element:n,datasetIndex:s,index:i}=t,r=e.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:e,label:o,parsed:r.getParsed(i),raw:e.data.datasets[s].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:n}}function B_(e,t){const n=e.chart.ctx,{body:s,footer:i,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=sn(t.bodyFont),u=sn(t.titleFont),h=sn(t.footerFont),d=r.length,f=i.length,g=s.length,_=On(t.padding);let y=_.height,b=0,I=s.reduce((O,L)=>O+L.before.length+L.lines.length+L.after.length,0);if(I+=e.beforeBody.length+e.afterBody.length,d&&(y+=d*u.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),I){const O=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;y+=g*O+(I-g)*l.lineHeight+(I-1)*t.bodySpacing}f&&(y+=t.footerMarginTop+f*h.lineHeight+(f-1)*t.footerSpacing);let R=0;const k=function(O){b=Math.max(b,n.measureText(O).width+R)};return n.save(),n.font=u.string,Ut(e.title,k),n.font=l.string,Ut(e.beforeBody.concat(e.afterBody),k),R=t.displayColors?o+2+t.boxPadding:0,Ut(s,O=>{Ut(O.before,k),Ut(O.lines,k),Ut(O.after,k)}),R=0,n.font=h.string,Ut(e.footer,k),n.restore(),b+=_.width,{width:b,height:y}}function dL(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function fL(e,t,n,s){const{x:i,width:r}=s,o=n.caretSize+n.caretPadding;if(e==="left"&&i+r+o>t.width||e==="right"&&i-r-o<0)return!0}function pL(e,t,n,s){const{x:i,width:r}=n,{width:o,chartArea:{left:a,right:l}}=e;let u="center";return s==="center"?u=i<=(a+l)/2?"left":"right":i<=r/2?u="left":i>=o-r/2&&(u="right"),fL(u,e,t,n)&&(u="center"),u}function j_(e,t,n){const s=n.yAlign||t.yAlign||dL(e,n);return{xAlign:n.xAlign||t.xAlign||pL(e,t,n,s),yAlign:s}}function gL(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function mL(e,t,n){let{y:s,height:i}=e;return t==="top"?s+=n:t==="bottom"?s-=i+n:s-=i/2,s}function z_(e,t,n,s){const{caretSize:i,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,u=i+r,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:g}=Go(o);let _=gL(t,a);const y=mL(t,l,u);return l==="center"?a==="left"?_+=u:a==="right"&&(_-=u):a==="left"?_-=Math.max(h,f)+i:a==="right"&&(_+=Math.max(d,g)+i),{x:_n(_,0,s.width-t.width),y:_n(y,0,s.height-t.height)}}function hl(e,t,n){const s=On(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function $_(e){return Fn([],ds(e))}function _L(e,t,n){return Gr(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function H_(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const GE={beforeTitle:us,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:us,beforeBody:us,beforeLabel:us,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return $e(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:us,afterBody:us,beforeFooter:us,footer:us,afterFooter:us};function Ze(e,t,n,s){const i=e[t].call(n,s);return typeof i>"u"?GE[t].call(n,s):i}class W_ extends Oa{static positioners=Co;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&n.options.animation&&s.animations,r=new ME(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=_L(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,i=Ze(s,"beforeTitle",this,t),r=Ze(s,"title",this,t),o=Ze(s,"afterTitle",this,t);let a=[];return a=Fn(a,ds(i)),a=Fn(a,ds(r)),a=Fn(a,ds(o)),a}getBeforeBody(t,n){return $_(Ze(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,i=[];return Ut(t,r=>{const o={before:[],lines:[],after:[]},a=H_(s,r);Fn(o.before,ds(Ze(a,"beforeLabel",this,r))),Fn(o.lines,Ze(a,"label",this,r)),Fn(o.after,ds(Ze(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(t,n){return $_(Ze(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,i=Ze(s,"beforeFooter",this,t),r=Ze(s,"footer",this,t),o=Ze(s,"afterFooter",this,t);let a=[];return a=Fn(a,ds(i)),a=Fn(a,ds(r)),a=Fn(a,ds(o)),a}_createItems(t){const n=this._active,s=this.chart.data,i=[],r=[],o=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(hL(this.chart,n[l]));return t.filter&&(a=a.filter((h,d,f)=>t.filter(h,d,f,s))),t.itemSort&&(a=a.sort((h,d)=>t.itemSort(h,d,s))),Ut(a,h=>{const d=H_(t.callbacks,h);i.push(Ze(d,"labelColor",this,h)),r.push(Ze(d,"labelPointStyle",this,h)),o.push(Ze(d,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,n){const s=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=Co[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=B_(this,s),u=Object.assign({},a,l),h=j_(this.chart,s,u),d=z_(s,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,i){const r=this.getCaretPosition(t,s,i);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(t,n,s){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:d}=Go(a),{x:f,y:g}=t,{width:_,height:y}=n;let b,I,R,k,O,L;return r==="center"?(O=g+y/2,i==="left"?(b=f,I=b-o,k=O+o,L=O-o):(b=f+_,I=b+o,k=O-o,L=O+o),R=b):(i==="left"?I=f+Math.max(l,h)+o:i==="right"?I=f+_-Math.max(u,d)-o:I=this.caretX,r==="top"?(k=g,O=k-o,b=I-o,R=I+o):(k=g+y,O=k+o,b=I+o,R=I-o),L=k),{x1:b,x2:I,x3:R,y1:k,y2:O,y3:L}}drawTitle(t,n,s){const i=this.title,r=i.length;let o,a,l;if(r){const u=Sr(s.rtl,this.x,this.width);for(t.x=hl(this,s.titleAlign,s),n.textAlign=u.textAlign(s.titleAlign),n.textBaseline="middle",o=sn(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(i[l],u.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,n,s,i,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:u}=r,h=sn(r.bodyFont),d=hl(this,"left",r),f=i.x(d),g=l<h.lineHeight?(h.lineHeight-l)/2:0,_=n.y+g;if(r.usePointStyle){const y={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=i.leftForLtr(f,u)+u/2,I=_+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,l_(t,y,b,I),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,l_(t,y,b,I)}else{t.lineWidth=Ot(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const y=i.leftForLtr(f,u),b=i.leftForLtr(i.xPlus(f,1),u-2),I=Go(o.borderRadius);Object.values(I).some(R=>R!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,qh(t,{x:y,y:_,w:u,h:l,radius:I}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),qh(t,{x:b,y:_+1,w:u-2,h:l-2,radius:I}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(y,_,u,l),t.strokeRect(y,_,u,l),t.fillStyle=o.backgroundColor,t.fillRect(b,_+1,u-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:h}=s,d=sn(s.bodyFont);let f=d.lineHeight,g=0;const _=Sr(s.rtl,this.x,this.width),y=function(v){n.fillText(v,_.x(t.x+g),t.y+f/2),t.y+=f+r},b=_.textAlign(o);let I,R,k,O,L,G,T;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,t.x=hl(this,b,s),n.fillStyle=s.bodyColor,Ut(this.beforeBody,y),g=a&&b!=="right"?o==="center"?u/2+h:u+2+h:0,O=0,G=i.length;O<G;++O){for(I=i[O],R=this.labelTextColors[O],n.fillStyle=R,Ut(I.before,y),k=I.lines,a&&k.length&&(this._drawColorBox(n,t,O,_,s),f=Math.max(d.lineHeight,l)),L=0,T=k.length;L<T;++L)y(k[L]),f=d.lineHeight;Ut(I.after,y)}g=0,f=d.lineHeight,Ut(this.afterBody,y),t.y-=r}drawFooter(t,n,s){const i=this.footer,r=i.length;let o,a;if(r){const l=Sr(s.rtl,this.x,this.width);for(t.x=hl(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=sn(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(i[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,n,s,i){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:u,height:h}=s,{topLeft:d,topRight:f,bottomLeft:g,bottomRight:_}=Go(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(t,n,s,i),n.lineTo(a+u-f,l),n.quadraticCurveTo(a+u,l,a+u,l+f),o==="center"&&r==="right"&&this.drawCaret(t,n,s,i),n.lineTo(a+u,l+h-_),n.quadraticCurveTo(a+u,l+h,a+u-_,l+h),o==="bottom"&&this.drawCaret(t,n,s,i),n.lineTo(a+g,l+h),n.quadraticCurveTo(a,l+h,a,l+h-g),o==="center"&&r==="left"&&this.drawCaret(t,n,s,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const o=Co[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=B_(this,t),l=Object.assign({},o,this._size),u=j_(n,t,l),h=z_(t,l,u,n);(i._to!==h.x||r._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=On(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,i,n),DE(t,n.textDirection),r.y+=o.top,this.drawTitle(r,t,n),this.drawBody(r,t,n),this.drawFooter(r,t,n),OE(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,i=t.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),r=!cc(s,i),o=this._positionChanged(i,n);(r||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,n,s),a=this._positionChanged(o,t),l=n||!cc(o,r)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,s,i){const r=this.options;if(t.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:s,caretY:i,options:r}=this,o=Co[r.position].call(this,t,n);return o!==!1&&(s!==o.x||i!==o.y)}}var yL={id:"tooltip",_element:W_,positioners:Co,afterInit(e,t,n){n&&(e.tooltip=new W_({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:GE},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const eu={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},en=Object.keys(eu);function q_(e,t){return e-t}function G_(e,t){if($e(t))return null;const n=e._adapter,{parser:s,round:i,isoWeekday:r}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),Ds(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(fc(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,i)),+o)}function K_(e,t,n,s){const i=en.length;for(let r=en.indexOf(e);r<i-1;++r){const o=eu[en[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(a*o.size))<=s)return en[r]}return en[i-1]}function vL(e,t,n,s,i){for(let r=en.length-1;r>=en.indexOf(n);r--){const o=en[r];if(eu[o].common&&e._adapter.diff(i,s,o)>=t-1)return o}return en[n?en.indexOf(n):0]}function bL(e){for(let t=en.indexOf(e)+1,n=en.length;t<n;++t)if(eu[en[t]].common)return en[t]}function Y_(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:i}=mf(n,t),r=n[s]>=t?n[s]:n[i];e[r]=!0}}function wL(e,t,n,s){const i=e._adapter,r=+i.startOf(t[0].value,s),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+i.add(a,1,s))l=n[a],l>=0&&(t[l].major=!0);return t}function Q_(e,t,n){const s=[],i={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],i[a]=o,s.push({value:a,major:!1});return r===0||!n?s:wL(e,s,i,n)}class X_ extends tu{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),i=this._adapter=new $V._date(t.adapters.date);i.init(n),Ho(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:G_(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(i=Math.min(i,u.min)),!a&&!isNaN(u.max)&&(r=Math.max(r,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Ds(i)&&!isNaN(i)?i:+n.startOf(Date.now(),s),r=Ds(r)&&!isNaN(r)?r:+n.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=NN(i,r,o);return this._unit=n.unit||(s.autoSkip?K_(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):vL(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:bL(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),Q_(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,i,r;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?n=1-i:n=(this.getDecimalForValue(t[1])-i)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=_n(n,0,o),s=_n(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,i=this.options,r=i.time,o=r.unit||K_(r.minUnit,n,s,this._getLabelCapacity(n)),a=jt(i.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,u=fc(l)||l===!0,h={};let d=n,f,g;if(u&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,u?"day":o),t.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const _=i.ticks.source==="data"&&this.getDataTimestamps();for(f=d,g=0;f<s;f=+t.add(f,a,o),g++)Y_(h,f,_);return(f===s||i.bounds==="ticks"||g===1)&&Y_(h,f,_),Object.keys(h).sort(q_).map(y=>+y)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const i=this.options.time.displayFormats,r=this._unit,o=n||i[r];return this._adapter.format(t,o)}_tickFormatFunction(t,n,s,i){const r=this.options,o=r.ticks.callback;if(o)return Yt(o,[t,n,s],this);const a=r.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&a[l],d=u&&a[u],f=s[n],g=u&&d&&f&&f.major;return this._adapter.format(t,i||(g?d:h))}generateTickLabels(t){let n,s,i;for(n=0,s=t.length;n<s;++n)i=t[n],i.label=this._tickFormatFunction(i.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,i=Vi(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,i=s[n.unit]||s.millisecond,r=this._tickFormatFunction(t,0,Q_(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,s=i.length;n<s;++n)t=t.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const i=this.getLabels();for(n=0,s=i.length;n<s;++n)t.push(G_(this,i[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return LN(t.sort(q_))}}function dl(e,t,n){let s=0,i=e.length-1,r,o,a,l;n?(t>=e[s].pos&&t<=e[i].pos&&({lo:s,hi:i}=Hh(e,"pos",t)),{pos:r,time:a}=e[s],{pos:o,time:l}=e[i]):(t>=e[s].time&&t<=e[i].time&&({lo:s,hi:i}=Hh(e,"time",t)),{time:r,pos:a}=e[s],{time:o,pos:l}=e[i]);const u=o-r;return u?a+(l-a)*(t-r)/u:a}class OF extends X_{static id="timeseries";static defaults=X_.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=dl(n,this.min),this._tableRange=dl(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,i=[],r=[];let o,a,l,u,h;for(o=0,a=t.length;o<a;++o)u=t[o],u>=n&&u<=s&&i.push(u);if(i.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=i.length;o<a;++o)h=i[o+1],l=i[o-1],u=i[o],Math.round((h+l)/2)!==u&&r.push({time:u,pos:o/(a-1)});return r}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(dl(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return dl(this._table,s*this._tableRange+this._minPos,!0)}}const EL={class:"mood_trends_holder"},TL={key:0,class:"mood_trends_timerange_holder"},IL=["onClick"],AL={key:1,class:"mood_trends_graph_holder"},SL={key:2,class:"mood_trends_items"},RL={class:"mood_trend_explained_holder"},CL={key:3,class:"inter font_size_xs"},xL={__name:"moodTrends",setup(e){Yh.register(zV,iL,yL,uL);const t=Bt(()=>[{label:"Very Sad",ref:"very_sad",icon:"far fa-sad-tear",color:"#6A5D7B"},{label:"Sad",ref:"sad",icon:"far fa-frown",color:"#9FB1BC"},{label:"Neutral",ref:"neutral",icon:"far fa-meh",color:"#87BFBA"},{label:"Happy",ref:"happy",icon:"far fa-grin",color:"#F3C677"},{label:"Very Happy",ref:"very_happy",icon:"far fa-grin-beam",color:"#F28C8C"}]),n=rn(),s=Z("7_days"),i=Z([]),r=Z(null),o=[{key:"7_days",label:"7 Days",days:7},{key:"30_days",label:"30 Days",days:30},{key:"90_days",label:"3 Months",days:90}],a=n.userData.uid;function l(f){const g=o.find(b=>b.key===f),_=new Date,y=new Date;return y.setDate(_.getDate()-g.days),{start:y,end:_}}async function u(){const f=await Er(De(ue,"mood",a));if(!f.exists()){i.value=[],d();return}const g=f.data(),{start:_,end:y}=l(s.value);i.value=Object.values(g).filter(b=>{if(!b.mood_logged)return!1;let I;return b.mood_logged.toDate?I=b.mood_logged.toDate():I=new Date(b.mood_logged),I>=_&&I<=y}),d()}function h(){const f={};return i.value.forEach(g=>{const _=g.mood_value||g.mood||"Unknown";f[_]=(f[_]||0)+1}),{labels:Object.keys(f),data:Object.values(f)}}function d(){Ur(()=>{const f=document.getElementById("moodPieChart")?.getContext("2d");if(!f)return;const{data:g}=h();r.value?(r.value.data.datasets[0].data=g,r.value.update()):r.value=new Yh(f,{type:"pie",data:{datasets:[{data:g,backgroundColor:["#6A5D7B","#9FB1BC","#87BFBA","#F3C677","#F28C8C"]}]},options:{responsive:!0,plugins:{legend:{position:"bottom"},tooltip:{enabled:!0}}}})})}return Es(s,u),rs(u),(f,g)=>(q(),J("div",EL,[g[3]||(g[3]=C("div",{class:"mood_trends_heading_holder inter font_size_xs"}," My Mood Overview ",-1)),g[4]||(g[4]=C("br",null,null,-1)),i.value.length>0?(q(),J("div",TL,[(q(),J(Tt,null,te(o,_=>C("div",{key:_.key,class:En(["mood_trends_timerange inter font_size_xxs",{mood_trends_timerange_selected:s.value===_.key}]),onClick:y=>s.value=_.key},yt(_.label),11,IL)),64))])):de("",!0),g[5]||(g[5]=C("br",null,null,-1)),g[6]||(g[6]=C("br",null,null,-1)),i.value.length>0?(q(),J("div",AL,[...g[0]||(g[0]=[C("canvas",{id:"moodPieChart",width:"400",height:"300"},null,-1)])])):de("",!0),g[7]||(g[7]=C("br",null,null,-1)),i.value.length>0?(q(),J("div",SL,[(q(!0),J(Tt,null,te(t.value,_=>(q(),J("div",RL,[C("div",{class:"mood_trend_color",style:As({backgroundColor:_.color})},null,4),g[1]||(g[1]=ie("  ",-1)),C("i",{class:En(_.icon),style:As([{"font-size":"1.4rem"},{color:_.color}])},null,6),g[2]||(g[2]=ie(" ",-1))]))),256))])):de("",!0),i.value.length===0?(q(),J("div",CL,"You have not logged any moods as of yet.")):de("",!0)]))}},KE=qe(xL,[["__scopeId","data-v-cefbfe3a"]]),PL={class:"journal_selection_holder inter font_size_xs"},kL=["onClick"],DL={key:0,class:"journal_entry_holder"},OL={class:"journal_entry_date_holder inter font_size_xs"},ML={class:"journal_entry_content_holder"},NL={key:1},VL={class:"journal_list_holder"},LL={class:"journal_list_heading inter font_size_sm"},FL={class:"journal_list_content inter font_size_xs"},UL={class:"journal_list_timestamp inter font_size_xxs"},BL={key:1,class:"inter font_size_sm"},jL={__name:"journal",emits:["close"],setup(e,{emit:t}){const n=t,s=rn();s.getJournalEntries();const i=Z("journalEntry"),r=[{key:"journalEntry",label:"New Journal Entry",cornerClass:"right-rounded"},{key:"journalList",label:"Journal List",cornerClass:"left-rounded"}],o=Z(new Date().toDateString()),a=Z(new Date().toLocaleTimeString()),l=Z(""),u=Z(""),h=Z(!1),d=Z(""),f=y=>{i.value=y,o.value=new Date().toDateString(),a.value=new Date().toLocaleTimeString(),s.getJournalEntries()},g=()=>{h.value=!1,d.value=""},_=async()=>{if(!l.value){h.value=!0,d.value="Please give a journal title.";return}if(!u.value){h.value=!0,d.value="Please give journal content.";return}const b={[Date.now()]:{journalEntryHeading:l.value,journalEntryContent:u.value,journalEntryLogged:xn()}};try{await bn(De(ue,"journals",s.userData.uid),b,{merge:!0}),h.value=!0,d.value="Your journal entry has been logged.",l.value="",u.value="",o.value=new Date().toDateString(),a.value=new Date().toLocaleTimeString(),n("close")}catch(I){console.error("Failed to save journal:",I),h.value=!0,d.value="Failed to save journal. Please try again."}};return(y,b)=>(q(),J(Tt,null,[b[4]||(b[4]=C("div",{class:"journal_header_holder inter font_size_xs"}," My Journal ",-1)),C("div",PL,[(q(),J(Tt,null,te(r,I=>C("div",{key:I.key,class:En(["journal_selection",{active:i.value===I.key,[I.cornerClass]:!0}]),onClick:R=>f(I.key)},yt(I.label),11,kL)),64))]),i.value==="journalEntry"?(q(),J("div",DL,[C("div",OL,[C("div",null,[ie(yt(o.value)+" ",1),b[2]||(b[2]=C("br",null,null,-1)),ie(" "+yt(a.value),1)])]),C("div",ML,[Mt(C("input",{placeholder:"Give us a title.",class:"journal_input inter font_size_xs","onUpdate:modelValue":b[0]||(b[0]=I=>l.value=I)},null,512),[[re,l.value]]),Mt(C("textarea",{placeholder:"What's weighing on your mind today? Or what's a small win?",class:"journal_textarea inter font_size_xs","onUpdate:modelValue":b[1]||(b[1]=I=>u.value=I)},null,512),[[re,u.value]])]),b[3]||(b[3]=C("br",null,null,-1)),C("div",{class:"save_button inter font_size_xxs",onClick:_}," Save "),h.value?(q(),Se(qr,{key:0,errorMessage:d.value,onClose:g},null,8,["errorMessage"])):de("",!0)])):(q(),J("div",NL,[C("div",VL,[Wn(s).journalData?(q(!0),J(Tt,{key:0},te(Wn(s).journalData,(I,R)=>(q(),J("div",{key:R,class:"journal_list_item inter"},[C("div",LL,yt(I.journalEntryHeading),1),C("div",FL,yt(I.journalEntryContent),1),C("div",UL," Logged on: "+yt(new Date(I.journalEntryLogged.seconds*1e3).toLocaleString()),1)]))),128)):(q(),J("div",BL,"You don't have any journals logged as of yet."))])]))],64))}},YE=qe(jL,[["__scopeId","data-v-056c2c16"]]),zL={class:"mood_tracker_holder"},$L={class:"mood_icons_holder"},HL=["onClick"],WL=["onClick"],qL={class:"influence_holder",style:{height:"25rem"}},GL={class:"influence_items_holder"},KL=["value"],YL={class:"influence_holder"},QL={style:{width:"100%",height:"15rem",display:"flex","flex-flow":"column nowrap","align-items":"center","justify-content":"center"}},XL={__name:"mood",emits:["close"],setup(e,{emit:t}){const n=rn(),s=t,i=Bt(()=>[{label:"Very Sad",ref:"very_sad",icon:"far fa-sad-tear"},{label:"Sad",ref:"sad",icon:"far fa-frown"},{label:"Neutral",ref:"neutral",icon:"far fa-meh"},{label:"Happy",ref:"happy",icon:"far fa-grin"},{label:"Very Happy",ref:"very_happy",icon:"far fa-grin-beam"}]),r=Bt(()=>[{label:"Sleep Quality",ref:"sleep_quality"},{label:"Nutrition",ref:"nutrition"},{label:"Physical Activity",ref:"physical_activity"},{label:"Social Connection",ref:"social_connection"},{label:"Mindset",ref:"mindset"},{label:"Environment",ref:"environment"},{label:"None",ref:"none"}]),o=Z(!1),a=Z(""),l=Z([]),u=Z(""),h=Z("neutral"),d=_=>{h.value=_},f=async()=>{if(l.value.length===0){o.value=!0,a.value="Please select an influence.";return}const y={[new Date().toISOString().split("T")[0]]:{mood:h.value,influences:l.value,optional_notes:u.value,mood_logged:xn()}};await bn(De(ue,"mood",n.userData.uid),y,{merge:!0}),o.value=!0,a.value="Thank you for logging your mood. It will be taken into consideration.",n.setMoodData(y),s("close")},g=()=>{o.value=!1,a.value=""};return(_,y)=>(q(),J(Tt,null,[C("div",zL,[y[6]||(y[6]=C("div",{class:"mood_heading_holder inter font_size_xs"},"How am I feeling today?",-1)),C("div",$L,[(q(!0),J(Tt,null,te(i.value,b=>(q(),J("div",{class:"mood_icon_holder",key:b.ref},[h.value===b.ref?(q(),J("div",{key:0,class:En(b.icon),style:{"font-size":"3rem",border:"0.2rem solid #87bfba",padding:"0.5rem","border-radius":"50%"},onClick:I=>d(b.ref)},null,10,HL)):(q(),J("div",{key:1,class:En(b.icon),style:{"font-size":"3rem"},onClick:I=>d(b.ref)},null,10,WL))]))),128))]),C("div",qL,[y[4]||(y[4]=C("div",{class:"influence_heading_holder inter font_size_xs"},[C("b",null,"What might be influencing this?")],-1)),C("div",GL,[(q(!0),J(Tt,null,te(r.value,b=>(q(),J("div",{class:"influence_item_holder inter font_size_xxs",key:b.ref,style:{height:"12%"}},[y[3]||(y[3]=ie(" ",-1)),Mt(C("input",{type:"checkbox","onUpdate:modelValue":y[0]||(y[0]=I=>l.value=I),value:b.ref},null,8,KL),[[av,l.value]]),ie(""+yt(b.label),1)]))),128))])]),C("div",YL,[C("div",QL,[y[5]||(y[5]=C("div",{class:"influence_heading_holder inter font_size_xs"},[C("b",null,"Optional Notes")],-1)),Mt(C("textarea",{placeholder:"Write a few words about why you feel the way you feel",style:{width:"90%",height:"60%",padding:"0.5rem",border:"0.1rem solid #87bfba","border-radius":"1rem"},class:"inter font_size_xs","onUpdate:modelValue":y[1]||(y[1]=b=>u.value=b)},null,512),[[re,u.value]])])]),C("div",{class:"save_button inter font_size_xxs",onClick:y[2]||(y[2]=b=>f())},"Save")]),o.value?(q(),Se(qr,{key:0,errorMessage:a.value,onClose:g},null,8,["errorMessage"])):de("",!0)],64))}},JL=qe(XL,[["__scopeId","data-v-7618c925"]]),ZL={key:0,class:"empty_therapy_list inter font_size_xs"},tF={key:1,class:"therapy_sign_up"},eF={key:0,class:"therapy_sign_up_step_1"},nF={class:"therapist_sign_up_form_holder"},sF=["value"],iF=["value"],rF=["value"],oF={key:1,style:{width:"100%"}},aF={key:0,style:{width:"100%"}},lF={class:"therapist_item_holder"},cF={class:"contact_buttons_holder"},uF=["onClick"],hF=["onClick"],dF={key:1,class:"empty_therapy_list inter font_size_xs"},fF={key:2,style:{width:"100%"}},pF={class:"search_therapists_holder"},gF={class:"search_input_holder"},mF={key:0,class:"empty_therapy_list inter font_size_xs"},_F={class:"therapist_item_holder"},yF={style:{display:"flex","flex-flow":"row nowrap"}},vF=["onClick"],bF=["onClick"],wF={key:2,class:"sign_up_button_holder inter font_size_s"},EF={key:3,class:"verify_therapists_holder inter font_size_s"},TF={__name:"therapists",setup(e){const t=rn();t.getTherapists();const n=Z(""),s=Z(t.userData.personalInfo.email),i=Z(t.userData.personalInfo.contactNumber),r=Z(t.userData.personalInfo.name),o=Z(""),a=Z(""),l=Z(""),u=Z(""),h=Z(null),d=Z(null),f=Z("home_list"),g=Z(!!t.userData.admin),_=Z(!1),y=Z(""),b=[{value:"dr",text:"Dr."},{value:"mr",text:"Mr."},{value:"mrs",text:"Mrs."},{value:"miss",text:"Miss."},{value:"ms",text:"Ms."}],I=[{value:"phd",text:"PhD"},{value:"msc",text:"MSc"},{value:"ma",text:"MA"}],R=[{value:"psychologist",text:"Psychologist"},{value:"psychiatrist",text:"Psychiatrist"},{value:"social_worker",text:"Social Worker"}],k=Q=>Q?Q.replace("_"," ").replace(/^./,U=>U.toUpperCase()):"",O=Bt(()=>(t.therapists||[]).filter(Q=>Q.isVerified)),L=Bt(()=>(t.therapists||[]).filter(Q=>!Q.isVerified)),G=Bt(()=>{if(!n.value)return O.value;const Q=n.value.toLowerCase();return O.value.filter(U=>U.nameSurname.toLowerCase().includes(Q))});Es(L,Q=>{f.value==="verify_therapist"&&Q.length===0&&(f.value="home_list")});const T=()=>f.value="step_1",v=()=>f.value="verify_therapist",E=()=>f.value="home_list",x=async()=>{if(!h.value){y.value="Please select an address",_.value=!0;return}const Q=De(ue,"therapists",t.userData.uid);if((await Er(Q)).exists()){y.value="You are already registered as a therapist.",_.value=!0;return}await bn(Q,{email:s.value,nameSurname:r.value,userName:o.value,title:a.value,academicTitle:l.value,credential:u.value,address:h.value,isVerified:!1,createdAt:new Date}),y.value="Thank you. You will be redirected shortly.",_.value=!0},P=async Q=>{await bn(De(ue,"therapists",Q.id),{isVerified:!0},{merge:!0}),f.value="home_list",t.getTherapists()},M=Q=>bn(De(ue,"therapists",Q.id),{declined:!0},{merge:!0}),A=()=>new Promise(Q=>{if(window.google?.maps?.places)return Q();const U=document.createElement("script");U.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBWGRHjfWWoBWojyOBuGi75ACgNAkGobws&libraries=places",U.onload=Q,document.head.appendChild(U)});Es(f,async Q=>{if(Q!=="step_1")return;await Ur(),await A();const U=new google.maps.places.Autocomplete(d.value,{types:["address"],componentRestrictions:{country:"za"}});U.addListener("place_changed",()=>{const tt=U.getPlace();h.value={city:tt.address_components?.find(Gt=>Gt.types.includes("locality"))?.long_name||"",province:tt.address_components?.find(Gt=>Gt.types.includes("administrative_area_level_1"))?.long_name||""}})});const It=async Q=>[],_t=Q=>{console.log(Q.contactNumber),window.location.href=`tel:${Q.contactNumber}`},ht=Q=>{const U=encodeURIComponent("Therapy Session Enquiry");window.location.href=`mailto:${Q.email}?subject=${U}`};return(Q,U)=>(q(),J(Tt,null,[f.value==="home_list"&&O.value.length===0&&L.value.length===0?(q(),J("div",ZL,[...U[10]||(U[10]=[C("br",null,null,-1),ie(" No therapists are listed at this moment. ",-1)])])):(q(),J("div",tF,[f.value==="step_1"?(q(),J("div",eF,[U[14]||(U[14]=C("div",{class:"therapy_sign_up_heading inter font_size_xs"},[C("br"),C("b",null,"Let's get you signed up and listed!"),C("br"),C("br")],-1)),C("form",nF,[Mt(C("input",{class:"form_input inter font_size_xs",type:"text",placeholder:"Email Address","onUpdate:modelValue":U[0]||(U[0]=tt=>s.value=tt)},null,512),[[re,s.value]]),Mt(C("input",{class:"form_input inter font_size_xs",type:"text",placeholder:"Contact Number","onUpdate:modelValue":U[1]||(U[1]=tt=>i.value=tt)},null,512),[[re,i.value]]),Mt(C("input",{class:"form_input inter font_size_xs",type:"text",placeholder:"Username","onUpdate:modelValue":U[2]||(U[2]=tt=>o.value=tt)},null,512),[[re,o.value]]),Mt(C("select",{class:"form_input inter font_size_xs","onUpdate:modelValue":U[3]||(U[3]=tt=>a.value=tt)},[U[11]||(U[11]=C("option",{disabled:"",value:""},"Select your title",-1)),(q(),J(Tt,null,te(b,tt=>C("option",{key:tt.value,value:tt.value},yt(tt.text),9,sF)),64))],512),[[qn,a.value]]),Mt(C("input",{class:"form_input inter font_size_xs",type:"text",placeholder:"Name & Surname","onUpdate:modelValue":U[4]||(U[4]=tt=>r.value=tt)},null,512),[[re,r.value]]),Mt(C("select",{class:"form_input inter font_size_xs","onUpdate:modelValue":U[5]||(U[5]=tt=>l.value=tt)},[U[12]||(U[12]=C("option",{disabled:"",value:""},"Select your academic title",-1)),(q(),J(Tt,null,te(I,tt=>C("option",{key:tt.value,value:tt.value},yt(tt.text),9,iF)),64))],512),[[qn,l.value]]),Mt(C("select",{class:"form_input inter font_size_xs","onUpdate:modelValue":U[6]||(U[6]=tt=>u.value=tt)},[U[13]||(U[13]=C("option",{disabled:"",value:""},"Select your credential",-1)),(q(),J(Tt,null,te(R,tt=>C("option",{key:tt.value,value:tt.value},yt(tt.text),9,rF)),64))],512),[[qn,u.value]]),C("input",{ref_key:"addressInput",ref:d,class:"form_input inter font_size_xs",type:"text",placeholder:"Search address"},null,512)]),C("button",{class:"form_button inter font_size_xs",onClick:x}," Confirm "),C("div",{class:"sign_up_button_holder inter font_size_s"},[C("i",{class:"fas fa-times",onClick:E})])])):f.value==="verify_therapist"&&g.value?(q(),J("div",oF,[L.value.length?(q(),J("div",aF,[(q(!0),J(Tt,null,te(L.value,tt=>(q(),J("div",{class:"therapist_items_holder inter font_size_xs",key:tt.id},[C("div",lF,[C("b",null,yt(tt.nameSurname),1),U[17]||(U[17]=C("br",null,null,-1)),ie(" "+yt(tt.email),1),U[18]||(U[18]=C("br",null,null,-1)),ie(" "+yt(k(tt.credential)),1),U[19]||(U[19]=C("br",null,null,-1)),ie(" "+yt(tt.address.city)+", "+yt(tt.address.province)+" ",1),C("div",cF,[C("div",{class:"contact_button",onClick:Gt=>P(tt)},[...U[15]||(U[15]=[C("i",{class:"fas fa-user-check"},null,-1)])],8,uF),C("div",{class:"contact_button",onClick:Gt=>M(tt)},[...U[16]||(U[16]=[C("i",{class:"fas fa-user-times"},null,-1)])],8,hF)])])]))),128))])):(q(),J("div",dF,[...U[20]||(U[20]=[C("br",null,null,-1),ie(" No therapists need verifying at this moment. ",-1)])])),C("div",{class:"sign_up_button_holder inter font_size_s"},[C("i",{class:"fas fa-times",onClick:E})])])):f.value==="home_list"?(q(),J("div",fF,[C("div",pF,[C("div",gF,[Mt(C("input",{class:"search_input inter font_size_xs",type:"text",placeholder:"Search Therapist","onUpdate:modelValue":U[7]||(U[7]=tt=>n.value=tt)},null,512),[[re,n.value]]),C("div",{class:"search_button_holder",onClick:U[8]||(U[8]=tt=>It())},[...U[21]||(U[21]=[C("i",{class:"fa fa-search"},null,-1)])])]),G.value.length===0?(q(),J("div",mF,[...U[22]||(U[22]=[C("br",null,null,-1),ie(" No verified therapists available yet. ",-1)])])):(q(!0),J(Tt,{key:1},te(G.value,tt=>(q(),J("div",{class:"therapist_items_holder inter font_size_xs",key:tt.id},[C("div",_F,[C("b",null,yt(tt.nameSurname),1),U[26]||(U[26]=C("br",null,null,-1)),ie(" "+yt(k(tt.credential)),1),U[27]||(U[27]=C("br",null,null,-1)),ie(" "+yt(tt.address.city)+", "+yt(tt.address.province)+" ",1),U[28]||(U[28]=C("br",null,null,-1)),U[29]||(U[29]=C("br",null,null,-1)),C("div",yF,[C("div",{style:{width:"3rem",height:"1.5rem","background-color":"#87bfba",color:"white",display:"flex","flex-flow":"row nowrap","justify-content":"center","align-items":"center","border-radius":"1rem"},onClick:Gt=>_t(tt)},[...U[23]||(U[23]=[C("i",{class:"fa fa-phone"},null,-1)])],8,vF),U[25]||(U[25]=ie("  ",-1)),C("div",{style:{width:"3rem",height:"1.5rem","background-color":"#87bfba",color:"white",display:"flex","flex-flow":"row nowrap","justify-content":"center","align-items":"center","border-radius":"1rem"},onClick:Gt=>ht(tt)},[...U[24]||(U[24]=[C("i",{class:"fa fa-envelope"},null,-1)])],8,bF)])])]))),128))])])):de("",!0),_.value?(q(),Se(qr,{key:3,errorMessage:y.value,onClose:U[9]||(U[9]=tt=>_.value=!1)},null,8,["errorMessage"])):de("",!0)])),f.value==="home_list"?(q(),J("div",wF,[C("i",{class:"fas fa-plus",onClick:T})])):de("",!0),f.value==="home_list"&&g.value?(q(),J("div",EF,[C("i",{class:"fas fa-award",onClick:v})])):de("",!0)],64))}},IF=qe(TF,[["__scopeId","data-v-599ad955"]]),AF={class:"navigation_bar_holder"},SF=["onClick"],RF=["innerHTML"],CF={__name:"navigation",setup(e){const t={home:{name:"Home",icon:'<i class="fa fa-home"></i>'},journal:{name:"Journal",icon:'<i class="fa fa-book"></i>'},therapists:{name:"Therapists",icon:'<i class="fa fa-address-book"></i>'},courses:{name:"Courses",icon:'<i class="fas fa-graduation-cap"></i>'},profile:{name:"Profile",icon:'<i class="fa fa-id-card"></i>'}};rn();const n=Z("home"),s=i=>{n.value=i,localStorage.setItem("currentPage",i)};return rs(()=>{const i=localStorage.getItem("currentPage");i&&t[i]&&(n.value=i)}),(i,r)=>(q(),J(Tt,null,[n.value==="profile"?(q(),Se(pE,{key:0,onSetPage:s})):n.value==="home"?(q(),Se(sE,{key:1,onSetPage:s})):n.value==="mood"?(q(),Se(JL,{key:2})):n.value==="journal"?(q(),Se(YE,{key:3})):n.value==="therapists"?(q(),Se(IF,{key:4})):n.value==="moodTrends"?(q(),Se(KE,{key:5})):n.value==="courses"?(q(),Se(iE,{key:6,onSetPage:s})):n.value==="createCourses"?(q(),Se(rE,{key:7,onSetPage:s})):de("",!0),C("div",AF,[(q(),J(Tt,null,te(t,(o,a)=>C("div",{class:"navigation_item_holder inter font_size_xxs",key:a},[C("div",{class:En(["navigation_item",{active:n.value===a}]),onClick:l=>s(a)},[C("div",{innerHTML:o.icon},null,8,RF),C("div",null,yt(o.name),1)],10,SF)])),64))])],64))}},xF=qe(CF,[["__scopeId","data-v-89548cb2"]]),PF=[{path:"/",name:"Loading",component:bM},{path:"/login",name:"Login",component:vO},{path:"/navigation",name:"Navigation",component:xF},{path:"/home/",name:"Home",component:sE,props:!0},{path:"/profile/",name:"Profile",component:pE,props:!0},{path:"/journal/",name:"JournalEntry",component:YE,props:!0},{path:"/mood/",name:"MoodTrends",component:KE,props:!0},{path:"/courses/",name:"Courses",component:iE,props:!0},{path:"/appStreak/",name:"AppStreak",component:_M,props:!0},{path:"/createCourses/",name:"CreateCourses",component:rE,props:!0}],QE=lS({history:BA(),routes:PF});QE.beforeEach(async(e,t,n)=>{const s=rn();if(s.userData||await s.fetchUserData(),!s.userData?.uid&&e.name!=="Login")return n({name:"Login"});n()});let J_=null;ws.onAuthStateChanged(()=>{if(!J_){const e=W0(nA);e.use(K0()),e.use(QE),e.mount("#app"),J_=e}});
