(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Kh(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const jt={},yr=[],$n=()=>{},W_=()=>!1,pc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Gh=e=>e.startsWith("onUpdate:"),ze=Object.assign,Yh=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},rT=Object.prototype.hasOwnProperty,Nt=(e,t)=>rT.call(e,t),dt=Array.isArray,vr=e=>fa(e)==="[object Map]",Fr=e=>fa(e)==="[object Set]",cp=e=>fa(e)==="[object Date]",vt=e=>typeof e=="function",le=e=>typeof e=="string",Zn=e=>typeof e=="symbol",zt=e=>e!==null&&typeof e=="object",q_=e=>(zt(e)||vt(e))&&vt(e.then)&&vt(e.catch),K_=Object.prototype.toString,fa=e=>K_.call(e),oT=e=>fa(e).slice(8,-1),G_=e=>fa(e)==="[object Object]",Qh=e=>le(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Co=Kh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),gc=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},aT=/-\w/g,vn=gc(e=>e.replace(aT,t=>t.slice(1).toUpperCase())),lT=/\B([A-Z])/g,Xi=gc(e=>e.replace(lT,"-$1").toLowerCase()),mc=gc(e=>e.charAt(0).toUpperCase()+e.slice(1)),pu=gc(e=>e?`on${mc(e)}`:""),ni=(e,t)=>!Object.is(e,t),cl=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Y_=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},Al=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let up;const _c=()=>up||(up=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Is(e){if(dt(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],i=le(s)?dT(s):Is(s);if(i)for(const r in i)t[r]=i[r]}return t}else if(le(e)||zt(e))return e}const cT=/;(?![^(]*\))/g,uT=/:([^]+)/,hT=/\/\*[^]*?\*\//g;function dT(e){const t={};return e.replace(hT,"").split(cT).forEach(n=>{if(n){const s=n.split(uT);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function xn(e){let t="";if(le(e))t=e;else if(dt(e))for(let n=0;n<e.length;n++){const s=xn(e[n]);s&&(t+=s+" ")}else if(zt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const fT="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",pT=Kh(fT);function Q_(e){return!!e||e===""}function gT(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=zi(e[s],t[s]);return n}function zi(e,t){if(e===t)return!0;let n=cp(e),s=cp(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=Zn(e),s=Zn(t),n||s)return e===t;if(n=dt(e),s=dt(t),n||s)return n&&s?gT(e,t):!1;if(n=zt(e),s=zt(t),n||s){if(!n||!s)return!1;const i=Object.keys(e).length,r=Object.keys(t).length;if(i!==r)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!zi(e[o],t[o]))return!1}}return String(e)===String(t)}function Xh(e,t){return e.findIndex(n=>zi(n,t))}const X_=e=>!!(e&&e.__v_isRef===!0),Et=e=>le(e)?e:e==null?"":dt(e)||zt(e)&&(e.toString===K_||!vt(e.toString))?X_(e)?Et(e.value):JSON.stringify(e,J_,2):String(e),J_=(e,t)=>X_(t)?J_(e,t.value):vr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,i],r)=>(n[gu(s,r)+" =>"]=i,n),{})}:Fr(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>gu(n))}:Zn(t)?gu(t):zt(t)&&!dt(t)&&!G_(t)?String(t):t,gu=(e,t="")=>{var n;return Zn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Me;class Z_{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Me,!t&&Me&&(this.index=(Me.scopes||(Me.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Me;try{return Me=this,t()}finally{Me=n}}}on(){++this._on===1&&(this.prevScope=Me,Me=this)}off(){this._on>0&&--this._on===0&&(Me=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function ty(e){return new Z_(e)}function ey(){return Me}function mT(e,t=!1){Me&&Me.cleanups.push(e)}let Ht;const mu=new WeakSet;class ny{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Me&&Me.active&&Me.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,mu.has(this)&&(mu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||iy(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,hp(this),ry(this);const t=Ht,n=Sn;Ht=this,Sn=!0;try{return this.fn()}finally{oy(this),Ht=t,Sn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)td(t);this.deps=this.depsTail=void 0,hp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?mu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Zu(this)&&this.run()}get dirty(){return Zu(this)}}let sy=0,Po,xo;function iy(e,t=!1){if(e.flags|=8,t){e.next=xo,xo=e;return}e.next=Po,Po=e}function Jh(){sy++}function Zh(){if(--sy>0)return;if(xo){let t=xo;for(xo=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Po;){let t=Po;for(Po=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function ry(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function oy(e){let t,n=e.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),td(s),_T(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}e.deps=t,e.depsTail=n}function Zu(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(ay(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function ay(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ko)||(e.globalVersion=Ko,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Zu(e))))return;e.flags|=2;const t=e.dep,n=Ht,s=Sn;Ht=e,Sn=!0;try{ry(e);const i=e.fn(e._value);(t.version===0||ni(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{Ht=n,Sn=s,oy(e),e.flags&=-3}}function td(e,t=!1){const{dep:n,prevSub:s,nextSub:i}=e;if(s&&(s.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)td(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function _T(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Sn=!0;const ly=[];function As(){ly.push(Sn),Sn=!1}function Ss(){const e=ly.pop();Sn=e===void 0?!0:e}function hp(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Ht;Ht=void 0;try{t()}finally{Ht=n}}}let Ko=0;class yT{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ed{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Ht||!Sn||Ht===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ht)n=this.activeLink=new yT(Ht,this),Ht.deps?(n.prevDep=Ht.depsTail,Ht.depsTail.nextDep=n,Ht.depsTail=n):Ht.deps=Ht.depsTail=n,cy(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Ht.depsTail,n.nextDep=void 0,Ht.depsTail.nextDep=n,Ht.depsTail=n,Ht.deps===n&&(Ht.deps=s)}return n}trigger(t){this.version++,Ko++,this.notify(t)}notify(t){Jh();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Zh()}}}function cy(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)cy(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Sl=new WeakMap,Li=Symbol(""),th=Symbol(""),Go=Symbol("");function Ve(e,t,n){if(Sn&&Ht){let s=Sl.get(e);s||Sl.set(e,s=new Map);let i=s.get(n);i||(s.set(n,i=new ed),i.map=s,i.key=n),i.track()}}function ps(e,t,n,s,i,r){const o=Sl.get(e);if(!o){Ko++;return}const a=l=>{l&&l.trigger()};if(Jh(),t==="clear")o.forEach(a);else{const l=dt(e),u=l&&Qh(n);if(l&&n==="length"){const h=Number(s);o.forEach((d,p)=>{(p==="length"||p===Go||!Zn(p)&&p>=h)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(Go)),t){case"add":l?u&&a(o.get("length")):(a(o.get(Li)),vr(e)&&a(o.get(th)));break;case"delete":l||(a(o.get(Li)),vr(e)&&a(o.get(th)));break;case"set":vr(e)&&a(o.get(Li));break}}Zh()}function vT(e,t){const n=Sl.get(e);return n&&n.get(t)}function lr(e){const t=kt(e);return t===e?t:(Ve(t,"iterate",Go),_n(e)?t:t.map(Ae))}function yc(e){return Ve(e=kt(e),"iterate",Go),e}const bT={__proto__:null,[Symbol.iterator](){return _u(this,Symbol.iterator,Ae)},concat(...e){return lr(this).concat(...e.map(t=>dt(t)?lr(t):t))},entries(){return _u(this,"entries",e=>(e[1]=Ae(e[1]),e))},every(e,t){return as(this,"every",e,t,void 0,arguments)},filter(e,t){return as(this,"filter",e,t,n=>n.map(Ae),arguments)},find(e,t){return as(this,"find",e,t,Ae,arguments)},findIndex(e,t){return as(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return as(this,"findLast",e,t,Ae,arguments)},findLastIndex(e,t){return as(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return as(this,"forEach",e,t,void 0,arguments)},includes(...e){return yu(this,"includes",e)},indexOf(...e){return yu(this,"indexOf",e)},join(e){return lr(this).join(e)},lastIndexOf(...e){return yu(this,"lastIndexOf",e)},map(e,t){return as(this,"map",e,t,void 0,arguments)},pop(){return lo(this,"pop")},push(...e){return lo(this,"push",e)},reduce(e,...t){return dp(this,"reduce",e,t)},reduceRight(e,...t){return dp(this,"reduceRight",e,t)},shift(){return lo(this,"shift")},some(e,t){return as(this,"some",e,t,void 0,arguments)},splice(...e){return lo(this,"splice",e)},toReversed(){return lr(this).toReversed()},toSorted(e){return lr(this).toSorted(e)},toSpliced(...e){return lr(this).toSpliced(...e)},unshift(...e){return lo(this,"unshift",e)},values(){return _u(this,"values",Ae)}};function _u(e,t,n){const s=yc(e),i=s[t]();return s!==e&&!_n(e)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.done||(r.value=n(r.value)),r}),i}const wT=Array.prototype;function as(e,t,n,s,i,r){const o=yc(e),a=o!==e&&!_n(e),l=o[t];if(l!==wT[t]){const d=l.apply(e,r);return a?Ae(d):d}let u=n;o!==e&&(a?u=function(d,p){return n.call(this,Ae(d),p,e)}:n.length>2&&(u=function(d,p){return n.call(this,d,p,e)}));const h=l.call(o,u,s);return a&&i?i(h):h}function dp(e,t,n,s){const i=yc(e);let r=n;return i!==e&&(_n(e)?n.length>3&&(r=function(o,a,l){return n.call(this,o,a,l,e)}):r=function(o,a,l){return n.call(this,o,Ae(a),l,e)}),i[t](r,...s)}function yu(e,t,n){const s=kt(e);Ve(s,"iterate",Go);const i=s[t](...n);return(i===-1||i===!1)&&id(n[0])?(n[0]=kt(n[0]),s[t](...n)):i}function lo(e,t,n=[]){As(),Jh();const s=kt(e)[t].apply(e,n);return Zh(),Ss(),s}const ET=Kh("__proto__,__v_isRef,__isVue"),uy=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Zn));function TT(e){Zn(e)||(e=String(e));const t=kt(this);return Ve(t,"has",e),t.hasOwnProperty(e)}class hy{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?OT:gy:r?py:fy).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=dt(t);if(!i){let l;if(o&&(l=bT[n]))return l;if(n==="hasOwnProperty")return TT}const a=Reflect.get(t,n,ie(t)?t:s);if((Zn(n)?uy.has(n):ET(n))||(i||Ve(t,"get",n),r))return a;if(ie(a)){const l=o&&Qh(n)?a:a.value;return i&&zt(l)?nh(l):l}return zt(a)?i?nh(a):pa(a):a}}class dy extends hy{constructor(t=!1){super(!1,t)}set(t,n,s,i){let r=t[n];if(!this._isShallow){const l=ui(r);if(!_n(s)&&!ui(s)&&(r=kt(r),s=kt(s)),!dt(t)&&ie(r)&&!ie(s))return l||(r.value=s),!0}const o=dt(t)&&Qh(n)?Number(n)<t.length:Nt(t,n),a=Reflect.set(t,n,s,ie(t)?t:i);return t===kt(i)&&(o?ni(s,r)&&ps(t,"set",n,s):ps(t,"add",n,s)),a}deleteProperty(t,n){const s=Nt(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&s&&ps(t,"delete",n,void 0),i}has(t,n){const s=Reflect.has(t,n);return(!Zn(n)||!uy.has(n))&&Ve(t,"has",n),s}ownKeys(t){return Ve(t,"iterate",dt(t)?"length":Li),Reflect.ownKeys(t)}}class IT extends hy{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const AT=new dy,ST=new IT,RT=new dy(!0);const eh=e=>e,Ba=e=>Reflect.getPrototypeOf(e);function CT(e,t,n){return function(...s){const i=this.__v_raw,r=kt(i),o=vr(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,u=i[e](...s),h=n?eh:t?Rl:Ae;return!t&&Ve(r,"iterate",l?th:Li),{next(){const{value:d,done:p}=u.next();return p?{value:d,done:p}:{value:a?[h(d[0]),h(d[1])]:h(d),done:p}},[Symbol.iterator](){return this}}}}function ja(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function PT(e,t){const n={get(i){const r=this.__v_raw,o=kt(r),a=kt(i);e||(ni(i,a)&&Ve(o,"get",i),Ve(o,"get",a));const{has:l}=Ba(o),u=t?eh:e?Rl:Ae;if(l.call(o,i))return u(r.get(i));if(l.call(o,a))return u(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!e&&Ve(kt(i),"iterate",Li),i.size},has(i){const r=this.__v_raw,o=kt(r),a=kt(i);return e||(ni(i,a)&&Ve(o,"has",i),Ve(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=kt(a),u=t?eh:e?Rl:Ae;return!e&&Ve(l,"iterate",Li),a.forEach((h,d)=>i.call(r,u(h),u(d),o))}};return ze(n,e?{add:ja("add"),set:ja("set"),delete:ja("delete"),clear:ja("clear")}:{add(i){!t&&!_n(i)&&!ui(i)&&(i=kt(i));const r=kt(this);return Ba(r).has.call(r,i)||(r.add(i),ps(r,"add",i,i)),this},set(i,r){!t&&!_n(r)&&!ui(r)&&(r=kt(r));const o=kt(this),{has:a,get:l}=Ba(o);let u=a.call(o,i);u||(i=kt(i),u=a.call(o,i));const h=l.call(o,i);return o.set(i,r),u?ni(r,h)&&ps(o,"set",i,r):ps(o,"add",i,r),this},delete(i){const r=kt(this),{has:o,get:a}=Ba(r);let l=o.call(r,i);l||(i=kt(i),l=o.call(r,i)),a&&a.call(r,i);const u=r.delete(i);return l&&ps(r,"delete",i,void 0),u},clear(){const i=kt(this),r=i.size!==0,o=i.clear();return r&&ps(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=CT(i,e,t)}),n}function nd(e,t){const n=PT(e,t);return(s,i,r)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(Nt(n,i)&&i in s?n:s,i,r)}const xT={get:nd(!1,!1)},kT={get:nd(!1,!0)},DT={get:nd(!0,!1)};const fy=new WeakMap,py=new WeakMap,gy=new WeakMap,OT=new WeakMap;function MT(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function NT(e){return e.__v_skip||!Object.isExtensible(e)?0:MT(oT(e))}function pa(e){return ui(e)?e:sd(e,!1,AT,xT,fy)}function my(e){return sd(e,!1,RT,kT,py)}function nh(e){return sd(e,!0,ST,DT,gy)}function sd(e,t,n,s,i){if(!zt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=NT(e);if(r===0)return e;const o=i.get(e);if(o)return o;const a=new Proxy(e,r===2?s:n);return i.set(e,a),a}function si(e){return ui(e)?si(e.__v_raw):!!(e&&e.__v_isReactive)}function ui(e){return!!(e&&e.__v_isReadonly)}function _n(e){return!!(e&&e.__v_isShallow)}function id(e){return e?!!e.__v_raw:!1}function kt(e){const t=e&&e.__v_raw;return t?kt(t):e}function rd(e){return!Nt(e,"__v_skip")&&Object.isExtensible(e)&&Y_(e,"__v_skip",!0),e}const Ae=e=>zt(e)?pa(e):e,Rl=e=>zt(e)?nh(e):e;function ie(e){return e?e.__v_isRef===!0:!1}function tt(e){return _y(e,!1)}function VT(e){return _y(e,!0)}function _y(e,t){return ie(e)?e:new LT(e,t)}class LT{constructor(t,n){this.dep=new ed,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:kt(t),this._value=n?t:Ae(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||_n(t)||ui(t);t=s?t:kt(t),ni(t,n)&&(this._rawValue=t,this._value=s?t:Ae(t),this.dep.trigger())}}function Wn(e){return ie(e)?e.value:e}const FT={get:(e,t,n)=>t==="__v_raw"?e:Wn(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const i=e[t];return ie(i)&&!ie(n)?(i.value=n,!0):Reflect.set(e,t,n,s)}};function yy(e){return si(e)?e:new Proxy(e,FT)}function UT(e){const t=dt(e)?new Array(e.length):{};for(const n in e)t[n]=jT(e,n);return t}class BT{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return vT(kt(this._object),this._key)}}function jT(e,t,n){const s=e[t];return ie(s)?s:new BT(e,t,n)}class zT{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new ed(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ko-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Ht!==this)return iy(this,!0),!0}get value(){const t=this.dep.track();return ay(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function HT(e,t,n=!1){let s,i;return vt(e)?s=e:(s=e.get,i=e.set),new zT(s,i,n)}const za={},Cl=new WeakMap;let ki;function $T(e,t=!1,n=ki){if(n){let s=Cl.get(n);s||Cl.set(n,s=[]),s.push(e)}}function WT(e,t,n=jt){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=n,u=x=>i?x:_n(x)||i===!1||i===0?gs(x,1):gs(x);let h,d,p,g,b=!1,w=!1;if(ie(e)?(d=()=>e.value,b=_n(e)):si(e)?(d=()=>u(e),b=!0):dt(e)?(w=!0,b=e.some(x=>si(x)||_n(x)),d=()=>e.map(x=>{if(ie(x))return x.value;if(si(x))return u(x);if(vt(x))return l?l(x,2):x()})):vt(e)?t?d=l?()=>l(e,2):e:d=()=>{if(p){As();try{p()}finally{Ss()}}const x=ki;ki=h;try{return l?l(e,3,[g]):e(g)}finally{ki=x}}:d=$n,t&&i){const x=d,L=i===!0?1/0:i;d=()=>gs(x(),L)}const v=ey(),P=()=>{h.stop(),v&&v.active&&Yh(v.effects,h)};if(r&&t){const x=t;t=(...L)=>{x(...L),P()}}let O=w?new Array(e.length).fill(za):za;const k=x=>{if(!(!(h.flags&1)||!h.dirty&&!x))if(t){const L=h.run();if(i||b||(w?L.some((U,T)=>ni(U,O[T])):ni(L,O))){p&&p();const U=ki;ki=h;try{const T=[L,O===za?void 0:w&&O[0]===za?[]:O,g];O=L,l?l(t,3,T):t(...T)}finally{ki=U}}}else h.run()};return a&&a(k),h=new ny(d),h.scheduler=o?()=>o(k,!1):k,g=x=>$T(x,!1,h),p=h.onStop=()=>{const x=Cl.get(h);if(x){if(l)l(x,4);else for(const L of x)L();Cl.delete(h)}},t?s?k(!0):O=h.run():o?o(k.bind(null,!0),!0):h.run(),P.pause=h.pause.bind(h),P.resume=h.resume.bind(h),P.stop=P,P}function gs(e,t=1/0,n){if(t<=0||!zt(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,ie(e))gs(e.value,t,n);else if(dt(e))for(let s=0;s<e.length;s++)gs(e[s],t,n);else if(Fr(e)||vr(e))e.forEach(s=>{gs(s,t,n)});else if(G_(e)){for(const s in e)gs(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&gs(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ga(e,t,n,s){try{return s?e(...s):e()}catch(i){vc(i,t,n)}}function ts(e,t,n,s){if(vt(e)){const i=ga(e,t,n,s);return i&&q_(i)&&i.catch(r=>{vc(r,t,n)}),i}if(dt(e)){const i=[];for(let r=0;r<e.length;r++)i.push(ts(e[r],t,n,s));return i}}function vc(e,t,n,s=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||jt;if(t){let a=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](e,l,u)===!1)return}a=a.parent}if(r){As(),ga(r,null,10,[e,l,u]),Ss();return}}qT(e,n,i,s,o)}function qT(e,t,n,s=!0,i=!1){if(i)throw e;console.error(e)}const Ge=[];let Fn=-1;const br=[];let Ws=null,dr=0;const vy=Promise.resolve();let Pl=null;function Ur(e){const t=Pl||vy;return e?t.then(this?e.bind(this):e):t}function KT(e){let t=Fn+1,n=Ge.length;for(;t<n;){const s=t+n>>>1,i=Ge[s],r=Yo(i);r<e||r===e&&i.flags&2?t=s+1:n=s}return t}function od(e){if(!(e.flags&1)){const t=Yo(e),n=Ge[Ge.length-1];!n||!(e.flags&2)&&t>=Yo(n)?Ge.push(e):Ge.splice(KT(t),0,e),e.flags|=1,by()}}function by(){Pl||(Pl=vy.then(Ey))}function GT(e){dt(e)?br.push(...e):Ws&&e.id===-1?Ws.splice(dr+1,0,e):e.flags&1||(br.push(e),e.flags|=1),by()}function fp(e,t,n=Fn+1){for(;n<Ge.length;n++){const s=Ge[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;Ge.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function wy(e){if(br.length){const t=[...new Set(br)].sort((n,s)=>Yo(n)-Yo(s));if(br.length=0,Ws){Ws.push(...t);return}for(Ws=t,dr=0;dr<Ws.length;dr++){const n=Ws[dr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Ws=null,dr=0}}const Yo=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ey(e){try{for(Fn=0;Fn<Ge.length;Fn++){const t=Ge[Fn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ga(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Fn<Ge.length;Fn++){const t=Ge[Fn];t&&(t.flags&=-2)}Fn=-1,Ge.length=0,wy(),Pl=null,(Ge.length||br.length)&&Ey()}}let un=null,Ty=null;function xl(e){const t=un;return un=e,Ty=e&&e.type.__scopeId||null,t}function YT(e,t=un,n){if(!t||e._n)return e;const s=(...i)=>{s._d&&Ol(-1);const r=xl(t);let o;try{o=e(...i)}finally{xl(r),s._d&&Ol(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function ee(e,t){if(un===null)return e;const n=Tc(un),s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,a,l=jt]=t[i];r&&(vt(r)&&(r={mounted:r,updated:r}),r.deep&&gs(o),s.push({dir:r,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function Si(e,t,n,s){const i=e.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(As(),ts(l,n,8,[e.el,a,e,t]),Ss())}}const QT=Symbol("_vte"),XT=e=>e.__isTeleport,JT=Symbol("_leaveCb");function ad(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ad(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Iy(e,t){return vt(e)?ze({name:e.name},t,{setup:e}):e}function Ay(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const kl=new WeakMap;function ko(e,t,n,s,i=!1){if(dt(e)){e.forEach((b,w)=>ko(b,t&&(dt(t)?t[w]:t),n,s,i));return}if(Do(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&ko(e,t,n,s.component.subTree);return}const r=s.shapeFlag&4?Tc(s.component):s.el,o=i?null:r,{i:a,r:l}=e,u=t&&t.r,h=a.refs===jt?a.refs={}:a.refs,d=a.setupState,p=kt(d),g=d===jt?W_:b=>Nt(p,b);if(u!=null&&u!==l){if(pp(t),le(u))h[u]=null,g(u)&&(d[u]=null);else if(ie(u)){u.value=null;const b=t;b.k&&(h[b.k]=null)}}if(vt(l))ga(l,a,12,[o,h]);else{const b=le(l),w=ie(l);if(b||w){const v=()=>{if(e.f){const P=b?g(l)?d[l]:h[l]:l.value;if(i)dt(P)&&Yh(P,r);else if(dt(P))P.includes(r)||P.push(r);else if(b)h[l]=[r],g(l)&&(d[l]=h[l]);else{const O=[r];l.value=O,e.k&&(h[e.k]=O)}}else b?(h[l]=o,g(l)&&(d[l]=o)):w&&(l.value=o,e.k&&(h[e.k]=o))};if(o){const P=()=>{v(),kl.delete(e)};P.id=-1,kl.set(e,P),ln(P,n)}else pp(e),v()}}}function pp(e){const t=kl.get(e);t&&(t.flags|=8,kl.delete(e))}_c().requestIdleCallback;_c().cancelIdleCallback;const Do=e=>!!e.type.__asyncLoader,Sy=e=>e.type.__isKeepAlive;function ZT(e,t){Ry(e,"a",t)}function tI(e,t){Ry(e,"da",t)}function Ry(e,t,n=Ue){const s=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(bc(t,s,n),n){let i=n.parent;for(;i&&i.parent;)Sy(i.parent.vnode)&&eI(s,t,n,i),i=i.parent}}function eI(e,t,n,s){const i=bc(t,e,s,!0);Cy(()=>{Yh(s[t],i)},n)}function bc(e,t,n=Ue,s=!1){if(n){const i=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...o)=>{As();const a=ma(n),l=ts(t,n,e,o);return a(),Ss(),l});return s?i.unshift(r):i.push(r),r}}const Ds=e=>(t,n=Ue)=>{(!Xo||e==="sp")&&bc(e,(...s)=>t(...s),n)},nI=Ds("bm"),is=Ds("m"),sI=Ds("bu"),iI=Ds("u"),rI=Ds("bum"),Cy=Ds("um"),oI=Ds("sp"),aI=Ds("rtg"),lI=Ds("rtc");function cI(e,t=Ue){bc("ec",e,t)}const uI="components";function hI(e,t){return fI(uI,e,!0,t)||e}const dI=Symbol.for("v-ndc");function fI(e,t,n=!0,s=!1){const i=un||Ue;if(i){const r=i.type;{const a=e0(r,!1);if(a&&(a===t||a===vn(t)||a===mc(vn(t))))return r}const o=gp(i[e]||r[e],t)||gp(i.appContext[e],t);return!o&&s?r:o}}function gp(e,t){return e&&(e[t]||e[vn(t)]||e[mc(vn(t))])}function de(e,t,n,s){let i;const r=n,o=dt(e);if(o||le(e)){const a=o&&si(e);let l=!1,u=!1;a&&(l=!_n(e),u=ui(e),e=yc(e)),i=new Array(e.length);for(let h=0,d=e.length;h<d;h++)i[h]=t(l?u?Rl(Ae(e[h])):Ae(e[h]):e[h],h,void 0,r)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,r)}else if(zt(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];i[l]=t(e[h],h,l,r)}}else i=[];return i}const sh=e=>e?Yy(e)?Tc(e):sh(e.parent):null,Oo=ze(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>sh(e.parent),$root:e=>sh(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>xy(e),$forceUpdate:e=>e.f||(e.f=()=>{od(e.update)}),$nextTick:e=>e.n||(e.n=Ur.bind(e.proxy)),$watch:e=>NI.bind(e)}),vu=(e,t)=>e!==jt&&!e.__isScriptSetup&&Nt(e,t),pI={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const g=o[t];if(g!==void 0)switch(g){case 1:return s[t];case 2:return i[t];case 4:return n[t];case 3:return r[t]}else{if(vu(s,t))return o[t]=1,s[t];if(i!==jt&&Nt(i,t))return o[t]=2,i[t];if((u=e.propsOptions[0])&&Nt(u,t))return o[t]=3,r[t];if(n!==jt&&Nt(n,t))return o[t]=4,n[t];ih&&(o[t]=0)}}const h=Oo[t];let d,p;if(h)return t==="$attrs"&&Ve(e.attrs,"get",""),h(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(n!==jt&&Nt(n,t))return o[t]=4,n[t];if(p=l.config.globalProperties,Nt(p,t))return p[t]},set({_:e},t,n){const{data:s,setupState:i,ctx:r}=e;return vu(i,t)?(i[t]=n,!0):s!==jt&&Nt(s,t)?(s[t]=n,!0):Nt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:i,propsOptions:r,type:o}},a){let l,u;return!!(n[a]||e!==jt&&a[0]!=="$"&&Nt(e,a)||vu(t,a)||(l=r[0])&&Nt(l,a)||Nt(s,a)||Nt(Oo,a)||Nt(i.config.globalProperties,a)||(u=o.__cssModules)&&u[a])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Nt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function mp(e){return dt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let ih=!0;function gI(e){const t=xy(e),n=e.proxy,s=e.ctx;ih=!1,t.beforeCreate&&_p(t.beforeCreate,e,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:d,mounted:p,beforeUpdate:g,updated:b,activated:w,deactivated:v,beforeDestroy:P,beforeUnmount:O,destroyed:k,unmounted:x,render:L,renderTracked:U,renderTriggered:T,errorCaptured:_,serverPrefetch:I,expose:C,inheritAttrs:A,components:S,directives:E,filters:bt}=t;if(u&&mI(u,s,null),o)for(const it in o){const gt=o[it];vt(gt)&&(s[it]=gt.bind(n))}if(i){const it=i.call(n,n);zt(it)&&(e.data=pa(it))}if(ih=!0,r)for(const it in r){const gt=r[it],Ot=vt(gt)?gt.bind(n,n):vt(gt.get)?gt.get.bind(n,n):$n,we=!vt(gt)&&vt(gt.set)?gt.set.bind(n):$n,_e=qt({get:Ot,set:we});Object.defineProperty(s,it,{enumerable:!0,configurable:!0,get:()=>_e.value,set:Qt=>_e.value=Qt})}if(a)for(const it in a)Py(a[it],s,n,it);if(l){const it=vt(l)?l.call(n):l;Reflect.ownKeys(it).forEach(gt=>{ul(gt,it[gt])})}h&&_p(h,e,"c");function ut(it,gt){dt(gt)?gt.forEach(Ot=>it(Ot.bind(n))):gt&&it(gt.bind(n))}if(ut(nI,d),ut(is,p),ut(sI,g),ut(iI,b),ut(ZT,w),ut(tI,v),ut(cI,_),ut(lI,U),ut(aI,T),ut(rI,O),ut(Cy,x),ut(oI,I),dt(C))if(C.length){const it=e.exposed||(e.exposed={});C.forEach(gt=>{Object.defineProperty(it,gt,{get:()=>n[gt],set:Ot=>n[gt]=Ot,enumerable:!0})})}else e.exposed||(e.exposed={});L&&e.render===$n&&(e.render=L),A!=null&&(e.inheritAttrs=A),S&&(e.components=S),E&&(e.directives=E),I&&Ay(e)}function mI(e,t,n=$n){dt(e)&&(e=rh(e));for(const s in e){const i=e[s];let r;zt(i)?"default"in i?r=Rn(i.from||s,i.default,!0):r=Rn(i.from||s):r=Rn(i),ie(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function _p(e,t,n){ts(dt(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function Py(e,t,n,s){let i=s.includes(".")?Hy(n,s):()=>n[s];if(le(e)){const r=t[e];vt(r)&&bs(i,r)}else if(vt(e))bs(i,e.bind(n));else if(zt(e))if(dt(e))e.forEach(r=>Py(r,t,n,s));else{const r=vt(e.handler)?e.handler.bind(n):t[e.handler];vt(r)&&bs(i,r,e)}}function xy(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!i.length&&!n&&!s?l=t:(l={},i.length&&i.forEach(u=>Dl(l,u,o,!0)),Dl(l,t,o)),zt(t)&&r.set(t,l),l}function Dl(e,t,n,s=!1){const{mixins:i,extends:r}=t;r&&Dl(e,r,n,!0),i&&i.forEach(o=>Dl(e,o,n,!0));for(const o in t)if(!(s&&o==="expose")){const a=_I[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const _I={data:yp,props:vp,emits:vp,methods:_o,computed:_o,beforeCreate:qe,created:qe,beforeMount:qe,mounted:qe,beforeUpdate:qe,updated:qe,beforeDestroy:qe,beforeUnmount:qe,destroyed:qe,unmounted:qe,activated:qe,deactivated:qe,errorCaptured:qe,serverPrefetch:qe,components:_o,directives:_o,watch:vI,provide:yp,inject:yI};function yp(e,t){return t?e?function(){return ze(vt(e)?e.call(this,this):e,vt(t)?t.call(this,this):t)}:t:e}function yI(e,t){return _o(rh(e),rh(t))}function rh(e){if(dt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function qe(e,t){return e?[...new Set([].concat(e,t))]:t}function _o(e,t){return e?ze(Object.create(null),e,t):t}function vp(e,t){return e?dt(e)&&dt(t)?[...new Set([...e,...t])]:ze(Object.create(null),mp(e),mp(t??{})):t}function vI(e,t){if(!e)return t;if(!t)return e;const n=ze(Object.create(null),e);for(const s in t)n[s]=qe(e[s],t[s]);return n}function ky(){return{app:null,config:{isNativeTag:W_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let bI=0;function wI(e,t){return function(s,i=null){vt(s)||(s=ze({},s)),i!=null&&!zt(i)&&(i=null);const r=ky(),o=new WeakSet,a=[];let l=!1;const u=r.app={_uid:bI++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:s0,get config(){return r.config},set config(h){},use(h,...d){return o.has(h)||(h&&vt(h.install)?(o.add(h),h.install(u,...d)):vt(h)&&(o.add(h),h(u,...d))),u},mixin(h){return r.mixins.includes(h)||r.mixins.push(h),u},component(h,d){return d?(r.components[h]=d,u):r.components[h]},directive(h,d){return d?(r.directives[h]=d,u):r.directives[h]},mount(h,d,p){if(!l){const g=u._ceVNode||en(s,i);return g.appContext=r,p===!0?p="svg":p===!1&&(p=void 0),e(g,h,p),l=!0,u._container=h,h.__vue_app__=u,Tc(g.component)}},onUnmount(h){a.push(h)},unmount(){l&&(ts(a,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(h,d){return r.provides[h]=d,u},runWithContext(h){const d=Fi;Fi=u;try{return h()}finally{Fi=d}}};return u}}let Fi=null;function ul(e,t){if(Ue){let n=Ue.provides;const s=Ue.parent&&Ue.parent.provides;s===n&&(n=Ue.provides=Object.create(s)),n[e]=t}}function Rn(e,t,n=!1){const s=Gy();if(s||Fi){let i=Fi?Fi._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&vt(t)?t.call(s&&s.proxy):t}}function EI(){return!!(Gy()||Fi)}const Dy={},Oy=()=>Object.create(Dy),My=e=>Object.getPrototypeOf(e)===Dy;function TI(e,t,n,s=!1){const i={},r=Oy();e.propsDefaults=Object.create(null),Ny(e,t,i,r);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=s?i:my(i):e.type.props?e.props=i:e.props=r,e.attrs=r}function II(e,t,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=e,a=kt(i),[l]=e.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let d=0;d<h.length;d++){let p=h[d];if(wc(e.emitsOptions,p))continue;const g=t[p];if(l)if(Nt(r,p))g!==r[p]&&(r[p]=g,u=!0);else{const b=vn(p);i[b]=oh(l,a,b,g,e,!1)}else g!==r[p]&&(r[p]=g,u=!0)}}}else{Ny(e,t,i,r)&&(u=!0);let h;for(const d in a)(!t||!Nt(t,d)&&((h=Xi(d))===d||!Nt(t,h)))&&(l?n&&(n[d]!==void 0||n[h]!==void 0)&&(i[d]=oh(l,a,d,void 0,e,!0)):delete i[d]);if(r!==a)for(const d in r)(!t||!Nt(t,d))&&(delete r[d],u=!0)}u&&ps(e.attrs,"set","")}function Ny(e,t,n,s){const[i,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Co(l))continue;const u=t[l];let h;i&&Nt(i,h=vn(l))?!r||!r.includes(h)?n[h]=u:(a||(a={}))[h]=u:wc(e.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,o=!0)}if(r){const l=kt(n),u=a||jt;for(let h=0;h<r.length;h++){const d=r[h];n[d]=oh(i,l,d,u[d],e,!Nt(u,d))}}return o}function oh(e,t,n,s,i,r){const o=e[n];if(o!=null){const a=Nt(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&vt(l)){const{propsDefaults:u}=i;if(n in u)s=u[n];else{const h=ma(i);s=u[n]=l.call(null,t),h()}}else s=l;i.ce&&i.ce._setProp(n,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Xi(n))&&(s=!0))}return s}const AI=new WeakMap;function Vy(e,t,n=!1){const s=n?AI:t.propsCache,i=s.get(e);if(i)return i;const r=e.props,o={},a=[];let l=!1;if(!vt(e)){const h=d=>{l=!0;const[p,g]=Vy(d,t,!0);ze(o,p),g&&a.push(...g)};!n&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!r&&!l)return zt(e)&&s.set(e,yr),yr;if(dt(r))for(let h=0;h<r.length;h++){const d=vn(r[h]);bp(d)&&(o[d]=jt)}else if(r)for(const h in r){const d=vn(h);if(bp(d)){const p=r[h],g=o[d]=dt(p)||vt(p)?{type:p}:ze({},p),b=g.type;let w=!1,v=!0;if(dt(b))for(let P=0;P<b.length;++P){const O=b[P],k=vt(O)&&O.name;if(k==="Boolean"){w=!0;break}else k==="String"&&(v=!1)}else w=vt(b)&&b.name==="Boolean";g[0]=w,g[1]=v,(w||Nt(g,"default"))&&a.push(d)}}const u=[o,a];return zt(e)&&s.set(e,u),u}function bp(e){return e[0]!=="$"&&!Co(e)}const ld=e=>e==="_"||e==="_ctx"||e==="$stable",cd=e=>dt(e)?e.map(zn):[zn(e)],SI=(e,t,n)=>{if(t._n)return t;const s=YT((...i)=>cd(t(...i)),n);return s._c=!1,s},Ly=(e,t,n)=>{const s=e._ctx;for(const i in e){if(ld(i))continue;const r=e[i];if(vt(r))t[i]=SI(i,r,s);else if(r!=null){const o=cd(r);t[i]=()=>o}}},Fy=(e,t)=>{const n=cd(t);e.slots.default=()=>n},Uy=(e,t,n)=>{for(const s in t)(n||!ld(s))&&(e[s]=t[s])},RI=(e,t,n)=>{const s=e.slots=Oy();if(e.vnode.shapeFlag&32){const i=t._;i?(Uy(s,t,n),n&&Y_(s,"_",i,!0)):Ly(t,s)}else t&&Fy(e,t)},CI=(e,t,n)=>{const{vnode:s,slots:i}=e;let r=!0,o=jt;if(s.shapeFlag&32){const a=t._;a?n&&a===1?r=!1:Uy(i,t,n):(r=!t.$stable,Ly(t,i)),o=t}else t&&(Fy(e,t),o={default:1});if(r)for(const a in i)!ld(a)&&o[a]==null&&delete i[a]},ln=HI;function PI(e){return xI(e)}function xI(e,t){const n=_c();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:d,nextSibling:p,setScopeId:g=$n,insertStaticContent:b}=e,w=(R,D,N,z=null,$=null,B=null,X=void 0,G=null,q=!!D.dynamicChildren)=>{if(R===D)return;R&&!co(R,D)&&(z=j(R),Qt(R,$,B,!0),R=null),D.patchFlag===-2&&(q=!1,D.dynamicChildren=null);const{type:K,ref:ct,shapeFlag:Z}=D;switch(K){case Ec:v(R,D,N,z);break;case hi:P(R,D,N,z);break;case wu:R==null&&O(D,N,z,X);break;case xt:S(R,D,N,z,$,B,X,G,q);break;default:Z&1?L(R,D,N,z,$,B,X,G,q):Z&6?E(R,D,N,z,$,B,X,G,q):(Z&64||Z&128)&&K.process(R,D,N,z,$,B,X,G,q,ot)}ct!=null&&$?ko(ct,R&&R.ref,B,D||R,!D):ct==null&&R&&R.ref!=null&&ko(R.ref,null,B,R,!0)},v=(R,D,N,z)=>{if(R==null)s(D.el=a(D.children),N,z);else{const $=D.el=R.el;D.children!==R.children&&u($,D.children)}},P=(R,D,N,z)=>{R==null?s(D.el=l(D.children||""),N,z):D.el=R.el},O=(R,D,N,z)=>{[R.el,R.anchor]=b(R.children,D,N,z,R.el,R.anchor)},k=({el:R,anchor:D},N,z)=>{let $;for(;R&&R!==D;)$=p(R),s(R,N,z),R=$;s(D,N,z)},x=({el:R,anchor:D})=>{let N;for(;R&&R!==D;)N=p(R),i(R),R=N;i(D)},L=(R,D,N,z,$,B,X,G,q)=>{D.type==="svg"?X="svg":D.type==="math"&&(X="mathml"),R==null?U(D,N,z,$,B,X,G,q):I(R,D,$,B,X,G,q)},U=(R,D,N,z,$,B,X,G)=>{let q,K;const{props:ct,shapeFlag:Z,transition:at,dirs:ht}=R;if(q=R.el=o(R.type,B,ct&&ct.is,ct),Z&8?h(q,R.children):Z&16&&_(R.children,q,null,z,$,bu(R,B),X,G),ht&&Si(R,null,z,"created"),T(q,R,R.scopeId,X,z),ct){for(const Lt in ct)Lt!=="value"&&!Co(Lt)&&r(q,Lt,null,ct[Lt],B,z);"value"in ct&&r(q,"value",null,ct.value,B),(K=ct.onVnodeBeforeMount)&&Nn(K,z,R)}ht&&Si(R,null,z,"beforeMount");const Tt=kI($,at);Tt&&at.beforeEnter(q),s(q,D,N),((K=ct&&ct.onVnodeMounted)||Tt||ht)&&ln(()=>{K&&Nn(K,z,R),Tt&&at.enter(q),ht&&Si(R,null,z,"mounted")},$)},T=(R,D,N,z,$)=>{if(N&&g(R,N),z)for(let B=0;B<z.length;B++)g(R,z[B]);if($){let B=$.subTree;if(D===B||Wy(B.type)&&(B.ssContent===D||B.ssFallback===D)){const X=$.vnode;T(R,X,X.scopeId,X.slotScopeIds,$.parent)}}},_=(R,D,N,z,$,B,X,G,q=0)=>{for(let K=q;K<R.length;K++){const ct=R[K]=G?qs(R[K]):zn(R[K]);w(null,ct,D,N,z,$,B,X,G)}},I=(R,D,N,z,$,B,X)=>{const G=D.el=R.el;let{patchFlag:q,dynamicChildren:K,dirs:ct}=D;q|=R.patchFlag&16;const Z=R.props||jt,at=D.props||jt;let ht;if(N&&Ri(N,!1),(ht=at.onVnodeBeforeUpdate)&&Nn(ht,N,D,R),ct&&Si(D,R,N,"beforeUpdate"),N&&Ri(N,!0),(Z.innerHTML&&at.innerHTML==null||Z.textContent&&at.textContent==null)&&h(G,""),K?C(R.dynamicChildren,K,G,N,z,bu(D,$),B):X||gt(R,D,G,null,N,z,bu(D,$),B,!1),q>0){if(q&16)A(G,Z,at,N,$);else if(q&2&&Z.class!==at.class&&r(G,"class",null,at.class,$),q&4&&r(G,"style",Z.style,at.style,$),q&8){const Tt=D.dynamicProps;for(let Lt=0;Lt<Tt.length;Lt++){const Pt=Tt[Lt],ke=Z[Pt],De=at[Pt];(De!==ke||Pt==="value")&&r(G,Pt,ke,De,$,N)}}q&1&&R.children!==D.children&&h(G,D.children)}else!X&&K==null&&A(G,Z,at,N,$);((ht=at.onVnodeUpdated)||ct)&&ln(()=>{ht&&Nn(ht,N,D,R),ct&&Si(D,R,N,"updated")},z)},C=(R,D,N,z,$,B,X)=>{for(let G=0;G<D.length;G++){const q=R[G],K=D[G],ct=q.el&&(q.type===xt||!co(q,K)||q.shapeFlag&198)?d(q.el):N;w(q,K,ct,null,z,$,B,X,!0)}},A=(R,D,N,z,$)=>{if(D!==N){if(D!==jt)for(const B in D)!Co(B)&&!(B in N)&&r(R,B,D[B],null,$,z);for(const B in N){if(Co(B))continue;const X=N[B],G=D[B];X!==G&&B!=="value"&&r(R,B,G,X,$,z)}"value"in N&&r(R,"value",D.value,N.value,$)}},S=(R,D,N,z,$,B,X,G,q)=>{const K=D.el=R?R.el:a(""),ct=D.anchor=R?R.anchor:a("");let{patchFlag:Z,dynamicChildren:at,slotScopeIds:ht}=D;ht&&(G=G?G.concat(ht):ht),R==null?(s(K,N,z),s(ct,N,z),_(D.children||[],N,ct,$,B,X,G,q)):Z>0&&Z&64&&at&&R.dynamicChildren?(C(R.dynamicChildren,at,N,$,B,X,G),(D.key!=null||$&&D===$.subTree)&&By(R,D,!0)):gt(R,D,N,ct,$,B,X,G,q)},E=(R,D,N,z,$,B,X,G,q)=>{D.slotScopeIds=G,R==null?D.shapeFlag&512?$.ctx.activate(D,N,z,X,q):bt(D,N,z,$,B,X,q):mt(R,D,q)},bt=(R,D,N,z,$,B,X)=>{const G=R.component=QI(R,z,$);if(Sy(R)&&(G.ctx.renderer=ot),XI(G,!1,X),G.asyncDep){if($&&$.registerDep(G,ut,X),!R.el){const q=G.subTree=en(hi);P(null,q,D,N),R.placeholder=q.el}}else ut(G,R,D,N,$,B,X)},mt=(R,D,N)=>{const z=D.component=R.component;if(jI(R,D,N))if(z.asyncDep&&!z.asyncResolved){it(z,D,N);return}else z.next=D,z.update();else D.el=R.el,z.vnode=D},ut=(R,D,N,z,$,B,X)=>{const G=()=>{if(R.isMounted){let{next:Z,bu:at,u:ht,parent:Tt,vnode:Lt}=R;{const on=jy(R);if(on){Z&&(Z.el=Lt.el,it(R,Z,X)),on.asyncDep.then(()=>{R.isUnmounted||G()});return}}let Pt=Z,ke;Ri(R,!1),Z?(Z.el=Lt.el,it(R,Z,X)):Z=Lt,at&&cl(at),(ke=Z.props&&Z.props.onVnodeBeforeUpdate)&&Nn(ke,Tt,Z,Lt),Ri(R,!0);const De=Ep(R),rn=R.subTree;R.subTree=De,w(rn,De,d(rn.el),j(rn),R,$,B),Z.el=De.el,Pt===null&&zI(R,De.el),ht&&ln(ht,$),(ke=Z.props&&Z.props.onVnodeUpdated)&&ln(()=>Nn(ke,Tt,Z,Lt),$)}else{let Z;const{el:at,props:ht}=D,{bm:Tt,m:Lt,parent:Pt,root:ke,type:De}=R,rn=Do(D);Ri(R,!1),Tt&&cl(Tt),!rn&&(Z=ht&&ht.onVnodeBeforeMount)&&Nn(Z,Pt,D),Ri(R,!0);{ke.ce&&ke.ce._def.shadowRoot!==!1&&ke.ce._injectChildStyle(De);const on=R.subTree=Ep(R);w(null,on,N,z,R,$,B),D.el=on.el}if(Lt&&ln(Lt,$),!rn&&(Z=ht&&ht.onVnodeMounted)){const on=D;ln(()=>Nn(Z,Pt,on),$)}(D.shapeFlag&256||Pt&&Do(Pt.vnode)&&Pt.vnode.shapeFlag&256)&&R.a&&ln(R.a,$),R.isMounted=!0,D=N=z=null}};R.scope.on();const q=R.effect=new ny(G);R.scope.off();const K=R.update=q.run.bind(q),ct=R.job=q.runIfDirty.bind(q);ct.i=R,ct.id=R.uid,q.scheduler=()=>od(ct),Ri(R,!0),K()},it=(R,D,N)=>{D.component=R;const z=R.vnode.props;R.vnode=D,R.next=null,II(R,D.props,z,N),CI(R,D.children,N),As(),fp(R),Ss()},gt=(R,D,N,z,$,B,X,G,q=!1)=>{const K=R&&R.children,ct=R?R.shapeFlag:0,Z=D.children,{patchFlag:at,shapeFlag:ht}=D;if(at>0){if(at&128){we(K,Z,N,z,$,B,X,G,q);return}else if(at&256){Ot(K,Z,N,z,$,B,X,G,q);return}}ht&8?(ct&16&&Xt(K,$,B),Z!==K&&h(N,Z)):ct&16?ht&16?we(K,Z,N,z,$,B,X,G,q):Xt(K,$,B,!0):(ct&8&&h(N,""),ht&16&&_(Z,N,z,$,B,X,G,q))},Ot=(R,D,N,z,$,B,X,G,q)=>{R=R||yr,D=D||yr;const K=R.length,ct=D.length,Z=Math.min(K,ct);let at;for(at=0;at<Z;at++){const ht=D[at]=q?qs(D[at]):zn(D[at]);w(R[at],ht,N,null,$,B,X,G,q)}K>ct?Xt(R,$,B,!0,!1,Z):_(D,N,z,$,B,X,G,q,Z)},we=(R,D,N,z,$,B,X,G,q)=>{let K=0;const ct=D.length;let Z=R.length-1,at=ct-1;for(;K<=Z&&K<=at;){const ht=R[K],Tt=D[K]=q?qs(D[K]):zn(D[K]);if(co(ht,Tt))w(ht,Tt,N,null,$,B,X,G,q);else break;K++}for(;K<=Z&&K<=at;){const ht=R[Z],Tt=D[at]=q?qs(D[at]):zn(D[at]);if(co(ht,Tt))w(ht,Tt,N,null,$,B,X,G,q);else break;Z--,at--}if(K>Z){if(K<=at){const ht=at+1,Tt=ht<ct?D[ht].el:z;for(;K<=at;)w(null,D[K]=q?qs(D[K]):zn(D[K]),N,Tt,$,B,X,G,q),K++}}else if(K>at)for(;K<=Z;)Qt(R[K],$,B,!0),K++;else{const ht=K,Tt=K,Lt=new Map;for(K=Tt;K<=at;K++){const Te=D[K]=q?qs(D[K]):zn(D[K]);Te.key!=null&&Lt.set(Te.key,K)}let Pt,ke=0;const De=at-Tt+1;let rn=!1,on=0;const En=new Array(De);for(K=0;K<De;K++)En[K]=0;for(K=ht;K<=Z;K++){const Te=R[K];if(ke>=De){Qt(Te,$,B,!0);continue}let ye;if(Te.key!=null)ye=Lt.get(Te.key);else for(Pt=Tt;Pt<=at;Pt++)if(En[Pt-Tt]===0&&co(Te,D[Pt])){ye=Pt;break}ye===void 0?Qt(Te,$,B,!0):(En[ye-Tt]=K+1,ye>=on?on=ye:rn=!0,w(Te,D[ye],N,null,$,B,X,G,q),ke++)}const ir=rn?DI(En):yr;for(Pt=ir.length-1,K=De-1;K>=0;K--){const Te=Tt+K,ye=D[Te],Kr=D[Te+1],wi=Te+1<ct?Kr.el||Kr.placeholder:z;En[K]===0?w(null,ye,N,wi,$,B,X,G,q):rn&&(Pt<0||K!==ir[Pt]?_e(ye,N,wi,2):Pt--)}}},_e=(R,D,N,z,$=null)=>{const{el:B,type:X,transition:G,children:q,shapeFlag:K}=R;if(K&6){_e(R.component.subTree,D,N,z);return}if(K&128){R.suspense.move(D,N,z);return}if(K&64){X.move(R,D,N,ot);return}if(X===xt){s(B,D,N);for(let Z=0;Z<q.length;Z++)_e(q[Z],D,N,z);s(R.anchor,D,N);return}if(X===wu){k(R,D,N);return}if(z!==2&&K&1&&G)if(z===0)G.beforeEnter(B),s(B,D,N),ln(()=>G.enter(B),$);else{const{leave:Z,delayLeave:at,afterLeave:ht}=G,Tt=()=>{R.ctx.isUnmounted?i(B):s(B,D,N)},Lt=()=>{B._isLeaving&&B[JT](!0),Z(B,()=>{Tt(),ht&&ht()})};at?at(B,Tt,Lt):Lt()}else s(B,D,N)},Qt=(R,D,N,z=!1,$=!1)=>{const{type:B,props:X,ref:G,children:q,dynamicChildren:K,shapeFlag:ct,patchFlag:Z,dirs:at,cacheIndex:ht}=R;if(Z===-2&&($=!1),G!=null&&(As(),ko(G,null,N,R,!0),Ss()),ht!=null&&(D.renderCache[ht]=void 0),ct&256){D.ctx.deactivate(R);return}const Tt=ct&1&&at,Lt=!Do(R);let Pt;if(Lt&&(Pt=X&&X.onVnodeBeforeUnmount)&&Nn(Pt,D,R),ct&6)Ee(R.component,N,z);else{if(ct&128){R.suspense.unmount(N,z);return}Tt&&Si(R,null,D,"beforeUnmount"),ct&64?R.type.remove(R,D,N,ot,z):K&&!K.hasOnce&&(B!==xt||Z>0&&Z&64)?Xt(K,D,N,!1,!0):(B===xt&&Z&384||!$&&ct&16)&&Xt(q,D,N),z&&$e(R)}(Lt&&(Pt=X&&X.onVnodeUnmounted)||Tt)&&ln(()=>{Pt&&Nn(Pt,D,R),Tt&&Si(R,null,D,"unmounted")},N)},$e=R=>{const{type:D,el:N,anchor:z,transition:$}=R;if(D===xt){ce(N,z);return}if(D===wu){x(R);return}const B=()=>{i(N),$&&!$.persisted&&$.afterLeave&&$.afterLeave()};if(R.shapeFlag&1&&$&&!$.persisted){const{leave:X,delayLeave:G}=$,q=()=>X(N,B);G?G(R.el,B,q):q()}else B()},ce=(R,D)=>{let N;for(;R!==D;)N=p(R),i(R),R=N;i(D)},Ee=(R,D,N)=>{const{bum:z,scope:$,job:B,subTree:X,um:G,m:q,a:K}=R;wp(q),wp(K),z&&cl(z),$.stop(),B&&(B.flags|=8,Qt(X,R,D,N)),G&&ln(G,D),ln(()=>{R.isUnmounted=!0},D)},Xt=(R,D,N,z=!1,$=!1,B=0)=>{for(let X=B;X<R.length;X++)Qt(R[X],D,N,z,$)},j=R=>{if(R.shapeFlag&6)return j(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const D=p(R.anchor||R.el),N=D&&D[QT];return N?p(N):D};let et=!1;const J=(R,D,N)=>{R==null?D._vnode&&Qt(D._vnode,null,null,!0):w(D._vnode||null,R,D,null,null,null,N),D._vnode=R,et||(et=!0,fp(),wy(),et=!1)},ot={p:w,um:Qt,m:_e,r:$e,mt:bt,mc:_,pc:gt,pbc:C,n:j,o:e};return{render:J,hydrate:void 0,createApp:wI(J)}}function bu({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Ri({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function kI(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function By(e,t,n=!1){const s=e.children,i=t.children;if(dt(s)&&dt(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=qs(i[r]),a.el=o.el),!n&&a.patchFlag!==-2&&By(o,a)),a.type===Ec&&a.patchFlag!==-1&&(a.el=o.el),a.type===hi&&!a.el&&(a.el=o.el)}}function DI(e){const t=e.slice(),n=[0];let s,i,r,o,a;const l=e.length;for(s=0;s<l;s++){const u=e[s];if(u!==0){if(i=n[n.length-1],e[i]<u){t[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,e[n[a]]<u?r=a+1:o=a;u<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=t[o];return n}function jy(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:jy(t)}function wp(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const OI=Symbol.for("v-scx"),MI=()=>Rn(OI);function bs(e,t,n){return zy(e,t,n)}function zy(e,t,n=jt){const{immediate:s,deep:i,flush:r,once:o}=n,a=ze({},n),l=t&&s||!t&&r!=="post";let u;if(Xo){if(r==="sync"){const g=MI();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=$n,g.resume=$n,g.pause=$n,g}}const h=Ue;a.call=(g,b,w)=>ts(g,h,b,w);let d=!1;r==="post"?a.scheduler=g=>{ln(g,h&&h.suspense)}:r!=="sync"&&(d=!0,a.scheduler=(g,b)=>{b?g():od(g)}),a.augmentJob=g=>{t&&(g.flags|=4),d&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const p=WT(e,t,a);return Xo&&(u?u.push(p):l&&p()),p}function NI(e,t,n){const s=this.proxy,i=le(e)?e.includes(".")?Hy(s,e):()=>s[e]:e.bind(s,s);let r;vt(t)?r=t:(r=t.handler,n=t);const o=ma(this),a=zy(i,r.bind(s),n);return o(),a}function Hy(e,t){const n=t.split(".");return()=>{let s=e;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const VI=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${vn(t)}Modifiers`]||e[`${Xi(t)}Modifiers`];function LI(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||jt;let i=n;const r=t.startsWith("update:"),o=r&&VI(s,t.slice(7));o&&(o.trim&&(i=n.map(h=>le(h)?h.trim():h)),o.number&&(i=n.map(Al)));let a,l=s[a=pu(t)]||s[a=pu(vn(t))];!l&&r&&(l=s[a=pu(Xi(t))]),l&&ts(l,e,6,i);const u=s[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,ts(u,e,6,i)}}const FI=new WeakMap;function $y(e,t,n=!1){const s=n?FI:t.emitsCache,i=s.get(e);if(i!==void 0)return i;const r=e.emits;let o={},a=!1;if(!vt(e)){const l=u=>{const h=$y(u,t,!0);h&&(a=!0,ze(o,h))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(zt(e)&&s.set(e,null),null):(dt(r)?r.forEach(l=>o[l]=null):ze(o,r),zt(e)&&s.set(e,o),o)}function wc(e,t){return!e||!pc(t)?!1:(t=t.slice(2).replace(/Once$/,""),Nt(e,t[0].toLowerCase()+t.slice(1))||Nt(e,Xi(t))||Nt(e,t))}function Ep(e){const{type:t,vnode:n,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:d,data:p,setupState:g,ctx:b,inheritAttrs:w}=e,v=xl(e);let P,O;try{if(n.shapeFlag&4){const x=i||s,L=x;P=zn(u.call(L,x,h,d,g,p,b)),O=a}else{const x=t;P=zn(x.length>1?x(d,{attrs:a,slots:o,emit:l}):x(d,null)),O=t.props?a:UI(a)}}catch(x){Mo.length=0,vc(x,e,1),P=en(hi)}let k=P;if(O&&w!==!1){const x=Object.keys(O),{shapeFlag:L}=k;x.length&&L&7&&(r&&x.some(Gh)&&(O=BI(O,r)),k=Rr(k,O,!1,!0))}return n.dirs&&(k=Rr(k,null,!1,!0),k.dirs=k.dirs?k.dirs.concat(n.dirs):n.dirs),n.transition&&ad(k,n.transition),P=k,xl(v),P}const UI=e=>{let t;for(const n in e)(n==="class"||n==="style"||pc(n))&&((t||(t={}))[n]=e[n]);return t},BI=(e,t)=>{const n={};for(const s in e)(!Gh(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function jI(e,t,n){const{props:s,children:i,component:r}=e,{props:o,children:a,patchFlag:l}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?Tp(s,o,u):!!o;if(l&8){const h=t.dynamicProps;for(let d=0;d<h.length;d++){const p=h[d];if(o[p]!==s[p]&&!wc(u,p))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Tp(s,o,u):!0:!!o;return!1}function Tp(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==e[r]&&!wc(n,r))return!0}return!1}function zI({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const Wy=e=>e.__isSuspense;function HI(e,t){t&&t.pendingBranch?dt(e)?t.effects.push(...e):t.effects.push(e):GT(e)}const xt=Symbol.for("v-fgt"),Ec=Symbol.for("v-txt"),hi=Symbol.for("v-cmt"),wu=Symbol.for("v-stc"),Mo=[];let hn=null;function Y(e=!1){Mo.push(hn=e?null:[])}function $I(){Mo.pop(),hn=Mo[Mo.length-1]||null}let Qo=1;function Ol(e,t=!1){Qo+=e,e<0&&hn&&t&&(hn.hasOnce=!0)}function qy(e){return e.dynamicChildren=Qo>0?hn||yr:null,$I(),Qo>0&&hn&&hn.push(e),e}function nt(e,t,n,s,i,r){return qy(M(e,t,n,s,i,r,!0))}function Le(e,t,n,s,i){return qy(en(e,t,n,s,i,!0))}function Ml(e){return e?e.__v_isVNode===!0:!1}function co(e,t){return e.type===t.type&&e.key===t.key}const Ky=({key:e})=>e??null,hl=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?le(e)||ie(e)||vt(e)?{i:un,r:e,k:t,f:!!n}:e:null);function M(e,t=null,n=null,s=0,i=null,r=e===xt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ky(t),ref:t&&hl(t),scopeId:Ty,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:un};return a?(ud(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=le(n)?8:16),Qo>0&&!o&&hn&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&hn.push(l),l}const en=WI;function WI(e,t=null,n=null,s=0,i=null,r=!1){if((!e||e===dI)&&(e=hi),Ml(e)){const a=Rr(e,t,!0);return n&&ud(a,n),Qo>0&&!r&&hn&&(a.shapeFlag&6?hn[hn.indexOf(e)]=a:hn.push(a)),a.patchFlag=-2,a}if(n0(e)&&(e=e.__vccOpts),t){t=qI(t);let{class:a,style:l}=t;a&&!le(a)&&(t.class=xn(a)),zt(l)&&(id(l)&&!dt(l)&&(l=ze({},l)),t.style=Is(l))}const o=le(e)?1:Wy(e)?128:XT(e)?64:zt(e)?4:vt(e)?2:0;return M(e,t,n,s,i,o,r,!0)}function qI(e){return e?id(e)||My(e)?ze({},e):e:null}function Rr(e,t,n=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=e,u=t?KI(i||{},t):i,h={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Ky(u),ref:t&&t.ref?n&&r?dt(r)?r.concat(hl(t)):[r,hl(t)]:hl(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==xt?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Rr(e.ssContent),ssFallback:e.ssFallback&&Rr(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&ad(h,l.clone(h)),h}function Re(e=" ",t=0){return en(Ec,null,e,t)}function nn(e="",t=!1){return t?(Y(),Le(hi,null,e)):en(hi,null,e)}function zn(e){return e==null||typeof e=="boolean"?en(hi):dt(e)?en(xt,null,e.slice()):Ml(e)?qs(e):en(Ec,null,String(e))}function qs(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Rr(e)}function ud(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(dt(t))n=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),ud(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!My(t)?t._ctx=un:i===3&&un&&(un.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else vt(t)?(t={default:t,_ctx:un},n=32):(t=String(t),s&64?(n=16,t=[Re(t)]):n=8);e.children=t,e.shapeFlag|=n}function KI(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=xn([t.class,s.class]));else if(i==="style")t.style=Is([t.style,s.style]);else if(pc(i)){const r=t[i],o=s[i];o&&r!==o&&!(dt(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=s[i])}return t}function Nn(e,t,n,s=null){ts(e,t,7,[n,s])}const GI=ky();let YI=0;function QI(e,t,n){const s=e.type,i=(t?t.appContext:e.appContext)||GI,r={uid:YI++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Z_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Vy(s,i),emitsOptions:$y(s,i),emit:null,emitted:null,propsDefaults:jt,inheritAttrs:s.inheritAttrs,ctx:jt,data:jt,props:jt,attrs:jt,slots:jt,refs:jt,setupState:jt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=LI.bind(null,r),e.ce&&e.ce(r),r}let Ue=null;const Gy=()=>Ue||un;let Nl,ah;{const e=_c(),t=(n,s)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};Nl=t("__VUE_INSTANCE_SETTERS__",n=>Ue=n),ah=t("__VUE_SSR_SETTERS__",n=>Xo=n)}const ma=e=>{const t=Ue;return Nl(e),e.scope.on(),()=>{e.scope.off(),Nl(t)}},Ip=()=>{Ue&&Ue.scope.off(),Nl(null)};function Yy(e){return e.vnode.shapeFlag&4}let Xo=!1;function XI(e,t=!1,n=!1){t&&ah(t);const{props:s,children:i}=e.vnode,r=Yy(e);TI(e,s,r,t),RI(e,i,n||t);const o=r?JI(e,t):void 0;return t&&ah(!1),o}function JI(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,pI);const{setup:s}=n;if(s){As();const i=e.setupContext=s.length>1?t0(e):null,r=ma(e),o=ga(s,e,0,[e.props,i]),a=q_(o);if(Ss(),r(),(a||e.sp)&&!Do(e)&&Ay(e),a){if(o.then(Ip,Ip),t)return o.then(l=>{Ap(e,l)}).catch(l=>{vc(l,e,0)});e.asyncDep=o}else Ap(e,o)}else Qy(e)}function Ap(e,t,n){vt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:zt(t)&&(e.setupState=yy(t)),Qy(e)}function Qy(e,t,n){const s=e.type;e.render||(e.render=s.render||$n);{const i=ma(e);As();try{gI(e)}finally{Ss(),i()}}}const ZI={get(e,t){return Ve(e,"get",""),e[t]}};function t0(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,ZI),slots:e.slots,emit:e.emit,expose:t}}function Tc(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(yy(rd(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Oo)return Oo[n](e)},has(t,n){return n in t||n in Oo}})):e.proxy}function e0(e,t=!0){return vt(e)?e.displayName||e.name:e.name||t&&e.__name}function n0(e){return vt(e)&&"__vccOpts"in e}const qt=(e,t)=>HT(e,t,Xo);function Xy(e,t,n){try{Ol(-1);const s=arguments.length;return s===2?zt(t)&&!dt(t)?Ml(t)?en(e,null,[t]):en(e,t):en(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Ml(n)&&(n=[n]),en(e,t,n))}finally{Ol(1)}}const s0="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let lh;const Sp=typeof window<"u"&&window.trustedTypes;if(Sp)try{lh=Sp.createPolicy("vue",{createHTML:e=>e})}catch{}const Jy=lh?e=>lh.createHTML(e):e=>e,i0="http://www.w3.org/2000/svg",r0="http://www.w3.org/1998/Math/MathML",ds=typeof document<"u"?document:null,Rp=ds&&ds.createElement("template"),o0={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const i=t==="svg"?ds.createElementNS(i0,e):t==="mathml"?ds.createElementNS(r0,e):n?ds.createElement(e,{is:n}):ds.createElement(e);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>ds.createTextNode(e),createComment:e=>ds.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ds.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,i,r){const o=n?n.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{Rp.innerHTML=Jy(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=Rp.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},a0=Symbol("_vtc");function l0(e,t,n){const s=e[a0];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Cp=Symbol("_vod"),c0=Symbol("_vsh"),u0=Symbol(""),h0=/(?:^|;)\s*display\s*:/;function d0(e,t,n){const s=e.style,i=le(n);let r=!1;if(n&&!i){if(t)if(le(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&dl(s,a,"")}else for(const o in t)n[o]==null&&dl(s,o,"");for(const o in n)o==="display"&&(r=!0),dl(s,o,n[o])}else if(i){if(t!==n){const o=s[u0];o&&(n+=";"+o),s.cssText=n,r=h0.test(n)}}else t&&e.removeAttribute("style");Cp in e&&(e[Cp]=r?s.display:"",e[c0]&&(s.display="none"))}const Pp=/\s*!important$/;function dl(e,t,n){if(dt(n))n.forEach(s=>dl(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=f0(e,t);Pp.test(n)?e.setProperty(Xi(s),n.replace(Pp,""),"important"):e[s]=n}}const xp=["Webkit","Moz","ms"],Eu={};function f0(e,t){const n=Eu[t];if(n)return n;let s=vn(t);if(s!=="filter"&&s in e)return Eu[t]=s;s=mc(s);for(let i=0;i<xp.length;i++){const r=xp[i]+s;if(r in e)return Eu[t]=r}return t}const kp="http://www.w3.org/1999/xlink";function Dp(e,t,n,s,i,r=pT(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(kp,t.slice(6,t.length)):e.setAttributeNS(kp,t,n):n==null||r&&!Q_(n)?e.removeAttribute(t):e.setAttribute(t,r?"":Zn(n)?String(n):n)}function Op(e,t,n,s,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Jy(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=Q_(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function ms(e,t,n,s){e.addEventListener(t,n,s)}function p0(e,t,n,s){e.removeEventListener(t,n,s)}const Mp=Symbol("_vei");function g0(e,t,n,s,i=null){const r=e[Mp]||(e[Mp]={}),o=r[t];if(s&&o)o.value=s;else{const[a,l]=m0(t);if(s){const u=r[t]=v0(s,i);ms(e,a,u,l)}else o&&(p0(e,a,o,l),r[t]=void 0)}}const Np=/(?:Once|Passive|Capture)$/;function m0(e){let t;if(Np.test(e)){t={};let s;for(;s=e.match(Np);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Xi(e.slice(2)),t]}let Tu=0;const _0=Promise.resolve(),y0=()=>Tu||(_0.then(()=>Tu=0),Tu=Date.now());function v0(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;ts(b0(s,n.value),t,5,[s])};return n.value=e,n.attached=y0(),n}function b0(e,t){if(dt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const Vp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,w0=(e,t,n,s,i,r)=>{const o=i==="svg";t==="class"?l0(e,s,o):t==="style"?d0(e,n,s):pc(t)?Gh(t)||g0(e,t,n,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):E0(e,t,s,o))?(Op(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Dp(e,t,s,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!le(s))?Op(e,vn(t),s,r,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Dp(e,t,s,o))};function E0(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Vp(t)&&vt(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Vp(t)&&le(n)?!1:t in e}const di=e=>{const t=e.props["onUpdate:modelValue"]||!1;return dt(t)?n=>cl(t,n):t};function T0(e){e.target.composing=!0}function Lp(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const yn=Symbol("_assign"),Ye={created(e,{modifiers:{lazy:t,trim:n,number:s}},i){e[yn]=di(i);const r=s||i.props&&i.props.type==="number";ms(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),r&&(a=Al(a)),e[yn](a)}),n&&ms(e,"change",()=>{e.value=e.value.trim()}),t||(ms(e,"compositionstart",T0),ms(e,"compositionend",Lp),ms(e,"change",Lp))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:i,number:r}},o){if(e[yn]=di(o),e.composing)return;const a=(r||e.type==="number")&&!/^0\d/.test(e.value)?Al(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||i&&e.value.trim()===l)||(e.value=l))}},Zy={deep:!0,created(e,t,n){e[yn]=di(n),ms(e,"change",()=>{const s=e._modelValue,i=Cr(e),r=e.checked,o=e[yn];if(dt(s)){const a=Xh(s,i),l=a!==-1;if(r&&!l)o(s.concat(i));else if(!r&&l){const u=[...s];u.splice(a,1),o(u)}}else if(Fr(s)){const a=new Set(s);r?a.add(i):a.delete(i),o(a)}else o(tv(e,r))})},mounted:Fp,beforeUpdate(e,t,n){e[yn]=di(n),Fp(e,t,n)}};function Fp(e,{value:t,oldValue:n},s){e._modelValue=t;let i;if(dt(t))i=Xh(t,s.props.value)>-1;else if(Fr(t))i=t.has(s.props.value);else{if(t===n)return;i=zi(t,tv(e,!0))}e.checked!==i&&(e.checked=i)}const I0={created(e,{value:t},n){e.checked=zi(t,n.props.value),e[yn]=di(n),ms(e,"change",()=>{e[yn](Cr(e))})},beforeUpdate(e,{value:t,oldValue:n},s){e[yn]=di(s),t!==n&&(e.checked=zi(t,s.props.value))}},ii={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const i=Fr(t);ms(e,"change",()=>{const r=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?Al(Cr(o)):Cr(o));e[yn](e.multiple?i?new Set(r):r:r[0]),e._assigning=!0,Ur(()=>{e._assigning=!1})}),e[yn]=di(s)},mounted(e,{value:t}){Up(e,t)},beforeUpdate(e,t,n){e[yn]=di(n)},updated(e,{value:t}){e._assigning||Up(e,t)}};function Up(e,t){const n=e.multiple,s=dt(t);if(!(n&&!s&&!Fr(t))){for(let i=0,r=e.options.length;i<r;i++){const o=e.options[i],a=Cr(o);if(n)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(u=>String(u)===String(a)):o.selected=Xh(t,a)>-1}else o.selected=t.has(a);else if(zi(Cr(o),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Cr(e){return"_value"in e?e._value:e.value}function tv(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const A0={created(e,t,n){Ha(e,t,n,null,"created")},mounted(e,t,n){Ha(e,t,n,null,"mounted")},beforeUpdate(e,t,n,s){Ha(e,t,n,s,"beforeUpdate")},updated(e,t,n,s){Ha(e,t,n,s,"updated")}};function S0(e,t){switch(e){case"SELECT":return ii;case"TEXTAREA":return Ye;default:switch(t){case"checkbox":return Zy;case"radio":return I0;default:return Ye}}}function Ha(e,t,n,s,i){const o=S0(e.tagName,n.props&&n.props.type)[i];o&&o(e,t,n,s)}const R0=["ctrl","shift","alt","meta"],C0={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>R0.some(n=>e[`${n}Key`]&&!t.includes(n))},hd=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=((i,...r)=>{for(let o=0;o<t.length;o++){const a=C0[t[o]];if(a&&a(i,t))return}return e(i,...r)}))},P0=ze({patchProp:w0},o0);let Bp;function x0(){return Bp||(Bp=PI(P0))}const k0=((...e)=>{const t=x0().createApp(...e),{mount:n}=t;return t.mount=s=>{const i=O0(s);if(!i)return;const r=t._component;!vt(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,D0(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t});function D0(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function O0(e){return le(e)?document.querySelector(e):e}/*!
 * pinia v3.0.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let ev;const Ic=e=>ev=e,nv=Symbol();function ch(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var No;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(No||(No={}));function M0(){const e=ty(!0),t=e.run(()=>tt({}));let n=[],s=[];const i=rd({install(r){Ic(i),i._a=r,r.provide(nv,i),r.config.globalProperties.$pinia=i,s.forEach(o=>n.push(o)),s=[]},use(r){return this._a?n.push(r):s.push(r),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const sv=()=>{};function jp(e,t,n,s=sv){e.add(t);const i=()=>{e.delete(t)&&s()};return!n&&ey()&&mT(i),i}function cr(e,...t){e.forEach(n=>{n(...t)})}const N0=e=>e(),zp=Symbol(),Iu=Symbol();function uh(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,s)=>e.set(s,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const s=t[n],i=e[n];ch(i)&&ch(s)&&e.hasOwnProperty(n)&&!ie(s)&&!si(s)?e[n]=uh(i,s):e[n]=s}return e}const V0=Symbol();function L0(e){return!ch(e)||!Object.prototype.hasOwnProperty.call(e,V0)}const{assign:$s}=Object;function F0(e){return!!(ie(e)&&e.effect)}function U0(e,t,n,s){const{state:i,actions:r,getters:o}=t,a=n.state.value[e];let l;function u(){a||(n.state.value[e]=i?i():{});const h=UT(n.state.value[e]);return $s(h,r,Object.keys(o||{}).reduce((d,p)=>(d[p]=rd(qt(()=>{Ic(n);const g=n._s.get(e);return o[p].call(g,g)})),d),{}))}return l=iv(e,u,t,n,s,!0),l}function iv(e,t,n={},s,i,r){let o;const a=$s({actions:{}},n),l={deep:!0};let u,h,d=new Set,p=new Set,g;const b=s.state.value[e];!r&&!b&&(s.state.value[e]={}),tt({});let w;function v(_){let I;u=h=!1,typeof _=="function"?(_(s.state.value[e]),I={type:No.patchFunction,storeId:e,events:g}):(uh(s.state.value[e],_),I={type:No.patchObject,payload:_,storeId:e,events:g});const C=w=Symbol();Ur().then(()=>{w===C&&(u=!0)}),h=!0,cr(d,I,s.state.value[e])}const P=r?function(){const{state:I}=n,C=I?I():{};this.$patch(A=>{$s(A,C)})}:sv;function O(){o.stop(),d.clear(),p.clear(),s._s.delete(e)}const k=(_,I="")=>{if(zp in _)return _[Iu]=I,_;const C=function(){Ic(s);const A=Array.from(arguments),S=new Set,E=new Set;function bt(it){S.add(it)}function mt(it){E.add(it)}cr(p,{args:A,name:C[Iu],store:L,after:bt,onError:mt});let ut;try{ut=_.apply(this&&this.$id===e?this:L,A)}catch(it){throw cr(E,it),it}return ut instanceof Promise?ut.then(it=>(cr(S,it),it)).catch(it=>(cr(E,it),Promise.reject(it))):(cr(S,ut),ut)};return C[zp]=!0,C[Iu]=I,C},x={_p:s,$id:e,$onAction:jp.bind(null,p),$patch:v,$reset:P,$subscribe(_,I={}){const C=jp(d,_,I.detached,()=>A()),A=o.run(()=>bs(()=>s.state.value[e],S=>{(I.flush==="sync"?h:u)&&_({storeId:e,type:No.direct,events:g},S)},$s({},l,I)));return C},$dispose:O},L=pa(x);s._s.set(e,L);const T=(s._a&&s._a.runWithContext||N0)(()=>s._e.run(()=>(o=ty()).run(()=>t({action:k}))));for(const _ in T){const I=T[_];if(ie(I)&&!F0(I)||si(I))r||(b&&L0(I)&&(ie(I)?I.value=b[_]:uh(I,b[_])),s.state.value[e][_]=I);else if(typeof I=="function"){const C=k(I,_);T[_]=C,a.actions[_]=I}}return $s(L,T),$s(kt(L),T),Object.defineProperty(L,"$state",{get:()=>s.state.value[e],set:_=>{v(I=>{$s(I,_)})}}),s._p.forEach(_=>{$s(L,o.run(()=>_({store:L,app:s._a,pinia:s,options:a})))}),b&&r&&n.hydrate&&n.hydrate(L.$state,b),u=!0,h=!0,L}/*! #__NO_SIDE_EFFECTS__ */function B0(e,t,n){let s;const i=typeof t=="function";s=i?n:t;function r(o,a){const l=EI();return o=o||(l?Rn(nv,null):null),o&&Ic(o),o=ev,o._s.has(e)||(i?iv(e,t,s,o):U0(e,s,o)),o._s.get(e)}return r.$id=e,r}const j0={class:"app_holder"},z0={__name:"App",setup(e){return(t,n)=>{const s=hI("router-view");return Y(),nt("div",j0,[en(s)])}}};/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const fr=typeof document<"u";function rv(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function H0(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&rv(e.default)}const Mt=Object.assign;function Au(e,t){const n={};for(const s in t){const i=t[s];n[s]=kn(i)?i.map(e):e(i)}return n}const Vo=()=>{},kn=Array.isArray;function Hp(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}const ov=/#/g,$0=/&/g,W0=/\//g,q0=/=/g,K0=/\?/g,av=/\+/g,G0=/%5B/g,Y0=/%5D/g,lv=/%5E/g,Q0=/%60/g,cv=/%7B/g,X0=/%7C/g,uv=/%7D/g,J0=/%20/g;function dd(e){return e==null?"":encodeURI(""+e).replace(X0,"|").replace(G0,"[").replace(Y0,"]")}function Z0(e){return dd(e).replace(cv,"{").replace(uv,"}").replace(lv,"^")}function hh(e){return dd(e).replace(av,"%2B").replace(J0,"+").replace(ov,"%23").replace($0,"%26").replace(Q0,"`").replace(cv,"{").replace(uv,"}").replace(lv,"^")}function tA(e){return hh(e).replace(q0,"%3D")}function eA(e){return dd(e).replace(ov,"%23").replace(K0,"%3F")}function nA(e){return eA(e).replace(W0,"%2F")}function Jo(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const sA=/\/$/,iA=e=>e.replace(sA,"");function Su(e,t,n="/"){let s,i={},r="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(s=t.slice(0,l),r=t.slice(l,a>0?a:t.length),i=e(r.slice(1))),a>=0&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=lA(s??t,n),{fullPath:s+r+o,path:s,query:i,hash:Jo(o)}}function rA(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function $p(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function oA(e,t,n){const s=t.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&Pr(t.matched[s],n.matched[i])&&hv(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Pr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function hv(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!aA(e[n],t[n]))return!1;return!0}function aA(e,t){return kn(e)?Wp(e,t):kn(t)?Wp(t,e):e===t}function Wp(e,t){return kn(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function lA(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const zs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let dh=(function(e){return e.pop="pop",e.push="push",e})({}),Ru=(function(e){return e.back="back",e.forward="forward",e.unknown="",e})({});function cA(e){if(!e)if(fr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),iA(e)}const uA=/^[^#]+#/;function hA(e,t){return e.replace(uA,"#")+t}function dA(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const Ac=()=>({left:window.scrollX,top:window.scrollY});function fA(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=dA(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function qp(e,t){return(history.state?history.state.position-t:-1)+e}const fh=new Map;function pA(e,t){fh.set(e,t)}function gA(e){const t=fh.get(e);return fh.delete(e),t}function mA(e){return typeof e=="string"||e&&typeof e=="object"}function dv(e){return typeof e=="string"||typeof e=="symbol"}let te=(function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e})({});const fv=Symbol("");te.MATCHER_NOT_FOUND+"",te.NAVIGATION_GUARD_REDIRECT+"",te.NAVIGATION_ABORTED+"",te.NAVIGATION_CANCELLED+"",te.NAVIGATION_DUPLICATED+"";function xr(e,t){return Mt(new Error,{type:e,[fv]:!0},t)}function ls(e,t){return e instanceof Error&&fv in e&&(t==null||!!(e.type&t))}const _A=["params","query","hash"];function yA(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const n of _A)n in e&&(t[n]=e[n]);return JSON.stringify(t,null,2)}function vA(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<n.length;++s){const i=n[s].replace(av," "),r=i.indexOf("="),o=Jo(r<0?i:i.slice(0,r)),a=r<0?null:Jo(i.slice(r+1));if(o in t){let l=t[o];kn(l)||(l=t[o]=[l]),l.push(a)}else t[o]=a}return t}function Kp(e){let t="";for(let n in e){const s=e[n];if(n=tA(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(kn(s)?s.map(i=>i&&hh(i)):[s&&hh(s)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function bA(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=kn(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const wA=Symbol(""),Gp=Symbol(""),Sc=Symbol(""),pv=Symbol(""),ph=Symbol("");function uo(){let e=[];function t(s){return e.push(s),()=>{const i=e.indexOf(s);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Ks(e,t,n,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const u=p=>{p===!1?l(xr(te.NAVIGATION_ABORTED,{from:n,to:t})):p instanceof Error?l(p):mA(p)?l(xr(te.NAVIGATION_GUARD_REDIRECT,{from:t,to:p})):(o&&s.enterCallbacks[i]===o&&typeof p=="function"&&o.push(p),a())},h=r(()=>e.call(s&&s.instances[i],t,n,u));let d=Promise.resolve(h);e.length<3&&(d=d.then(u)),d.catch(p=>l(p))})}function Cu(e,t,n,s,i=r=>r()){const r=[];for(const o of e)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(rv(l)){const u=(l.__vccOpts||l)[t];u&&r.push(Ks(u,n,s,o,a,i))}else{let u=l();r.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=H0(h)?h.default:h;o.mods[a]=h,o.components[a]=d;const p=(d.__vccOpts||d)[t];return p&&Ks(p,n,s,o,a,i)()}))}}return r}function EA(e,t){const n=[],s=[],i=[],r=Math.max(t.matched.length,e.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(e.matched.find(u=>Pr(u,a))?s.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(u=>Pr(u,l))||i.push(l))}return[n,s,i]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let TA=()=>location.protocol+"//"+location.host;function gv(e,t){const{pathname:n,search:s,hash:i}=t,r=e.indexOf("#");if(r>-1){let o=i.includes(e.slice(r))?e.slice(r).length:1,a=i.slice(o);return a[0]!=="/"&&(a="/"+a),$p(a,"")}return $p(n,e)+s+i}function IA(e,t,n,s){let i=[],r=[],o=null;const a=({state:p})=>{const g=gv(e,location),b=n.value,w=t.value;let v=0;if(p){if(n.value=g,t.value=p,o&&o===b){o=null;return}v=w?p.position-w.position:0}else s(g);i.forEach(P=>{P(n.value,b,{delta:v,type:dh.pop,direction:v?v>0?Ru.forward:Ru.back:Ru.unknown})})};function l(){o=n.value}function u(p){i.push(p);const g=()=>{const b=i.indexOf(p);b>-1&&i.splice(b,1)};return r.push(g),g}function h(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(Mt({},p.state,{scroll:Ac()}),"")}}function d(){for(const p of r)p();r=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:l,listen:u,destroy:d}}function Yp(e,t,n,s=!1,i=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:i?Ac():null}}function AA(e){const{history:t,location:n}=window,s={value:gv(e,n)},i={value:t.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,u,h){const d=e.indexOf("#"),p=d>-1?(n.host&&document.querySelector("base")?e:e.slice(d))+l:TA()+e+l;try{t[h?"replaceState":"pushState"](u,"",p),i.value=u}catch(g){console.error(g),n[h?"replace":"assign"](p)}}function o(l,u){r(l,Mt({},t.state,Yp(i.value.back,l,i.value.forward,!0),u,{position:i.value.position}),!0),s.value=l}function a(l,u){const h=Mt({},i.value,t.state,{forward:l,scroll:Ac()});r(h.current,h,!0),r(l,Mt({},Yp(s.value,l,null),{position:h.position+1},u),!1),s.value=l}return{location:s,state:i,push:a,replace:o}}function SA(e){e=cA(e);const t=AA(e),n=IA(e,t.state,t.location,t.replace);function s(r,o=!0){o||n.pauseListeners(),history.go(r)}const i=Mt({location:"",base:e,go:s,createHref:hA.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}let Mi=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e})({});var he=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e})(he||{});const RA={type:Mi.Static,value:""},CA=/[a-zA-Z0-9_]/;function PA(e){if(!e)return[[]];if(e==="/")return[[RA]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(g){throw new Error(`ERR (${n})/"${u}": ${g}`)}let n=he.Static,s=n;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,l,u="",h="";function d(){u&&(n===he.Static?r.push({type:Mi.Static,value:u}):n===he.Param||n===he.ParamRegExp||n===he.ParamRegExpEnd?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:Mi.Param,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==he.ParamRegExp){s=n,n=he.EscapeNext;continue}switch(n){case he.Static:l==="/"?(u&&d(),o()):l===":"?(d(),n=he.Param):p();break;case he.EscapeNext:p(),n=s;break;case he.Param:l==="("?n=he.ParamRegExp:CA.test(l)?p():(d(),n=he.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case he.ParamRegExp:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=he.ParamRegExpEnd:h+=l;break;case he.ParamRegExpEnd:d(),n=he.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:t("Unknown state");break}}return n===he.ParamRegExp&&t(`Unfinished custom RegExp for param "${u}"`),d(),o(),i}const Qp="[^/]+?",xA={sensitive:!1,strict:!1,start:!0,end:!0};var Ke=(function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e})(Ke||{});const kA=/[.+*?^${}()[\]/\\]/g;function DA(e,t){const n=Mt({},xA,t),s=[];let i=n.start?"^":"";const r=[];for(const u of e){const h=u.length?[]:[Ke.Root];n.strict&&!u.length&&(i+="/");for(let d=0;d<u.length;d++){const p=u[d];let g=Ke.Segment+(n.sensitive?Ke.BonusCaseSensitive:0);if(p.type===Mi.Static)d||(i+="/"),i+=p.value.replace(kA,"\\$&"),g+=Ke.Static;else if(p.type===Mi.Param){const{value:b,repeatable:w,optional:v,regexp:P}=p;r.push({name:b,repeatable:w,optional:v});const O=P||Qp;if(O!==Qp){g+=Ke.BonusCustomRegExp;try{`${O}`}catch(x){throw new Error(`Invalid custom RegExp for param "${b}" (${O}): `+x.message)}}let k=w?`((?:${O})(?:/(?:${O}))*)`:`(${O})`;d||(k=v&&u.length<2?`(?:/${k})`:"/"+k),v&&(k+="?"),i+=k,g+=Ke.Dynamic,v&&(g+=Ke.BonusOptional),w&&(g+=Ke.BonusRepeatable),O===".*"&&(g+=Ke.BonusWildcard)}h.push(g)}s.push(h)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=Ke.BonusStrict}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(u){const h=u.match(o),d={};if(!h)return null;for(let p=1;p<h.length;p++){const g=h[p]||"",b=r[p-1];d[b.name]=g&&b.repeatable?g.split("/"):g}return d}function l(u){let h="",d=!1;for(const p of e){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const g of p)if(g.type===Mi.Static)h+=g.value;else if(g.type===Mi.Param){const{value:b,repeatable:w,optional:v}=g,P=b in u?u[b]:"";if(kn(P)&&!w)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const O=kn(P)?P.join("/"):P;if(!O)if(v)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${b}"`);h+=O}}return h||"/"}return{re:o,score:s,keys:r,parse:a,stringify:l}}function OA(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===Ke.Static+Ke.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===Ke.Static+Ke.Segment?1:-1:0}function mv(e,t){let n=0;const s=e.score,i=t.score;for(;n<s.length&&n<i.length;){const r=OA(s[n],i[n]);if(r)return r;n++}if(Math.abs(i.length-s.length)===1){if(Xp(s))return 1;if(Xp(i))return-1}return i.length-s.length}function Xp(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const MA={strict:!1,end:!0,sensitive:!1};function NA(e,t,n){const s=DA(PA(e.path),n),i=Mt(s,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function VA(e,t){const n=[],s=new Map;t=Hp(MA,t);function i(d){return s.get(d)}function r(d,p,g){const b=!g,w=Zp(d);w.aliasOf=g&&g.record;const v=Hp(t,d),P=[w];if("alias"in d){const x=typeof d.alias=="string"?[d.alias]:d.alias;for(const L of x)P.push(Zp(Mt({},w,{components:g?g.record.components:w.components,path:L,aliasOf:g?g.record:w})))}let O,k;for(const x of P){const{path:L}=x;if(p&&L[0]!=="/"){const U=p.record.path,T=U[U.length-1]==="/"?"":"/";x.path=p.record.path+(L&&T+L)}if(O=NA(x,p,v),g?g.alias.push(O):(k=k||O,k!==O&&k.alias.push(O),b&&d.name&&!tg(O)&&o(d.name)),_v(O)&&l(O),w.children){const U=w.children;for(let T=0;T<U.length;T++)r(U[T],O,g&&g.children[T])}g=g||O}return k?()=>{o(k)}:Vo}function o(d){if(dv(d)){const p=s.get(d);p&&(s.delete(d),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(d);p>-1&&(n.splice(p,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const p=UA(d,n);n.splice(p,0,d),d.record.name&&!tg(d)&&s.set(d.record.name,d)}function u(d,p){let g,b={},w,v;if("name"in d&&d.name){if(g=s.get(d.name),!g)throw xr(te.MATCHER_NOT_FOUND,{location:d});v=g.record.name,b=Mt(Jp(p.params,g.keys.filter(k=>!k.optional).concat(g.parent?g.parent.keys.filter(k=>k.optional):[]).map(k=>k.name)),d.params&&Jp(d.params,g.keys.map(k=>k.name))),w=g.stringify(b)}else if(d.path!=null)w=d.path,g=n.find(k=>k.re.test(w)),g&&(b=g.parse(w),v=g.record.name);else{if(g=p.name?s.get(p.name):n.find(k=>k.re.test(p.path)),!g)throw xr(te.MATCHER_NOT_FOUND,{location:d,currentLocation:p});v=g.record.name,b=Mt({},p.params,d.params),w=g.stringify(b)}const P=[];let O=g;for(;O;)P.unshift(O.record),O=O.parent;return{name:v,path:w,params:b,matched:P,meta:FA(P)}}e.forEach(d=>r(d));function h(){n.length=0,s.clear()}return{addRoute:r,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:i}}function Jp(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function Zp(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:LA(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function LA(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function tg(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function FA(e){return e.reduce((t,n)=>Mt(t,n.meta),{})}function UA(e,t){let n=0,s=t.length;for(;n!==s;){const r=n+s>>1;mv(e,t[r])<0?s=r:n=r+1}const i=BA(e);return i&&(s=t.lastIndexOf(i,s-1)),s}function BA(e){let t=e;for(;t=t.parent;)if(_v(t)&&mv(e,t)===0)return t}function _v({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function eg(e){const t=Rn(Sc),n=Rn(pv),s=qt(()=>{const l=Wn(e.to);return t.resolve(l)}),i=qt(()=>{const{matched:l}=s.value,{length:u}=l,h=l[u-1],d=n.matched;if(!h||!d.length)return-1;const p=d.findIndex(Pr.bind(null,h));if(p>-1)return p;const g=ng(l[u-2]);return u>1&&ng(h)===g&&d[d.length-1].path!==g?d.findIndex(Pr.bind(null,l[u-2])):p}),r=qt(()=>i.value>-1&&WA(n.params,s.value.params)),o=qt(()=>i.value>-1&&i.value===n.matched.length-1&&hv(n.params,s.value.params));function a(l={}){if($A(l)){const u=t[Wn(e.replace)?"replace":"push"](Wn(e.to)).catch(Vo);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:qt(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}function jA(e){return e.length===1?e[0]:e}const zA=Iy({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:eg,setup(e,{slots:t}){const n=pa(eg(e)),{options:s}=Rn(Sc),i=qt(()=>({[sg(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[sg(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&jA(t.default(n));return e.custom?r:Xy("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),HA=zA;function $A(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function WA(e,t){for(const n in t){const s=t[n],i=e[n];if(typeof s=="string"){if(s!==i)return!1}else if(!kn(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function ng(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const sg=(e,t,n)=>e??t??n,qA=Iy({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=Rn(ph),i=qt(()=>e.route||s.value),r=Rn(Gp,0),o=qt(()=>{let u=Wn(r);const{matched:h}=i.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),a=qt(()=>i.value.matched[o.value]);ul(Gp,qt(()=>o.value+1)),ul(wA,a),ul(ph,i);const l=tt();return bs(()=>[l.value,a.value,e.name],([u,h,d],[p,g,b])=>{h&&(h.instances[d]=u,g&&g!==h&&u&&u===p&&(h.leaveGuards.size||(h.leaveGuards=g.leaveGuards),h.updateGuards.size||(h.updateGuards=g.updateGuards))),u&&h&&(!g||!Pr(h,g)||!p)&&(h.enterCallbacks[d]||[]).forEach(w=>w(u))},{flush:"post"}),()=>{const u=i.value,h=e.name,d=a.value,p=d&&d.components[h];if(!p)return ig(n.default,{Component:p,route:u});const g=d.props[h],b=g?g===!0?u.params:typeof g=="function"?g(u):g:null,v=Xy(p,Mt({},b,t,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(d.instances[h]=null)},ref:l}));return ig(n.default,{Component:v,route:u})||v}}});function ig(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const KA=qA;function GA(e){const t=VA(e.routes,e),n=e.parseQuery||vA,s=e.stringifyQuery||Kp,i=e.history,r=uo(),o=uo(),a=uo(),l=VT(zs);let u=zs;fr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Au.bind(null,j=>""+j),d=Au.bind(null,nA),p=Au.bind(null,Jo);function g(j,et){let J,ot;return dv(j)?(J=t.getRecordMatcher(j),ot=et):ot=j,t.addRoute(ot,J)}function b(j){const et=t.getRecordMatcher(j);et&&t.removeRoute(et)}function w(){return t.getRoutes().map(j=>j.record)}function v(j){return!!t.getRecordMatcher(j)}function P(j,et){if(et=Mt({},et||l.value),typeof j=="string"){const N=Su(n,j,et.path),z=t.resolve({path:N.path},et),$=i.createHref(N.fullPath);return Mt(N,z,{params:p(z.params),hash:Jo(N.hash),redirectedFrom:void 0,href:$})}let J;if(j.path!=null)J=Mt({},j,{path:Su(n,j.path,et.path).path});else{const N=Mt({},j.params);for(const z in N)N[z]==null&&delete N[z];J=Mt({},j,{params:d(N)}),et.params=d(et.params)}const ot=t.resolve(J,et),It=j.hash||"";ot.params=h(p(ot.params));const R=rA(s,Mt({},j,{hash:Z0(It),path:ot.path})),D=i.createHref(R);return Mt({fullPath:R,hash:It,query:s===Kp?bA(j.query):j.query||{}},ot,{redirectedFrom:void 0,href:D})}function O(j){return typeof j=="string"?Su(n,j,l.value.path):Mt({},j)}function k(j,et){if(u!==j)return xr(te.NAVIGATION_CANCELLED,{from:et,to:j})}function x(j){return T(j)}function L(j){return x(Mt(O(j),{replace:!0}))}function U(j,et){const J=j.matched[j.matched.length-1];if(J&&J.redirect){const{redirect:ot}=J;let It=typeof ot=="function"?ot(j,et):ot;return typeof It=="string"&&(It=It.includes("?")||It.includes("#")?It=O(It):{path:It},It.params={}),Mt({query:j.query,hash:j.hash,params:It.path!=null?{}:j.params},It)}}function T(j,et){const J=u=P(j),ot=l.value,It=j.state,R=j.force,D=j.replace===!0,N=U(J,ot);if(N)return T(Mt(O(N),{state:typeof N=="object"?Mt({},It,N.state):It,force:R,replace:D}),et||J);const z=J;z.redirectedFrom=et;let $;return!R&&oA(s,ot,J)&&($=xr(te.NAVIGATION_DUPLICATED,{to:z,from:ot}),_e(ot,ot,!0,!1)),($?Promise.resolve($):C(z,ot)).catch(B=>ls(B)?ls(B,te.NAVIGATION_GUARD_REDIRECT)?B:we(B):gt(B,z,ot)).then(B=>{if(B){if(ls(B,te.NAVIGATION_GUARD_REDIRECT))return T(Mt({replace:D},O(B.to),{state:typeof B.to=="object"?Mt({},It,B.to.state):It,force:R}),et||z)}else B=S(z,ot,!0,D,It);return A(z,ot,B),B})}function _(j,et){const J=k(j,et);return J?Promise.reject(J):Promise.resolve()}function I(j){const et=ce.values().next().value;return et&&typeof et.runWithContext=="function"?et.runWithContext(j):j()}function C(j,et){let J;const[ot,It,R]=EA(j,et);J=Cu(ot.reverse(),"beforeRouteLeave",j,et);for(const N of ot)N.leaveGuards.forEach(z=>{J.push(Ks(z,j,et))});const D=_.bind(null,j,et);return J.push(D),Xt(J).then(()=>{J=[];for(const N of r.list())J.push(Ks(N,j,et));return J.push(D),Xt(J)}).then(()=>{J=Cu(It,"beforeRouteUpdate",j,et);for(const N of It)N.updateGuards.forEach(z=>{J.push(Ks(z,j,et))});return J.push(D),Xt(J)}).then(()=>{J=[];for(const N of R)if(N.beforeEnter)if(kn(N.beforeEnter))for(const z of N.beforeEnter)J.push(Ks(z,j,et));else J.push(Ks(N.beforeEnter,j,et));return J.push(D),Xt(J)}).then(()=>(j.matched.forEach(N=>N.enterCallbacks={}),J=Cu(R,"beforeRouteEnter",j,et,I),J.push(D),Xt(J))).then(()=>{J=[];for(const N of o.list())J.push(Ks(N,j,et));return J.push(D),Xt(J)}).catch(N=>ls(N,te.NAVIGATION_CANCELLED)?N:Promise.reject(N))}function A(j,et,J){a.list().forEach(ot=>I(()=>ot(j,et,J)))}function S(j,et,J,ot,It){const R=k(j,et);if(R)return R;const D=et===zs,N=fr?history.state:{};J&&(ot||D?i.replace(j.fullPath,Mt({scroll:D&&N&&N.scroll},It)):i.push(j.fullPath,It)),l.value=j,_e(j,et,J,D),we()}let E;function bt(){E||(E=i.listen((j,et,J)=>{if(!Ee.listening)return;const ot=P(j),It=U(ot,Ee.currentRoute.value);if(It){T(Mt(It,{replace:!0,force:!0}),ot).catch(Vo);return}u=ot;const R=l.value;fr&&pA(qp(R.fullPath,J.delta),Ac()),C(ot,R).catch(D=>ls(D,te.NAVIGATION_ABORTED|te.NAVIGATION_CANCELLED)?D:ls(D,te.NAVIGATION_GUARD_REDIRECT)?(T(Mt(O(D.to),{force:!0}),ot).then(N=>{ls(N,te.NAVIGATION_ABORTED|te.NAVIGATION_DUPLICATED)&&!J.delta&&J.type===dh.pop&&i.go(-1,!1)}).catch(Vo),Promise.reject()):(J.delta&&i.go(-J.delta,!1),gt(D,ot,R))).then(D=>{D=D||S(ot,R,!1),D&&(J.delta&&!ls(D,te.NAVIGATION_CANCELLED)?i.go(-J.delta,!1):J.type===dh.pop&&ls(D,te.NAVIGATION_ABORTED|te.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),A(ot,R,D)}).catch(Vo)}))}let mt=uo(),ut=uo(),it;function gt(j,et,J){we(j);const ot=ut.list();return ot.length?ot.forEach(It=>It(j,et,J)):console.error(j),Promise.reject(j)}function Ot(){return it&&l.value!==zs?Promise.resolve():new Promise((j,et)=>{mt.add([j,et])})}function we(j){return it||(it=!j,bt(),mt.list().forEach(([et,J])=>j?J(j):et()),mt.reset()),j}function _e(j,et,J,ot){const{scrollBehavior:It}=e;if(!fr||!It)return Promise.resolve();const R=!J&&gA(qp(j.fullPath,0))||(ot||!J)&&history.state&&history.state.scroll||null;return Ur().then(()=>It(j,et,R)).then(D=>D&&fA(D)).catch(D=>gt(D,j,et))}const Qt=j=>i.go(j);let $e;const ce=new Set,Ee={currentRoute:l,listening:!0,addRoute:g,removeRoute:b,clearRoutes:t.clearRoutes,hasRoute:v,getRoutes:w,resolve:P,options:e,push:x,replace:L,go:Qt,back:()=>Qt(-1),forward:()=>Qt(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:ut.add,isReady:Ot,install(j){j.component("RouterLink",HA),j.component("RouterView",KA),j.config.globalProperties.$router=Ee,Object.defineProperty(j.config.globalProperties,"$route",{enumerable:!0,get:()=>Wn(l)}),fr&&!$e&&l.value===zs&&($e=!0,x(i.location).catch(ot=>{}));const et={};for(const ot in zs)Object.defineProperty(et,ot,{get:()=>l.value[ot],enumerable:!0});j.provide(Sc,Ee),j.provide(pv,my(et)),j.provide(ph,l);const J=j.unmount;ce.add(j),j.unmount=function(){ce.delete(j),ce.size<1&&(u=zs,E&&E(),E=null,l.value=zs,$e=!1,it=!1),J()}}};function Xt(j){return j.reduce((et,J)=>et.then(()=>I(J)),Promise.resolve())}return Ee}function Rc(){return Rn(Sc)}const YA=()=>{};var rg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++s)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},QA=function(e){const t=[];let n=0,s=0;for(;n<e.length;){const i=e[n++];if(i<128)t[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=e[n++];t[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=e[n++],o=e[n++],a=e[n++],l=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;t[s++]=String.fromCharCode(55296+(l>>10)),t[s++]=String.fromCharCode(56320+(l&1023))}else{const r=e[n++],o=e[n++];t[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return t.join("")},vv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<e.length;i+=3){const r=e[i],o=i+1<e.length,a=o?e[i+1]:0,l=i+2<e.length,u=l?e[i+2]:0,h=r>>2,d=(r&3)<<4|a>>4;let p=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(p=64)),s.push(n[h],n[d],n[p],n[g])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(yv(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):QA(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<e.length;){const r=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const u=i<e.length?n[e.charAt(i)]:64;++i;const d=i<e.length?n[e.charAt(i)]:64;if(++i,r==null||a==null||u==null||d==null)throw new XA;const p=r<<2|a>>4;if(s.push(p),u!==64){const g=a<<4&240|u>>2;if(s.push(g),d!==64){const b=u<<6&192|d;s.push(b)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class XA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JA=function(e){const t=yv(e);return vv.encodeByteArray(t,!0)},Vl=function(e){return JA(e).replace(/\./g,"")},bv=function(e){try{return vv.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS=()=>ZA().__FIREBASE_DEFAULTS__,eS=()=>{if(typeof process>"u"||typeof rg>"u")return;const e=rg.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},nS=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&bv(e[1]);return t&&JSON.parse(t)},Cc=()=>{try{return YA()||tS()||eS()||nS()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},wv=e=>Cc()?.emulatorHosts?.[e],Ev=e=>{const t=wv(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},Tv=()=>Cc()?.config,Iv=e=>Cc()?.[`_${e}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fd(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Vl(JSON.stringify(n)),Vl(JSON.stringify(o)),""].join(".")}const Lo={};function iS(){const e={prod:[],emulator:[]};for(const t of Object.keys(Lo))Lo[t]?e.emulator.push(t):e.prod.push(t);return e}function rS(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let og=!1;function pd(e,t){if(typeof window>"u"||typeof document>"u"||!Ji(window.location.host)||Lo[e]===t||Lo[e]||og)return;Lo[e]=t;function n(p){return`__firebase__banner__${p}`}const s="__firebase__banner",r=iS().prod.length>0;function o(){const p=document.getElementById(s);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{og=!0,o()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function d(){const p=rS(s),g=n("text"),b=document.getElementById(g)||document.createElement("span"),w=n("learnmore"),v=document.getElementById(w)||document.createElement("a"),P=n("preprendIcon"),O=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const k=p.element;a(k),h(v,w);const x=u();l(O,P),k.append(O,b,v,x),document.body.appendChild(k)}r?(b.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(He())}function aS(){const e=Cc()?.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cS(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function uS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hS(){const e=He();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function dS(){return!aS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fS(){try{return typeof indexedDB=="object"}catch{return!1}}function pS(){return new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="FirebaseError";class rs extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=gS,Object.setPrototypeOf(this,rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_a.prototype.create)}}class _a{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},i=`${this.service}/${t}`,r=this.errors[t],o=r?mS(r,s):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new rs(i,a,s)}}function mS(e,t){return e.replace(_S,(n,s)=>{const i=t[s];return i!=null?String(i):`<${s}?>`})}const _S=/\{\$([^}]+)}/g;function yS(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Hi(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const i of n){if(!s.includes(i))return!1;const r=e[i],o=t[i];if(ag(r)&&ag(o)){if(!Hi(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function ag(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(e){const t=[];for(const[n,s]of Object.entries(e))Array.isArray(s)?s.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function yo(e){const t={};return e.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,r]=s.split("=");t[decodeURIComponent(i)]=decodeURIComponent(r)}}),t}function vo(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function vS(e,t){const n=new bS(e,t);return n.subscribe.bind(n)}class bS{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let i;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");wS(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:s},i.next===void 0&&(i.next=Pu),i.error===void 0&&(i.error=Pu),i.complete===void 0&&(i.complete=Pu);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wS(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Pu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(e){return e&&e._delegate?e._delegate:e}class fi{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new sS;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(IS(t))try{this.getOrInitializeService({instanceIdentifier:Di})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(t=Di){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Di){return this.instances.has(t)}getOptions(t=Di){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);s===a&&o.resolve(i)}return i}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(s)??new Set;i.add(t),this.onInitCallbacks.set(s,i);const r=this.instances.get(s);return r&&t(r,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:TS(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Di){return this.component?this.component.multipleInstances?t:Di:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TS(e){return e===Di?void 0:e}function IS(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new ES(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(At||(At={}));const SS={debug:At.DEBUG,verbose:At.VERBOSE,info:At.INFO,warn:At.WARN,error:At.ERROR,silent:At.SILENT},RS=At.INFO,CS={[At.DEBUG]:"log",[At.VERBOSE]:"log",[At.INFO]:"info",[At.WARN]:"warn",[At.ERROR]:"error"},PS=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),i=CS[t];if(i)console[i](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class gd{constructor(t){this.name=t,this._logLevel=RS,this._logHandler=PS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in At))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?SS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,At.DEBUG,...t),this._logHandler(this,At.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,At.VERBOSE,...t),this._logHandler(this,At.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,At.INFO,...t),this._logHandler(this,At.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,At.WARN,...t),this._logHandler(this,At.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,At.ERROR,...t),this._logHandler(this,At.ERROR,...t)}}const xS=(e,t)=>t.some(n=>e instanceof n);let lg,cg;function kS(){return lg||(lg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DS(){return cg||(cg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Sv=new WeakMap,gh=new WeakMap,Rv=new WeakMap,xu=new WeakMap,md=new WeakMap;function OS(e){const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{n(ri(e.result)),i()},o=()=>{s(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Sv.set(n,e)}).catch(()=>{}),md.set(t,e),t}function MS(e){if(gh.has(e))return;const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)});gh.set(e,t)}let mh={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return gh.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Rv.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ri(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function NS(e){mh=e(mh)}function VS(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=e.call(ku(this),t,...n);return Rv.set(s,t.sort?t.sort():[t]),ri(s)}:DS().includes(e)?function(...t){return e.apply(ku(this),t),ri(Sv.get(this))}:function(...t){return ri(e.apply(ku(this),t))}}function LS(e){return typeof e=="function"?VS(e):(e instanceof IDBTransaction&&MS(e),xS(e,kS())?new Proxy(e,mh):e)}function ri(e){if(e instanceof IDBRequest)return OS(e);if(xu.has(e))return xu.get(e);const t=LS(e);return t!==e&&(xu.set(e,t),md.set(t,e)),t}const ku=e=>md.get(e);function FS(e,t,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(e,t),a=ri(o);return s&&o.addEventListener("upgradeneeded",l=>{s(ri(o.result),l.oldVersion,l.newVersion,ri(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const US=["get","getKey","getAll","getAllKeys","count"],BS=["put","add","delete","clear"],Du=new Map;function ug(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Du.get(t))return Du.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,i=BS.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||US.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Du.set(t,r),r}NS(e=>({...e,get:(t,n,s)=>ug(t,n)||e.get(t,n,s),has:(t,n)=>!!ug(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zS(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function zS(e){return e.getComponent()?.type==="VERSION"}const _h="@firebase/app",hg="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=new gd("@firebase/app"),HS="@firebase/app-compat",$S="@firebase/analytics-compat",WS="@firebase/analytics",qS="@firebase/app-check-compat",KS="@firebase/app-check",GS="@firebase/auth",YS="@firebase/auth-compat",QS="@firebase/database",XS="@firebase/data-connect",JS="@firebase/database-compat",ZS="@firebase/functions",tR="@firebase/functions-compat",eR="@firebase/installations",nR="@firebase/installations-compat",sR="@firebase/messaging",iR="@firebase/messaging-compat",rR="@firebase/performance",oR="@firebase/performance-compat",aR="@firebase/remote-config",lR="@firebase/remote-config-compat",cR="@firebase/storage",uR="@firebase/storage-compat",hR="@firebase/firestore",dR="@firebase/ai",fR="@firebase/firestore-compat",pR="firebase",gR="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh="[DEFAULT]",mR={[_h]:"fire-core",[HS]:"fire-core-compat",[WS]:"fire-analytics",[$S]:"fire-analytics-compat",[KS]:"fire-app-check",[qS]:"fire-app-check-compat",[GS]:"fire-auth",[YS]:"fire-auth-compat",[QS]:"fire-rtdb",[XS]:"fire-data-connect",[JS]:"fire-rtdb-compat",[ZS]:"fire-fn",[tR]:"fire-fn-compat",[eR]:"fire-iid",[nR]:"fire-iid-compat",[sR]:"fire-fcm",[iR]:"fire-fcm-compat",[rR]:"fire-perf",[oR]:"fire-perf-compat",[aR]:"fire-rc",[lR]:"fire-rc-compat",[cR]:"fire-gcs",[uR]:"fire-gcs-compat",[hR]:"fire-fst",[fR]:"fire-fst-compat",[dR]:"fire-vertex","fire-js":"fire-js",[pR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=new Map,_R=new Map,vh=new Map;function dg(e,t){try{e.container.addComponent(t)}catch(n){Rs.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function $i(e){const t=e.name;if(vh.has(t))return Rs.debug(`There were multiple attempts to register component ${t}.`),!1;vh.set(t,e);for(const n of Ll.values())dg(n,e);for(const n of _R.values())dg(n,e);return!0}function Pc(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ze(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oi=new _a("app","Firebase",yR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new fi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw oi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=gR;function Cv(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const s={name:yh,automaticDataCollectionEnabled:!0,...t},i=s.name;if(typeof i!="string"||!i)throw oi.create("bad-app-name",{appName:String(i)});if(n||(n=Tv()),!n)throw oi.create("no-options");const r=Ll.get(i);if(r){if(Hi(n,r.options)&&Hi(s,r.config))return r;throw oi.create("duplicate-app",{appName:i})}const o=new AS(i);for(const l of vh.values())o.addComponent(l);const a=new vR(n,s,o);return Ll.set(i,a),a}function _d(e=yh){const t=Ll.get(e);if(!t&&e===yh&&Tv())return Cv();if(!t)throw oi.create("no-app",{appName:e});return t}function qn(e,t,n){let s=mR[e]??e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),r=t.match(/\s|\//);if(i||r){const o=[`Unable to register library "${s}" with version "${t}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&r&&o.push("and"),r&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Rs.warn(o.join(" "));return}$i(new fi(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR="firebase-heartbeat-database",wR=1,Zo="firebase-heartbeat-store";let Ou=null;function Pv(){return Ou||(Ou=FS(bR,wR,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Zo)}catch(n){console.warn(n)}}}}).catch(e=>{throw oi.create("idb-open",{originalErrorMessage:e.message})})),Ou}async function ER(e){try{const n=(await Pv()).transaction(Zo),s=await n.objectStore(Zo).get(xv(e));return await n.done,s}catch(t){if(t instanceof rs)Rs.warn(t.message);else{const n=oi.create("idb-get",{originalErrorMessage:t?.message});Rs.warn(n.message)}}}async function fg(e,t){try{const s=(await Pv()).transaction(Zo,"readwrite");await s.objectStore(Zo).put(t,xv(e)),await s.done}catch(n){if(n instanceof rs)Rs.warn(n.message);else{const s=oi.create("idb-set",{originalErrorMessage:n?.message});Rs.warn(s.message)}}}function xv(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=1024,IR=30;class AR{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new RR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=pg();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>IR){const i=CR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Rs.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=pg(),{heartbeatsToSend:n,unsentEntries:s}=SR(this._heartbeatsCache.heartbeats),i=Vl(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Rs.warn(t),""}}}function pg(){return new Date().toISOString().substring(0,10)}function SR(e,t=TR){const n=[];let s=e.slice();for(const i of e){const r=n.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),gg(n)>t){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),gg(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class RR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fS()?pS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ER(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return fg(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return fg(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function gg(e){return Vl(JSON.stringify({version:2,heartbeats:e})).length}function CR(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(e){$i(new fi("platform-logger",t=>new jS(t),"PRIVATE")),$i(new fi("heartbeat",t=>new AR(t),"PRIVATE")),qn(_h,hg,e),qn(_h,hg,"esm2020"),qn("fire-js","")}PR("");var mg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ai,kv;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,_){function I(){}I.prototype=_.prototype,T.F=_.prototype,T.prototype=new I,T.prototype.constructor=T,T.D=function(C,A,S){for(var E=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)E[bt-2]=arguments[bt];return _.prototype[A].apply(C,E)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,I){I||(I=0);const C=Array(16);if(typeof _=="string")for(var A=0;A<16;++A)C[A]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(A=0;A<16;++A)C[A]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=T.g[0],I=T.g[1],A=T.g[2];let S=T.g[3],E;E=_+(S^I&(A^S))+C[0]+3614090360&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(A^_&(I^A))+C[1]+3905402710&4294967295,S=_+(E<<12&4294967295|E>>>20),E=A+(I^S&(_^I))+C[2]+606105819&4294967295,A=S+(E<<17&4294967295|E>>>15),E=I+(_^A&(S^_))+C[3]+3250441966&4294967295,I=A+(E<<22&4294967295|E>>>10),E=_+(S^I&(A^S))+C[4]+4118548399&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(A^_&(I^A))+C[5]+1200080426&4294967295,S=_+(E<<12&4294967295|E>>>20),E=A+(I^S&(_^I))+C[6]+2821735955&4294967295,A=S+(E<<17&4294967295|E>>>15),E=I+(_^A&(S^_))+C[7]+4249261313&4294967295,I=A+(E<<22&4294967295|E>>>10),E=_+(S^I&(A^S))+C[8]+1770035416&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(A^_&(I^A))+C[9]+2336552879&4294967295,S=_+(E<<12&4294967295|E>>>20),E=A+(I^S&(_^I))+C[10]+4294925233&4294967295,A=S+(E<<17&4294967295|E>>>15),E=I+(_^A&(S^_))+C[11]+2304563134&4294967295,I=A+(E<<22&4294967295|E>>>10),E=_+(S^I&(A^S))+C[12]+1804603682&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(A^_&(I^A))+C[13]+4254626195&4294967295,S=_+(E<<12&4294967295|E>>>20),E=A+(I^S&(_^I))+C[14]+2792965006&4294967295,A=S+(E<<17&4294967295|E>>>15),E=I+(_^A&(S^_))+C[15]+1236535329&4294967295,I=A+(E<<22&4294967295|E>>>10),E=_+(A^S&(I^A))+C[1]+4129170786&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^A&(_^I))+C[6]+3225465664&4294967295,S=_+(E<<9&4294967295|E>>>23),E=A+(_^I&(S^_))+C[11]+643717713&4294967295,A=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(A^S))+C[0]+3921069994&4294967295,I=A+(E<<20&4294967295|E>>>12),E=_+(A^S&(I^A))+C[5]+3593408605&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^A&(_^I))+C[10]+38016083&4294967295,S=_+(E<<9&4294967295|E>>>23),E=A+(_^I&(S^_))+C[15]+3634488961&4294967295,A=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(A^S))+C[4]+3889429448&4294967295,I=A+(E<<20&4294967295|E>>>12),E=_+(A^S&(I^A))+C[9]+568446438&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^A&(_^I))+C[14]+3275163606&4294967295,S=_+(E<<9&4294967295|E>>>23),E=A+(_^I&(S^_))+C[3]+4107603335&4294967295,A=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(A^S))+C[8]+1163531501&4294967295,I=A+(E<<20&4294967295|E>>>12),E=_+(A^S&(I^A))+C[13]+2850285829&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^A&(_^I))+C[2]+4243563512&4294967295,S=_+(E<<9&4294967295|E>>>23),E=A+(_^I&(S^_))+C[7]+1735328473&4294967295,A=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(A^S))+C[12]+2368359562&4294967295,I=A+(E<<20&4294967295|E>>>12),E=_+(I^A^S)+C[5]+4294588738&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^A)+C[8]+2272392833&4294967295,S=_+(E<<11&4294967295|E>>>21),E=A+(S^_^I)+C[11]+1839030562&4294967295,A=S+(E<<16&4294967295|E>>>16),E=I+(A^S^_)+C[14]+4259657740&4294967295,I=A+(E<<23&4294967295|E>>>9),E=_+(I^A^S)+C[1]+2763975236&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^A)+C[4]+1272893353&4294967295,S=_+(E<<11&4294967295|E>>>21),E=A+(S^_^I)+C[7]+4139469664&4294967295,A=S+(E<<16&4294967295|E>>>16),E=I+(A^S^_)+C[10]+3200236656&4294967295,I=A+(E<<23&4294967295|E>>>9),E=_+(I^A^S)+C[13]+681279174&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^A)+C[0]+3936430074&4294967295,S=_+(E<<11&4294967295|E>>>21),E=A+(S^_^I)+C[3]+3572445317&4294967295,A=S+(E<<16&4294967295|E>>>16),E=I+(A^S^_)+C[6]+76029189&4294967295,I=A+(E<<23&4294967295|E>>>9),E=_+(I^A^S)+C[9]+3654602809&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^A)+C[12]+3873151461&4294967295,S=_+(E<<11&4294967295|E>>>21),E=A+(S^_^I)+C[15]+530742520&4294967295,A=S+(E<<16&4294967295|E>>>16),E=I+(A^S^_)+C[2]+3299628645&4294967295,I=A+(E<<23&4294967295|E>>>9),E=_+(A^(I|~S))+C[0]+4096336452&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~A))+C[7]+1126891415&4294967295,S=_+(E<<10&4294967295|E>>>22),E=A+(_^(S|~I))+C[14]+2878612391&4294967295,A=S+(E<<15&4294967295|E>>>17),E=I+(S^(A|~_))+C[5]+4237533241&4294967295,I=A+(E<<21&4294967295|E>>>11),E=_+(A^(I|~S))+C[12]+1700485571&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~A))+C[3]+2399980690&4294967295,S=_+(E<<10&4294967295|E>>>22),E=A+(_^(S|~I))+C[10]+4293915773&4294967295,A=S+(E<<15&4294967295|E>>>17),E=I+(S^(A|~_))+C[1]+2240044497&4294967295,I=A+(E<<21&4294967295|E>>>11),E=_+(A^(I|~S))+C[8]+1873313359&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~A))+C[15]+4264355552&4294967295,S=_+(E<<10&4294967295|E>>>22),E=A+(_^(S|~I))+C[6]+2734768916&4294967295,A=S+(E<<15&4294967295|E>>>17),E=I+(S^(A|~_))+C[13]+1309151649&4294967295,I=A+(E<<21&4294967295|E>>>11),E=_+(A^(I|~S))+C[4]+4149444226&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~A))+C[11]+3174756917&4294967295,S=_+(E<<10&4294967295|E>>>22),E=A+(_^(S|~I))+C[2]+718787259&4294967295,A=S+(E<<15&4294967295|E>>>17),E=I+(S^(A|~_))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(A+(E<<21&4294967295|E>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+S&4294967295}s.prototype.v=function(T,_){_===void 0&&(_=T.length);const I=_-this.blockSize,C=this.C;let A=this.h,S=0;for(;S<_;){if(A==0)for(;S<=I;)i(this,T,S),S+=this.blockSize;if(typeof T=="string"){for(;S<_;)if(C[A++]=T.charCodeAt(S++),A==this.blockSize){i(this,C),A=0;break}}else for(;S<_;)if(C[A++]=T[S++],A==this.blockSize){i(this,C),A=0;break}}this.h=A,this.o+=_},s.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;_=this.o*8;for(var I=T.length-8;I<T.length;++I)T[I]=_&255,_/=256;for(this.v(T),T=Array(16),_=0,I=0;I<4;++I)for(let C=0;C<32;C+=8)T[_++]=this.g[I]>>>C&255;return T};function r(T,_){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=_(T)}function o(T,_){this.h=_;const I=[];let C=!0;for(let A=T.length-1;A>=0;A--){const S=T[A]|0;C&&S==_||(I[A]=S,C=!1)}this.g=I}var a={};function l(T){return-128<=T&&T<128?r(T,function(_){return new o([_|0],_<0?-1:0)}):new o([T|0],T<0?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return d;if(T<0)return v(u(-T));const _=[];let I=1;for(let C=0;T>=I;C++)_[C]=T/I|0,I*=4294967296;return new o(_,0)}function h(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return v(h(T.substring(1),_));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=u(Math.pow(_,8));let C=d;for(let S=0;S<T.length;S+=8){var A=Math.min(8,T.length-S);const E=parseInt(T.substring(S,S+A),_);A<8?(A=u(Math.pow(_,A)),C=C.j(A).add(u(E))):(C=C.j(I),C=C.add(u(E)))}return C}var d=l(0),p=l(1),g=l(16777216);e=o.prototype,e.m=function(){if(w(this))return-v(this).m();let T=0,_=1;for(let I=0;I<this.g.length;I++){const C=this.i(I);T+=(C>=0?C:4294967296+C)*_,_*=4294967296}return T},e.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(b(this))return"0";if(w(this))return"-"+v(this).toString(T);const _=u(Math.pow(T,6));var I=this;let C="";for(;;){const A=x(I,_).g;I=P(I,A.j(_));let S=((I.g.length>0?I.g[0]:I.h)>>>0).toString(T);if(I=A,b(I))return S+C;for(;S.length<6;)S="0"+S;C=S+C}},e.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function b(T){if(T.h!=0)return!1;for(let _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function w(T){return T.h==-1}e.l=function(T){return T=P(this,T),w(T)?-1:b(T)?0:1};function v(T){const _=T.g.length,I=[];for(let C=0;C<_;C++)I[C]=~T.g[C];return new o(I,~T.h).add(p)}e.abs=function(){return w(this)?v(this):this},e.add=function(T){const _=Math.max(this.g.length,T.g.length),I=[];let C=0;for(let A=0;A<=_;A++){let S=C+(this.i(A)&65535)+(T.i(A)&65535),E=(S>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);C=E>>>16,S&=65535,E&=65535,I[A]=E<<16|S}return new o(I,I[I.length-1]&-2147483648?-1:0)};function P(T,_){return T.add(v(_))}e.j=function(T){if(b(this)||b(T))return d;if(w(this))return w(T)?v(this).j(v(T)):v(v(this).j(T));if(w(T))return v(this.j(v(T)));if(this.l(g)<0&&T.l(g)<0)return u(this.m()*T.m());const _=this.g.length+T.g.length,I=[];for(var C=0;C<2*_;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(let A=0;A<T.g.length;A++){const S=this.i(C)>>>16,E=this.i(C)&65535,bt=T.i(A)>>>16,mt=T.i(A)&65535;I[2*C+2*A]+=E*mt,O(I,2*C+2*A),I[2*C+2*A+1]+=S*mt,O(I,2*C+2*A+1),I[2*C+2*A+1]+=E*bt,O(I,2*C+2*A+1),I[2*C+2*A+2]+=S*bt,O(I,2*C+2*A+2)}for(T=0;T<_;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=_;T<2*_;T++)I[T]=0;return new o(I,0)};function O(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function k(T,_){this.g=T,this.h=_}function x(T,_){if(b(_))throw Error("division by zero");if(b(T))return new k(d,d);if(w(T))return _=x(v(T),_),new k(v(_.g),v(_.h));if(w(_))return _=x(T,v(_)),new k(v(_.g),_.h);if(T.g.length>30){if(w(T)||w(_))throw Error("slowDivide_ only works with positive integers.");for(var I=p,C=_;C.l(T)<=0;)I=L(I),C=L(C);var A=U(I,1),S=U(C,1);for(C=U(C,2),I=U(I,2);!b(C);){var E=S.add(C);E.l(T)<=0&&(A=A.add(I),S=E),C=U(C,1),I=U(I,1)}return _=P(T,A.j(_)),new k(A,_)}for(A=d;T.l(_)>=0;){for(I=Math.max(1,Math.floor(T.m()/_.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),S=u(I),E=S.j(_);w(E)||E.l(T)>0;)I-=C,S=u(I),E=S.j(_);b(S)&&(S=p),A=A.add(S),T=P(T,E)}return new k(A,T)}e.B=function(T){return x(this,T).h},e.and=function(T){const _=Math.max(this.g.length,T.g.length),I=[];for(let C=0;C<_;C++)I[C]=this.i(C)&T.i(C);return new o(I,this.h&T.h)},e.or=function(T){const _=Math.max(this.g.length,T.g.length),I=[];for(let C=0;C<_;C++)I[C]=this.i(C)|T.i(C);return new o(I,this.h|T.h)},e.xor=function(T){const _=Math.max(this.g.length,T.g.length),I=[];for(let C=0;C<_;C++)I[C]=this.i(C)^T.i(C);return new o(I,this.h^T.h)};function L(T){const _=T.g.length+1,I=[];for(let C=0;C<_;C++)I[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(I,T.h)}function U(T,_){const I=_>>5;_%=32;const C=T.g.length-I,A=[];for(let S=0;S<C;S++)A[S]=_>0?T.i(S+I)>>>_|T.i(S+I+1)<<32-_:T.i(S+I);return new o(A,T.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,kv=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,ai=o}).apply(typeof mg<"u"?mg:typeof self<"u"?self:typeof window<"u"?window:{});var $a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dv,bo,Ov,fl,bh,Mv,Nv,Vv;(function(){var e,t=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof $a=="object"&&$a];for(var f=0;f<c.length;++f){var m=c[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var s=n(this);function i(c,f){if(f)t:{var m=s;c=c.split(".");for(var y=0;y<c.length-1;y++){var V=c[y];if(!(V in m))break t;m=m[V]}c=c[c.length-1],y=m[c],f=f(y),f!=y&&f!=null&&t(m,c,{configurable:!0,writable:!0,value:f})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(f){var m=[],y;for(y in f)Object.prototype.hasOwnProperty.call(f,y)&&m.push([y,f[y]]);return m}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var r=r||{},o=this||self;function a(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function l(c,f,m){return c.call.apply(c.bind,arguments)}function u(c,f,m){return u=l,u.apply(null,arguments)}function h(c,f){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),c.apply(this,y)}}function d(c,f){function m(){}m.prototype=f.prototype,c.Z=f.prototype,c.prototype=new m,c.prototype.constructor=c,c.Ob=function(y,V,F){for(var Q=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)Q[wt-2]=arguments[wt];return f.prototype[V].apply(y,Q)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function g(c){const f=c.length;if(f>0){const m=Array(f);for(let y=0;y<f;y++)m[y]=c[y];return m}return[]}function b(c,f){for(let y=1;y<arguments.length;y++){const V=arguments[y];var m=typeof V;if(m=m!="object"?m:V?Array.isArray(V)?"array":m:"null",m=="array"||m=="object"&&typeof V.length=="number"){m=c.length||0;const F=V.length||0;c.length=m+F;for(let Q=0;Q<F;Q++)c[m+Q]=V[Q]}else c.push(V)}}class w{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function v(c){o.setTimeout(()=>{throw c},0)}function P(){var c=T;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class O{constructor(){this.h=this.g=null}add(f,m){const y=k.get();y.set(f,m),this.h?this.h.next=y:this.g=y,this.h=y}}var k=new w(()=>new x,c=>c.reset());class x{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let L,U=!1,T=new O,_=()=>{const c=Promise.resolve(void 0);L=()=>{c.then(I)}};function I(){for(var c;c=P();){try{c.h.call(c.g)}catch(m){v(m)}var f=k;f.j(c),f.h<100&&(f.h++,c.next=f.g,f.g=c)}U=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var S=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const m=()=>{};o.addEventListener("test",m,f),o.removeEventListener("test",m,f)}catch{}return c})();function E(c){return/^[\s\xa0]*$/.test(c)}function bt(c,f){A.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,f)}d(bt,A),bt.prototype.init=function(c,f){const m=this.type=c.type,y=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget,f||(m=="mouseover"?f=c.fromElement:m=="mouseout"&&(f=c.toElement)),this.relatedTarget=f,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&bt.Z.h.call(this)},bt.prototype.h=function(){bt.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var mt="closure_listenable_"+(Math.random()*1e6|0),ut=0;function it(c,f,m,y,V){this.listener=c,this.proxy=null,this.src=f,this.type=m,this.capture=!!y,this.ha=V,this.key=++ut,this.da=this.fa=!1}function gt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ot(c,f,m){for(const y in c)f.call(m,c[y],y,c)}function we(c,f){for(const m in c)f.call(void 0,c[m],m,c)}function _e(c){const f={};for(const m in c)f[m]=c[m];return f}const Qt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $e(c,f){let m,y;for(let V=1;V<arguments.length;V++){y=arguments[V];for(m in y)c[m]=y[m];for(let F=0;F<Qt.length;F++)m=Qt[F],Object.prototype.hasOwnProperty.call(y,m)&&(c[m]=y[m])}}function ce(c){this.src=c,this.g={},this.h=0}ce.prototype.add=function(c,f,m,y,V){const F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);const Q=Xt(c,f,y,V);return Q>-1?(f=c[Q],m||(f.fa=!1)):(f=new it(f,this.src,F,!!y,V),f.fa=m,c.push(f)),f};function Ee(c,f){const m=f.type;if(m in c.g){var y=c.g[m],V=Array.prototype.indexOf.call(y,f,void 0),F;(F=V>=0)&&Array.prototype.splice.call(y,V,1),F&&(gt(f),c.g[m].length==0&&(delete c.g[m],c.h--))}}function Xt(c,f,m,y){for(let V=0;V<c.length;++V){const F=c[V];if(!F.da&&F.listener==f&&F.capture==!!m&&F.ha==y)return V}return-1}var j="closure_lm_"+(Math.random()*1e6|0),et={};function J(c,f,m,y,V){if(Array.isArray(f)){for(let F=0;F<f.length;F++)J(c,f[F],m,y,V);return null}return m=X(m),c&&c[mt]?c.J(f,m,a(y)?!!y.capture:!1,V):ot(c,f,m,!1,y,V)}function ot(c,f,m,y,V,F){if(!f)throw Error("Invalid event type");const Q=a(V)?!!V.capture:!!V;let wt=$(c);if(wt||(c[j]=wt=new ce(c)),m=wt.add(f,m,y,Q,F),m.proxy)return m;if(y=It(),m.proxy=y,y.src=c,y.listener=m,c.addEventListener)S||(V=Q),V===void 0&&(V=!1),c.addEventListener(f.toString(),y,V);else if(c.attachEvent)c.attachEvent(N(f.toString()),y);else if(c.addListener&&c.removeListener)c.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return m}function It(){function c(m){return f.call(c.src,c.listener,m)}const f=z;return c}function R(c,f,m,y,V){if(Array.isArray(f))for(var F=0;F<f.length;F++)R(c,f[F],m,y,V);else y=a(y)?!!y.capture:!!y,m=X(m),c&&c[mt]?(c=c.i,F=String(f).toString(),F in c.g&&(f=c.g[F],m=Xt(f,m,y,V),m>-1&&(gt(f[m]),Array.prototype.splice.call(f,m,1),f.length==0&&(delete c.g[F],c.h--)))):c&&(c=$(c))&&(f=c.g[f.toString()],c=-1,f&&(c=Xt(f,m,y,V)),(m=c>-1?f[c]:null)&&D(m))}function D(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[mt])Ee(f.i,c);else{var m=c.type,y=c.proxy;f.removeEventListener?f.removeEventListener(m,y,c.capture):f.detachEvent?f.detachEvent(N(m),y):f.addListener&&f.removeListener&&f.removeListener(y),(m=$(f))?(Ee(m,c),m.h==0&&(m.src=null,f[j]=null)):gt(c)}}}function N(c){return c in et?et[c]:et[c]="on"+c}function z(c,f){if(c.da)c=!0;else{f=new bt(f,this);const m=c.listener,y=c.ha||c.src;c.fa&&D(c),c=m.call(y,f)}return c}function $(c){return c=c[j],c instanceof ce?c:null}var B="__closure_events_fn_"+(Math.random()*1e9>>>0);function X(c){return typeof c=="function"?c:(c[B]||(c[B]=function(f){return c.handleEvent(f)}),c[B])}function G(){C.call(this),this.i=new ce(this),this.M=this,this.G=null}d(G,C),G.prototype[mt]=!0,G.prototype.removeEventListener=function(c,f,m,y){R(this,c,f,m,y)};function q(c,f){var m,y=c.G;if(y)for(m=[];y;y=y.G)m.push(y);if(c=c.M,y=f.type||f,typeof f=="string")f=new A(f,c);else if(f instanceof A)f.target=f.target||c;else{var V=f;f=new A(y,c),$e(f,V)}V=!0;let F,Q;if(m)for(Q=m.length-1;Q>=0;Q--)F=f.g=m[Q],V=K(F,y,!0,f)&&V;if(F=f.g=c,V=K(F,y,!0,f)&&V,V=K(F,y,!1,f)&&V,m)for(Q=0;Q<m.length;Q++)F=f.g=m[Q],V=K(F,y,!1,f)&&V}G.prototype.N=function(){if(G.Z.N.call(this),this.i){var c=this.i;for(const f in c.g){const m=c.g[f];for(let y=0;y<m.length;y++)gt(m[y]);delete c.g[f],c.h--}}this.G=null},G.prototype.J=function(c,f,m,y){return this.i.add(String(c),f,!1,m,y)},G.prototype.K=function(c,f,m,y){return this.i.add(String(c),f,!0,m,y)};function K(c,f,m,y){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();let V=!0;for(let F=0;F<f.length;++F){const Q=f[F];if(Q&&!Q.da&&Q.capture==m){const wt=Q.listener,ue=Q.ha||Q.src;Q.fa&&Ee(c.i,Q),V=wt.call(ue,y)!==!1&&V}}return V&&!y.defaultPrevented}function ct(c,f){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=u(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(c,f||0)}function Z(c){c.g=ct(()=>{c.g=null,c.i&&(c.i=!1,Z(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class at extends C{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Z(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ht(c){C.call(this),this.h=c,this.g={}}d(ht,C);var Tt=[];function Lt(c){Ot(c.g,function(f,m){this.g.hasOwnProperty(m)&&D(f)},c),c.g={}}ht.prototype.N=function(){ht.Z.N.call(this),Lt(this)},ht.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pt=o.JSON.stringify,ke=o.JSON.parse,De=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function rn(){}function on(){}var En={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ir(){A.call(this,"d")}d(ir,A);function Te(){A.call(this,"c")}d(Te,A);var ye={},Kr=null;function wi(){return Kr=Kr||new G}ye.Ia="serverreachability";function wf(c){A.call(this,ye.Ia,c)}d(wf,A);function Gr(c){const f=wi();q(f,new wf(f))}ye.STAT_EVENT="statevent";function Ef(c,f){A.call(this,ye.STAT_EVENT,c),this.stat=f}d(Ef,A);function We(c){const f=wi();q(f,new Ef(f,c))}ye.Ja="timingevent";function Tf(c,f){A.call(this,ye.Ja,c),this.size=f}d(Tf,A);function Yr(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},f)}function Qr(){this.g=!0}Qr.prototype.ua=function(){this.g=!1};function LE(c,f,m,y,V,F){c.info(function(){if(c.g)if(F){var Q="",wt=F.split("&");for(let Bt=0;Bt<wt.length;Bt++){var ue=wt[Bt].split("=");if(ue.length>1){const ve=ue[0];ue=ue[1];const Mn=ve.split("_");Q=Mn.length>=2&&Mn[1]=="type"?Q+(ve+"="+ue+"&"):Q+(ve+"=redacted&")}}}else Q=null;else Q=F;return"XMLHTTP REQ ("+y+") [attempt "+V+"]: "+f+`
`+m+`
`+Q})}function FE(c,f,m,y,V,F,Q){c.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+V+"]: "+f+`
`+m+`
`+F+" "+Q})}function rr(c,f,m,y){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+BE(c,m)+(y?" "+y:"")})}function UE(c,f){c.info(function(){return"TIMEOUT: "+f})}Qr.prototype.info=function(){};function BE(c,f){if(!c.g)return f;if(!f)return null;try{const F=JSON.parse(f);if(F){for(c=0;c<F.length;c++)if(Array.isArray(F[c])){var m=F[c];if(!(m.length<2)){var y=m[1];if(Array.isArray(y)&&!(y.length<1)){var V=y[0];if(V!="noop"&&V!="stop"&&V!="close")for(let Q=1;Q<y.length;Q++)y[Q]=""}}}}return Pt(F)}catch{return f}}var xa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},If={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Af;function tu(){}d(tu,rn),tu.prototype.g=function(){return new XMLHttpRequest},Af=new tu;function Xr(c){return encodeURIComponent(String(c))}function jE(c){var f=1;c=c.split(":");const m=[];for(;f>0&&c.length;)m.push(c.shift()),f--;return c.length&&m.push(c.join(":")),m}function Vs(c,f,m,y){this.j=c,this.i=f,this.l=m,this.S=y||1,this.V=new ht(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Sf}function Sf(){this.i=null,this.g="",this.h=!1}var Rf={},eu={};function nu(c,f,m){c.M=1,c.A=Da(On(f)),c.u=m,c.R=!0,Cf(c,null)}function Cf(c,f){c.F=Date.now(),ka(c),c.B=On(c.A);var m=c.B,y=c.S;Array.isArray(y)||(y=[String(y)]),jf(m.i,"t",y),c.C=0,m=c.j.L,c.h=new Sf,c.g=rp(c.j,m?f:null,!c.u),c.P>0&&(c.O=new at(u(c.Y,c,c.g),c.P)),f=c.V,m=c.g,y=c.ba;var V="readystatechange";Array.isArray(V)||(V&&(Tt[0]=V.toString()),V=Tt);for(let F=0;F<V.length;F++){const Q=J(m,V[F],y||f.handleEvent,!1,f.h||f);if(!Q)break;f.g[Q.key]=Q}f=c.J?_e(c.J):{},c.u?(c.v||(c.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,f)):(c.v="GET",c.g.ea(c.B,c.v,null,f)),Gr(),LE(c.i,c.v,c.B,c.l,c.S,c.u)}Vs.prototype.ba=function(c){c=c.target;const f=this.O;f&&Us(c)==3?f.j():this.Y(c)},Vs.prototype.Y=function(c){try{if(c==this.g)t:{const wt=Us(this.g),ue=this.g.ya(),Bt=this.g.ca();if(!(wt<3)&&(wt!=3||this.g&&(this.h.h||this.g.la()||Gf(this.g)))){this.K||wt!=4||ue==7||(ue==8||Bt<=0?Gr(3):Gr(2)),su(this);var f=this.g.ca();this.X=f;var m=zE(this);if(this.o=f==200,FE(this.i,this.v,this.B,this.l,this.S,wt,f),this.o){if(this.U&&!this.L){e:{if(this.g){var y,V=this.g;if((y=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(y)){var F=y;break e}}F=null}if(c=F)rr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,iu(this,c);else{this.o=!1,this.m=3,We(12),Ei(this),Jr(this);break t}}if(this.R){c=!0;let ve;for(;!this.K&&this.C<m.length;)if(ve=HE(this,m),ve==eu){wt==4&&(this.m=4,We(14),c=!1),rr(this.i,this.l,null,"[Incomplete Response]");break}else if(ve==Rf){this.m=4,We(15),rr(this.i,this.l,m,"[Invalid Chunk]"),c=!1;break}else rr(this.i,this.l,ve,null),iu(this,ve);if(Pf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||m.length!=0||this.h.h||(this.m=1,We(16),c=!1),this.o=this.o&&c,!c)rr(this.i,this.l,m,"[Invalid Chunked Response]"),Ei(this),Jr(this);else if(m.length>0&&!this.W){this.W=!0;var Q=this.j;Q.g==this&&Q.aa&&!Q.P&&(Q.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),du(Q),Q.P=!0,We(11))}}else rr(this.i,this.l,m,null),iu(this,m);wt==4&&Ei(this),this.o&&!this.K&&(wt==4?ep(this.j,this):(this.o=!1,ka(this)))}else sT(this.g),f==400&&m.indexOf("Unknown SID")>0?(this.m=3,We(12)):(this.m=0,We(13)),Ei(this),Jr(this)}}}catch{}finally{}};function zE(c){if(!Pf(c))return c.g.la();const f=Gf(c.g);if(f==="")return"";let m="";const y=f.length,V=Us(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Ei(c),Jr(c),"";c.h.i=new o.TextDecoder}for(let F=0;F<y;F++)c.h.h=!0,m+=c.h.i.decode(f[F],{stream:!(V&&F==y-1)});return f.length=0,c.h.g+=m,c.C=0,c.h.g}function Pf(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function HE(c,f){var m=c.C,y=f.indexOf(`
`,m);return y==-1?eu:(m=Number(f.substring(m,y)),isNaN(m)?Rf:(y+=1,y+m>f.length?eu:(f=f.slice(y,y+m),c.C=y+m,f)))}Vs.prototype.cancel=function(){this.K=!0,Ei(this)};function ka(c){c.T=Date.now()+c.H,xf(c,c.H)}function xf(c,f){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Yr(u(c.aa,c),f)}function su(c){c.D&&(o.clearTimeout(c.D),c.D=null)}Vs.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(UE(this.i,this.B),this.M!=2&&(Gr(),We(17)),Ei(this),this.m=2,Jr(this)):xf(this,this.T-c)};function Jr(c){c.j.I==0||c.K||ep(c.j,c)}function Ei(c){su(c);var f=c.O;f&&typeof f.dispose=="function"&&f.dispose(),c.O=null,Lt(c.V),c.g&&(f=c.g,c.g=null,f.abort(),f.dispose())}function iu(c,f){try{var m=c.j;if(m.I!=0&&(m.g==c||ru(m.h,c))){if(!c.L&&ru(m.h,c)&&m.I==3){try{var y=m.Ba.g.parse(f)}catch{y=null}if(Array.isArray(y)&&y.length==3){var V=y;if(V[0]==0){t:if(!m.v){if(m.g)if(m.g.F+3e3<c.F)La(m),Na(m);else break t;hu(m),We(18)}}else m.xa=V[1],0<m.xa-m.K&&V[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=Yr(u(m.Va,m),6e3));Of(m.h)<=1&&m.ta&&(m.ta=void 0)}else Ii(m,11)}else if((c.L||m.g==c)&&La(m),!E(f))for(V=m.Ba.g.parse(f),f=0;f<V.length;f++){let Bt=V[f];const ve=Bt[0];if(!(ve<=m.K))if(m.K=ve,Bt=Bt[1],m.I==2)if(Bt[0]=="c"){m.M=Bt[1],m.ba=Bt[2];const Mn=Bt[3];Mn!=null&&(m.ka=Mn,m.j.info("VER="+m.ka));const Ai=Bt[4];Ai!=null&&(m.za=Ai,m.j.info("SVER="+m.za));const Bs=Bt[5];Bs!=null&&typeof Bs=="number"&&Bs>0&&(y=1.5*Bs,m.O=y,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;const js=c.g;if(js){const Ua=js.g?js.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ua){var F=y.h;F.g||Ua.indexOf("spdy")==-1&&Ua.indexOf("quic")==-1&&Ua.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(ou(F,F.h),F.h=null))}if(y.G){const fu=js.g?js.g.getResponseHeader("X-HTTP-Session-Id"):null;fu&&(y.wa=fu,$t(y.J,y.G,fu))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-c.F,m.j.info("Handshake RTT: "+m.T+"ms")),y=m;var Q=c;if(y.na=ip(y,y.L?y.ba:null,y.W),Q.L){Mf(y.h,Q);var wt=Q,ue=y.O;ue&&(wt.H=ue),wt.D&&(su(wt),ka(wt)),y.g=Q}else Zf(y);m.i.length>0&&Va(m)}else Bt[0]!="stop"&&Bt[0]!="close"||Ii(m,7);else m.I==3&&(Bt[0]=="stop"||Bt[0]=="close"?Bt[0]=="stop"?Ii(m,7):uu(m):Bt[0]!="noop"&&m.l&&m.l.qa(Bt),m.A=0)}}Gr(4)}catch{}}var $E=class{constructor(c,f){this.g=c,this.map=f}};function kf(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Df(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Of(c){return c.h?1:c.g?c.g.size:0}function ru(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function ou(c,f){c.g?c.g.add(f):c.h=f}function Mf(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}kf.prototype.cancel=function(){if(this.i=Nf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Nf(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const m of c.g.values())f=f.concat(m.G);return f}return g(c.i)}var Vf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function WE(c,f){if(c){c=c.split("&");for(let m=0;m<c.length;m++){const y=c[m].indexOf("=");let V,F=null;y>=0?(V=c[m].substring(0,y),F=c[m].substring(y+1)):V=c[m],f(V,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Ls(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;c instanceof Ls?(this.l=c.l,Zr(this,c.j),this.o=c.o,this.g=c.g,to(this,c.u),this.h=c.h,au(this,zf(c.i)),this.m=c.m):c&&(f=String(c).match(Vf))?(this.l=!1,Zr(this,f[1]||"",!0),this.o=eo(f[2]||""),this.g=eo(f[3]||"",!0),to(this,f[4]),this.h=eo(f[5]||"",!0),au(this,f[6]||"",!0),this.m=eo(f[7]||"")):(this.l=!1,this.i=new so(null,this.l))}Ls.prototype.toString=function(){const c=[];var f=this.j;f&&c.push(no(f,Lf,!0),":");var m=this.g;return(m||f=="file")&&(c.push("//"),(f=this.o)&&c.push(no(f,Lf,!0),"@"),c.push(Xr(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&c.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(no(m,m.charAt(0)=="/"?GE:KE,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",no(m,QE)),c.join("")},Ls.prototype.resolve=function(c){const f=On(this);let m=!!c.j;m?Zr(f,c.j):m=!!c.o,m?f.o=c.o:m=!!c.g,m?f.g=c.g:m=c.u!=null;var y=c.h;if(m)to(f,c.u);else if(m=!!c.h){if(y.charAt(0)!="/")if(this.g&&!this.h)y="/"+y;else{var V=f.h.lastIndexOf("/");V!=-1&&(y=f.h.slice(0,V+1)+y)}if(V=y,V==".."||V==".")y="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){y=V.lastIndexOf("/",0)==0,V=V.split("/");const F=[];for(let Q=0;Q<V.length;){const wt=V[Q++];wt=="."?y&&Q==V.length&&F.push(""):wt==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),y&&Q==V.length&&F.push("")):(F.push(wt),y=!0)}y=F.join("/")}else y=V}return m?f.h=y:m=c.i.toString()!=="",m?au(f,zf(c.i)):m=!!c.m,m&&(f.m=c.m),f};function On(c){return new Ls(c)}function Zr(c,f,m){c.j=m?eo(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function to(c,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);c.u=f}else c.u=null}function au(c,f,m){f instanceof so?(c.i=f,XE(c.i,c.l)):(m||(f=no(f,YE)),c.i=new so(f,c.l))}function $t(c,f,m){c.i.set(f,m)}function Da(c){return $t(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function eo(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function no(c,f,m){return typeof c=="string"?(c=encodeURI(c).replace(f,qE),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function qE(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Lf=/[#\/\?@]/g,KE=/[#\?:]/g,GE=/[#\?]/g,YE=/[#\?@]/g,QE=/#/g;function so(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function Ti(c){c.g||(c.g=new Map,c.h=0,c.i&&WE(c.i,function(f,m){c.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}e=so.prototype,e.add=function(c,f){Ti(this),this.i=null,c=or(this,c);let m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(f),this.h+=1,this};function Ff(c,f){Ti(c),f=or(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function Uf(c,f){return Ti(c),f=or(c,f),c.g.has(f)}e.forEach=function(c,f){Ti(this),this.g.forEach(function(m,y){m.forEach(function(V){c.call(f,V,y,this)},this)},this)};function Bf(c,f){Ti(c);let m=[];if(typeof f=="string")Uf(c,f)&&(m=m.concat(c.g.get(or(c,f))));else for(c=Array.from(c.g.values()),f=0;f<c.length;f++)m=m.concat(c[f]);return m}e.set=function(c,f){return Ti(this),this.i=null,c=or(this,c),Uf(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},e.get=function(c,f){return c?(c=Bf(this,c),c.length>0?String(c[0]):f):f};function jf(c,f,m){Ff(c,f),m.length>0&&(c.i=null,c.g.set(or(c,f),g(m)),c.h+=m.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(let y=0;y<f.length;y++){var m=f[y];const V=Xr(m);m=Bf(this,m);for(let F=0;F<m.length;F++){let Q=V;m[F]!==""&&(Q+="="+Xr(m[F])),c.push(Q)}}return this.i=c.join("&")};function zf(c){const f=new so;return f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),f}function or(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function XE(c,f){f&&!c.j&&(Ti(c),c.i=null,c.g.forEach(function(m,y){const V=y.toLowerCase();y!=V&&(Ff(this,y),jf(this,V,m))},c)),c.j=f}function JE(c,f){const m=new Qr;if(o.Image){const y=new Image;y.onload=h(Fs,m,"TestLoadImage: loaded",!0,f,y),y.onerror=h(Fs,m,"TestLoadImage: error",!1,f,y),y.onabort=h(Fs,m,"TestLoadImage: abort",!1,f,y),y.ontimeout=h(Fs,m,"TestLoadImage: timeout",!1,f,y),o.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=c}else f(!1)}function ZE(c,f){const m=new Qr,y=new AbortController,V=setTimeout(()=>{y.abort(),Fs(m,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:y.signal}).then(F=>{clearTimeout(V),F.ok?Fs(m,"TestPingServer: ok",!0,f):Fs(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(V),Fs(m,"TestPingServer: error",!1,f)})}function Fs(c,f,m,y,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),y(m)}catch{}}function tT(){this.g=new De}function lu(c){this.i=c.Sb||null,this.h=c.ab||!1}d(lu,rn),lu.prototype.g=function(){return new Oa(this.i,this.h)};function Oa(c,f){G.call(this),this.H=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Oa,G),e=Oa.prototype,e.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=f,this.readyState=1,ro(this)},e.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(f.body=c),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,io(this)),this.readyState=0},e.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ro(this)),this.g&&(this.readyState=3,ro(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Hf(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Hf(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}e.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?io(this):ro(this),this.readyState==3&&Hf(this)}},e.Oa=function(c){this.g&&(this.response=this.responseText=c,io(this))},e.Na=function(c){this.g&&(this.response=c,io(this))},e.ga=function(){this.g&&io(this)};function io(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ro(c)}e.setRequestHeader=function(c,f){this.A.append(c,f)},e.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=f.next();return c.join(`\r
`)};function ro(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Oa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function $f(c){let f="";return Ot(c,function(m,y){f+=y,f+=":",f+=m,f+=`\r
`}),f}function cu(c,f,m){t:{for(y in m){var y=!1;break t}y=!0}y||(m=$f(m),typeof c=="string"?m!=null&&Xr(m):$t(c,f,m))}function Zt(c){G.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Zt,G);var eT=/^https?$/i,nT=["POST","PUT"];e=Zt.prototype,e.Fa=function(c){this.H=c},e.ea=function(c,f,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Af.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(F){Wf(this,F);return}if(c=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var V in y)m.set(V,y[V]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const F of y.keys())m.set(F,y.get(F));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(m.keys()).find(F=>F.toLowerCase()=="content-type"),V=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(nT,f,void 0)>=0)||y||V||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,Q]of m)this.g.setRequestHeader(F,Q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(F){Wf(this,F)}};function Wf(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.o=5,qf(c),Ma(c)}function qf(c){c.A||(c.A=!0,q(c,"complete"),q(c,"error"))}e.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,q(this,"complete"),q(this,"abort"),Ma(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ma(this,!0)),Zt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Kf(this):this.Xa())},e.Xa=function(){Kf(this)};function Kf(c){if(c.h&&typeof r<"u"){if(c.v&&Us(c)==4)setTimeout(c.Ca.bind(c),0);else if(q(c,"readystatechange"),Us(c)==4){c.h=!1;try{const F=c.ca();t:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break t;default:f=!1}var m;if(!(m=f)){var y;if(y=F===0){let Q=String(c.D).match(Vf)[1]||null;!Q&&o.self&&o.self.location&&(Q=o.self.location.protocol.slice(0,-1)),y=!eT.test(Q?Q.toLowerCase():"")}m=y}if(m)q(c,"complete"),q(c,"success");else{c.o=6;try{var V=Us(c)>2?c.g.statusText:""}catch{V=""}c.l=V+" ["+c.ca()+"]",qf(c)}}finally{Ma(c)}}}}function Ma(c,f){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const m=c.g;c.g=null,f||q(c,"ready");try{m.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function Us(c){return c.g?c.g.readyState:0}e.ca=function(){try{return Us(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.La=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),ke(f)}};function Gf(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function sT(c){const f={};c=(c.g&&Us(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<c.length;y++){if(E(c[y]))continue;var m=jE(c[y]);const V=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const F=f[V]||[];f[V]=F,F.push(m)}we(f,function(y){return y.join(", ")})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function oo(c,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||f}function Yf(c){this.za=0,this.i=[],this.j=new Qr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=oo("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=oo("baseRetryDelayMs",5e3,c),this.Za=oo("retryDelaySeedMs",1e4,c),this.Ta=oo("forwardChannelMaxRetries",2,c),this.va=oo("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new kf(c&&c.concurrentRequestLimit),this.Ba=new tT,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=Yf.prototype,e.ka=8,e.I=1,e.connect=function(c,f,m,y){We(0),this.W=c,this.H=f||{},m&&y!==void 0&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.J=ip(this,null,this.W),Va(this)};function uu(c){if(Qf(c),c.I==3){var f=c.V++,m=On(c.J);if($t(m,"SID",c.M),$t(m,"RID",f),$t(m,"TYPE","terminate"),ao(c,m),f=new Vs(c,c.j,f),f.M=2,f.A=Da(On(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=f.A,m=!0),m||(f.g=rp(f.j,null),f.g.ea(f.A)),f.F=Date.now(),ka(f)}sp(c)}function Na(c){c.g&&(du(c),c.g.cancel(),c.g=null)}function Qf(c){Na(c),c.v&&(o.clearTimeout(c.v),c.v=null),La(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function Va(c){if(!Df(c.h)&&!c.m){c.m=!0;var f=c.Ea;L||_(),U||(L(),U=!0),T.add(f,c),c.D=0}}function iT(c,f){return Of(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=f.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Yr(u(c.Ea,c,f),np(c,c.D)),c.D++,!0)}e.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const V=new Vs(this,this.j,c);let F=this.o;if(this.U&&(F?(F=_e(F),$e(F,this.U)):F=this.U),this.u!==null||this.R||(V.J=F,F=null),this.S)t:{for(var f=0,m=0;m<this.i.length;m++){e:{var y=this.i[m];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break e}y=void 0}if(y===void 0)break;if(f+=y,f>4096){f=m;break t}if(f===4096||m===this.i.length-1){f=m+1;break t}}f=1e3}else f=1e3;f=Jf(this,V,f),m=On(this.J),$t(m,"RID",c),$t(m,"CVER",22),this.G&&$t(m,"X-HTTP-Session-Id",this.G),ao(this,m),F&&(this.R?f="headers="+Xr($f(F))+"&"+f:this.u&&cu(m,this.u,F)),ou(this.h,V),this.Ra&&$t(m,"TYPE","init"),this.S?($t(m,"$req",f),$t(m,"SID","null"),V.U=!0,nu(V,m,null)):nu(V,m,f),this.I=2}}else this.I==3&&(c?Xf(this,c):this.i.length==0||Df(this.h)||Xf(this))};function Xf(c,f){var m;f?m=f.l:m=c.V++;const y=On(c.J);$t(y,"SID",c.M),$t(y,"RID",m),$t(y,"AID",c.K),ao(c,y),c.u&&c.o&&cu(y,c.u,c.o),m=new Vs(c,c.j,m,c.D+1),c.u===null&&(m.J=c.o),f&&(c.i=f.G.concat(c.i)),f=Jf(c,m,1e3),m.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),ou(c.h,m),nu(m,y,f)}function ao(c,f){c.H&&Ot(c.H,function(m,y){$t(f,y,m)}),c.l&&Ot({},function(m,y){$t(f,y,m)})}function Jf(c,f,m){m=Math.min(c.i.length,m);const y=c.l?u(c.l.Ka,c.l,c):null;t:{var V=c.i;let wt=-1;for(;;){const ue=["count="+m];wt==-1?m>0?(wt=V[0].g,ue.push("ofs="+wt)):wt=0:ue.push("ofs="+wt);let Bt=!0;for(let ve=0;ve<m;ve++){var F=V[ve].g;const Mn=V[ve].map;if(F-=wt,F<0)wt=Math.max(0,V[ve].g-100),Bt=!1;else try{F="req"+F+"_"||"";try{var Q=Mn instanceof Map?Mn:Object.entries(Mn);for(const[Ai,Bs]of Q){let js=Bs;a(Bs)&&(js=Pt(Bs)),ue.push(F+Ai+"="+encodeURIComponent(js))}}catch(Ai){throw ue.push(F+"type="+encodeURIComponent("_badmap")),Ai}}catch{y&&y(Mn)}}if(Bt){Q=ue.join("&");break t}}Q=void 0}return c=c.i.splice(0,m),f.G=c,Q}function Zf(c){if(!c.g&&!c.v){c.Y=1;var f=c.Da;L||_(),U||(L(),U=!0),T.add(f,c),c.A=0}}function hu(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Yr(u(c.Da,c),np(c,c.A)),c.A++,!0)}e.Da=function(){if(this.v=null,tp(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Yr(u(this.Wa,this),c)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,We(10),Na(this),tp(this))};function du(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function tp(c){c.g=new Vs(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var f=On(c.na);$t(f,"RID","rpc"),$t(f,"SID",c.M),$t(f,"AID",c.K),$t(f,"CI",c.F?"0":"1"),!c.F&&c.ia&&$t(f,"TO",c.ia),$t(f,"TYPE","xmlhttp"),ao(c,f),c.u&&c.o&&cu(f,c.u,c.o),c.O&&(c.g.H=c.O);var m=c.g;c=c.ba,m.M=1,m.A=Da(On(f)),m.u=null,m.R=!0,Cf(m,c)}e.Va=function(){this.C!=null&&(this.C=null,Na(this),hu(this),We(19))};function La(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function ep(c,f){var m=null;if(c.g==f){La(c),du(c),c.g=null;var y=2}else if(ru(c.h,f))m=f.G,Mf(c.h,f),y=1;else return;if(c.I!=0){if(f.o)if(y==1){m=f.u?f.u.length:0,f=Date.now()-f.F;var V=c.D;y=wi(),q(y,new Tf(y,m)),Va(c)}else Zf(c);else if(V=f.m,V==3||V==0&&f.X>0||!(y==1&&iT(c,f)||y==2&&hu(c)))switch(m&&m.length>0&&(f=c.h,f.i=f.i.concat(m)),V){case 1:Ii(c,5);break;case 4:Ii(c,10);break;case 3:Ii(c,6);break;default:Ii(c,2)}}}function np(c,f){let m=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(m*=2),m*f}function Ii(c,f){if(c.j.info("Error code "+f),f==2){var m=u(c.bb,c),y=c.Ua;const V=!y;y=new Ls(y||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Zr(y,"https"),Da(y),V?JE(y.toString(),m):ZE(y.toString(),m)}else We(2);c.I=0,c.l&&c.l.pa(f),sp(c),Qf(c)}e.bb=function(c){c?(this.j.info("Successfully pinged google.com"),We(2)):(this.j.info("Failed to ping google.com"),We(1))};function sp(c){if(c.I=0,c.ja=[],c.l){const f=Nf(c.h);(f.length!=0||c.i.length!=0)&&(b(c.ja,f),b(c.ja,c.i),c.h.i.length=0,g(c.i),c.i.length=0),c.l.oa()}}function ip(c,f,m){var y=m instanceof Ls?On(m):new Ls(m);if(y.g!="")f&&(y.g=f+"."+y.g),to(y,y.u);else{var V=o.location;y=V.protocol,f=f?f+"."+V.hostname:V.hostname,V=+V.port;const F=new Ls(null);y&&Zr(F,y),f&&(F.g=f),V&&to(F,V),m&&(F.h=m),y=F}return m=c.G,f=c.wa,m&&f&&$t(y,m,f),$t(y,"VER",c.ka),ao(c,y),y}function rp(c,f,m){if(f&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Aa&&!c.ma?new Zt(new lu({ab:m})):new Zt(c.ma),f.Fa(c.L),f}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function op(){}e=op.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function Fa(){}Fa.prototype.g=function(c,f){return new an(c,f)};function an(c,f){G.call(this),this.g=new Yf(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(c?c["X-WebChannel-Client-Profile"]=f.sa:c={"X-WebChannel-Client-Profile":f.sa}),this.g.U=c,(c=f&&f.Qb)&&!E(c)&&(this.g.u=c),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!E(f)&&(this.g.G=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new ar(this)}d(an,G),an.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){uu(this.g)},an.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.v&&(m={},m.__data__=Pt(c),c=m);f.i.push(new $E(f.Ya++,c)),f.I==3&&Va(f)},an.prototype.N=function(){this.g.l=null,delete this.j,uu(this.g),delete this.g,an.Z.N.call(this)};function ap(c){ir.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){t:{for(const m in f){c=m;break t}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}d(ap,ir);function lp(){Te.call(this),this.status=1}d(lp,Te);function ar(c){this.g=c}d(ar,op),ar.prototype.ra=function(){q(this.g,"a")},ar.prototype.qa=function(c){q(this.g,new ap(c))},ar.prototype.pa=function(c){q(this.g,new lp)},ar.prototype.oa=function(){q(this.g,"b")},Fa.prototype.createWebChannel=Fa.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,Vv=function(){return new Fa},Nv=function(){return wi()},Mv=ye,bh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xa.NO_ERROR=0,xa.TIMEOUT=8,xa.HTTP_ERROR=6,fl=xa,If.COMPLETE="complete",Ov=If,on.EventType=En,En.OPEN="a",En.CLOSE="b",En.ERROR="c",En.MESSAGE="d",G.prototype.listen=G.prototype.J,bo=on,Zt.prototype.listenOnce=Zt.prototype.K,Zt.prototype.getLastError=Zt.prototype.Ha,Zt.prototype.getLastErrorCode=Zt.prototype.ya,Zt.prototype.getStatus=Zt.prototype.ca,Zt.prototype.getResponseJson=Zt.prototype.La,Zt.prototype.getResponseText=Zt.prototype.la,Zt.prototype.send=Zt.prototype.ea,Zt.prototype.setWithCredentials=Zt.prototype.Fa,Dv=Zt}).apply(typeof $a<"u"?$a:typeof self<"u"?self:typeof window<"u"?window:{});const _g="@firebase/firestore",yg="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ne.UNAUTHENTICATED=new Ne(null),Ne.GOOGLE_CREDENTIALS=new Ne("google-credentials-uid"),Ne.FIRST_PARTY=new Ne("first-party-uid"),Ne.MOCK_USER=new Ne("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Br="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi=new gd("@firebase/firestore");function pr(){return Wi.logLevel}function st(e,...t){if(Wi.logLevel<=At.DEBUG){const n=t.map(yd);Wi.debug(`Firestore (${Br}): ${e}`,...n)}}function Cs(e,...t){if(Wi.logLevel<=At.ERROR){const n=t.map(yd);Wi.error(`Firestore (${Br}): ${e}`,...n)}}function kr(e,...t){if(Wi.logLevel<=At.WARN){const n=t.map(yd);Wi.warn(`Firestore (${Br}): ${e}`,...n)}}function yd(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,Lv(e,s,n)}function Lv(e,t,n){let s=`FIRESTORE (${Br}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Cs(s),new Error(s)}function Vt(e,t,n,s){let i="Unexpected state";typeof n=="string"?i=n:s=n,e||Lv(t,i,s)}function yt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rt extends rs{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class xR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Ne.UNAUTHENTICATED)))}shutdown(){}}class kR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class DR{constructor(t){this.t=t,this.currentUser=Ne.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Vt(this.o===void 0,42304);let s=this.i;const i=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let r=new ws;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new ws,t.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const l=r;t.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},a=l=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new ws)}}),0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Vt(typeof s.accessToken=="string",31837,{l:s}),new Fv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Vt(t===null||typeof t=="string",2055,{h:t}),new Ne(t)}}class OR{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Ne.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class MR{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new OR(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Ne.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vg{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NR{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ze(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Vt(this.o===void 0,3512);const s=r=>{r.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,st("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable((()=>s(r)))};const i=r=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((r=>i(r))),setTimeout((()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?i(r):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new vg(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Vt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new vg(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=VR(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<n&&(s+=t.charAt(i[r]%62))}return s}}function St(e,t){return e<t?-1:e>t?1:0}function wh(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const i=e.charAt(s),r=t.charAt(s);if(i!==r)return Mu(i)===Mu(r)?St(i,r):Mu(i)?1:-1}return St(e.length,t.length)}const LR=55296,FR=57343;function Mu(e){const t=e.charCodeAt(0);return t>=LR&&t<=FR}function Dr(e,t,n){return e.length===t.length&&e.every(((s,i)=>n(s,t[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="__name__";class Bn{constructor(t,n,s){n===void 0?n=0:n>t.length&&pt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&pt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return Bn.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Bn?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let i=0;i<s;i++){const r=Bn.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return St(t.length,n.length)}static compareSegments(t,n){const s=Bn.isNumericId(t),i=Bn.isNumericId(n);return s&&!i?-1:!s&&i?1:s&&i?Bn.extractNumericId(t).compare(Bn.extractNumericId(n)):wh(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ai.fromString(t.substring(4,t.length-2))}}class Kt extends Bn{construct(t,n,s){return new Kt(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new rt(W.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((i=>i.length>0)))}return new Kt(n)}static emptyPath(){return new Kt([])}}const UR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ce extends Bn{construct(t,n,s){return new Ce(t,n,s)}static isValidIdentifier(t){return UR.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ce.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bg}static keyField(){return new Ce([bg])}static fromServerFormat(t){const n=[];let s="",i=0;const r=()=>{if(s.length===0)throw new rt(W.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new rt(W.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new rt(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(s+=a,i++):(r(),i++)}if(r(),o)throw new rt(W.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ce(n)}static emptyPath(){return new Ce([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(t){this.path=t}static fromPath(t){return new lt(Kt.fromString(t))}static fromName(t){return new lt(Kt.fromString(t).popFirst(5))}static empty(){return new lt(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Kt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Kt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new lt(new Kt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(e,t,n){if(!n)throw new rt(W.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function BR(e,t,n,s){if(t===!0&&s===!0)throw new rt(W.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function wg(e){if(!lt.isDocumentKey(e))throw new rt(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Eg(e){if(lt.isDocumentKey(e))throw new rt(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Bv(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function bd(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":pt(12329,{type:typeof e})}function qi(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new rt(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bd(e);throw new rt(W.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(e,t){const n={typeString:e};return t&&(n.value=t),n}function va(e,t){if(!Bv(e))throw new rt(W.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const i=t[s].typeString,r="value"in t[s]?{value:t[s].value}:void 0;if(!(s in e)){n=`JSON missing required field: '${s}'`;break}const o=e[s];if(i&&typeof o!==i){n=`JSON field '${s}' must be a ${i}.`;break}if(r!==void 0&&o!==r.value){n=`Expected '${s}' field to equal '${r.value}'`;break}}if(n)throw new rt(W.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg=-62135596800,Ig=1e6;class Gt{static now(){return Gt.fromMillis(Date.now())}static fromDate(t){return Gt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*Ig);return new Gt(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new rt(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new rt(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Tg)throw new rt(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new rt(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ig}_compareTo(t){return this.seconds===t.seconds?St(this.nanoseconds,t.nanoseconds):St(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(va(t,Gt._jsonSchema))return new Gt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Tg;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Gt._jsonSchemaVersion="firestore/timestamp/1.0",Gt._jsonSchema={type:oe("string",Gt._jsonSchemaVersion),seconds:oe("number"),nanoseconds:oe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{static fromTimestamp(t){return new _t(t)}static min(){return new _t(new Gt(0,0))}static max(){return new _t(new Gt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=-1;function jR(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,i=_t.fromTimestamp(s===1e9?new Gt(n+1,0):new Gt(n,s));return new pi(i,lt.empty(),t)}function zR(e){return new pi(e.readTime,e.key,ta)}class pi{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new pi(_t.min(),lt.empty(),ta)}static max(){return new pi(_t.max(),lt.empty(),ta)}}function HR(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=lt.comparator(e.documentKey,t.documentKey),n!==0?n:St(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jr(e){if(e.code!==W.FAILED_PRECONDITION||e.message!==$R)throw e;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&pt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new H(((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(s,i)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):H.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):H.reject(n)}static resolve(t){return new H(((n,s)=>{n(t)}))}static reject(t){return new H(((n,s)=>{s(t)}))}static waitFor(t){return new H(((n,s)=>{let i=0,r=0,o=!1;t.forEach((a=>{++i,a.next((()=>{++r,o&&r===i&&n()}),(l=>s(l)))})),o=!0,r===i&&n()}))}static or(t){let n=H.resolve(!1);for(const s of t)n=n.next((i=>i?H.resolve(i):s()));return n}static forEach(t,n){const s=[];return t.forEach(((i,r)=>{s.push(n.call(this,i,r))})),this.waitFor(s)}static mapArray(t,n){return new H(((s,i)=>{const r=t.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const u=l;n(t[u]).next((h=>{o[u]=h,++a,a===r&&s(o)}),(h=>i(h)))}}))}static doWhile(t,n){return new H(((s,i)=>{const r=()=>{t()===!0?n().next((()=>{r()}),i):s()};r()}))}}function qR(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zr(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}xc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=-1;function kc(e){return e==null}function Fl(e){return e===0&&1/e==-1/0}function KR(e){return typeof e=="number"&&Number.isInteger(e)&&!Fl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="";function GR(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ag(t)),t=YR(e.get(n),t);return Ag(t)}function YR(e,t){let n=t;const s=e.length;for(let i=0;i<s;i++){const r=e.charAt(i);switch(r){case"\0":n+="";break;case jv:n+="";break;default:n+=r}}return n}function Ag(e){return e+jv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function tr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function zv(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(t,n){this.comparator=t,this.root=n||Ie.EMPTY}insert(t,n){return new Jt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ie.BLACK,null,null))}remove(t){return new Jt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ie.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(t,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Wa(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Wa(this.root,t,this.comparator,!1)}getReverseIterator(){return new Wa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Wa(this.root,t,this.comparator,!0)}}class Wa{constructor(t,n,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?s(t.key,n):1,n&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ie{constructor(t,n,s,i,r){this.key=t,this.value=n,this.color=s??Ie.RED,this.left=i??Ie.EMPTY,this.right=r??Ie.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,i,r){return new Ie(t??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let i=this;const r=s(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,n,s),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ie.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Ie.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ie.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ie.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw pt(27949);return t+(this.isRed()?0:1)}}Ie.EMPTY=null,Ie.RED=!0,Ie.BLACK=!1;Ie.EMPTY=new class{constructor(){this.size=0}get key(){throw pt(57766)}get value(){throw pt(16141)}get color(){throw pt(16727)}get left(){throw pt(29726)}get right(){throw pt(36894)}copy(t,n,s,i,r){return this}insert(t,n,s){return new Ie(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(t){this.comparator=t,this.data=new Jt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Rg(this.data.getIterator())}getIteratorFrom(t){return new Rg(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof me)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new me(this.comparator);return n.data=t,n}}class Rg{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t){this.fields=t,t.sort(Ce.comparator)}static empty(){return new Tn([])}unionWith(t){let n=new me(Ce.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new Tn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Dr(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Hv("Invalid base64 string: "+r):r}})(t);return new xe(n)}static fromUint8Array(t){const n=(function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r})(t);return new xe(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return St(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}xe.EMPTY_BYTE_STRING=new xe("");const QR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gi(e){if(Vt(!!e,39018),typeof e=="string"){let t=0;const n=QR.exec(e);if(Vt(!!n,46558,{timestamp:e}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:ne(e.seconds),nanos:ne(e.nanos)}}function ne(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function mi(e){return typeof e=="string"?xe.fromBase64String(e):xe.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="server_timestamp",Wv="__type__",qv="__previous_value__",Kv="__local_write_time__";function Ed(e){return(e?.mapValue?.fields||{})[Wv]?.stringValue===$v}function Dc(e){const t=e.mapValue.fields[qv];return Ed(t)?Dc(t):t}function ea(e){const t=gi(e.mapValue.fields[Kv].timestampValue);return new Gt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(t,n,s,i,r,o,a,l,u,h){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Ul="(default)";class na{constructor(t,n){this.projectId=t,this.database=n||Ul}static empty(){return new na("","")}get isDefaultDatabase(){return this.database===Ul}isEqual(t){return t instanceof na&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="__type__",JR="__max__",qa={mapValue:{}},Yv="__vector__",Bl="value";function _i(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ed(e)?4:tC(e)?9007199254740991:ZR(e)?10:11:pt(28295,{value:e})}function es(e,t){if(e===t)return!0;const n=_i(e);if(n!==_i(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ea(e).isEqual(ea(t));case 3:return(function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=gi(i.timestampValue),a=gi(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(i,r){return mi(i.bytesValue).isEqual(mi(r.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(i,r){return ne(i.geoPointValue.latitude)===ne(r.geoPointValue.latitude)&&ne(i.geoPointValue.longitude)===ne(r.geoPointValue.longitude)})(e,t);case 2:return(function(i,r){if("integerValue"in i&&"integerValue"in r)return ne(i.integerValue)===ne(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=ne(i.doubleValue),a=ne(r.doubleValue);return o===a?Fl(o)===Fl(a):isNaN(o)&&isNaN(a)}return!1})(e,t);case 9:return Dr(e.arrayValue.values||[],t.arrayValue.values||[],es);case 10:case 11:return(function(i,r){const o=i.mapValue.fields||{},a=r.mapValue.fields||{};if(Sg(o)!==Sg(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!es(o[l],a[l])))return!1;return!0})(e,t);default:return pt(52216,{left:e})}}function sa(e,t){return(e.values||[]).find((n=>es(n,t)))!==void 0}function Or(e,t){if(e===t)return 0;const n=_i(e),s=_i(t);if(n!==s)return St(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return St(e.booleanValue,t.booleanValue);case 2:return(function(r,o){const a=ne(r.integerValue||r.doubleValue),l=ne(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(e,t);case 3:return Cg(e.timestampValue,t.timestampValue);case 4:return Cg(ea(e),ea(t));case 5:return wh(e.stringValue,t.stringValue);case 6:return(function(r,o){const a=mi(r),l=mi(o);return a.compareTo(l)})(e.bytesValue,t.bytesValue);case 7:return(function(r,o){const a=r.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=St(a[u],l[u]);if(h!==0)return h}return St(a.length,l.length)})(e.referenceValue,t.referenceValue);case 8:return(function(r,o){const a=St(ne(r.latitude),ne(o.latitude));return a!==0?a:St(ne(r.longitude),ne(o.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return Pg(e.arrayValue,t.arrayValue);case 10:return(function(r,o){const a=r.fields||{},l=o.fields||{},u=a[Bl]?.arrayValue,h=l[Bl]?.arrayValue,d=St(u?.values?.length||0,h?.values?.length||0);return d!==0?d:Pg(u,h)})(e.mapValue,t.mapValue);case 11:return(function(r,o){if(r===qa.mapValue&&o===qa.mapValue)return 0;if(r===qa.mapValue)return 1;if(o===qa.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=wh(l[d],h[d]);if(p!==0)return p;const g=Or(a[l[d]],u[h[d]]);if(g!==0)return g}return St(l.length,h.length)})(e.mapValue,t.mapValue);default:throw pt(23264,{he:n})}}function Cg(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return St(e,t);const n=gi(e),s=gi(t),i=St(n.seconds,s.seconds);return i!==0?i:St(n.nanos,s.nanos)}function Pg(e,t){const n=e.values||[],s=t.values||[];for(let i=0;i<n.length&&i<s.length;++i){const r=Or(n[i],s[i]);if(r)return r}return St(n.length,s.length)}function Mr(e){return Eh(e)}function Eh(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const s=gi(n);return`time(${s.seconds},${s.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return mi(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return lt.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let s="[",i=!0;for(const r of n.values||[])i?i=!1:s+=",",s+=Eh(r);return s+"]"})(e.arrayValue):"mapValue"in e?(function(n){const s=Object.keys(n.fields||{}).sort();let i="{",r=!0;for(const o of s)r?r=!1:i+=",",i+=`${o}:${Eh(n.fields[o])}`;return i+"}"})(e.mapValue):pt(61005,{value:e})}function pl(e){switch(_i(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Dc(e);return t?16+pl(t):16;case 5:return 2*e.stringValue.length;case 6:return mi(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((i,r)=>i+pl(r)),0)})(e.arrayValue);case 10:case 11:return(function(s){let i=0;return tr(s.fields,((r,o)=>{i+=r.length+pl(o)})),i})(e.mapValue);default:throw pt(13486,{value:e})}}function Th(e){return!!e&&"integerValue"in e}function Td(e){return!!e&&"arrayValue"in e}function xg(e){return!!e&&"nullValue"in e}function kg(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function gl(e){return!!e&&"mapValue"in e}function ZR(e){return(e?.mapValue?.fields||{})[Gv]?.stringValue===Yv}function Fo(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return tr(e.mapValue.fields,((n,s)=>t.mapValue.fields[n]=Fo(s))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Fo(e.arrayValue.values[n]);return t}return{...e}}function tC(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===JR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(t){this.value=t}static empty(){return new pn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!gl(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Fo(n)}setAll(t){let n=Ce.emptyPath(),s={},i=[];t.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,i),s={},i=[],n=a.popLast()}o?s[a.lastSegment()]=Fo(o):i.push(a.lastSegment())}));const r=this.getFieldsMap(n);this.applyChanges(r,s,i)}delete(t){const n=this.field(t.popLast());gl(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return es(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let i=n.mapValue.fields[t.get(s)];gl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,s){tr(n,((i,r)=>t[i]=r));for(const i of s)delete t[i]}clone(){return new pn(Fo(this.value))}}function Qv(e){const t=[];return tr(e.fields,((n,s)=>{const i=new Ce([n]);if(gl(s)){const r=Qv(s.mapValue).fields;if(r.length===0)t.push(i);else for(const o of r)t.push(i.child(o))}else t.push(i)})),new Tn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(t,n,s,i,r,o,a){this.key=t,this.documentType=n,this.version=s,this.readTime=i,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Fe(t,0,_t.min(),_t.min(),_t.min(),pn.empty(),0)}static newFoundDocument(t,n,s,i){return new Fe(t,1,n,_t.min(),s,i,0)}static newNoDocument(t,n){return new Fe(t,2,n,_t.min(),_t.min(),pn.empty(),0)}static newUnknownDocument(t,n){return new Fe(t,3,n,_t.min(),_t.min(),pn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(_t.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_t.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Fe&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Fe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(t,n){this.position=t,this.inclusive=n}}function Dg(e,t,n){let s=0;for(let i=0;i<e.position.length;i++){const r=t[i],o=e.position[i];if(r.field.isKeyField()?s=lt.comparator(lt.fromName(o.referenceValue),n.key):s=Or(o,n.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function Og(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!es(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(t,n="asc"){this.field=t,this.dir=n}}function eC(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{}class fe extends Xv{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new sC(t,n,s):n==="array-contains"?new oC(t,s):n==="in"?new aC(t,s):n==="not-in"?new lC(t,s):n==="array-contains-any"?new cC(t,s):new fe(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new iC(t,s):new rC(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Or(n,this.value)):n!==null&&_i(this.value)===_i(n)&&this.matchesComparison(Or(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return pt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ns extends Xv{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new ns(t,n)}matches(t){return Jv(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Jv(e){return e.op==="and"}function Zv(e){return nC(e)&&Jv(e)}function nC(e){for(const t of e.filters)if(t instanceof ns)return!1;return!0}function Ih(e){if(e instanceof fe)return e.field.canonicalString()+e.op.toString()+Mr(e.value);if(Zv(e))return e.filters.map((t=>Ih(t))).join(",");{const t=e.filters.map((n=>Ih(n))).join(",");return`${e.op}(${t})`}}function tb(e,t){return e instanceof fe?(function(s,i){return i instanceof fe&&s.op===i.op&&s.field.isEqual(i.field)&&es(s.value,i.value)})(e,t):e instanceof ns?(function(s,i){return i instanceof ns&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce(((r,o,a)=>r&&tb(o,i.filters[a])),!0):!1})(e,t):void pt(19439)}function eb(e){return e instanceof fe?(function(n){return`${n.field.canonicalString()} ${n.op} ${Mr(n.value)}`})(e):e instanceof ns?(function(n){return n.op.toString()+" {"+n.getFilters().map(eb).join(" ,")+"}"})(e):"Filter"}class sC extends fe{constructor(t,n,s){super(t,n,s),this.key=lt.fromName(s.referenceValue)}matches(t){const n=lt.comparator(t.key,this.key);return this.matchesComparison(n)}}class iC extends fe{constructor(t,n){super(t,"in",n),this.keys=nb("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class rC extends fe{constructor(t,n){super(t,"not-in",n),this.keys=nb("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function nb(e,t){return(t.arrayValue?.values||[]).map((n=>lt.fromName(n.referenceValue)))}class oC extends fe{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Td(n)&&sa(n.arrayValue,this.value)}}class aC extends fe{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&sa(this.value.arrayValue,n)}}class lC extends fe{constructor(t,n){super(t,"not-in",n)}matches(t){if(sa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!sa(this.value.arrayValue,n)}}class cC extends fe{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Td(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>sa(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(t,n=null,s=[],i=[],r=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=o,this.endAt=a,this.Te=null}}function Mg(e,t=null,n=[],s=[],i=null,r=null,o=null){return new uC(e,t,n,s,i,r,o)}function Id(e){const t=yt(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>Ih(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(r){return r.field.canonicalString()+r.dir})(s))).join(","),kc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>Mr(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>Mr(s))).join(",")),t.Te=n}return t.Te}function Ad(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!eC(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!tb(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Og(e.startAt,t.startAt)&&Og(e.endAt,t.endAt)}function Ah(e){return lt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(t,n=null,s=[],i=[],r=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function hC(e,t,n,s,i,r,o,a){return new Oc(e,t,n,s,i,r,o,a)}function Sd(e){return new Oc(e)}function Ng(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function dC(e){return e.collectionGroup!==null}function Uo(e){const t=yt(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),n.add(r.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new me(Ce.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(t).forEach((r=>{n.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new zl(r,s))})),n.has(Ce.keyField().canonicalString())||t.Ie.push(new zl(Ce.keyField(),s))}return t.Ie}function Kn(e){const t=yt(e);return t.Ee||(t.Ee=fC(t,Uo(e))),t.Ee}function fC(e,t){if(e.limitType==="F")return Mg(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((i=>{const r=i.dir==="desc"?"asc":"desc";return new zl(i.field,r)}));const n=e.endAt?new jl(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new jl(e.startAt.position,e.startAt.inclusive):null;return Mg(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}}function Sh(e,t,n){return new Oc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Mc(e,t){return Ad(Kn(e),Kn(t))&&e.limitType===t.limitType}function sb(e){return`${Id(Kn(e))}|lt:${e.limitType}`}function gr(e){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((i=>eb(i))).join(", ")}]`),kc(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((i=>Mr(i))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((i=>Mr(i))).join(",")),`Target(${s})`})(Kn(e))}; limitType=${e.limitType})`}function Nc(e,t){return t.isFoundDocument()&&(function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):lt.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)})(e,t)&&(function(s,i){for(const r of Uo(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0})(e,t)&&(function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0})(e,t)&&(function(s,i){return!(s.startAt&&!(function(o,a,l){const u=Dg(o,a,l);return o.inclusive?u<=0:u<0})(s.startAt,Uo(s),i)||s.endAt&&!(function(o,a,l){const u=Dg(o,a,l);return o.inclusive?u>=0:u>0})(s.endAt,Uo(s),i))})(e,t)}function pC(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ib(e){return(t,n)=>{let s=!1;for(const i of Uo(e)){const r=gC(i,t,n);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function gC(e,t,n){const s=e.field.isKeyField()?lt.comparator(t.key,n.key):(function(r,o,a){const l=o.data.field(r),u=a.data.field(r);return l!==null&&u!==null?Or(l,u):pt(42886)})(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return pt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),i=this.inner[s];if(i===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(t){tr(this.inner,((n,s)=>{for(const[i,r]of s)t(i,r)}))}isEmpty(){return zv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=new Jt(lt.comparator);function Ps(){return mC}const rb=new Jt(lt.comparator);function wo(...e){let t=rb;for(const n of e)t=t.insert(n.key,n);return t}function ob(e){let t=rb;return e.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function Ni(){return Bo()}function ab(){return Bo()}function Bo(){return new er((e=>e.toString()),((e,t)=>e.isEqual(t)))}const _C=new Jt(lt.comparator),yC=new me(lt.comparator);function Rt(...e){let t=yC;for(const n of e)t=t.add(n);return t}const vC=new me(St);function bC(){return vC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fl(t)?"-0":t}}function lb(e){return{integerValue:""+e}}function wC(e,t){return KR(t)?lb(t):Rd(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(){this._=void 0}}function EC(e,t,n){return e instanceof ia?(function(i,r){const o={fields:{[Wv]:{stringValue:$v},[Kv]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&Ed(r)&&(r=Dc(r)),r&&(o.fields[qv]=r),{mapValue:o}})(n,t):e instanceof ra?ub(e,t):e instanceof oa?hb(e,t):(function(i,r){const o=cb(i,r),a=Vg(o)+Vg(i.Ae);return Th(o)&&Th(i.Ae)?lb(a):Rd(i.serializer,a)})(e,t)}function TC(e,t,n){return e instanceof ra?ub(e,t):e instanceof oa?hb(e,t):n}function cb(e,t){return e instanceof Hl?(function(s){return Th(s)||(function(r){return!!r&&"doubleValue"in r})(s)})(t)?t:{integerValue:0}:null}class ia extends Vc{}class ra extends Vc{constructor(t){super(),this.elements=t}}function ub(e,t){const n=db(t);for(const s of e.elements)n.some((i=>es(i,s)))||n.push(s);return{arrayValue:{values:n}}}class oa extends Vc{constructor(t){super(),this.elements=t}}function hb(e,t){let n=db(t);for(const s of e.elements)n=n.filter((i=>!es(i,s)));return{arrayValue:{values:n}}}class Hl extends Vc{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function Vg(e){return ne(e.integerValue||e.doubleValue)}function db(e){return Td(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(t,n){this.field=t,this.transform=n}}function AC(e,t){return e.field.isEqual(t.field)&&(function(s,i){return s instanceof ra&&i instanceof ra||s instanceof oa&&i instanceof oa?Dr(s.elements,i.elements,es):s instanceof Hl&&i instanceof Hl?es(s.Ae,i.Ae):s instanceof ia&&i instanceof ia})(e.transform,t.transform)}class SC{constructor(t,n){this.version=t,this.transformResults=n}}class Es{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Es}static exists(t){return new Es(void 0,t)}static updateTime(t){return new Es(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ml(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Lc{}function fb(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new gb(e.key,Es.none()):new ba(e.key,e.data,Es.none());{const n=e.data,s=pn.empty();let i=new me(Ce.comparator);for(let r of t.fields)if(!i.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?s.delete(r):s.set(r,o),i=i.add(r)}return new nr(e.key,s,new Tn(i.toArray()),Es.none())}}function RC(e,t,n){e instanceof ba?(function(i,r,o){const a=i.value.clone(),l=Fg(i.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(e,t,n):e instanceof nr?(function(i,r,o){if(!ml(i.precondition,r))return void r.convertToUnknownDocument(o.version);const a=Fg(i.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(pb(i)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(e,t,n):(function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()})(0,t,n)}function jo(e,t,n,s){return e instanceof ba?(function(r,o,a,l){if(!ml(r.precondition,o))return a;const u=r.value.clone(),h=Ug(r.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(e,t,n,s):e instanceof nr?(function(r,o,a,l){if(!ml(r.precondition,o))return a;const u=Ug(r.fieldTransforms,l,o),h=o.data;return h.setAll(pb(r)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map((d=>d.field)))})(e,t,n,s):(function(r,o,a){return ml(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(e,t,n)}function CC(e,t){let n=null;for(const s of e.fieldTransforms){const i=t.data.field(s.field),r=cb(s.transform,i||null);r!=null&&(n===null&&(n=pn.empty()),n.set(s.field,r))}return n||null}function Lg(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&Dr(s,i,((r,o)=>AC(r,o)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ba extends Lc{constructor(t,n,s,i=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class nr extends Lc{constructor(t,n,s,i,r=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function pb(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}})),t}function Fg(e,t,n){const s=new Map;Vt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const r=e[i],o=r.transform,a=t.data.field(r.field);s.set(r.field,TC(o,a,n[i]))}return s}function Ug(e,t,n){const s=new Map;for(const i of e){const r=i.transform,o=n.data.field(i.field);s.set(i.field,EC(r,o,t))}return s}class gb extends Lc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PC extends Lc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(t,n,s,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(t.key)&&RC(r,t,s[i])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=jo(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=jo(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=ab();return this.mutations.forEach((i=>{const r=t.get(i.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(i.key)?null:a;const l=fb(o,a);l!==null&&s.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(_t.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Rt())}isEqual(t){return this.batchId===t.batchId&&Dr(this.mutations,t.mutations,((n,s)=>Lg(n,s)))&&Dr(this.baseMutations,t.baseMutations,((n,s)=>Lg(n,s)))}}class Cd{constructor(t,n,s,i){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(t,n,s){Vt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let i=(function(){return _C})();const r=t.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,s[o].version);return new Cd(t,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var re,Ct;function OC(e){switch(e){case W.OK:return pt(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return pt(15467,{code:e})}}function mb(e){if(e===void 0)return Cs("GRPC error has no .code"),W.UNKNOWN;switch(e){case re.OK:return W.OK;case re.CANCELLED:return W.CANCELLED;case re.UNKNOWN:return W.UNKNOWN;case re.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case re.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case re.INTERNAL:return W.INTERNAL;case re.UNAVAILABLE:return W.UNAVAILABLE;case re.UNAUTHENTICATED:return W.UNAUTHENTICATED;case re.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case re.NOT_FOUND:return W.NOT_FOUND;case re.ALREADY_EXISTS:return W.ALREADY_EXISTS;case re.PERMISSION_DENIED:return W.PERMISSION_DENIED;case re.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case re.ABORTED:return W.ABORTED;case re.OUT_OF_RANGE:return W.OUT_OF_RANGE;case re.UNIMPLEMENTED:return W.UNIMPLEMENTED;case re.DATA_LOSS:return W.DATA_LOSS;default:return pt(39323,{code:e})}}(Ct=re||(re={}))[Ct.OK=0]="OK",Ct[Ct.CANCELLED=1]="CANCELLED",Ct[Ct.UNKNOWN=2]="UNKNOWN",Ct[Ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ct[Ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ct[Ct.NOT_FOUND=5]="NOT_FOUND",Ct[Ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ct[Ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ct[Ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ct[Ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ct[Ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ct[Ct.ABORTED=10]="ABORTED",Ct[Ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ct[Ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ct[Ct.INTERNAL=13]="INTERNAL",Ct[Ct.UNAVAILABLE=14]="UNAVAILABLE",Ct[Ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=new ai([4294967295,4294967295],0);function Bg(e){const t=MC().encode(e),n=new kv;return n.update(t),new Uint8Array(n.digest())}function jg(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new ai([n,s],0),new ai([i,r],0)]}class Pd{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Eo(`Invalid padding: ${n}`);if(s<0)throw new Eo(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Eo(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new Eo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=ai.fromNumber(this.ge)}ye(t,n,s){let i=t.add(n.multiply(ai.fromNumber(s)));return i.compare(NC)===1&&(i=new ai([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=Bg(t),[s,i]=jg(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(s,i,r);if(!this.we(o))return!1}return!0}static create(t,n,s){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new Pd(r,i,n);return s.forEach((a=>o.insert(a))),o}insert(t){if(this.ge===0)return;const n=Bg(t),[s,i]=jg(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(s,i,r);this.Se(o)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class Eo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(t,n,s,i,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const i=new Map;return i.set(t,wa.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new Fc(_t.min(),i,new Jt(St),Ps(),Rt())}}class wa{constructor(t,n,s,i,r){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new wa(s,n,Rt(),Rt(),Rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(t,n,s,i){this.be=t,this.removedTargetIds=n,this.key=s,this.De=i}}class _b{constructor(t,n){this.targetId=t,this.Ce=n}}class yb{constructor(t,n,s=xe.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=i}}class zg{constructor(){this.ve=0,this.Fe=Hg(),this.Me=xe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Rt(),n=Rt(),s=Rt();return this.Fe.forEach(((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:pt(38017,{changeType:r})}})),new wa(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=Hg()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Vt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class VC{constructor(t){this.Ge=t,this.ze=new Map,this.je=Ps(),this.Je=Ka(),this.He=Ka(),this.Ye=new Jt(St)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:pt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,i)=>{this.rt(i)&&n(i)}))}st(t){const n=t.targetId,s=t.Ce.count,i=this.ot(n);if(i){const r=i.target;if(Ah(r))if(s===0){const o=new lt(r.path);this.et(n,o,Fe.newNoDocument(o,_t.min()))}else Vt(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const a=this.ut(t),l=a?this.ct(a,t,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=n;let o,a;try{o=mi(s).toUint8Array()}catch(l){if(l instanceof Hv)return kr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Pd(o,i,r)}catch(l){return kr(l instanceof Eo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let i=0;return s.forEach((r=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;t.mightContain(a)||(this.et(n,r,null),i++)})),i}Tt(t){const n=new Map;this.ze.forEach(((r,o)=>{const a=this.ot(o);if(a){if(r.current&&Ah(a.target)){const l=new lt(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Fe.newNoDocument(l,t))}r.Be&&(n.set(o,r.ke()),r.qe())}}));let s=Rt();this.He.forEach(((r,o)=>{let a=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(s=s.add(r))})),this.je.forEach(((r,o)=>o.setReadTime(t)));const i=new Fc(t,n,this.Ye,this.je,s);return this.je=Ps(),this.Je=Ka(),this.He=Ka(),this.Ye=new Jt(St),i}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const i=this.nt(t);this.Et(t,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new zg,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new me(St),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new me(St),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||st("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new zg),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Ka(){return new Jt(lt.comparator)}function Hg(){return new Jt(lt.comparator)}const LC={asc:"ASCENDING",desc:"DESCENDING"},FC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UC={and:"AND",or:"OR"};class BC{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Rh(e,t){return e.useProto3Json||kc(t)?t:{value:t}}function $l(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function vb(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function jC(e,t){return $l(e,t.toTimestamp())}function Gn(e){return Vt(!!e,49232),_t.fromTimestamp((function(n){const s=gi(n);return new Gt(s.seconds,s.nanos)})(e))}function xd(e,t){return Ch(e,t).canonicalString()}function Ch(e,t){const n=(function(i){return new Kt(["projects",i.projectId,"databases",i.database])})(e).child("documents");return t===void 0?n:n.child(t)}function bb(e){const t=Kt.fromString(e);return Vt(Ab(t),10190,{key:t.toString()}),t}function Ph(e,t){return xd(e.databaseId,t.path)}function Nu(e,t){const n=bb(t);if(n.get(1)!==e.databaseId.projectId)throw new rt(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new rt(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new lt(Eb(n))}function wb(e,t){return xd(e.databaseId,t)}function zC(e){const t=bb(e);return t.length===4?Kt.emptyPath():Eb(t)}function xh(e){return new Kt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Eb(e){return Vt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function $g(e,t,n){return{name:Ph(e,t),fields:n.value.mapValue.fields}}function HC(e,t){let n;if("targetChange"in t){t.targetChange;const s=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:pt(39313,{state:u})})(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],r=(function(u,h){return u.useProto3Json?(Vt(h===void 0||typeof h=="string",58123),xe.fromBase64String(h||"")):(Vt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),xe.fromUint8Array(h||new Uint8Array))})(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&(function(u){const h=u.code===void 0?W.UNKNOWN:mb(u.code);return new rt(h,u.message||"")})(o);n=new yb(s,i,r,a||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const i=Nu(e,s.document.name),r=Gn(s.document.updateTime),o=s.document.createTime?Gn(s.document.createTime):_t.min(),a=new pn({mapValue:{fields:s.document.fields}}),l=Fe.newFoundDocument(i,r,o,a),u=s.targetIds||[],h=s.removedTargetIds||[];n=new _l(u,h,l.key,l)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const i=Nu(e,s.document),r=s.readTime?Gn(s.readTime):_t.min(),o=Fe.newNoDocument(i,r),a=s.removedTargetIds||[];n=new _l([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const i=Nu(e,s.document),r=s.removedTargetIds||[];n=new _l([],r,i,null)}else{if(!("filter"in t))return pt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,o=new DC(i,r),a=s.targetId;n=new _b(a,o)}}return n}function $C(e,t){let n;if(t instanceof ba)n={update:$g(e,t.key,t.value)};else if(t instanceof gb)n={delete:Ph(e,t.key)};else if(t instanceof nr)n={update:$g(e,t.key,t.data),updateMask:ZC(t.fieldMask)};else{if(!(t instanceof PC))return pt(16599,{Vt:t.type});n={verify:Ph(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(r,o){const a=o.transform;if(a instanceof ia)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ra)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof oa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Hl)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw pt(20930,{transform:o.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(i,r){return r.updateTime!==void 0?{updateTime:jC(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:pt(27497)})(e,t.precondition)),n}function WC(e,t){return e&&e.length>0?(Vt(t!==void 0,14353),e.map((n=>(function(i,r){let o=i.updateTime?Gn(i.updateTime):Gn(r);return o.isEqual(_t.min())&&(o=Gn(r)),new SC(o,i.transformResults||[])})(n,t)))):[]}function qC(e,t){return{documents:[wb(e,t.path)]}}function KC(e,t){const n={structuredQuery:{}},s=t.path;let i;t.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=wb(e,i);const r=(function(u){if(u.length!==0)return Ib(ns.create(u,"and"))})(t.filters);r&&(n.structuredQuery.where=r);const o=(function(u){if(u.length!==0)return u.map((h=>(function(p){return{field:mr(p.field),direction:QC(p.dir)}})(h)))})(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Rh(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(t.endAt)),{ft:n,parent:i}}function GC(e){let t=zC(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){Vt(s===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:t=t.child(h.collectionId)}let r=[];n.where&&(r=(function(d){const p=Tb(d);return p instanceof ns&&Zv(p)?p.getFilters():[p]})(n.where));let o=[];n.orderBy&&(o=(function(d){return d.map((p=>(function(b){return new zl(_r(b.field),(function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(p)))})(n.orderBy));let a=null;n.limit&&(a=(function(d){let p;return p=typeof d=="object"?d.value:d,kc(p)?null:p})(n.limit));let l=null;n.startAt&&(l=(function(d){const p=!!d.before,g=d.values||[];return new jl(g,p)})(n.startAt));let u=null;return n.endAt&&(u=(function(d){const p=!d.before,g=d.values||[];return new jl(g,p)})(n.endAt)),hC(t,i,o,r,a,"F",l,u)}function YC(e,t){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pt(28987,{purpose:i})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Tb(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=_r(n.unaryFilter.field);return fe.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=_r(n.unaryFilter.field);return fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=_r(n.unaryFilter.field);return fe.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=_r(n.unaryFilter.field);return fe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pt(61313);default:return pt(60726)}})(e):e.fieldFilter!==void 0?(function(n){return fe.create(_r(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pt(58110);default:return pt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return ns.create(n.compositeFilter.filters.map((s=>Tb(s))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return pt(1026)}})(n.compositeFilter.op))})(e):pt(30097,{filter:e})}function QC(e){return LC[e]}function XC(e){return FC[e]}function JC(e){return UC[e]}function mr(e){return{fieldPath:e.canonicalString()}}function _r(e){return Ce.fromServerFormat(e.fieldPath)}function Ib(e){return e instanceof fe?(function(n){if(n.op==="=="){if(kg(n.value))return{unaryFilter:{field:mr(n.field),op:"IS_NAN"}};if(xg(n.value))return{unaryFilter:{field:mr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(kg(n.value))return{unaryFilter:{field:mr(n.field),op:"IS_NOT_NAN"}};if(xg(n.value))return{unaryFilter:{field:mr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mr(n.field),op:XC(n.op),value:n.value}}})(e):e instanceof ns?(function(n){const s=n.getFilters().map((i=>Ib(i)));return s.length===1?s[0]:{compositeFilter:{op:JC(n.op),filters:s}}})(e):pt(54877,{filter:e})}function ZC(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function Ab(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(t,n,s,i,r=_t.min(),o=_t.min(),a=xe.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new Xs(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(t){this.yt=t}}function eP(e){const t=GC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Sh(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(){this.Cn=new sP}addToCollectionParentIndex(t,n){return this.Cn.add(n),H.resolve()}getCollectionParents(t,n){return H.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return H.resolve()}deleteFieldIndex(t,n){return H.resolve()}deleteAllFieldIndexes(t){return H.resolve()}createTargetIndexes(t,n){return H.resolve()}getDocumentsMatchingTarget(t,n){return H.resolve(null)}getIndexType(t,n){return H.resolve(0)}getFieldIndexes(t,n){return H.resolve([])}getNextCollectionGroupToUpdate(t){return H.resolve(null)}getMinOffset(t,n){return H.resolve(pi.min())}getMinOffsetFromCollectionGroup(t,n){return H.resolve(pi.min())}updateCollectionGroup(t,n,s){return H.resolve()}updateIndexEntries(t,n){return H.resolve()}}class sP{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n]||new me(Kt.comparator),r=!i.has(s);return this.index[n]=i.add(s),r}has(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(t){return(this.index[t]||new me(Kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Sb=41943040;class Je{static withCacheSize(t){return new Je(t,Je.DEFAULT_COLLECTION_PERCENTILE,Je.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Je.DEFAULT_COLLECTION_PERCENTILE=10,Je.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Je.DEFAULT=new Je(Sb,Je.DEFAULT_COLLECTION_PERCENTILE,Je.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Je.DISABLED=new Je(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Nr(0)}static cr(){return new Nr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="LruGarbageCollector",iP=1048576;function Kg([e,t],[n,s]){const i=St(e,n);return i===0?St(t,s):i}class rP{constructor(t){this.Ir=t,this.buffer=new me(Kg),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Kg(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class oP{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){st(qg,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){zr(n)?st(qg,"Ignoring IndexedDB error during garbage collection: ",n):await jr(n)}await this.Vr(3e5)}))}}class aP{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return H.resolve(xc.ce);const s=new rP(n);return this.mr.forEachTarget(t,(i=>s.Ar(i.sequenceNumber))).next((()=>this.mr.pr(t,(i=>s.Ar(i))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(Wg)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wg):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,i,r,o,a,l,u;const h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(t,i)))).next((d=>(s=d,a=Date.now(),this.removeTargets(t,s,n)))).next((d=>(r=d,l=Date.now(),this.removeOrphanedDocuments(t,s)))).next((d=>(u=Date.now(),pr()<=At.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${r} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:d}))))}}function lP(e,t){return new aP(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(){this.changes=new er((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Fe.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?H.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(t,n,s,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((i=>(s=i,this.remoteDocumentCache.getEntry(t,n)))).next((i=>(s!==null&&jo(s.mutation,i,Tn.empty(),Gt.now()),i)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,Rt()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=Rt()){const i=Ni();return this.populateOverlays(t,i,n).next((()=>this.computeViews(t,n,i,s).next((r=>{let o=wo();return r.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(t,n){const s=Ni();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,Rt())))}populateOverlays(t,n,s){const i=[];return s.forEach((r=>{n.has(r)||i.push(r)})),this.documentOverlayCache.getOverlays(t,i).next((r=>{r.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(t,n,s,i){let r=Ps();const o=Bo(),a=(function(){return Bo()})();return n.forEach(((l,u)=>{const h=s.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof nr)?r=r.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),jo(h.mutation,u,h.mutation.getFieldMask(),Gt.now())):o.set(u.key,Tn.empty())})),this.recalculateAndSaveOverlays(t,r).next((l=>(l.forEach(((u,h)=>o.set(u,h))),n.forEach(((u,h)=>a.set(u,new uP(h,o.get(u)??null)))),a)))}recalculateAndSaveOverlays(t,n){const s=Bo();let i=new Jt(((o,a)=>o-a)),r=Rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((o=>{for(const a of o)a.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let h=s.get(l)||Tn.empty();h=a.applyToLocalView(u,h),s.set(l,h);const d=(i.get(a.batchId)||Rt()).add(l);i=i.insert(a.batchId,d)}))})).next((()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=ab();h.forEach((p=>{if(!r.has(p)){const g=fb(n.get(p),s.get(p));g!==null&&d.set(p,g),r=r.add(p)}})),o.push(this.documentOverlayCache.saveOverlays(t,u,d))}return H.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,i){return(function(o){return lt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):dC(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,i):this.getDocumentsMatchingCollectionQuery(t,n,s,i)}getNextDocuments(t,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,i).next((r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,i-r.size):H.resolve(Ni());let a=ta,l=r;return o.next((u=>H.forEach(u,((h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),r.get(h)?H.resolve():this.remoteDocumentCache.getEntry(t,h).next((p=>{l=l.insert(h,p)}))))).next((()=>this.populateOverlays(t,u,r))).next((()=>this.computeViews(t,l,u,Rt()))).next((h=>({batchId:a,changes:ob(h)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new lt(n)).next((s=>{let i=wo();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,i){const r=n.collectionGroup;let o=wo();return this.indexManager.getCollectionParents(t,r).next((a=>H.forEach(a,(l=>{const u=(function(d,p){return new Oc(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(n,l.child(r));return this.getDocumentsMatchingCollectionQuery(t,u,s,i).next((h=>{h.forEach(((d,p)=>{o=o.insert(d,p)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(t,n,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,r,i)))).next((o=>{r.forEach(((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Fe.newInvalidDocument(h)))}));let a=wo();return o.forEach(((l,u)=>{const h=r.get(l);h!==void 0&&jo(h.mutation,u,Tn.empty(),Gt.now()),Nc(n,u)&&(a=a.insert(l,u))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return H.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Gn(i.createTime)}})(n)),H.resolve()}getNamedQuery(t,n){return H.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:eP(i.bundledQuery),readTime:Gn(i.readTime)}})(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(){this.overlays=new Jt(lt.comparator),this.qr=new Map}getOverlay(t,n){return H.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Ni();return H.forEach(n,(i=>this.getOverlay(t,i).next((r=>{r!==null&&s.set(i,r)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((i,r)=>{this.St(t,n,r)})),H.resolve()}removeOverlaysForBatchId(t,n,s){const i=this.qr.get(s);return i!==void 0&&(i.forEach((r=>this.overlays=this.overlays.remove(r))),this.qr.delete(s)),H.resolve()}getOverlaysForCollection(t,n,s){const i=Ni(),r=n.length+1,o=new lt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===r&&l.largestBatchId>s&&i.set(l.getKey(),l)}return H.resolve(i)}getOverlaysForCollectionGroup(t,n,s,i){let r=new Jt(((u,h)=>u-h));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=r.get(u.largestBatchId);h===null&&(h=Ni(),r=r.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Ni(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,h)=>a.set(u,h))),!(a.size()>=i)););return H.resolve(a)}St(t,n,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(s.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new kC(n,s));let r=this.qr.get(n);r===void 0&&(r=Rt(),this.qr.set(n,r)),this.qr.set(n,r.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(){this.sessionToken=xe.EMPTY_BYTE_STRING}getSessionToken(t){return H.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(){this.Qr=new me(be.$r),this.Ur=new me(be.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new be(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new be(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new lt(new Kt([])),s=new be(n,t),i=new be(n,t+1),r=[];return this.Ur.forEachInRange([s,i],(o=>{this.Gr(o),r.push(o.key)})),r}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new lt(new Kt([])),s=new be(n,t),i=new be(n,t+1);let r=Rt();return this.Ur.forEachInRange([s,i],(o=>{r=r.add(o.key)})),r}containsKey(t){const n=new be(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class be{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return lt.comparator(t.key,n.key)||St(t.Yr,n.Yr)}static Kr(t,n){return St(t.Yr,n.Yr)||lt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new me(be.$r)}checkEmpty(t){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,i){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new xC(r,n,s,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new be(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return H.resolve(o)}lookupMutationBatch(t,n){return H.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,i=this.ei(s),r=i<0?0:i;return H.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?wd:this.tr-1)}getAllMutationBatches(t){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new be(n,0),i=new be(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([s,i],(o=>{const a=this.Xr(o.Yr);r.push(a)})),H.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new me(St);return n.forEach((i=>{const r=new be(i,0),o=new be(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,o],(a=>{s=s.add(a.Yr)}))})),H.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,i=s.length+1;let r=s;lt.isDocumentKey(r)||(r=r.child(""));const o=new be(new lt(r),0);let a=new me(St);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)}),o),H.resolve(this.ti(a))}ti(t){const n=[];return t.forEach((s=>{const i=this.Xr(s);i!==null&&n.push(i)})),n}removeMutationBatch(t,n){Vt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return H.forEach(n.mutations,(i=>{const r=new be(i.key,n.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new be(n,0),i=this.Zr.firstAfterOrEqual(s);return H.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,H.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(t){this.ri=t,this.docs=(function(){return new Jt(lt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,i=this.docs.get(s),r=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return H.resolve(s?s.document.mutableCopy():Fe.newInvalidDocument(n))}getEntries(t,n){let s=Ps();return n.forEach((i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():Fe.newInvalidDocument(i))})),H.resolve(s)}getDocumentsMatchingQuery(t,n,s,i){let r=Ps();const o=n.path,a=new lt(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||HR(zR(h),s)<=0||(i.has(h.key)||Nc(n,h))&&(r=r.insert(h.key,h.mutableCopy()))}return H.resolve(r)}getAllFromCollectionGroup(t,n,s,i){pt(9500)}ii(t,n){return H.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new _P(this)}getSize(t){return H.resolve(this.size)}}class _P extends cP{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(t,i)):this.Nr.removeEntry(s)})),H.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(t){this.persistence=t,this.si=new er((n=>Id(n)),Ad),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.oi=0,this._i=new kd,this.targetCount=0,this.ai=Nr.ur()}forEachTarget(t,n){return this.si.forEach(((s,i)=>n(i))),H.resolve()}getLastRemoteSnapshotVersion(t){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return H.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),H.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Nr(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,H.resolve()}updateTargetData(t,n){return this.Pr(n),H.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(t,n,s){let i=0;const r=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.si.delete(o),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),H.waitFor(r).next((()=>i))}getTargetCount(t){return H.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return H.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),H.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach((o=>{r.push(i.markPotentiallyOrphaned(t,o))})),H.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),H.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return H.resolve(s)}containsKey(t,n){return H.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(t,n){this.ui={},this.overlays={},this.ci=new xc(0),this.li=!1,this.li=!0,this.hi=new pP,this.referenceDelegate=t(this),this.Pi=new yP(this),this.indexManager=new nP,this.remoteDocumentCache=(function(i){return new mP(i)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new tP(n),this.Ii=new dP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new fP,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new gP(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){st("MemoryPersistence","Starting transaction:",t);const i=new vP(this.ci.next());return this.referenceDelegate.Ei(),s(i).next((r=>this.referenceDelegate.di(i).next((()=>r)))).toPromise().then((r=>(i.raiseOnCommittedEvent(),r)))}Ai(t,n){return H.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class vP extends WR{constructor(t){super(),this.currentSequenceNumber=t}}class Dd{constructor(t){this.persistence=t,this.Ri=new kd,this.Vi=null}static mi(t){return new Dd(t)}get fi(){if(this.Vi)return this.Vi;throw pt(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),H.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),H.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),H.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((i=>{i.forEach((r=>this.fi.add(r.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.fi,(s=>{const i=lt.fromPath(s);return this.gi(t,i).next((r=>{r||n.removeEntry(i,_t.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return H.or([()=>H.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Wl{constructor(t,n){this.persistence=t,this.pi=new er((s=>GR(s.path)),((s,i)=>s.isEqual(i))),this.garbageCollector=lP(this,n)}static mi(t,n){return new Wl(t,n)}Ei(){}di(t){return H.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((i=>s+i))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return H.forEach(this.pi,((s,i)=>this.br(t,s,i).next((r=>r?H.resolve():n(i)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.ii(t,(o=>this.br(t,o,n).next((a=>{a||(s++,r.removeEntry(o,_t.min()))})))).next((()=>r.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),H.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),H.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),H.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),H.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=pl(t.data.value)),n}br(t,n,s){return H.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.pi.get(n);return H.resolve(i!==void 0&&i>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(t,n,s,i){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=i}static As(t,n){let s=Rt(),i=Rt();for(const r of n.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Od(t,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return dS()?8:qR(He())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,i){const r={result:null};return this.ys(t,n).next((o=>{r.result=o})).next((()=>{if(!r.result)return this.ws(t,n,i,s).next((o=>{r.result=o}))})).next((()=>{if(r.result)return;const o=new bP;return this.Ss(t,n,o).next((a=>{if(r.result=a,this.Vs)return this.bs(t,n,o,a.size)}))})).next((()=>r.result))}bs(t,n,s,i){return s.documentReadCount<this.fs?(pr()<=At.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",gr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),H.resolve()):(pr()<=At.DEBUG&&st("QueryEngine","Query:",gr(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.gs*i?(pr()<=At.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",gr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Kn(n))):H.resolve())}ys(t,n){if(Ng(n))return H.resolve(null);let s=Kn(n);return this.indexManager.getIndexType(t,s).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Sh(n,null,"F"),s=Kn(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((r=>{const o=Rt(...r);return this.ps.getDocuments(t,o).next((a=>this.indexManager.getMinOffset(t,s).next((l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(t,Sh(n,null,"F")):this.vs(t,u,n,l)}))))})))))}ws(t,n,s,i){return Ng(n)||i.isEqual(_t.min())?H.resolve(null):this.ps.getDocuments(t,s).next((r=>{const o=this.Ds(n,r);return this.Cs(n,o,s,i)?H.resolve(null):(pr()<=At.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),gr(n)),this.vs(t,o,n,jR(i,ta)).next((a=>a)))}))}Ds(t,n){let s=new me(ib(t));return n.forEach(((i,r)=>{Nc(t,r)&&(s=s.add(r))})),s}Cs(t,n,s,i){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ss(t,n,s){return pr()<=At.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",gr(n)),this.ps.getDocumentsMatchingQuery(t,n,pi.min(),s)}vs(t,n,s,i){return this.ps.getDocumentsMatchingQuery(t,s,i).next((r=>(n.forEach((o=>{r=r.insert(o.key,o)})),r)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md="LocalStore",EP=3e8;class TP{constructor(t,n,s,i){this.persistence=t,this.Fs=n,this.serializer=i,this.Ms=new Jt(St),this.xs=new er((r=>Id(r)),Ad),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new hP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function IP(e,t,n,s){return new TP(e,t,n,s)}async function Cb(e,t){const n=yt(e);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next((r=>(i=r,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((r=>{const o=[],a=[];let l=Rt();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of r){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(s,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:a})))}))}))}function AP(e,t){const n=yt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const i=t.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,u,h){const d=u.batch,p=d.keys();let g=H.resolve();return p.forEach((b=>{g=g.next((()=>h.getEntry(l,b))).next((w=>{const v=u.docVersions.get(b);Vt(v!==null,48541),w.version.compareTo(v)<0&&(d.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),h.addEntry(w)))}))})),g.next((()=>a.mutationQueue.removeMutationBatch(l,d)))})(n,s,t,r).next((()=>r.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(a){let l=Rt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l})(t)))).next((()=>n.localDocuments.getDocuments(s,i)))}))}function Pb(e){const t=yt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function SP(e,t){const n=yt(e),s=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(r=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];t.targetChanges.forEach(((h,d)=>{const p=i.get(d);if(!p)return;a.push(n.Pi.removeMatchingKeys(r,h.removedDocuments,d).next((()=>n.Pi.addMatchingKeys(r,h.addedDocuments,d))));let g=p.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(d)!==null?g=g.withResumeToken(xe.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,s)),i=i.insert(d,g),(function(w,v,P){return w.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=EP?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(p,g,h)&&a.push(n.Pi.updateTargetData(r,g))}));let l=Ps(),u=Rt();if(t.documentUpdates.forEach((h=>{t.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,h))})),a.push(RP(r,o,t.documentUpdates).next((h=>{l=h.ks,u=h.qs}))),!s.isEqual(_t.min())){const h=n.Pi.getLastRemoteSnapshotVersion(r).next((d=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,s)));a.push(h)}return H.waitFor(a).next((()=>o.apply(r))).next((()=>n.localDocuments.getLocalViewOfDocuments(r,l,u))).next((()=>l))})).then((r=>(n.Ms=i,r)))}function RP(e,t,n){let s=Rt(),i=Rt();return n.forEach((r=>s=s.add(r))),t.getEntries(e,s).next((r=>{let o=Ps();return n.forEach(((a,l)=>{const u=r.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(_t.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):st(Md,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:i}}))}function CP(e,t){const n=yt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=wd),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function PP(e,t){const n=yt(e);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let i;return n.Pi.getTargetData(s,t).next((r=>r?(i=r,H.resolve(i)):n.Pi.allocateTargetId(s).next((o=>(i=new Xs(t,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,i).next((()=>i)))))))})).then((s=>{const i=n.Ms.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function kh(e,t,n){const s=yt(e),i=s.Ms.get(t),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,(o=>s.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!zr(o))throw o;st(Md,`Failed to update sequence numbers for target ${t}: ${o}`)}s.Ms=s.Ms.remove(t),s.xs.delete(i.target)}function Gg(e,t,n){const s=yt(e);let i=_t.min(),r=Rt();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,h){const d=yt(l),p=d.xs.get(h);return p!==void 0?H.resolve(d.Ms.get(p)):d.Pi.getTargetData(u,h)})(s,o,Kn(t)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{r=l}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,t,n?i:_t.min(),n?r:Rt()))).next((a=>(xP(s,pC(t),a),{documents:a,Qs:r})))))}function xP(e,t,n){let s=e.Os.get(t)||_t.min();n.forEach(((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)})),e.Os.set(t,s)}class Yg{constructor(){this.activeTargetIds=bC()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class kP{constructor(){this.Mo=new Yg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Yg,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg="ConnectivityMonitor";class Xg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){st(Qg,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){st(Qg,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ga=null;function Dh(){return Ga===null?Ga=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ga++,"0x"+Ga.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu="RestConnection",OP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class MP{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${i}`,this.Wo=this.databaseId.database===Ul?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Go(t,n,s,i,r){const o=Dh(),a=this.zo(t,n.toUriEncodedString());st(Vu,`Sending RPC '${t}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,r);const{host:u}=new URL(a),h=Ji(u);return this.Jo(t,a,l,s,h).then((d=>(st(Vu,`Received RPC '${t}' ${o}: `,d),d)),(d=>{throw kr(Vu,`RPC '${t}' ${o} failed with error: `,d,"url: ",a,"request:",s),d}))}Ho(t,n,s,i,r,o){return this.Go(t,n,s,i,r)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Br})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,r)=>t[r]=i)),s&&s.headers.forEach(((i,r)=>t[r]=i))}zo(t,n){const s=OP[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oe="WebChannelConnection";class VP extends MP{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,i,r){const o=Dh();return new Promise(((a,l)=>{const u=new Dv;u.setWithCredentials(!0),u.listenOnce(Ov.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case fl.NO_ERROR:const d=u.getResponseJson();st(Oe,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(d)),a(d);break;case fl.TIMEOUT:st(Oe,`RPC '${t}' ${o} timed out`),l(new rt(W.DEADLINE_EXCEEDED,"Request time out"));break;case fl.HTTP_ERROR:const p=u.getStatus();if(st(Oe,`RPC '${t}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const b=g?.error;if(b&&b.status&&b.message){const w=(function(P){const O=P.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(O)>=0?O:W.UNKNOWN})(b.status);l(new rt(w,b.message))}else l(new rt(W.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new rt(W.UNAVAILABLE,"Connection failed."));break;default:pt(9055,{l_:t,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{st(Oe,`RPC '${t}' ${o} completed.`)}}));const h=JSON.stringify(i);st(Oe,`RPC '${t}' ${o} sending request:`,i),u.send(n,"POST",h,s,15)}))}T_(t,n,s){const i=Dh(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Vv(),a=Nv(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const h=r.join("");st(Oe,`Creating RPC '${t}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);this.I_(d);let p=!1,g=!1;const b=new NP({Yo:v=>{g?st(Oe,`Not sending because RPC '${t}' stream ${i} is closed:`,v):(p||(st(Oe,`Opening RPC '${t}' stream ${i} transport.`),d.open(),p=!0),st(Oe,`RPC '${t}' stream ${i} sending:`,v),d.send(v))},Zo:()=>d.close()}),w=(v,P,O)=>{v.listen(P,(k=>{try{O(k)}catch(x){setTimeout((()=>{throw x}),0)}}))};return w(d,bo.EventType.OPEN,(()=>{g||(st(Oe,`RPC '${t}' stream ${i} transport opened.`),b.o_())})),w(d,bo.EventType.CLOSE,(()=>{g||(g=!0,st(Oe,`RPC '${t}' stream ${i} transport closed`),b.a_(),this.E_(d))})),w(d,bo.EventType.ERROR,(v=>{g||(g=!0,kr(Oe,`RPC '${t}' stream ${i} transport errored. Name:`,v.name,"Message:",v.message),b.a_(new rt(W.UNAVAILABLE,"The operation could not be completed")))})),w(d,bo.EventType.MESSAGE,(v=>{if(!g){const P=v.data[0];Vt(!!P,16349);const O=P,k=O?.error||O[0]?.error;if(k){st(Oe,`RPC '${t}' stream ${i} received error:`,k);const x=k.status;let L=(function(_){const I=re[_];if(I!==void 0)return mb(I)})(x),U=k.message;L===void 0&&(L=W.INTERNAL,U="Unknown error status: "+x+" with message "+k.message),g=!0,b.a_(new rt(L,U)),d.close()}else st(Oe,`RPC '${t}' stream ${i} received:`,P),b.u_(P)}})),w(a,Mv.STAT_EVENT,(v=>{v.stat===bh.PROXY?st(Oe,`RPC '${t}' stream ${i} detected buffering proxy`):v.stat===bh.NOPROXY&&st(Oe,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function Lu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(e){return new BC(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(t,n,s=1e3,i=1.5,r=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=i,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-s);i>0&&st("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg="PersistentStream";class kb{constructor(t,n,s,i,r,o,a,l){this.Mi=t,this.S_=s,this.b_=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new xb(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(Cs(n.toString()),Cs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,i])=>{this.D_===n&&this.G_(s,i)}),(s=>{t((()=>{const i=new rt(W.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{s((()=>this.z_(i)))})),this.stream.onMessage((i=>{s((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return st(Jg,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(st(Jg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class LP extends kb{constructor(t,n,s,i,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=HC(this.serializer,t),s=(function(r){if(!("targetChange"in r))return _t.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?_t.min():o.readTime?Gn(o.readTime):_t.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=xh(this.serializer),n.addTarget=(function(r,o){let a;const l=o.target;if(a=Ah(l)?{documents:qC(r,l)}:{query:KC(r,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=vb(r,o.resumeToken);const u=Rh(r,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(_t.min())>0){a.readTime=$l(r,o.snapshotVersion.toTimestamp());const u=Rh(r,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,t);const s=YC(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=xh(this.serializer),n.removeTarget=t,this.q_(n)}}class FP extends kb{constructor(t,n,s,i,r,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Vt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Vt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Vt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=WC(t.writeResults,t.commitTime),s=Gn(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=xh(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>$C(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{}class BP extends UP{constructor(t,n,s,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new rt(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,o])=>this.connection.Go(t,Ch(n,s),i,r,o))).catch((r=>{throw r.name==="FirebaseError"?(r.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new rt(W.UNKNOWN,r.toString())}))}Ho(t,n,s,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(t,Ch(n,s),i,o,a,r))).catch((o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new rt(W.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class jP{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Cs(n),this.aa=!1):st("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki="RemoteStore";class zP{constructor(t,n,s,i,r){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{sr(this)&&(st(Ki,"Restarting streams for network reachability change."),await(async function(l){const u=yt(l);u.Ea.add(4),await Ea(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Bc(u)})(this))}))})),this.Ra=new jP(s,i)}}async function Bc(e){if(sr(e))for(const t of e.da)await t(!0)}async function Ea(e){for(const t of e.da)await t(!1)}function Db(e,t){const n=yt(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Fd(n)?Ld(n):Hr(n).O_()&&Vd(n,t))}function Nd(e,t){const n=yt(e),s=Hr(n);n.Ia.delete(t),s.O_()&&Ob(n,t),n.Ia.size===0&&(s.O_()?s.L_():sr(n)&&n.Ra.set("Unknown"))}function Vd(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(_t.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Hr(e).Y_(t)}function Ob(e,t){e.Va.Ue(t),Hr(e).Z_(t)}function Ld(e){e.Va=new VC({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Hr(e).start(),e.Ra.ua()}function Fd(e){return sr(e)&&!Hr(e).x_()&&e.Ia.size>0}function sr(e){return yt(e).Ea.size===0}function Mb(e){e.Va=void 0}async function HP(e){e.Ra.set("Online")}async function $P(e){e.Ia.forEach(((t,n)=>{Vd(e,t)}))}async function WP(e,t){Mb(e),Fd(e)?(e.Ra.ha(t),Ld(e)):e.Ra.set("Unknown")}async function qP(e,t,n){if(e.Ra.set("Online"),t instanceof yb&&t.state===2&&t.cause)try{await(async function(i,r){const o=r.cause;for(const a of r.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(e,t)}catch(s){st(Ki,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await ql(e,s)}else if(t instanceof _l?e.Va.Ze(t):t instanceof _b?e.Va.st(t):e.Va.tt(t),!n.isEqual(_t.min()))try{const s=await Pb(e.localStore);n.compareTo(s)>=0&&await(function(r,o){const a=r.Va.Tt(o);return a.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=r.Ia.get(u);h&&r.Ia.set(u,h.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,u)=>{const h=r.Ia.get(l);if(!h)return;r.Ia.set(l,h.withResumeToken(xe.EMPTY_BYTE_STRING,h.snapshotVersion)),Ob(r,l);const d=new Xs(h.target,l,u,h.sequenceNumber);Vd(r,d)})),r.remoteSyncer.applyRemoteEvent(a)})(e,n)}catch(s){st(Ki,"Failed to raise snapshot:",s),await ql(e,s)}}async function ql(e,t,n){if(!zr(t))throw t;e.Ea.add(1),await Ea(e),e.Ra.set("Offline"),n||(n=()=>Pb(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{st(Ki,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Bc(e)}))}function Nb(e,t){return t().catch((n=>ql(e,n,t)))}async function jc(e){const t=yt(e),n=yi(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:wd;for(;KP(t);)try{const i=await CP(t.localStore,s);if(i===null){t.Ta.length===0&&n.L_();break}s=i.batchId,GP(t,i)}catch(i){await ql(t,i)}Vb(t)&&Lb(t)}function KP(e){return sr(e)&&e.Ta.length<10}function GP(e,t){e.Ta.push(t);const n=yi(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Vb(e){return sr(e)&&!yi(e).x_()&&e.Ta.length>0}function Lb(e){yi(e).start()}async function YP(e){yi(e).ra()}async function QP(e){const t=yi(e);for(const n of e.Ta)t.ea(n.mutations)}async function XP(e,t,n){const s=e.Ta.shift(),i=Cd.from(s,t,n);await Nb(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await jc(e)}async function JP(e,t){t&&yi(e).X_&&await(async function(s,i){if((function(o){return OC(o)&&o!==W.ABORTED})(i.code)){const r=s.Ta.shift();yi(s).B_(),await Nb(s,(()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i))),await jc(s)}})(e,t),Vb(e)&&Lb(e)}async function Zg(e,t){const n=yt(e);n.asyncQueue.verifyOperationInProgress(),st(Ki,"RemoteStore received new credentials");const s=sr(n);n.Ea.add(3),await Ea(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Bc(n)}async function ZP(e,t){const n=yt(e);t?(n.Ea.delete(2),await Bc(n)):t||(n.Ea.add(2),await Ea(n),n.Ra.set("Unknown"))}function Hr(e){return e.ma||(e.ma=(function(n,s,i){const r=yt(n);return r.sa(),new LP(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)})(e.datastore,e.asyncQueue,{Xo:HP.bind(null,e),t_:$P.bind(null,e),r_:WP.bind(null,e),H_:qP.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),Fd(e)?Ld(e):e.Ra.set("Unknown")):(await e.ma.stop(),Mb(e))}))),e.ma}function yi(e){return e.fa||(e.fa=(function(n,s,i){const r=yt(n);return r.sa(),new FP(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)})(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:YP.bind(null,e),r_:JP.bind(null,e),ta:QP.bind(null,e),na:XP.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await jc(e)):(await e.fa.stop(),e.Ta.length>0&&(st(Ki,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(t,n,s,i,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new ws,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,i,r){const o=Date.now()+s,a=new Ud(t,n,o,i,r);return a.start(s),a}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new rt(W.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bd(e,t){if(Cs("AsyncQueue",`${t}: ${e}`),zr(e))return new rt(W.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{static emptySet(t){return new wr(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||lt.comparator(n.key,s.key):(n,s)=>lt.comparator(n.key,s.key),this.keyedMap=wo(),this.sortedSet=new Jt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof wr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new wr;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(){this.ga=new Jt(lt.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):pt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class Vr{constructor(t,n,s,i,r,o,a,l,u){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,n,s,i,r){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new Vr(t,n,wr.emptySet(n),o,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Mc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class ex{constructor(){this.queries=em(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const i=yt(n),r=i.queries;i.queries=em(),r.forEach(((o,a)=>{for(const l of a.Sa)l.onError(s)}))})(this,new rt(W.ABORTED,"Firestore shutting down"))}}function em(){return new er((e=>sb(e)),Mc)}async function Fb(e,t){const n=yt(e);let s=3;const i=t.query;let r=n.queries.get(i);r?!r.ba()&&t.Da()&&(s=2):(r=new tx,s=t.Da()?0:1);try{switch(s){case 0:r.wa=await n.onListen(i,!0);break;case 1:r.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Bd(o,`Initialization of query '${gr(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,r),r.Sa.push(t),t.va(n.onlineState),r.wa&&t.Fa(r.wa)&&jd(n)}async function Ub(e,t){const n=yt(e),s=t.query;let i=3;const r=n.queries.get(s);if(r){const o=r.Sa.indexOf(t);o>=0&&(r.Sa.splice(o,1),r.Sa.length===0?i=t.Da()?0:1:!r.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function nx(e,t){const n=yt(e);let s=!1;for(const i of t){const r=i.query,o=n.queries.get(r);if(o){for(const a of o.Sa)a.Fa(i)&&(s=!0);o.wa=i}}s&&jd(n)}function sx(e,t,n){const s=yt(e),i=s.queries.get(t);if(i)for(const r of i.Sa)r.onError(n);s.queries.delete(t)}function jd(e){e.Ca.forEach((t=>{t.next()}))}var Oh,nm;(nm=Oh||(Oh={})).Ma="default",nm.Cache="cache";class Bb{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const i of t.docChanges)i.type!==3&&s.push(i);t=new Vr(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Vr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Oh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(t){this.key=t}}class zb{constructor(t){this.key=t}}class ix{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Rt(),this.mutatedKeys=Rt(),this.eu=ib(t),this.tu=new wr(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new tm,i=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((h,d)=>{const p=i.get(h),g=Nc(this.query,d)?d:null,b=!!p&&this.mutatedKeys.has(p.key),w=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let v=!1;p&&g?p.data.isEqual(g.data)?b!==w&&(s.track({type:3,doc:g}),v=!0):this.su(p,g)||(s.track({type:2,doc:g}),v=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(a=!0)):!p&&g?(s.track({type:0,doc:g}),v=!0):p&&!g&&(s.track({type:1,doc:p}),v=!0,(l||u)&&(a=!0)),v&&(g?(o=o.add(g),r=w?r.add(h):r.delete(h)):(o=o.delete(h),r=r.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),r=r.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:r}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,i){const r=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort(((h,d)=>(function(g,b){const w=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt(20277,{Rt:v})}};return w(g)-w(b)})(h.type,d.type)||this.eu(h.doc,d.doc))),this.ou(s),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Vr(this.query,t.tu,r,o,t.mutatedKeys,l===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new tm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Rt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new zb(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new jb(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=Rt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Vr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const zd="SyncEngine";class rx{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class ox{constructor(t){this.key=t,this.hu=!1}}class ax{constructor(t,n,s,i,r,o){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new er((a=>sb(a)),Mc),this.Iu=new Map,this.Eu=new Set,this.du=new Jt(lt.comparator),this.Au=new Map,this.Ru=new kd,this.Vu={},this.mu=new Map,this.fu=Nr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function lx(e,t,n=!0){const s=Gb(e);let i;const r=s.Tu.get(t);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.lu()):i=await Hb(s,t,n,!0),i}async function cx(e,t){const n=Gb(e);await Hb(n,t,!0,!1)}async function Hb(e,t,n,s){const i=await PP(e.localStore,Kn(t)),r=i.targetId,o=e.sharedClientState.addLocalQueryTarget(r,n);let a;return s&&(a=await ux(e,t,r,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&Db(e.remoteStore,i),a}async function ux(e,t,n,s,i){e.pu=(d,p,g)=>(async function(w,v,P,O){let k=v.view.ru(P);k.Cs&&(k=await Gg(w.localStore,v.query,!1).then((({documents:T})=>v.view.ru(T,k))));const x=O&&O.targetChanges.get(v.targetId),L=O&&O.targetMismatches.get(v.targetId)!=null,U=v.view.applyChanges(k,w.isPrimaryClient,x,L);return im(w,v.targetId,U.au),U.snapshot})(e,d,p,g);const r=await Gg(e.localStore,t,!0),o=new ix(t,r.Qs),a=o.ru(r.documents),l=wa.createSynthesizedTargetChangeForCurrentChange(n,s&&e.onlineState!=="Offline",i),u=o.applyChanges(a,e.isPrimaryClient,l);im(e,n,u.au);const h=new rx(t,n,o);return e.Tu.set(t,h),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),u.snapshot}async function hx(e,t,n){const s=yt(e),i=s.Tu.get(t),r=s.Iu.get(i.targetId);if(r.length>1)return s.Iu.set(i.targetId,r.filter((o=>!Mc(o,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await kh(s.localStore,i.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(i.targetId),n&&Nd(s.remoteStore,i.targetId),Mh(s,i.targetId)})).catch(jr)):(Mh(s,i.targetId),await kh(s.localStore,i.targetId,!0))}async function dx(e,t){const n=yt(e),s=n.Tu.get(t),i=n.Iu.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Nd(n.remoteStore,s.targetId))}async function fx(e,t,n){const s=bx(e);try{const i=await(function(o,a){const l=yt(o),u=Gt.now(),h=a.reduce(((g,b)=>g.add(b.key)),Rt());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let b=Ps(),w=Rt();return l.Ns.getEntries(g,h).next((v=>{b=v,b.forEach(((P,O)=>{O.isValidDocument()||(w=w.add(P))}))})).next((()=>l.localDocuments.getOverlayedDocuments(g,b))).next((v=>{d=v;const P=[];for(const O of a){const k=CC(O,d.get(O.key).overlayedDocument);k!=null&&P.push(new nr(O.key,k,Qv(k.value.mapValue),Es.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,P,a)})).next((v=>{p=v;const P=v.applyToLocalDocumentSet(d,w);return l.documentOverlayCache.saveOverlays(g,v.batchId,P)}))})).then((()=>({batchId:p.batchId,changes:ob(d)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(i.batchId),(function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Jt(St)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u})(s,i.batchId,n),await Ta(s,i.changes),await jc(s.remoteStore)}catch(i){const r=Bd(i,"Failed to persist write");n.reject(r)}}async function $b(e,t){const n=yt(e);try{const s=await SP(n.localStore,t);t.targetChanges.forEach(((i,r)=>{const o=n.Au.get(r);o&&(Vt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Vt(o.hu,14607):i.removedDocuments.size>0&&(Vt(o.hu,42227),o.hu=!1))})),await Ta(n,s,t)}catch(s){await jr(s)}}function sm(e,t,n){const s=yt(e);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.Tu.forEach(((r,o)=>{const a=o.view.va(t);a.snapshot&&i.push(a.snapshot)})),(function(o,a){const l=yt(o);l.onlineState=a;let u=!1;l.queries.forEach(((h,d)=>{for(const p of d.Sa)p.va(a)&&(u=!0)})),u&&jd(l)})(s.eventManager,t),i.length&&s.Pu.H_(i),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function px(e,t,n){const s=yt(e);s.sharedClientState.updateQueryState(t,"rejected",n);const i=s.Au.get(t),r=i&&i.key;if(r){let o=new Jt(lt.comparator);o=o.insert(r,Fe.newNoDocument(r,_t.min()));const a=Rt().add(r),l=new Fc(_t.min(),new Map,new Jt(St),o,a);await $b(s,l),s.du=s.du.remove(r),s.Au.delete(t),Hd(s)}else await kh(s.localStore,t,!1).then((()=>Mh(s,t,n))).catch(jr)}async function gx(e,t){const n=yt(e),s=t.batch.batchId;try{const i=await AP(n.localStore,t);qb(n,s,null),Wb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Ta(n,i)}catch(i){await jr(i)}}async function mx(e,t,n){const s=yt(e);try{const i=await(function(o,a){const l=yt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next((d=>(Vt(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>l.localDocuments.getDocuments(u,h)))}))})(s.localStore,t);qb(s,t,n),Wb(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Ta(s,i)}catch(i){await jr(i)}}function Wb(e,t){(e.mu.get(t)||[]).forEach((n=>{n.resolve()})),e.mu.delete(t)}function qb(e,t,n){const s=yt(e);let i=s.Vu[s.currentUser.toKey()];if(i){const r=i.get(t);r&&(n?r.reject(n):r.resolve(),i=i.remove(t)),s.Vu[s.currentUser.toKey()]=i}}function Mh(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.Iu.get(t))e.Tu.delete(s),n&&e.Pu.yu(s,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((s=>{e.Ru.containsKey(s)||Kb(e,s)}))}function Kb(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Nd(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Hd(e))}function im(e,t,n){for(const s of n)s instanceof jb?(e.Ru.addReference(s.key,t),_x(e,s)):s instanceof zb?(st(zd,"Document no longer in limbo: "+s.key),e.Ru.removeReference(s.key,t),e.Ru.containsKey(s.key)||Kb(e,s.key)):pt(19791,{wu:s})}function _x(e,t){const n=t.key,s=n.path.canonicalString();e.du.get(n)||e.Eu.has(s)||(st(zd,"New document in limbo: "+n),e.Eu.add(s),Hd(e))}function Hd(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new lt(Kt.fromString(t)),s=e.fu.next();e.Au.set(s,new ox(n)),e.du=e.du.insert(n,s),Db(e.remoteStore,new Xs(Kn(Sd(n.path)),s,"TargetPurposeLimboResolution",xc.ce))}}async function Ta(e,t,n){const s=yt(e),i=[],r=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((a,l)=>{o.push(s.pu(l,t,n).then((u=>{if((u||n)&&s.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=Od.As(l.targetId,u);r.push(h)}})))})),await Promise.all(o),s.Pu.H_(i),await(async function(l,u){const h=yt(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>H.forEach(u,(p=>H.forEach(p.Es,(g=>h.persistence.referenceDelegate.addReference(d,p.targetId,g))).next((()=>H.forEach(p.ds,(g=>h.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))))))}catch(d){if(!zr(d))throw d;st(Md,"Failed to update sequence numbers: "+d)}for(const d of u){const p=d.targetId;if(!d.fromCache){const g=h.Ms.get(p),b=g.snapshotVersion,w=g.withLastLimboFreeSnapshotVersion(b);h.Ms=h.Ms.insert(p,w)}}})(s.localStore,r))}async function yx(e,t){const n=yt(e);if(!n.currentUser.isEqual(t)){st(zd,"User change. New user:",t.toKey());const s=await Cb(n.localStore,t);n.currentUser=t,(function(r,o){r.mu.forEach((a=>{a.forEach((l=>{l.reject(new rt(W.CANCELLED,o))}))})),r.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Ta(n,s.Ls)}}function vx(e,t){const n=yt(e),s=n.Au.get(t);if(s&&s.hu)return Rt().add(s.key);{let i=Rt();const r=n.Iu.get(t);if(!r)return i;for(const o of r){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function Gb(e){const t=yt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=$b.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=px.bind(null,t),t.Pu.H_=nx.bind(null,t.eventManager),t.Pu.yu=sx.bind(null,t.eventManager),t}function bx(e){const t=yt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=gx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=mx.bind(null,t),t}class Kl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Uc(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return IP(this.persistence,new wP,t.initialUser,this.serializer)}Cu(t){return new Rb(Dd.mi,this.serializer)}Du(t){return new kP}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kl.provider={build:()=>new Kl};class wx extends Kl{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Vt(this.persistence.referenceDelegate instanceof Wl,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new oP(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Je.withCacheSize(this.cacheSizeBytes):Je.DEFAULT;return new Rb((s=>Wl.mi(s,n)),this.serializer)}}class Nh{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>sm(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=yx.bind(null,this.syncEngine),await ZP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new ex})()}createDatastore(t){const n=Uc(t.databaseInfo.databaseId),s=(function(r){return new VP(r)})(t.databaseInfo);return(function(r,o,a,l){return new BP(r,o,a,l)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,i,r,o,a){return new zP(s,i,r,o,a)})(this.localStore,this.datastore,t.asyncQueue,(n=>sm(this.syncEngine,n,0)),(function(){return Xg.v()?new Xg:new DP})())}createSyncEngine(t,n){return(function(i,r,o,a,l,u,h){const d=new ax(i,r,o,a,l,u);return h&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=yt(n);st(Ki,"RemoteStore shutting down."),s.Ea.add(5),await Ea(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Nh.provider={build:()=>new Nh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Cs("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi="FirestoreClient";class Ex{constructor(t,n,s,i,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=Ne.UNAUTHENTICATED,this.clientId=vd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(s,(async o=>{st(vi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(st(vi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ws;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Bd(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function Fu(e,t){e.asyncQueue.verifyOperationInProgress(),st(vi,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener((async i=>{s.isEqual(i)||(await Cb(t.localStore,i),s=i)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function rm(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Tx(e);st(vi,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((s=>Zg(t.remoteStore,s))),e.setAppCheckTokenChangeListener(((s,i)=>Zg(t.remoteStore,i))),e._onlineComponents=t}async function Tx(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){st(vi,"Using user provided OfflineComponentProvider");try{await Fu(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(i){return i.name==="FirebaseError"?i.code===W.FAILED_PRECONDITION||i.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;kr("Error using user provided cache. Falling back to memory cache: "+n),await Fu(e,new Kl)}}else st(vi,"Using default OfflineComponentProvider"),await Fu(e,new wx(void 0));return e._offlineComponents}async function Qb(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(st(vi,"Using user provided OnlineComponentProvider"),await rm(e,e._uninitializedComponentsProvider._online)):(st(vi,"Using default OnlineComponentProvider"),await rm(e,new Nh))),e._onlineComponents}function Ix(e){return Qb(e).then((t=>t.syncEngine))}async function Xb(e){const t=await Qb(e),n=t.eventManager;return n.onListen=lx.bind(null,t.syncEngine),n.onUnlisten=hx.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=cx.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=dx.bind(null,t.syncEngine),n}function Ax(e,t,n={}){const s=new ws;return e.asyncQueue.enqueueAndForget((async()=>(function(r,o,a,l,u){const h=new Yb({next:p=>{h.Nu(),o.enqueueAndForget((()=>Ub(r,d)));const g=p.docs.has(a);!g&&p.fromCache?u.reject(new rt(W.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?u.reject(new rt(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),d=new Bb(Sd(a.path),h,{includeMetadataChanges:!0,qa:!0});return Fb(r,d)})(await Xb(e),e.asyncQueue,t,n,s))),s.promise}function Sx(e,t,n={}){const s=new ws;return e.asyncQueue.enqueueAndForget((async()=>(function(r,o,a,l,u){const h=new Yb({next:p=>{h.Nu(),o.enqueueAndForget((()=>Ub(r,d))),p.fromCache&&l.source==="server"?u.reject(new rt(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),d=new Bb(a,h,{includeMetadataChanges:!0,qa:!0});return Fb(r,d)})(await Xb(e),e.asyncQueue,t,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="firestore.googleapis.com",am=!0;class lm{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new rt(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Zb,this.ssl=am}else this.host=t.host,this.ssl=t.ssl??am;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Sb;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<iP)throw new rt(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}BR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Jb(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new rt(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new rt(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new rt(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,i){return s.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class zc{constructor(t,n,s,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new rt(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new rt(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lm(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new xR;switch(s.type){case"firstParty":return new MR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new rt(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=om.get(n);s&&(st("ComponentProvider","Removing Datastore"),om.delete(n),s.terminate())})(this),Promise.resolve()}}function Rx(e,t,n,s={}){e=qi(e,zc);const i=Ji(t),r=e._getSettings(),o={...r,emulatorOptions:e._getEmulatorOptions()},a=`${t}:${n}`;i&&(fd(`https://${a}`),pd("Firestore",!0)),r.host!==Zb&&r.host!==a&&kr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...r,host:a,ssl:i,emulatorOptions:s};if(!Hi(l,o)&&(e._setSettings(l),s.mockUserToken)){let u,h;if(typeof s.mockUserToken=="string")u=s.mockUserToken,h=Ne.MOCK_USER;else{u=Av(s.mockUserToken,e._app?.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new rt(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ne(d)}e._authCredentials=new kR(new Fv(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Hc(this.firestore,t,this._query)}}class pe{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new li(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new pe(this.firestore,t,this._key)}toJSON(){return{type:pe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(va(n,pe._jsonSchema))return new pe(t,s||null,new lt(Kt.fromString(n.referencePath)))}}pe._jsonSchemaVersion="firestore/documentReference/1.0",pe._jsonSchema={type:oe("string",pe._jsonSchemaVersion),referencePath:oe("string")};class li extends Hc{constructor(t,n,s){super(t,n,Sd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new pe(this.firestore,null,new lt(t))}withConverter(t){return new li(this.firestore,t,this._path)}}function Cx(e,t,...n){if(e=Qe(e),Uv("collection","path",t),e instanceof zc){const s=Kt.fromString(t,...n);return Eg(s),new li(e,null,s)}{if(!(e instanceof pe||e instanceof li))throw new rt(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Kt.fromString(t,...n));return Eg(s),new li(e.firestore,null,s)}}function Be(e,t,...n){if(e=Qe(e),arguments.length===1&&(t=vd.newId()),Uv("doc","path",t),e instanceof zc){const s=Kt.fromString(t,...n);return wg(s),new pe(e,null,new lt(s))}{if(!(e instanceof pe||e instanceof li))throw new rt(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Kt.fromString(t,...n));return wg(s),new pe(e.firestore,e instanceof li?e.converter:null,new lt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="AsyncQueue";class um{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new xb(this,"async_queue_retry"),this._c=()=>{const s=Lu();s&&st(cm,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=Lu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Lu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ws;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!zr(t))throw t;st(cm,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,Cs("INTERNAL UNHANDLED ERROR: ",hm(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const i=Ud.createAndSchedule(this,t,n,s,(r=>this.hc(r)));return this.tc.push(i),i}uc(){this.nc&&pt(47125,{Pc:hm(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function hm(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class $c extends zc{constructor(t,n,s,i){super(t,n,s,i),this.type="firestore",this._queue=new um,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new um(t),this._firestoreClient=void 0,await t}}}function Px(e,t){const n=typeof e=="object"?e:_d(),s=typeof e=="string"?e:Ul,i=Pc(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=Ev("firestore");r&&Rx(i,...r)}return i}function $d(e){if(e._terminated)throw new rt(W.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||xx(e),e._firestoreClient}function xx(e){const t=e._freezeSettings(),n=(function(i,r,o,a){return new XR(i,r,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,Jb(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Ex(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&(function(i){const r=i?._online.build();return{_offline:i?._offline.build(r),_online:r}})(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new gn(xe.fromBase64String(t))}catch(n){throw new rt(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new gn(xe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:gn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(va(t,gn._jsonSchema))return gn.fromBase64String(t.bytes)}}gn._jsonSchemaVersion="firestore/bytes/1.0",gn._jsonSchema={type:oe("string",gn._jsonSchemaVersion),bytes:oe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new rt(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ce(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new rt(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new rt(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return St(this._lat,t._lat)||St(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Yn._jsonSchemaVersion}}static fromJSON(t){if(va(t,Yn._jsonSchema))return new Yn(t.latitude,t.longitude)}}Yn._jsonSchemaVersion="firestore/geoPoint/1.0",Yn._jsonSchema={type:oe("string",Yn._jsonSchemaVersion),latitude:oe("number"),longitude:oe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,i){if(s.length!==i.length)return!1;for(let r=0;r<s.length;++r)if(s[r]!==i[r])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Qn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(va(t,Qn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Qn(t.vectorValues);throw new rt(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qn._jsonSchemaVersion="firestore/vectorValue/1.0",Qn._jsonSchema={type:oe("string",Qn._jsonSchemaVersion),vectorValues:oe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=/^__.*__$/;class Dx{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new nr(t,this.data,this.fieldMask,n,this.fieldTransforms):new ba(t,this.data,n,this.fieldTransforms)}}function tw(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt(40011,{Ac:e})}}class Kd{constructor(t,n,s,i,r,o){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Kd({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Gl(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(tw(this.Ac)&&kx.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Ox{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Uc(t)}Cc(t,n,s,i=!1){return new Kd({Ac:t,methodName:n,Dc:s,path:Ce.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mx(e){const t=e._freezeSettings(),n=Uc(e._databaseId);return new Ox(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Nx(e,t,n,s,i,r={}){const o=e.Cc(r.merge||r.mergeFields?2:0,t,n,i);iw("Data must be an object, but it was:",o,s);const a=nw(s,o);let l,u;if(r.merge)l=new Tn(o.fieldMask),u=o.fieldTransforms;else if(r.mergeFields){const h=[];for(const d of r.mergeFields){const p=Vx(t,d,n);if(!o.contains(p))throw new rt(W.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Fx(h,p)||h.push(p)}l=new Tn(h),u=o.fieldTransforms.filter((d=>l.covers(d.field)))}else l=null,u=o.fieldTransforms;return new Dx(new pn(a),l,u)}class Gd extends qd{_toFieldTransform(t){return new IC(t.path,new ia)}isEqual(t){return t instanceof Gd}}function ew(e,t){if(sw(e=Qe(e)))return iw("Unsupported field value:",t,e),nw(e,t);if(e instanceof qd)return(function(s,i){if(!tw(i.Ac))throw i.Sc(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,i){const r=[];let o=0;for(const a of s){let l=ew(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}})(e,t)}return(function(s,i){if((s=Qe(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return wC(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=Gt.fromDate(s);return{timestampValue:$l(i.serializer,r)}}if(s instanceof Gt){const r=new Gt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:$l(i.serializer,r)}}if(s instanceof Yn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof gn)return{bytesValue:vb(i.serializer,s._byteString)};if(s instanceof pe){const r=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(r))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:xd(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof Qn)return(function(o,a){return{mapValue:{fields:{[Gv]:{stringValue:Yv},[Bl]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return Rd(a.serializer,u)}))}}}}}})(s,i);throw i.Sc(`Unsupported field value: ${bd(s)}`)})(e,t)}function nw(e,t){const n={};return zv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):tr(e,((s,i)=>{const r=ew(i,t.mc(s));r!=null&&(n[s]=r)})),{mapValue:{fields:n}}}function sw(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Gt||e instanceof Yn||e instanceof gn||e instanceof pe||e instanceof qd||e instanceof Qn)}function iw(e,t,n){if(!sw(n)||!Bv(n)){const s=bd(n);throw s==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+s)}}function Vx(e,t,n){if((t=Qe(t))instanceof Wd)return t._internalPath;if(typeof t=="string")return rw(e,t);throw Gl("Field path arguments must be of type string or ",e,!1,void 0,n)}const Lx=new RegExp("[~\\*/\\[\\]]");function rw(e,t,n){if(t.search(Lx)>=0)throw Gl(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Wd(...t.split("."))._internalPath}catch{throw Gl(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Gl(e,t,n,s,i){const r=s&&!s.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${s}`),o&&(l+=` in document ${i}`),l+=")"),new rt(W.INVALID_ARGUMENT,a+e+l)}function Fx(e,t){return e.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(t,n,s,i,r){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Ux(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(aw("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Ux extends ow{data(){return super.data()}}function aw(e,t){return typeof t=="string"?rw(e,t):t instanceof Wd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new rt(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jx{convertValue(t,n="none"){switch(_i(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ne(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(mi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw pt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return tr(t,((i,r)=>{s[i]=this.convertValue(r,n)})),s}convertVectorValue(t){const n=t.fields?.[Bl].arrayValue?.values?.map((s=>ne(s.doubleValue)));return new Qn(n)}convertGeoPoint(t){return new Yn(ne(t.latitude),ne(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=Dc(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ea(t));default:return null}}convertTimestamp(t){const n=gi(t);return new Gt(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=Kt.fromString(t);Vt(Ab(s),9688,{name:t});const i=new na(s.get(1),s.get(3)),r=new lt(s.popFirst(5));return i.isEqual(n)||Cs(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(e,t,n){let s;return s=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,s}class To{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ui extends ow{constructor(t,n,s,i,r,o){super(t,n,s,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new yl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(aw("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new rt(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Ui._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ui._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ui._jsonSchema={type:oe("string",Ui._jsonSchemaVersion),bundleSource:oe("string","DocumentSnapshot"),bundleName:oe("string"),bundle:oe("string")};class yl extends Ui{data(t={}){return super.data(t)}}class Er{constructor(t,n,s,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new To(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new yl(this._firestore,this._userDataWriter,s.key,s,new To(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new rt(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((a=>{const l=new yl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new To(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>r||a.type!==3)).map((a=>{const l=new yl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new To(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Hx(a.type),doc:l,oldIndex:u,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new rt(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Er._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=vd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],i=[];return this.docs.forEach((r=>{r._document!==null&&(n.push(r._document),s.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),i.push(r.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Hx(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(e){e=qi(e,pe);const t=qi(e.firestore,$c);return Ax($d(t),e._key).then((n=>qx(t,e,n)))}Er._jsonSchemaVersion="firestore/querySnapshot/1.0",Er._jsonSchema={type:oe("string",Er._jsonSchemaVersion),bundleSource:oe("string","QuerySnapshot"),bundleName:oe("string"),bundle:oe("string")};class lw extends jx{constructor(t){super(),this.firestore=t}convertBytes(t){return new gn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new pe(this.firestore,null,n)}}function $x(e){e=qi(e,Hc);const t=qi(e.firestore,$c),n=$d(t),s=new lw(t);return Bx(e._query),Sx(n,e._query).then((i=>new Er(t,s,e,i)))}function Cn(e,t,n){e=qi(e,pe);const s=qi(e.firestore,$c),i=zx(e.converter,t,n);return Wx(s,[Nx(Mx(s),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Es.none())])}function Wx(e,t){return(function(s,i){const r=new ws;return s.asyncQueue.enqueueAndForget((async()=>fx(await Ix(s),i,r))),r.promise})($d(e),t)}function qx(e,t,n){const s=n.docs.get(t._key),i=new lw(e);return new Ui(e,i,t._key,s,new To(n.hasPendingWrites,n.fromCache),t.converter)}function Xn(){return new Gd("serverTimestamp")}(function(t,n=!0){(function(i){Br=i})(Zi),$i(new fi("firestore",((s,{instanceIdentifier:i,options:r})=>{const o=s.getProvider("app").getImmediate(),a=new $c(new DR(s.getProvider("auth-internal")),new NR(o,s.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new rt(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new na(u.options.projectId,h)})(o,i),o);return r={useFetchStreams:n,...r},a._setSettings(r),a}),"PUBLIC").setMultipleInstances(!0)),qn(_g,yg,t),qn(_g,yg,"esm2020")})();var Kx="firebase",Gx="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qn(Kx,Gx,"app");function cw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Yx=cw,uw=new _a("auth","Firebase",cw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=new gd("@firebase/auth");function Qx(e,...t){Yl.logLevel<=At.WARN&&Yl.warn(`Auth (${Zi}): ${e}`,...t)}function vl(e,...t){Yl.logLevel<=At.ERROR&&Yl.error(`Auth (${Zi}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(e,...t){throw Qd(e,...t)}function Pn(e,...t){return Qd(e,...t)}function Yd(e,t,n){const s={...Yx(),[t]:n};return new _a("auth","Firebase",s).create(t,{appName:e.name})}function Ts(e){return Yd(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hw(e,t,n){const s=n;if(!(t instanceof s))throw s.name!==t.constructor.name&&bn(e,"argument-error"),Yd(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qd(e,...t){if(typeof e!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=e.name),e._errorFactory.create(n,...s)}return uw.create(e,...t)}function ft(e,t,...n){if(!e)throw Qd(t,...n)}function ys(e){const t="INTERNAL ASSERTION FAILED: "+e;throw vl(t),new Error(t)}function xs(e,t){e||ys(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(){return typeof self<"u"&&self.location?.href||""}function Xx(){return dm()==="http:"||dm()==="https:"}function dm(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Xx()||cS()||"connection"in navigator)?navigator.onLine:!0}function Zx(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(t,n){this.shortDelay=t,this.longDelay=n,xs(n>t,"Short delay should be less than long delay!"),this.isMobile=oS()||uS()}get(){return Jx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(e,t){xs(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ys("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ys("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ys("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nk=new Ia(3e4,6e4);function Os(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Ms(e,t,n,s,i={}){return fw(e,i,async()=>{let r={},o={};s&&(t==="GET"?o=s:r={body:JSON.stringify(s)});const a=ya({key:e.config.apiKey,...o}).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:l,...r};return lS()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&Ji(e.emulatorConfig.host)&&(u.credentials="include"),dw.fetch()(await pw(e,e.config.apiHost,n,a),u)})}async function fw(e,t,n){e._canInitEmulator=!1;const s={...tk,...t};try{const i=new ik(e),r=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Ya(e,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ya(e,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ya(e,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ya(e,"user-disabled",o);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Yd(e,h,u);bn(e,h)}}catch(i){if(i instanceof rs)throw i;bn(e,"network-request-failed",{message:String(i)})}}async function Aa(e,t,n,s,i={}){const r=await Ms(e,t,n,s,i);return"mfaPendingCredential"in r&&bn(e,"multi-factor-auth-required",{_serverResponse:r}),r}async function pw(e,t,n,s){const i=`${t}${n}?${s}`,r=e,o=r.config.emulator?Xd(e.config,i):`${e.config.apiScheme}://${i}`;return ek.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}function sk(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ik{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Pn(this.auth,"network-request-failed")),nk.get())})}}function Ya(e,t,n){const s={appName:e.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=Pn(e,t,s);return i.customData._tokenResponse=n,i}function fm(e){return e!==void 0&&e.enterprise!==void 0}class rk{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return sk(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ok(e,t){return Ms(e,"GET","/v2/recaptchaConfig",Os(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ak(e,t){return Ms(e,"POST","/v1/accounts:delete",t)}async function Ql(e,t){return Ms(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function lk(e,t=!1){const n=Qe(e),s=await n.getIdToken(t),i=Jd(s);ft(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r?.sign_in_provider;return{claims:i,token:s,authTime:zo(Uu(i.auth_time)),issuedAtTime:zo(Uu(i.iat)),expirationTime:zo(Uu(i.exp)),signInProvider:o||null,signInSecondFactor:r?.sign_in_second_factor||null}}function Uu(e){return Number(e)*1e3}function Jd(e){const[t,n,s]=e.split(".");if(t===void 0||n===void 0||s===void 0)return vl("JWT malformed, contained fewer than 3 sections"),null;try{const i=bv(n);return i?JSON.parse(i):(vl("Failed to decode base64 JWT payload"),null)}catch(i){return vl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function pm(e){const t=Jd(e);return ft(t,"internal-error"),ft(typeof t.exp<"u","internal-error"),ft(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(e,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof rs&&ck(s)&&e.auth.currentUser===e&&await e.auth.signOut(),s}}function ck({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zo(this.lastLoginAt),this.creationTime=zo(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xl(e){const t=e.auth,n=await e.getIdToken(),s=await aa(e,Ql(t,{idToken:n}));ft(s?.users.length,t,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const r=i.providerUserInfo?.length?gw(i.providerUserInfo):[],o=dk(e.providerData,r),a=e.isAnonymous,l=!(e.email&&i.passwordHash)&&!o?.length,u=a?l:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Lh(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(e,h)}async function hk(e){const t=Qe(e);await Xl(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function dk(e,t){return[...e.filter(s=>!t.some(i=>i.providerId===s.providerId)),...t]}function gw(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fk(e,t){const n=await fw(e,{},async()=>{const s=ya({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,o=await pw(e,i,"/v1/token",`key=${r}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return e.emulatorConfig&&Ji(e.emulatorConfig.host)&&(l.credentials="include"),dw.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pk(e,t){return Ms(e,"POST","/v2/accounts:revokeToken",Os(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ft(t.idToken,"internal-error"),ft(typeof t.idToken<"u","internal-error"),ft(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):pm(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){ft(t.length!==0,"internal-error");const n=pm(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ft(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:i,expiresIn:r}=await fk(t,n);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:i,expirationTime:r}=n,o=new Tr;return s&&(ft(typeof s=="string","internal-error",{appName:t}),o.refreshToken=s),i&&(ft(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),r&&(ft(typeof r=="number","internal-error",{appName:t}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Tr,this.toJSON())}_performRefresh(){return ys("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(e,t){ft(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class In{constructor({uid:t,auth:n,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new uk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Lh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const n=await aa(this,this.stsTokenManager.getToken(this.auth,t));return ft(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return lk(this,t)}reload(){return hk(this)}_assign(t){this!==t&&(ft(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new In({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){ft(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await Xl(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ze(this.auth.app))return Promise.reject(Ts(this.auth));const t=await this.getIdToken();return await aa(this,ak(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,i=n.email??void 0,r=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:p,isAnonymous:g,providerData:b,stsTokenManager:w}=n;ft(d&&w,t,"internal-error");const v=Tr.fromJSON(this.name,w);ft(typeof d=="string",t,"internal-error"),Hs(s,t.name),Hs(i,t.name),ft(typeof p=="boolean",t,"internal-error"),ft(typeof g=="boolean",t,"internal-error"),Hs(r,t.name),Hs(o,t.name),Hs(a,t.name),Hs(l,t.name),Hs(u,t.name),Hs(h,t.name);const P=new In({uid:d,auth:t,email:i,emailVerified:p,displayName:s,isAnonymous:g,photoURL:o,phoneNumber:r,tenantId:a,stsTokenManager:v,createdAt:u,lastLoginAt:h});return b&&Array.isArray(b)&&(P.providerData=b.map(O=>({...O}))),l&&(P._redirectEventId=l),P}static async _fromIdTokenResponse(t,n,s=!1){const i=new Tr;i.updateFromServerResponse(n);const r=new In({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:s});return await Xl(r),r}static async _fromGetAccountInfoResponse(t,n,s){const i=n.users[0];ft(i.localId!==void 0,"internal-error");const r=i.providerUserInfo!==void 0?gw(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!r?.length,a=new Tr;a.updateFromIdToken(s);const l=new In({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new Lh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!r?.length};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm=new Map;function vs(e){xs(e instanceof Function,"Expected a class definition");let t=gm.get(e);return t?(xs(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,gm.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}mw.type="NONE";const mm=mw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(e,t,n){return`firebase:${e}:${t}:${n}`}class Ir{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=bl(this.userKey,i.apiKey,r),this.fullPersistenceKey=bl("persistence",i.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Ql(this.auth,{idToken:t}).catch(()=>{});return n?In._fromGetAccountInfoResponse(this.auth,n,t):null}return In._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new Ir(vs(mm),t,s);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let r=i[0]||vs(mm);const o=bl(s,t.config.apiKey,t.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const p=await Ql(t,{idToken:h}).catch(()=>{});if(!p)break;d=await In._fromGetAccountInfoResponse(t,p,h)}else d=In._fromJSON(t,h);u!==r&&(a=d),r=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new Ir(r,t,s):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==r)try{await u._remove(o)}catch{}})),new Ir(r,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(bw(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(_w(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ew(t))return"Blackberry";if(Tw(t))return"Webos";if(yw(t))return"Safari";if((t.includes("chrome/")||vw(t))&&!t.includes("edge/"))return"Chrome";if(ww(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=e.match(n);if(s?.length===2)return s[1]}return"Other"}function _w(e=He()){return/firefox\//i.test(e)}function yw(e=He()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function vw(e=He()){return/crios\//i.test(e)}function bw(e=He()){return/iemobile/i.test(e)}function ww(e=He()){return/android/i.test(e)}function Ew(e=He()){return/blackberry/i.test(e)}function Tw(e=He()){return/webos/i.test(e)}function Zd(e=He()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function gk(e=He()){return Zd(e)&&!!window.navigator?.standalone}function mk(){return hS()&&document.documentMode===10}function Iw(e=He()){return Zd(e)||ww(e)||Tw(e)||Ew(e)||/windows phone/i.test(e)||bw(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(e,t=[]){let n;switch(e){case"Browser":n=_m(He());break;case"Worker":n=`${_m(He())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Zi}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=r=>new Promise((o,a)=>{try{const l=t(r);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yk(e,t={}){return Ms(e,"GET","/v2/passwordPolicy",Os(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=6;class bk{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??vk,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<t.length;i++)s=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(t,n,s,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ym(this),this.idTokenSubscription=new ym(this),this.beforeStateQueue=new _k(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=vs(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ir.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Ql(this,{idToken:t}),s=await In._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Ze(this.app)){const r=this.app.settings.authIdToken;return r?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(r).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(t);(!r||r===o)&&a?.user&&(s=a.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(r){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(r))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ft(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Xl(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Zx()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ze(this.app))return Promise.reject(Ts(this));const n=t?Qe(t):null;return n&&ft(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&ft(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ze(this.app)?Promise.reject(Ts(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ze(this.app)?Promise.reject(Ts(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vs(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await yk(this),n=new bk(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new _a("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await pk(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&vs(t)||this._popupRedirectResolver;ft(n,this,"argument-error"),this.redirectPersistenceManager=await Ir.create(this,[vs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,i){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ft(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const l=t.addObserver(n,s,i);return()=>{o=!0,l()}}else{const l=t.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ft(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Aw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(Ze(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&Qx(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Ns(e){return Qe(e)}class ym{constructor(t){this.auth=t,this.observer=null,this.addObserver=vS(n=>this.observer=n)}get next(){return ft(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ek(e){Wc=e}function Sw(e){return Wc.loadJS(e)}function Tk(){return Wc.recaptchaEnterpriseScript}function Ik(){return Wc.gapiScript}function Ak(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class Sk{constructor(){this.enterprise=new Rk}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class Rk{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const Ck="recaptcha-enterprise",Rw="NO_RECAPTCHA";class Pk{constructor(t){this.type=Ck,this.auth=Ns(t)}async verify(t="verify",n=!1){async function s(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{ok(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new rk(l);return r.tenantId==null?r._agentRecaptchaConfig=u:r._tenantRecaptchaConfigs[r.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(r,o,a){const l=window.grecaptcha;fm(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:t}).then(u=>{o(u)}).catch(()=>{o(Rw)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Sk().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{s(this.auth).then(a=>{if(!n&&fm(window.grecaptcha))i(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Tk();l.length!==0&&(l+=a),Sw(l).then(()=>{i(a,r,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function vm(e,t,n,s=!1,i=!1){const r=new Pk(e);let o;if(i)o=Rw;else try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const a={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Jl(e,t,n,s,i){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await vm(e,t,n,n==="getOobCode");return s(e,r)}else return s(e,t).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await vm(e,t,n,n==="getOobCode");return s(e,o)}else return Promise.reject(r)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(e,t){const n=Pc(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),r=n.getOptions();if(Hi(r,t??{}))return i;bn(i,"already-initialized")}return n.initialize({options:t})}function kk(e,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(vs);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(s,t?.popupRedirectResolver)}function Dk(e,t,n){const s=Ns(e);ft(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const i=!1,r=Cw(t),{host:o,port:a}=Ok(t),l=a===null?"":`:${a}`,u={url:`${r}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){ft(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ft(Hi(u,s.config.emulator)&&Hi(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,Ji(o)?(fd(`${r}//${o}${l}`),pd("Auth",!0)):Mk()}function Cw(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ok(e){const t=Cw(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:bm(s.substr(r.length+1))}}else{const[r,o]=s.split(":");return{host:r,port:bm(o)}}}function bm(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Mk(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ys("not implemented")}_getIdTokenResponse(t){return ys("not implemented")}_linkToIdToken(t,n){return ys("not implemented")}_getReauthenticationResolver(t){return ys("not implemented")}}async function Nk(e,t){return Ms(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vk(e,t){return Aa(e,"POST","/v1/accounts:signInWithPassword",Os(e,t))}async function Lk(e,t){return Ms(e,"POST","/v1/accounts:sendOobCode",Os(e,t))}async function Fk(e,t){return Lk(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uk(e,t){return Aa(e,"POST","/v1/accounts:signInWithEmailLink",Os(e,t))}async function Bk(e,t){return Aa(e,"POST","/v1/accounts:signInWithEmailLink",Os(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends tf{constructor(t,n,s,i=null){super("password",s),this._email=t,this._password=n,this._tenantId=i}static _fromEmailAndPassword(t,n){return new la(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new la(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jl(t,n,"signInWithPassword",Vk);case"emailLink":return Uk(t,{email:this._email,oobCode:this._password});default:bn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jl(t,s,"signUpPassword",Nk);case"emailLink":return Bk(t,{idToken:n,email:this._email,oobCode:this._password});default:bn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ar(e,t){return Aa(e,"POST","/v1/accounts:signInWithIdp",Os(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="http://localhost";class Gi extends tf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Gi(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:i,...r}=n;if(!s||!i)return null;const o=new Gi(s,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Ar(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,Ar(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Ar(t,n)}buildRequest(){const t={requestUri:jk,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=ya(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Hk(e){const t=yo(vo(e)).link,n=t?yo(vo(t)).deep_link_id:null,s=yo(vo(e)).deep_link_id;return(s?yo(vo(s)).link:null)||s||n||t||e}class ef{constructor(t){const n=yo(vo(t)),s=n.apiKey??null,i=n.oobCode??null,r=zk(n.mode??null);ft(s&&i&&r,"argument-error"),this.apiKey=s,this.operation=r,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=Hk(t);try{return new ef(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(){this.providerId=$r.PROVIDER_ID}static credential(t,n){return la._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=ef.parseLink(n);return ft(s,"argument-error"),la._fromEmailAndCode(t,s.code,s.tenantId)}}$r.PROVIDER_ID="password";$r.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$r.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends qc{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends Sa{constructor(){super("facebook.com")}static credential(t){return Gi._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Gs.credentialFromTaggedObject(t)}static credentialFromError(t){return Gs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Gs.credential(t.oauthAccessToken)}catch{return null}}}Gs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends Sa{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Gi._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return _s.credentialFromTaggedObject(t)}static credentialFromError(t){return _s.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return _s.credential(n,s)}catch{return null}}}_s.GOOGLE_SIGN_IN_METHOD="google.com";_s.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys extends Sa{constructor(){super("github.com")}static credential(t){return Gi._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ys.credentialFromTaggedObject(t)}static credentialFromError(t){return Ys.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ys.credential(t.oauthAccessToken)}catch{return null}}}Ys.GITHUB_SIGN_IN_METHOD="github.com";Ys.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends Sa{constructor(){super("twitter.com")}static credential(t,n){return Gi._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Qs.credentialFromTaggedObject(t)}static credentialFromError(t){return Qs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Qs.credential(n,s)}catch{return null}}}Qs.TWITTER_SIGN_IN_METHOD="twitter.com";Qs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $k(e,t){return Aa(e,"POST","/v1/accounts:signUp",Os(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,i=!1){const r=await In._fromIdTokenResponse(t,s,i),o=wm(s);return new Yi({user:r,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const i=wm(s);return new Yi({user:t,providerId:i,_tokenResponse:s,operationType:n})}}function wm(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl extends rs{constructor(t,n,s,i){super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Zl.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,i){return new Zl(t,n,s,i)}}function Pw(e,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Zl._fromErrorAndOperation(e,r,t,s):r})}async function Wk(e,t,n=!1){const s=await aa(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Yi._forOperation(e,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qk(e,t,n=!1){const{auth:s}=e;if(Ze(s.app))return Promise.reject(Ts(s));const i="reauthenticate";try{const r=await aa(e,Pw(s,i,t,e),n);ft(r.idToken,s,"internal-error");const o=Jd(r.idToken);ft(o,s,"internal-error");const{sub:a}=o;return ft(e.uid===a,s,"user-mismatch"),Yi._forOperation(e,i,r)}catch(r){throw r?.code==="auth/user-not-found"&&bn(s,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xw(e,t,n=!1){if(Ze(e.app))return Promise.reject(Ts(e));const s="signIn",i=await Pw(e,s,t),r=await Yi._fromIdTokenResponse(e,s,i);return n||await e._updateCurrentUser(r.user),r}async function Kk(e,t){return xw(Ns(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kw(e){const t=Ns(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Gk(e,t,n){const s=Ns(e);await Jl(s,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Fk)}async function Yk(e,t,n){if(Ze(e.app))return Promise.reject(Ts(e));const s=Ns(e),o=await Jl(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$k).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&kw(e),l}),a=await Yi._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function Qk(e,t,n){return Ze(e.app)?Promise.reject(Ts(e)):Kk(Qe(e),$r.credential(t,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&kw(e),s})}function Xk(e,t,n,s){return Qe(e).onIdTokenChanged(t,n,s)}function Jk(e,t,n){return Qe(e).beforeAuthStateChanged(t,n)}function Zk(e){return Qe(e).signOut()}const tc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(tc,"1"),this.storage.removeItem(tc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=1e3,e1=10;class Ow extends Dw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Iw(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&t(n,i,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},r=this.storage.getItem(s);mk()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,e1):i()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},t1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}Ow.type="LOCAL";const n1=Ow;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw extends Dw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}Mw.type="SESSION";const Nw=Mw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const s=new Kc(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:i,data:r}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,r)),l=await s1(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:l})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(e="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const u=nf("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(p.data.response);break;default:clearTimeout(h),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(){return window}function r1(e){Jn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(){return typeof Jn().WorkerGlobalScope<"u"&&typeof Jn().importScripts=="function"}async function o1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function a1(){return navigator?.serviceWorker?.controller||null}function l1(){return Vw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="firebaseLocalStorageDb",c1=1,ec="firebaseLocalStorage",Fw="fbase_key";class Ra{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Gc(e,t){return e.transaction([ec],t?"readwrite":"readonly").objectStore(ec)}function u1(){const e=indexedDB.deleteDatabase(Lw);return new Ra(e).toPromise()}function Fh(){const e=indexedDB.open(Lw,c1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const s=e.result;try{s.createObjectStore(ec,{keyPath:Fw})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const s=e.result;s.objectStoreNames.contains(ec)?t(s):(s.close(),await u1(),t(await Fh()))})})}async function Em(e,t,n){const s=Gc(e,!0).put({[Fw]:t,value:n});return new Ra(s).toPromise()}async function h1(e,t){const n=Gc(e,!1).get(t),s=await new Ra(n).toPromise();return s===void 0?null:s.value}function Tm(e,t){const n=Gc(e,!0).delete(t);return new Ra(n).toPromise()}const d1=800,f1=3;class Uw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fh(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>f1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kc._getInstance(l1()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await o1(),!this.activeServiceWorker)return;this.sender=new i1(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||a1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Fh();return await Em(t,tc,"1"),await Tm(t,tc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Em(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>h1(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Tm(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const r=Gc(i,!1).getAll();return new Ra(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:i,value:r}of t)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),d1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Uw.type="LOCAL";const p1=Uw;new Ia(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(e,t){return t?vs(t):(ft(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf extends tf{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ar(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Ar(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Ar(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function g1(e){return xw(e.auth,new rf(e),e.bypassAuthState)}function m1(e){const{auth:t,user:n}=e;return ft(n,t,"internal-error"),qk(n,new rf(e),e.bypassAuthState)}async function _1(e){const{auth:t,user:n}=e;return ft(n,t,"internal-error"),Wk(n,new rf(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(t,n,s,i,r=!1){this.auth=t,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:i,tenantId:r,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return g1;case"linkViaPopup":case"linkViaRedirect":return _1;case"reauthViaPopup":case"reauthViaRedirect":return m1;default:bn(this.auth,"internal-error")}}resolve(t){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=new Ia(2e3,1e4);async function v1(e,t,n){if(Ze(e.app))return Promise.reject(Pn(e,"operation-not-supported-in-this-environment"));const s=Ns(e);hw(e,t,qc);const i=sf(s,n);return new Js(s,"signInViaPopup",t,i).executeNotNull()}async function b1(e,t,n){const s=Qe(e);hw(s.auth,t,qc);const i=sf(s.auth,n);return new Js(s.auth,"linkViaPopup",t,i,s).executeNotNull()}class Js extends Bw{constructor(t,n,s,i,r){super(t,n,i,r),this.provider=s,this.authWindow=null,this.pollId=null,Js.currentPopupAction&&Js.currentPopupAction.cancel(),Js.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return ft(t,this.auth,"internal-error"),t}async onExecution(){xs(this.filter.length===1,"Popup operations only handle one event");const t=nf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Js.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,y1.get())};t()}}Js.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="pendingRedirect",wl=new Map;class E1 extends Bw{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=wl.get(this.auth._key());if(!t){try{const s=await T1(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}wl.set(this.auth._key(),t)}return this.bypassAuthState||wl.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function T1(e,t){const n=S1(t),s=A1(e);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function I1(e,t){wl.set(e._key(),t)}function A1(e){return vs(e._redirectPersistence)}function S1(e){return bl(w1,e.config.apiKey,e.name)}async function R1(e,t,n=!1){if(Ze(e.app))return Promise.reject(Ts(e));const s=Ns(e),i=sf(s,t),o=await new E1(s,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=600*1e3;class P1{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!x1(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!jw(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Pn(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=C1&&this.cachedEventUids.clear(),this.cachedEventUids.has(Im(t))}saveEventToCache(t){this.cachedEventUids.add(Im(t)),this.lastProcessedEventTime=Date.now()}}function Im(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function jw({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function x1(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jw(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k1(e,t={}){return Ms(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,O1=/^https?/;async function M1(e){if(e.config.emulator)return;const{authorizedDomains:t}=await k1(e);for(const n of t)try{if(N1(n))return}catch{}bn(e,"unauthorized-domain")}function N1(e){const t=Vh(),{protocol:n,hostname:s}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&s===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!O1.test(n))return!1;if(D1.test(e))return s===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=new Ia(3e4,6e4);function Am(){const e=Jn().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function L1(e){return new Promise((t,n)=>{function s(){Am(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Am(),n(Pn(e,"network-request-failed"))},timeout:V1.get()})}if(Jn().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Jn().gapi?.load)s();else{const i=Ak("iframefcb");return Jn()[i]=()=>{gapi.load?s():n(Pn(e,"network-request-failed"))},Sw(`${Ik()}?onload=${i}`).catch(r=>n(r))}}).catch(t=>{throw El=null,t})}let El=null;function F1(e){return El=El||L1(e),El}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1=new Ia(5e3,15e3),B1="__/auth/iframe",j1="emulator/auth/iframe",z1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},H1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $1(e){const t=e.config;ft(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Xd(t,j1):`https://${e.config.authDomain}/${B1}`,s={apiKey:t.apiKey,appName:e.name,v:Zi},i=H1.get(e.config.apiHost);i&&(s.eid=i);const r=e._getFrameworks();return r.length&&(s.fw=r.join(",")),`${n}?${ya(s).slice(1)}`}async function W1(e){const t=await F1(e),n=Jn().gapi;return ft(n,e,"internal-error"),t.open({where:document.body,url:$1(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:z1,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const o=Pn(e,"network-request-failed"),a=Jn().setTimeout(()=>{r(o)},U1.get());function l(){Jn().clearTimeout(a),i(s)}s.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},K1=500,G1=600,Y1="_blank",Q1="http://localhost";class Sm{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function X1(e,t,n,s=K1,i=G1){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...q1,width:s.toString(),height:i.toString(),top:r,left:o},u=He().toLowerCase();n&&(a=vw(u)?Y1:n),_w(u)&&(t=t||Q1,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,b])=>`${p}${g}=${b},`,"");if(gk(u)&&a!=="_self")return J1(t||"",a),new Sm(null);const d=window.open(t||"",a,h);ft(d,e,"popup-blocked");try{d.focus()}catch{}return new Sm(d)}function J1(e,t){const n=document.createElement("a");n.href=e,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="__/auth/handler",tD="emulator/auth/handler",eD=encodeURIComponent("fac");async function Rm(e,t,n,s,i,r){ft(e.config.authDomain,e,"auth-domain-config-required"),ft(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:Zi,eventId:i};if(t instanceof qc){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",yS(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(t instanceof Sa){const h=t.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await e._getAppCheckToken(),u=l?`#${eD}=${encodeURIComponent(l)}`:"";return`${nD(e)}?${ya(a).slice(1)}${u}`}function nD({config:e}){return e.emulator?Xd(e,tD):`https://${e.authDomain}/${Z1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu="webStorageSupport";class sD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nw,this._completeRedirectFn=R1,this._overrideRedirectResult=I1}async _openPopup(t,n,s,i){xs(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const r=await Rm(t,n,s,Vh(),i);return X1(t,r,nf())}async _openRedirect(t,n,s,i){await this._originValidation(t);const r=await Rm(t,n,s,Vh(),i);return r1(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:r}=this.eventManagers[n];return i?Promise.resolve(i):(xs(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await W1(t),s=new P1(t);return n.register("authEvent",i=>(ft(i?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Bu,{type:Bu},i=>{const r=i?.[0]?.[Bu];r!==void 0&&n(!!r),bn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=M1(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return Iw()||yw()||Zd()}}const iD=sD;var Cm="@firebase/auth",Pm="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ft(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aD(e){$i(new fi("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;ft(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Aw(e)},u=new wk(s,i,r,l);return kk(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),$i(new fi("auth-internal",t=>{const n=Ns(t.getProvider("auth").getImmediate());return(s=>new rD(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qn(Cm,Pm,oD(e)),qn(Cm,Pm,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=300,cD=Iv("authIdTokenMaxAge")||lD;let xm=null;const uD=e=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>cD)return;const i=n?.token;xm!==i&&(xm=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Yc(e=_d()){const t=Pc(e,"auth");if(t.isInitialized())return t.getImmediate();const n=xk(e,{popupRedirectResolver:iD,persistence:[p1,n1,Nw]}),s=Iv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(s,location.origin);if(location.origin===r.origin){const o=uD(r.toString());Jk(n,o,()=>o(n.currentUser)),Xk(n,a=>o(a))}}const i=wv("auth");return i&&Dk(n,`http://${i}`),n}function hD(){return document.getElementsByTagName("head")?.[0]??document}Ek({loadJS(e){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",e),s.onload=t,s.onerror=i=>{const r=Pn("internal-error");r.customData=i,n(r)},s.type="text/javascript",s.charset="UTF-8",hD().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aD("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="firebasestorage.googleapis.com",dD="storageBucket",fD=120*1e3,pD=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends rs{constructor(t,n,s=0){super(ju(t),`Firebase Storage: ${n} (${ju(t)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,os.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return ju(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ss;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ss||(ss={}));function ju(e){return"storage/"+e}function gD(){const e="An unknown error occurred, please check the error payload for server response.";return new os(ss.UNKNOWN,e)}function mD(){return new os(ss.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _D(){return new os(ss.CANCELED,"User canceled the upload/download.")}function yD(e){return new os(ss.INVALID_URL,"Invalid URL '"+e+"'.")}function vD(e){return new os(ss.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function km(e){return new os(ss.INVALID_ARGUMENT,e)}function Hw(){return new os(ss.APP_DELETED,"The Firebase app was deleted.")}function bD(e){return new os(ss.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let s;try{s=An.makeFromUrl(t,n)}catch{return new An(t,"")}if(s.path==="")return s;throw vD(t)}static makeFromUrl(t,n){let s=null;const i="([A-Za-z0-9.\\-_]+)";function r(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(x){x.path_=decodeURIComponent(x.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",g=new RegExp(`^https?://${d}/${h}/b/${i}/o${p}`,"i"),b={bucket:1,path:3},w=n===zw?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",P=new RegExp(`^https?://${w}/${i}/${v}`,"i"),k=[{regex:a,indices:l,postModify:r},{regex:g,indices:b,postModify:u},{regex:P,indices:{bucket:1,path:2},postModify:u}];for(let x=0;x<k.length;x++){const L=k[x],U=L.regex.exec(t);if(U){const T=U[L.indices.bucket];let _=U[L.indices.path];_||(_=""),s=new An(T,_),L.postModify(s);break}}if(s==null)throw yD(t);return s}}class wD{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(e,t,n){let s=1,i=null,r=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...v){u||(u=!0,t.apply(null,v))}function d(v){i=setTimeout(()=>{i=null,e(g,l())},v)}function p(){r&&clearTimeout(r)}function g(v,...P){if(u){p();return}if(v){p(),h.call(null,v,...P);return}if(l()||o){p(),h.call(null,v,...P);return}s<64&&(s*=2);let k;a===1?(a=2,k=0):k=(s+Math.random())*1e3,d(k)}let b=!1;function w(v){b||(b=!0,p(),!u&&(i!==null?(v||(a=2),clearTimeout(i),d(0)):v||(a=1)))}return d(0),r=setTimeout(()=>{o=!0,w(!0)},n),w}function TD(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(e){return e!==void 0}function Dm(e,t,n,s){if(s<t)throw km(`Invalid value for '${e}'. Expected ${t} or greater.`);if(s>n)throw km(`Invalid value for '${e}'. Expected ${n} or less.`)}function AD(e){const t=encodeURIComponent;let n="?";for(const s in e)if(e.hasOwnProperty(s)){const i=t(s)+"="+t(e[s]);n=n+i+"&"}return n=n.slice(0,-1),n}var nc;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(nc||(nc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,r=t.indexOf(e)!==-1;return n||i||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(t,n,s,i,r,o,a,l,u,h,d,p=!0,g=!1){this.url_=t,this.method_=n,this.headers_=s,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=d,this.retry=p,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,w)=>{this.resolve_=b,this.reject_=w,this.start_()})}start_(){const t=(s,i)=>{if(i){s(!1,new Qa(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(o),this.pendingConnection_=null;const a=r.getErrorCode()===nc.NO_ERROR,l=r.getStatus();if(!a||SD(l,this.additionalRetryCodes_)&&this.retry){const h=r.getErrorCode()===nc.ABORT;s(!1,new Qa(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;s(!0,new Qa(u,r))})},n=(s,i)=>{const r=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());ID(l)?r(l):r()}catch(l){o(l)}else if(a!==null){const l=gD();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?Hw():_D();o(l)}else{const l=mD();o(l)}};this.canceled_?n(!1,new Qa(!1,null,!0)):this.backoffId_=ED(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&TD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qa{constructor(t,n,s){this.wasSuccessCode=t,this.connection=n,this.canceled=!!s}}function CD(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function PD(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function xD(e,t){t&&(e["X-Firebase-GMPID"]=t)}function kD(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function DD(e,t,n,s,i,r,o=!0,a=!1){const l=AD(e.urlParams),u=e.url+l,h=Object.assign({},e.headers);return xD(h,t),CD(h,n),PD(h,r),kD(h,s),new RD(u,e.method,h,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function MD(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(t,n){this._service=t,n instanceof An?this._location=n:this._location=An.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new sc(t,n)}get root(){const t=new An(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return MD(this._location.path)}get storage(){return this._service}get parent(){const t=OD(this._location.path);if(t===null)return null;const n=new An(this._location.bucket,t);return new sc(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw bD(t)}}function Om(e,t){const n=t?.[dD];return n==null?null:An.makeFromBucketSpec(n,e)}function ND(e,t,n,s={}){e.host=`${t}:${n}`;const i=Ji(t);i&&(fd(`https://${e.host}/b`),pd("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:r}=s;r&&(e._overrideAuthToken=typeof r=="string"?r:Av(r,e.app.options.projectId))}class VD{constructor(t,n,s,i,r,o=!1){this.app=t,this._authProvider=n,this._appCheckProvider=s,this._url=i,this._firebaseVersion=r,this._isUsingEmulator=o,this._bucket=null,this._host=zw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=fD,this._maxUploadRetryTime=pD,this._requests=new Set,i!=null?this._bucket=An.makeFromBucketSpec(i,this._host):this._bucket=Om(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=An.makeFromBucketSpec(this._url,t):this._bucket=Om(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Dm("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Dm("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ze(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new sc(this,t)}_makeRequest(t,n,s,i,r=!0){if(this._deleted)return new wD(Hw());{const o=DD(t,this._appId,s,i,n,this._firebaseVersion,r,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[s,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,s,i).getPromise()}}const Mm="@firebase/storage",Nm="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="storage";function LD(e=_d(),t){e=Qe(e);const s=Pc(e,$w).getImmediate({identifier:t}),i=Ev("storage");return i&&FD(s,...i),s}function FD(e,t,n,s={}){ND(e,t,n,s)}function UD(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new VD(n,s,i,t,Zi)}function BD(){$i(new fi($w,UD,"PUBLIC").setMultipleInstances(!0)),qn(Mm,Nm,""),qn(Mm,Nm,"esm2020")}BD();const jD={apiKey:"AIzaSyA88mxzUStbuMFKNr9Q0OODtHXmpyuqvBY",authDomain:"findyourfit-93e9f.firebaseapp.com",projectId:"findyourfit-93e9f",storageBucket:"findyourfit-93e9f.firebasestorage.app",messagingSenderId:"715690823951",appId:"1:715690823951:web:f3af86677f7d990c55ae7a",measurementId:"G-2GTC9GRYRL"},of=Cv(jD),Se=Px(of),Hn=Yc(of);LD(of);const dn=B0("user",{state:()=>({userData:null,moodData:null,journalData:null,therapists:null}),actions:{async fetchUserData(){const e=Hn.currentUser;if(!e)return;const t=Be(Se,"users",e.uid),n=await Bi(t);n.exists()&&(this.userData=n.data(),this.userData.streak||(this.userData.streak={count:1,lastUpdate:Xn()},await Cn(t,this.userData,{merge:!0})),await this.updateStreak(),await this.getMood(),await this.getJournalEntries(),await this.getTherapists())},setUserData(e){this.userData=e},setMoodData(e){this.moodData=e},async updateStreak(){const e=Hn.currentUser;if(!e||!this.userData?.streak)return;const{count:t,lastUpdate:n}=this.userData.streak;if(!n||typeof n.toDate!="function"){this.userData.streak={count:1,lastUpdate:Xn()},await Cn(Be(Se,"users",e.uid),this.userData,{merge:!0});return}const s=n.toDate(),i=new Date;this.isSameDay(s,i)||(this.isYesterday(s,i)?this.userData.streak.count=t+1:this.userData.streak.count=1,this.userData.streak.lastUpdate=Xn(),await Cn(Be(Se,"users",e.uid),this.userData,{merge:!0}))},isSameDay(e,t){return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e.getUTCDate()===t.getUTCDate()},isYesterday(e){const t=e,n=new Date,s=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate());return(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate())-s)/(1e3*60*60*24)===1},async getMood(){const e=Hn.currentUser;if(!e)return;const t=Be(Se,"mood",e.uid),n=await Bi(t);n.exists()&&(this.moodData=n.data())},async getJournalEntries(){const e=Hn.currentUser;if(!e)return;const t=Be(Se,"journals",e.uid),n=await Bi(t);if(n.exists()){const s=n.data(),i=Object.entries(s).sort((r,o)=>Number(o[0])-Number(r[0])).map(([r,o])=>({id:r,...o}));this.journalData=i}},async getTherapists(){const e=[];return(await $x(Cx(Se,"therapists"))).forEach(n=>{e.push({id:n.id,...n.data()})}),this.therapists=e,this.therapists}}}),wn=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},zD={class:"modal_holder"},HD={class:"modal_heading_holder inter font_size_xs"},$D=["innerHTML"],WD={__name:"errorModal",props:{errorMessage:{type:String,required:!0}},setup(e){return(t,n)=>(Y(),nt("div",{class:"modal_overlay",onClick:n[1]||(n[1]=hd(s=>t.$emit("close"),["self"])),role:"dialog","aria-modal":"true"},[M("div",zD,[M("div",HD,[n[2]||(n[2]=M("span",null,"Attention!",-1)),M("button",{class:"modal_close_button",onClick:n[0]||(n[0]=s=>t.$emit("close"))},"")]),M("div",{class:"modal_content_holder inter font_size_xs",innerHTML:e.errorMessage},null,8,$D)])]))}},Wr=wn(WD,[["__scopeId","data-v-b33337de"]]),qD={class:"modal_overlay",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},KD={class:"modal_holder"},GD={id:"modal-title",class:"modal_heading_holder inter font_size_xs"},YD={class:"modal_content_holder inter font_size_xs"},QD=["value"],XD=["value"],JD={__name:"userInfoModal",props:{globalUser:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=dn(),s=Rc(),i=e,r=tt([]),o=tt(""),a=tt(""),l=tt(""),u=tt(""),h=tt(""),d=tt([{value:"male",text:"Male"},{value:"female",text:"Female"},{value:"other",text:"Other"}]),p=tt(!1),g=tt("");is(async()=>{const k=await(await fetch("https://restcountries.com/v3.1/all?fields=name,cca3,flags")).json();r.value=k.sort((x,L)=>x.name.common.localeCompare(L.name.common))});const b=O=>/^\d{10}$/.test(O),w=O=>{if(!/^\d{4}\/\d{2}\/\d{2}$/.test(O))return!1;const[k,x,L]=O.split("/").map(Number),U=new Date(k,x-1,L);return U.getFullYear()===k&&U.getMonth()===x-1&&U.getDate()===L},v=async()=>{if(Yc().currentUser,g.value="",p.value=!1,!b(l.value)){g.value="Contact Number must be a valid 10-digit number.",p.value=!0;return}if(!w(u.value)){g.value="Date of Birth must be in the format yyyy/mm/dd.",p.value=!0;return}const k={personalInfo:{name:a.value,contactNumber:l.value,dateOfBirth:u.value,email:i.globalUser.email,country:o.value,gender:h.value},streak:{count:1,lastUpdate:Xn()},loginDate:new Date().toISOString(),uid:i.globalUser.uid};await Cn(Be(Se,"users",i.globalUser.uid),k),n.setUserData(k),s.push({name:"Navigation"})},P=()=>{p.value=!1,g.value=""};return(O,k)=>(Y(),nt("div",qD,[M("div",KD,[M("div",GD,[k[6]||(k[6]=M("span",{style:{width:"80%"}},"User Information",-1)),M("button",{class:"modal_close_button",onClick:k[0]||(k[0]=x=>O.$emit("close"))},"")]),M("div",YD,[k[10]||(k[10]=M("div",{class:"modal_content_description"}," We collect your name, date of birth, and contact number to create your profile, personalize your therapy experience, and stay in touch for updates or support. Your information is kept secure and private at all times. ",-1)),M("form",{class:"modal_form_holder",onSubmit:hd(v,["prevent"])},[ee(M("input",{class:"modal_input inter font_size_xs",type:"text",placeholder:"Name & Surname","onUpdate:modelValue":k[1]||(k[1]=x=>a.value=x),required:""},null,512),[[Ye,a.value]]),ee(M("input",{class:"modal_input inter font_size_xs",type:"tel",placeholder:"Contact Number","onUpdate:modelValue":k[2]||(k[2]=x=>l.value=x),required:""},null,512),[[Ye,l.value]]),ee(M("input",{class:"modal_input inter font_size_xs",type:"text",placeholder:"Date of Birth (yyyy/mm/dd)","onUpdate:modelValue":k[3]||(k[3]=x=>u.value=x),required:""},null,512),[[Ye,u.value]]),ee(M("select",{class:"modal_input inter font_size_xs","onUpdate:modelValue":k[4]||(k[4]=x=>h.value=x)},[k[7]||(k[7]=M("option",{disabled:"",value:""},"Please select one",-1)),(Y(!0),nt(xt,null,de(d.value,x=>(Y(),nt("option",{key:x.value,value:x.value},Et(x.text),9,QD))),128))],512),[[ii,h.value]]),ee(M("select",{class:"modal_input inter font_size_xs","onUpdate:modelValue":k[5]||(k[5]=x=>o.value=x),id:"country"},[k[8]||(k[8]=M("option",{disabled:"",value:""},"Select your country",-1)),(Y(!0),nt(xt,null,de(r.value,x=>(Y(),nt("option",{key:x.cca3,value:x.cca3},Et(x.name.common),9,XD))),128))],512),[[ii,o.value]]),k[9]||(k[9]=M("button",{type:"submit",class:"modal_button inter font_size_xs"},"Confirm",-1))],32)])]),p.value?(Y(),Le(Wr,{key:0,errorMessage:g.value,onClose:P},null,8,["errorMessage"])):nn("",!0)]))}},ZD=wn(JD,[["__scopeId","data-v-518c205f"]]),tO={class:"login_page"},eO={class:"login_page_content"},nO={class:"login_page_form"},sO={class:"login_page_form_fields"},iO=["type"],rO={class:"show_password_toggle inter font_size_xs"},oO={class:"login_page_toggle_register inter font_size_xs"},aO={__name:"loginRegister",setup(e){const t=dn(),n=Rc(),s=tt("password"),i=tt(null),r=tt(""),o=tt(""),a=tt("login"),l=tt(!1),u=tt(""),h=tt(!1),d=new _s;d.addScope("https://www.googleapis.com/auth/contacts.readonly");const p=()=>{s.value=s.value==="password"?"text":"password"},g=()=>{a.value=a.value==="login"?"register":"login"},b=x=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x),w=()=>{if(!r.value){u.value="Please enter your email to reset your password!",l.value=!0;return}Gk(Hn,r.value).then(()=>{u.value="An email has been sent to reset your password!",l.value=!0})},v=x=>{const L=x.toDate(),U=new Date,T=new Date(U.getFullYear(),U.getMonth(),U.getDate()),_=new Date(T);return _.setDate(T.getDate()-1),L>=_&&L<T},P=async x=>{x.streak&&(v(x.streak.lastUpdate)?x.streak.count+=1:x.streak.count=1,x.streak.lastUpdate=Xn(),x.loginDate=Xn(),await Cn(Be(Se,"users",x.uid),x))},O=async()=>{try{const L=(await v1(Hn,d)).user;if(L){const U=Be(Se,"users",L.uid),T=await Bi(U);if(T.exists()){const _=T.data();_&&await P(_)}}n.push({name:"Navigation"})}catch(x){console.log(x.message),u.value="Google login failed!",l.value=!0}},k=async()=>{try{if(u.value="",l.value=!1,!b(r.value)){u.value="Invalid email format!",l.value=!0;return}if(a.value==="register"){const L=(await Yk(Hn,r.value,o.value)).user;try{await b1(L,d)}catch{}i.value={uid:L.uid,email:L.email},h.value=!0}else{const L=(await Qk(Hn,r.value,o.value)).user,U=Be(Se,"users",L.uid),T=await Bi(U);if(T.exists()){const _=T.data();_&&(await P(_),t.setUserData(_),n.push({name:"Navigation"}))}}}catch(x){x.code==="auth/invalid-credential"?u.value="Invalid login details.":x.code==="auth/email-already-in-use"?u.value="Email already in use.":u.value="An unexpected error occurred.",l.value=!0}};return(x,L)=>(Y(),nt("div",tO,[M("div",eO,[L[4]||(L[4]=M("div",{class:"login_page_intro inter font_size_xs"},[M("div",{class:"login_page_intro_text"},[M("div",{class:"font_size_m licorice_regular"},"Welcome to Finding Your Fit"),M("br"),M("br"),Re(" A space designed to help you understand yourself better, build emotional balance, and grow into the life that fits you best. Take a moment to reconnect, reflect, and start working toward your goals  one step at a time. ")])],-1)),M("div",nO,[M("form",sO,[ee(M("input",{class:"login_page_input inter font_size_xs",type:"text",placeholder:"Email","onUpdate:modelValue":L[0]||(L[0]=U=>r.value=U)},null,512),[[Ye,r.value]]),ee(M("input",{class:"login_page_password inter font_size_xs",type:s.value,placeholder:"Password","onUpdate:modelValue":L[1]||(L[1]=U=>o.value=U)},null,8,iO),[[A0,o.value]]),M("div",rO,[M("label",null,[M("input",{type:"checkbox",onChange:p},null,32),L[3]||(L[3]=Re(" Show Password ",-1))])])]),M("button",{class:"login_page_button inter font_size_xs",onClick:k},Et(a.value==="login"?"Login":"Register"),1),M("div",{class:"login_page_forgot_password inter font_size_xs",onClick:w},Et(a.value==="login"?"Forgot Password?":""),1)]),M("div",{class:"login_page_social_login"},[M("div",{class:"login_page_social_button",onClick:O})]),M("div",oO,[M("u",{onClick:g},Et(a.value==="login"?"Register":"Login"),1)])]),l.value?(Y(),Le(Wr,{key:0,errorMessage:u.value,onClose:L[2]||(L[2]=U=>l.value=!1)},null,8,["errorMessage"])):nn("",!0),h.value&&i.value?(Y(),Le(ZD,{key:1,globalUser:i.value},null,8,["globalUser"])):nn("",!0)]))}},lO=wn(aO,[["__scopeId","data-v-f1fb9b1e"]]),Vm=[{content:"Success is not final, failure is not fatal: It is the courage to continue that counts.",author:"Winston Churchill"},{content:"The only way to do great work is to love what you do.",author:"Steve Jobs"},{content:"Don't watch the clock; do what it does. Keep going.",author:"Sam Levenson"},{content:"You are never too old to set another goal or to dream a new dream.",author:"C.S. Lewis"},{content:"Believe you can and you're halfway there.",author:"Theodore Roosevelt"},{content:"Your limitationits only your imagination.",author:"Unknown"},{content:"Push yourself, because no one else is going to do it for you.",author:"Unknown"},{content:"Great things never come from comfort zones.",author:"Unknown"},{content:"Dream it. Wish it. Do it.",author:"Unknown"},{content:"Success doesnt just find you. You have to go out and get it.",author:"Unknown"},{content:"The harder you work for something, the greater youll feel when you achieve it.",author:"Unknown"},{content:"Dont stop when youre tired. Stop when youre done.",author:"Unknown"},{content:"Wake up with determination. Go to bed with satisfaction.",author:"Unknown"},{content:"Do something today that your future self will thank you for.",author:"Unknown"},{content:"Little things make big days.",author:"Unknown"},{content:"Its going to be hard, but hard does not mean impossible.",author:"Unknown"},{content:"Dont wait for opportunity. Create it.",author:"Unknown"},{content:"Sometimes were tested not to show our weaknesses, but to discover our strengths.",author:"Unknown"},{content:"The key to success is to focus on goals, not obstacles.",author:"Unknown"},{content:"Dream bigger. Do bigger.",author:"Unknown"},{content:"Dont limit your challenges. Challenge your limits.",author:"Unknown"},{content:"What you get by achieving your goals is not as important as what you become by achieving your goals.",author:"Zig Ziglar"},{content:"Start where you are. Use what you have. Do what you can.",author:"Arthur Ashe"},{content:"The future depends on what you do today.",author:"Mahatma Gandhi"},{content:"Hustle in silence. Let your success make the noise.",author:"Unknown"},{content:"If you want to achieve greatness stop asking for permission.",author:"Unknown"},{content:"Opportunities dont happen. You create them.",author:"Chris Grosser"},{content:"Dont watch the clock; do what it does. Keep going.",author:"Sam Levenson"},{content:"Action is the foundational key to all success.",author:"Pablo Picasso"},{content:"The only limit to our realization of tomorrow is our doubts of today.",author:"Franklin D. Roosevelt"},{content:"Hardships often prepare ordinary people for an extraordinary destiny.",author:"C.S. Lewis"},{content:"Dont wait. The time will never be just right.",author:"Napoleon Hill"},{content:"Believe in yourself and all that you are.",author:"Christian D. Larson"},{content:"Fall seven times and stand up eight.",author:"Japanese Proverb"},{content:"Everything youve ever wanted is on the other side of fear.",author:"George Addair"},{content:"Success is what comes after you stop making excuses.",author:"Luis Galarza"},{content:"Your life does not get better by chance, it gets better by change.",author:"Jim Rohn"},{content:"Dont be pushed around by the fears in your mind. Be led by the dreams in your heart.",author:"Roy T. Bennett"},{content:"Doubt kills more dreams than failure ever will.",author:"Suzy Kassem"},{content:"The only way to achieve the impossible is to believe it is possible.",author:"Charles Kingsleigh"},{content:"Do what you can with all you have, wherever you are.",author:"Theodore Roosevelt"},{content:"Dreams dont work unless you do.",author:"John C. Maxwell"},{content:"Dont wait for the perfect moment. Take the moment and make it perfect.",author:"Unknown"},{content:"Work hard in silence. Let success be your noise.",author:"Frank Ocean"},{content:"Success is not in what you have, but who you are.",author:"Bo Bennett"},{content:"The secret of getting ahead is getting started.",author:"Mark Twain"},{content:"Your passion is waiting for your courage to catch up.",author:"Isabelle Lafleche"},{content:"Great things never come from comfort zones.",author:"Unknown"},{content:"Push yourself, because no one else is going to do it for you.",author:"Unknown"},{content:"Failure is the condiment that gives success its flavor.",author:"Truman Capote"},{content:"Dont quit. Suffer now and live the rest of your life as a champion.",author:"Muhammad Ali"},{content:"The harder you work for something, the greater youll feel when you achieve it.",author:"Unknown"},{content:"Do something today that your future self will thank you for.",author:"Sean Patrick Flanery"},{content:"Little by little, day by day, what is meant for you will find its way.",author:"Unknown"},{content:"You are capable of amazing things.",author:"Unknown"},{content:"Start each day with a positive thought and a grateful heart.",author:"Roy T. Bennett"},{content:"The way to get started is to quit talking and begin doing.",author:"Walt Disney"},{content:"Dont let yesterday take up too much of today.",author:"Will Rogers"},{content:"You dont have to be great to start, but you have to start to be great.",author:"Zig Ziglar"},{content:"Opportunities dont happen. You create them.",author:"Chris Grosser"},{content:"It always seems impossible until its done.",author:"Nelson Mandela"},{content:"Push yourself, because no one else is going to do it for you.",author:"Unknown"},{content:"Great things never come from comfort zones.",author:"Unknown"},{content:"Dream it. Wish it. Do it.",author:"Unknown"},{content:"Success doesnt just find you. You have to go out and get it.",author:"Unknown"},{content:"The harder you work for something, the greater youll feel when you achieve it.",author:"Unknown"},{content:"Dont stop when youre tired. Stop when youre done.",author:"Unknown"},{content:"Wake up with determination. Go to bed with satisfaction.",author:"Unknown"},{content:"Do something today that your future self will thank you for.",author:"Unknown"},{content:"Little things make big days.",author:"Unknown"},{content:"Its going to be hard, but hard does not mean impossible.",author:"Unknown"},{content:"Dont wait for opportunity. Create it.",author:"Unknown"},{content:"Sometimes were tested not to show our weaknesses, but to discover our strengths.",author:"Unknown"},{content:"The key to success is to focus on goals, not obstacles.",author:"Unknown"},{content:"Dream bigger. Do bigger.",author:"Unknown"},{content:"Dont limit your challenges. Challenge your limits.",author:"Unknown"},{content:"What you get by achieving your goals is not as important as what you become by achieving your goals.",author:"Zig Ziglar"},{content:"Start where you are. Use what you have. Do what you can.",author:"Arthur Ashe"},{content:"The future depends on what you do today.",author:"Mahatma Gandhi"},{content:"Hustle in silence. Let your success make the noise.",author:"Unknown"},{content:"If you want to achieve greatness stop asking for permission.",author:"Unknown"},{content:"Action is the foundational key to all success.",author:"Pablo Picasso"},{content:"Hardships often prepare ordinary people for an extraordinary destiny.",author:"C.S. Lewis"},{content:"Fall seven times and stand up eight.",author:"Japanese Proverb"},{content:"Everything youve ever wanted is on the other side of fear.",author:"George Addair"},{content:"Your life does not get better by chance, it gets better by change.",author:"Jim Rohn"},{content:"Dont be pushed around by the fears in your mind. Be led by the dreams in your heart.",author:"Roy T. Bennett"},{content:"Doubt kills more dreams than failure ever will.",author:"Suzy Kassem"},{content:"The only way to achieve the impossible is to believe it is possible.",author:"Charles Kingsleigh"},{content:"Do what you can with all you have, wherever you are.",author:"Theodore Roosevelt"},{content:"Dreams dont work unless you do.",author:"John C. Maxwell"},{content:"Dont wait for the perfect moment. Take the moment and make it perfect.",author:"Unknown"},{content:"Work hard in silence. Let success be your noise.",author:"Frank Ocean"},{content:"Success is not in what you have, but who you are.",author:"Bo Bennett"},{content:"The secret of getting ahead is getting started.",author:"Mark Twain"},{content:"Your passion is waiting for your courage to catch up.",author:"Isabelle Lafleche"},{content:"Great things never come from comfort zones.",author:"Unknown"},{content:"Push yourself, because no one else is going to do it for you.",author:"Unknown"},{content:"Failure is the condiment that gives success its flavor.",author:"Truman Capote"},{content:"Dont quit. Suffer now and live the rest of your life as a champion.",author:"Muhammad Ali"},{content:"The harder you work for something, the greater youll feel when you achieve it.",author:"Unknown"},{content:"Do something today that your future self will thank you for.",author:"Sean Patrick Flanery"},{content:"Little by little, day by day, what is meant for you will find its way.",author:"Unknown"},{content:"You are capable of amazing things.",author:"Unknown"},{content:"Start each day with a positive thought and a grateful heart.",author:"Roy T. Bennett"},{content:"The way to get started is to quit talking and begin doing.",author:"Walt Disney"},{content:"Dont let yesterday take up too much of today.",author:"Will Rogers"},{content:"You dont have to be great to start, but you have to start to be great.",author:"Zig Ziglar"},{content:"Opportunities dont happen. You create them.",author:"Chris Grosser"},{content:"It always seems impossible until its done.",author:"Nelson Mandela"},{content:"Do what you love, love what you do.",author:"Unknown"},{content:"Success is the sum of small efforts, repeated day in and day out.",author:"Robert Collier"},{content:"Motivation is what gets you started. Habit is what keeps you going.",author:"Jim Ryun"},{content:"Dont let fear decide your future.",author:"Shalane Flanagan"},{content:"You miss 100% of the shots you dont take.",author:"Wayne Gretzky"},{content:"Start where you are. Use what you have. Do what you can.",author:"Arthur Ashe"},{content:"Do one thing every day that scares you.",author:"Eleanor Roosevelt"},{content:"The best way to predict the future is to invent it.",author:"Alan Kay"},{content:"Difficult roads often lead to beautiful destinations.",author:"Unknown"},{content:"Believe in yourself, take on your challenges, dig deep within yourself to conquer fears.",author:"Chantal Sutherland"},{content:"If it doesnt challenge you, it wont change you.",author:"Fred DeVito"},{content:"It always seems impossible until its done.",author:"Nelson Mandela"},{content:"The expert in anything was once a beginner.",author:"Helen Hayes"},{content:"Dont count the days, make the days count.",author:"Muhammad Ali"},{content:"The harder the battle, the sweeter the victory.",author:"Les Brown"},{content:"Success is liking yourself, liking what you do, and liking how you do it.",author:"Maya Angelou"},{content:"You dont have to see the whole staircase, just take the first step.",author:"Martin Luther King Jr."},{content:"Small daily improvements over time lead to stunning results.",author:"Robin Sharma"},{content:"Dont let what you cannot do interfere with what you can do.",author:"John Wooden"},{content:"The only limit is the one you set yourself.",author:"Felix Baumgartner"},{content:"Great things are done by a series of small things brought together.",author:"Vincent Van Gogh"},{content:"Your dream doesnt have an expiration date. Take a deep breath and try again.",author:"KT Witten"},{content:"Action is the foundational key to all success.",author:"Pablo Picasso"},{content:"You are braver than you believe, stronger than you seem, and smarter than you think.",author:"A.A. Milne"},{content:"Work until you no longer have to introduce yourself.",author:"Unknown"},{content:"The best revenge is massive success.",author:"Frank Sinatra"},{content:"Your only limit is your mind.",author:"Unknown"},{content:"Stop being afraid of what could go wrong and start being excited about what could go right.",author:"Unknown"},{content:"Do not wait to strike till the iron is hot; but make it hot by striking.",author:"William Butler Yeats"},{content:"Dont let perfectionism get in the way of progress.",author:"Unknown"},{content:"Great minds discuss ideas; average minds discuss events; small minds discuss people.",author:"Eleanor Roosevelt"},{content:"Strive not to be a success, but rather to be of value.",author:"Albert Einstein"},{content:"Your passion is waiting for your courage to catch up.",author:"Isabelle Lafleche"},{content:"Do what you can, with what you have, where you are.",author:"Theodore Roosevelt"},{content:"Success is not about the destination, its about the journey.",author:"Zig Ziglar"},{content:"The key to success is to focus on goals, not obstacles.",author:"Unknown"},{content:"A year from now you may wish you had started today.",author:"Karen Lamb"},{content:"Dont stop until youre proud.",author:"Unknown"},{content:"Dream big. Start small. Act now.",author:"Robin Sharma"},{content:"Hard work beats talent when talent doesnt work hard.",author:"Tim Notke"},{content:"Stay positive, work hard, make it happen.",author:"Unknown"},{content:"Your time is limited, dont waste it living someone elses life.",author:"Steve Jobs"},{content:"The difference between ordinary and extraordinary is that little extra.",author:"Jimmy Johnson"},{content:"Dont let yesterday take up too much of today.",author:"Will Rogers"},{content:"Dont wait for opportunity. Create it.",author:"Unknown"},{content:"Success doesnt come to you, you go to it.",author:"Marva Collins"},{content:"A river cuts through rock not because of its power, but because of its persistence.",author:"Jim Watkins"},{content:"Discipline is the bridge between goals and accomplishment.",author:"Jim Rohn"},{content:"Do what is right, not what is easy nor what is popular.",author:"Unknown"},{content:"Be so good they cant ignore you.",author:"Steve Martin"},{content:"Dont limit yourself. Many people limit themselves to what they think they can do.",author:"Mary Kay Ash"},{content:"Your life does not get better by chance, it gets better by change.",author:"Jim Rohn"},{content:"Success is the progressive realization of a worthy goal or ideal.",author:"Earl Nightingale"},{content:"To succeed in life, you need two things: ignorance and confidence.",author:"Mark Twain"},{content:"Courage doesnt always roar. Sometimes courage is the quiet voice at the end of the day saying, I will try again tomorrow.",author:"Mary Anne Radmacher"},{content:"Start each day with a positive thought and a grateful heart.",author:"Roy T. Bennett"},{content:"Dont let small minds convince you that your dreams are too big.",author:"Unknown"},{content:"Success is no accident. It is hard work, perseverance, learning, studying, sacrifice and most of all, love of what you are doing.",author:"Pel"},{content:"The best way out is always through.",author:"Robert Frost"},{content:"Failure is simply the opportunity to begin again, this time more intelligently.",author:"Henry Ford"},{content:"Dont wish it were easier. Wish you were better.",author:"Jim Rohn"},{content:"The mind is everything. What you think you become.",author:"Buddha"},{content:"When you feel like quitting, remember why you started.",author:"Unknown"},{content:"Success usually comes to those who are too busy to be looking for it.",author:"Henry David Thoreau"},{content:"Dont be afraid to give up the good to go for the great.",author:"John D. Rockefeller"},{content:"Do not be embarrassed by your failures, learn from them and start again.",author:"Richard Branson"},{content:"Dont wait for the perfect moment. Take the moment and make it perfect.",author:"Unknown"},{content:"Small deeds done are better than great deeds planned.",author:"Peter Marshall"},{content:"Act as if what you do makes a difference. It does.",author:"William James"},{content:"Success is not how high you have climbed, but how you make a positive difference to the world.",author:"Roy T. Bennett"},{content:"Your future is created by what you do today, not tomorrow.",author:"Robert Kiyosaki"},{content:"The secret of success is to do the common thing uncommonly well.",author:"John D. Rockefeller Jr."},{content:"What seems to us as bitter trials are often blessings in disguise.",author:"Oscar Wilde"},{content:"The only place where success comes before work is in the dictionary.",author:"Vidal Sassoon"},{content:"Happiness is not something ready-made. It comes from your own actions.",author:"Dalai Lama"},{content:"Opportunities multiply as they are seized.",author:"Sun Tzu"},{content:"Do not go where the path may lead, go instead where there is no path and leave a trail.",author:"Ralph Waldo Emerson"},{content:"Success is liking yourself, liking what you do, and liking how you do it.",author:"Maya Angelou"},{content:"Be not afraid of life. Believe that life is worth living, and your belief will help create the fact.",author:"William James"},{content:"Dont be afraid to start over. Its a chance to build something better.",author:"Unknown"},{content:"Success isnt always about greatness. Its about consistency.",author:"Dwayne Johnson"},{content:"You are confined only by the walls you build yourself.",author:"Andrew Murphy"},{content:"The best time to plant a tree was 20 years ago. The second best time is now.",author:"Chinese Proverb"},{content:"Dreams dont work unless you do.",author:"John C. Maxwell"},{content:"Dont let the fear of losing be greater than the excitement of winning.",author:"Robert Kiyosaki"},{content:"You cant cross the sea merely by standing and staring at the water.",author:"Rabindranath Tagore"},{content:"Success is the sum of small efforts, repeated day in and day out.",author:"Robert Collier"},{content:"Be so good they cant ignore you.",author:"Steve Martin"},{content:"Your limitationits only your imagination.",author:"Unknown"},{content:"The journey of a thousand miles begins with one step.",author:"Lao Tzu"},{content:"Dont limit your challenges. Challenge your limits.",author:"Jerry Dunn"},{content:"Great things never come from comfort zones.",author:"Unknown"},{content:"Its not whether you get knocked down, its whether you get up.",author:"Vince Lombardi"},{content:"Everything you can imagine is real.",author:"Pablo Picasso"},{content:"Success is not in never falling, but in rising every time we fall.",author:"Confucius"},{content:"Dont wait for opportunity. Create it.",author:"George Bernard Shaw"},{content:"The best dreams happen when youre awake.",author:"Cherie Gilderbloom"},{content:"Do something today that your future self will thank you for.",author:"Sean Patrick Flanery"},{content:"What you do today can improve all your tomorrows.",author:"Ralph Marston"}];function cO(){const e=Math.floor(Math.random()*Vm.length);return Vm[e]}const uO="/assets/my_therapist-BGpDoE1u.png",hO="/assets/my_journal-ByAOnFF2.png",dO="/assets/journal-BcWmOkN8.png",fO="/assets/my_courses-DAreBNF0.png",pO="/assets/mood_track-DScXBvTj.png",gO={class:"home_container"},mO={class:"greeting_section licorice_regular font_size_m"},_O={class:"checkin_section"},yO={class:"feeling_section"},vO={class:"inspiration_section"},bO={class:"quote_text inter font_size_xxs"},wO={class:"offer_section"},EO={class:"offer_list"},TO={class:"offer_icon_wrapper"},IO={class:"offer_content_wrapper"},AO={class:"offer_title inter font_size_xxs"},SO={class:"offer_description inter font_size_xxs"},RO={__name:"home",setup(e){const t=dn(),n=tt({content:"",author:""});tt(!1);const s=qt(()=>t.userData?.personalInfo.name||"");qt(()=>[{label:"My Therapist",url:uO},{label:"Journal Entry",url:hO},{label:"Explore Courses",url:fO}]);const i=qt(()=>[{label:"Personalized mood tracking",content:"Log your daily mood to visualize trends, identify triggers, and gain insights.",icon:pO},{label:"Journaling",content:"A private space for self-reflection, prompts, and gain thoughts.",icon:dO}]);is(()=>{console.log("Home mounted"),n.value=cO()});const r=()=>{const o=new Date().getHours();return o<12?"morning":o<18?"afternoon":"evening"};return(o,a)=>(Y(),nt("div",gO,[M("div",mO," Good "+Et(r())+", "+Et(s.value)+"! ",1),M("div",_O,[M("div",yO,[a[1]||(a[1]=M("div",{class:"feeling_heading inter font_size_xs"},[M("b",null,"How are you feeling today?")],-1)),a[2]||(a[2]=M("div",{class:"feeling_image"},null,-1)),M("div",{class:"checkin_button inter font_size_xxs",onClick:a[0]||(a[0]=l=>o.$emit("setPage","mood"))}," Check in now ")])]),M("div",vO,[a[3]||(a[3]=M("div",{class:"inspiration_heading inter font_size_xxs"},[M("b",null,"Inspiration")],-1)),M("div",bO,Et(n.value.content),1)]),M("div",wO,[a[4]||(a[4]=M("div",{class:"offer_heading inter font_size_xs"},[M("b",null,"What we offer")],-1)),M("div",EO,[(Y(!0),nt(xt,null,de(i.value,l=>(Y(),nt("div",{class:"offer_card",key:l.label},[M("div",TO,[M("div",{class:"feature_icon",style:Is({backgroundImage:`url(${l.icon})`,backgroundSize:"50% 80%",backgroundPosition:"center",backgroundRepeat:"no-repeat"})},null,4)]),M("div",IO,[M("div",AO,[M("b",null,Et(l.label),1)]),M("div",SO,Et(l.content),1)])]))),128))])])]))}},Ww=wn(RO,[["__scopeId","data-v-0500334a"]]),CO={class:"loading_page_holder"},PO={__name:"loadingPage",setup(e){const t=dn(),n=Rc();return is(()=>{t.userData?.uid?n.push({name:"Navigation"}):n.push({name:"Login"})}),(s,i)=>(Y(),nt("div",CO))}},xO=wn(PO,[["__scopeId","data-v-5093d853"]]),kO={class:"modal_overlay",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},DO={class:"modal_holder"},OO={id:"modal-title",class:"modal_heading_holder inter font_size_xs"},MO={class:"modal_content_holder inter font_size_xs"},NO=["value"],VO=["value"],zu="editProfileForm",Lm={__name:"profileEdit",props:{globalUser:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=dn(),s=t,i=e,r=tt([]),o=tt(""),a=tt(""),l=tt(""),u=tt(""),h=tt(""),d=tt(""),p=tt(!1),g=[{value:"male",text:"Male"},{value:"female",text:"Female"},{value:"other",text:"Other"}];is(async()=>{const k=await(await fetch("https://restcountries.com/v3.1/all?fields=name,cca3")).json();r.value=k.sort((L,U)=>L.name.common.localeCompare(U.name.common));const x=JSON.parse(localStorage.getItem(zu));x&&(a.value=x.nameSurname||"",l.value=x.contactNumber||"",u.value=x.dateOfBirth||"",h.value=x.selectedOption||"",o.value=x.selectedCountry||"")}),bs([a,l,u,h,o],()=>{localStorage.setItem(zu,JSON.stringify({nameSurname:a.value,contactNumber:l.value,dateOfBirth:u.value,selectedOption:h.value,selectedCountry:o.value}))},{deep:!0});function b(O){return/^\d{10}$/.test(O)}function w(O){if(!/^\d{4}\/\d{2}\/\d{2}$/.test(O))return!1;const[x,L,U]=O.split("/").map(Number),T=new Date(x,L-1,U);return T.getFullYear()===x&&T.getMonth()===L-1&&T.getDate()===U}const v=async()=>{const k=Yc().currentUser;if(p.value=!1,d.value="",!b(l.value)){d.value="Contact Number must be a valid 10-digit number.",p.value=!0;return}if(!w(u.value)){d.value="Date of Birth must be in the format yyyy/mm/dd.",p.value=!0;return}const x=i.globalUser.userData,L={personalInfo:{name:a.value,contactNumber:l.value,dateOfBirth:u.value,email:x.email||k.email,gender:h.value,country:o.value},uid:x.uid||k.uid,loginDate:x.loginDate,streak:x.streak,profileEdited:Xn()};n.setUserData(L),await Cn(Be(Se,"users",L.uid),L),localStorage.removeItem(zu),s("close")},P=()=>{p.value=!1,d.value=""};return(O,k)=>(Y(),nt("div",kO,[M("div",DO,[M("div",OO,[k[6]||(k[6]=M("span",{style:{width:"80%"}},"Edit User Information",-1)),M("button",{class:"modal_close_button",onClick:k[0]||(k[0]=x=>O.$emit("close"))},"")]),M("div",MO,[k[10]||(k[10]=M("div",{class:"modal_content_description"}," We collect your name, date of birth, and contact number to create your profile, personalize your therapy experience, and stay in touch for updates or support. Your information is kept secure and private at all times. ",-1)),M("form",{class:"modal_form_holder",onSubmit:hd(v,["prevent"])},[ee(M("input",{class:"modal_input inter font_size_xs",type:"text",placeholder:"Name & Surname","onUpdate:modelValue":k[1]||(k[1]=x=>a.value=x),required:""},null,512),[[Ye,a.value]]),ee(M("input",{class:"modal_input inter font_size_xs",type:"tel",placeholder:"Contact Number","onUpdate:modelValue":k[2]||(k[2]=x=>l.value=x),required:""},null,512),[[Ye,l.value]]),ee(M("input",{class:"modal_input inter font_size_xs",type:"text",placeholder:"Date of Birth (yyyy/mm/dd)","onUpdate:modelValue":k[3]||(k[3]=x=>u.value=x),required:""},null,512),[[Ye,u.value]]),ee(M("select",{class:"modal_input inter font_size_xs","onUpdate:modelValue":k[4]||(k[4]=x=>h.value=x)},[k[7]||(k[7]=M("option",{disabled:"",value:""},"Please select one",-1)),(Y(),nt(xt,null,de(g,x=>M("option",{key:x.value,value:x.value},Et(x.text),9,NO)),64))],512),[[ii,h.value]]),ee(M("select",{class:"modal_input inter font_size_xs","onUpdate:modelValue":k[5]||(k[5]=x=>o.value=x)},[k[8]||(k[8]=M("option",{disabled:"",value:""},"Select your country",-1)),(Y(!0),nt(xt,null,de(r.value,x=>(Y(),nt("option",{key:x.cca3,value:x.cca3},Et(x.name.common),9,VO))),128))],512),[[ii,o.value]]),k[9]||(k[9]=M("button",{type:"submit",class:"modal_button inter font_size_xs"},"Confirm",-1))],32)])]),p.value?(Y(),Le(Wr,{key:0,errorMessage:d.value,onClose:P},null,8,["errorMessage"])):nn("",!0)]))}},qw="/assets/brown_man-DU8HBBmE.png",Kw="/assets/blonde_man-Br_WNAu2.png",Gw="/assets/ginger_man-D_7vVZja.png",Yw="/assets/black_man-DZoPS0-N.png",Qw="/assets/brunette_woman-C5YdWLXO.png",Xw="/assets/blonde_woman-IP-2iqnM.png",Jw="/assets/ginger_woman-5AupqmXa.png",Zw="/assets/black_woman-QP95zNq-.png",Uh="/assets/none-BOBk4slU.png",LO={class:"modal_overlay",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},FO={class:"modal_holder"},UO={id:"modal-title",class:"modal_heading_holder inter font_size_xs"},BO={class:"modal_content_holder inter font_size_xs"},jO=["onClick"],zO=["onClick"],HO={__name:"profileAvatar",props:{globalUser:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=dn(),s=qt(()=>[{label:"Brown Hair",url:qw,ref:"brown_man"},{label:"Blonde Hair",url:Kw,ref:"blonde_man"},{label:"Ginger Hair",url:Gw,ref:"ginger_man"},{label:"Black Hair",url:Yw,ref:"black_man"},{label:"Brown Hair Woman",url:Qw,ref:"brown_woman"},{label:"Blonde Hair Woman",url:Xw,ref:"blonde_woman"},{label:"Ginger Hair Woman",url:Jw,ref:"ginger_woman"},{label:"Black Hair Woman",url:Zw,ref:"black_woman"},{label:"None",url:Uh,ref:"none"}]),i=t,r=e,o=tt("none"),a=u=>{o.value=u,localStorage.setItem("selectedAvatar",u)};is(()=>{const u=localStorage.getItem("selectedAvatar");u&&(o.value=u)});const l=async()=>{const u=Yc(),h=r.globalUser.userData,d=u.currentUser;await Cn(Be(Se,"users",h.uid||d.uid),{profileAvatar:o.value,profileEdited:Xn()},{merge:!0}),n.userData.profileAvatar=o.value,localStorage.removeItem("selectedAvatar"),i("close")};return(u,h)=>(Y(),nt("div",LO,[M("div",FO,[M("div",UO,[h[1]||(h[1]=M("span",{style:{width:"80%"}},"Profile Avatar",-1)),M("button",{class:"modal_close_button",onClick:h[0]||(h[0]=d=>u.$emit("close"))},"")]),M("div",BO,[(Y(!0),nt(xt,null,de(s.value,d=>(Y(),nt("div",{class:"modal_avatars_holder",key:d.ref},[d.ref===o.value?(Y(),nt("div",{key:0,class:"modal_avatar_selected",onClick:p=>a(d.ref),style:Is({backgroundImage:`url(${d.url})`,backgroundSize:"100% 100%",backgroundPosition:"center center",backgroundRepeat:"no-repeat"})},null,12,jO)):(Y(),nt("div",{key:1,class:"modal_avatar",onClick:p=>a(d.ref),style:Is({backgroundImage:`url(${d.url})`,backgroundSize:"100% 100%",backgroundPosition:"center center",backgroundRepeat:"no-repeat"})},null,12,zO))]))),128))]),M("button",{type:"submit",class:"modal_button inter font_size_xs",onClick:l}," Confirm ")])]))}},Fm=wn(HO,[["__scopeId","data-v-f54a08c5"]]),$O={class:"profile_container"},WO={class:"profile_header"},qO={class:"profile_edit_btn"},KO={class:"profile_info"},GO={class:"profile_avatar_wrapper"},YO={class:"pfp_edit_button"},QO={class:"profile_user_details font_size_s inter"},XO={class:"font_size_xxs"},JO={class:"profile_stats"},ZO=["onClick"],tM={class:"profile_stat_top inter font_size_xs"},eM={key:0,class:"profile_stat_value"},nM={key:0},sM={key:1},iM={key:1,class:"profile_stat_value"},rM={class:"profile_stat_icon"},oM={class:"profile_stat_label inter font_size_xs"},aM={__name:"profile",emits:["setPage"],setup(e,{emit:t}){const n=t,s=Rc(),i=dn(),r=tt(!1),o=tt(!1),a=tt(!1),l=tt(null),u={brown_man:qw,blonde_man:Kw,ginger_man:Gw,black_man:Yw,brown_woman:Qw,blonde_woman:Xw,ginger_woman:Jw,black_woman:Zw,none:Uh},h=qt(()=>{const U=i.userData?.profileAvatar||"none";return u[U]||Uh}),d=qt(()=>i.userData?.personalInfo.name||""),p=qt(()=>i.userData?.personalInfo.email||""),g=qt(()=>i.userData?.streak?.count||0),b=qt(()=>i.journalData&&i.journalData.length||0),w=qt(()=>[{label:"Very Sad",ref:"very_sad",icon:"far fa-sad-tear"},{label:"Sad",ref:"sad",icon:"far fa-frown"},{label:"Neutral",ref:"neutral",icon:"far fa-meh"},{label:"Happy",ref:"happy",icon:"far fa-grin"},{label:"Very Happy",ref:"very_happy",icon:"far fa-grin-beam"}]),v=tt([{label:"App Streak",value:g.value,icon:"fa fa-signal"},{label:"Journal Entries",value:b.value,icon:"fa fa-book"},{label:"Mood Overview",value:"",icon:"fas fa-chart-line"}]);is(()=>{l.value=i.userData;const U=new Date().toISOString().split("T")[0];if(!i.moodData||!i.moodData[U])return;r.value=!0;const T=i.moodData[U];for(const _ of w.value)if(_.ref===T.mood){v.value[2].value=_.icon;break}});const P=()=>{o.value=!0},O=async()=>{await Zk(Hn),s.push({name:"Login"})},k=()=>{a.value=!0},x=U=>{console.log("Image selected:",U.target.files[0])},L=U=>{U.label=="Mood Overview"&&n("setPage","moodTrends")};return(U,T)=>(Y(),nt(xt,null,[M("div",$O,[M("div",WO,[T[5]||(T[5]=M("div",{class:"profile_title font_size_s inter"},null,-1)),M("div",qO,[M("i",{class:"fas fa-edit",onClick:T[0]||(T[0]=_=>P())}),M("i",{class:"fas fa-sign-out-alt",onClick:T[1]||(T[1]=_=>O())})])]),M("div",KO,[M("div",GO,[M("div",{class:"profile_avatar",style:Is({backgroundImage:`url(${h.value})`,backgroundSize:"100% 100%",backgroundPosition:"center center",backgroundRepeat:"no-repeat"})},null,4)]),M("div",YO,[M("i",{class:"fas fa-edit",onClick:T[2]||(T[2]=_=>k())}),M("input",{type:"file",ref:"fileInput",style:{display:"none"},accept:"image/*",onChange:x},null,544)]),M("div",QO,[Re(Et(d.value)+" ",1),M("span",XO,Et(p.value),1)])]),M("div",JO,[(Y(!0),nt(xt,null,de(v.value,(_,I)=>(Y(),nt("div",{class:"profile_stat_card",key:I,onClick:C=>L(_)},[M("div",tM,[_.label==="Mood Overview"?(Y(),nt("div",eM,[r.value?(Y(),nt("div",nM,[M("i",{class:xn(_.value),style:{"font-size":"1.5rem"}},null,2),T[6]||(T[6]=Re(" ",-1))])):(Y(),nt("div",sM,[...T[7]||(T[7]=[M("i",{class:"far fa-meh",style:{"font-size":"1.5rem"}},null,-1),Re(" ",-1)])]))])):(Y(),nt("div",iM,Et(_.value),1)),M("div",rM,[M("i",{class:xn(_.icon),style:{color:"#87bfba"}},null,2)])]),M("div",oM,Et(_.label),1)],8,ZO))),128))])]),o.value?(Y(),Le(Lm,{key:0,onClose:T[3]||(T[3]=_=>o.value=!1),globalUser:Wn(i),viewPoint:Lm},null,8,["globalUser"])):nn("",!0),a.value?(Y(),Le(Fm,{key:1,onClose:T[4]||(T[4]=_=>a.value=!1),globalUser:Wn(i),viewPoint:Fm},null,8,["globalUser"])):nn("",!0)],64))}},tE=wn(aM,[["__scopeId","data-v-64fe8d6d"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ca(e){return e+.5|0}const Zs=(e,t,n)=>Math.max(Math.min(e,n),t);function Io(e){return Zs(Ca(e*2.55),0,255)}function ci(e){return Zs(Ca(e*255),0,255)}function fs(e){return Zs(Ca(e/2.55)/100,0,1)}function Um(e){return Zs(Ca(e*100),0,100)}const fn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Bh=[..."0123456789ABCDEF"],lM=e=>Bh[e&15],cM=e=>Bh[(e&240)>>4]+Bh[e&15],Xa=e=>(e&240)>>4===(e&15),uM=e=>Xa(e.r)&&Xa(e.g)&&Xa(e.b)&&Xa(e.a);function hM(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&fn[e[1]]*17,g:255&fn[e[2]]*17,b:255&fn[e[3]]*17,a:t===5?fn[e[4]]*17:255}:(t===7||t===9)&&(n={r:fn[e[1]]<<4|fn[e[2]],g:fn[e[3]]<<4|fn[e[4]],b:fn[e[5]]<<4|fn[e[6]],a:t===9?fn[e[7]]<<4|fn[e[8]]:255})),n}const dM=(e,t)=>e<255?t(e):"";function fM(e){var t=uM(e)?lM:cM;return e?"#"+t(e.r)+t(e.g)+t(e.b)+dM(e.a,t):void 0}const pM=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function eE(e,t,n){const s=t*Math.min(n,1-n),i=(r,o=(r+e/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function gM(e,t,n){const s=(i,r=(i+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function mM(e,t,n){const s=eE(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)s[i]*=1-t-n,s[i]+=t;return s}function _M(e,t,n,s,i){return e===i?(t-n)/s+(t<n?6:0):t===i?(n-e)/s+2:(e-t)/s+4}function af(e){const n=e.r/255,s=e.g/255,i=e.b/255,r=Math.max(n,s,i),o=Math.min(n,s,i),a=(r+o)/2;let l,u,h;return r!==o&&(h=r-o,u=a>.5?h/(2-r-o):h/(r+o),l=_M(n,s,i,h,r),l=l*60+.5),[l|0,u||0,a]}function lf(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(ci)}function cf(e,t,n){return lf(eE,e,t,n)}function yM(e,t,n){return lf(mM,e,t,n)}function vM(e,t,n){return lf(gM,e,t,n)}function nE(e){return(e%360+360)%360}function bM(e){const t=pM.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?Io(+t[5]):ci(+t[5]));const i=nE(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=yM(i,r,o):t[1]==="hsv"?s=vM(i,r,o):s=cf(i,r,o),{r:s[0],g:s[1],b:s[2],a:n}}function wM(e,t){var n=af(e);n[0]=nE(n[0]+t),n=cf(n),e.r=n[0],e.g=n[1],e.b=n[2]}function EM(e){if(!e)return;const t=af(e),n=t[0],s=Um(t[1]),i=Um(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${i}%, ${fs(e.a)})`:`hsl(${n}, ${s}%, ${i}%)`}const Bm={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},jm={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function TM(){const e={},t=Object.keys(jm),n=Object.keys(Bm);let s,i,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],i=0;i<n.length;i++)r=n[i],a=a.replace(r,Bm[r]);r=parseInt(jm[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let Ja;function IM(e){Ja||(Ja=TM(),Ja.transparent=[0,0,0,0]);const t=Ja[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const AM=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function SM(e){const t=AM.exec(e);let n=255,s,i,r;if(t){if(t[7]!==s){const o=+t[7];n=t[8]?Io(o):Zs(o*255,0,255)}return s=+t[1],i=+t[3],r=+t[5],s=255&(t[2]?Io(s):Zs(s,0,255)),i=255&(t[4]?Io(i):Zs(i,0,255)),r=255&(t[6]?Io(r):Zs(r,0,255)),{r:s,g:i,b:r,a:n}}}function RM(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${fs(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Hu=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,ur=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function CM(e,t,n){const s=ur(fs(e.r)),i=ur(fs(e.g)),r=ur(fs(e.b));return{r:ci(Hu(s+n*(ur(fs(t.r))-s))),g:ci(Hu(i+n*(ur(fs(t.g))-i))),b:ci(Hu(r+n*(ur(fs(t.b))-r))),a:e.a+n*(t.a-e.a)}}function Za(e,t,n){if(e){let s=af(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=cf(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function sE(e,t){return e&&Object.assign(t||{},e)}function zm(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=ci(e[3]))):(t=sE(e,{r:0,g:0,b:0,a:1}),t.a=ci(t.a)),t}function PM(e){return e.charAt(0)==="r"?SM(e):bM(e)}class ca{constructor(t){if(t instanceof ca)return t;const n=typeof t;let s;n==="object"?s=zm(t):n==="string"&&(s=hM(t)||IM(t)||PM(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=sE(this._rgb);return t&&(t.a=fs(t.a)),t}set rgb(t){this._rgb=zm(t)}rgbString(){return this._valid?RM(this._rgb):void 0}hexString(){return this._valid?fM(this._rgb):void 0}hslString(){return this._valid?EM(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,i=t.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=s.a-i.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-u,s.r=255&u*s.r+r*i.r+.5,s.g=255&u*s.g+r*i.g+.5,s.b=255&u*s.b+r*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=CM(this._rgb,t._rgb,n)),this}clone(){return new ca(this.rgb)}alpha(t){return this._rgb.a=ci(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Ca(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Za(this._rgb,2,t),this}darken(t){return Za(this._rgb,2,-t),this}saturate(t){return Za(this._rgb,1,t),this}desaturate(t){return Za(this._rgb,1,-t),this}rotate(t){return wM(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function cs(){}const xM=(()=>{let e=0;return()=>e++})();function je(e){return e==null}function Pe(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Dt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function ks(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Vn(e,t){return ks(e)?e:t}function Ut(e,t){return typeof e>"u"?t:e}const kM=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,iE=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Wt(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Ft(e,t,n,s){let i,r,o;if(Pe(e))for(r=e.length,i=0;i<r;i++)t.call(n,e[i],i);else if(Dt(e))for(o=Object.keys(e),r=o.length,i=0;i<r;i++)t.call(n,e[o[i]],o[i])}function ic(e,t){let n,s,i,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(i=e[n],r=t[n],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function rc(e){if(Pe(e))return e.map(rc);if(Dt(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let i=0;for(;i<s;++i)t[n[i]]=rc(e[n[i]]);return t}return e}function rE(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function DM(e,t,n,s){if(!rE(e))return;const i=t[e],r=n[e];Dt(i)&&Dt(r)?ua(i,r,s):t[e]=rc(r)}function ua(e,t,n){const s=Pe(t)?t:[t],i=s.length;if(!Dt(e))return e;n=n||{};const r=n.merger||DM;let o;for(let a=0;a<i;++a){if(o=s[a],!Dt(o))continue;const l=Object.keys(o);for(let u=0,h=l.length;u<h;++u)r(l[u],e,o,n)}return e}function Ho(e,t){return ua(e,t,{merger:OM})}function OM(e,t,n){if(!rE(e))return;const s=t[e],i=n[e];Dt(s)&&Dt(i)?Ho(s,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=rc(i))}const Hm={"":e=>e,x:e=>e.x,y:e=>e.y};function MM(e){const t=e.split("."),n=[];let s="";for(const i of t)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function NM(e){const t=MM(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function ha(e,t){return(Hm[t]||(Hm[t]=NM(t)))(e)}function uf(e){return e.charAt(0).toUpperCase()+e.slice(1)}const oc=e=>typeof e<"u",bi=e=>typeof e=="function",$m=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function VM(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Yt=Math.PI,ae=2*Yt,ac=Number.POSITIVE_INFINITY,LM=Yt/180,ge=Yt/2,Ci=Yt/4,Wm=Yt*2/3,qm=Math.sign;function FM(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((i,r)=>i-r).pop(),t}function UM(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function lc(e){return!UM(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Vi(e){return e*(Yt/180)}function BM(e){return e*(180/Yt)}function oE(e,t){const n=t.x-e.x,s=t.y-e.y,i=Math.sqrt(n*n+s*s);let r=Math.atan2(s,n);return r<-.5*Yt&&(r+=ae),{angle:r,distance:i}}function jM(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function jn(e){return(e%ae+ae)%ae}function cc(e,t,n,s){const i=jn(e),r=jn(t),o=jn(n),a=jn(r-i),l=jn(o-i),u=jn(i-r),h=jn(i-o);return i===r||i===o||s&&r===o||a>l&&u<h}function mn(e,t,n){return Math.max(t,Math.min(n,e))}function zM(e){return mn(e,-32768,32767)}function Ao(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function hf(e,t,n){n=n||(o=>e[o]<t);let s=e.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,n(r)?i=r:s=r;return{lo:i,hi:s}}const jh=(e,t,n,s)=>hf(e,n,s?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),HM=(e,t,n)=>hf(e,n,s=>e[s][t]>=n);function $M(e,t,n){let s=0,i=e.length;for(;s<i&&e[s]<t;)s++;for(;i>s&&e[i-1]>n;)i--;return s>0||i<e.length?e.slice(s,i):e}const aE=["push","pop","shift","splice","unshift"];function WM(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),aE.forEach(n=>{const s="_onData"+uf(n),i=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function Km(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,i=s.indexOf(t);i!==-1&&s.splice(i,1),!(s.length>0)&&(aE.forEach(r=>{delete e[r]}),delete e._chartjs)}function qM(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const lE=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function cE(e,t){let n=[],s=!1;return function(...i){n=i,s||(s=!0,lE.call(window,()=>{s=!1,e.apply(t,n)}))}}function KM(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const uE=e=>e==="start"?"left":e==="end"?"right":"center",cn=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,GM=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t,tl=e=>e===0||e===1,Gm=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*ae/n)),Ym=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*ae/n)+1,$o={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*ge)+1,easeOutSine:e=>Math.sin(e*ge),easeInOutSine:e=>-.5*(Math.cos(Yt*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>tl(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>tl(e)?e:Gm(e,.075,.3),easeOutElastic:e=>tl(e)?e:Ym(e,.075,.3),easeInOutElastic(e){return tl(e)?e:e<.5?.5*Gm(e*2,.1125,.45):.5+.5*Ym(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-$o.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?$o.easeInBounce(e*2)*.5:$o.easeOutBounce(e*2-1)*.5+.5};function hE(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Qm(e){return hE(e)?e:new ca(e)}function $u(e){return hE(e)?e:new ca(e).saturate(.5).darken(.1).hexString()}const YM=["x","y","borderWidth","radius","tension"],QM=["color","borderColor","backgroundColor"];function XM(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:QM},numbers:{type:"number",properties:YM}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function JM(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Xm=new Map;function ZM(e,t){t=t||{};const n=e+JSON.stringify(t);let s=Xm.get(n);return s||(s=new Intl.NumberFormat(e,t),Xm.set(n,s)),s}function tN(e,t,n){return ZM(t,n).format(e)}const eN={values(e){return Pe(e)?e:""+e}};var nN={formatters:eN};function sN(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:nN.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Qi=Object.create(null),zh=Object.create(null);function Wo(e,t){if(!t)return e;const n=t.split(".");for(let s=0,i=n.length;s<i;++s){const r=n[s];e=e[r]||(e[r]=Object.create(null))}return e}function Wu(e,t,n){return typeof t=="string"?ua(Wo(e,t),n):ua(Wo(e,""),t)}class iN{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>$u(i.backgroundColor),this.hoverBorderColor=(s,i)=>$u(i.borderColor),this.hoverColor=(s,i)=>$u(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return Wu(this,t,n)}get(t){return Wo(this,t)}describe(t,n){return Wu(zh,t,n)}override(t,n){return Wu(Qi,t,n)}route(t,n,s,i){const r=Wo(this,t),o=Wo(this,s),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=o[i];return Dt(l)?Object.assign({},u,l):Ut(l,u)},set(l){this[a]=l}}})}apply(t){t.forEach(n=>n(this))}}var se=new iN({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[XM,JM,sN]);function rN(e){return!e||je(e.size)||je(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Jm(e,t,n,s,i){let r=t[i];return r||(r=t[i]=e.measureText(i).width,n.push(i)),r>s&&(s=r),s}function Pi(e,t,n){const s=e.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((t-i)*s)/s+i}function Zm(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function t_(e,t,n,s){dE(e,t,n,s,null)}function dE(e,t,n,s,i){let r,o,a,l,u,h,d,p;const g=t.pointStyle,b=t.rotation,w=t.radius;let v=(b||0)*LM;if(g&&typeof g=="object"&&(r=g.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(v),e.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),e.restore();return}if(!(isNaN(w)||w<=0)){switch(e.beginPath(),g){default:i?e.ellipse(n,s,i/2,w,0,0,ae):e.arc(n,s,w,0,ae),e.closePath();break;case"triangle":h=i?i/2:w,e.moveTo(n+Math.sin(v)*h,s-Math.cos(v)*w),v+=Wm,e.lineTo(n+Math.sin(v)*h,s-Math.cos(v)*w),v+=Wm,e.lineTo(n+Math.sin(v)*h,s-Math.cos(v)*w),e.closePath();break;case"rectRounded":u=w*.516,l=w-u,o=Math.cos(v+Ci)*l,d=Math.cos(v+Ci)*(i?i/2-u:l),a=Math.sin(v+Ci)*l,p=Math.sin(v+Ci)*(i?i/2-u:l),e.arc(n-d,s-a,u,v-Yt,v-ge),e.arc(n+p,s-o,u,v-ge,v),e.arc(n+d,s+a,u,v,v+ge),e.arc(n-p,s+o,u,v+ge,v+Yt),e.closePath();break;case"rect":if(!b){l=Math.SQRT1_2*w,h=i?i/2:l,e.rect(n-h,s-l,2*h,2*l);break}v+=Ci;case"rectRot":d=Math.cos(v)*(i?i/2:w),o=Math.cos(v)*w,a=Math.sin(v)*w,p=Math.sin(v)*(i?i/2:w),e.moveTo(n-d,s-a),e.lineTo(n+p,s-o),e.lineTo(n+d,s+a),e.lineTo(n-p,s+o),e.closePath();break;case"crossRot":v+=Ci;case"cross":d=Math.cos(v)*(i?i/2:w),o=Math.cos(v)*w,a=Math.sin(v)*w,p=Math.sin(v)*(i?i/2:w),e.moveTo(n-d,s-a),e.lineTo(n+d,s+a),e.moveTo(n+p,s-o),e.lineTo(n-p,s+o);break;case"star":d=Math.cos(v)*(i?i/2:w),o=Math.cos(v)*w,a=Math.sin(v)*w,p=Math.sin(v)*(i?i/2:w),e.moveTo(n-d,s-a),e.lineTo(n+d,s+a),e.moveTo(n+p,s-o),e.lineTo(n-p,s+o),v+=Ci,d=Math.cos(v)*(i?i/2:w),o=Math.cos(v)*w,a=Math.sin(v)*w,p=Math.sin(v)*(i?i/2:w),e.moveTo(n-d,s-a),e.lineTo(n+d,s+a),e.moveTo(n+p,s-o),e.lineTo(n-p,s+o);break;case"line":o=i?i/2:Math.cos(v)*w,a=Math.sin(v)*w,e.moveTo(n-o,s-a),e.lineTo(n+o,s+a);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(v)*(i?i/2:w),s+Math.sin(v)*w);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function fE(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function df(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function ff(e){e.restore()}function oN(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),je(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function aN(e,t,n,s,i){if(i.strikethrough||i.underline){const r=e.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,u=n+r.actualBoundingBoxDescent,h=i.strikethrough?(l+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,h),e.lineTo(a,h),e.stroke()}}function lN(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function uc(e,t,n,s,i,r={}){const o=Pe(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,u;for(e.save(),e.font=i.string,oN(e,r),l=0;l<o.length;++l)u=o[l],r.backdrop&&lN(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),je(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(u,n,s,r.maxWidth)),e.fillText(u,n,s,r.maxWidth),aN(e,n,s,u,r),s+=Number(i.lineHeight);e.restore()}function Hh(e,t){const{x:n,y:s,w:i,h:r,radius:o}=t;e.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*Yt,Yt,!0),e.lineTo(n,s+r-o.bottomLeft),e.arc(n+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,Yt,ge,!0),e.lineTo(n+i-o.bottomRight,s+r),e.arc(n+i-o.bottomRight,s+r-o.bottomRight,o.bottomRight,ge,0,!0),e.lineTo(n+i,s+o.topRight),e.arc(n+i-o.topRight,s+o.topRight,o.topRight,0,-ge,!0),e.lineTo(n+o.topLeft,s)}const cN=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,uN=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function hN(e,t){const n=(""+e).match(cN);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const dN=e=>+e||0;function pf(e,t){const n={},s=Dt(t),i=s?Object.keys(t):t,r=Dt(e)?s?o=>Ut(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of i)n[o]=dN(r(o));return n}function fN(e){return pf(e,{top:"y",right:"x",bottom:"y",left:"x"})}function qo(e){return pf(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Dn(e){const t=fN(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function sn(e,t){e=e||{},t=t||se.font;let n=Ut(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=Ut(e.style,t.style);s&&!(""+s).match(uN)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:Ut(e.family,t.family),lineHeight:hN(Ut(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:Ut(e.weight,t.weight),string:""};return i.string=rN(i),i}function el(e,t,n,s){let i,r,o;for(i=0,r=e.length;i<r;++i)if(o=e[i],o!==void 0&&o!==void 0)return o}function pN(e,t,n){const{min:s,max:i}=e,r=iE(t,(i-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(i,r)}}function qr(e,t){return Object.assign(Object.create(e),t)}function gf(e,t=[""],n,s,i=()=>e[0]){const r=n||e;typeof s>"u"&&(s=_E("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:s,_getTarget:i,override:a=>gf([a,...e],t,r,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return gE(a,l,()=>EN(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return n_(a).includes(l)},ownKeys(a){return n_(a)},set(a,l,u){const h=a._storage||(a._storage=i());return a[l]=h[l]=u,delete a._keys,!0}})}function Lr(e,t,n,s){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:pE(e,s),setContext:r=>Lr(e,r,n,s),override:r=>Lr(e.override(r),t,n,s)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return gE(r,o,()=>mN(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function pE(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:s,isScriptable:bi(n)?n:()=>n,isIndexable:bi(s)?s:()=>s}}const gN=(e,t)=>e?e+uf(t):t,mf=(e,t)=>Dt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function gE(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=n();return e[t]=s,s}function mN(e,t,n){const{_proxy:s,_context:i,_subProxy:r,_descriptors:o}=e;let a=s[t];return bi(a)&&o.isScriptable(t)&&(a=_N(t,a,e,n)),Pe(a)&&a.length&&(a=yN(t,a,e,o.isIndexable)),mf(t,a)&&(a=Lr(a,i,r&&r[t],o)),a}function _N(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||s);return a.delete(e),mf(e,l)&&(l=_f(i._scopes,i,e,l)),l}function yN(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&s(e))return t[r.index%t.length];if(Dt(t[0])){const l=t,u=i._scopes.filter(h=>h!==l);t=[];for(const h of l){const d=_f(u,i,e,h);t.push(Lr(d,r,o&&o[e],a))}}return t}function mE(e,t,n){return bi(e)?e(t,n):e}const vN=(e,t)=>e===!0?t:typeof e=="string"?ha(t,e):void 0;function bN(e,t,n,s,i){for(const r of t){const o=vN(n,r);if(o){e.add(o);const a=mE(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function _f(e,t,n,s){const i=t._rootScopes,r=mE(t._fallback,n,s),o=[...e,...i],a=new Set;a.add(s);let l=e_(a,o,n,r||n,s);return l===null||typeof r<"u"&&r!==n&&(l=e_(a,o,r,l,s),l===null)?!1:gf(Array.from(a),[""],i,r,()=>wN(t,n,s))}function e_(e,t,n,s,i){for(;n;)n=bN(e,t,n,s,i);return n}function wN(e,t,n){const s=e._getTarget();t in s||(s[t]={});const i=s[t];return Pe(i)&&Dt(n)?n:i||{}}function EN(e,t,n,s){let i;for(const r of t)if(i=_E(gN(r,e),n),typeof i<"u")return mf(e,i)?_f(n,s,e,i):i}function _E(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function n_(e){let t=e._keys;return t||(t=e._keys=TN(e._scopes)),t}function TN(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(i=>!i.startsWith("_")))t.add(s);return Array.from(t)}function yf(){return typeof window<"u"&&typeof document<"u"}function vf(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function hc(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const Qc=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function IN(e,t){return Qc(e).getPropertyValue(t)}const AN=["top","right","bottom","left"];function ji(e,t,n){const s={};n=n?"-"+n:"";for(let i=0;i<4;i++){const r=AN[i];s[r]=parseFloat(e[t+"-"+r+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const SN=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function RN(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:i,offsetY:r}=s;let o=!1,a,l;if(SN(i,r,e.target))a=i,l=r;else{const u=t.getBoundingClientRect();a=s.clientX-u.left,l=s.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function Oi(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,i=Qc(n),r=i.boxSizing==="border-box",o=ji(i,"padding"),a=ji(i,"border","width"),{x:l,y:u,box:h}=RN(e,n),d=o.left+(h&&a.left),p=o.top+(h&&a.top);let{width:g,height:b}=t;return r&&(g-=o.width+a.width,b-=o.height+a.height),{x:Math.round((l-d)/g*n.width/s),y:Math.round((u-p)/b*n.height/s)}}function CN(e,t,n){let s,i;if(t===void 0||n===void 0){const r=e&&vf(e);if(!r)t=e.clientWidth,n=e.clientHeight;else{const o=r.getBoundingClientRect(),a=Qc(r),l=ji(a,"border","width"),u=ji(a,"padding");t=o.width-u.width-l.width,n=o.height-u.height-l.height,s=hc(a.maxWidth,r,"clientWidth"),i=hc(a.maxHeight,r,"clientHeight")}}return{width:t,height:n,maxWidth:s||ac,maxHeight:i||ac}}const ti=e=>Math.round(e*10)/10;function PN(e,t,n,s){const i=Qc(e),r=ji(i,"margin"),o=hc(i.maxWidth,e,"clientWidth")||ac,a=hc(i.maxHeight,e,"clientHeight")||ac,l=CN(e,t,n);let{width:u,height:h}=l;if(i.boxSizing==="content-box"){const p=ji(i,"border","width"),g=ji(i,"padding");u-=g.width+p.width,h-=g.height+p.height}return u=Math.max(0,u-r.width),h=Math.max(0,s?u/s:h-r.height),u=ti(Math.min(u,o,l.maxWidth)),h=ti(Math.min(h,a,l.maxHeight)),u&&!h&&(h=ti(u/2)),(t!==void 0||n!==void 0)&&s&&l.height&&h>l.height&&(h=l.height,u=ti(Math.floor(h*s))),{width:u,height:h}}function s_(e,t,n){const s=t||1,i=ti(e.height*s),r=ti(e.width*s);e.height=ti(e.height),e.width=ti(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==i||o.width!==r?(e.currentDevicePixelRatio=s,o.height=i,o.width=r,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const xN=(function(){let e=!1;try{const t={get passive(){return e=!0,!1}};yf()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e})();function i_(e,t){const n=IN(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}const kN=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},DN=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Sr(e,t,n){return e?kN(t,n):DN()}function yE(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function vE(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function nl(e,t,n){return e.options.clip?e[n]:t[n]}function ON(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:nl(n,t,"left"),right:nl(n,t,"right"),top:nl(s,t,"top"),bottom:nl(s,t,"bottom")}:t}function MN(e,t){const n=t._clip;if(n.disabled)return!1;const s=ON(t,e.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class NN{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,i){const r=n.listeners[i],o=n.duration;r.forEach(a=>a({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=lE.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,s,t,"progress")),r.length||(s.running=!1,this._notify(i,s,t,"complete"),s.initial=!1),n+=r.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var us=new NN;const r_="transparent",VN={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=Qm(e||r_),i=s.valid&&Qm(t||r_);return i&&i.valid?i.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class LN{constructor(t,n,s,i){const r=n[s];i=el([t.to,i,r,t.from]);const o=el([t.from,r,i]);this._active=!0,this._fn=t.fn||VN[t.type||typeof o],this._easing=$o[t.easing]||$o.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=el([t.to,n,i,t.from]),this._from=el([t.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<s),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=r;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][n]()}}class bE{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Dt(t))return;const n=Object.keys(se.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!Dt(r))return;const o={};for(const a of n)o[a]=r[a];(Pe(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,n){const s=n.options,i=UN(t,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&FN(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,n){const s=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){i.push(...this._animateOptions(t,n));continue}const h=n[u];let d=r[u];const p=s.get(u);if(d)if(p&&d.active()){d.update(p,h,a);continue}else d.cancel();if(!p||!p.duration){t[u]=h;continue}r[u]=d=new LN(p,t,u,h),i.push(d)}return i}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return us.add(this._chart,s),!0}}function FN(e,t){const n=[],s=Object.keys(t);for(let i=0;i<s.length;i++){const r=e[s[i]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function UN(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function o_(e,t){const n=e&&e.options||{},s=n.reverse,i=n.min===void 0?t:0,r=n.max===void 0?t:0;return{start:s?r:i,end:s?i:r}}function BN(e,t,n){if(n===!1)return!1;const s=o_(e,n),i=o_(t,n);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function jN(e){let t,n,s,i;return Dt(e)?(t=e.top,n=e.right,s=e.bottom,i=e.left):t=n=s=i=e,{top:t,right:n,bottom:s,left:i,disabled:e===!1}}function wE(e,t){const n=[],s=e._getSortedDatasetMetas(t);let i,r;for(i=0,r=s.length;i<r;++i)n.push(s[i].index);return n}function a_(e,t,n,s={}){const i=e.keys,r=s.mode==="single";let o,a,l,u;if(t===null)return;let h=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(h=!0,s.all)continue;break}u=e.values[l],ks(u)&&(r||t===0||qm(t)===qm(u))&&(t+=u)}return!h&&!s.all?0:t}function zN(e,t){const{iScale:n,vScale:s}=t,i=n.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,u,h;for(l=0,u=o.length;l<u;++l)h=o[l],a[l]={[i]:h,[r]:e[h]};return a}function qu(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function HN(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function $N(e){const{min:t,max:n,minDefined:s,maxDefined:i}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function WN(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function l_(e,t,n,s){for(const i of t.getMatchingVisibleMetas(s).reverse()){const r=e[i.index];if(n&&r>0||!n&&r<0)return i.index}return null}function c_(e,t){const{chart:n,_cachedMeta:s}=e,i=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,u=o.axis,h=HN(r,o,s),d=t.length;let p;for(let g=0;g<d;++g){const b=t[g],{[l]:w,[u]:v}=b,P=b._stacks||(b._stacks={});p=P[u]=WN(i,h,w),p[a]=v,p._top=l_(p,o,!0,s.type),p._bottom=l_(p,o,!1,s.type);const O=p._visualValues||(p._visualValues={});O[a]=v}}function Ku(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function qN(e,t){return qr(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function KN(e,t,n){return qr(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function ho(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const i of t){const r=i._stacks;if(!r||r[s]===void 0||r[s][n]===void 0)return;delete r[s][n],r[s]._visualValues!==void 0&&r[s]._visualValues[n]!==void 0&&delete r[s]._visualValues[n]}}}const Gu=e=>e==="reset"||e==="none",u_=(e,t)=>t?e:Object.assign({},e),GN=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:wE(n,!0),values:null};class EE{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=qu(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ho(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),i=(d,p,g,b)=>d==="x"?p:d==="r"?b:g,r=n.xAxisID=Ut(s.xAxisID,Ku(t,"x")),o=n.yAxisID=Ut(s.yAxisID,Ku(t,"y")),a=n.rAxisID=Ut(s.rAxisID,Ku(t,"r")),l=n.indexAxis,u=n.iAxisID=i(l,r,o,a),h=n.vAxisID=i(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Km(this._data,this),t._stacked&&ho(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(Dt(n)){const i=this._cachedMeta;this._data=zN(n,i)}else if(s!==n){if(s){Km(s,this);const i=this._cachedMeta;ho(i),i._parsed=[]}n&&Object.isExtensible(n)&&WM(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=n._stacked;n._stacked=qu(n.vScale,n),n.stack!==s.stack&&(i=!0,ho(n),n.stack=s.stack),this._resyncElements(t),(i||r!==n._stacked)&&(c_(this,n._parsed),n._stacked=qu(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:o}=s,a=r.axis;let l=t===0&&n===i.length?!0:s._sorted,u=t>0&&s._parsed[t-1],h,d,p;if(this._parsing===!1)s._parsed=i,s._sorted=!0,p=i;else{Pe(i[t])?p=this.parseArrayData(s,i,t,n):Dt(i[t])?p=this.parseObjectData(s,i,t,n):p=this.parsePrimitiveData(s,i,t,n);const g=()=>d[a]===null||u&&d[a]<u[a];for(h=0;h<n;++h)s._parsed[h+t]=d=p[h],l&&(g()&&(l=!1),u=d);s._sorted=l}o&&c_(this,p)}parsePrimitiveData(t,n,s,i){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,u=r.getLabels(),h=r===o,d=new Array(i);let p,g,b;for(p=0,g=i;p<g;++p)b=p+s,d[p]={[a]:h||r.parse(u[b],b),[l]:o.parse(n[b],b)};return d}parseArrayData(t,n,s,i){const{xScale:r,yScale:o}=t,a=new Array(i);let l,u,h,d;for(l=0,u=i;l<u;++l)h=l+s,d=n[h],a[l]={x:r.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(t,n,s,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(i);let h,d,p,g;for(h=0,d=i;h<d;++h)p=h+s,g=n[p],u[h]={x:r.parse(ha(g,a),p),y:o.parse(ha(g,l),p)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const i=this.chart,r=this._cachedMeta,o=n[t.axis],a={keys:wE(i,!0),values:n._stacks[t.axis]._visualValues};return a_(a,o,r.index,{mode:s})}updateRangeFromParsed(t,n,s,i){const r=s[n.axis];let o=r===null?NaN:r;const a=i&&s._stacks[n.axis];i&&a&&(i.values=a,o=a_(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&t===s.iScale,o=i.length,a=this._getOtherScale(t),l=GN(n,s,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=$N(a);let p,g;function b(){g=i[p];const w=g[a.axis];return!ks(g[t.axis])||h>w||d<w}for(p=0;p<o&&!(!b()&&(this.updateRangeFromParsed(u,t,g,l),r));++p);if(r){for(p=o-1;p>=0;--p)if(!b()){this.updateRangeFromParsed(u,t,g,l);break}}return u}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let i,r,o;for(i=0,r=n.length;i<r;++i)o=n[i][t.axis],ks(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,i=n.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=jN(Ut(this.options.clip,BN(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,i=s.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,u=this.options.drawActiveElementsOnTop;let h;for(s.dataset&&s.dataset.draw(t,r,a,l),h=a;h<a+l;++h){const d=i[h];d.hidden||(d.active&&u?o.push(d):d.draw(t,r))}for(h=0;h<o.length;++h)o[h].draw(t,r)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=KN(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=qN(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const i=n==="active",r=this._cachedDataOpts,o=t+"-"+n,a=r[o],l=this.enableOptionSharing&&oc(s);if(a)return u_(a,l);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,t),d=i?[`${t}Hover`,"hover",t,""]:[t,""],p=u.getOptionScopes(this.getDataset(),h),g=Object.keys(se.elements[t]),b=()=>this.getContext(s,i,n),w=u.resolveNamedOptions(p,g,b,d);return w.$shared&&(w.$shared=l,r[o]=Object.freeze(u_(w,l))),w}_resolveAnimations(t,n,s){const i=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(i.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),p=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(p,this.getContext(t,s,n))}const u=new bE(i,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||Gu(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),i=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(n,r)||r!==i;return this.updateSharedOptions(r,n,s),{sharedOptions:r,includeOptions:o}}updateElement(t,n,s,i){Gu(i)?Object.assign(t,s):this._resolveAnimations(n,i).update(t,s)}updateSharedOptions(t,n,s){t&&!Gu(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,i){t.active=i;const r=this.getStyle(n,i);this._resolveAnimations(n,s,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const i=s.length,r=n.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,n,s=!0){const i=this._cachedMeta,r=i.data,o=t+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=o;a--)u[a]=u[a-n]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,n),s&&this.updateElements(r,t,n,"reset")}updateElements(t,n,s,i){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(t,n);s._stacked&&ho(s,i)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,i]=t;this[n](s,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function YN(e,t,n){let s=1,i=1,r=0,o=0;if(t<ae){const a=e,l=a+t,u=Math.cos(a),h=Math.sin(a),d=Math.cos(l),p=Math.sin(l),g=(k,x,L)=>cc(k,a,l,!0)?1:Math.max(x,x*n,L,L*n),b=(k,x,L)=>cc(k,a,l,!0)?-1:Math.min(x,x*n,L,L*n),w=g(0,u,d),v=g(ge,h,p),P=b(Yt,u,d),O=b(Yt+ge,h,p);s=(w-P)/2,i=(v-O)/2,r=-(w+P)/2,o=-(v+O)/2}return{ratioX:s,ratioY:i,offsetX:r,offsetY:o}}class QN extends EE{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data,{labels:{pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=t.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,u)=>{const d=t.getDatasetMeta(0).controller.getStyle(u);return{text:l,fillStyle:d.backgroundColor,fontColor:r,hidden:!t.getDataVisibility(u),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:i,pointStyle:s,borderRadius:o&&(a||d.borderRadius),index:u}}):[]}},onClick(t,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}};constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let r=l=>+s[l];if(Dt(s[t])){const{key:l="value"}=this._parsing;r=u=>+ha(s[u],l)}let o,a;for(o=t,a=t+n;o<a;++o)i._parsed[o]=r(o)}}_getRotation(){return Vi(this.options.rotation-90)}_getCircumference(){return Vi(this.options.circumference)}_getRotationExtents(){let t=ae,n=-ae;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),n=Math.max(n,r+o)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:s}=n,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(kM(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:p,ratioY:g,offsetX:b,offsetY:w}=YN(d,h,l),v=(s.width-o)/p,P=(s.height-o)/g,O=Math.max(Math.min(v,P)/2,0),k=iE(this.options.radius,O),x=Math.max(k*l,0),L=(k-x)/this._getVisibleDatasetWeightTotal();this.offsetX=b*k,this.offsetY=w*k,i.total=this.calculateTotal(),this.outerRadius=k-L*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-L*u,0),this.updateElements(r,0,r.length,t)}_circumference(t,n){const s=this.options,i=this._cachedMeta,r=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/ae)}updateElements(t,n,s,i){const r=i==="reset",o=this.chart,a=o.chartArea,u=o.options.animation,h=(a.left+a.right)/2,d=(a.top+a.bottom)/2,p=r&&u.animateScale,g=p?0:this.innerRadius,b=p?0:this.outerRadius,{sharedOptions:w,includeOptions:v}=this._getSharedOptions(n,i);let P=this._getRotation(),O;for(O=0;O<n;++O)P+=this._circumference(O,r);for(O=n;O<n+s;++O){const k=this._circumference(O,r),x=t[O],L={x:h+this.offsetX,y:d+this.offsetY,startAngle:P,endAngle:P+k,circumference:k,outerRadius:b,innerRadius:g};v&&(L.options=w||this.resolveDataElementOptions(O,x.active?"active":i)),P+=k,this.updateElement(x,O,L,i)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let s=0,i;for(i=0;i<n.length;i++){const r=t._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?ae*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=tN(n._parsed[t],s.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let n=0;const s=this.chart;let i,r,o,a,l;if(!t){for(i=0,r=s.data.datasets.length;i<r;++i)if(s.isDatasetVisible(i)){o=s.getDatasetMeta(i),t=o.data,a=o.controller;break}}if(!t)return 0;for(i=0,r=t.length;i<r;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let s=0,i=t.length;s<i;++s){const r=this.resolveDataElementOptions(s);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(t){return Math.max(Ut(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class XN extends QN{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function xi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class bf{static override(t){Object.assign(bf.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return xi()}parse(){return xi()}format(){return xi()}add(){return xi()}diff(){return xi()}startOf(){return xi()}endOf(){return xi()}}var JN={_date:bf};function ZN(e,t,n,s){const{controller:i,data:r,_sorted:o}=e,a=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const u=a._reversePixels?HM:jh;if(s){if(i._sharedOptions){const h=r[0],d=typeof h.getRange=="function"&&h.getRange(t);if(d){const p=u(r,t,n-d),g=u(r,t,n+d);return{lo:p.lo,hi:g.hi}}}}else{const h=u(r,t,n);if(l){const{vScale:d}=i._cachedMeta,{_parsed:p}=e,g=p.slice(0,h.lo+1).reverse().findIndex(w=>!je(w[d.axis]));h.lo-=Math.max(0,g);const b=p.slice(h.hi).findIndex(w=>!je(w[d.axis]));h.hi+=Math.max(0,b)}return h}}return{lo:0,hi:r.length-1}}function Xc(e,t,n,s,i){const r=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=r.length;a<l;++a){const{index:u,data:h}=r[a],{lo:d,hi:p}=ZN(r[a],t,o,i);for(let g=d;g<=p;++g){const b=h[g];b.skip||s(b,u,g)}}}function tV(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,i){const r=t?Math.abs(s.x-i.x):0,o=n?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Yu(e,t,n,s,i){const r=[];return!i&&!e.isPointInArea(t)||Xc(e,n,t,function(a,l,u){!i&&!fE(a,e.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:l,index:u})},!0),r}function eV(e,t,n,s){let i=[];function r(o,a,l){const{startAngle:u,endAngle:h}=o.getProps(["startAngle","endAngle"],s),{angle:d}=oE(o,{x:t.x,y:t.y});cc(d,u,h)&&i.push({element:o,datasetIndex:a,index:l})}return Xc(e,n,t,r),i}function nV(e,t,n,s,i,r){let o=[];const a=tV(n);let l=Number.POSITIVE_INFINITY;function u(h,d,p){const g=h.inRange(t.x,t.y,i);if(s&&!g)return;const b=h.getCenterPoint(i);if(!(!!r||e.isPointInArea(b))&&!g)return;const v=a(t,b);v<l?(o=[{element:h,datasetIndex:d,index:p}],l=v):v===l&&o.push({element:h,datasetIndex:d,index:p})}return Xc(e,n,t,u),o}function Qu(e,t,n,s,i,r){return!r&&!e.isPointInArea(t)?[]:n==="r"&&!s?eV(e,t,n,i):nV(e,t,n,s,i,r)}function h_(e,t,n,s,i){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Xc(e,n,t,(l,u,h)=>{l[o]&&l[o](t[n],i)&&(r.push({element:l,datasetIndex:u,index:h}),a=a||l.inRange(t.x,t.y,i))}),s&&!a?[]:r}var sV={modes:{index(e,t,n,s){const i=Oi(t,e),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Yu(e,i,r,s,o):Qu(e,i,r,!1,s,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(u=>{const h=a[0].index,d=u.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:u.index,index:h})}),l):[]},dataset(e,t,n,s){const i=Oi(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Yu(e,i,r,s,o):Qu(e,i,r,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,u=e.getDatasetMeta(l).data;a=[];for(let h=0;h<u.length;++h)a.push({element:u[h],datasetIndex:l,index:h})}return a},point(e,t,n,s){const i=Oi(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return Yu(e,i,r,s,o)},nearest(e,t,n,s){const i=Oi(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return Qu(e,i,r,n.intersect,s,o)},x(e,t,n,s){const i=Oi(t,e);return h_(e,i,"x",n.intersect,s)},y(e,t,n,s){const i=Oi(t,e);return h_(e,i,"y",n.intersect,s)}}};const TE=["left","top","right","bottom"];function fo(e,t){return e.filter(n=>n.pos===t)}function d_(e,t){return e.filter(n=>TE.indexOf(n.pos)===-1&&n.box.axis===t)}function po(e,t){return e.sort((n,s)=>{const i=t?s:n,r=t?n:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function iV(e){const t=[];let n,s,i,r,o,a;for(n=0,s=(e||[]).length;n<s;++n)i=e[n],{position:r,options:{stack:o,stackWeight:a=1}}=i,t.push({index:n,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return t}function rV(e){const t={};for(const n of e){const{stack:s,pos:i,stackWeight:r}=n;if(!s||!TE.includes(i))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function oV(e,t){const n=rV(e),{vBoxMaxWidth:s,hBoxMaxHeight:i}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,u=n[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*s:l&&t.availableWidth,a.height=i):(a.width=s,a.height=h?h*i:l&&t.availableHeight)}return n}function aV(e){const t=iV(e),n=po(t.filter(u=>u.box.fullSize),!0),s=po(fo(t,"left"),!0),i=po(fo(t,"right")),r=po(fo(t,"top"),!0),o=po(fo(t,"bottom")),a=d_(t,"x"),l=d_(t,"y");return{fullSize:n,leftAndTop:s.concat(r),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:fo(t,"chartArea"),vertical:s.concat(i).concat(l),horizontal:r.concat(o).concat(a)}}function f_(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function IE(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function lV(e,t,n,s){const{pos:i,box:r}=n,o=e.maxPadding;if(!Dt(i)){n.size&&(e[i]-=n.size);const d=s[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?r.height:r.width),n.size=d.size/d.count,e[i]+=n.size}r.getPadding&&IE(o,r.getPadding());const a=Math.max(0,t.outerWidth-f_(o,e,"left","right")),l=Math.max(0,t.outerHeight-f_(o,e,"top","bottom")),u=a!==e.w,h=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:u,other:h}:{same:h,other:u}}function cV(e){const t=e.maxPadding;function n(s){const i=Math.max(t[s]-e[s],0);return e[s]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function uV(e,t){const n=t.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(t[o],n[o])}),r}return s(e?["left","right"]:["top","bottom"])}function So(e,t,n,s){const i=[];let r,o,a,l,u,h;for(r=0,o=e.length,u=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,uV(a.horizontal,t));const{same:d,other:p}=lV(t,n,a,s);u|=d&&i.length,h=h||p,l.fullSize||i.push(a)}return u&&So(i,t,n,s)||h}function sl(e,t,n,s,i){e.top=n,e.left=t,e.right=t+s,e.bottom=n+i,e.width=s,e.height=i}function p_(e,t,n,s){const i=n.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,u=s[a.stack]||{placed:0,weight:1},h=a.stackWeight/u.weight||1;if(a.horizontal){const d=t.w*h,p=u.size||l.height;oc(u.start)&&(o=u.start),l.fullSize?sl(l,i.left,o,n.outerWidth-i.right-i.left,p):sl(l,t.left+u.placed,o,d,p),u.start=o,u.placed+=d,o=l.bottom}else{const d=t.h*h,p=u.size||l.width;oc(u.start)&&(r=u.start),l.fullSize?sl(l,r,i.top,p,n.outerHeight-i.bottom-i.top):sl(l,r,t.top+u.placed,p,d),u.start=r,u.placed+=d,r=l.right}}t.x=r,t.y=o}var ei={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const i=Dn(e.options.layout.padding),r=Math.max(t-i.width,0),o=Math.max(n-i.height,0),a=aV(e.boxes),l=a.vertical,u=a.horizontal;Ft(e.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const h=l.reduce((w,v)=>v.box.options&&v.box.options.display===!1?w:w+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),p=Object.assign({},i);IE(p,Dn(s));const g=Object.assign({maxPadding:p,w:r,h:o,x:i.left,y:i.top},i),b=oV(l.concat(u),d);So(a.fullSize,g,d,b),So(l,g,d,b),So(u,g,d,b)&&So(l,g,d,b),cV(g),p_(a.leftAndTop,g,d,b),g.x+=g.w,g.y+=g.h,p_(a.rightAndBottom,g,d,b),e.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},Ft(a.chartArea,w=>{const v=w.box;Object.assign(v,e.chartArea),v.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class AE{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,i){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,i?Math.floor(n/i):s)}}isAttached(t){return!0}updateConfig(t){}}class hV extends AE{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Tl="$chartjs",dV={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},g_=e=>e===null||e==="";function fV(e,t){const n=e.style,s=e.getAttribute("height"),i=e.getAttribute("width");if(e[Tl]={initial:{height:s,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",g_(i)){const r=i_(e,"width");r!==void 0&&(e.width=r)}if(g_(s))if(e.style.height==="")e.height=e.width/(t||2);else{const r=i_(e,"height");r!==void 0&&(e.height=r)}return e}const SE=xN?{passive:!0}:!1;function pV(e,t,n){e&&e.addEventListener(t,n,SE)}function gV(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,SE)}function mV(e,t){const n=dV[e.type]||e.type,{x:s,y:i}=Oi(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:i!==void 0?i:null}}function dc(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function _V(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||dc(a.addedNodes,s),o=o&&!dc(a.removedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function yV(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||dc(a.removedNodes,s),o=o&&!dc(a.addedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const da=new Map;let m_=0;function RE(){const e=window.devicePixelRatio;e!==m_&&(m_=e,da.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function vV(e,t){da.size||window.addEventListener("resize",RE),da.set(e,t)}function bV(e){da.delete(e),da.size||window.removeEventListener("resize",RE)}function wV(e,t,n){const s=e.canvas,i=s&&vf(s);if(!i)return;const r=cE((a,l)=>{const u=i.clientWidth;n(a,l),u<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,h=l.contentRect.height;u===0&&h===0||r(u,h)});return o.observe(i),vV(e,r),o}function Xu(e,t,n){n&&n.disconnect(),t==="resize"&&bV(e)}function EV(e,t,n){const s=e.canvas,i=cE(r=>{e.ctx!==null&&n(mV(r,e))},e);return pV(s,t,i),i}class TV extends AE{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(fV(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[Tl])return!1;const s=n[Tl].initial;["height","width"].forEach(r=>{const o=s[r];je(o)?n.removeAttribute(r):n.setAttribute(r,o)});const i=s.style||{};return Object.keys(i).forEach(r=>{n.style[r]=i[r]}),n.width=n.width,delete n[Tl],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const i=t.$proxies||(t.$proxies={}),o={attach:_V,detach:yV,resize:wV}[n]||EV;i[n]=o(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),i=s[n];if(!i)return;({attach:Xu,detach:Xu,resize:Xu}[n]||gV)(t,n,i),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,i){return PN(t,n,s,i)}isAttached(t){const n=t&&vf(t);return!!(n&&n.isConnected)}}function IV(e){return!yf()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?hV:TV}let Pa=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return lc(this.x)&&lc(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const i={};return t.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}};function AV(e,t){const n=e.options.ticks,s=SV(e),i=Math.min(n.maxTicksLimit||s,s),r=n.major.enabled?CV(t):[],o=r.length,a=r[0],l=r[o-1],u=[];if(o>i)return PV(t,u,r,o/i),u;const h=RV(r,t,i);if(o>0){let d,p;const g=o>1?Math.round((l-a)/(o-1)):null;for(il(t,u,h,je(g)?0:a-g,a),d=0,p=o-1;d<p;d++)il(t,u,h,r[d],r[d+1]);return il(t,u,h,l,je(g)?t.length:l+g),u}return il(t,u,h),u}function SV(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(s,i))}function RV(e,t,n){const s=xV(e),i=t.length/n;if(!s)return Math.max(i,1);const r=FM(s);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>i)return l}return Math.max(i,1)}function CV(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function PV(e,t,n,s){let i=0,r=n[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===r&&(t.push(e[o]),i++,r=n[i*s])}function il(e,t,n,s,i){const r=Ut(s,0),o=Math.min(Ut(i,e.length),e.length);let a=0,l,u,h;for(n=Math.ceil(n),i&&(l=i-s,n=l/Math.floor(l/n)),h=r;h<0;)a++,h=Math.round(r+a*n);for(u=Math.max(r,0);u<o;u++)u===h&&(t.push(e[u]),a++,h=Math.round(r+a*n))}function xV(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const kV=e=>e==="left"?"right":e==="right"?"left":e,__=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,y_=(e,t)=>Math.min(t||e,e);function v_(e,t){const n=[],s=e.length/t,i=e.length;let r=0;for(;r<i;r+=s)n.push(e[Math.floor(r)]);return n}function DV(e,t,n){const s=e.ticks.length,i=Math.min(t,s-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(i),u;if(!(n&&(s===1?u=Math.max(l-r,o-l):t===0?u=(e.getPixelForTick(1)-l)/2:u=(l-e.getPixelForTick(i-1))/2,l+=i<t?u:-u,l<r-a||l>o+a)))return l}function OV(e,t){Ft(e,n=>{const s=n.gc,i=s.length/2;let r;if(i>t){for(r=0;r<i;++r)delete n.data[s[r]];s.splice(0,i)}})}function go(e){return e.drawTicks?e.tickLength:0}function b_(e,t){if(!e.display)return 0;const n=sn(e.font,t),s=Dn(e.padding);return(Pe(e.text)?e.text.length:1)*n.lineHeight+s.height}function MV(e,t){return qr(e,{scale:t,type:"scale"})}function NV(e,t,n){return qr(e,{tick:n,index:t,type:"tick"})}function VV(e,t,n){let s=uE(e);return(n&&t!=="right"||!n&&t==="right")&&(s=kV(s)),s}function LV(e,t,n,s){const{top:i,left:r,bottom:o,right:a,chart:l}=e,{chartArea:u,scales:h}=l;let d=0,p,g,b;const w=o-i,v=a-r;if(e.isHorizontal()){if(g=cn(s,r,a),Dt(n)){const P=Object.keys(n)[0],O=n[P];b=h[P].getPixelForValue(O)+w-t}else n==="center"?b=(u.bottom+u.top)/2+w-t:b=__(e,n,t);p=a-r}else{if(Dt(n)){const P=Object.keys(n)[0],O=n[P];g=h[P].getPixelForValue(O)-v+t}else n==="center"?g=(u.left+u.right)/2-v+t:g=__(e,n,t);b=cn(s,o,i),d=n==="left"?-ge:ge}return{titleX:g,titleY:b,maxWidth:p,rotation:d}}class Jc extends Pa{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:i}=this;return t=Vn(t,Number.POSITIVE_INFINITY),n=Vn(n,Number.NEGATIVE_INFINITY),s=Vn(s,Number.POSITIVE_INFINITY),i=Vn(i,Number.NEGATIVE_INFINITY),{min:Vn(t,s),max:Vn(n,i),minDefined:ks(t),maxDefined:ks(n)}}getMinMax(t){let{min:n,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,t),i||(n=Math.min(n,o.min)),r||(s=Math.max(s,o.max));return n=r&&n>s?s:n,s=i&&n>s?n:s,{min:Vn(n,Vn(s,n)),max:Vn(s,Vn(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Wt(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=pN(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?v_(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=AV(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Wt(this.options.afterUpdate,[this])}beforeSetDimensions(){Wt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Wt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Wt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Wt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,i,r;for(s=0,i=t.length;s<i;s++)r=t[s],r.label=Wt(n.callback,[r.value,s,t],this)}afterTickToLabelConversion(){Wt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Wt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=y_(this.ticks.length,t.ticks.maxTicksLimit),i=n.minRotation||0,r=n.maxRotation;let o=i,a,l,u;if(!this._isVisible()||!n.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),d=h.widest.width,p=h.highest.height,g=mn(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/s:g/(s-1),d+6>a&&(a=g/(s-(t.offset?.5:1)),l=this.maxHeight-go(t.grid)-n.padding-b_(t.title,this.chart.options.font),u=Math.sqrt(d*d+p*p),o=BM(Math.min(Math.asin(mn((h.highest.height+6)/a,-1,1)),Math.asin(mn(l/u,-1,1))-Math.asin(mn(p/u,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Wt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Wt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=b_(i,n.options.font);if(a?(t.width=this.maxWidth,t.height=go(r)+l):(t.height=this.maxHeight,t.width=go(r)+l),s.display&&this.ticks.length){const{first:u,last:h,widest:d,highest:p}=this._getLabelSizes(),g=s.padding*2,b=Vi(this.labelRotation),w=Math.cos(b),v=Math.sin(b);if(a){const P=s.mirror?0:v*d.width+w*p.height;t.height=Math.min(this.maxHeight,t.height+P+g)}else{const P=s.mirror?0:w*d.width+v*p.height;t.width=Math.min(this.maxWidth,t.width+P+g)}this._calculatePadding(u,h,v,w)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,i){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,g=0;l?u?(p=i*t.width,g=s*n.height):(p=s*t.height,g=i*n.width):r==="start"?g=n.width:r==="end"?p=t.width:r!=="inner"&&(p=t.width/2,g=n.width/2),this.paddingLeft=Math.max((p-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=t.height/2;r==="start"?(h=0,d=t.height):r==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Wt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)je(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=v_(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(n/y_(n,s));let u=0,h=0,d,p,g,b,w,v,P,O,k,x,L;for(d=0;d<n;d+=l){if(b=t[d].label,w=this._resolveTickFontOptions(d),i.font=v=w.string,P=r[v]=r[v]||{data:{},gc:[]},O=w.lineHeight,k=x=0,!je(b)&&!Pe(b))k=Jm(i,P.data,P.gc,k,b),x=O;else if(Pe(b))for(p=0,g=b.length;p<g;++p)L=b[p],!je(L)&&!Pe(L)&&(k=Jm(i,P.data,P.gc,k,L),x+=O);o.push(k),a.push(x),u=Math.max(k,u),h=Math.max(x,h)}OV(r,n);const U=o.indexOf(u),T=a.indexOf(h),_=I=>({width:o[I]||0,height:a[I]||0});return{first:_(0),last:_(n-1),widest:_(U),highest:_(T),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return zM(this._alignToPixels?Pi(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=NV(this.getContext(),t,s))}return this.$context||(this.$context=MV(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=Vi(this.labelRotation),s=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*i?a/s:l/i:l*i<a*s?l/s:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,i=this.options,{grid:r,position:o,border:a}=i,l=r.offset,u=this.isHorizontal(),d=this.ticks.length+(l?1:0),p=go(r),g=[],b=a.setContext(this.getContext()),w=b.display?b.width:0,v=w/2,P=function(ut){return Pi(s,ut,w)};let O,k,x,L,U,T,_,I,C,A,S,E;if(o==="top")O=P(this.bottom),T=this.bottom-p,I=O-v,A=P(t.top)+v,E=t.bottom;else if(o==="bottom")O=P(this.top),A=t.top,E=P(t.bottom)-v,T=O+v,I=this.top+p;else if(o==="left")O=P(this.right),U=this.right-p,_=O-v,C=P(t.left)+v,S=t.right;else if(o==="right")O=P(this.left),C=t.left,S=P(t.right)-v,U=O+v,_=this.left+p;else if(n==="x"){if(o==="center")O=P((t.top+t.bottom)/2+.5);else if(Dt(o)){const ut=Object.keys(o)[0],it=o[ut];O=P(this.chart.scales[ut].getPixelForValue(it))}A=t.top,E=t.bottom,T=O+v,I=T+p}else if(n==="y"){if(o==="center")O=P((t.left+t.right)/2);else if(Dt(o)){const ut=Object.keys(o)[0],it=o[ut];O=P(this.chart.scales[ut].getPixelForValue(it))}U=O-v,_=U-p,C=t.left,S=t.right}const bt=Ut(i.ticks.maxTicksLimit,d),mt=Math.max(1,Math.ceil(d/bt));for(k=0;k<d;k+=mt){const ut=this.getContext(k),it=r.setContext(ut),gt=a.setContext(ut),Ot=it.lineWidth,we=it.color,_e=gt.dash||[],Qt=gt.dashOffset,$e=it.tickWidth,ce=it.tickColor,Ee=it.tickBorderDash||[],Xt=it.tickBorderDashOffset;x=DV(this,k,l),x!==void 0&&(L=Pi(s,x,Ot),u?U=_=C=S=L:T=I=A=E=L,g.push({tx1:U,ty1:T,tx2:_,ty2:I,x1:C,y1:A,x2:S,y2:E,width:Ot,color:we,borderDash:_e,borderDashOffset:Qt,tickWidth:$e,tickColor:ce,tickBorderDash:Ee,tickBorderDashOffset:Xt}))}return this._ticksLength=d,this._borderValue=O,g}_computeLabelItems(t){const n=this.axis,s=this.options,{position:i,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:h,mirror:d}=r,p=go(s.grid),g=p+h,b=d?-h:g,w=-Vi(this.labelRotation),v=[];let P,O,k,x,L,U,T,_,I,C,A,S,E="middle";if(i==="top")U=this.bottom-b,T=this._getXAxisLabelAlignment();else if(i==="bottom")U=this.top+b,T=this._getXAxisLabelAlignment();else if(i==="left"){const mt=this._getYAxisLabelAlignment(p);T=mt.textAlign,L=mt.x}else if(i==="right"){const mt=this._getYAxisLabelAlignment(p);T=mt.textAlign,L=mt.x}else if(n==="x"){if(i==="center")U=(t.top+t.bottom)/2+g;else if(Dt(i)){const mt=Object.keys(i)[0],ut=i[mt];U=this.chart.scales[mt].getPixelForValue(ut)+g}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")L=(t.left+t.right)/2-g;else if(Dt(i)){const mt=Object.keys(i)[0],ut=i[mt];L=this.chart.scales[mt].getPixelForValue(ut)}T=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?E="top":l==="end"&&(E="bottom"));const bt=this._getLabelSizes();for(P=0,O=a.length;P<O;++P){k=a[P],x=k.label;const mt=r.setContext(this.getContext(P));_=this.getPixelForTick(P)+r.labelOffset,I=this._resolveTickFontOptions(P),C=I.lineHeight,A=Pe(x)?x.length:1;const ut=A/2,it=mt.color,gt=mt.textStrokeColor,Ot=mt.textStrokeWidth;let we=T;o?(L=_,T==="inner"&&(P===O-1?we=this.options.reverse?"left":"right":P===0?we=this.options.reverse?"right":"left":we="center"),i==="top"?u==="near"||w!==0?S=-A*C+C/2:u==="center"?S=-bt.highest.height/2-ut*C+C:S=-bt.highest.height+C/2:u==="near"||w!==0?S=C/2:u==="center"?S=bt.highest.height/2-ut*C:S=bt.highest.height-A*C,d&&(S*=-1),w!==0&&!mt.showLabelBackdrop&&(L+=C/2*Math.sin(w))):(U=_,S=(1-A)*C/2);let _e;if(mt.showLabelBackdrop){const Qt=Dn(mt.backdropPadding),$e=bt.heights[P],ce=bt.widths[P];let Ee=S-Qt.top,Xt=0-Qt.left;switch(E){case"middle":Ee-=$e/2;break;case"bottom":Ee-=$e;break}switch(T){case"center":Xt-=ce/2;break;case"right":Xt-=ce;break;case"inner":P===O-1?Xt-=ce:P>0&&(Xt-=ce/2);break}_e={left:Xt,top:Ee,width:ce+Qt.width,height:$e+Qt.height,color:mt.backdropColor}}v.push({label:x,font:I,textOffset:S,options:{rotation:w,color:it,strokeColor:gt,strokeWidth:Ot,textAlign:we,textBaseline:E,translation:[L,U],backdrop:_e}})}return v}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-Vi(this.labelRotation))return t==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let u,h;return n==="left"?i?(h=this.right+r,s==="near"?u="left":s==="center"?(u="center",h+=l/2):(u="right",h+=l)):(h=this.right-a,s==="near"?u="right":s==="center"?(u="center",h-=l/2):(u="left",h=this.left)):n==="right"?i?(h=this.left+r,s==="near"?u="right":s==="center"?(u="center",h-=l/2):(u="left",h-=l)):(h=this.left+a,s==="near"?u="left":s==="center"?(u="center",h+=l/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:i,width:r,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,i,r,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(r=>r.value===t);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,u,h)=>{!h.width||!h.color||(s.save(),s.lineWidth=h.width,s.strokeStyle=h.color,s.setLineDash(h.borderDash||[]),s.lineDashOffset=h.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(u.x,u.y),s.stroke(),s.restore())};if(n.display)for(r=0,o=i.length;r<o;++r){const l=i[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,h,d,p;this.isHorizontal()?(u=Pi(t,this.left,o)-o/2,h=Pi(t,this.right,a)+a/2,d=p=l):(d=Pi(t,this.top,o)-o/2,p=Pi(t,this.bottom,a)+a/2,u=h=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(u,d),n.lineTo(h,p),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&df(s,i);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,u=o.label,h=o.textOffset;uc(s,u,0,h,l,a)}i&&ff(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:i}}=this;if(!s.display)return;const r=sn(s.font),o=Dn(s.padding),a=s.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||Dt(n)?(l+=o.bottom,Pe(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:u,titleY:h,maxWidth:d,rotation:p}=LV(this,l,n,a);uc(t,s.text,0,0,r,{color:s.color,maxWidth:d,rotation:p,textAlign:VV(a,n,i),textBaseline:"middle",translation:[u,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=Ut(t.grid&&t.grid.z,-1),i=Ut(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Jc.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[s]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return sn(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class rl{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;BV(n)&&(s=this.register(n));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,FV(t,o,s),this.override&&se.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,i=this.scope;s in n&&delete n[s],i&&s in se[i]&&(delete se[i][s],this.override&&delete Qi[s])}}function FV(e,t,n){const s=ua(Object.create(null),[n?se.get(n):{},se.get(t),e.defaults]);se.set(t,s),e.defaultRoutes&&UV(t,e.defaultRoutes),e.descriptors&&se.describe(t,e.descriptors)}function UV(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),i=s.pop(),r=[e].concat(s).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");se.route(r,i,l,a)})}function BV(e){return"id"in e&&"defaults"in e}class jV{constructor(){this.controllers=new rl(EE,"datasets",!0),this.elements=new rl(Pa,"elements"),this.plugins=new rl(Object,"plugins"),this.scales=new rl(Jc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(t,r,i):Ft(i,o=>{const a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,n,s){const i=uf(t);Wt(s["before"+i],[],s),n[t](s),Wt(s["after"+i],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const i=n.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return i}}var Un=new jV;class zV{constructor(){this._init=void 0}notify(t,n,s,i){if(n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,n,s);return n==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,n,s,i){i=i||{};for(const r of t){const o=r.plugin,a=o[s],l=[n,i,r.options];if(Wt(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){je(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,i=Ut(s.options&&s.options.plugins,{}),r=HV(s);return i===!1&&!n?[]:WV(t,r,i,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,i=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,s),t,"stop"),this._notify(i(s,n),t,"start")}}function HV(e){const t={},n=[],s=Object.keys(Un.plugins.items);for(let r=0;r<s.length;r++)n.push(Un.getPlugin(s[r]));const i=e.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function $V(e,t){return!t&&e===!1?null:e===!0?{}:e}function WV(e,{plugins:t,localIds:n},s,i){const r=[],o=e.getContext();for(const a of t){const l=a.id,u=$V(s[l],i);u!==null&&r.push({plugin:a,options:qV(e.config,{plugin:a,local:n[l]},u,o)})}return r}function qV(e,{plugin:t,local:n},s,i){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(s,r);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function $h(e,t){const n=se.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function KV(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function GV(e,t){return e===t?"_index_":"_value_"}function w_(e){if(e==="x"||e==="y"||e==="r")return e}function YV(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Wh(e,...t){if(w_(e))return e;for(const n of t){const s=n.axis||YV(n.position)||e.length>1&&w_(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function E_(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function QV(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return E_(e,"x",n[0])||E_(e,"y",n[0])}return{}}function XV(e,t){const n=Qi[e.type]||{scales:{}},s=t.scales||{},i=$h(e.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!Dt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Wh(o,a,QV(o,e),se.scales[a.type]),u=GV(l,i),h=n.scales||{};r[o]=Ho(Object.create(null),[{axis:l},a,h[l],h[u]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||$h(a,t),h=(Qi[a]||{}).scales||{};Object.keys(h).forEach(d=>{const p=KV(d,l),g=o[p+"AxisID"]||p;r[g]=r[g]||Object.create(null),Ho(r[g],[{axis:p},s[g],h[d]])})}),Object.keys(r).forEach(o=>{const a=r[o];Ho(a,[se.scales[a.type],se.scale])}),r}function CE(e){const t=e.options||(e.options={});t.plugins=Ut(t.plugins,{}),t.scales=XV(e,t)}function PE(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function JV(e){return e=e||{},e.data=PE(e.data),CE(e),e}const T_=new Map,xE=new Set;function ol(e,t){let n=T_.get(e);return n||(n=t(),T_.set(e,n),xE.add(n)),n}const mo=(e,t,n)=>{const s=ha(t,n);s!==void 0&&e.add(s)};class ZV{constructor(t){this._config=JV(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=PE(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),CE(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return ol(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return ol(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return ol(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return ol(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let i=s.get(t);return(!i||n)&&(i=new Map,s.set(t,i)),i}getOptionScopes(t,n,s){const{options:i,type:r}=this,o=this._cachedScopes(t,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{t&&(l.add(t),h.forEach(d=>mo(l,t,d))),h.forEach(d=>mo(l,i,d)),h.forEach(d=>mo(l,Qi[r]||{},d)),h.forEach(d=>mo(l,se,d)),h.forEach(d=>mo(l,zh,d))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),xE.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:t,type:n}=this;return[t,Qi[n]||{},se.datasets[n]||{},{type:n},se,zh]}resolveNamedOptions(t,n,s,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=I_(this._resolverCache,t,i);let l=o;if(eL(o,n)){r.$shared=!1,s=bi(s)?s():s;const u=this.createResolver(t,s,a);l=Lr(o,s,u)}for(const u of n)r[u]=l[u];return r}createResolver(t,n,s=[""],i){const{resolver:r}=I_(this._resolverCache,t,s);return Dt(n)?Lr(r,n,void 0,i):r}}function I_(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const i=n.join();let r=s.get(i);return r||(r={resolver:gf(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(i,r)),r}const tL=e=>Dt(e)&&Object.getOwnPropertyNames(e).some(t=>bi(e[t]));function eL(e,t){const{isScriptable:n,isIndexable:s}=pE(e);for(const i of t){const r=n(i),o=s(i),a=(o||r)&&e[i];if(r&&(bi(a)||tL(a))||o&&Pe(a))return!0}return!1}var nL="4.5.1";const sL=["top","bottom","left","right","chartArea"];function A_(e,t){return e==="top"||e==="bottom"||sL.indexOf(e)===-1&&t==="x"}function S_(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function R_(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Wt(n&&n.onComplete,[e],t)}function iL(e){const t=e.chart,n=t.options.animation;Wt(n&&n.onProgress,[e],t)}function kE(e){return yf()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Il={},C_=e=>{const t=kE(e);return Object.values(Il).filter(n=>n.canvas===t).pop()};function rL(e,t,n){const s=Object.keys(e);for(const i of s){const r=+i;if(r>=t){const o=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=o)}}}function oL(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}class qh{static defaults=se;static instances=Il;static overrides=Qi;static registry=Un;static version=nL;static getChart=C_;static register(...t){Un.add(...t),P_()}static unregister(...t){Un.remove(...t),P_()}constructor(t,n){const s=this.config=new ZV(n),i=kE(t),r=C_(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||IV(i)),this.platform.updateConfig(s);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,h=l&&l.width;if(this.id=xM(),this.ctx=a,this.canvas=l,this.width=h,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new zV,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=KM(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Il[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}us.listen(this,"complete",R_),us.listen(this,"progress",iL),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:i,_aspectRatio:r}=this;return je(t)?n&&r?r:i?s/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Un}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():s_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Zm(this.canvas,this.ctx),this}stop(){return us.stop(this),this}resize(t,n){us.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,n,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,s_(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Wt(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ft(n,(s,i)=>{s.id=i})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,i=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=Wh(o,a),u=l==="r",h=l==="x";return{options:a,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),Ft(r,o=>{const a=o.options,l=a.id,u=Wh(l,a),h=Ut(a.type,o.dtype);(a.position===void 0||A_(a.position,u)!==A_(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in s&&s[l].type===h)d=s[l];else{const p=Un.getScale(h);d=new p({id:l,type:h,ctx:this.ctx,chart:this}),s[d.id]=d}d.init(a,t)}),Ft(i,(o,a)=>{o||delete s[a]}),Ft(s,o=>{ei.configure(this,o,o.options),ei.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((i,r)=>i.index-r.index),s>n){for(let i=n;i<s;++i)this._destroyDatasetMeta(i);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(S_("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,i)=>{n.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=n.length;s<i;s++){const r=n[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||$h(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=Un.getController(a),{datasetElementType:u,dataElementType:h}=se.datasets[a];Object.assign(l,{dataElementType:Un.getElement(h),datasetElementType:u&&Un.getElement(u)}),o.controller=new l(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Ft(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:d}=this.getDatasetMeta(u),p=!i&&r.indexOf(d)===-1;d.buildOrUpdateElements(p),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||Ft(r,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(S_("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ft(this.scales,t=>{ei.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!$m(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of n){const o=s==="_removeElements"?-r:r;rL(t,i,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=s(0);for(let r=1;r<n;r++)if(!$m(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ei.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],Ft(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,bi(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),i={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(us.has(this)?this.attached&&!us.running(this)&&us.start(this):(this.draw(),R_({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let i,r;for(i=0,r=n.length;i<r;++i){const o=n[i];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s={meta:t,index:t.index,cancelable:!0},i=MN(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&df(n,i),t.controller.draw(),i&&ff(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return fE(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,i){const r=sV.modes[n];return typeof r=="function"?r(this,t,s,i):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let i=s.filter(r=>r&&r._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=qr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const i=s?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);oc(n)?(r.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),us.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Zm(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Il[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(r,o)=>{n.addEventListener(this,r,o),t[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};Ft(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(l,u)=>{n.addEventListener(this,l,u),t[l]=u},i=(l,u)=>{t[l]&&(n.removeEventListener(this,l,u),delete t[l])},r=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ft(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Ft(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const i=s?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!ic(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const i=this.options.hover,r=(l,u)=>l.filter(h=>!u.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=r(n,t),a=s?t:r(t,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},i=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:i=[],options:r}=this,o=n,a=this._getActiveElements(t,i,s,o),l=VM(t),u=oL(t,this._lastEvent,s,l);s&&(this._lastEvent=null,Wt(r.onHover,[t,a,this],this),l&&Wt(r.onClick,[t,a,this],this));const h=!ic(a,i);return(h||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=u,h}_getActiveElements(t,n,s,i){if(t.type==="mouseout")return[];if(!s)return n;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}}function P_(){return Ft(qh.instances,e=>e._plugins.invalidate())}function aL(e,t,n){const{startAngle:s,x:i,y:r,outerRadius:o,innerRadius:a,options:l}=t,{borderWidth:u,borderJoinStyle:h}=l,d=Math.min(u/o,jn(s-n));if(e.beginPath(),e.arc(i,r,o-u/2,s+d/2,n-d/2),a>0){const p=Math.min(u/a,jn(s-n));e.arc(i,r,a+u/2,n-p/2,s+p/2,!0)}else{const p=Math.min(u/2,o*jn(s-n));if(h==="round")e.arc(i,r,p,n-Yt/2,s+Yt/2,!0);else if(h==="bevel"){const g=2*p*p,b=-g*Math.cos(n+Yt/2)+i,w=-g*Math.sin(n+Yt/2)+r,v=g*Math.cos(s+Yt/2)+i,P=g*Math.sin(s+Yt/2)+r;e.lineTo(b,w),e.lineTo(v,P)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function lL(e,t,n){const{startAngle:s,pixelMargin:i,x:r,y:o,outerRadius:a,innerRadius:l}=t;let u=i/a;e.beginPath(),e.arc(r,o,a,s-u,n+u),l>i?(u=i/l,e.arc(r,o,l,n+u,s-u,!0)):e.arc(r,o,i,n+ge,s-ge),e.closePath(),e.clip()}function cL(e){return pf(e,["outerStart","outerEnd","innerStart","innerEnd"])}function uL(e,t,n,s){const i=cL(e.options.borderRadius),r=(n-t)/2,o=Math.min(r,s*t/2),a=l=>{const u=(n-Math.min(r,l))*s/2;return mn(l,0,Math.min(r,u))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:mn(i.innerStart,0,o),innerEnd:mn(i.innerEnd,0,o)}}function hr(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function fc(e,t,n,s,i,r){const{x:o,y:a,startAngle:l,pixelMargin:u,innerRadius:h}=t,d=Math.max(t.outerRadius+s+n-u,0),p=h>0?h+s+n+u:0;let g=0;const b=i-l;if(s){const mt=h>0?h-s:0,ut=d>0?d-s:0,it=(mt+ut)/2,gt=it!==0?b*it/(it+s):b;g=(b-gt)/2}const w=Math.max(.001,b*d-n/Yt)/d,v=(b-w)/2,P=l+v+g,O=i-v-g,{outerStart:k,outerEnd:x,innerStart:L,innerEnd:U}=uL(t,p,d,O-P),T=d-k,_=d-x,I=P+k/T,C=O-x/_,A=p+L,S=p+U,E=P+L/A,bt=O-U/S;if(e.beginPath(),r){const mt=(I+C)/2;if(e.arc(o,a,d,I,mt),e.arc(o,a,d,mt,C),x>0){const Ot=hr(_,C,o,a);e.arc(Ot.x,Ot.y,x,C,O+ge)}const ut=hr(S,O,o,a);if(e.lineTo(ut.x,ut.y),U>0){const Ot=hr(S,bt,o,a);e.arc(Ot.x,Ot.y,U,O+ge,bt+Math.PI)}const it=(O-U/p+(P+L/p))/2;if(e.arc(o,a,p,O-U/p,it,!0),e.arc(o,a,p,it,P+L/p,!0),L>0){const Ot=hr(A,E,o,a);e.arc(Ot.x,Ot.y,L,E+Math.PI,P-ge)}const gt=hr(T,P,o,a);if(e.lineTo(gt.x,gt.y),k>0){const Ot=hr(T,I,o,a);e.arc(Ot.x,Ot.y,k,P-ge,I)}}else{e.moveTo(o,a);const mt=Math.cos(I)*d+o,ut=Math.sin(I)*d+a;e.lineTo(mt,ut);const it=Math.cos(C)*d+o,gt=Math.sin(C)*d+a;e.lineTo(it,gt)}e.closePath()}function hL(e,t,n,s,i){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){fc(e,t,n,s,l,i);for(let u=0;u<r;++u)e.fill();isNaN(a)||(l=o+(a%ae||ae))}return fc(e,t,n,s,l,i),e.fill(),l}function dL(e,t,n,s,i){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:u,borderJoinStyle:h,borderDash:d,borderDashOffset:p,borderRadius:g}=l,b=l.borderAlign==="inner";if(!u)return;e.setLineDash(d||[]),e.lineDashOffset=p,b?(e.lineWidth=u*2,e.lineJoin=h||"round"):(e.lineWidth=u,e.lineJoin=h||"bevel");let w=t.endAngle;if(r){fc(e,t,n,s,w,i);for(let v=0;v<r;++v)e.stroke();isNaN(a)||(w=o+(a%ae||ae))}b&&lL(e,t,w),l.selfJoin&&w-o>=Yt&&g===0&&h!=="miter"&&aL(e,t,w),r||(fc(e,t,n,s,w,i),e.stroke())}class fL extends Pa{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,n,s){const i=this.getProps(["x","y"],s),{angle:r,distance:o}=oE(i,{x:t,y:n}),{startAngle:a,endAngle:l,innerRadius:u,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),p=(this.options.spacing+this.options.borderWidth)/2,g=Ut(d,l-a),b=cc(r,a,l)&&a!==l,w=g>=ae||b,v=Ao(o,u+p,h+p);return w&&v}getCenterPoint(t){const{x:n,y:s,startAngle:i,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:u}=this.options,h=(i+r)/2,d=(o+a+u+l)/2;return{x:n+Math.cos(h)*d,y:s+Math.sin(h)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:n,circumference:s}=this,i=(n.offset||0)/4,r=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>ae?Math.floor(s/ae):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*i,Math.sin(a)*i);const l=1-Math.sin(Math.min(Yt,s||0)),u=i*l;t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,hL(t,this,u,r,o),dL(t,this,u,r,o),t.restore()}}const x_=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},pL=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class k_ extends Pa{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Wt(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,i)=>t.sort(s,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,i=sn(s.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=x_(s,r);let u,h;n.font=i.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(o,r,a,l)+10):(h=this.maxHeight,u=this._fitCols(o,i,a,l)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],h=i+a;let d=t;r.textAlign="left",r.textBaseline="middle";let p=-1,g=-h;return this.legendItems.forEach((b,w)=>{const v=s+n/2+r.measureText(b.text).width;(w===0||u[u.length-1]+v+2*a>o)&&(d+=h,u[u.length-(w>0?0:1)]=0,g+=h,p++),l[w]={left:0,top:g,row:p,width:v,height:i},u[u.length-1]+=v+a}),d}_fitCols(t,n,s,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],h=o-t;let d=a,p=0,g=0,b=0,w=0;return this.legendItems.forEach((v,P)=>{const{itemWidth:O,itemHeight:k}=gL(s,n,r,v,i);P>0&&g+k+2*a>h&&(d+=p+a,u.push({width:p,height:g}),b+=p+a,w++,p=g=0),l[P]={left:b,top:g,col:w,width:O,height:k},p=Math.max(p,O),g+=k+a}),d+=p,u.push({width:p,height:g}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:i},rtl:r}}=this,o=Sr(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=cn(s,this.left+i,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=cn(s,this.left+i,this.right-this.lineWidths[a])),u.top+=this.top+t+i,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+i}else{let a=0,l=cn(s,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=cn(s,this.top+t+i,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+i,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;df(t,this),this._draw(),ff(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:i}=this,{align:r,labels:o}=t,a=se.color,l=Sr(t.rtl,this.left,this.width),u=sn(o.font),{padding:h}=o,d=u.size,p=d/2;let g;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=u.string;const{boxWidth:b,boxHeight:w,itemHeight:v}=x_(o,d),P=function(U,T,_){if(isNaN(b)||b<=0||isNaN(w)||w<0)return;i.save();const I=Ut(_.lineWidth,1);if(i.fillStyle=Ut(_.fillStyle,a),i.lineCap=Ut(_.lineCap,"butt"),i.lineDashOffset=Ut(_.lineDashOffset,0),i.lineJoin=Ut(_.lineJoin,"miter"),i.lineWidth=I,i.strokeStyle=Ut(_.strokeStyle,a),i.setLineDash(Ut(_.lineDash,[])),o.usePointStyle){const C={radius:w*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:I},A=l.xPlus(U,b/2),S=T+p;dE(i,C,A,S,o.pointStyleWidth&&b)}else{const C=T+Math.max((d-w)/2,0),A=l.leftForLtr(U,b),S=qo(_.borderRadius);i.beginPath(),Object.values(S).some(E=>E!==0)?Hh(i,{x:A,y:C,w:b,h:w,radius:S}):i.rect(A,C,b,w),i.fill(),I!==0&&i.stroke()}i.restore()},O=function(U,T,_){uc(i,_.text,U,T+v/2,u,{strikethrough:_.hidden,textAlign:l.textAlign(_.textAlign)})},k=this.isHorizontal(),x=this._computeTitleHeight();k?g={x:cn(r,this.left+h,this.right-s[0]),y:this.top+h+x,line:0}:g={x:this.left+h,y:cn(r,this.top+x+h,this.bottom-n[0].height),line:0},yE(this.ctx,t.textDirection);const L=v+h;this.legendItems.forEach((U,T)=>{i.strokeStyle=U.fontColor,i.fillStyle=U.fontColor;const _=i.measureText(U.text).width,I=l.textAlign(U.textAlign||(U.textAlign=o.textAlign)),C=b+p+_;let A=g.x,S=g.y;l.setWidth(this.width),k?T>0&&A+C+h>this.right&&(S=g.y+=L,g.line++,A=g.x=cn(r,this.left+h,this.right-s[g.line])):T>0&&S+L>this.bottom&&(A=g.x=A+n[g.line].width+h,g.line++,S=g.y=cn(r,this.top+x+h,this.bottom-n[g.line].height));const E=l.x(A);if(P(E,S,U),A=GM(I,A+b+p,k?A+C:this.right,t.rtl),O(l.x(A),S,U),k)g.x+=C+h;else if(typeof U.text!="string"){const bt=u.lineHeight;g.y+=DE(U,bt)+h}else g.y+=L}),vE(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=sn(n.font),i=Dn(n.padding);if(!n.display)return;const r=Sr(t.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,u=i.top+l;let h,d=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),h=this.top+u,d=cn(t.align,d,this.right-p);else{const b=this.columnSizes.reduce((w,v)=>Math.max(w,v.height),0);h=u+cn(t.align,this.top,this.bottom-b-t.labels.padding-this._computeTitleHeight())}const g=cn(a,d,d+p);o.textAlign=r.textAlign(uE(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,uc(o,n.text,g,h,s)}_computeTitleHeight(){const t=this.options.title,n=sn(t.font),s=Dn(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,i,r;if(Ao(t,this.left,this.right)&&Ao(n,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],Ao(t,i.left,i.left+i.width)&&Ao(n,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!yL(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,r=pL(i,s);i&&!r&&Wt(n.onLeave,[t,i,this],this),this._hoveredItem=s,s&&!r&&Wt(n.onHover,[t,s,this],this)}else s&&Wt(n.onClick,[t,s,this],this)}}function gL(e,t,n,s,i){const r=mL(s,e,t,n),o=_L(i,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function mL(e,t,n,s){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),t+n.size/2+s.measureText(i).width}function _L(e,t,n){let s=e;return typeof t.text!="string"&&(s=DE(t,n)),s}function DE(e,t){const n=e.text?e.text.length:0;return t*n}function yL(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var vL={id:"legend",_element:k_,start(e,t,n){const s=e.legend=new k_({ctx:e.ctx,options:n,chart:e});ei.configure(e,s,n),ei.addBox(e,s)},stop(e){ei.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;ei.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,i=n.chart;i.isDatasetVisible(s)?(i.hide(s),t.hidden=!0):(i.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(n?0:void 0),h=Dn(u.borderWidth);return{text:t[l.index].label,fillStyle:u.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:s||u.pointStyle,rotation:u.rotation,textAlign:i||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};const Ro={average(e){if(!e.length)return!1;let t,n,s=new Set,i=0,r=0;for(t=0,n=e.length;t<n;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),i+=l.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:i/r}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),h=jM(t,u);h<i&&(i=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function Ln(e,t){return t&&(Pe(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function hs(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function bL(e,t){const{element:n,datasetIndex:s,index:i}=t,r=e.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:e,label:o,parsed:r.getParsed(i),raw:e.data.datasets[s].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:n}}function D_(e,t){const n=e.chart.ctx,{body:s,footer:i,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=sn(t.bodyFont),u=sn(t.titleFont),h=sn(t.footerFont),d=r.length,p=i.length,g=s.length,b=Dn(t.padding);let w=b.height,v=0,P=s.reduce((x,L)=>x+L.before.length+L.lines.length+L.after.length,0);if(P+=e.beforeBody.length+e.afterBody.length,d&&(w+=d*u.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),P){const x=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;w+=g*x+(P-g)*l.lineHeight+(P-1)*t.bodySpacing}p&&(w+=t.footerMarginTop+p*h.lineHeight+(p-1)*t.footerSpacing);let O=0;const k=function(x){v=Math.max(v,n.measureText(x).width+O)};return n.save(),n.font=u.string,Ft(e.title,k),n.font=l.string,Ft(e.beforeBody.concat(e.afterBody),k),O=t.displayColors?o+2+t.boxPadding:0,Ft(s,x=>{Ft(x.before,k),Ft(x.lines,k),Ft(x.after,k)}),O=0,n.font=h.string,Ft(e.footer,k),n.restore(),v+=b.width,{width:v,height:w}}function wL(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function EL(e,t,n,s){const{x:i,width:r}=s,o=n.caretSize+n.caretPadding;if(e==="left"&&i+r+o>t.width||e==="right"&&i-r-o<0)return!0}function TL(e,t,n,s){const{x:i,width:r}=n,{width:o,chartArea:{left:a,right:l}}=e;let u="center";return s==="center"?u=i<=(a+l)/2?"left":"right":i<=r/2?u="left":i>=o-r/2&&(u="right"),EL(u,e,t,n)&&(u="center"),u}function O_(e,t,n){const s=n.yAlign||t.yAlign||wL(e,n);return{xAlign:n.xAlign||t.xAlign||TL(e,t,n,s),yAlign:s}}function IL(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function AL(e,t,n){let{y:s,height:i}=e;return t==="top"?s+=n:t==="bottom"?s-=i+n:s-=i/2,s}function M_(e,t,n,s){const{caretSize:i,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,u=i+r,{topLeft:h,topRight:d,bottomLeft:p,bottomRight:g}=qo(o);let b=IL(t,a);const w=AL(t,l,u);return l==="center"?a==="left"?b+=u:a==="right"&&(b-=u):a==="left"?b-=Math.max(h,p)+i:a==="right"&&(b+=Math.max(d,g)+i),{x:mn(b,0,s.width-t.width),y:mn(w,0,s.height-t.height)}}function al(e,t,n){const s=Dn(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function N_(e){return Ln([],hs(e))}function SL(e,t,n){return qr(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function V_(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const OE={beforeTitle:cs,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:cs,beforeBody:cs,beforeLabel:cs,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return je(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:cs,afterBody:cs,beforeFooter:cs,footer:cs,afterFooter:cs};function Xe(e,t,n,s){const i=e[t].call(n,s);return typeof i>"u"?OE[t].call(n,s):i}class L_ extends Pa{static positioners=Ro;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&n.options.animation&&s.animations,r=new bE(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=SL(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,i=Xe(s,"beforeTitle",this,t),r=Xe(s,"title",this,t),o=Xe(s,"afterTitle",this,t);let a=[];return a=Ln(a,hs(i)),a=Ln(a,hs(r)),a=Ln(a,hs(o)),a}getBeforeBody(t,n){return N_(Xe(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,i=[];return Ft(t,r=>{const o={before:[],lines:[],after:[]},a=V_(s,r);Ln(o.before,hs(Xe(a,"beforeLabel",this,r))),Ln(o.lines,Xe(a,"label",this,r)),Ln(o.after,hs(Xe(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(t,n){return N_(Xe(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,i=Xe(s,"beforeFooter",this,t),r=Xe(s,"footer",this,t),o=Xe(s,"afterFooter",this,t);let a=[];return a=Ln(a,hs(i)),a=Ln(a,hs(r)),a=Ln(a,hs(o)),a}_createItems(t){const n=this._active,s=this.chart.data,i=[],r=[],o=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(bL(this.chart,n[l]));return t.filter&&(a=a.filter((h,d,p)=>t.filter(h,d,p,s))),t.itemSort&&(a=a.sort((h,d)=>t.itemSort(h,d,s))),Ft(a,h=>{const d=V_(t.callbacks,h);i.push(Xe(d,"labelColor",this,h)),r.push(Xe(d,"labelPointStyle",this,h)),o.push(Xe(d,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,n){const s=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=Ro[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=D_(this,s),u=Object.assign({},a,l),h=O_(this.chart,s,u),d=M_(s,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,i){const r=this.getCaretPosition(t,s,i);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(t,n,s){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:d}=qo(a),{x:p,y:g}=t,{width:b,height:w}=n;let v,P,O,k,x,L;return r==="center"?(x=g+w/2,i==="left"?(v=p,P=v-o,k=x+o,L=x-o):(v=p+b,P=v+o,k=x-o,L=x+o),O=v):(i==="left"?P=p+Math.max(l,h)+o:i==="right"?P=p+b-Math.max(u,d)-o:P=this.caretX,r==="top"?(k=g,x=k-o,v=P-o,O=P+o):(k=g+w,x=k+o,v=P+o,O=P-o),L=k),{x1:v,x2:P,x3:O,y1:k,y2:x,y3:L}}drawTitle(t,n,s){const i=this.title,r=i.length;let o,a,l;if(r){const u=Sr(s.rtl,this.x,this.width);for(t.x=al(this,s.titleAlign,s),n.textAlign=u.textAlign(s.titleAlign),n.textBaseline="middle",o=sn(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(i[l],u.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,n,s,i,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:u}=r,h=sn(r.bodyFont),d=al(this,"left",r),p=i.x(d),g=l<h.lineHeight?(h.lineHeight-l)/2:0,b=n.y+g;if(r.usePointStyle){const w={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},v=i.leftForLtr(p,u)+u/2,P=b+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,t_(t,w,v,P),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,t_(t,w,v,P)}else{t.lineWidth=Dt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const w=i.leftForLtr(p,u),v=i.leftForLtr(i.xPlus(p,1),u-2),P=qo(o.borderRadius);Object.values(P).some(O=>O!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Hh(t,{x:w,y:b,w:u,h:l,radius:P}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Hh(t,{x:v,y:b+1,w:u-2,h:l-2,radius:P}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(w,b,u,l),t.strokeRect(w,b,u,l),t.fillStyle=o.backgroundColor,t.fillRect(v,b+1,u-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:h}=s,d=sn(s.bodyFont);let p=d.lineHeight,g=0;const b=Sr(s.rtl,this.x,this.width),w=function(_){n.fillText(_,b.x(t.x+g),t.y+p/2),t.y+=p+r},v=b.textAlign(o);let P,O,k,x,L,U,T;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,t.x=al(this,v,s),n.fillStyle=s.bodyColor,Ft(this.beforeBody,w),g=a&&v!=="right"?o==="center"?u/2+h:u+2+h:0,x=0,U=i.length;x<U;++x){for(P=i[x],O=this.labelTextColors[x],n.fillStyle=O,Ft(P.before,w),k=P.lines,a&&k.length&&(this._drawColorBox(n,t,x,b,s),p=Math.max(d.lineHeight,l)),L=0,T=k.length;L<T;++L)w(k[L]),p=d.lineHeight;Ft(P.after,w)}g=0,p=d.lineHeight,Ft(this.afterBody,w),t.y-=r}drawFooter(t,n,s){const i=this.footer,r=i.length;let o,a;if(r){const l=Sr(s.rtl,this.x,this.width);for(t.x=al(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=sn(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(i[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,n,s,i){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:u,height:h}=s,{topLeft:d,topRight:p,bottomLeft:g,bottomRight:b}=qo(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(t,n,s,i),n.lineTo(a+u-p,l),n.quadraticCurveTo(a+u,l,a+u,l+p),o==="center"&&r==="right"&&this.drawCaret(t,n,s,i),n.lineTo(a+u,l+h-b),n.quadraticCurveTo(a+u,l+h,a+u-b,l+h),o==="bottom"&&this.drawCaret(t,n,s,i),n.lineTo(a+g,l+h),n.quadraticCurveTo(a,l+h,a,l+h-g),o==="center"&&r==="left"&&this.drawCaret(t,n,s,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const o=Ro[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=D_(this,t),l=Object.assign({},o,this._size),u=O_(n,t,l),h=M_(t,l,u,n);(i._to!==h.x||r._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Dn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,i,n),yE(t,n.textDirection),r.y+=o.top,this.drawTitle(r,t,n),this.drawBody(r,t,n),this.drawFooter(r,t,n),vE(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,i=t.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),r=!ic(s,i),o=this._positionChanged(i,n);(r||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,n,s),a=this._positionChanged(o,t),l=n||!ic(o,r)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,s,i){const r=this.options;if(t.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:s,caretY:i,options:r}=this,o=Ro[r.position].call(this,t,n);return o!==!1&&(s!==o.x||i!==o.y)}}var RL={id:"tooltip",_element:L_,positioners:Ro,afterInit(e,t,n){n&&(e.tooltip=new L_({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:OE},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Zc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},tn=Object.keys(Zc);function F_(e,t){return e-t}function U_(e,t){if(je(t))return null;const n=e._adapter,{parser:s,round:i,isoWeekday:r}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),ks(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(lc(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,i)),+o)}function B_(e,t,n,s){const i=tn.length;for(let r=tn.indexOf(e);r<i-1;++r){const o=Zc[tn[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(a*o.size))<=s)return tn[r]}return tn[i-1]}function CL(e,t,n,s,i){for(let r=tn.length-1;r>=tn.indexOf(n);r--){const o=tn[r];if(Zc[o].common&&e._adapter.diff(i,s,o)>=t-1)return o}return tn[n?tn.indexOf(n):0]}function PL(e){for(let t=tn.indexOf(e)+1,n=tn.length;t<n;++t)if(Zc[tn[t]].common)return tn[t]}function j_(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:i}=hf(n,t),r=n[s]>=t?n[s]:n[i];e[r]=!0}}function xL(e,t,n,s){const i=e._adapter,r=+i.startOf(t[0].value,s),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+i.add(a,1,s))l=n[a],l>=0&&(t[l].major=!0);return t}function z_(e,t,n){const s=[],i={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],i[a]=o,s.push({value:a,major:!1});return r===0||!n?s:xL(e,s,i,n)}class H_ extends Jc{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),i=this._adapter=new JN._date(t.adapters.date);i.init(n),Ho(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:U_(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(i=Math.min(i,u.min)),!a&&!isNaN(u.max)&&(r=Math.max(r,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=ks(i)&&!isNaN(i)?i:+n.startOf(Date.now(),s),r=ks(r)&&!isNaN(r)?r:+n.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=$M(i,r,o);return this._unit=n.unit||(s.autoSkip?B_(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):CL(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:PL(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),z_(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,i,r;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?n=1-i:n=(this.getDecimalForValue(t[1])-i)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=mn(n,0,o),s=mn(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,i=this.options,r=i.time,o=r.unit||B_(r.minUnit,n,s,this._getLabelCapacity(n)),a=Ut(i.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,u=lc(l)||l===!0,h={};let d=n,p,g;if(u&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,u?"day":o),t.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const b=i.ticks.source==="data"&&this.getDataTimestamps();for(p=d,g=0;p<s;p=+t.add(p,a,o),g++)j_(h,p,b);return(p===s||i.bounds==="ticks"||g===1)&&j_(h,p,b),Object.keys(h).sort(F_).map(w=>+w)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const i=this.options.time.displayFormats,r=this._unit,o=n||i[r];return this._adapter.format(t,o)}_tickFormatFunction(t,n,s,i){const r=this.options,o=r.ticks.callback;if(o)return Wt(o,[t,n,s],this);const a=r.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&a[l],d=u&&a[u],p=s[n],g=u&&d&&p&&p.major;return this._adapter.format(t,i||(g?d:h))}generateTickLabels(t){let n,s,i;for(n=0,s=t.length;n<s;++n)i=t[n],i.label=this._tickFormatFunction(i.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,i=Vi(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,i=s[n.unit]||s.millisecond,r=this._tickFormatFunction(t,0,z_(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,s=i.length;n<s;++n)t=t.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const i=this.getLabels();for(n=0,s=i.length;n<s;++n)t.push(U_(this,i[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return qM(t.sort(F_))}}function ll(e,t,n){let s=0,i=e.length-1,r,o,a,l;n?(t>=e[s].pos&&t<=e[i].pos&&({lo:s,hi:i}=jh(e,"pos",t)),{pos:r,time:a}=e[s],{pos:o,time:l}=e[i]):(t>=e[s].time&&t<=e[i].time&&({lo:s,hi:i}=jh(e,"time",t)),{time:r,pos:a}=e[s],{time:o,pos:l}=e[i]);const u=o-r;return u?a+(l-a)*(t-r)/u:a}class O2 extends H_{static id="timeseries";static defaults=H_.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=ll(n,this.min),this._tableRange=ll(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,i=[],r=[];let o,a,l,u,h;for(o=0,a=t.length;o<a;++o)u=t[o],u>=n&&u<=s&&i.push(u);if(i.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=i.length;o<a;++o)h=i[o+1],l=i[o-1],u=i[o],Math.round((h+l)/2)!==u&&r.push({time:u,pos:o/(a-1)});return r}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(ll(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return ll(this._table,s*this._tableRange+this._minPos,!0)}}const kL={class:"mood_trends_holder"},DL={class:"mood_trends_timerange_holder"},OL=["onClick"],ML={class:"mood_trends_items"},NL={class:"mood_trend_explained_holder"},VL={__name:"moodTrends",setup(e){qh.register(XN,fL,RL,vL);const t=qt(()=>[{label:"Very Sad",ref:"very_sad",icon:"far fa-sad-tear",color:"#6A5D7B"},{label:"Sad",ref:"sad",icon:"far fa-frown",color:"#9FB1BC"},{label:"Neutral",ref:"neutral",icon:"far fa-meh",color:"#87BFBA"},{label:"Happy",ref:"happy",icon:"far fa-grin",color:"#F3C677"},{label:"Very Happy",ref:"very_happy",icon:"far fa-grin-beam",color:"#F28C8C"}]),n=dn(),s=tt("7_days"),i=tt([]),r=tt(null),o=[{key:"7_days",label:"7 Days",days:7},{key:"30_days",label:"30 Days",days:30},{key:"90_days",label:"3 Months",days:90}],a=n.userData.uid;function l(p){const g=o.find(v=>v.key===p),b=new Date,w=new Date;return w.setDate(b.getDate()-g.days),{start:w,end:b}}async function u(){const p=await Bi(Be(Se,"mood",a));if(!p.exists()){i.value=[],d();return}const g=p.data(),{start:b,end:w}=l(s.value);i.value=Object.values(g).filter(v=>{if(!v.mood_logged)return!1;let P;return v.mood_logged.toDate?P=v.mood_logged.toDate():P=new Date(v.mood_logged),P>=b&&P<=w}),d()}function h(){const p={};return i.value.forEach(g=>{const b=g.mood_value||g.mood||"Unknown";p[b]=(p[b]||0)+1}),{labels:Object.keys(p),data:Object.values(p)}}function d(){Ur(()=>{const p=document.getElementById("moodPieChart")?.getContext("2d");if(!p)return;const{data:g}=h();r.value?(r.value.data.datasets[0].data=g,r.value.update()):r.value=new qh(p,{type:"pie",data:{datasets:[{data:g,backgroundColor:["#6A5D7B","#9FB1BC","#87BFBA","#F3C677","#F28C8C"]}]},options:{responsive:!0,plugins:{legend:{position:"bottom"},tooltip:{enabled:!0}}}})})}return bs(s,u),is(u),(p,g)=>(Y(),nt("div",kL,[g[2]||(g[2]=M("div",{class:"mood_trends_heading_holder inter font_size_xs"}," My Mood Overview ",-1)),g[3]||(g[3]=M("br",null,null,-1)),M("div",DL,[(Y(),nt(xt,null,de(o,b=>M("div",{key:b.key,class:xn(["mood_trends_timerange inter font_size_xxs",{mood_trends_timerange_selected:s.value===b.key}]),onClick:w=>s.value=b.key},Et(b.label),11,OL)),64))]),g[4]||(g[4]=M("br",null,null,-1)),g[5]||(g[5]=M("br",null,null,-1)),g[6]||(g[6]=M("div",{class:"mood_trends_graph_holder"},[M("canvas",{id:"moodPieChart",width:"400",height:"300"})],-1)),g[7]||(g[7]=M("br",null,null,-1)),M("div",ML,[(Y(!0),nt(xt,null,de(t.value,b=>(Y(),nt("div",NL,[M("div",{class:"mood_trend_color",style:Is({backgroundColor:b.color})},null,4),g[0]||(g[0]=Re("  ",-1)),M("i",{class:xn(b.icon),style:Is([{"font-size":"1.4rem"},{color:b.color}])},null,6),g[1]||(g[1]=Re(" ",-1))]))),256))])]))}},ME=wn(VL,[["__scopeId","data-v-8c918fb4"]]),LL={class:"journal_selection_holder inter font_size_xs"},FL=["onClick"],UL={key:0,class:"journal_entry_holder"},BL={class:"journal_entry_date_holder inter font_size_xs"},jL={class:"journal_entry_content_holder"},zL={key:1},HL={key:0,class:"journal_list_holder"},$L={class:"journal_list_heading inter font_size_sm"},WL={class:"journal_list_content inter font_size_xs"},qL={class:"journal_list_timestamp inter font_size_xxs"},KL={__name:"journal",emits:["close"],setup(e,{emit:t}){const n=t,s=dn(),i=tt("journalEntry"),r=[{key:"journalEntry",label:"New Journal Entry",cornerClass:"right-rounded"},{key:"journalList",label:"Journal List",cornerClass:"left-rounded"}],o=tt(new Date().toDateString()),a=tt(new Date().toLocaleTimeString()),l=tt(""),u=tt(""),h=tt(!1),d=tt(""),p=w=>{i.value=w,o.value=new Date().toDateString(),a.value=new Date().toLocaleTimeString()},g=()=>{h.value=!1,d.value=""},b=async()=>{if(!l.value){h.value=!0,d.value="Please give a journal title.";return}if(!u.value){h.value=!0,d.value="Please give journal content.";return}const v={[Date.now()]:{journalEntryHeading:l.value,journalEntryContent:u.value,journalEntryLogged:Xn()}};try{await Cn(Be(Se,"journals",s.userData.uid),v,{merge:!0}),h.value=!0,d.value="Your journal entry has been logged.",l.value="",u.value="",o.value=new Date().toDateString(),a.value=new Date().toLocaleTimeString(),n("close")}catch(P){console.error("Failed to save journal:",P),h.value=!0,d.value="Failed to save journal. Please try again."}};return(w,v)=>(Y(),nt(xt,null,[v[4]||(v[4]=M("div",{class:"journal_header_holder inter font_size_xs"}," My Journal ",-1)),M("div",LL,[(Y(),nt(xt,null,de(r,P=>M("div",{key:P.key,class:xn(["journal_selection",{active:i.value===P.key,[P.cornerClass]:!0}]),onClick:O=>p(P.key)},Et(P.label),11,FL)),64))]),i.value==="journalEntry"?(Y(),nt("div",UL,[M("div",BL,[M("div",null,[Re(Et(o.value)+" ",1),v[2]||(v[2]=M("br",null,null,-1)),Re(" "+Et(a.value),1)])]),M("div",jL,[ee(M("input",{placeholder:"Give us a title.",class:"journal_input inter font_size_xs","onUpdate:modelValue":v[0]||(v[0]=P=>l.value=P)},null,512),[[Ye,l.value]]),ee(M("textarea",{placeholder:"What's weighing on your mind today? Or what's a small win?",class:"journal_textarea inter font_size_xs","onUpdate:modelValue":v[1]||(v[1]=P=>u.value=P)},null,512),[[Ye,u.value]])]),v[3]||(v[3]=M("br",null,null,-1)),M("div",{class:"save_button inter font_size_xxs",onClick:b}," Save "),h.value?(Y(),Le(Wr,{key:0,errorMessage:d.value,onClose:g},null,8,["errorMessage"])):nn("",!0)])):(Y(),nt("div",zL,[Wn(s).journalData?(Y(),nt("div",HL,[(Y(!0),nt(xt,null,de(Wn(s).journalData,(P,O)=>(Y(),nt("div",{key:O,class:"journal_list_item inter"},[M("div",$L,Et(P.journalEntryHeading),1),M("div",WL,Et(P.journalEntryContent),1),M("div",qL," Logged on: "+Et(new Date(P.journalEntryLogged.seconds*1e3).toLocaleString()),1)]))),128))])):nn("",!0)]))],64))}},NE=wn(KL,[["__scopeId","data-v-1863fd7a"]]),GL={class:"mood_tracker_holder"},YL={class:"mood_icons_holder"},QL=["onClick"],XL=["onClick"],JL={class:"influence_holder",style:{height:"25rem"}},ZL={class:"influence_items_holder"},t2=["value"],e2={class:"influence_holder"},n2={style:{width:"100%",height:"15rem",display:"flex","flex-flow":"column nowrap","align-items":"center","justify-content":"center"}},s2={__name:"mood",emits:["close"],setup(e,{emit:t}){const n=dn(),s=t,i=qt(()=>[{label:"Very Sad",ref:"very_sad",icon:"far fa-sad-tear"},{label:"Sad",ref:"sad",icon:"far fa-frown"},{label:"Neutral",ref:"neutral",icon:"far fa-meh"},{label:"Happy",ref:"happy",icon:"far fa-grin"},{label:"Very Happy",ref:"very_happy",icon:"far fa-grin-beam"}]),r=qt(()=>[{label:"Sleep Quality",ref:"sleep_quality"},{label:"Nutrition",ref:"nutrition"},{label:"Physical Activity",ref:"physical_activity"},{label:"Social Connection",ref:"social_connection"},{label:"Mindset",ref:"mindset"},{label:"Environment",ref:"environment"},{label:"None",ref:"none"}]),o=tt(!1),a=tt(""),l=tt([]),u=tt(""),h=tt("neutral"),d=b=>{h.value=b},p=async()=>{if(l.value.length===0){o.value=!0,a.value="Please select an influence.";return}const w={[new Date().toISOString().split("T")[0]]:{mood:h.value,influences:l.value,optional_notes:u.value,mood_logged:Xn()}};await Cn(Be(Se,"mood",n.userData.uid),w,{merge:!0}),o.value=!0,a.value="Thank you for logging your mood. It will be taken into consideration.",n.setMoodData(w),s("close")},g=()=>{o.value=!1,a.value=""};return(b,w)=>(Y(),nt(xt,null,[M("div",GL,[w[6]||(w[6]=M("div",{class:"mood_heading_holder inter font_size_xs"},"How am I feeling today?",-1)),M("div",YL,[(Y(!0),nt(xt,null,de(i.value,v=>(Y(),nt("div",{class:"mood_icon_holder",key:v.ref},[h.value===v.ref?(Y(),nt("div",{key:0,class:xn(v.icon),style:{"font-size":"3rem",border:"0.2rem solid #87bfba",padding:"0.5rem","border-radius":"50%"},onClick:P=>d(v.ref)},null,10,QL)):(Y(),nt("div",{key:1,class:xn(v.icon),style:{"font-size":"3rem"},onClick:P=>d(v.ref)},null,10,XL))]))),128))]),M("div",JL,[w[4]||(w[4]=M("div",{class:"influence_heading_holder inter font_size_xs"},[M("b",null,"What might be influencing this?")],-1)),M("div",ZL,[(Y(!0),nt(xt,null,de(r.value,v=>(Y(),nt("div",{class:"influence_item_holder inter font_size_xxs",key:v.ref,style:{height:"12%"}},[w[3]||(w[3]=Re(" ",-1)),ee(M("input",{type:"checkbox","onUpdate:modelValue":w[0]||(w[0]=P=>l.value=P),value:v.ref},null,8,t2),[[Zy,l.value]]),Re(""+Et(v.label),1)]))),128))])]),M("div",e2,[M("div",n2,[w[5]||(w[5]=M("div",{class:"influence_heading_holder inter font_size_xs"},[M("b",null,"Optional Notes")],-1)),ee(M("textarea",{placeholder:"Write a few words about why you feel the way you feel",style:{width:"90%",height:"60%",padding:"0.5rem",border:"0.1rem solid #87bfba","border-radius":"1rem"},class:"inter font_size_xs","onUpdate:modelValue":w[1]||(w[1]=v=>u.value=v)},null,512),[[Ye,u.value]])])]),M("div",{class:"save_button inter font_size_xxs",onClick:w[2]||(w[2]=v=>p())},"Save")]),o.value?(Y(),Le(Wr,{key:0,errorMessage:a.value,onClose:g},null,8,["errorMessage"])):nn("",!0)],64))}},i2=wn(s2,[["__scopeId","data-v-7618c925"]]),r2={key:0,class:"empty_therapy_list inter font_size_xs"},o2={key:1,class:"therapy_sign_up"},a2={key:0,class:"therapy_sign_up_step_1"},l2={class:"therapist_sign_up_form_holder"},c2=["value"],u2=["value"],h2=["value"],d2={key:1,style:{width:"100%",height:"100%"}},f2={key:0},p2={class:"therapist_item_holder"},g2={class:"contact_buttons_holder"},m2=["onClick"],_2=["onClick"],y2={key:1,class:"empty_therapy_list inter font_size_xs"},v2={key:2,style:{width:"100%",height:"100%"}},b2={class:"therapist_item_holder"},w2={key:2,class:"sign_up_button_holder inter font_size_s"},E2={key:3,class:"verify_therapists_holder inter font_size_s"},Ju="therapist_signup_state",T2={__name:"therapists",setup(e){const t=dn(),n=tt(t.userData.personalInfo.email),s=tt(t.userData.personalInfo.name),i=tt(""),r=tt(t.userData.admin||0),o=tt("home_list"),a=tt([]),l=tt([]),u=tt(""),h=tt(""),d=tt(""),p=tt(null),g=tt(null),b=tt(!1),w=tt(""),v=tt([{value:"dr",text:"Dr."},{value:"mr",text:"Mr."},{value:"mrs",text:"Mrs."},{value:"miss",text:"Miss."},{value:"ms",text:"Ms."}]),P=tt([{value:"phd",text:"PhD"},{value:"msc",text:"MSc"},{value:"ma",text:"MA"}]),O=tt([{value:"psychologist",text:"Psychologist"},{value:"psychiatrist",text:"Psychiatrist"},{value:"social_worker",text:"Social Worker"}]);function k(A){return A?(A.charAt(0).toUpperCase()+A.slice(1)).replace("_"," "):""}function x(){return new Promise((A,S)=>{if(window.google?.maps?.places){A();return}const E=document.createElement("script");E.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBWGRHjfWWoBWojyOBuGi75ACgNAkGobws&libraries=places",E.async=!0,E.defer=!0,E.onload=A,E.onerror=S,document.head.appendChild(E)})}is(()=>{a.value=[],l.value=[],t.therapists?.forEach(S=>{S.isVerified?a.value.push(S):l.value.push(S)});const A=JSON.parse(localStorage.getItem(Ju));A&&(o.value=A.signUpStep||"home_list",i.value=A.username||"",u.value=A.selectedTitle||"",h.value=A.selectedAcademicTitle||"",d.value=A.selectedCredential||"",p.value=A.selectedAddress||null)}),bs([o,i,u,h,d,p],()=>{localStorage.setItem(Ju,JSON.stringify({signUpStep:o.value,username:i.value,selectedTitle:u.value,selectedAcademicTitle:h.value,selectedCredential:d.value,selectedAddress:p.value}))},{deep:!0}),bs(o,async A=>{if(A!=="step_1"||(await Ur(),await x(),!g.value))return;const S=new google.maps.places.Autocomplete(g.value,{types:["address"],componentRestrictions:{country:"za"}});S.addListener("place_changed",()=>{const E=S.getPlace();p.value={city:E.address_components?.find(bt=>bt.types.includes("locality"))?.long_name||"",province:E.address_components?.find(bt=>bt.types.includes("administrative_area_level_1"))?.long_name||""}})});const L=()=>o.value="step_1",U=()=>o.value="verify_therapist",T=()=>o.value="home_list",_=async()=>{if(!p.value){w.value="Please select an address",b.value=!0;return}const A=Be(Se,"therapists",t.userData.uid);if((await Bi(A)).exists()){w.value="You are already registered as a therapist.",b.value=!0;return}await Cn(A,{email:n.value,nameSurname:s.value,userName:i.value,title:u.value,academicTitle:h.value,credential:d.value,address:p.value,isVerified:!1,createdAt:new Date}),localStorage.removeItem(Ju),w.value="Thank you. You will be redirected shortly.",b.value=!0,setTimeout(()=>{window.location.href="https://docs.google.com/forms/d/e/1FAIpQLSe2kKgs6Qnvl1uNfVSVEjUeCRmM8jv6E6O-6xhy-1mIiAYvLg/viewform"},8e3)},I=async A=>{await Cn(Be(Se,"therapists",A.id),{isVerified:!0},{merge:!0}),l.value=l.value.filter(S=>S.id!==A.id),a.value.push(A)},C=A=>{l.value=l.value.filter(S=>S.id!==A.id)};return(A,S)=>(Y(),nt(xt,null,[o.value==="home_list"&&a.value.length===0&&l.value.length>=0?(Y(),nt("div",r2," No therapists are listed at this moment. ")):(Y(),nt("div",o2,[o.value==="step_1"?(Y(),nt("div",a2,[S[10]||(S[10]=M("div",{class:"therapy_sign_up_heading inter font_size_xs"},[M("b",null,"Let's get you signed up and listed!")],-1)),S[11]||(S[11]=M("br",null,null,-1)),M("form",l2,[ee(M("input",{class:"form_input inter font_size_xs",type:"text",placeholder:"Email Address","onUpdate:modelValue":S[0]||(S[0]=E=>n.value=E)},null,512),[[Ye,n.value]]),ee(M("input",{class:"form_input inter font_size_xs",type:"text",placeholder:"Username","onUpdate:modelValue":S[1]||(S[1]=E=>i.value=E)},null,512),[[Ye,i.value]]),ee(M("select",{class:"form_input inter font_size_xs","onUpdate:modelValue":S[2]||(S[2]=E=>u.value=E)},[S[7]||(S[7]=M("option",{disabled:"",value:""},"Select your title",-1)),(Y(!0),nt(xt,null,de(v.value,E=>(Y(),nt("option",{key:E.value,value:E.value},Et(E.text),9,c2))),128))],512),[[ii,u.value]]),ee(M("input",{class:"form_input inter font_size_xs",type:"text",placeholder:"Name & Surname","onUpdate:modelValue":S[3]||(S[3]=E=>s.value=E)},null,512),[[Ye,s.value]]),ee(M("select",{class:"form_input inter font_size_xs","onUpdate:modelValue":S[4]||(S[4]=E=>h.value=E)},[S[8]||(S[8]=M("option",{disabled:"",value:""},"Select your academic title",-1)),(Y(!0),nt(xt,null,de(P.value,E=>(Y(),nt("option",{key:E.value,value:E.value},Et(E.text),9,u2))),128))],512),[[ii,h.value]]),ee(M("select",{class:"form_input inter font_size_xs","onUpdate:modelValue":S[5]||(S[5]=E=>d.value=E)},[S[9]||(S[9]=M("option",{disabled:"",value:""},"Select your credential",-1)),(Y(!0),nt(xt,null,de(O.value,E=>(Y(),nt("option",{key:E.value,value:E.value},Et(E.text),9,h2))),128))],512),[[ii,d.value]]),M("input",{ref_key:"addressInput",ref:g,class:"form_input inter font_size_xs",type:"text",placeholder:"Search address"},null,512)]),M("button",{class:"form_button inter font_size_xs",onClick:_}," Confirm ")])):o.value==="verify_therapist"?(Y(),nt("div",d2,[l.value.length?(Y(),nt("div",f2,[(Y(!0),nt(xt,null,de(l.value,E=>(Y(),nt("div",{class:"therapist_items_holder inter font_size_xs",key:E.userName},[M("div",p2,[M("b",null,Et(E.nameSurname),1),S[14]||(S[14]=M("br",null,null,-1)),Re(" "+Et(E.email),1),S[15]||(S[15]=M("br",null,null,-1)),Re(" "+Et(E.credential),1),S[16]||(S[16]=M("br",null,null,-1)),Re(" "+Et(E.address.city)+", "+Et(E.address.province)+" ",1),M("div",g2,[M("div",{class:"contact_button",onClick:bt=>I(E)},[...S[12]||(S[12]=[M("i",{class:"fas fa-user-check"},null,-1)])],8,m2),M("div",{class:"contact_button",onClick:bt=>C(E)},[...S[13]||(S[13]=[M("i",{class:"fas fa-user-times"},null,-1)])],8,_2)])])]))),128))])):(Y(),nt("div",y2,[S[17]||(S[17]=M("div",null,"No therapists need verifying at this moment.",-1)),M("div",{class:"sign_up_button_holder inter font_size_s"},[M("i",{class:"far fa-address-book",onClick:T})])]))])):o.value==="home_list"&&a.value.length?(Y(),nt("div",v2,[(Y(!0),nt(xt,null,de(a.value,E=>(Y(),nt("div",{class:"therapist_items_holder inter font_size_xs",key:E.userName},[M("div",b2,[M("b",null,Et(E.nameSurname),1),S[18]||(S[18]=M("br",null,null,-1)),Re(" "+Et(k(E.credential)),1),S[19]||(S[19]=M("br",null,null,-1)),Re(" "+Et(E.address.city)+", "+Et(E.address.province),1)])]))),128))])):nn("",!0)])),o.value==="home_list"?(Y(),nt("div",w2,[M("i",{class:"fas fa-plus",onClick:L})])):nn("",!0),o.value==="home_list"&&r.value===1?(Y(),nt("div",E2,[M("i",{class:"fas fa-award",onClick:U})])):nn("",!0),b.value?(Y(),Le(Wr,{key:4,errorMessage:w.value,onClose:S[6]||(S[6]=E=>b.value=!1)},null,8,["errorMessage"])):nn("",!0)],64))}},I2=wn(T2,[["__scopeId","data-v-f3b2eb5e"]]),A2={class:"navigation_bar_holder"},S2=["onClick"],R2=["innerHTML"],C2={__name:"navigation",setup(e){const t={home:{name:"Home",icon:'<i class="fa fa-home"></i>'},journal:{name:"Journal",icon:'<i class="fa fa-book"></i>'},profile:{name:"Profile",icon:'<i class="fa fa-id-card"></i>'}};dn();const n=tt("home"),s=i=>{n.value=i,localStorage.setItem("currentPage",i)};return is(()=>{const i=localStorage.getItem("currentPage");i&&t[i]&&(n.value=i)}),(i,r)=>(Y(),nt(xt,null,[n.value==="profile"?(Y(),Le(tE,{key:0,onSetPage:s})):n.value==="home"?(Y(),Le(Ww,{key:1,onSetPage:s})):n.value==="mood"?(Y(),Le(i2,{key:2})):n.value==="journal"?(Y(),Le(NE,{key:3})):n.value==="therapists"?(Y(),Le(I2,{key:4})):n.value==="moodTrends"?(Y(),Le(ME,{key:5})):nn("",!0),M("div",A2,[(Y(),nt(xt,null,de(t,(o,a)=>M("div",{class:"navigation_item_holder inter font_size_xxs",key:a},[M("div",{class:xn(["navigation_item",{active:n.value===a}]),onClick:l=>s(a)},[M("div",{innerHTML:o.icon},null,8,R2),M("div",null,Et(o.name),1)],10,S2)])),64))])],64))}},P2=wn(C2,[["__scopeId","data-v-d60e32c3"]]),x2=[{path:"/",name:"Loading",component:xO},{path:"/login",name:"Login",component:lO},{path:"/navigation",name:"Navigation",component:P2},{path:"/home/",name:"Home",component:Ww,props:!0},{path:"/profile/",name:"Profile",component:tE,props:!0},{path:"/journal/",name:"JournalEntry",component:NE,props:!0},{path:"/mood/",name:"MoodTrends",component:ME,props:!0}],VE=GA({history:SA(),routes:x2});VE.beforeEach(async(e,t,n)=>{const s=dn();if(s.userData||await s.fetchUserData(),!s.userData?.uid&&e.name!=="Login")return n({name:"Login"});n()});let $_=null;Hn.onAuthStateChanged(()=>{if(!$_){const e=k0(z0);e.use(M0()),e.use(VE),e.mount("#app"),$_=e}});
