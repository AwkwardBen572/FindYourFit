(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Wh(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const zt={},_r=[],zn=()=>{},j_=()=>!1,pc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),qh=e=>e.startsWith("onUpdate:"),He=Object.assign,Kh=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},sT=Object.prototype.hasOwnProperty,Nt=(e,t)=>sT.call(e,t),pt=Array.isArray,yr=e=>fa(e)==="[object Map]",Fr=e=>fa(e)==="[object Set]",rp=e=>fa(e)==="[object Date]",bt=e=>typeof e=="function",he=e=>typeof e=="string",Jn=e=>typeof e=="symbol",$t=e=>e!==null&&typeof e=="object",z_=e=>($t(e)||bt(e))&&bt(e.then)&&bt(e.catch),$_=Object.prototype.toString,fa=e=>$_.call(e),iT=e=>fa(e).slice(8,-1),H_=e=>fa(e)==="[object Object]",Gh=e=>he(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Co=Wh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),gc=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},rT=/-\w/g,En=gc(e=>e.replace(rT,t=>t.slice(1).toUpperCase())),oT=/\B([A-Z])/g,Yi=gc(e=>e.replace(oT,"-$1").toLowerCase()),mc=gc(e=>e.charAt(0).toUpperCase()+e.slice(1)),fu=gc(e=>e?`on${mc(e)}`:""),ti=(e,t)=>!Object.is(e,t),cl=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},W_=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},Al=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let op;const _c=()=>op||(op=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ts(e){if(pt(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],i=he(s)?uT(s):Ts(s);if(i)for(const r in i)t[r]=i[r]}return t}else if(he(e)||$t(e))return e}const aT=/;(?![^(]*\))/g,lT=/:([^]+)/,cT=/\/\*[^]*?\*\//g;function uT(e){const t={};return e.replace(cT,"").split(aT).forEach(n=>{if(n){const s=n.split(lT);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function fn(e){let t="";if(he(e))t=e;else if(pt(e))for(let n=0;n<e.length;n++){const s=fn(e[n]);s&&(t+=s+" ")}else if($t(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const hT="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",dT=Wh(hT);function q_(e){return!!e||e===""}function fT(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=Bi(e[s],t[s]);return n}function Bi(e,t){if(e===t)return!0;let n=rp(e),s=rp(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=Jn(e),s=Jn(t),n||s)return e===t;if(n=pt(e),s=pt(t),n||s)return n&&s?fT(e,t):!1;if(n=$t(e),s=$t(t),n||s){if(!n||!s)return!1;const i=Object.keys(e).length,r=Object.keys(t).length;if(i!==r)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!Bi(e[o],t[o]))return!1}}return String(e)===String(t)}function Yh(e,t){return e.findIndex(n=>Bi(n,t))}const K_=e=>!!(e&&e.__v_isRef===!0),Et=e=>he(e)?e:e==null?"":pt(e)||$t(e)&&(e.toString===$_||!bt(e.toString))?K_(e)?Et(e.value):JSON.stringify(e,G_,2):String(e),G_=(e,t)=>K_(t)?G_(e,t.value):yr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,i],r)=>(n[pu(s,r)+" =>"]=i,n),{})}:Fr(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>pu(n))}:Jn(t)?pu(t):$t(t)&&!pt(t)&&!H_(t)?String(t):t,pu=(e,t="")=>{var n;return Jn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Le;class Y_{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Le,!t&&Le&&(this.index=(Le.scopes||(Le.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Le;try{return Le=this,t()}finally{Le=n}}}on(){++this._on===1&&(this.prevScope=Le,Le=this)}off(){this._on>0&&--this._on===0&&(Le=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Q_(e){return new Y_(e)}function X_(){return Le}function pT(e,t=!1){Le&&Le.cleanups.push(e)}let Ht;const gu=new WeakSet;class J_{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Le&&Le.active&&Le.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,gu.has(this)&&(gu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ty(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ap(this),ey(this);const t=Ht,n=Rn;Ht=this,Rn=!0;try{return this.fn()}finally{ny(this),Ht=t,Rn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Jh(t);this.deps=this.depsTail=void 0,ap(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?gu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Xu(this)&&this.run()}get dirty(){return Xu(this)}}let Z_=0,xo,Po;function ty(e,t=!1){if(e.flags|=8,t){e.next=Po,Po=e;return}e.next=xo,xo=e}function Qh(){Z_++}function Xh(){if(--Z_>0)return;if(Po){let t=Po;for(Po=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;xo;){let t=xo;for(xo=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function ey(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function ny(e){let t,n=e.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),Jh(s),gT(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}e.deps=t,e.depsTail=n}function Xu(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(sy(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function sy(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ko)||(e.globalVersion=Ko,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Xu(e))))return;e.flags|=2;const t=e.dep,n=Ht,s=Rn;Ht=e,Rn=!0;try{ey(e);const i=e.fn(e._value);(t.version===0||ti(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{Ht=n,Rn=s,ny(e),e.flags&=-3}}function Jh(e,t=!1){const{dep:n,prevSub:s,nextSub:i}=e;if(s&&(s.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Jh(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function gT(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Rn=!0;const iy=[];function Is(){iy.push(Rn),Rn=!1}function As(){const e=iy.pop();Rn=e===void 0?!0:e}function ap(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Ht;Ht=void 0;try{t()}finally{Ht=n}}}let Ko=0;class mT{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Zh{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Ht||!Rn||Ht===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ht)n=this.activeLink=new mT(Ht,this),Ht.deps?(n.prevDep=Ht.depsTail,Ht.depsTail.nextDep=n,Ht.depsTail=n):Ht.deps=Ht.depsTail=n,ry(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Ht.depsTail,n.nextDep=void 0,Ht.depsTail.nextDep=n,Ht.depsTail=n,Ht.deps===n&&(Ht.deps=s)}return n}trigger(t){this.version++,Ko++,this.notify(t)}notify(t){Qh();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Xh()}}}function ry(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)ry(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Sl=new WeakMap,Vi=Symbol(""),Ju=Symbol(""),Go=Symbol("");function Ue(e,t,n){if(Rn&&Ht){let s=Sl.get(e);s||Sl.set(e,s=new Map);let i=s.get(n);i||(s.set(n,i=new Zh),i.map=s,i.key=n),i.track()}}function ds(e,t,n,s,i,r){const o=Sl.get(e);if(!o){Ko++;return}const a=l=>{l&&l.trigger()};if(Qh(),t==="clear")o.forEach(a);else{const l=pt(e),u=l&&Gh(n);if(l&&n==="length"){const h=Number(s);o.forEach((d,f)=>{(f==="length"||f===Go||!Jn(f)&&f>=h)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(Go)),t){case"add":l?u&&a(o.get("length")):(a(o.get(Vi)),yr(e)&&a(o.get(Ju)));break;case"delete":l||(a(o.get(Vi)),yr(e)&&a(o.get(Ju)));break;case"set":yr(e)&&a(o.get(Vi));break}}Xh()}function _T(e,t){const n=Sl.get(e);return n&&n.get(t)}function or(e){const t=Dt(e);return t===e?t:(Ue(t,"iterate",Go),vn(e)?t:t.map(Ce))}function yc(e){return Ue(e=Dt(e),"iterate",Go),e}const yT={__proto__:null,[Symbol.iterator](){return mu(this,Symbol.iterator,Ce)},concat(...e){return or(this).concat(...e.map(t=>pt(t)?or(t):t))},entries(){return mu(this,"entries",e=>(e[1]=Ce(e[1]),e))},every(e,t){return rs(this,"every",e,t,void 0,arguments)},filter(e,t){return rs(this,"filter",e,t,n=>n.map(Ce),arguments)},find(e,t){return rs(this,"find",e,t,Ce,arguments)},findIndex(e,t){return rs(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return rs(this,"findLast",e,t,Ce,arguments)},findLastIndex(e,t){return rs(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return rs(this,"forEach",e,t,void 0,arguments)},includes(...e){return _u(this,"includes",e)},indexOf(...e){return _u(this,"indexOf",e)},join(e){return or(this).join(e)},lastIndexOf(...e){return _u(this,"lastIndexOf",e)},map(e,t){return rs(this,"map",e,t,void 0,arguments)},pop(){return lo(this,"pop")},push(...e){return lo(this,"push",e)},reduce(e,...t){return lp(this,"reduce",e,t)},reduceRight(e,...t){return lp(this,"reduceRight",e,t)},shift(){return lo(this,"shift")},some(e,t){return rs(this,"some",e,t,void 0,arguments)},splice(...e){return lo(this,"splice",e)},toReversed(){return or(this).toReversed()},toSorted(e){return or(this).toSorted(e)},toSpliced(...e){return or(this).toSpliced(...e)},unshift(...e){return lo(this,"unshift",e)},values(){return mu(this,"values",Ce)}};function mu(e,t,n){const s=yc(e),i=s[t]();return s!==e&&!vn(e)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.done||(r.value=n(r.value)),r}),i}const vT=Array.prototype;function rs(e,t,n,s,i,r){const o=yc(e),a=o!==e&&!vn(e),l=o[t];if(l!==vT[t]){const d=l.apply(e,r);return a?Ce(d):d}let u=n;o!==e&&(a?u=function(d,f){return n.call(this,Ce(d),f,e)}:n.length>2&&(u=function(d,f){return n.call(this,d,f,e)}));const h=l.call(o,u,s);return a&&i?i(h):h}function lp(e,t,n,s){const i=yc(e);let r=n;return i!==e&&(vn(e)?n.length>3&&(r=function(o,a,l){return n.call(this,o,a,l,e)}):r=function(o,a,l){return n.call(this,o,Ce(a),l,e)}),i[t](r,...s)}function _u(e,t,n){const s=Dt(e);Ue(s,"iterate",Go);const i=s[t](...n);return(i===-1||i===!1)&&nd(n[0])?(n[0]=Dt(n[0]),s[t](...n)):i}function lo(e,t,n=[]){Is(),Qh();const s=Dt(e)[t].apply(e,n);return Xh(),As(),s}const bT=Wh("__proto__,__v_isRef,__isVue"),oy=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Jn));function wT(e){Jn(e)||(e=String(e));const t=Dt(this);return Ue(t,"has",e),t.hasOwnProperty(e)}class ay{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?kT:hy:r?uy:cy).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=pt(t);if(!i){let l;if(o&&(l=yT[n]))return l;if(n==="hasOwnProperty")return wT}const a=Reflect.get(t,n,ae(t)?t:s);if((Jn(n)?oy.has(n):bT(n))||(i||Ue(t,"get",n),r))return a;if(ae(a)){const l=o&&Gh(n)?a:a.value;return i&&$t(l)?th(l):l}return $t(a)?i?th(a):pa(a):a}}class ly extends ay{constructor(t=!1){super(!1,t)}set(t,n,s,i){let r=t[n];if(!this._isShallow){const l=li(r);if(!vn(s)&&!li(s)&&(r=Dt(r),s=Dt(s)),!pt(t)&&ae(r)&&!ae(s))return l||(r.value=s),!0}const o=pt(t)&&Gh(n)?Number(n)<t.length:Nt(t,n),a=Reflect.set(t,n,s,ae(t)?t:i);return t===Dt(i)&&(o?ti(s,r)&&ds(t,"set",n,s):ds(t,"add",n,s)),a}deleteProperty(t,n){const s=Nt(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&s&&ds(t,"delete",n,void 0),i}has(t,n){const s=Reflect.has(t,n);return(!Jn(n)||!oy.has(n))&&Ue(t,"has",n),s}ownKeys(t){return Ue(t,"iterate",pt(t)?"length":Vi),Reflect.ownKeys(t)}}class ET extends ay{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const TT=new ly,IT=new ET,AT=new ly(!0);const Zu=e=>e,Ba=e=>Reflect.getPrototypeOf(e);function ST(e,t,n){return function(...s){const i=this.__v_raw,r=Dt(i),o=yr(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,u=i[e](...s),h=n?Zu:t?Rl:Ce;return!t&&Ue(r,"iterate",l?Ju:Vi),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:a?[h(d[0]),h(d[1])]:h(d),done:f}},[Symbol.iterator](){return this}}}}function ja(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function RT(e,t){const n={get(i){const r=this.__v_raw,o=Dt(r),a=Dt(i);e||(ti(i,a)&&Ue(o,"get",i),Ue(o,"get",a));const{has:l}=Ba(o),u=t?Zu:e?Rl:Ce;if(l.call(o,i))return u(r.get(i));if(l.call(o,a))return u(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!e&&Ue(Dt(i),"iterate",Vi),i.size},has(i){const r=this.__v_raw,o=Dt(r),a=Dt(i);return e||(ti(i,a)&&Ue(o,"has",i),Ue(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=Dt(a),u=t?Zu:e?Rl:Ce;return!e&&Ue(l,"iterate",Vi),a.forEach((h,d)=>i.call(r,u(h),u(d),o))}};return He(n,e?{add:ja("add"),set:ja("set"),delete:ja("delete"),clear:ja("clear")}:{add(i){!t&&!vn(i)&&!li(i)&&(i=Dt(i));const r=Dt(this);return Ba(r).has.call(r,i)||(r.add(i),ds(r,"add",i,i)),this},set(i,r){!t&&!vn(r)&&!li(r)&&(r=Dt(r));const o=Dt(this),{has:a,get:l}=Ba(o);let u=a.call(o,i);u||(i=Dt(i),u=a.call(o,i));const h=l.call(o,i);return o.set(i,r),u?ti(r,h)&&ds(o,"set",i,r):ds(o,"add",i,r),this},delete(i){const r=Dt(this),{has:o,get:a}=Ba(r);let l=o.call(r,i);l||(i=Dt(i),l=o.call(r,i)),a&&a.call(r,i);const u=r.delete(i);return l&&ds(r,"delete",i,void 0),u},clear(){const i=Dt(this),r=i.size!==0,o=i.clear();return r&&ds(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=ST(i,e,t)}),n}function td(e,t){const n=RT(e,t);return(s,i,r)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(Nt(n,i)&&i in s?n:s,i,r)}const CT={get:td(!1,!1)},xT={get:td(!1,!0)},PT={get:td(!0,!1)};const cy=new WeakMap,uy=new WeakMap,hy=new WeakMap,kT=new WeakMap;function DT(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function OT(e){return e.__v_skip||!Object.isExtensible(e)?0:DT(iT(e))}function pa(e){return li(e)?e:ed(e,!1,TT,CT,cy)}function dy(e){return ed(e,!1,AT,xT,uy)}function th(e){return ed(e,!0,IT,PT,hy)}function ed(e,t,n,s,i){if(!$t(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=OT(e);if(r===0)return e;const o=i.get(e);if(o)return o;const a=new Proxy(e,r===2?s:n);return i.set(e,a),a}function ei(e){return li(e)?ei(e.__v_raw):!!(e&&e.__v_isReactive)}function li(e){return!!(e&&e.__v_isReadonly)}function vn(e){return!!(e&&e.__v_isShallow)}function nd(e){return e?!!e.__v_raw:!1}function Dt(e){const t=e&&e.__v_raw;return t?Dt(t):e}function sd(e){return!Nt(e,"__v_skip")&&Object.isExtensible(e)&&W_(e,"__v_skip",!0),e}const Ce=e=>$t(e)?pa(e):e,Rl=e=>$t(e)?th(e):e;function ae(e){return e?e.__v_isRef===!0:!1}function ot(e){return fy(e,!1)}function MT(e){return fy(e,!0)}function fy(e,t){return ae(e)?e:new NT(e,t)}class NT{constructor(t,n){this.dep=new Zh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Dt(t),this._value=n?t:Ce(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||vn(t)||li(t);t=s?t:Dt(t),ti(t,n)&&(this._rawValue=t,this._value=s?t:Ce(t),this.dep.trigger())}}function $n(e){return ae(e)?e.value:e}const VT={get:(e,t,n)=>t==="__v_raw"?e:$n(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const i=e[t];return ae(i)&&!ae(n)?(i.value=n,!0):Reflect.set(e,t,n,s)}};function py(e){return ei(e)?e:new Proxy(e,VT)}function LT(e){const t=pt(e)?new Array(e.length):{};for(const n in e)t[n]=UT(e,n);return t}class FT{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return _T(Dt(this._object),this._key)}}function UT(e,t,n){const s=e[t];return ae(s)?s:new FT(e,t,n)}class BT{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Zh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ko-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Ht!==this)return ty(this,!0),!0}get value(){const t=this.dep.track();return sy(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function jT(e,t,n=!1){let s,i;return bt(e)?s=e:(s=e.get,i=e.set),new BT(s,i,n)}const za={},Cl=new WeakMap;let Pi;function zT(e,t=!1,n=Pi){if(n){let s=Cl.get(n);s||Cl.set(n,s=[]),s.push(e)}}function $T(e,t,n=zt){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=n,u=D=>i?D:vn(D)||i===!1||i===0?fs(D,1):fs(D);let h,d,f,g,b=!1,w=!1;if(ae(e)?(d=()=>e.value,b=vn(e)):ei(e)?(d=()=>u(e),b=!0):pt(e)?(w=!0,b=e.some(D=>ei(D)||vn(D)),d=()=>e.map(D=>{if(ae(D))return D.value;if(ei(D))return u(D);if(bt(D))return l?l(D,2):D()})):bt(e)?t?d=l?()=>l(e,2):e:d=()=>{if(f){Is();try{f()}finally{As()}}const D=Pi;Pi=h;try{return l?l(e,3,[g]):e(g)}finally{Pi=D}}:d=zn,t&&i){const D=d,L=i===!0?1/0:i;d=()=>fs(D(),L)}const v=X_(),S=()=>{h.stop(),v&&v.active&&Kh(v.effects,h)};if(r&&t){const D=t;t=(...L)=>{D(...L),S()}}let P=w?new Array(e.length).fill(za):za;const x=D=>{if(!(!(h.flags&1)||!h.dirty&&!D))if(t){const L=h.run();if(i||b||(w?L.some((W,T)=>ti(W,P[T])):ti(L,P))){f&&f();const W=Pi;Pi=h;try{const T=[L,P===za?void 0:w&&P[0]===za?[]:P,g];P=L,l?l(t,3,T):t(...T)}finally{Pi=W}}}else h.run()};return a&&a(x),h=new J_(d),h.scheduler=o?()=>o(x,!1):x,g=D=>zT(D,!1,h),f=h.onStop=()=>{const D=Cl.get(h);if(D){if(l)l(D,4);else for(const L of D)L();Cl.delete(h)}},t?s?x(!0):P=h.run():o?o(x.bind(null,!0),!0):h.run(),S.pause=h.pause.bind(h),S.resume=h.resume.bind(h),S.stop=S,S}function fs(e,t=1/0,n){if(t<=0||!$t(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,ae(e))fs(e.value,t,n);else if(pt(e))for(let s=0;s<e.length;s++)fs(e[s],t,n);else if(Fr(e)||yr(e))e.forEach(s=>{fs(s,t,n)});else if(H_(e)){for(const s in e)fs(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&fs(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ga(e,t,n,s){try{return s?e(...s):e()}catch(i){vc(i,t,n)}}function Zn(e,t,n,s){if(bt(e)){const i=ga(e,t,n,s);return i&&z_(i)&&i.catch(r=>{vc(r,t,n)}),i}if(pt(e)){const i=[];for(let r=0;r<e.length;r++)i.push(Zn(e[r],t,n,s));return i}}function vc(e,t,n,s=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||zt;if(t){let a=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](e,l,u)===!1)return}a=a.parent}if(r){Is(),ga(r,null,10,[e,l,u]),As();return}}HT(e,n,i,s,o)}function HT(e,t,n,s=!0,i=!1){if(i)throw e;console.error(e)}const Qe=[];let Ln=-1;const vr=[];let Hs=null,ur=0;const gy=Promise.resolve();let xl=null;function Ur(e){const t=xl||gy;return e?t.then(this?e.bind(this):e):t}function WT(e){let t=Ln+1,n=Qe.length;for(;t<n;){const s=t+n>>>1,i=Qe[s],r=Yo(i);r<e||r===e&&i.flags&2?t=s+1:n=s}return t}function id(e){if(!(e.flags&1)){const t=Yo(e),n=Qe[Qe.length-1];!n||!(e.flags&2)&&t>=Yo(n)?Qe.push(e):Qe.splice(WT(t),0,e),e.flags|=1,my()}}function my(){xl||(xl=gy.then(yy))}function qT(e){pt(e)?vr.push(...e):Hs&&e.id===-1?Hs.splice(ur+1,0,e):e.flags&1||(vr.push(e),e.flags|=1),my()}function cp(e,t,n=Ln+1){for(;n<Qe.length;n++){const s=Qe[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;Qe.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function _y(e){if(vr.length){const t=[...new Set(vr)].sort((n,s)=>Yo(n)-Yo(s));if(vr.length=0,Hs){Hs.push(...t);return}for(Hs=t,ur=0;ur<Hs.length;ur++){const n=Hs[ur];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Hs=null,ur=0}}const Yo=e=>e.id==null?e.flags&2?-1:1/0:e.id;function yy(e){try{for(Ln=0;Ln<Qe.length;Ln++){const t=Qe[Ln];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ga(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ln<Qe.length;Ln++){const t=Qe[Ln];t&&(t.flags&=-2)}Ln=-1,Qe.length=0,_y(),xl=null,(Qe.length||vr.length)&&yy()}}let hn=null,vy=null;function Pl(e){const t=hn;return hn=e,vy=e&&e.type.__scopeId||null,t}function KT(e,t=hn,n){if(!t||e._n)return e;const s=(...i)=>{s._d&&Ol(-1);const r=Pl(t);let o;try{o=e(...i)}finally{Pl(r),s._d&&Ol(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Zt(e,t){if(hn===null)return e;const n=Tc(hn),s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,a,l=zt]=t[i];r&&(bt(r)&&(r={mounted:r,updated:r}),r.deep&&fs(o),s.push({dir:r,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function Ai(e,t,n,s){const i=e.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(Is(),Zn(l,n,8,[e.el,a,e,t]),As())}}const GT=Symbol("_vte"),YT=e=>e.__isTeleport,QT=Symbol("_leaveCb");function rd(e,t){e.shapeFlag&6&&e.component?(e.transition=t,rd(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function by(e,t){return bt(e)?He({name:e.name},t,{setup:e}):e}function wy(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const kl=new WeakMap;function ko(e,t,n,s,i=!1){if(pt(e)){e.forEach((b,w)=>ko(b,t&&(pt(t)?t[w]:t),n,s,i));return}if(Do(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&ko(e,t,n,s.component.subTree);return}const r=s.shapeFlag&4?Tc(s.component):s.el,o=i?null:r,{i:a,r:l}=e,u=t&&t.r,h=a.refs===zt?a.refs={}:a.refs,d=a.setupState,f=Dt(d),g=d===zt?j_:b=>Nt(f,b);if(u!=null&&u!==l){if(up(t),he(u))h[u]=null,g(u)&&(d[u]=null);else if(ae(u)){u.value=null;const b=t;b.k&&(h[b.k]=null)}}if(bt(l))ga(l,a,12,[o,h]);else{const b=he(l),w=ae(l);if(b||w){const v=()=>{if(e.f){const S=b?g(l)?d[l]:h[l]:l.value;if(i)pt(S)&&Kh(S,r);else if(pt(S))S.includes(r)||S.push(r);else if(b)h[l]=[r],g(l)&&(d[l]=h[l]);else{const P=[r];l.value=P,e.k&&(h[e.k]=P)}}else b?(h[l]=o,g(l)&&(d[l]=o)):w&&(l.value=o,e.k&&(h[e.k]=o))};if(o){const S=()=>{v(),kl.delete(e)};S.id=-1,kl.set(e,S),ln(S,n)}else up(e),v()}}}function up(e){const t=kl.get(e);t&&(t.flags|=8,kl.delete(e))}_c().requestIdleCallback;_c().cancelIdleCallback;const Do=e=>!!e.type.__asyncLoader,Ey=e=>e.type.__isKeepAlive;function XT(e,t){Ty(e,"a",t)}function JT(e,t){Ty(e,"da",t)}function Ty(e,t,n=je){const s=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(bc(t,s,n),n){let i=n.parent;for(;i&&i.parent;)Ey(i.parent.vnode)&&ZT(s,t,n,i),i=i.parent}}function ZT(e,t,n,s){const i=bc(t,e,s,!0);Iy(()=>{Kh(s[t],i)},n)}function bc(e,t,n=je,s=!1){if(n){const i=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...o)=>{Is();const a=ma(n),l=Zn(t,n,e,o);return a(),As(),l});return s?i.unshift(r):i.push(r),r}}const ks=e=>(t,n=je)=>{(!Xo||e==="sp")&&bc(e,(...s)=>t(...s),n)},tI=ks("bm"),Ds=ks("m"),eI=ks("bu"),nI=ks("u"),sI=ks("bum"),Iy=ks("um"),iI=ks("sp"),rI=ks("rtg"),oI=ks("rtc");function aI(e,t=je){bc("ec",e,t)}const lI="components";function cI(e,t){return hI(lI,e,!0,t)||e}const uI=Symbol.for("v-ndc");function hI(e,t,n=!0,s=!1){const i=hn||je;if(i){const r=i.type;{const a=ZI(r,!1);if(a&&(a===t||a===En(t)||a===mc(En(t))))return r}const o=hp(i[e]||r[e],t)||hp(i.appContext[e],t);return!o&&s?r:o}}function hp(e,t){return e&&(e[t]||e[En(t)]||e[mc(En(t))])}function re(e,t,n,s){let i;const r=n,o=pt(e);if(o||he(e)){const a=o&&ei(e);let l=!1,u=!1;a&&(l=!vn(e),u=li(e),e=yc(e)),i=new Array(e.length);for(let h=0,d=e.length;h<d;h++)i[h]=t(l?u?Rl(Ce(e[h])):Ce(e[h]):e[h],h,void 0,r)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,r)}else if($t(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];i[l]=t(e[h],h,l,r)}}else i=[];return i}const eh=e=>e?Wy(e)?Tc(e):eh(e.parent):null,Oo=He(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>eh(e.parent),$root:e=>eh(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Sy(e),$forceUpdate:e=>e.f||(e.f=()=>{id(e.update)}),$nextTick:e=>e.n||(e.n=Ur.bind(e.proxy)),$watch:e=>OI.bind(e)}),yu=(e,t)=>e!==zt&&!e.__isScriptSetup&&Nt(e,t),dI={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const g=o[t];if(g!==void 0)switch(g){case 1:return s[t];case 2:return i[t];case 4:return n[t];case 3:return r[t]}else{if(yu(s,t))return o[t]=1,s[t];if(i!==zt&&Nt(i,t))return o[t]=2,i[t];if((u=e.propsOptions[0])&&Nt(u,t))return o[t]=3,r[t];if(n!==zt&&Nt(n,t))return o[t]=4,n[t];nh&&(o[t]=0)}}const h=Oo[t];let d,f;if(h)return t==="$attrs"&&Ue(e.attrs,"get",""),h(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(n!==zt&&Nt(n,t))return o[t]=4,n[t];if(f=l.config.globalProperties,Nt(f,t))return f[t]},set({_:e},t,n){const{data:s,setupState:i,ctx:r}=e;return yu(i,t)?(i[t]=n,!0):s!==zt&&Nt(s,t)?(s[t]=n,!0):Nt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:i,propsOptions:r,type:o}},a){let l,u;return!!(n[a]||e!==zt&&a[0]!=="$"&&Nt(e,a)||yu(t,a)||(l=r[0])&&Nt(l,a)||Nt(s,a)||Nt(Oo,a)||Nt(i.config.globalProperties,a)||(u=o.__cssModules)&&u[a])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Nt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function dp(e){return pt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let nh=!0;function fI(e){const t=Sy(e),n=e.proxy,s=e.ctx;nh=!1,t.beforeCreate&&fp(t.beforeCreate,e,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:d,mounted:f,beforeUpdate:g,updated:b,activated:w,deactivated:v,beforeDestroy:S,beforeUnmount:P,destroyed:x,unmounted:D,render:L,renderTracked:W,renderTriggered:T,errorCaptured:_,serverPrefetch:E,expose:R,inheritAttrs:C,components:M,directives:I,filters:Tt}=t;if(u&&pI(u,s,null),o)for(const Y in o){const U=o[Y];bt(U)&&(s[Y]=U.bind(n))}if(i){const Y=i.call(n,n);$t(Y)&&(e.data=pa(Y))}if(nh=!0,r)for(const Y in r){const U=r[Y],J=bt(U)?U.bind(n,n):bt(U.get)?U.get.bind(n,n):zn,Wt=!bt(U)&&bt(U.set)?U.set.bind(n):zn,be=Bt({get:J,set:Wt});Object.defineProperty(s,Y,{enumerable:!0,configurable:!0,get:()=>be.value,set:Xt=>be.value=Xt})}if(a)for(const Y in a)Ay(a[Y],s,n,Y);if(l){const Y=bt(l)?l.call(n):l;Reflect.ownKeys(Y).forEach(U=>{ul(U,Y[U])})}h&&fp(h,e,"c");function ut(Y,U){pt(U)?U.forEach(J=>Y(J.bind(n))):U&&Y(U.bind(n))}if(ut(tI,d),ut(Ds,f),ut(eI,g),ut(nI,b),ut(XT,w),ut(JT,v),ut(aI,_),ut(oI,W),ut(rI,T),ut(sI,P),ut(Iy,D),ut(iI,E),pt(R))if(R.length){const Y=e.exposed||(e.exposed={});R.forEach(U=>{Object.defineProperty(Y,U,{get:()=>n[U],set:J=>n[U]=J,enumerable:!0})})}else e.exposed||(e.exposed={});L&&e.render===zn&&(e.render=L),C!=null&&(e.inheritAttrs=C),M&&(e.components=M),I&&(e.directives=I),E&&wy(e)}function pI(e,t,n=zn){pt(e)&&(e=sh(e));for(const s in e){const i=e[s];let r;$t(i)?"default"in i?r=Cn(i.from||s,i.default,!0):r=Cn(i.from||s):r=Cn(i),ae(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function fp(e,t,n){Zn(pt(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function Ay(e,t,n,s){let i=s.includes(".")?Uy(n,s):()=>n[s];if(he(e)){const r=t[e];bt(r)&&vs(i,r)}else if(bt(e))vs(i,e.bind(n));else if($t(e))if(pt(e))e.forEach(r=>Ay(r,t,n,s));else{const r=bt(e.handler)?e.handler.bind(n):t[e.handler];bt(r)&&vs(i,r,e)}}function Sy(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!i.length&&!n&&!s?l=t:(l={},i.length&&i.forEach(u=>Dl(l,u,o,!0)),Dl(l,t,o)),$t(t)&&r.set(t,l),l}function Dl(e,t,n,s=!1){const{mixins:i,extends:r}=t;r&&Dl(e,r,n,!0),i&&i.forEach(o=>Dl(e,o,n,!0));for(const o in t)if(!(s&&o==="expose")){const a=gI[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const gI={data:pp,props:gp,emits:gp,methods:_o,computed:_o,beforeCreate:Ge,created:Ge,beforeMount:Ge,mounted:Ge,beforeUpdate:Ge,updated:Ge,beforeDestroy:Ge,beforeUnmount:Ge,destroyed:Ge,unmounted:Ge,activated:Ge,deactivated:Ge,errorCaptured:Ge,serverPrefetch:Ge,components:_o,directives:_o,watch:_I,provide:pp,inject:mI};function pp(e,t){return t?e?function(){return He(bt(e)?e.call(this,this):e,bt(t)?t.call(this,this):t)}:t:e}function mI(e,t){return _o(sh(e),sh(t))}function sh(e){if(pt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ge(e,t){return e?[...new Set([].concat(e,t))]:t}function _o(e,t){return e?He(Object.create(null),e,t):t}function gp(e,t){return e?pt(e)&&pt(t)?[...new Set([...e,...t])]:He(Object.create(null),dp(e),dp(t??{})):t}function _I(e,t){if(!e)return t;if(!t)return e;const n=He(Object.create(null),e);for(const s in t)n[s]=Ge(e[s],t[s]);return n}function Ry(){return{app:null,config:{isNativeTag:j_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let yI=0;function vI(e,t){return function(s,i=null){bt(s)||(s=He({},s)),i!=null&&!$t(i)&&(i=null);const r=Ry(),o=new WeakSet,a=[];let l=!1;const u=r.app={_uid:yI++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:e0,get config(){return r.config},set config(h){},use(h,...d){return o.has(h)||(h&&bt(h.install)?(o.add(h),h.install(u,...d)):bt(h)&&(o.add(h),h(u,...d))),u},mixin(h){return r.mixins.includes(h)||r.mixins.push(h),u},component(h,d){return d?(r.components[h]=d,u):r.components[h]},directive(h,d){return d?(r.directives[h]=d,u):r.directives[h]},mount(h,d,f){if(!l){const g=u._ceVNode||tn(s,i);return g.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),e(g,h,f),l=!0,u._container=h,h.__vue_app__=u,Tc(g.component)}},onUnmount(h){a.push(h)},unmount(){l&&(Zn(a,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(h,d){return r.provides[h]=d,u},runWithContext(h){const d=Li;Li=u;try{return h()}finally{Li=d}}};return u}}let Li=null;function ul(e,t){if(je){let n=je.provides;const s=je.parent&&je.parent.provides;s===n&&(n=je.provides=Object.create(s)),n[e]=t}}function Cn(e,t,n=!1){const s=Hy();if(s||Li){let i=Li?Li._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&bt(t)?t.call(s&&s.proxy):t}}function bI(){return!!(Hy()||Li)}const Cy={},xy=()=>Object.create(Cy),Py=e=>Object.getPrototypeOf(e)===Cy;function wI(e,t,n,s=!1){const i={},r=xy();e.propsDefaults=Object.create(null),ky(e,t,i,r);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=s?i:dy(i):e.type.props?e.props=i:e.props=r,e.attrs=r}function EI(e,t,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=e,a=Dt(i),[l]=e.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let d=0;d<h.length;d++){let f=h[d];if(wc(e.emitsOptions,f))continue;const g=t[f];if(l)if(Nt(r,f))g!==r[f]&&(r[f]=g,u=!0);else{const b=En(f);i[b]=ih(l,a,b,g,e,!1)}else g!==r[f]&&(r[f]=g,u=!0)}}}else{ky(e,t,i,r)&&(u=!0);let h;for(const d in a)(!t||!Nt(t,d)&&((h=Yi(d))===d||!Nt(t,h)))&&(l?n&&(n[d]!==void 0||n[h]!==void 0)&&(i[d]=ih(l,a,d,void 0,e,!0)):delete i[d]);if(r!==a)for(const d in r)(!t||!Nt(t,d))&&(delete r[d],u=!0)}u&&ds(e.attrs,"set","")}function ky(e,t,n,s){const[i,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Co(l))continue;const u=t[l];let h;i&&Nt(i,h=En(l))?!r||!r.includes(h)?n[h]=u:(a||(a={}))[h]=u:wc(e.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,o=!0)}if(r){const l=Dt(n),u=a||zt;for(let h=0;h<r.length;h++){const d=r[h];n[d]=ih(i,l,d,u[d],e,!Nt(u,d))}}return o}function ih(e,t,n,s,i,r){const o=e[n];if(o!=null){const a=Nt(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&bt(l)){const{propsDefaults:u}=i;if(n in u)s=u[n];else{const h=ma(i);s=u[n]=l.call(null,t),h()}}else s=l;i.ce&&i.ce._setProp(n,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Yi(n))&&(s=!0))}return s}const TI=new WeakMap;function Dy(e,t,n=!1){const s=n?TI:t.propsCache,i=s.get(e);if(i)return i;const r=e.props,o={},a=[];let l=!1;if(!bt(e)){const h=d=>{l=!0;const[f,g]=Dy(d,t,!0);He(o,f),g&&a.push(...g)};!n&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!r&&!l)return $t(e)&&s.set(e,_r),_r;if(pt(r))for(let h=0;h<r.length;h++){const d=En(r[h]);mp(d)&&(o[d]=zt)}else if(r)for(const h in r){const d=En(h);if(mp(d)){const f=r[h],g=o[d]=pt(f)||bt(f)?{type:f}:He({},f),b=g.type;let w=!1,v=!0;if(pt(b))for(let S=0;S<b.length;++S){const P=b[S],x=bt(P)&&P.name;if(x==="Boolean"){w=!0;break}else x==="String"&&(v=!1)}else w=bt(b)&&b.name==="Boolean";g[0]=w,g[1]=v,(w||Nt(g,"default"))&&a.push(d)}}const u=[o,a];return $t(e)&&s.set(e,u),u}function mp(e){return e[0]!=="$"&&!Co(e)}const od=e=>e==="_"||e==="_ctx"||e==="$stable",ad=e=>pt(e)?e.map(jn):[jn(e)],II=(e,t,n)=>{if(t._n)return t;const s=KT((...i)=>ad(t(...i)),n);return s._c=!1,s},Oy=(e,t,n)=>{const s=e._ctx;for(const i in e){if(od(i))continue;const r=e[i];if(bt(r))t[i]=II(i,r,s);else if(r!=null){const o=ad(r);t[i]=()=>o}}},My=(e,t)=>{const n=ad(t);e.slots.default=()=>n},Ny=(e,t,n)=>{for(const s in t)(n||!od(s))&&(e[s]=t[s])},AI=(e,t,n)=>{const s=e.slots=xy();if(e.vnode.shapeFlag&32){const i=t._;i?(Ny(s,t,n),n&&W_(s,"_",i,!0)):Oy(t,s)}else t&&My(e,t)},SI=(e,t,n)=>{const{vnode:s,slots:i}=e;let r=!0,o=zt;if(s.shapeFlag&32){const a=t._;a?n&&a===1?r=!1:Ny(i,t,n):(r=!t.$stable,Oy(t,i)),o=t}else t&&(My(e,t),o={default:1});if(r)for(const a in i)!od(a)&&o[a]==null&&delete i[a]},ln=jI;function RI(e){return CI(e)}function CI(e,t){const n=_c();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:d,nextSibling:f,setScopeId:g=zn,insertStaticContent:b}=e,w=(A,k,N,z=null,H=null,B=null,tt=void 0,Q=null,K=!!k.dynamicChildren)=>{if(A===k)return;A&&!co(A,k)&&(z=j(A),Xt(A,H,B,!0),A=null),k.patchFlag===-2&&(K=!1,k.dynamicChildren=null);const{type:G,ref:dt,shapeFlag:st}=k;switch(G){case Ec:v(A,k,N,z);break;case ci:S(A,k,N,z);break;case bu:A==null&&P(k,N,z,tt);break;case xt:M(A,k,N,z,H,B,tt,Q,K);break;default:st&1?L(A,k,N,z,H,B,tt,Q,K):st&6?I(A,k,N,z,H,B,tt,Q,K):(st&64||st&128)&&G.process(A,k,N,z,H,B,tt,Q,K,lt)}dt!=null&&H?ko(dt,A&&A.ref,B,k||A,!k):dt==null&&A&&A.ref!=null&&ko(A.ref,null,B,A,!0)},v=(A,k,N,z)=>{if(A==null)s(k.el=a(k.children),N,z);else{const H=k.el=A.el;k.children!==A.children&&u(H,k.children)}},S=(A,k,N,z)=>{A==null?s(k.el=l(k.children||""),N,z):k.el=A.el},P=(A,k,N,z)=>{[A.el,A.anchor]=b(A.children,k,N,z,A.el,A.anchor)},x=({el:A,anchor:k},N,z)=>{let H;for(;A&&A!==k;)H=f(A),s(A,N,z),A=H;s(k,N,z)},D=({el:A,anchor:k})=>{let N;for(;A&&A!==k;)N=f(A),i(A),A=N;i(k)},L=(A,k,N,z,H,B,tt,Q,K)=>{k.type==="svg"?tt="svg":k.type==="math"&&(tt="mathml"),A==null?W(k,N,z,H,B,tt,Q,K):E(A,k,H,B,tt,Q,K)},W=(A,k,N,z,H,B,tt,Q)=>{let K,G;const{props:dt,shapeFlag:st,transition:ct,dirs:ft}=A;if(K=A.el=o(A.type,B,dt&&dt.is,dt),st&8?h(K,A.children):st&16&&_(A.children,K,null,z,H,vu(A,B),tt,Q),ft&&Ai(A,null,z,"created"),T(K,A,A.scopeId,tt,z),dt){for(const Lt in dt)Lt!=="value"&&!Co(Lt)&&r(K,Lt,null,dt[Lt],B,z);"value"in dt&&r(K,"value",null,dt.value,B),(G=dt.onVnodeBeforeMount)&&Mn(G,z,A)}ft&&Ai(A,null,z,"beforeMount");const It=xI(H,ct);It&&ct.beforeEnter(K),s(K,k,N),((G=dt&&dt.onVnodeMounted)||It||ft)&&ln(()=>{G&&Mn(G,z,A),It&&ct.enter(K),ft&&Ai(A,null,z,"mounted")},H)},T=(A,k,N,z,H)=>{if(N&&g(A,N),z)for(let B=0;B<z.length;B++)g(A,z[B]);if(H){let B=H.subTree;if(k===B||jy(B.type)&&(B.ssContent===k||B.ssFallback===k)){const tt=H.vnode;T(A,tt,tt.scopeId,tt.slotScopeIds,H.parent)}}},_=(A,k,N,z,H,B,tt,Q,K=0)=>{for(let G=K;G<A.length;G++){const dt=A[G]=Q?Ws(A[G]):jn(A[G]);w(null,dt,k,N,z,H,B,tt,Q)}},E=(A,k,N,z,H,B,tt)=>{const Q=k.el=A.el;let{patchFlag:K,dynamicChildren:G,dirs:dt}=k;K|=A.patchFlag&16;const st=A.props||zt,ct=k.props||zt;let ft;if(N&&Si(N,!1),(ft=ct.onVnodeBeforeUpdate)&&Mn(ft,N,k,A),dt&&Ai(k,A,N,"beforeUpdate"),N&&Si(N,!0),(st.innerHTML&&ct.innerHTML==null||st.textContent&&ct.textContent==null)&&h(Q,""),G?R(A.dynamicChildren,G,Q,N,z,vu(k,H),B):tt||U(A,k,Q,null,N,z,vu(k,H),B,!1),K>0){if(K&16)C(Q,st,ct,N,H);else if(K&2&&st.class!==ct.class&&r(Q,"class",null,ct.class,H),K&4&&r(Q,"style",st.style,ct.style,H),K&8){const It=k.dynamicProps;for(let Lt=0;Lt<It.length;Lt++){const kt=It[Lt],Me=st[kt],Ne=ct[kt];(Ne!==Me||kt==="value")&&r(Q,kt,Me,Ne,H,N)}}K&1&&A.children!==k.children&&h(Q,k.children)}else!tt&&G==null&&C(Q,st,ct,N,H);((ft=ct.onVnodeUpdated)||dt)&&ln(()=>{ft&&Mn(ft,N,k,A),dt&&Ai(k,A,N,"updated")},z)},R=(A,k,N,z,H,B,tt)=>{for(let Q=0;Q<k.length;Q++){const K=A[Q],G=k[Q],dt=K.el&&(K.type===xt||!co(K,G)||K.shapeFlag&198)?d(K.el):N;w(K,G,dt,null,z,H,B,tt,!0)}},C=(A,k,N,z,H)=>{if(k!==N){if(k!==zt)for(const B in k)!Co(B)&&!(B in N)&&r(A,B,k[B],null,H,z);for(const B in N){if(Co(B))continue;const tt=N[B],Q=k[B];tt!==Q&&B!=="value"&&r(A,B,Q,tt,H,z)}"value"in N&&r(A,"value",k.value,N.value,H)}},M=(A,k,N,z,H,B,tt,Q,K)=>{const G=k.el=A?A.el:a(""),dt=k.anchor=A?A.anchor:a("");let{patchFlag:st,dynamicChildren:ct,slotScopeIds:ft}=k;ft&&(Q=Q?Q.concat(ft):ft),A==null?(s(G,N,z),s(dt,N,z),_(k.children||[],N,dt,H,B,tt,Q,K)):st>0&&st&64&&ct&&A.dynamicChildren?(R(A.dynamicChildren,ct,N,H,B,tt,Q),(k.key!=null||H&&k===H.subTree)&&Vy(A,k,!0)):U(A,k,N,dt,H,B,tt,Q,K)},I=(A,k,N,z,H,B,tt,Q,K)=>{k.slotScopeIds=Q,A==null?k.shapeFlag&512?H.ctx.activate(k,N,z,tt,K):Tt(k,N,z,H,B,tt,K):_t(A,k,K)},Tt=(A,k,N,z,H,B,tt)=>{const Q=A.component=GI(A,z,H);if(Ey(A)&&(Q.ctx.renderer=lt),YI(Q,!1,tt),Q.asyncDep){if(H&&H.registerDep(Q,ut,tt),!A.el){const K=Q.subTree=tn(ci);S(null,K,k,N),A.placeholder=K.el}}else ut(Q,A,k,N,H,B,tt)},_t=(A,k,N)=>{const z=k.component=A.component;if(UI(A,k,N))if(z.asyncDep&&!z.asyncResolved){Y(z,k,N);return}else z.next=k,z.update();else k.el=A.el,z.vnode=k},ut=(A,k,N,z,H,B,tt)=>{const Q=()=>{if(A.isMounted){let{next:st,bu:ct,u:ft,parent:It,vnode:Lt}=A;{const on=Ly(A);if(on){st&&(st.el=Lt.el,Y(A,st,tt)),on.asyncDep.then(()=>{A.isUnmounted||Q()});return}}let kt=st,Me;Si(A,!1),st?(st.el=Lt.el,Y(A,st,tt)):st=Lt,ct&&cl(ct),(Me=st.props&&st.props.onVnodeBeforeUpdate)&&Mn(Me,It,st,Lt),Si(A,!0);const Ne=yp(A),rn=A.subTree;A.subTree=Ne,w(rn,Ne,d(rn.el),j(rn),A,H,B),st.el=Ne.el,kt===null&&BI(A,Ne.el),ft&&ln(ft,H),(Me=st.props&&st.props.onVnodeUpdated)&&ln(()=>Mn(Me,It,st,Lt),H)}else{let st;const{el:ct,props:ft}=k,{bm:It,m:Lt,parent:kt,root:Me,type:Ne}=A,rn=Do(k);Si(A,!1),It&&cl(It),!rn&&(st=ft&&ft.onVnodeBeforeMount)&&Mn(st,kt,k),Si(A,!0);{Me.ce&&Me.ce._def.shadowRoot!==!1&&Me.ce._injectChildStyle(Ne);const on=A.subTree=yp(A);w(null,on,N,z,A,H,B),k.el=on.el}if(Lt&&ln(Lt,H),!rn&&(st=ft&&ft.onVnodeMounted)){const on=k;ln(()=>Mn(st,kt,on),H)}(k.shapeFlag&256||kt&&Do(kt.vnode)&&kt.vnode.shapeFlag&256)&&A.a&&ln(A.a,H),A.isMounted=!0,k=N=z=null}};A.scope.on();const K=A.effect=new J_(Q);A.scope.off();const G=A.update=K.run.bind(K),dt=A.job=K.runIfDirty.bind(K);dt.i=A,dt.id=A.uid,K.scheduler=()=>id(dt),Si(A,!0),G()},Y=(A,k,N)=>{k.component=A;const z=A.vnode.props;A.vnode=k,A.next=null,EI(A,k.props,z,N),SI(A,k.children,N),Is(),cp(A),As()},U=(A,k,N,z,H,B,tt,Q,K=!1)=>{const G=A&&A.children,dt=A?A.shapeFlag:0,st=k.children,{patchFlag:ct,shapeFlag:ft}=k;if(ct>0){if(ct&128){Wt(G,st,N,z,H,B,tt,Q,K);return}else if(ct&256){J(G,st,N,z,H,B,tt,Q,K);return}}ft&8?(dt&16&&Jt(G,H,B),st!==G&&h(N,st)):dt&16?ft&16?Wt(G,st,N,z,H,B,tt,Q,K):Jt(G,H,B,!0):(dt&8&&h(N,""),ft&16&&_(st,N,z,H,B,tt,Q,K))},J=(A,k,N,z,H,B,tt,Q,K)=>{A=A||_r,k=k||_r;const G=A.length,dt=k.length,st=Math.min(G,dt);let ct;for(ct=0;ct<st;ct++){const ft=k[ct]=K?Ws(k[ct]):jn(k[ct]);w(A[ct],ft,N,null,H,B,tt,Q,K)}G>dt?Jt(A,H,B,!0,!1,st):_(k,N,z,H,B,tt,Q,K,st)},Wt=(A,k,N,z,H,B,tt,Q,K)=>{let G=0;const dt=k.length;let st=A.length-1,ct=dt-1;for(;G<=st&&G<=ct;){const ft=A[G],It=k[G]=K?Ws(k[G]):jn(k[G]);if(co(ft,It))w(ft,It,N,null,H,B,tt,Q,K);else break;G++}for(;G<=st&&G<=ct;){const ft=A[st],It=k[ct]=K?Ws(k[ct]):jn(k[ct]);if(co(ft,It))w(ft,It,N,null,H,B,tt,Q,K);else break;st--,ct--}if(G>st){if(G<=ct){const ft=ct+1,It=ft<dt?k[ft].el:z;for(;G<=ct;)w(null,k[G]=K?Ws(k[G]):jn(k[G]),N,It,H,B,tt,Q,K),G++}}else if(G>ct)for(;G<=st;)Xt(A[G],H,B,!0),G++;else{const ft=G,It=G,Lt=new Map;for(G=It;G<=ct;G++){const Ae=k[G]=K?Ws(k[G]):jn(k[G]);Ae.key!=null&&Lt.set(Ae.key,G)}let kt,Me=0;const Ne=ct-It+1;let rn=!1,on=0;const Tn=new Array(Ne);for(G=0;G<Ne;G++)Tn[G]=0;for(G=ft;G<=st;G++){const Ae=A[G];if(Me>=Ne){Xt(Ae,H,B,!0);continue}let we;if(Ae.key!=null)we=Lt.get(Ae.key);else for(kt=It;kt<=ct;kt++)if(Tn[kt-It]===0&&co(Ae,k[kt])){we=kt;break}we===void 0?Xt(Ae,H,B,!0):(Tn[we-It]=G+1,we>=on?on=we:rn=!0,w(Ae,k[we],N,null,H,B,tt,Q,K),Me++)}const nr=rn?PI(Tn):_r;for(kt=nr.length-1,G=Ne-1;G>=0;G--){const Ae=It+G,we=k[Ae],Kr=k[Ae+1],bi=Ae+1<dt?Kr.el||Kr.placeholder:z;Tn[G]===0?w(null,we,N,bi,H,B,tt,Q,K):rn&&(kt<0||G!==nr[kt]?be(we,N,bi,2):kt--)}}},be=(A,k,N,z,H=null)=>{const{el:B,type:tt,transition:Q,children:K,shapeFlag:G}=A;if(G&6){be(A.component.subTree,k,N,z);return}if(G&128){A.suspense.move(k,N,z);return}if(G&64){tt.move(A,k,N,lt);return}if(tt===xt){s(B,k,N);for(let st=0;st<K.length;st++)be(K[st],k,N,z);s(A.anchor,k,N);return}if(tt===bu){x(A,k,N);return}if(z!==2&&G&1&&Q)if(z===0)Q.beforeEnter(B),s(B,k,N),ln(()=>Q.enter(B),H);else{const{leave:st,delayLeave:ct,afterLeave:ft}=Q,It=()=>{A.ctx.isUnmounted?i(B):s(B,k,N)},Lt=()=>{B._isLeaving&&B[QT](!0),st(B,()=>{It(),ft&&ft()})};ct?ct(B,It,Lt):Lt()}else s(B,k,N)},Xt=(A,k,N,z=!1,H=!1)=>{const{type:B,props:tt,ref:Q,children:K,dynamicChildren:G,shapeFlag:dt,patchFlag:st,dirs:ct,cacheIndex:ft}=A;if(st===-2&&(H=!1),Q!=null&&(Is(),ko(Q,null,N,A,!0),As()),ft!=null&&(k.renderCache[ft]=void 0),dt&256){k.ctx.deactivate(A);return}const It=dt&1&&ct,Lt=!Do(A);let kt;if(Lt&&(kt=tt&&tt.onVnodeBeforeUnmount)&&Mn(kt,k,A),dt&6)Ie(A.component,N,z);else{if(dt&128){A.suspense.unmount(N,z);return}It&&Ai(A,null,k,"beforeUnmount"),dt&64?A.type.remove(A,k,N,lt,z):G&&!G.hasOnce&&(B!==xt||st>0&&st&64)?Jt(G,k,N,!1,!0):(B===xt&&st&384||!H&&dt&16)&&Jt(K,k,N),z&&qe(A)}(Lt&&(kt=tt&&tt.onVnodeUnmounted)||It)&&ln(()=>{kt&&Mn(kt,k,A),It&&Ai(A,null,k,"unmounted")},N)},qe=A=>{const{type:k,el:N,anchor:z,transition:H}=A;if(k===xt){de(N,z);return}if(k===bu){D(A);return}const B=()=>{i(N),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(A.shapeFlag&1&&H&&!H.persisted){const{leave:tt,delayLeave:Q}=H,K=()=>tt(N,B);Q?Q(A.el,B,K):K()}else B()},de=(A,k)=>{let N;for(;A!==k;)N=f(A),i(A),A=N;i(k)},Ie=(A,k,N)=>{const{bum:z,scope:H,job:B,subTree:tt,um:Q,m:K,a:G}=A;_p(K),_p(G),z&&cl(z),H.stop(),B&&(B.flags|=8,Xt(tt,A,k,N)),Q&&ln(Q,k),ln(()=>{A.isUnmounted=!0},k)},Jt=(A,k,N,z=!1,H=!1,B=0)=>{for(let tt=B;tt<A.length;tt++)Xt(A[tt],k,N,z,H)},j=A=>{if(A.shapeFlag&6)return j(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const k=f(A.anchor||A.el),N=k&&k[GT];return N?f(N):k};let it=!1;const et=(A,k,N)=>{A==null?k._vnode&&Xt(k._vnode,null,null,!0):w(k._vnode||null,A,k,null,null,null,N),k._vnode=A,it||(it=!0,cp(),_y(),it=!1)},lt={p:w,um:Xt,m:be,r:qe,mt:Tt,mc:_,pc:U,pbc:R,n:j,o:e};return{render:et,hydrate:void 0,createApp:vI(et)}}function vu({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Si({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function xI(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Vy(e,t,n=!1){const s=e.children,i=t.children;if(pt(s)&&pt(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=Ws(i[r]),a.el=o.el),!n&&a.patchFlag!==-2&&Vy(o,a)),a.type===Ec&&a.patchFlag!==-1&&(a.el=o.el),a.type===ci&&!a.el&&(a.el=o.el)}}function PI(e){const t=e.slice(),n=[0];let s,i,r,o,a;const l=e.length;for(s=0;s<l;s++){const u=e[s];if(u!==0){if(i=n[n.length-1],e[i]<u){t[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,e[n[a]]<u?r=a+1:o=a;u<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=t[o];return n}function Ly(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Ly(t)}function _p(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const kI=Symbol.for("v-scx"),DI=()=>Cn(kI);function vs(e,t,n){return Fy(e,t,n)}function Fy(e,t,n=zt){const{immediate:s,deep:i,flush:r,once:o}=n,a=He({},n),l=t&&s||!t&&r!=="post";let u;if(Xo){if(r==="sync"){const g=DI();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=zn,g.resume=zn,g.pause=zn,g}}const h=je;a.call=(g,b,w)=>Zn(g,h,b,w);let d=!1;r==="post"?a.scheduler=g=>{ln(g,h&&h.suspense)}:r!=="sync"&&(d=!0,a.scheduler=(g,b)=>{b?g():id(g)}),a.augmentJob=g=>{t&&(g.flags|=4),d&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const f=$T(e,t,a);return Xo&&(u?u.push(f):l&&f()),f}function OI(e,t,n){const s=this.proxy,i=he(e)?e.includes(".")?Uy(s,e):()=>s[e]:e.bind(s,s);let r;bt(t)?r=t:(r=t.handler,n=t);const o=ma(this),a=Fy(i,r.bind(s),n);return o(),a}function Uy(e,t){const n=t.split(".");return()=>{let s=e;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const MI=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${En(t)}Modifiers`]||e[`${Yi(t)}Modifiers`];function NI(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||zt;let i=n;const r=t.startsWith("update:"),o=r&&MI(s,t.slice(7));o&&(o.trim&&(i=n.map(h=>he(h)?h.trim():h)),o.number&&(i=n.map(Al)));let a,l=s[a=fu(t)]||s[a=fu(En(t))];!l&&r&&(l=s[a=fu(Yi(t))]),l&&Zn(l,e,6,i);const u=s[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Zn(u,e,6,i)}}const VI=new WeakMap;function By(e,t,n=!1){const s=n?VI:t.emitsCache,i=s.get(e);if(i!==void 0)return i;const r=e.emits;let o={},a=!1;if(!bt(e)){const l=u=>{const h=By(u,t,!0);h&&(a=!0,He(o,h))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?($t(e)&&s.set(e,null),null):(pt(r)?r.forEach(l=>o[l]=null):He(o,r),$t(e)&&s.set(e,o),o)}function wc(e,t){return!e||!pc(t)?!1:(t=t.slice(2).replace(/Once$/,""),Nt(e,t[0].toLowerCase()+t.slice(1))||Nt(e,Yi(t))||Nt(e,t))}function yp(e){const{type:t,vnode:n,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:d,data:f,setupState:g,ctx:b,inheritAttrs:w}=e,v=Pl(e);let S,P;try{if(n.shapeFlag&4){const D=i||s,L=D;S=jn(u.call(L,D,h,d,g,f,b)),P=a}else{const D=t;S=jn(D.length>1?D(d,{attrs:a,slots:o,emit:l}):D(d,null)),P=t.props?a:LI(a)}}catch(D){Mo.length=0,vc(D,e,1),S=tn(ci)}let x=S;if(P&&w!==!1){const D=Object.keys(P),{shapeFlag:L}=x;D.length&&L&7&&(r&&D.some(qh)&&(P=FI(P,r)),x=Rr(x,P,!1,!0))}return n.dirs&&(x=Rr(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&rd(x,n.transition),S=x,Pl(v),S}const LI=e=>{let t;for(const n in e)(n==="class"||n==="style"||pc(n))&&((t||(t={}))[n]=e[n]);return t},FI=(e,t)=>{const n={};for(const s in e)(!qh(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function UI(e,t,n){const{props:s,children:i,component:r}=e,{props:o,children:a,patchFlag:l}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?vp(s,o,u):!!o;if(l&8){const h=t.dynamicProps;for(let d=0;d<h.length;d++){const f=h[d];if(o[f]!==s[f]&&!wc(u,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?vp(s,o,u):!0:!!o;return!1}function vp(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==e[r]&&!wc(n,r))return!0}return!1}function BI({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const jy=e=>e.__isSuspense;function jI(e,t){t&&t.pendingBranch?pt(e)?t.effects.push(...e):t.effects.push(e):qT(e)}const xt=Symbol.for("v-fgt"),Ec=Symbol.for("v-txt"),ci=Symbol.for("v-cmt"),bu=Symbol.for("v-stc"),Mo=[];let dn=null;function X(e=!1){Mo.push(dn=e?null:[])}function zI(){Mo.pop(),dn=Mo[Mo.length-1]||null}let Qo=1;function Ol(e,t=!1){Qo+=e,e<0&&dn&&t&&(dn.hasOnce=!0)}function zy(e){return e.dynamicChildren=Qo>0?dn||_r:null,zI(),Qo>0&&dn&&dn.push(e),e}function nt(e,t,n,s,i,r){return zy(O(e,t,n,s,i,r,!0))}function Re(e,t,n,s,i){return zy(tn(e,t,n,s,i,!0))}function Ml(e){return e?e.__v_isVNode===!0:!1}function co(e,t){return e.type===t.type&&e.key===t.key}const $y=({key:e})=>e??null,hl=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?he(e)||ae(e)||bt(e)?{i:hn,r:e,k:t,f:!!n}:e:null);function O(e,t=null,n=null,s=0,i=null,r=e===xt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&$y(t),ref:t&&hl(t),scopeId:vy,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:hn};return a?(ld(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=he(n)?8:16),Qo>0&&!o&&dn&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&dn.push(l),l}const tn=$I;function $I(e,t=null,n=null,s=0,i=null,r=!1){if((!e||e===uI)&&(e=ci),Ml(e)){const a=Rr(e,t,!0);return n&&ld(a,n),Qo>0&&!r&&dn&&(a.shapeFlag&6?dn[dn.indexOf(e)]=a:dn.push(a)),a.patchFlag=-2,a}if(t0(e)&&(e=e.__vccOpts),t){t=HI(t);let{class:a,style:l}=t;a&&!he(a)&&(t.class=fn(a)),$t(l)&&(nd(l)&&!pt(l)&&(l=He({},l)),t.style=Ts(l))}const o=he(e)?1:jy(e)?128:YT(e)?64:$t(e)?4:bt(e)?2:0;return O(e,t,n,s,i,o,r,!0)}function HI(e){return e?nd(e)||Py(e)?He({},e):e:null}function Rr(e,t,n=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=e,u=t?WI(i||{},t):i,h={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&$y(u),ref:t&&t.ref?n&&r?pt(r)?r.concat(hl(t)):[r,hl(t)]:hl(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==xt?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Rr(e.ssContent),ssFallback:e.ssFallback&&Rr(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&rd(h,l.clone(h)),h}function se(e=" ",t=0){return tn(Ec,null,e,t)}function me(e="",t=!1){return t?(X(),Re(ci,null,e)):tn(ci,null,e)}function jn(e){return e==null||typeof e=="boolean"?tn(ci):pt(e)?tn(xt,null,e.slice()):Ml(e)?Ws(e):tn(Ec,null,String(e))}function Ws(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Rr(e)}function ld(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(pt(t))n=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),ld(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!Py(t)?t._ctx=hn:i===3&&hn&&(hn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else bt(t)?(t={default:t,_ctx:hn},n=32):(t=String(t),s&64?(n=16,t=[se(t)]):n=8);e.children=t,e.shapeFlag|=n}function WI(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=fn([t.class,s.class]));else if(i==="style")t.style=Ts([t.style,s.style]);else if(pc(i)){const r=t[i],o=s[i];o&&r!==o&&!(pt(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=s[i])}return t}function Mn(e,t,n,s=null){Zn(e,t,7,[n,s])}const qI=Ry();let KI=0;function GI(e,t,n){const s=e.type,i=(t?t.appContext:e.appContext)||qI,r={uid:KI++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Y_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Dy(s,i),emitsOptions:By(s,i),emit:null,emitted:null,propsDefaults:zt,inheritAttrs:s.inheritAttrs,ctx:zt,data:zt,props:zt,attrs:zt,slots:zt,refs:zt,setupState:zt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=NI.bind(null,r),e.ce&&e.ce(r),r}let je=null;const Hy=()=>je||hn;let Nl,rh;{const e=_c(),t=(n,s)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};Nl=t("__VUE_INSTANCE_SETTERS__",n=>je=n),rh=t("__VUE_SSR_SETTERS__",n=>Xo=n)}const ma=e=>{const t=je;return Nl(e),e.scope.on(),()=>{e.scope.off(),Nl(t)}},bp=()=>{je&&je.scope.off(),Nl(null)};function Wy(e){return e.vnode.shapeFlag&4}let Xo=!1;function YI(e,t=!1,n=!1){t&&rh(t);const{props:s,children:i}=e.vnode,r=Wy(e);wI(e,s,r,t),AI(e,i,n||t);const o=r?QI(e,t):void 0;return t&&rh(!1),o}function QI(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,dI);const{setup:s}=n;if(s){Is();const i=e.setupContext=s.length>1?JI(e):null,r=ma(e),o=ga(s,e,0,[e.props,i]),a=z_(o);if(As(),r(),(a||e.sp)&&!Do(e)&&wy(e),a){if(o.then(bp,bp),t)return o.then(l=>{wp(e,l)}).catch(l=>{vc(l,e,0)});e.asyncDep=o}else wp(e,o)}else qy(e)}function wp(e,t,n){bt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:$t(t)&&(e.setupState=py(t)),qy(e)}function qy(e,t,n){const s=e.type;e.render||(e.render=s.render||zn);{const i=ma(e);Is();try{fI(e)}finally{As(),i()}}}const XI={get(e,t){return Ue(e,"get",""),e[t]}};function JI(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,XI),slots:e.slots,emit:e.emit,expose:t}}function Tc(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(py(sd(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Oo)return Oo[n](e)},has(t,n){return n in t||n in Oo}})):e.proxy}function ZI(e,t=!0){return bt(e)?e.displayName||e.name:e.name||t&&e.__name}function t0(e){return bt(e)&&"__vccOpts"in e}const Bt=(e,t)=>jT(e,t,Xo);function Ky(e,t,n){try{Ol(-1);const s=arguments.length;return s===2?$t(t)&&!pt(t)?Ml(t)?tn(e,null,[t]):tn(e,t):tn(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Ml(n)&&(n=[n]),tn(e,t,n))}finally{Ol(1)}}const e0="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let oh;const Ep=typeof window<"u"&&window.trustedTypes;if(Ep)try{oh=Ep.createPolicy("vue",{createHTML:e=>e})}catch{}const Gy=oh?e=>oh.createHTML(e):e=>e,n0="http://www.w3.org/2000/svg",s0="http://www.w3.org/1998/Math/MathML",us=typeof document<"u"?document:null,Tp=us&&us.createElement("template"),i0={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const i=t==="svg"?us.createElementNS(n0,e):t==="mathml"?us.createElementNS(s0,e):n?us.createElement(e,{is:n}):us.createElement(e);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>us.createTextNode(e),createComment:e=>us.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>us.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,i,r){const o=n?n.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{Tp.innerHTML=Gy(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=Tp.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},r0=Symbol("_vtc");function o0(e,t,n){const s=e[r0];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Ip=Symbol("_vod"),a0=Symbol("_vsh"),l0=Symbol(""),c0=/(?:^|;)\s*display\s*:/;function u0(e,t,n){const s=e.style,i=he(n);let r=!1;if(n&&!i){if(t)if(he(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&dl(s,a,"")}else for(const o in t)n[o]==null&&dl(s,o,"");for(const o in n)o==="display"&&(r=!0),dl(s,o,n[o])}else if(i){if(t!==n){const o=s[l0];o&&(n+=";"+o),s.cssText=n,r=c0.test(n)}}else t&&e.removeAttribute("style");Ip in e&&(e[Ip]=r?s.display:"",e[a0]&&(s.display="none"))}const Ap=/\s*!important$/;function dl(e,t,n){if(pt(n))n.forEach(s=>dl(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=h0(e,t);Ap.test(n)?e.setProperty(Yi(s),n.replace(Ap,""),"important"):e[s]=n}}const Sp=["Webkit","Moz","ms"],wu={};function h0(e,t){const n=wu[t];if(n)return n;let s=En(t);if(s!=="filter"&&s in e)return wu[t]=s;s=mc(s);for(let i=0;i<Sp.length;i++){const r=Sp[i]+s;if(r in e)return wu[t]=r}return t}const Rp="http://www.w3.org/1999/xlink";function Cp(e,t,n,s,i,r=dT(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Rp,t.slice(6,t.length)):e.setAttributeNS(Rp,t,n):n==null||r&&!q_(n)?e.removeAttribute(t):e.setAttribute(t,r?"":Jn(n)?String(n):n)}function xp(e,t,n,s,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Gy(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=q_(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function ps(e,t,n,s){e.addEventListener(t,n,s)}function d0(e,t,n,s){e.removeEventListener(t,n,s)}const Pp=Symbol("_vei");function f0(e,t,n,s,i=null){const r=e[Pp]||(e[Pp]={}),o=r[t];if(s&&o)o.value=s;else{const[a,l]=p0(t);if(s){const u=r[t]=_0(s,i);ps(e,a,u,l)}else o&&(d0(e,a,o,l),r[t]=void 0)}}const kp=/(?:Once|Passive|Capture)$/;function p0(e){let t;if(kp.test(e)){t={};let s;for(;s=e.match(kp);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Yi(e.slice(2)),t]}let Eu=0;const g0=Promise.resolve(),m0=()=>Eu||(g0.then(()=>Eu=0),Eu=Date.now());function _0(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Zn(y0(s,n.value),t,5,[s])};return n.value=e,n.attached=m0(),n}function y0(e,t){if(pt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const Dp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,v0=(e,t,n,s,i,r)=>{const o=i==="svg";t==="class"?o0(e,s,o):t==="style"?u0(e,n,s):pc(t)?qh(t)||f0(e,t,n,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):b0(e,t,s,o))?(xp(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Cp(e,t,s,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!he(s))?xp(e,En(t),s,r,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Cp(e,t,s,o))};function b0(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Dp(t)&&bt(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Dp(t)&&he(n)?!1:t in e}const ui=e=>{const t=e.props["onUpdate:modelValue"]||!1;return pt(t)?n=>cl(t,n):t};function w0(e){e.target.composing=!0}function Op(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const bn=Symbol("_assign"),Pe={created(e,{modifiers:{lazy:t,trim:n,number:s}},i){e[bn]=ui(i);const r=s||i.props&&i.props.type==="number";ps(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),r&&(a=Al(a)),e[bn](a)}),n&&ps(e,"change",()=>{e.value=e.value.trim()}),t||(ps(e,"compositionstart",w0),ps(e,"compositionend",Op),ps(e,"change",Op))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:i,number:r}},o){if(e[bn]=ui(o),e.composing)return;const a=(r||e.type==="number")&&!/^0\d/.test(e.value)?Al(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||i&&e.value.trim()===l)||(e.value=l))}},Yy={deep:!0,created(e,t,n){e[bn]=ui(n),ps(e,"change",()=>{const s=e._modelValue,i=Cr(e),r=e.checked,o=e[bn];if(pt(s)){const a=Yh(s,i),l=a!==-1;if(r&&!l)o(s.concat(i));else if(!r&&l){const u=[...s];u.splice(a,1),o(u)}}else if(Fr(s)){const a=new Set(s);r?a.add(i):a.delete(i),o(a)}else o(Qy(e,r))})},mounted:Mp,beforeUpdate(e,t,n){e[bn]=ui(n),Mp(e,t,n)}};function Mp(e,{value:t,oldValue:n},s){e._modelValue=t;let i;if(pt(t))i=Yh(t,s.props.value)>-1;else if(Fr(t))i=t.has(s.props.value);else{if(t===n)return;i=Bi(t,Qy(e,!0))}e.checked!==i&&(e.checked=i)}const E0={created(e,{value:t},n){e.checked=Bi(t,n.props.value),e[bn]=ui(n),ps(e,"change",()=>{e[bn](Cr(e))})},beforeUpdate(e,{value:t,oldValue:n},s){e[bn]=ui(s),t!==n&&(e.checked=Bi(t,s.props.value))}},ni={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const i=Fr(t);ps(e,"change",()=>{const r=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?Al(Cr(o)):Cr(o));e[bn](e.multiple?i?new Set(r):r:r[0]),e._assigning=!0,Ur(()=>{e._assigning=!1})}),e[bn]=ui(s)},mounted(e,{value:t}){Np(e,t)},beforeUpdate(e,t,n){e[bn]=ui(n)},updated(e,{value:t}){e._assigning||Np(e,t)}};function Np(e,t){const n=e.multiple,s=pt(t);if(!(n&&!s&&!Fr(t))){for(let i=0,r=e.options.length;i<r;i++){const o=e.options[i],a=Cr(o);if(n)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(u=>String(u)===String(a)):o.selected=Yh(t,a)>-1}else o.selected=t.has(a);else if(Bi(Cr(o),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Cr(e){return"_value"in e?e._value:e.value}function Qy(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const T0={created(e,t,n){$a(e,t,n,null,"created")},mounted(e,t,n){$a(e,t,n,null,"mounted")},beforeUpdate(e,t,n,s){$a(e,t,n,s,"beforeUpdate")},updated(e,t,n,s){$a(e,t,n,s,"updated")}};function I0(e,t){switch(e){case"SELECT":return ni;case"TEXTAREA":return Pe;default:switch(t){case"checkbox":return Yy;case"radio":return E0;default:return Pe}}}function $a(e,t,n,s,i){const o=I0(e.tagName,n.props&&n.props.type)[i];o&&o(e,t,n,s)}const A0=["ctrl","shift","alt","meta"],S0={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>A0.some(n=>e[`${n}Key`]&&!t.includes(n))},cd=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=((i,...r)=>{for(let o=0;o<t.length;o++){const a=S0[t[o]];if(a&&a(i,t))return}return e(i,...r)}))},R0=He({patchProp:v0},i0);let Vp;function C0(){return Vp||(Vp=RI(R0))}const x0=((...e)=>{const t=C0().createApp(...e),{mount:n}=t;return t.mount=s=>{const i=k0(s);if(!i)return;const r=t._component;!bt(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,P0(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t});function P0(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function k0(e){return he(e)?document.querySelector(e):e}/*!
 * pinia v3.0.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Xy;const Ic=e=>Xy=e,Jy=Symbol();function ah(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var No;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(No||(No={}));function D0(){const e=Q_(!0),t=e.run(()=>ot({}));let n=[],s=[];const i=sd({install(r){Ic(i),i._a=r,r.provide(Jy,i),r.config.globalProperties.$pinia=i,s.forEach(o=>n.push(o)),s=[]},use(r){return this._a?n.push(r):s.push(r),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const Zy=()=>{};function Lp(e,t,n,s=Zy){e.add(t);const i=()=>{e.delete(t)&&s()};return!n&&X_()&&pT(i),i}function ar(e,...t){e.forEach(n=>{n(...t)})}const O0=e=>e(),Fp=Symbol(),Tu=Symbol();function lh(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,s)=>e.set(s,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const s=t[n],i=e[n];ah(i)&&ah(s)&&e.hasOwnProperty(n)&&!ae(s)&&!ei(s)?e[n]=lh(i,s):e[n]=s}return e}const M0=Symbol();function N0(e){return!ah(e)||!Object.prototype.hasOwnProperty.call(e,M0)}const{assign:$s}=Object;function V0(e){return!!(ae(e)&&e.effect)}function L0(e,t,n,s){const{state:i,actions:r,getters:o}=t,a=n.state.value[e];let l;function u(){a||(n.state.value[e]=i?i():{});const h=LT(n.state.value[e]);return $s(h,r,Object.keys(o||{}).reduce((d,f)=>(d[f]=sd(Bt(()=>{Ic(n);const g=n._s.get(e);return o[f].call(g,g)})),d),{}))}return l=tv(e,u,t,n,s,!0),l}function tv(e,t,n={},s,i,r){let o;const a=$s({actions:{}},n),l={deep:!0};let u,h,d=new Set,f=new Set,g;const b=s.state.value[e];!r&&!b&&(s.state.value[e]={}),ot({});let w;function v(_){let E;u=h=!1,typeof _=="function"?(_(s.state.value[e]),E={type:No.patchFunction,storeId:e,events:g}):(lh(s.state.value[e],_),E={type:No.patchObject,payload:_,storeId:e,events:g});const R=w=Symbol();Ur().then(()=>{w===R&&(u=!0)}),h=!0,ar(d,E,s.state.value[e])}const S=r?function(){const{state:E}=n,R=E?E():{};this.$patch(C=>{$s(C,R)})}:Zy;function P(){o.stop(),d.clear(),f.clear(),s._s.delete(e)}const x=(_,E="")=>{if(Fp in _)return _[Tu]=E,_;const R=function(){Ic(s);const C=Array.from(arguments),M=new Set,I=new Set;function Tt(Y){M.add(Y)}function _t(Y){I.add(Y)}ar(f,{args:C,name:R[Tu],store:L,after:Tt,onError:_t});let ut;try{ut=_.apply(this&&this.$id===e?this:L,C)}catch(Y){throw ar(I,Y),Y}return ut instanceof Promise?ut.then(Y=>(ar(M,Y),Y)).catch(Y=>(ar(I,Y),Promise.reject(Y))):(ar(M,ut),ut)};return R[Fp]=!0,R[Tu]=E,R},D={_p:s,$id:e,$onAction:Lp.bind(null,f),$patch:v,$reset:S,$subscribe(_,E={}){const R=Lp(d,_,E.detached,()=>C()),C=o.run(()=>vs(()=>s.state.value[e],M=>{(E.flush==="sync"?h:u)&&_({storeId:e,type:No.direct,events:g},M)},$s({},l,E)));return R},$dispose:P},L=pa(D);s._s.set(e,L);const T=(s._a&&s._a.runWithContext||O0)(()=>s._e.run(()=>(o=Q_()).run(()=>t({action:x}))));for(const _ in T){const E=T[_];if(ae(E)&&!V0(E)||ei(E))r||(b&&N0(E)&&(ae(E)?E.value=b[_]:lh(E,b[_])),s.state.value[e][_]=E);else if(typeof E=="function"){const R=x(E,_);T[_]=R,a.actions[_]=E}}return $s(L,T),$s(Dt(L),T),Object.defineProperty(L,"$state",{get:()=>s.state.value[e],set:_=>{v(E=>{$s(E,_)})}}),s._p.forEach(_=>{$s(L,o.run(()=>_({store:L,app:s._a,pinia:s,options:a})))}),b&&r&&n.hydrate&&n.hydrate(L.$state,b),u=!0,h=!0,L}/*! #__NO_SIDE_EFFECTS__ */function F0(e,t,n){let s;const i=typeof t=="function";s=i?n:t;function r(o,a){const l=bI();return o=o||(l?Cn(Jy,null):null),o&&Ic(o),o=Xy,o._s.has(e)||(i?tv(e,t,s,o):L0(e,s,o)),o._s.get(e)}return r.$id=e,r}const U0={class:"app_holder"},B0={__name:"App",setup(e){return(t,n)=>{const s=cI("router-view");return X(),nt("div",U0,[tn(s)])}}};/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const hr=typeof document<"u";function ev(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function j0(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&ev(e.default)}const Mt=Object.assign;function Iu(e,t){const n={};for(const s in t){const i=t[s];n[s]=xn(i)?i.map(e):e(i)}return n}const Vo=()=>{},xn=Array.isArray;function Up(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}const nv=/#/g,z0=/&/g,$0=/\//g,H0=/=/g,W0=/\?/g,sv=/\+/g,q0=/%5B/g,K0=/%5D/g,iv=/%5E/g,G0=/%60/g,rv=/%7B/g,Y0=/%7C/g,ov=/%7D/g,Q0=/%20/g;function ud(e){return e==null?"":encodeURI(""+e).replace(Y0,"|").replace(q0,"[").replace(K0,"]")}function X0(e){return ud(e).replace(rv,"{").replace(ov,"}").replace(iv,"^")}function ch(e){return ud(e).replace(sv,"%2B").replace(Q0,"+").replace(nv,"%23").replace(z0,"%26").replace(G0,"`").replace(rv,"{").replace(ov,"}").replace(iv,"^")}function J0(e){return ch(e).replace(H0,"%3D")}function Z0(e){return ud(e).replace(nv,"%23").replace(W0,"%3F")}function tA(e){return Z0(e).replace($0,"%2F")}function Jo(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const eA=/\/$/,nA=e=>e.replace(eA,"");function Au(e,t,n="/"){let s,i={},r="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(s=t.slice(0,l),r=t.slice(l,a>0?a:t.length),i=e(r.slice(1))),a>=0&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=oA(s??t,n),{fullPath:s+r+o,path:s,query:i,hash:Jo(o)}}function sA(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Bp(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function iA(e,t,n){const s=t.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&xr(t.matched[s],n.matched[i])&&av(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function xr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function av(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!rA(e[n],t[n]))return!1;return!0}function rA(e,t){return xn(e)?jp(e,t):xn(t)?jp(t,e):e===t}function jp(e,t){return xn(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function oA(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const js={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let uh=(function(e){return e.pop="pop",e.push="push",e})({}),Su=(function(e){return e.back="back",e.forward="forward",e.unknown="",e})({});function aA(e){if(!e)if(hr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),nA(e)}const lA=/^[^#]+#/;function cA(e,t){return e.replace(lA,"#")+t}function uA(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const Ac=()=>({left:window.scrollX,top:window.scrollY});function hA(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=uA(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function zp(e,t){return(history.state?history.state.position-t:-1)+e}const hh=new Map;function dA(e,t){hh.set(e,t)}function fA(e){const t=hh.get(e);return hh.delete(e),t}function pA(e){return typeof e=="string"||e&&typeof e=="object"}function lv(e){return typeof e=="string"||typeof e=="symbol"}let ne=(function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e})({});const cv=Symbol("");ne.MATCHER_NOT_FOUND+"",ne.NAVIGATION_GUARD_REDIRECT+"",ne.NAVIGATION_ABORTED+"",ne.NAVIGATION_CANCELLED+"",ne.NAVIGATION_DUPLICATED+"";function Pr(e,t){return Mt(new Error,{type:e,[cv]:!0},t)}function os(e,t){return e instanceof Error&&cv in e&&(t==null||!!(e.type&t))}const gA=["params","query","hash"];function mA(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const n of gA)n in e&&(t[n]=e[n]);return JSON.stringify(t,null,2)}function _A(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<n.length;++s){const i=n[s].replace(sv," "),r=i.indexOf("="),o=Jo(r<0?i:i.slice(0,r)),a=r<0?null:Jo(i.slice(r+1));if(o in t){let l=t[o];xn(l)||(l=t[o]=[l]),l.push(a)}else t[o]=a}return t}function $p(e){let t="";for(let n in e){const s=e[n];if(n=J0(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(xn(s)?s.map(i=>i&&ch(i)):[s&&ch(s)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function yA(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=xn(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const vA=Symbol(""),Hp=Symbol(""),Sc=Symbol(""),uv=Symbol(""),dh=Symbol("");function uo(){let e=[];function t(s){return e.push(s),()=>{const i=e.indexOf(s);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function qs(e,t,n,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const u=f=>{f===!1?l(Pr(ne.NAVIGATION_ABORTED,{from:n,to:t})):f instanceof Error?l(f):pA(f)?l(Pr(ne.NAVIGATION_GUARD_REDIRECT,{from:t,to:f})):(o&&s.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},h=r(()=>e.call(s&&s.instances[i],t,n,u));let d=Promise.resolve(h);e.length<3&&(d=d.then(u)),d.catch(f=>l(f))})}function Ru(e,t,n,s,i=r=>r()){const r=[];for(const o of e)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(ev(l)){const u=(l.__vccOpts||l)[t];u&&r.push(qs(u,n,s,o,a,i))}else{let u=l();r.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=j0(h)?h.default:h;o.mods[a]=h,o.components[a]=d;const f=(d.__vccOpts||d)[t];return f&&qs(f,n,s,o,a,i)()}))}}return r}function bA(e,t){const n=[],s=[],i=[],r=Math.max(t.matched.length,e.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(e.matched.find(u=>xr(u,a))?s.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(u=>xr(u,l))||i.push(l))}return[n,s,i]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let wA=()=>location.protocol+"//"+location.host;function hv(e,t){const{pathname:n,search:s,hash:i}=t,r=e.indexOf("#");if(r>-1){let o=i.includes(e.slice(r))?e.slice(r).length:1,a=i.slice(o);return a[0]!=="/"&&(a="/"+a),Bp(a,"")}return Bp(n,e)+s+i}function EA(e,t,n,s){let i=[],r=[],o=null;const a=({state:f})=>{const g=hv(e,location),b=n.value,w=t.value;let v=0;if(f){if(n.value=g,t.value=f,o&&o===b){o=null;return}v=w?f.position-w.position:0}else s(g);i.forEach(S=>{S(n.value,b,{delta:v,type:uh.pop,direction:v?v>0?Su.forward:Su.back:Su.unknown})})};function l(){o=n.value}function u(f){i.push(f);const g=()=>{const b=i.indexOf(f);b>-1&&i.splice(b,1)};return r.push(g),g}function h(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(Mt({},f.state,{scroll:Ac()}),"")}}function d(){for(const f of r)f();r=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:l,listen:u,destroy:d}}function Wp(e,t,n,s=!1,i=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:i?Ac():null}}function TA(e){const{history:t,location:n}=window,s={value:hv(e,n)},i={value:t.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,u,h){const d=e.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?e:e.slice(d))+l:wA()+e+l;try{t[h?"replaceState":"pushState"](u,"",f),i.value=u}catch(g){console.error(g),n[h?"replace":"assign"](f)}}function o(l,u){r(l,Mt({},t.state,Wp(i.value.back,l,i.value.forward,!0),u,{position:i.value.position}),!0),s.value=l}function a(l,u){const h=Mt({},i.value,t.state,{forward:l,scroll:Ac()});r(h.current,h,!0),r(l,Mt({},Wp(s.value,l,null),{position:h.position+1},u),!1),s.value=l}return{location:s,state:i,push:a,replace:o}}function IA(e){e=aA(e);const t=TA(e),n=EA(e,t.state,t.location,t.replace);function s(r,o=!0){o||n.pauseListeners(),history.go(r)}const i=Mt({location:"",base:e,go:s,createHref:cA.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}let Oi=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e})({});var pe=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e})(pe||{});const AA={type:Oi.Static,value:""},SA=/[a-zA-Z0-9_]/;function RA(e){if(!e)return[[]];if(e==="/")return[[AA]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(g){throw new Error(`ERR (${n})/"${u}": ${g}`)}let n=pe.Static,s=n;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,l,u="",h="";function d(){u&&(n===pe.Static?r.push({type:Oi.Static,value:u}):n===pe.Param||n===pe.ParamRegExp||n===pe.ParamRegExpEnd?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:Oi.Param,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function f(){u+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==pe.ParamRegExp){s=n,n=pe.EscapeNext;continue}switch(n){case pe.Static:l==="/"?(u&&d(),o()):l===":"?(d(),n=pe.Param):f();break;case pe.EscapeNext:f(),n=s;break;case pe.Param:l==="("?n=pe.ParamRegExp:SA.test(l)?f():(d(),n=pe.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case pe.ParamRegExp:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=pe.ParamRegExpEnd:h+=l;break;case pe.ParamRegExpEnd:d(),n=pe.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:t("Unknown state");break}}return n===pe.ParamRegExp&&t(`Unfinished custom RegExp for param "${u}"`),d(),o(),i}const qp="[^/]+?",CA={sensitive:!1,strict:!1,start:!0,end:!0};var Ye=(function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e})(Ye||{});const xA=/[.+*?^${}()[\]/\\]/g;function PA(e,t){const n=Mt({},CA,t),s=[];let i=n.start?"^":"";const r=[];for(const u of e){const h=u.length?[]:[Ye.Root];n.strict&&!u.length&&(i+="/");for(let d=0;d<u.length;d++){const f=u[d];let g=Ye.Segment+(n.sensitive?Ye.BonusCaseSensitive:0);if(f.type===Oi.Static)d||(i+="/"),i+=f.value.replace(xA,"\\$&"),g+=Ye.Static;else if(f.type===Oi.Param){const{value:b,repeatable:w,optional:v,regexp:S}=f;r.push({name:b,repeatable:w,optional:v});const P=S||qp;if(P!==qp){g+=Ye.BonusCustomRegExp;try{`${P}`}catch(D){throw new Error(`Invalid custom RegExp for param "${b}" (${P}): `+D.message)}}let x=w?`((?:${P})(?:/(?:${P}))*)`:`(${P})`;d||(x=v&&u.length<2?`(?:/${x})`:"/"+x),v&&(x+="?"),i+=x,g+=Ye.Dynamic,v&&(g+=Ye.BonusOptional),w&&(g+=Ye.BonusRepeatable),P===".*"&&(g+=Ye.BonusWildcard)}h.push(g)}s.push(h)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=Ye.BonusStrict}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(u){const h=u.match(o),d={};if(!h)return null;for(let f=1;f<h.length;f++){const g=h[f]||"",b=r[f-1];d[b.name]=g&&b.repeatable?g.split("/"):g}return d}function l(u){let h="",d=!1;for(const f of e){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const g of f)if(g.type===Oi.Static)h+=g.value;else if(g.type===Oi.Param){const{value:b,repeatable:w,optional:v}=g,S=b in u?u[b]:"";if(xn(S)&&!w)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const P=xn(S)?S.join("/"):S;if(!P)if(v)f.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${b}"`);h+=P}}return h||"/"}return{re:o,score:s,keys:r,parse:a,stringify:l}}function kA(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===Ye.Static+Ye.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===Ye.Static+Ye.Segment?1:-1:0}function dv(e,t){let n=0;const s=e.score,i=t.score;for(;n<s.length&&n<i.length;){const r=kA(s[n],i[n]);if(r)return r;n++}if(Math.abs(i.length-s.length)===1){if(Kp(s))return 1;if(Kp(i))return-1}return i.length-s.length}function Kp(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const DA={strict:!1,end:!0,sensitive:!1};function OA(e,t,n){const s=PA(RA(e.path),n),i=Mt(s,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function MA(e,t){const n=[],s=new Map;t=Up(DA,t);function i(d){return s.get(d)}function r(d,f,g){const b=!g,w=Yp(d);w.aliasOf=g&&g.record;const v=Up(t,d),S=[w];if("alias"in d){const D=typeof d.alias=="string"?[d.alias]:d.alias;for(const L of D)S.push(Yp(Mt({},w,{components:g?g.record.components:w.components,path:L,aliasOf:g?g.record:w})))}let P,x;for(const D of S){const{path:L}=D;if(f&&L[0]!=="/"){const W=f.record.path,T=W[W.length-1]==="/"?"":"/";D.path=f.record.path+(L&&T+L)}if(P=OA(D,f,v),g?g.alias.push(P):(x=x||P,x!==P&&x.alias.push(P),b&&d.name&&!Qp(P)&&o(d.name)),fv(P)&&l(P),w.children){const W=w.children;for(let T=0;T<W.length;T++)r(W[T],P,g&&g.children[T])}g=g||P}return x?()=>{o(x)}:Vo}function o(d){if(lv(d)){const f=s.get(d);f&&(s.delete(d),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(d);f>-1&&(n.splice(f,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const f=LA(d,n);n.splice(f,0,d),d.record.name&&!Qp(d)&&s.set(d.record.name,d)}function u(d,f){let g,b={},w,v;if("name"in d&&d.name){if(g=s.get(d.name),!g)throw Pr(ne.MATCHER_NOT_FOUND,{location:d});v=g.record.name,b=Mt(Gp(f.params,g.keys.filter(x=>!x.optional).concat(g.parent?g.parent.keys.filter(x=>x.optional):[]).map(x=>x.name)),d.params&&Gp(d.params,g.keys.map(x=>x.name))),w=g.stringify(b)}else if(d.path!=null)w=d.path,g=n.find(x=>x.re.test(w)),g&&(b=g.parse(w),v=g.record.name);else{if(g=f.name?s.get(f.name):n.find(x=>x.re.test(f.path)),!g)throw Pr(ne.MATCHER_NOT_FOUND,{location:d,currentLocation:f});v=g.record.name,b=Mt({},f.params,d.params),w=g.stringify(b)}const S=[];let P=g;for(;P;)S.unshift(P.record),P=P.parent;return{name:v,path:w,params:b,matched:S,meta:VA(S)}}e.forEach(d=>r(d));function h(){n.length=0,s.clear()}return{addRoute:r,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:i}}function Gp(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function Yp(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:NA(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function NA(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function Qp(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function VA(e){return e.reduce((t,n)=>Mt(t,n.meta),{})}function LA(e,t){let n=0,s=t.length;for(;n!==s;){const r=n+s>>1;dv(e,t[r])<0?s=r:n=r+1}const i=FA(e);return i&&(s=t.lastIndexOf(i,s-1)),s}function FA(e){let t=e;for(;t=t.parent;)if(fv(t)&&dv(e,t)===0)return t}function fv({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Xp(e){const t=Cn(Sc),n=Cn(uv),s=Bt(()=>{const l=$n(e.to);return t.resolve(l)}),i=Bt(()=>{const{matched:l}=s.value,{length:u}=l,h=l[u-1],d=n.matched;if(!h||!d.length)return-1;const f=d.findIndex(xr.bind(null,h));if(f>-1)return f;const g=Jp(l[u-2]);return u>1&&Jp(h)===g&&d[d.length-1].path!==g?d.findIndex(xr.bind(null,l[u-2])):f}),r=Bt(()=>i.value>-1&&$A(n.params,s.value.params)),o=Bt(()=>i.value>-1&&i.value===n.matched.length-1&&av(n.params,s.value.params));function a(l={}){if(zA(l)){const u=t[$n(e.replace)?"replace":"push"]($n(e.to)).catch(Vo);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:Bt(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}function UA(e){return e.length===1?e[0]:e}const BA=by({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Xp,setup(e,{slots:t}){const n=pa(Xp(e)),{options:s}=Cn(Sc),i=Bt(()=>({[Zp(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Zp(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&UA(t.default(n));return e.custom?r:Ky("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),jA=BA;function zA(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function $A(e,t){for(const n in t){const s=t[n],i=e[n];if(typeof s=="string"){if(s!==i)return!1}else if(!xn(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function Jp(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Zp=(e,t,n)=>e??t??n,HA=by({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=Cn(dh),i=Bt(()=>e.route||s.value),r=Cn(Hp,0),o=Bt(()=>{let u=$n(r);const{matched:h}=i.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),a=Bt(()=>i.value.matched[o.value]);ul(Hp,Bt(()=>o.value+1)),ul(vA,a),ul(dh,i);const l=ot();return vs(()=>[l.value,a.value,e.name],([u,h,d],[f,g,b])=>{h&&(h.instances[d]=u,g&&g!==h&&u&&u===f&&(h.leaveGuards.size||(h.leaveGuards=g.leaveGuards),h.updateGuards.size||(h.updateGuards=g.updateGuards))),u&&h&&(!g||!xr(h,g)||!f)&&(h.enterCallbacks[d]||[]).forEach(w=>w(u))},{flush:"post"}),()=>{const u=i.value,h=e.name,d=a.value,f=d&&d.components[h];if(!f)return tg(n.default,{Component:f,route:u});const g=d.props[h],b=g?g===!0?u.params:typeof g=="function"?g(u):g:null,v=Ky(f,Mt({},b,t,{onVnodeUnmounted:S=>{S.component.isUnmounted&&(d.instances[h]=null)},ref:l}));return tg(n.default,{Component:v,route:u})||v}}});function tg(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const WA=HA;function qA(e){const t=MA(e.routes,e),n=e.parseQuery||_A,s=e.stringifyQuery||$p,i=e.history,r=uo(),o=uo(),a=uo(),l=MT(js);let u=js;hr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Iu.bind(null,j=>""+j),d=Iu.bind(null,tA),f=Iu.bind(null,Jo);function g(j,it){let et,lt;return lv(j)?(et=t.getRecordMatcher(j),lt=it):lt=j,t.addRoute(lt,et)}function b(j){const it=t.getRecordMatcher(j);it&&t.removeRoute(it)}function w(){return t.getRoutes().map(j=>j.record)}function v(j){return!!t.getRecordMatcher(j)}function S(j,it){if(it=Mt({},it||l.value),typeof j=="string"){const N=Au(n,j,it.path),z=t.resolve({path:N.path},it),H=i.createHref(N.fullPath);return Mt(N,z,{params:f(z.params),hash:Jo(N.hash),redirectedFrom:void 0,href:H})}let et;if(j.path!=null)et=Mt({},j,{path:Au(n,j.path,it.path).path});else{const N=Mt({},j.params);for(const z in N)N[z]==null&&delete N[z];et=Mt({},j,{params:d(N)}),it.params=d(it.params)}const lt=t.resolve(et,it),At=j.hash||"";lt.params=h(f(lt.params));const A=sA(s,Mt({},j,{hash:X0(At),path:lt.path})),k=i.createHref(A);return Mt({fullPath:A,hash:At,query:s===$p?yA(j.query):j.query||{}},lt,{redirectedFrom:void 0,href:k})}function P(j){return typeof j=="string"?Au(n,j,l.value.path):Mt({},j)}function x(j,it){if(u!==j)return Pr(ne.NAVIGATION_CANCELLED,{from:it,to:j})}function D(j){return T(j)}function L(j){return D(Mt(P(j),{replace:!0}))}function W(j,it){const et=j.matched[j.matched.length-1];if(et&&et.redirect){const{redirect:lt}=et;let At=typeof lt=="function"?lt(j,it):lt;return typeof At=="string"&&(At=At.includes("?")||At.includes("#")?At=P(At):{path:At},At.params={}),Mt({query:j.query,hash:j.hash,params:At.path!=null?{}:j.params},At)}}function T(j,it){const et=u=S(j),lt=l.value,At=j.state,A=j.force,k=j.replace===!0,N=W(et,lt);if(N)return T(Mt(P(N),{state:typeof N=="object"?Mt({},At,N.state):At,force:A,replace:k}),it||et);const z=et;z.redirectedFrom=it;let H;return!A&&iA(s,lt,et)&&(H=Pr(ne.NAVIGATION_DUPLICATED,{to:z,from:lt}),be(lt,lt,!0,!1)),(H?Promise.resolve(H):R(z,lt)).catch(B=>os(B)?os(B,ne.NAVIGATION_GUARD_REDIRECT)?B:Wt(B):U(B,z,lt)).then(B=>{if(B){if(os(B,ne.NAVIGATION_GUARD_REDIRECT))return T(Mt({replace:k},P(B.to),{state:typeof B.to=="object"?Mt({},At,B.to.state):At,force:A}),it||z)}else B=M(z,lt,!0,k,At);return C(z,lt,B),B})}function _(j,it){const et=x(j,it);return et?Promise.reject(et):Promise.resolve()}function E(j){const it=de.values().next().value;return it&&typeof it.runWithContext=="function"?it.runWithContext(j):j()}function R(j,it){let et;const[lt,At,A]=bA(j,it);et=Ru(lt.reverse(),"beforeRouteLeave",j,it);for(const N of lt)N.leaveGuards.forEach(z=>{et.push(qs(z,j,it))});const k=_.bind(null,j,it);return et.push(k),Jt(et).then(()=>{et=[];for(const N of r.list())et.push(qs(N,j,it));return et.push(k),Jt(et)}).then(()=>{et=Ru(At,"beforeRouteUpdate",j,it);for(const N of At)N.updateGuards.forEach(z=>{et.push(qs(z,j,it))});return et.push(k),Jt(et)}).then(()=>{et=[];for(const N of A)if(N.beforeEnter)if(xn(N.beforeEnter))for(const z of N.beforeEnter)et.push(qs(z,j,it));else et.push(qs(N.beforeEnter,j,it));return et.push(k),Jt(et)}).then(()=>(j.matched.forEach(N=>N.enterCallbacks={}),et=Ru(A,"beforeRouteEnter",j,it,E),et.push(k),Jt(et))).then(()=>{et=[];for(const N of o.list())et.push(qs(N,j,it));return et.push(k),Jt(et)}).catch(N=>os(N,ne.NAVIGATION_CANCELLED)?N:Promise.reject(N))}function C(j,it,et){a.list().forEach(lt=>E(()=>lt(j,it,et)))}function M(j,it,et,lt,At){const A=x(j,it);if(A)return A;const k=it===js,N=hr?history.state:{};et&&(lt||k?i.replace(j.fullPath,Mt({scroll:k&&N&&N.scroll},At)):i.push(j.fullPath,At)),l.value=j,be(j,it,et,k),Wt()}let I;function Tt(){I||(I=i.listen((j,it,et)=>{if(!Ie.listening)return;const lt=S(j),At=W(lt,Ie.currentRoute.value);if(At){T(Mt(At,{replace:!0,force:!0}),lt).catch(Vo);return}u=lt;const A=l.value;hr&&dA(zp(A.fullPath,et.delta),Ac()),R(lt,A).catch(k=>os(k,ne.NAVIGATION_ABORTED|ne.NAVIGATION_CANCELLED)?k:os(k,ne.NAVIGATION_GUARD_REDIRECT)?(T(Mt(P(k.to),{force:!0}),lt).then(N=>{os(N,ne.NAVIGATION_ABORTED|ne.NAVIGATION_DUPLICATED)&&!et.delta&&et.type===uh.pop&&i.go(-1,!1)}).catch(Vo),Promise.reject()):(et.delta&&i.go(-et.delta,!1),U(k,lt,A))).then(k=>{k=k||M(lt,A,!1),k&&(et.delta&&!os(k,ne.NAVIGATION_CANCELLED)?i.go(-et.delta,!1):et.type===uh.pop&&os(k,ne.NAVIGATION_ABORTED|ne.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),C(lt,A,k)}).catch(Vo)}))}let _t=uo(),ut=uo(),Y;function U(j,it,et){Wt(j);const lt=ut.list();return lt.length?lt.forEach(At=>At(j,it,et)):console.error(j),Promise.reject(j)}function J(){return Y&&l.value!==js?Promise.resolve():new Promise((j,it)=>{_t.add([j,it])})}function Wt(j){return Y||(Y=!j,Tt(),_t.list().forEach(([it,et])=>j?et(j):it()),_t.reset()),j}function be(j,it,et,lt){const{scrollBehavior:At}=e;if(!hr||!At)return Promise.resolve();const A=!et&&fA(zp(j.fullPath,0))||(lt||!et)&&history.state&&history.state.scroll||null;return Ur().then(()=>At(j,it,A)).then(k=>k&&hA(k)).catch(k=>U(k,j,it))}const Xt=j=>i.go(j);let qe;const de=new Set,Ie={currentRoute:l,listening:!0,addRoute:g,removeRoute:b,clearRoutes:t.clearRoutes,hasRoute:v,getRoutes:w,resolve:S,options:e,push:D,replace:L,go:Xt,back:()=>Xt(-1),forward:()=>Xt(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:ut.add,isReady:J,install(j){j.component("RouterLink",jA),j.component("RouterView",WA),j.config.globalProperties.$router=Ie,Object.defineProperty(j.config.globalProperties,"$route",{enumerable:!0,get:()=>$n(l)}),hr&&!qe&&l.value===js&&(qe=!0,D(i.location).catch(lt=>{}));const it={};for(const lt in js)Object.defineProperty(it,lt,{get:()=>l.value[lt],enumerable:!0});j.provide(Sc,Ie),j.provide(uv,dy(it)),j.provide(dh,l);const et=j.unmount;de.add(j),j.unmount=function(){de.delete(j),de.size<1&&(u=js,I&&I(),I=null,l.value=js,qe=!1,Y=!1),et()}}};function Jt(j){return j.reduce((it,et)=>it.then(()=>E(et)),Promise.resolve())}return Ie}function Rc(){return Cn(Sc)}const KA=()=>{};var eg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++s)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},GA=function(e){const t=[];let n=0,s=0;for(;n<e.length;){const i=e[n++];if(i<128)t[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=e[n++];t[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=e[n++],o=e[n++],a=e[n++],l=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;t[s++]=String.fromCharCode(55296+(l>>10)),t[s++]=String.fromCharCode(56320+(l&1023))}else{const r=e[n++],o=e[n++];t[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return t.join("")},gv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<e.length;i+=3){const r=e[i],o=i+1<e.length,a=o?e[i+1]:0,l=i+2<e.length,u=l?e[i+2]:0,h=r>>2,d=(r&3)<<4|a>>4;let f=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(f=64)),s.push(n[h],n[d],n[f],n[g])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(pv(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):GA(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<e.length;){const r=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const u=i<e.length?n[e.charAt(i)]:64;++i;const d=i<e.length?n[e.charAt(i)]:64;if(++i,r==null||a==null||u==null||d==null)throw new YA;const f=r<<2|a>>4;if(s.push(f),u!==64){const g=a<<4&240|u>>2;if(s.push(g),d!==64){const b=u<<6&192|d;s.push(b)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class YA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QA=function(e){const t=pv(e);return gv.encodeByteArray(t,!0)},Vl=function(e){return QA(e).replace(/\./g,"")},mv=function(e){try{return gv.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=()=>XA().__FIREBASE_DEFAULTS__,ZA=()=>{if(typeof process>"u"||typeof eg>"u")return;const e=eg.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},tS=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&mv(e[1]);return t&&JSON.parse(t)},Cc=()=>{try{return KA()||JA()||ZA()||tS()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},_v=e=>Cc()?.emulatorHosts?.[e],yv=e=>{const t=_v(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},vv=()=>Cc()?.config,bv=e=>Cc()?.[`_${e}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hd(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Vl(JSON.stringify(n)),Vl(JSON.stringify(o)),""].join(".")}const Lo={};function nS(){const e={prod:[],emulator:[]};for(const t of Object.keys(Lo))Lo[t]?e.emulator.push(t):e.prod.push(t);return e}function sS(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let ng=!1;function dd(e,t){if(typeof window>"u"||typeof document>"u"||!Qi(window.location.host)||Lo[e]===t||Lo[e]||ng)return;Lo[e]=t;function n(f){return`__firebase__banner__${f}`}const s="__firebase__banner",r=nS().prod.length>0;function o(){const f=document.getElementById(s);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{ng=!0,o()},f}function h(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=sS(s),g=n("text"),b=document.getElementById(g)||document.createElement("span"),w=n("learnmore"),v=document.getElementById(w)||document.createElement("a"),S=n("preprendIcon"),P=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const x=f.element;a(x),h(v,w);const D=u();l(P,S),x.append(P,b,v,D),document.body.appendChild(x)}r?(b.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function rS(){const e=Cc()?.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aS(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function lS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cS(){const e=We();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function uS(){return!rS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hS(){try{return typeof indexedDB=="object"}catch{return!1}}function dS(){return new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="FirebaseError";class ss extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=fS,Object.setPrototypeOf(this,ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_a.prototype.create)}}class _a{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},i=`${this.service}/${t}`,r=this.errors[t],o=r?pS(r,s):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ss(i,a,s)}}function pS(e,t){return e.replace(gS,(n,s)=>{const i=t[s];return i!=null?String(i):`<${s}?>`})}const gS=/\{\$([^}]+)}/g;function mS(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ji(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const i of n){if(!s.includes(i))return!1;const r=e[i],o=t[i];if(sg(r)&&sg(o)){if(!ji(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function sg(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(e){const t=[];for(const[n,s]of Object.entries(e))Array.isArray(s)?s.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function yo(e){const t={};return e.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,r]=s.split("=");t[decodeURIComponent(i)]=decodeURIComponent(r)}}),t}function vo(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function _S(e,t){const n=new yS(e,t);return n.subscribe.bind(n)}class yS{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let i;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");vS(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:s},i.next===void 0&&(i.next=Cu),i.error===void 0&&(i.error=Cu),i.complete===void 0&&(i.complete=Cu);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vS(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Cu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(e){return e&&e._delegate?e._delegate:e}class hi{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new eS;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(ES(t))try{this.getOrInitializeService({instanceIdentifier:ki})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(t=ki){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ki){return this.instances.has(t)}getOptions(t=ki){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);s===a&&o.resolve(i)}return i}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(s)??new Set;i.add(t),this.onInitCallbacks.set(s,i);const r=this.instances.get(s);return r&&t(r,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:wS(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=ki){return this.component?this.component.multipleInstances?t:ki:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wS(e){return e===ki?void 0:e}function ES(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new bS(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(St||(St={}));const IS={debug:St.DEBUG,verbose:St.VERBOSE,info:St.INFO,warn:St.WARN,error:St.ERROR,silent:St.SILENT},AS=St.INFO,SS={[St.DEBUG]:"log",[St.VERBOSE]:"log",[St.INFO]:"info",[St.WARN]:"warn",[St.ERROR]:"error"},RS=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),i=SS[t];if(i)console[i](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class fd{constructor(t){this.name=t,this._logLevel=AS,this._logHandler=RS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in St))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?IS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,St.DEBUG,...t),this._logHandler(this,St.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,St.VERBOSE,...t),this._logHandler(this,St.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,St.INFO,...t),this._logHandler(this,St.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,St.WARN,...t),this._logHandler(this,St.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,St.ERROR,...t),this._logHandler(this,St.ERROR,...t)}}const CS=(e,t)=>t.some(n=>e instanceof n);let ig,rg;function xS(){return ig||(ig=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PS(){return rg||(rg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ev=new WeakMap,fh=new WeakMap,Tv=new WeakMap,xu=new WeakMap,pd=new WeakMap;function kS(e){const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{n(si(e.result)),i()},o=()=>{s(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Ev.set(n,e)}).catch(()=>{}),pd.set(t,e),t}function DS(e){if(fh.has(e))return;const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)});fh.set(e,t)}let ph={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return fh.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Tv.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return si(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function OS(e){ph=e(ph)}function MS(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=e.call(Pu(this),t,...n);return Tv.set(s,t.sort?t.sort():[t]),si(s)}:PS().includes(e)?function(...t){return e.apply(Pu(this),t),si(Ev.get(this))}:function(...t){return si(e.apply(Pu(this),t))}}function NS(e){return typeof e=="function"?MS(e):(e instanceof IDBTransaction&&DS(e),CS(e,xS())?new Proxy(e,ph):e)}function si(e){if(e instanceof IDBRequest)return kS(e);if(xu.has(e))return xu.get(e);const t=NS(e);return t!==e&&(xu.set(e,t),pd.set(t,e)),t}const Pu=e=>pd.get(e);function VS(e,t,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(e,t),a=si(o);return s&&o.addEventListener("upgradeneeded",l=>{s(si(o.result),l.oldVersion,l.newVersion,si(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const LS=["get","getKey","getAll","getAllKeys","count"],FS=["put","add","delete","clear"],ku=new Map;function og(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ku.get(t))return ku.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,i=FS.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||LS.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return ku.set(t,r),r}OS(e=>({...e,get:(t,n,s)=>og(t,n)||e.get(t,n,s),has:(t,n)=>!!og(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(BS(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function BS(e){return e.getComponent()?.type==="VERSION"}const gh="@firebase/app",ag="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new fd("@firebase/app"),jS="@firebase/app-compat",zS="@firebase/analytics-compat",$S="@firebase/analytics",HS="@firebase/app-check-compat",WS="@firebase/app-check",qS="@firebase/auth",KS="@firebase/auth-compat",GS="@firebase/database",YS="@firebase/data-connect",QS="@firebase/database-compat",XS="@firebase/functions",JS="@firebase/functions-compat",ZS="@firebase/installations",tR="@firebase/installations-compat",eR="@firebase/messaging",nR="@firebase/messaging-compat",sR="@firebase/performance",iR="@firebase/performance-compat",rR="@firebase/remote-config",oR="@firebase/remote-config-compat",aR="@firebase/storage",lR="@firebase/storage-compat",cR="@firebase/firestore",uR="@firebase/ai",hR="@firebase/firestore-compat",dR="firebase",fR="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh="[DEFAULT]",pR={[gh]:"fire-core",[jS]:"fire-core-compat",[$S]:"fire-analytics",[zS]:"fire-analytics-compat",[WS]:"fire-app-check",[HS]:"fire-app-check-compat",[qS]:"fire-auth",[KS]:"fire-auth-compat",[GS]:"fire-rtdb",[YS]:"fire-data-connect",[QS]:"fire-rtdb-compat",[XS]:"fire-fn",[JS]:"fire-fn-compat",[ZS]:"fire-iid",[tR]:"fire-iid-compat",[eR]:"fire-fcm",[nR]:"fire-fcm-compat",[sR]:"fire-perf",[iR]:"fire-perf-compat",[rR]:"fire-rc",[oR]:"fire-rc-compat",[aR]:"fire-gcs",[lR]:"fire-gcs-compat",[cR]:"fire-fst",[hR]:"fire-fst-compat",[uR]:"fire-vertex","fire-js":"fire-js",[dR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=new Map,gR=new Map,_h=new Map;function lg(e,t){try{e.container.addComponent(t)}catch(n){Ss.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function zi(e){const t=e.name;if(_h.has(t))return Ss.debug(`There were multiple attempts to register component ${t}.`),!1;_h.set(t,e);for(const n of Ll.values())lg(n,e);for(const n of gR.values())lg(n,e);return!0}function xc(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function un(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ii=new _a("app","Firebase",mR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ii.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=fR;function Iv(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const s={name:mh,automaticDataCollectionEnabled:!0,...t},i=s.name;if(typeof i!="string"||!i)throw ii.create("bad-app-name",{appName:String(i)});if(n||(n=vv()),!n)throw ii.create("no-options");const r=Ll.get(i);if(r){if(ji(n,r.options)&&ji(s,r.config))return r;throw ii.create("duplicate-app",{appName:i})}const o=new TS(i);for(const l of _h.values())o.addComponent(l);const a=new _R(n,s,o);return Ll.set(i,a),a}function gd(e=mh){const t=Ll.get(e);if(!t&&e===mh&&vv())return Iv();if(!t)throw ii.create("no-app",{appName:e});return t}function Hn(e,t,n){let s=pR[e]??e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),r=t.match(/\s|\//);if(i||r){const o=[`Unable to register library "${s}" with version "${t}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&r&&o.push("and"),r&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ss.warn(o.join(" "));return}zi(new hi(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR="firebase-heartbeat-database",vR=1,Zo="firebase-heartbeat-store";let Du=null;function Av(){return Du||(Du=VS(yR,vR,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Zo)}catch(n){console.warn(n)}}}}).catch(e=>{throw ii.create("idb-open",{originalErrorMessage:e.message})})),Du}async function bR(e){try{const n=(await Av()).transaction(Zo),s=await n.objectStore(Zo).get(Sv(e));return await n.done,s}catch(t){if(t instanceof ss)Ss.warn(t.message);else{const n=ii.create("idb-get",{originalErrorMessage:t?.message});Ss.warn(n.message)}}}async function cg(e,t){try{const s=(await Av()).transaction(Zo,"readwrite");await s.objectStore(Zo).put(t,Sv(e)),await s.done}catch(n){if(n instanceof ss)Ss.warn(n.message);else{const s=ii.create("idb-set",{originalErrorMessage:n?.message});Ss.warn(s.message)}}}function Sv(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=1024,ER=30;class TR{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new AR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ug();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>ER){const i=SR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Ss.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ug(),{heartbeatsToSend:n,unsentEntries:s}=IR(this._heartbeatsCache.heartbeats),i=Vl(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Ss.warn(t),""}}}function ug(){return new Date().toISOString().substring(0,10)}function IR(e,t=wR){const n=[];let s=e.slice();for(const i of e){const r=n.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),hg(n)>t){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),hg(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class AR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hS()?dS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return cg(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return cg(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function hg(e){return Vl(JSON.stringify({version:2,heartbeats:e})).length}function SR(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(e){zi(new hi("platform-logger",t=>new US(t),"PRIVATE")),zi(new hi("heartbeat",t=>new TR(t),"PRIVATE")),Hn(gh,ag,e),Hn(gh,ag,"esm2020"),Hn("fire-js","")}RR("");var dg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ri,Rv;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,_){function E(){}E.prototype=_.prototype,T.F=_.prototype,T.prototype=new E,T.prototype.constructor=T,T.D=function(R,C,M){for(var I=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)I[Tt-2]=arguments[Tt];return _.prototype[C].apply(R,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,E){E||(E=0);const R=Array(16);if(typeof _=="string")for(var C=0;C<16;++C)R[C]=_.charCodeAt(E++)|_.charCodeAt(E++)<<8|_.charCodeAt(E++)<<16|_.charCodeAt(E++)<<24;else for(C=0;C<16;++C)R[C]=_[E++]|_[E++]<<8|_[E++]<<16|_[E++]<<24;_=T.g[0],E=T.g[1],C=T.g[2];let M=T.g[3],I;I=_+(M^E&(C^M))+R[0]+3614090360&4294967295,_=E+(I<<7&4294967295|I>>>25),I=M+(C^_&(E^C))+R[1]+3905402710&4294967295,M=_+(I<<12&4294967295|I>>>20),I=C+(E^M&(_^E))+R[2]+606105819&4294967295,C=M+(I<<17&4294967295|I>>>15),I=E+(_^C&(M^_))+R[3]+3250441966&4294967295,E=C+(I<<22&4294967295|I>>>10),I=_+(M^E&(C^M))+R[4]+4118548399&4294967295,_=E+(I<<7&4294967295|I>>>25),I=M+(C^_&(E^C))+R[5]+1200080426&4294967295,M=_+(I<<12&4294967295|I>>>20),I=C+(E^M&(_^E))+R[6]+2821735955&4294967295,C=M+(I<<17&4294967295|I>>>15),I=E+(_^C&(M^_))+R[7]+4249261313&4294967295,E=C+(I<<22&4294967295|I>>>10),I=_+(M^E&(C^M))+R[8]+1770035416&4294967295,_=E+(I<<7&4294967295|I>>>25),I=M+(C^_&(E^C))+R[9]+2336552879&4294967295,M=_+(I<<12&4294967295|I>>>20),I=C+(E^M&(_^E))+R[10]+4294925233&4294967295,C=M+(I<<17&4294967295|I>>>15),I=E+(_^C&(M^_))+R[11]+2304563134&4294967295,E=C+(I<<22&4294967295|I>>>10),I=_+(M^E&(C^M))+R[12]+1804603682&4294967295,_=E+(I<<7&4294967295|I>>>25),I=M+(C^_&(E^C))+R[13]+4254626195&4294967295,M=_+(I<<12&4294967295|I>>>20),I=C+(E^M&(_^E))+R[14]+2792965006&4294967295,C=M+(I<<17&4294967295|I>>>15),I=E+(_^C&(M^_))+R[15]+1236535329&4294967295,E=C+(I<<22&4294967295|I>>>10),I=_+(C^M&(E^C))+R[1]+4129170786&4294967295,_=E+(I<<5&4294967295|I>>>27),I=M+(E^C&(_^E))+R[6]+3225465664&4294967295,M=_+(I<<9&4294967295|I>>>23),I=C+(_^E&(M^_))+R[11]+643717713&4294967295,C=M+(I<<14&4294967295|I>>>18),I=E+(M^_&(C^M))+R[0]+3921069994&4294967295,E=C+(I<<20&4294967295|I>>>12),I=_+(C^M&(E^C))+R[5]+3593408605&4294967295,_=E+(I<<5&4294967295|I>>>27),I=M+(E^C&(_^E))+R[10]+38016083&4294967295,M=_+(I<<9&4294967295|I>>>23),I=C+(_^E&(M^_))+R[15]+3634488961&4294967295,C=M+(I<<14&4294967295|I>>>18),I=E+(M^_&(C^M))+R[4]+3889429448&4294967295,E=C+(I<<20&4294967295|I>>>12),I=_+(C^M&(E^C))+R[9]+568446438&4294967295,_=E+(I<<5&4294967295|I>>>27),I=M+(E^C&(_^E))+R[14]+3275163606&4294967295,M=_+(I<<9&4294967295|I>>>23),I=C+(_^E&(M^_))+R[3]+4107603335&4294967295,C=M+(I<<14&4294967295|I>>>18),I=E+(M^_&(C^M))+R[8]+1163531501&4294967295,E=C+(I<<20&4294967295|I>>>12),I=_+(C^M&(E^C))+R[13]+2850285829&4294967295,_=E+(I<<5&4294967295|I>>>27),I=M+(E^C&(_^E))+R[2]+4243563512&4294967295,M=_+(I<<9&4294967295|I>>>23),I=C+(_^E&(M^_))+R[7]+1735328473&4294967295,C=M+(I<<14&4294967295|I>>>18),I=E+(M^_&(C^M))+R[12]+2368359562&4294967295,E=C+(I<<20&4294967295|I>>>12),I=_+(E^C^M)+R[5]+4294588738&4294967295,_=E+(I<<4&4294967295|I>>>28),I=M+(_^E^C)+R[8]+2272392833&4294967295,M=_+(I<<11&4294967295|I>>>21),I=C+(M^_^E)+R[11]+1839030562&4294967295,C=M+(I<<16&4294967295|I>>>16),I=E+(C^M^_)+R[14]+4259657740&4294967295,E=C+(I<<23&4294967295|I>>>9),I=_+(E^C^M)+R[1]+2763975236&4294967295,_=E+(I<<4&4294967295|I>>>28),I=M+(_^E^C)+R[4]+1272893353&4294967295,M=_+(I<<11&4294967295|I>>>21),I=C+(M^_^E)+R[7]+4139469664&4294967295,C=M+(I<<16&4294967295|I>>>16),I=E+(C^M^_)+R[10]+3200236656&4294967295,E=C+(I<<23&4294967295|I>>>9),I=_+(E^C^M)+R[13]+681279174&4294967295,_=E+(I<<4&4294967295|I>>>28),I=M+(_^E^C)+R[0]+3936430074&4294967295,M=_+(I<<11&4294967295|I>>>21),I=C+(M^_^E)+R[3]+3572445317&4294967295,C=M+(I<<16&4294967295|I>>>16),I=E+(C^M^_)+R[6]+76029189&4294967295,E=C+(I<<23&4294967295|I>>>9),I=_+(E^C^M)+R[9]+3654602809&4294967295,_=E+(I<<4&4294967295|I>>>28),I=M+(_^E^C)+R[12]+3873151461&4294967295,M=_+(I<<11&4294967295|I>>>21),I=C+(M^_^E)+R[15]+530742520&4294967295,C=M+(I<<16&4294967295|I>>>16),I=E+(C^M^_)+R[2]+3299628645&4294967295,E=C+(I<<23&4294967295|I>>>9),I=_+(C^(E|~M))+R[0]+4096336452&4294967295,_=E+(I<<6&4294967295|I>>>26),I=M+(E^(_|~C))+R[7]+1126891415&4294967295,M=_+(I<<10&4294967295|I>>>22),I=C+(_^(M|~E))+R[14]+2878612391&4294967295,C=M+(I<<15&4294967295|I>>>17),I=E+(M^(C|~_))+R[5]+4237533241&4294967295,E=C+(I<<21&4294967295|I>>>11),I=_+(C^(E|~M))+R[12]+1700485571&4294967295,_=E+(I<<6&4294967295|I>>>26),I=M+(E^(_|~C))+R[3]+2399980690&4294967295,M=_+(I<<10&4294967295|I>>>22),I=C+(_^(M|~E))+R[10]+4293915773&4294967295,C=M+(I<<15&4294967295|I>>>17),I=E+(M^(C|~_))+R[1]+2240044497&4294967295,E=C+(I<<21&4294967295|I>>>11),I=_+(C^(E|~M))+R[8]+1873313359&4294967295,_=E+(I<<6&4294967295|I>>>26),I=M+(E^(_|~C))+R[15]+4264355552&4294967295,M=_+(I<<10&4294967295|I>>>22),I=C+(_^(M|~E))+R[6]+2734768916&4294967295,C=M+(I<<15&4294967295|I>>>17),I=E+(M^(C|~_))+R[13]+1309151649&4294967295,E=C+(I<<21&4294967295|I>>>11),I=_+(C^(E|~M))+R[4]+4149444226&4294967295,_=E+(I<<6&4294967295|I>>>26),I=M+(E^(_|~C))+R[11]+3174756917&4294967295,M=_+(I<<10&4294967295|I>>>22),I=C+(_^(M|~E))+R[2]+718787259&4294967295,C=M+(I<<15&4294967295|I>>>17),I=E+(M^(C|~_))+R[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(C+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+C&4294967295,T.g[3]=T.g[3]+M&4294967295}s.prototype.v=function(T,_){_===void 0&&(_=T.length);const E=_-this.blockSize,R=this.C;let C=this.h,M=0;for(;M<_;){if(C==0)for(;M<=E;)i(this,T,M),M+=this.blockSize;if(typeof T=="string"){for(;M<_;)if(R[C++]=T.charCodeAt(M++),C==this.blockSize){i(this,R),C=0;break}}else for(;M<_;)if(R[C++]=T[M++],C==this.blockSize){i(this,R),C=0;break}}this.h=C,this.o+=_},s.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;_=this.o*8;for(var E=T.length-8;E<T.length;++E)T[E]=_&255,_/=256;for(this.v(T),T=Array(16),_=0,E=0;E<4;++E)for(let R=0;R<32;R+=8)T[_++]=this.g[E]>>>R&255;return T};function r(T,_){var E=a;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=_(T)}function o(T,_){this.h=_;const E=[];let R=!0;for(let C=T.length-1;C>=0;C--){const M=T[C]|0;R&&M==_||(E[C]=M,R=!1)}this.g=E}var a={};function l(T){return-128<=T&&T<128?r(T,function(_){return new o([_|0],_<0?-1:0)}):new o([T|0],T<0?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return d;if(T<0)return v(u(-T));const _=[];let E=1;for(let R=0;T>=E;R++)_[R]=T/E|0,E*=4294967296;return new o(_,0)}function h(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return v(h(T.substring(1),_));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=u(Math.pow(_,8));let R=d;for(let M=0;M<T.length;M+=8){var C=Math.min(8,T.length-M);const I=parseInt(T.substring(M,M+C),_);C<8?(C=u(Math.pow(_,C)),R=R.j(C).add(u(I))):(R=R.j(E),R=R.add(u(I)))}return R}var d=l(0),f=l(1),g=l(16777216);e=o.prototype,e.m=function(){if(w(this))return-v(this).m();let T=0,_=1;for(let E=0;E<this.g.length;E++){const R=this.i(E);T+=(R>=0?R:4294967296+R)*_,_*=4294967296}return T},e.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(b(this))return"0";if(w(this))return"-"+v(this).toString(T);const _=u(Math.pow(T,6));var E=this;let R="";for(;;){const C=D(E,_).g;E=S(E,C.j(_));let M=((E.g.length>0?E.g[0]:E.h)>>>0).toString(T);if(E=C,b(E))return M+R;for(;M.length<6;)M="0"+M;R=M+R}},e.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function b(T){if(T.h!=0)return!1;for(let _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function w(T){return T.h==-1}e.l=function(T){return T=S(this,T),w(T)?-1:b(T)?0:1};function v(T){const _=T.g.length,E=[];for(let R=0;R<_;R++)E[R]=~T.g[R];return new o(E,~T.h).add(f)}e.abs=function(){return w(this)?v(this):this},e.add=function(T){const _=Math.max(this.g.length,T.g.length),E=[];let R=0;for(let C=0;C<=_;C++){let M=R+(this.i(C)&65535)+(T.i(C)&65535),I=(M>>>16)+(this.i(C)>>>16)+(T.i(C)>>>16);R=I>>>16,M&=65535,I&=65535,E[C]=I<<16|M}return new o(E,E[E.length-1]&-2147483648?-1:0)};function S(T,_){return T.add(v(_))}e.j=function(T){if(b(this)||b(T))return d;if(w(this))return w(T)?v(this).j(v(T)):v(v(this).j(T));if(w(T))return v(this.j(v(T)));if(this.l(g)<0&&T.l(g)<0)return u(this.m()*T.m());const _=this.g.length+T.g.length,E=[];for(var R=0;R<2*_;R++)E[R]=0;for(R=0;R<this.g.length;R++)for(let C=0;C<T.g.length;C++){const M=this.i(R)>>>16,I=this.i(R)&65535,Tt=T.i(C)>>>16,_t=T.i(C)&65535;E[2*R+2*C]+=I*_t,P(E,2*R+2*C),E[2*R+2*C+1]+=M*_t,P(E,2*R+2*C+1),E[2*R+2*C+1]+=I*Tt,P(E,2*R+2*C+1),E[2*R+2*C+2]+=M*Tt,P(E,2*R+2*C+2)}for(T=0;T<_;T++)E[T]=E[2*T+1]<<16|E[2*T];for(T=_;T<2*_;T++)E[T]=0;return new o(E,0)};function P(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function x(T,_){this.g=T,this.h=_}function D(T,_){if(b(_))throw Error("division by zero");if(b(T))return new x(d,d);if(w(T))return _=D(v(T),_),new x(v(_.g),v(_.h));if(w(_))return _=D(T,v(_)),new x(v(_.g),_.h);if(T.g.length>30){if(w(T)||w(_))throw Error("slowDivide_ only works with positive integers.");for(var E=f,R=_;R.l(T)<=0;)E=L(E),R=L(R);var C=W(E,1),M=W(R,1);for(R=W(R,2),E=W(E,2);!b(R);){var I=M.add(R);I.l(T)<=0&&(C=C.add(E),M=I),R=W(R,1),E=W(E,1)}return _=S(T,C.j(_)),new x(C,_)}for(C=d;T.l(_)>=0;){for(E=Math.max(1,Math.floor(T.m()/_.m())),R=Math.ceil(Math.log(E)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),M=u(E),I=M.j(_);w(I)||I.l(T)>0;)E-=R,M=u(E),I=M.j(_);b(M)&&(M=f),C=C.add(M),T=S(T,I)}return new x(C,T)}e.B=function(T){return D(this,T).h},e.and=function(T){const _=Math.max(this.g.length,T.g.length),E=[];for(let R=0;R<_;R++)E[R]=this.i(R)&T.i(R);return new o(E,this.h&T.h)},e.or=function(T){const _=Math.max(this.g.length,T.g.length),E=[];for(let R=0;R<_;R++)E[R]=this.i(R)|T.i(R);return new o(E,this.h|T.h)},e.xor=function(T){const _=Math.max(this.g.length,T.g.length),E=[];for(let R=0;R<_;R++)E[R]=this.i(R)^T.i(R);return new o(E,this.h^T.h)};function L(T){const _=T.g.length+1,E=[];for(let R=0;R<_;R++)E[R]=T.i(R)<<1|T.i(R-1)>>>31;return new o(E,T.h)}function W(T,_){const E=_>>5;_%=32;const R=T.g.length-E,C=[];for(let M=0;M<R;M++)C[M]=_>0?T.i(M+E)>>>_|T.i(M+E+1)<<32-_:T.i(M+E);return new o(C,T.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Rv=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,ri=o}).apply(typeof dg<"u"?dg:typeof self<"u"?self:typeof window<"u"?window:{});var Ha=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cv,bo,xv,fl,yh,Pv,kv,Dv;(function(){var e,t=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ha=="object"&&Ha];for(var p=0;p<c.length;++p){var m=c[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var s=n(this);function i(c,p){if(p)t:{var m=s;c=c.split(".");for(var y=0;y<c.length-1;y++){var V=c[y];if(!(V in m))break t;m=m[V]}c=c[c.length-1],y=m[c],p=p(y),p!=y&&p!=null&&t(m,c,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(p){var m=[],y;for(y in p)Object.prototype.hasOwnProperty.call(p,y)&&m.push([y,p[y]]);return m}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var r=r||{},o=this||self;function a(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function l(c,p,m){return c.call.apply(c.bind,arguments)}function u(c,p,m){return u=l,u.apply(null,arguments)}function h(c,p){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),c.apply(this,y)}}function d(c,p){function m(){}m.prototype=p.prototype,c.Z=p.prototype,c.prototype=new m,c.prototype.constructor=c,c.Ob=function(y,V,F){for(var Z=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)Z[wt-2]=arguments[wt];return p.prototype[V].apply(y,Z)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function g(c){const p=c.length;if(p>0){const m=Array(p);for(let y=0;y<p;y++)m[y]=c[y];return m}return[]}function b(c,p){for(let y=1;y<arguments.length;y++){const V=arguments[y];var m=typeof V;if(m=m!="object"?m:V?Array.isArray(V)?"array":m:"null",m=="array"||m=="object"&&typeof V.length=="number"){m=c.length||0;const F=V.length||0;c.length=m+F;for(let Z=0;Z<F;Z++)c[m+Z]=V[Z]}else c.push(V)}}class w{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function v(c){o.setTimeout(()=>{throw c},0)}function S(){var c=T;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class P{constructor(){this.h=this.g=null}add(p,m){const y=x.get();y.set(p,m),this.h?this.h.next=y:this.g=y,this.h=y}}var x=new w(()=>new D,c=>c.reset());class D{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let L,W=!1,T=new P,_=()=>{const c=Promise.resolve(void 0);L=()=>{c.then(E)}};function E(){for(var c;c=S();){try{c.h.call(c.g)}catch(m){v(m)}var p=x;p.j(c),p.h<100&&(p.h++,c.next=p.g,p.g=c)}W=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const m=()=>{};o.addEventListener("test",m,p),o.removeEventListener("test",m,p)}catch{}return c})();function I(c){return/^[\s\xa0]*$/.test(c)}function Tt(c,p){C.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,p)}d(Tt,C),Tt.prototype.init=function(c,p){const m=this.type=c.type,y=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget,p||(m=="mouseover"?p=c.fromElement:m=="mouseout"&&(p=c.toElement)),this.relatedTarget=p,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Tt.Z.h.call(this)},Tt.prototype.h=function(){Tt.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var _t="closure_listenable_"+(Math.random()*1e6|0),ut=0;function Y(c,p,m,y,V){this.listener=c,this.proxy=null,this.src=p,this.type=m,this.capture=!!y,this.ha=V,this.key=++ut,this.da=this.fa=!1}function U(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function J(c,p,m){for(const y in c)p.call(m,c[y],y,c)}function Wt(c,p){for(const m in c)p.call(void 0,c[m],m,c)}function be(c){const p={};for(const m in c)p[m]=c[m];return p}const Xt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qe(c,p){let m,y;for(let V=1;V<arguments.length;V++){y=arguments[V];for(m in y)c[m]=y[m];for(let F=0;F<Xt.length;F++)m=Xt[F],Object.prototype.hasOwnProperty.call(y,m)&&(c[m]=y[m])}}function de(c){this.src=c,this.g={},this.h=0}de.prototype.add=function(c,p,m,y,V){const F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);const Z=Jt(c,p,y,V);return Z>-1?(p=c[Z],m||(p.fa=!1)):(p=new Y(p,this.src,F,!!y,V),p.fa=m,c.push(p)),p};function Ie(c,p){const m=p.type;if(m in c.g){var y=c.g[m],V=Array.prototype.indexOf.call(y,p,void 0),F;(F=V>=0)&&Array.prototype.splice.call(y,V,1),F&&(U(p),c.g[m].length==0&&(delete c.g[m],c.h--))}}function Jt(c,p,m,y){for(let V=0;V<c.length;++V){const F=c[V];if(!F.da&&F.listener==p&&F.capture==!!m&&F.ha==y)return V}return-1}var j="closure_lm_"+(Math.random()*1e6|0),it={};function et(c,p,m,y,V){if(Array.isArray(p)){for(let F=0;F<p.length;F++)et(c,p[F],m,y,V);return null}return m=tt(m),c&&c[_t]?c.J(p,m,a(y)?!!y.capture:!1,V):lt(c,p,m,!1,y,V)}function lt(c,p,m,y,V,F){if(!p)throw Error("Invalid event type");const Z=a(V)?!!V.capture:!!V;let wt=H(c);if(wt||(c[j]=wt=new de(c)),m=wt.add(p,m,y,Z,F),m.proxy)return m;if(y=At(),m.proxy=y,y.src=c,y.listener=m,c.addEventListener)M||(V=Z),V===void 0&&(V=!1),c.addEventListener(p.toString(),y,V);else if(c.attachEvent)c.attachEvent(N(p.toString()),y);else if(c.addListener&&c.removeListener)c.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return m}function At(){function c(m){return p.call(c.src,c.listener,m)}const p=z;return c}function A(c,p,m,y,V){if(Array.isArray(p))for(var F=0;F<p.length;F++)A(c,p[F],m,y,V);else y=a(y)?!!y.capture:!!y,m=tt(m),c&&c[_t]?(c=c.i,F=String(p).toString(),F in c.g&&(p=c.g[F],m=Jt(p,m,y,V),m>-1&&(U(p[m]),Array.prototype.splice.call(p,m,1),p.length==0&&(delete c.g[F],c.h--)))):c&&(c=H(c))&&(p=c.g[p.toString()],c=-1,p&&(c=Jt(p,m,y,V)),(m=c>-1?p[c]:null)&&k(m))}function k(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[_t])Ie(p.i,c);else{var m=c.type,y=c.proxy;p.removeEventListener?p.removeEventListener(m,y,c.capture):p.detachEvent?p.detachEvent(N(m),y):p.addListener&&p.removeListener&&p.removeListener(y),(m=H(p))?(Ie(m,c),m.h==0&&(m.src=null,p[j]=null)):U(c)}}}function N(c){return c in it?it[c]:it[c]="on"+c}function z(c,p){if(c.da)c=!0;else{p=new Tt(p,this);const m=c.listener,y=c.ha||c.src;c.fa&&k(c),c=m.call(y,p)}return c}function H(c){return c=c[j],c instanceof de?c:null}var B="__closure_events_fn_"+(Math.random()*1e9>>>0);function tt(c){return typeof c=="function"?c:(c[B]||(c[B]=function(p){return c.handleEvent(p)}),c[B])}function Q(){R.call(this),this.i=new de(this),this.M=this,this.G=null}d(Q,R),Q.prototype[_t]=!0,Q.prototype.removeEventListener=function(c,p,m,y){A(this,c,p,m,y)};function K(c,p){var m,y=c.G;if(y)for(m=[];y;y=y.G)m.push(y);if(c=c.M,y=p.type||p,typeof p=="string")p=new C(p,c);else if(p instanceof C)p.target=p.target||c;else{var V=p;p=new C(y,c),qe(p,V)}V=!0;let F,Z;if(m)for(Z=m.length-1;Z>=0;Z--)F=p.g=m[Z],V=G(F,y,!0,p)&&V;if(F=p.g=c,V=G(F,y,!0,p)&&V,V=G(F,y,!1,p)&&V,m)for(Z=0;Z<m.length;Z++)F=p.g=m[Z],V=G(F,y,!1,p)&&V}Q.prototype.N=function(){if(Q.Z.N.call(this),this.i){var c=this.i;for(const p in c.g){const m=c.g[p];for(let y=0;y<m.length;y++)U(m[y]);delete c.g[p],c.h--}}this.G=null},Q.prototype.J=function(c,p,m,y){return this.i.add(String(c),p,!1,m,y)},Q.prototype.K=function(c,p,m,y){return this.i.add(String(c),p,!0,m,y)};function G(c,p,m,y){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();let V=!0;for(let F=0;F<p.length;++F){const Z=p[F];if(Z&&!Z.da&&Z.capture==m){const wt=Z.listener,fe=Z.ha||Z.src;Z.fa&&Ie(c.i,Z),V=wt.call(fe,y)!==!1&&V}}return V&&!y.defaultPrevented}function dt(c,p){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=u(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(c,p||0)}function st(c){c.g=dt(()=>{c.g=null,c.i&&(c.i=!1,st(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class ct extends R{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:st(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ft(c){R.call(this),this.h=c,this.g={}}d(ft,R);var It=[];function Lt(c){J(c.g,function(p,m){this.g.hasOwnProperty(m)&&k(p)},c),c.g={}}ft.prototype.N=function(){ft.Z.N.call(this),Lt(this)},ft.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kt=o.JSON.stringify,Me=o.JSON.parse,Ne=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function rn(){}function on(){}var Tn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function nr(){C.call(this,"d")}d(nr,C);function Ae(){C.call(this,"c")}d(Ae,C);var we={},Kr=null;function bi(){return Kr=Kr||new Q}we.Ia="serverreachability";function _f(c){C.call(this,we.Ia,c)}d(_f,C);function Gr(c){const p=bi();K(p,new _f(p))}we.STAT_EVENT="statevent";function yf(c,p){C.call(this,we.STAT_EVENT,c),this.stat=p}d(yf,C);function Ke(c){const p=bi();K(p,new yf(p,c))}we.Ja="timingevent";function vf(c,p){C.call(this,we.Ja,c),this.size=p}d(vf,C);function Yr(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},p)}function Qr(){this.g=!0}Qr.prototype.ua=function(){this.g=!1};function NE(c,p,m,y,V,F){c.info(function(){if(c.g)if(F){var Z="",wt=F.split("&");for(let jt=0;jt<wt.length;jt++){var fe=wt[jt].split("=");if(fe.length>1){const Ee=fe[0];fe=fe[1];const On=Ee.split("_");Z=On.length>=2&&On[1]=="type"?Z+(Ee+"="+fe+"&"):Z+(Ee+"=redacted&")}}}else Z=null;else Z=F;return"XMLHTTP REQ ("+y+") [attempt "+V+"]: "+p+`
`+m+`
`+Z})}function VE(c,p,m,y,V,F,Z){c.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+V+"]: "+p+`
`+m+`
`+F+" "+Z})}function sr(c,p,m,y){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+FE(c,m)+(y?" "+y:"")})}function LE(c,p){c.info(function(){return"TIMEOUT: "+p})}Qr.prototype.info=function(){};function FE(c,p){if(!c.g)return p;if(!p)return null;try{const F=JSON.parse(p);if(F){for(c=0;c<F.length;c++)if(Array.isArray(F[c])){var m=F[c];if(!(m.length<2)){var y=m[1];if(Array.isArray(y)&&!(y.length<1)){var V=y[0];if(V!="noop"&&V!="stop"&&V!="close")for(let Z=1;Z<y.length;Z++)y[Z]=""}}}}return kt(F)}catch{return p}}var Pa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},bf={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},wf;function Zc(){}d(Zc,rn),Zc.prototype.g=function(){return new XMLHttpRequest},wf=new Zc;function Xr(c){return encodeURIComponent(String(c))}function UE(c){var p=1;c=c.split(":");const m=[];for(;p>0&&c.length;)m.push(c.shift()),p--;return c.length&&m.push(c.join(":")),m}function Ns(c,p,m,y){this.j=c,this.i=p,this.l=m,this.S=y||1,this.V=new ft(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ef}function Ef(){this.i=null,this.g="",this.h=!1}var Tf={},tu={};function eu(c,p,m){c.M=1,c.A=Da(Dn(p)),c.u=m,c.R=!0,If(c,null)}function If(c,p){c.F=Date.now(),ka(c),c.B=Dn(c.A);var m=c.B,y=c.S;Array.isArray(y)||(y=[String(y)]),Lf(m.i,"t",y),c.C=0,m=c.j.L,c.h=new Ef,c.g=ep(c.j,m?p:null,!c.u),c.P>0&&(c.O=new ct(u(c.Y,c,c.g),c.P)),p=c.V,m=c.g,y=c.ba;var V="readystatechange";Array.isArray(V)||(V&&(It[0]=V.toString()),V=It);for(let F=0;F<V.length;F++){const Z=et(m,V[F],y||p.handleEvent,!1,p.h||p);if(!Z)break;p.g[Z.key]=Z}p=c.J?be(c.J):{},c.u?(c.v||(c.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,p)):(c.v="GET",c.g.ea(c.B,c.v,null,p)),Gr(),NE(c.i,c.v,c.B,c.l,c.S,c.u)}Ns.prototype.ba=function(c){c=c.target;const p=this.O;p&&Fs(c)==3?p.j():this.Y(c)},Ns.prototype.Y=function(c){try{if(c==this.g)t:{const wt=Fs(this.g),fe=this.g.ya(),jt=this.g.ca();if(!(wt<3)&&(wt!=3||this.g&&(this.h.h||this.g.la()||Hf(this.g)))){this.K||wt!=4||fe==7||(fe==8||jt<=0?Gr(3):Gr(2)),nu(this);var p=this.g.ca();this.X=p;var m=BE(this);if(this.o=p==200,VE(this.i,this.v,this.B,this.l,this.S,wt,p),this.o){if(this.U&&!this.L){e:{if(this.g){var y,V=this.g;if((y=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(y)){var F=y;break e}}F=null}if(c=F)sr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,su(this,c);else{this.o=!1,this.m=3,Ke(12),wi(this),Jr(this);break t}}if(this.R){c=!0;let Ee;for(;!this.K&&this.C<m.length;)if(Ee=jE(this,m),Ee==tu){wt==4&&(this.m=4,Ke(14),c=!1),sr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ee==Tf){this.m=4,Ke(15),sr(this.i,this.l,m,"[Invalid Chunk]"),c=!1;break}else sr(this.i,this.l,Ee,null),su(this,Ee);if(Af(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||m.length!=0||this.h.h||(this.m=1,Ke(16),c=!1),this.o=this.o&&c,!c)sr(this.i,this.l,m,"[Invalid Chunked Response]"),wi(this),Jr(this);else if(m.length>0&&!this.W){this.W=!0;var Z=this.j;Z.g==this&&Z.aa&&!Z.P&&(Z.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),hu(Z),Z.P=!0,Ke(11))}}else sr(this.i,this.l,m,null),su(this,m);wt==4&&wi(this),this.o&&!this.K&&(wt==4?Xf(this.j,this):(this.o=!1,ka(this)))}else eT(this.g),p==400&&m.indexOf("Unknown SID")>0?(this.m=3,Ke(12)):(this.m=0,Ke(13)),wi(this),Jr(this)}}}catch{}finally{}};function BE(c){if(!Af(c))return c.g.la();const p=Hf(c.g);if(p==="")return"";let m="";const y=p.length,V=Fs(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return wi(c),Jr(c),"";c.h.i=new o.TextDecoder}for(let F=0;F<y;F++)c.h.h=!0,m+=c.h.i.decode(p[F],{stream:!(V&&F==y-1)});return p.length=0,c.h.g+=m,c.C=0,c.h.g}function Af(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function jE(c,p){var m=c.C,y=p.indexOf(`
`,m);return y==-1?tu:(m=Number(p.substring(m,y)),isNaN(m)?Tf:(y+=1,y+m>p.length?tu:(p=p.slice(y,y+m),c.C=y+m,p)))}Ns.prototype.cancel=function(){this.K=!0,wi(this)};function ka(c){c.T=Date.now()+c.H,Sf(c,c.H)}function Sf(c,p){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Yr(u(c.aa,c),p)}function nu(c){c.D&&(o.clearTimeout(c.D),c.D=null)}Ns.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(LE(this.i,this.B),this.M!=2&&(Gr(),Ke(17)),wi(this),this.m=2,Jr(this)):Sf(this,this.T-c)};function Jr(c){c.j.I==0||c.K||Xf(c.j,c)}function wi(c){nu(c);var p=c.O;p&&typeof p.dispose=="function"&&p.dispose(),c.O=null,Lt(c.V),c.g&&(p=c.g,c.g=null,p.abort(),p.dispose())}function su(c,p){try{var m=c.j;if(m.I!=0&&(m.g==c||iu(m.h,c))){if(!c.L&&iu(m.h,c)&&m.I==3){try{var y=m.Ba.g.parse(p)}catch{y=null}if(Array.isArray(y)&&y.length==3){var V=y;if(V[0]==0){t:if(!m.v){if(m.g)if(m.g.F+3e3<c.F)La(m),Na(m);else break t;uu(m),Ke(18)}}else m.xa=V[1],0<m.xa-m.K&&V[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=Yr(u(m.Va,m),6e3));xf(m.h)<=1&&m.ta&&(m.ta=void 0)}else Ti(m,11)}else if((c.L||m.g==c)&&La(m),!I(p))for(V=m.Ba.g.parse(p),p=0;p<V.length;p++){let jt=V[p];const Ee=jt[0];if(!(Ee<=m.K))if(m.K=Ee,jt=jt[1],m.I==2)if(jt[0]=="c"){m.M=jt[1],m.ba=jt[2];const On=jt[3];On!=null&&(m.ka=On,m.j.info("VER="+m.ka));const Ii=jt[4];Ii!=null&&(m.za=Ii,m.j.info("SVER="+m.za));const Us=jt[5];Us!=null&&typeof Us=="number"&&Us>0&&(y=1.5*Us,m.O=y,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;const Bs=c.g;if(Bs){const Ua=Bs.g?Bs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ua){var F=y.h;F.g||Ua.indexOf("spdy")==-1&&Ua.indexOf("quic")==-1&&Ua.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(ru(F,F.h),F.h=null))}if(y.G){const du=Bs.g?Bs.g.getResponseHeader("X-HTTP-Session-Id"):null;du&&(y.wa=du,qt(y.J,y.G,du))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-c.F,m.j.info("Handshake RTT: "+m.T+"ms")),y=m;var Z=c;if(y.na=tp(y,y.L?y.ba:null,y.W),Z.L){Pf(y.h,Z);var wt=Z,fe=y.O;fe&&(wt.H=fe),wt.D&&(nu(wt),ka(wt)),y.g=Z}else Yf(y);m.i.length>0&&Va(m)}else jt[0]!="stop"&&jt[0]!="close"||Ti(m,7);else m.I==3&&(jt[0]=="stop"||jt[0]=="close"?jt[0]=="stop"?Ti(m,7):cu(m):jt[0]!="noop"&&m.l&&m.l.qa(jt),m.A=0)}}Gr(4)}catch{}}var zE=class{constructor(c,p){this.g=c,this.map=p}};function Rf(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Cf(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function xf(c){return c.h?1:c.g?c.g.size:0}function iu(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function ru(c,p){c.g?c.g.add(p):c.h=p}function Pf(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Rf.prototype.cancel=function(){if(this.i=kf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function kf(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const m of c.g.values())p=p.concat(m.G);return p}return g(c.i)}var Df=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $E(c,p){if(c){c=c.split("&");for(let m=0;m<c.length;m++){const y=c[m].indexOf("=");let V,F=null;y>=0?(V=c[m].substring(0,y),F=c[m].substring(y+1)):V=c[m],p(V,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Vs(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;c instanceof Vs?(this.l=c.l,Zr(this,c.j),this.o=c.o,this.g=c.g,to(this,c.u),this.h=c.h,ou(this,Ff(c.i)),this.m=c.m):c&&(p=String(c).match(Df))?(this.l=!1,Zr(this,p[1]||"",!0),this.o=eo(p[2]||""),this.g=eo(p[3]||"",!0),to(this,p[4]),this.h=eo(p[5]||"",!0),ou(this,p[6]||"",!0),this.m=eo(p[7]||"")):(this.l=!1,this.i=new so(null,this.l))}Vs.prototype.toString=function(){const c=[];var p=this.j;p&&c.push(no(p,Of,!0),":");var m=this.g;return(m||p=="file")&&(c.push("//"),(p=this.o)&&c.push(no(p,Of,!0),"@"),c.push(Xr(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&c.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(no(m,m.charAt(0)=="/"?qE:WE,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",no(m,GE)),c.join("")},Vs.prototype.resolve=function(c){const p=Dn(this);let m=!!c.j;m?Zr(p,c.j):m=!!c.o,m?p.o=c.o:m=!!c.g,m?p.g=c.g:m=c.u!=null;var y=c.h;if(m)to(p,c.u);else if(m=!!c.h){if(y.charAt(0)!="/")if(this.g&&!this.h)y="/"+y;else{var V=p.h.lastIndexOf("/");V!=-1&&(y=p.h.slice(0,V+1)+y)}if(V=y,V==".."||V==".")y="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){y=V.lastIndexOf("/",0)==0,V=V.split("/");const F=[];for(let Z=0;Z<V.length;){const wt=V[Z++];wt=="."?y&&Z==V.length&&F.push(""):wt==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),y&&Z==V.length&&F.push("")):(F.push(wt),y=!0)}y=F.join("/")}else y=V}return m?p.h=y:m=c.i.toString()!=="",m?ou(p,Ff(c.i)):m=!!c.m,m&&(p.m=c.m),p};function Dn(c){return new Vs(c)}function Zr(c,p,m){c.j=m?eo(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function to(c,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);c.u=p}else c.u=null}function ou(c,p,m){p instanceof so?(c.i=p,YE(c.i,c.l)):(m||(p=no(p,KE)),c.i=new so(p,c.l))}function qt(c,p,m){c.i.set(p,m)}function Da(c){return qt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function eo(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function no(c,p,m){return typeof c=="string"?(c=encodeURI(c).replace(p,HE),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function HE(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Of=/[#\/\?@]/g,WE=/[#\?:]/g,qE=/[#\?]/g,KE=/[#\?@]/g,GE=/#/g;function so(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Ei(c){c.g||(c.g=new Map,c.h=0,c.i&&$E(c.i,function(p,m){c.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}e=so.prototype,e.add=function(c,p){Ei(this),this.i=null,c=ir(this,c);let m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(p),this.h+=1,this};function Mf(c,p){Ei(c),p=ir(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Nf(c,p){return Ei(c),p=ir(c,p),c.g.has(p)}e.forEach=function(c,p){Ei(this),this.g.forEach(function(m,y){m.forEach(function(V){c.call(p,V,y,this)},this)},this)};function Vf(c,p){Ei(c);let m=[];if(typeof p=="string")Nf(c,p)&&(m=m.concat(c.g.get(ir(c,p))));else for(c=Array.from(c.g.values()),p=0;p<c.length;p++)m=m.concat(c[p]);return m}e.set=function(c,p){return Ei(this),this.i=null,c=ir(this,c),Nf(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},e.get=function(c,p){return c?(c=Vf(this,c),c.length>0?String(c[0]):p):p};function Lf(c,p,m){Mf(c,p),m.length>0&&(c.i=null,c.g.set(ir(c,p),g(m)),c.h+=m.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(let y=0;y<p.length;y++){var m=p[y];const V=Xr(m);m=Vf(this,m);for(let F=0;F<m.length;F++){let Z=V;m[F]!==""&&(Z+="="+Xr(m[F])),c.push(Z)}}return this.i=c.join("&")};function Ff(c){const p=new so;return p.i=c.i,c.g&&(p.g=new Map(c.g),p.h=c.h),p}function ir(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function YE(c,p){p&&!c.j&&(Ei(c),c.i=null,c.g.forEach(function(m,y){const V=y.toLowerCase();y!=V&&(Mf(this,y),Lf(this,V,m))},c)),c.j=p}function QE(c,p){const m=new Qr;if(o.Image){const y=new Image;y.onload=h(Ls,m,"TestLoadImage: loaded",!0,p,y),y.onerror=h(Ls,m,"TestLoadImage: error",!1,p,y),y.onabort=h(Ls,m,"TestLoadImage: abort",!1,p,y),y.ontimeout=h(Ls,m,"TestLoadImage: timeout",!1,p,y),o.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=c}else p(!1)}function XE(c,p){const m=new Qr,y=new AbortController,V=setTimeout(()=>{y.abort(),Ls(m,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:y.signal}).then(F=>{clearTimeout(V),F.ok?Ls(m,"TestPingServer: ok",!0,p):Ls(m,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(V),Ls(m,"TestPingServer: error",!1,p)})}function Ls(c,p,m,y,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),y(m)}catch{}}function JE(){this.g=new Ne}function au(c){this.i=c.Sb||null,this.h=c.ab||!1}d(au,rn),au.prototype.g=function(){return new Oa(this.i,this.h)};function Oa(c,p){Q.call(this),this.H=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Oa,Q),e=Oa.prototype,e.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=p,this.readyState=1,ro(this)},e.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(p.body=c),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,io(this)),this.readyState=0},e.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ro(this)),this.g&&(this.readyState=3,ro(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Uf(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Uf(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}e.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?io(this):ro(this),this.readyState==3&&Uf(this)}},e.Oa=function(c){this.g&&(this.response=this.responseText=c,io(this))},e.Na=function(c){this.g&&(this.response=c,io(this))},e.ga=function(){this.g&&io(this)};function io(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ro(c)}e.setRequestHeader=function(c,p){this.A.append(c,p)},e.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var m=p.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=p.next();return c.join(`\r
`)};function ro(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Oa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Bf(c){let p="";return J(c,function(m,y){p+=y,p+=":",p+=m,p+=`\r
`}),p}function lu(c,p,m){t:{for(y in m){var y=!1;break t}y=!0}y||(m=Bf(m),typeof c=="string"?m!=null&&Xr(m):qt(c,p,m))}function ee(c){Q.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(ee,Q);var ZE=/^https?$/i,tT=["POST","PUT"];e=ee.prototype,e.Fa=function(c){this.H=c},e.ea=function(c,p,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():wf.g(),this.g.onreadystatechange=f(u(this.Ca,this));try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(F){jf(this,F);return}if(c=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var V in y)m.set(V,y[V]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const F of y.keys())m.set(F,y.get(F));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(m.keys()).find(F=>F.toLowerCase()=="content-type"),V=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(tT,p,void 0)>=0)||y||V||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,Z]of m)this.g.setRequestHeader(F,Z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(F){jf(this,F)}};function jf(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.o=5,zf(c),Ma(c)}function zf(c){c.A||(c.A=!0,K(c,"complete"),K(c,"error"))}e.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,K(this,"complete"),K(this,"abort"),Ma(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ma(this,!0)),ee.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?$f(this):this.Xa())},e.Xa=function(){$f(this)};function $f(c){if(c.h&&typeof r<"u"){if(c.v&&Fs(c)==4)setTimeout(c.Ca.bind(c),0);else if(K(c,"readystatechange"),Fs(c)==4){c.h=!1;try{const F=c.ca();t:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var m;if(!(m=p)){var y;if(y=F===0){let Z=String(c.D).match(Df)[1]||null;!Z&&o.self&&o.self.location&&(Z=o.self.location.protocol.slice(0,-1)),y=!ZE.test(Z?Z.toLowerCase():"")}m=y}if(m)K(c,"complete"),K(c,"success");else{c.o=6;try{var V=Fs(c)>2?c.g.statusText:""}catch{V=""}c.l=V+" ["+c.ca()+"]",zf(c)}}finally{Ma(c)}}}}function Ma(c,p){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const m=c.g;c.g=null,p||K(c,"ready");try{m.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function Fs(c){return c.g?c.g.readyState:0}e.ca=function(){try{return Fs(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.La=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),Me(p)}};function Hf(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function eT(c){const p={};c=(c.g&&Fs(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<c.length;y++){if(I(c[y]))continue;var m=UE(c[y]);const V=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const F=p[V]||[];p[V]=F,F.push(m)}Wt(p,function(y){return y.join(", ")})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function oo(c,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||p}function Wf(c){this.za=0,this.i=[],this.j=new Qr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=oo("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=oo("baseRetryDelayMs",5e3,c),this.Za=oo("retryDelaySeedMs",1e4,c),this.Ta=oo("forwardChannelMaxRetries",2,c),this.va=oo("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Rf(c&&c.concurrentRequestLimit),this.Ba=new JE,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=Wf.prototype,e.ka=8,e.I=1,e.connect=function(c,p,m,y){Ke(0),this.W=c,this.H=p||{},m&&y!==void 0&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.J=tp(this,null,this.W),Va(this)};function cu(c){if(qf(c),c.I==3){var p=c.V++,m=Dn(c.J);if(qt(m,"SID",c.M),qt(m,"RID",p),qt(m,"TYPE","terminate"),ao(c,m),p=new Ns(c,c.j,p),p.M=2,p.A=Da(Dn(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=p.A,m=!0),m||(p.g=ep(p.j,null),p.g.ea(p.A)),p.F=Date.now(),ka(p)}Zf(c)}function Na(c){c.g&&(hu(c),c.g.cancel(),c.g=null)}function qf(c){Na(c),c.v&&(o.clearTimeout(c.v),c.v=null),La(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function Va(c){if(!Cf(c.h)&&!c.m){c.m=!0;var p=c.Ea;L||_(),W||(L(),W=!0),T.add(p,c),c.D=0}}function nT(c,p){return xf(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=p.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Yr(u(c.Ea,c,p),Jf(c,c.D)),c.D++,!0)}e.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const V=new Ns(this,this.j,c);let F=this.o;if(this.U&&(F?(F=be(F),qe(F,this.U)):F=this.U),this.u!==null||this.R||(V.J=F,F=null),this.S)t:{for(var p=0,m=0;m<this.i.length;m++){e:{var y=this.i[m];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break e}y=void 0}if(y===void 0)break;if(p+=y,p>4096){p=m;break t}if(p===4096||m===this.i.length-1){p=m+1;break t}}p=1e3}else p=1e3;p=Gf(this,V,p),m=Dn(this.J),qt(m,"RID",c),qt(m,"CVER",22),this.G&&qt(m,"X-HTTP-Session-Id",this.G),ao(this,m),F&&(this.R?p="headers="+Xr(Bf(F))+"&"+p:this.u&&lu(m,this.u,F)),ru(this.h,V),this.Ra&&qt(m,"TYPE","init"),this.S?(qt(m,"$req",p),qt(m,"SID","null"),V.U=!0,eu(V,m,null)):eu(V,m,p),this.I=2}}else this.I==3&&(c?Kf(this,c):this.i.length==0||Cf(this.h)||Kf(this))};function Kf(c,p){var m;p?m=p.l:m=c.V++;const y=Dn(c.J);qt(y,"SID",c.M),qt(y,"RID",m),qt(y,"AID",c.K),ao(c,y),c.u&&c.o&&lu(y,c.u,c.o),m=new Ns(c,c.j,m,c.D+1),c.u===null&&(m.J=c.o),p&&(c.i=p.G.concat(c.i)),p=Gf(c,m,1e3),m.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),ru(c.h,m),eu(m,y,p)}function ao(c,p){c.H&&J(c.H,function(m,y){qt(p,y,m)}),c.l&&J({},function(m,y){qt(p,y,m)})}function Gf(c,p,m){m=Math.min(c.i.length,m);const y=c.l?u(c.l.Ka,c.l,c):null;t:{var V=c.i;let wt=-1;for(;;){const fe=["count="+m];wt==-1?m>0?(wt=V[0].g,fe.push("ofs="+wt)):wt=0:fe.push("ofs="+wt);let jt=!0;for(let Ee=0;Ee<m;Ee++){var F=V[Ee].g;const On=V[Ee].map;if(F-=wt,F<0)wt=Math.max(0,V[Ee].g-100),jt=!1;else try{F="req"+F+"_"||"";try{var Z=On instanceof Map?On:Object.entries(On);for(const[Ii,Us]of Z){let Bs=Us;a(Us)&&(Bs=kt(Us)),fe.push(F+Ii+"="+encodeURIComponent(Bs))}}catch(Ii){throw fe.push(F+"type="+encodeURIComponent("_badmap")),Ii}}catch{y&&y(On)}}if(jt){Z=fe.join("&");break t}}Z=void 0}return c=c.i.splice(0,m),p.G=c,Z}function Yf(c){if(!c.g&&!c.v){c.Y=1;var p=c.Da;L||_(),W||(L(),W=!0),T.add(p,c),c.A=0}}function uu(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Yr(u(c.Da,c),Jf(c,c.A)),c.A++,!0)}e.Da=function(){if(this.v=null,Qf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Yr(u(this.Wa,this),c)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ke(10),Na(this),Qf(this))};function hu(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function Qf(c){c.g=new Ns(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var p=Dn(c.na);qt(p,"RID","rpc"),qt(p,"SID",c.M),qt(p,"AID",c.K),qt(p,"CI",c.F?"0":"1"),!c.F&&c.ia&&qt(p,"TO",c.ia),qt(p,"TYPE","xmlhttp"),ao(c,p),c.u&&c.o&&lu(p,c.u,c.o),c.O&&(c.g.H=c.O);var m=c.g;c=c.ba,m.M=1,m.A=Da(Dn(p)),m.u=null,m.R=!0,If(m,c)}e.Va=function(){this.C!=null&&(this.C=null,Na(this),uu(this),Ke(19))};function La(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function Xf(c,p){var m=null;if(c.g==p){La(c),hu(c),c.g=null;var y=2}else if(iu(c.h,p))m=p.G,Pf(c.h,p),y=1;else return;if(c.I!=0){if(p.o)if(y==1){m=p.u?p.u.length:0,p=Date.now()-p.F;var V=c.D;y=bi(),K(y,new vf(y,m)),Va(c)}else Yf(c);else if(V=p.m,V==3||V==0&&p.X>0||!(y==1&&nT(c,p)||y==2&&uu(c)))switch(m&&m.length>0&&(p=c.h,p.i=p.i.concat(m)),V){case 1:Ti(c,5);break;case 4:Ti(c,10);break;case 3:Ti(c,6);break;default:Ti(c,2)}}}function Jf(c,p){let m=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(m*=2),m*p}function Ti(c,p){if(c.j.info("Error code "+p),p==2){var m=u(c.bb,c),y=c.Ua;const V=!y;y=new Vs(y||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Zr(y,"https"),Da(y),V?QE(y.toString(),m):XE(y.toString(),m)}else Ke(2);c.I=0,c.l&&c.l.pa(p),Zf(c),qf(c)}e.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ke(2)):(this.j.info("Failed to ping google.com"),Ke(1))};function Zf(c){if(c.I=0,c.ja=[],c.l){const p=kf(c.h);(p.length!=0||c.i.length!=0)&&(b(c.ja,p),b(c.ja,c.i),c.h.i.length=0,g(c.i),c.i.length=0),c.l.oa()}}function tp(c,p,m){var y=m instanceof Vs?Dn(m):new Vs(m);if(y.g!="")p&&(y.g=p+"."+y.g),to(y,y.u);else{var V=o.location;y=V.protocol,p=p?p+"."+V.hostname:V.hostname,V=+V.port;const F=new Vs(null);y&&Zr(F,y),p&&(F.g=p),V&&to(F,V),m&&(F.h=m),y=F}return m=c.G,p=c.wa,m&&p&&qt(y,m,p),qt(y,"VER",c.ka),ao(c,y),y}function ep(c,p,m){if(p&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Aa&&!c.ma?new ee(new au({ab:m})):new ee(c.ma),p.Fa(c.L),p}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function np(){}e=np.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function Fa(){}Fa.prototype.g=function(c,p){return new an(c,p)};function an(c,p){Q.call(this),this.g=new Wf(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(c?c["X-WebChannel-Client-Profile"]=p.sa:c={"X-WebChannel-Client-Profile":p.sa}),this.g.U=c,(c=p&&p.Qb)&&!I(c)&&(this.g.u=c),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!I(p)&&(this.g.G=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new rr(this)}d(an,Q),an.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){cu(this.g)},an.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.v&&(m={},m.__data__=kt(c),c=m);p.i.push(new zE(p.Ya++,c)),p.I==3&&Va(p)},an.prototype.N=function(){this.g.l=null,delete this.j,cu(this.g),delete this.g,an.Z.N.call(this)};function sp(c){nr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const m in p){c=m;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}d(sp,nr);function ip(){Ae.call(this),this.status=1}d(ip,Ae);function rr(c){this.g=c}d(rr,np),rr.prototype.ra=function(){K(this.g,"a")},rr.prototype.qa=function(c){K(this.g,new sp(c))},rr.prototype.pa=function(c){K(this.g,new ip)},rr.prototype.oa=function(){K(this.g,"b")},Fa.prototype.createWebChannel=Fa.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,Dv=function(){return new Fa},kv=function(){return bi()},Pv=we,yh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Pa.NO_ERROR=0,Pa.TIMEOUT=8,Pa.HTTP_ERROR=6,fl=Pa,bf.COMPLETE="complete",xv=bf,on.EventType=Tn,Tn.OPEN="a",Tn.CLOSE="b",Tn.ERROR="c",Tn.MESSAGE="d",Q.prototype.listen=Q.prototype.J,bo=on,ee.prototype.listenOnce=ee.prototype.K,ee.prototype.getLastError=ee.prototype.Ha,ee.prototype.getLastErrorCode=ee.prototype.ya,ee.prototype.getStatus=ee.prototype.ca,ee.prototype.getResponseJson=ee.prototype.La,ee.prototype.getResponseText=ee.prototype.la,ee.prototype.send=ee.prototype.ea,ee.prototype.setWithCredentials=ee.prototype.Fa,Cv=ee}).apply(typeof Ha<"u"?Ha:typeof self<"u"?self:typeof window<"u"?window:{});const fg="@firebase/firestore",pg="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Fe.UNAUTHENTICATED=new Fe(null),Fe.GOOGLE_CREDENTIALS=new Fe("google-credentials-uid"),Fe.FIRST_PARTY=new Fe("first-party-uid"),Fe.MOCK_USER=new Fe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Br="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new fd("@firebase/firestore");function dr(){return $i.logLevel}function rt(e,...t){if($i.logLevel<=St.DEBUG){const n=t.map(md);$i.debug(`Firestore (${Br}): ${e}`,...n)}}function Rs(e,...t){if($i.logLevel<=St.ERROR){const n=t.map(md);$i.error(`Firestore (${Br}): ${e}`,...n)}}function kr(e,...t){if($i.logLevel<=St.WARN){const n=t.map(md);$i.warn(`Firestore (${Br}): ${e}`,...n)}}function md(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,Ov(e,s,n)}function Ov(e,t,n){let s=`FIRESTORE (${Br}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Rs(s),new Error(s)}function Vt(e,t,n,s){let i="Unexpected state";typeof n=="string"?i=n:s=n,e||Ov(t,i,s)}function vt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class at extends ss{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class CR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Fe.UNAUTHENTICATED)))}shutdown(){}}class xR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class PR{constructor(t){this.t=t,this.currentUser=Fe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Vt(this.o===void 0,42304);let s=this.i;const i=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let r=new bs;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new bs,t.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const l=r;t.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},a=l=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new bs)}}),0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Vt(typeof s.accessToken=="string",31837,{l:s}),new Mv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Vt(t===null||typeof t=="string",2055,{h:t}),new Fe(t)}}class kR{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Fe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class DR{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new kR(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Fe.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class gg{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OR{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,un(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Vt(this.o===void 0,3512);const s=r=>{r.error!=null&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,rt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable((()=>s(r)))};const i=r=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((r=>i(r))),setTimeout((()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?i(r):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new gg(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Vt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new gg(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=MR(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<n&&(s+=t.charAt(i[r]%62))}return s}}function Rt(e,t){return e<t?-1:e>t?1:0}function vh(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const i=e.charAt(s),r=t.charAt(s);if(i!==r)return Ou(i)===Ou(r)?Rt(i,r):Ou(i)?1:-1}return Rt(e.length,t.length)}const NR=55296,VR=57343;function Ou(e){const t=e.charCodeAt(0);return t>=NR&&t<=VR}function Dr(e,t,n){return e.length===t.length&&e.every(((s,i)=>n(s,t[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="__name__";class Un{constructor(t,n,s){n===void 0?n=0:n>t.length&&mt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&mt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return Un.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Un?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let i=0;i<s;i++){const r=Un.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return Rt(t.length,n.length)}static compareSegments(t,n){const s=Un.isNumericId(t),i=Un.isNumericId(n);return s&&!i?-1:!s&&i?1:s&&i?Un.extractNumericId(t).compare(Un.extractNumericId(n)):vh(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ri.fromString(t.substring(4,t.length-2))}}class Gt extends Un{construct(t,n,s){return new Gt(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new at(q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((i=>i.length>0)))}return new Gt(n)}static emptyPath(){return new Gt([])}}const LR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ke extends Un{construct(t,n,s){return new ke(t,n,s)}static isValidIdentifier(t){return LR.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ke.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===mg}static keyField(){return new ke([mg])}static fromServerFormat(t){const n=[];let s="",i=0;const r=()=>{if(s.length===0)throw new at(q.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new at(q.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new at(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(s+=a,i++):(r(),i++)}if(r(),o)throw new at(q.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ke(n)}static emptyPath(){return new ke([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(t){this.path=t}static fromPath(t){return new ht(Gt.fromString(t))}static fromName(t){return new ht(Gt.fromString(t).popFirst(5))}static empty(){return new ht(Gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Gt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Gt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ht(new Gt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(e,t,n){if(!n)throw new at(q.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function FR(e,t,n,s){if(t===!0&&s===!0)throw new at(q.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function _g(e){if(!ht.isDocumentKey(e))throw new at(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function yg(e){if(ht.isDocumentKey(e))throw new at(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Vv(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function yd(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":mt(12329,{type:typeof e})}function Hi(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new at(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yd(e);throw new at(q.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(e,t){const n={typeString:e};return t&&(n.value=t),n}function va(e,t){if(!Vv(e))throw new at(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const i=t[s].typeString,r="value"in t[s]?{value:t[s].value}:void 0;if(!(s in e)){n=`JSON missing required field: '${s}'`;break}const o=e[s];if(i&&typeof o!==i){n=`JSON field '${s}' must be a ${i}.`;break}if(r!==void 0&&o!==r.value){n=`Expected '${s}' field to equal '${r.value}'`;break}}if(n)throw new at(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg=-62135596800,bg=1e6;class Yt{static now(){return Yt.fromMillis(Date.now())}static fromDate(t){return Yt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*bg);return new Yt(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new at(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new at(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<vg)throw new at(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new at(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bg}_compareTo(t){return this.seconds===t.seconds?Rt(this.nanoseconds,t.nanoseconds):Rt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(va(t,Yt._jsonSchema))return new Yt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-vg;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Yt._jsonSchemaVersion="firestore/timestamp/1.0",Yt._jsonSchema={type:ce("string",Yt._jsonSchemaVersion),seconds:ce("number"),nanoseconds:ce("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{static fromTimestamp(t){return new yt(t)}static min(){return new yt(new Yt(0,0))}static max(){return new yt(new Yt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=-1;function UR(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,i=yt.fromTimestamp(s===1e9?new Yt(n+1,0):new Yt(n,s));return new di(i,ht.empty(),t)}function BR(e){return new di(e.readTime,e.key,ta)}class di{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new di(yt.min(),ht.empty(),ta)}static max(){return new di(yt.max(),ht.empty(),ta)}}function jR(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=ht.comparator(e.documentKey,t.documentKey),n!==0?n:Rt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $R{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jr(e){if(e.code!==q.FAILED_PRECONDITION||e.message!==zR)throw e;rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&mt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new $(((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(s,i)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):$.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):$.reject(n)}static resolve(t){return new $(((n,s)=>{n(t)}))}static reject(t){return new $(((n,s)=>{s(t)}))}static waitFor(t){return new $(((n,s)=>{let i=0,r=0,o=!1;t.forEach((a=>{++i,a.next((()=>{++r,o&&r===i&&n()}),(l=>s(l)))})),o=!0,r===i&&n()}))}static or(t){let n=$.resolve(!1);for(const s of t)n=n.next((i=>i?$.resolve(i):s()));return n}static forEach(t,n){const s=[];return t.forEach(((i,r)=>{s.push(n.call(this,i,r))})),this.waitFor(s)}static mapArray(t,n){return new $(((s,i)=>{const r=t.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const u=l;n(t[u]).next((h=>{o[u]=h,++a,a===r&&s(o)}),(h=>i(h)))}}))}static doWhile(t,n){return new $(((s,i)=>{const r=()=>{t()===!0?n().next((()=>{r()}),i):s()};r()}))}}function HR(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zr(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Pc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=-1;function kc(e){return e==null}function Fl(e){return e===0&&1/e==-1/0}function WR(e){return typeof e=="number"&&Number.isInteger(e)&&!Fl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="";function qR(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=wg(t)),t=KR(e.get(n),t);return wg(t)}function KR(e,t){let n=t;const s=e.length;for(let i=0;i<s;i++){const r=e.charAt(i);switch(r){case"\0":n+="";break;case Lv:n+="";break;default:n+=r}}return n}function wg(e){return e+Lv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ji(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Fv(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(t,n){this.comparator=t,this.root=n||Se.EMPTY}insert(t,n){return new te(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Se.BLACK,null,null))}remove(t){return new te(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Se.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(t,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Wa(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Wa(this.root,t,this.comparator,!1)}getReverseIterator(){return new Wa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Wa(this.root,t,this.comparator,!0)}}class Wa{constructor(t,n,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?s(t.key,n):1,n&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Se{constructor(t,n,s,i,r){this.key=t,this.value=n,this.color=s??Se.RED,this.left=i??Se.EMPTY,this.right=r??Se.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,i,r){return new Se(t??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let i=this;const r=s(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,n,s),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Se.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Se.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Se.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Se.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw mt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw mt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw mt(27949);return t+(this.isRed()?0:1)}}Se.EMPTY=null,Se.RED=!0,Se.BLACK=!1;Se.EMPTY=new class{constructor(){this.size=0}get key(){throw mt(57766)}get value(){throw mt(16141)}get color(){throw mt(16727)}get left(){throw mt(29726)}get right(){throw mt(36894)}copy(t,n,s,i,r){return this}insert(t,n,s){return new Se(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(t){this.comparator=t,this.data=new te(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Tg(this.data.getIterator())}getIteratorFrom(t){return new Tg(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof ve)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new ve(this.comparator);return n.data=t,n}}class Tg{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(t){this.fields=t,t.sort(ke.comparator)}static empty(){return new In([])}unionWith(t){let n=new ve(ke.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new In(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Dr(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Uv("Invalid base64 string: "+r):r}})(t);return new Oe(n)}static fromUint8Array(t){const n=(function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r})(t);return new Oe(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Rt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Oe.EMPTY_BYTE_STRING=new Oe("");const GR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fi(e){if(Vt(!!e,39018),typeof e=="string"){let t=0;const n=GR.exec(e);if(Vt(!!n,46558,{timestamp:e}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:ie(e.seconds),nanos:ie(e.nanos)}}function ie(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function pi(e){return typeof e=="string"?Oe.fromBase64String(e):Oe.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="server_timestamp",jv="__type__",zv="__previous_value__",$v="__local_write_time__";function bd(e){return(e?.mapValue?.fields||{})[jv]?.stringValue===Bv}function Dc(e){const t=e.mapValue.fields[zv];return bd(t)?Dc(t):t}function ea(e){const t=fi(e.mapValue.fields[$v].timestampValue);return new Yt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(t,n,s,i,r,o,a,l,u,h){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Ul="(default)";class na{constructor(t,n){this.projectId=t,this.database=n||Ul}static empty(){return new na("","")}get isDefaultDatabase(){return this.database===Ul}isEqual(t){return t instanceof na&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="__type__",QR="__max__",qa={mapValue:{}},Wv="__vector__",Bl="value";function gi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?bd(e)?4:JR(e)?9007199254740991:XR(e)?10:11:mt(28295,{value:e})}function ts(e,t){if(e===t)return!0;const n=gi(e);if(n!==gi(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ea(e).isEqual(ea(t));case 3:return(function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=fi(i.timestampValue),a=fi(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(i,r){return pi(i.bytesValue).isEqual(pi(r.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(i,r){return ie(i.geoPointValue.latitude)===ie(r.geoPointValue.latitude)&&ie(i.geoPointValue.longitude)===ie(r.geoPointValue.longitude)})(e,t);case 2:return(function(i,r){if("integerValue"in i&&"integerValue"in r)return ie(i.integerValue)===ie(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=ie(i.doubleValue),a=ie(r.doubleValue);return o===a?Fl(o)===Fl(a):isNaN(o)&&isNaN(a)}return!1})(e,t);case 9:return Dr(e.arrayValue.values||[],t.arrayValue.values||[],ts);case 10:case 11:return(function(i,r){const o=i.mapValue.fields||{},a=r.mapValue.fields||{};if(Eg(o)!==Eg(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ts(o[l],a[l])))return!1;return!0})(e,t);default:return mt(52216,{left:e})}}function sa(e,t){return(e.values||[]).find((n=>ts(n,t)))!==void 0}function Or(e,t){if(e===t)return 0;const n=gi(e),s=gi(t);if(n!==s)return Rt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Rt(e.booleanValue,t.booleanValue);case 2:return(function(r,o){const a=ie(r.integerValue||r.doubleValue),l=ie(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(e,t);case 3:return Ig(e.timestampValue,t.timestampValue);case 4:return Ig(ea(e),ea(t));case 5:return vh(e.stringValue,t.stringValue);case 6:return(function(r,o){const a=pi(r),l=pi(o);return a.compareTo(l)})(e.bytesValue,t.bytesValue);case 7:return(function(r,o){const a=r.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Rt(a[u],l[u]);if(h!==0)return h}return Rt(a.length,l.length)})(e.referenceValue,t.referenceValue);case 8:return(function(r,o){const a=Rt(ie(r.latitude),ie(o.latitude));return a!==0?a:Rt(ie(r.longitude),ie(o.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return Ag(e.arrayValue,t.arrayValue);case 10:return(function(r,o){const a=r.fields||{},l=o.fields||{},u=a[Bl]?.arrayValue,h=l[Bl]?.arrayValue,d=Rt(u?.values?.length||0,h?.values?.length||0);return d!==0?d:Ag(u,h)})(e.mapValue,t.mapValue);case 11:return(function(r,o){if(r===qa.mapValue&&o===qa.mapValue)return 0;if(r===qa.mapValue)return 1;if(o===qa.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=vh(l[d],h[d]);if(f!==0)return f;const g=Or(a[l[d]],u[h[d]]);if(g!==0)return g}return Rt(l.length,h.length)})(e.mapValue,t.mapValue);default:throw mt(23264,{he:n})}}function Ig(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Rt(e,t);const n=fi(e),s=fi(t),i=Rt(n.seconds,s.seconds);return i!==0?i:Rt(n.nanos,s.nanos)}function Ag(e,t){const n=e.values||[],s=t.values||[];for(let i=0;i<n.length&&i<s.length;++i){const r=Or(n[i],s[i]);if(r)return r}return Rt(n.length,s.length)}function Mr(e){return bh(e)}function bh(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const s=fi(n);return`time(${s.seconds},${s.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return pi(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return ht.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let s="[",i=!0;for(const r of n.values||[])i?i=!1:s+=",",s+=bh(r);return s+"]"})(e.arrayValue):"mapValue"in e?(function(n){const s=Object.keys(n.fields||{}).sort();let i="{",r=!0;for(const o of s)r?r=!1:i+=",",i+=`${o}:${bh(n.fields[o])}`;return i+"}"})(e.mapValue):mt(61005,{value:e})}function pl(e){switch(gi(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Dc(e);return t?16+pl(t):16;case 5:return 2*e.stringValue.length;case 6:return pi(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((i,r)=>i+pl(r)),0)})(e.arrayValue);case 10:case 11:return(function(s){let i=0;return Ji(s.fields,((r,o)=>{i+=r.length+pl(o)})),i})(e.mapValue);default:throw mt(13486,{value:e})}}function wh(e){return!!e&&"integerValue"in e}function wd(e){return!!e&&"arrayValue"in e}function Sg(e){return!!e&&"nullValue"in e}function Rg(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function gl(e){return!!e&&"mapValue"in e}function XR(e){return(e?.mapValue?.fields||{})[Hv]?.stringValue===Wv}function Fo(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Ji(e.mapValue.fields,((n,s)=>t.mapValue.fields[n]=Fo(s))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Fo(e.arrayValue.values[n]);return t}return{...e}}function JR(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===QR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(t){this.value=t}static empty(){return new mn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!gl(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Fo(n)}setAll(t){let n=ke.emptyPath(),s={},i=[];t.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,i),s={},i=[],n=a.popLast()}o?s[a.lastSegment()]=Fo(o):i.push(a.lastSegment())}));const r=this.getFieldsMap(n);this.applyChanges(r,s,i)}delete(t){const n=this.field(t.popLast());gl(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ts(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let i=n.mapValue.fields[t.get(s)];gl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,s){Ji(n,((i,r)=>t[i]=r));for(const i of s)delete t[i]}clone(){return new mn(Fo(this.value))}}function qv(e){const t=[];return Ji(e.fields,((n,s)=>{const i=new ke([n]);if(gl(s)){const r=qv(s.mapValue).fields;if(r.length===0)t.push(i);else for(const o of r)t.push(i.child(o))}else t.push(i)})),new In(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t,n,s,i,r,o,a){this.key=t,this.documentType=n,this.version=s,this.readTime=i,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Be(t,0,yt.min(),yt.min(),yt.min(),mn.empty(),0)}static newFoundDocument(t,n,s,i){return new Be(t,1,n,yt.min(),s,i,0)}static newNoDocument(t,n){return new Be(t,2,n,yt.min(),yt.min(),mn.empty(),0)}static newUnknownDocument(t,n){return new Be(t,3,n,yt.min(),yt.min(),mn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Be&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Be(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(t,n){this.position=t,this.inclusive=n}}function Cg(e,t,n){let s=0;for(let i=0;i<e.position.length;i++){const r=t[i],o=e.position[i];if(r.field.isKeyField()?s=ht.comparator(ht.fromName(o.referenceValue),n.key):s=Or(o,n.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function xg(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ts(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(t,n="asc"){this.field=t,this.dir=n}}function ZR(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{}class ge extends Kv{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new eC(t,n,s):n==="array-contains"?new iC(t,s):n==="in"?new rC(t,s):n==="not-in"?new oC(t,s):n==="array-contains-any"?new aC(t,s):new ge(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new nC(t,s):new sC(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Or(n,this.value)):n!==null&&gi(this.value)===gi(n)&&this.matchesComparison(Or(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return mt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class es extends Kv{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new es(t,n)}matches(t){return Gv(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Gv(e){return e.op==="and"}function Yv(e){return tC(e)&&Gv(e)}function tC(e){for(const t of e.filters)if(t instanceof es)return!1;return!0}function Eh(e){if(e instanceof ge)return e.field.canonicalString()+e.op.toString()+Mr(e.value);if(Yv(e))return e.filters.map((t=>Eh(t))).join(",");{const t=e.filters.map((n=>Eh(n))).join(",");return`${e.op}(${t})`}}function Qv(e,t){return e instanceof ge?(function(s,i){return i instanceof ge&&s.op===i.op&&s.field.isEqual(i.field)&&ts(s.value,i.value)})(e,t):e instanceof es?(function(s,i){return i instanceof es&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce(((r,o,a)=>r&&Qv(o,i.filters[a])),!0):!1})(e,t):void mt(19439)}function Xv(e){return e instanceof ge?(function(n){return`${n.field.canonicalString()} ${n.op} ${Mr(n.value)}`})(e):e instanceof es?(function(n){return n.op.toString()+" {"+n.getFilters().map(Xv).join(" ,")+"}"})(e):"Filter"}class eC extends ge{constructor(t,n,s){super(t,n,s),this.key=ht.fromName(s.referenceValue)}matches(t){const n=ht.comparator(t.key,this.key);return this.matchesComparison(n)}}class nC extends ge{constructor(t,n){super(t,"in",n),this.keys=Jv("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class sC extends ge{constructor(t,n){super(t,"not-in",n),this.keys=Jv("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function Jv(e,t){return(t.arrayValue?.values||[]).map((n=>ht.fromName(n.referenceValue)))}class iC extends ge{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return wd(n)&&sa(n.arrayValue,this.value)}}class rC extends ge{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&sa(this.value.arrayValue,n)}}class oC extends ge{constructor(t,n){super(t,"not-in",n)}matches(t){if(sa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!sa(this.value.arrayValue,n)}}class aC extends ge{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!wd(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>sa(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(t,n=null,s=[],i=[],r=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=o,this.endAt=a,this.Te=null}}function Pg(e,t=null,n=[],s=[],i=null,r=null,o=null){return new lC(e,t,n,s,i,r,o)}function Ed(e){const t=vt(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>Eh(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(r){return r.field.canonicalString()+r.dir})(s))).join(","),kc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>Mr(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>Mr(s))).join(",")),t.Te=n}return t.Te}function Td(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ZR(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Qv(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!xg(e.startAt,t.startAt)&&xg(e.endAt,t.endAt)}function Th(e){return ht.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(t,n=null,s=[],i=[],r=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function cC(e,t,n,s,i,r,o,a){return new Oc(e,t,n,s,i,r,o,a)}function Id(e){return new Oc(e)}function kg(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function uC(e){return e.collectionGroup!==null}function Uo(e){const t=vt(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),n.add(r.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ve(ke.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(t).forEach((r=>{n.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new zl(r,s))})),n.has(ke.keyField().canonicalString())||t.Ie.push(new zl(ke.keyField(),s))}return t.Ie}function Wn(e){const t=vt(e);return t.Ee||(t.Ee=hC(t,Uo(e))),t.Ee}function hC(e,t){if(e.limitType==="F")return Pg(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((i=>{const r=i.dir==="desc"?"asc":"desc";return new zl(i.field,r)}));const n=e.endAt?new jl(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new jl(e.startAt.position,e.startAt.inclusive):null;return Pg(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}}function Ih(e,t,n){return new Oc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Mc(e,t){return Td(Wn(e),Wn(t))&&e.limitType===t.limitType}function Zv(e){return`${Ed(Wn(e))}|lt:${e.limitType}`}function fr(e){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((i=>Xv(i))).join(", ")}]`),kc(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((i=>Mr(i))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((i=>Mr(i))).join(",")),`Target(${s})`})(Wn(e))}; limitType=${e.limitType})`}function Nc(e,t){return t.isFoundDocument()&&(function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):ht.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)})(e,t)&&(function(s,i){for(const r of Uo(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0})(e,t)&&(function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0})(e,t)&&(function(s,i){return!(s.startAt&&!(function(o,a,l){const u=Cg(o,a,l);return o.inclusive?u<=0:u<0})(s.startAt,Uo(s),i)||s.endAt&&!(function(o,a,l){const u=Cg(o,a,l);return o.inclusive?u>=0:u>0})(s.endAt,Uo(s),i))})(e,t)}function dC(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function tb(e){return(t,n)=>{let s=!1;for(const i of Uo(e)){const r=fC(i,t,n);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function fC(e,t,n){const s=e.field.isKeyField()?ht.comparator(t.key,n.key):(function(r,o,a){const l=o.data.field(r),u=a.data.field(r);return l!==null&&u!==null?Or(l,u):mt(42886)})(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return mt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),i=this.inner[s];if(i===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Ji(this.inner,((n,s)=>{for(const[i,r]of s)t(i,r)}))}isEmpty(){return Fv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=new te(ht.comparator);function Cs(){return pC}const eb=new te(ht.comparator);function wo(...e){let t=eb;for(const n of e)t=t.insert(n.key,n);return t}function nb(e){let t=eb;return e.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function Mi(){return Bo()}function sb(){return Bo()}function Bo(){return new Zi((e=>e.toString()),((e,t)=>e.isEqual(t)))}const gC=new te(ht.comparator),mC=new ve(ht.comparator);function Ct(...e){let t=mC;for(const n of e)t=t.add(n);return t}const _C=new ve(Rt);function yC(){return _C}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fl(t)?"-0":t}}function ib(e){return{integerValue:""+e}}function vC(e,t){return WR(t)?ib(t):Ad(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(){this._=void 0}}function bC(e,t,n){return e instanceof ia?(function(i,r){const o={fields:{[jv]:{stringValue:Bv},[$v]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&bd(r)&&(r=Dc(r)),r&&(o.fields[zv]=r),{mapValue:o}})(n,t):e instanceof ra?ob(e,t):e instanceof oa?ab(e,t):(function(i,r){const o=rb(i,r),a=Dg(o)+Dg(i.Ae);return wh(o)&&wh(i.Ae)?ib(a):Ad(i.serializer,a)})(e,t)}function wC(e,t,n){return e instanceof ra?ob(e,t):e instanceof oa?ab(e,t):n}function rb(e,t){return e instanceof $l?(function(s){return wh(s)||(function(r){return!!r&&"doubleValue"in r})(s)})(t)?t:{integerValue:0}:null}class ia extends Vc{}class ra extends Vc{constructor(t){super(),this.elements=t}}function ob(e,t){const n=lb(t);for(const s of e.elements)n.some((i=>ts(i,s)))||n.push(s);return{arrayValue:{values:n}}}class oa extends Vc{constructor(t){super(),this.elements=t}}function ab(e,t){let n=lb(t);for(const s of e.elements)n=n.filter((i=>!ts(i,s)));return{arrayValue:{values:n}}}class $l extends Vc{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function Dg(e){return ie(e.integerValue||e.doubleValue)}function lb(e){return wd(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(t,n){this.field=t,this.transform=n}}function TC(e,t){return e.field.isEqual(t.field)&&(function(s,i){return s instanceof ra&&i instanceof ra||s instanceof oa&&i instanceof oa?Dr(s.elements,i.elements,ts):s instanceof $l&&i instanceof $l?ts(s.Ae,i.Ae):s instanceof ia&&i instanceof ia})(e.transform,t.transform)}class IC{constructor(t,n){this.version=t,this.transformResults=n}}class ws{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ws}static exists(t){return new ws(void 0,t)}static updateTime(t){return new ws(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ml(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Lc{}function cb(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new hb(e.key,ws.none()):new ba(e.key,e.data,ws.none());{const n=e.data,s=mn.empty();let i=new ve(ke.comparator);for(let r of t.fields)if(!i.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?s.delete(r):s.set(r,o),i=i.add(r)}return new tr(e.key,s,new In(i.toArray()),ws.none())}}function AC(e,t,n){e instanceof ba?(function(i,r,o){const a=i.value.clone(),l=Mg(i.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(e,t,n):e instanceof tr?(function(i,r,o){if(!ml(i.precondition,r))return void r.convertToUnknownDocument(o.version);const a=Mg(i.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(ub(i)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(e,t,n):(function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()})(0,t,n)}function jo(e,t,n,s){return e instanceof ba?(function(r,o,a,l){if(!ml(r.precondition,o))return a;const u=r.value.clone(),h=Ng(r.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(e,t,n,s):e instanceof tr?(function(r,o,a,l){if(!ml(r.precondition,o))return a;const u=Ng(r.fieldTransforms,l,o),h=o.data;return h.setAll(ub(r)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map((d=>d.field)))})(e,t,n,s):(function(r,o,a){return ml(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(e,t,n)}function SC(e,t){let n=null;for(const s of e.fieldTransforms){const i=t.data.field(s.field),r=rb(s.transform,i||null);r!=null&&(n===null&&(n=mn.empty()),n.set(s.field,r))}return n||null}function Og(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&Dr(s,i,((r,o)=>TC(r,o)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ba extends Lc{constructor(t,n,s,i=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class tr extends Lc{constructor(t,n,s,i,r=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function ub(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}})),t}function Mg(e,t,n){const s=new Map;Vt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const r=e[i],o=r.transform,a=t.data.field(r.field);s.set(r.field,wC(o,a,n[i]))}return s}function Ng(e,t,n){const s=new Map;for(const i of e){const r=i.transform,o=n.data.field(i.field);s.set(i.field,bC(r,o,t))}return s}class hb extends Lc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RC extends Lc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(t,n,s,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(t.key)&&AC(r,t,s[i])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=jo(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=jo(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=sb();return this.mutations.forEach((i=>{const r=t.get(i.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(i.key)?null:a;const l=cb(o,a);l!==null&&s.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(yt.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Ct())}isEqual(t){return this.batchId===t.batchId&&Dr(this.mutations,t.mutations,((n,s)=>Og(n,s)))&&Dr(this.baseMutations,t.baseMutations,((n,s)=>Og(n,s)))}}class Sd{constructor(t,n,s,i){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(t,n,s){Vt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let i=(function(){return gC})();const r=t.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,s[o].version);return new Sd(t,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le,Pt;function kC(e){switch(e){case q.OK:return mt(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return mt(15467,{code:e})}}function db(e){if(e===void 0)return Rs("GRPC error has no .code"),q.UNKNOWN;switch(e){case le.OK:return q.OK;case le.CANCELLED:return q.CANCELLED;case le.UNKNOWN:return q.UNKNOWN;case le.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case le.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case le.INTERNAL:return q.INTERNAL;case le.UNAVAILABLE:return q.UNAVAILABLE;case le.UNAUTHENTICATED:return q.UNAUTHENTICATED;case le.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case le.NOT_FOUND:return q.NOT_FOUND;case le.ALREADY_EXISTS:return q.ALREADY_EXISTS;case le.PERMISSION_DENIED:return q.PERMISSION_DENIED;case le.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case le.ABORTED:return q.ABORTED;case le.OUT_OF_RANGE:return q.OUT_OF_RANGE;case le.UNIMPLEMENTED:return q.UNIMPLEMENTED;case le.DATA_LOSS:return q.DATA_LOSS;default:return mt(39323,{code:e})}}(Pt=le||(le={}))[Pt.OK=0]="OK",Pt[Pt.CANCELLED=1]="CANCELLED",Pt[Pt.UNKNOWN=2]="UNKNOWN",Pt[Pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pt[Pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pt[Pt.NOT_FOUND=5]="NOT_FOUND",Pt[Pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pt[Pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pt[Pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pt[Pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pt[Pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pt[Pt.ABORTED=10]="ABORTED",Pt[Pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pt[Pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pt[Pt.INTERNAL=13]="INTERNAL",Pt[Pt.UNAVAILABLE=14]="UNAVAILABLE",Pt[Pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=new ri([4294967295,4294967295],0);function Vg(e){const t=DC().encode(e),n=new Rv;return n.update(t),new Uint8Array(n.digest())}function Lg(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new ri([n,s],0),new ri([i,r],0)]}class Rd{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Eo(`Invalid padding: ${n}`);if(s<0)throw new Eo(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Eo(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new Eo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=ri.fromNumber(this.ge)}ye(t,n,s){let i=t.add(n.multiply(ri.fromNumber(s)));return i.compare(OC)===1&&(i=new ri([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=Vg(t),[s,i]=Lg(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(s,i,r);if(!this.we(o))return!1}return!0}static create(t,n,s){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new Rd(r,i,n);return s.forEach((a=>o.insert(a))),o}insert(t){if(this.ge===0)return;const n=Vg(t),[s,i]=Lg(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(s,i,r);this.Se(o)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class Eo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(t,n,s,i,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const i=new Map;return i.set(t,wa.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new Fc(yt.min(),i,new te(Rt),Cs(),Ct())}}class wa{constructor(t,n,s,i,r){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new wa(s,n,Ct(),Ct(),Ct())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(t,n,s,i){this.be=t,this.removedTargetIds=n,this.key=s,this.De=i}}class fb{constructor(t,n){this.targetId=t,this.Ce=n}}class pb{constructor(t,n,s=Oe.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=i}}class Fg{constructor(){this.ve=0,this.Fe=Ug(),this.Me=Oe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ct(),n=Ct(),s=Ct();return this.Fe.forEach(((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:mt(38017,{changeType:r})}})),new wa(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=Ug()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Vt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class MC{constructor(t){this.Ge=t,this.ze=new Map,this.je=Cs(),this.Je=Ka(),this.He=Ka(),this.Ye=new te(Rt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:mt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,i)=>{this.rt(i)&&n(i)}))}st(t){const n=t.targetId,s=t.Ce.count,i=this.ot(n);if(i){const r=i.target;if(Th(r))if(s===0){const o=new ht(r.path);this.et(n,o,Be.newNoDocument(o,yt.min()))}else Vt(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const a=this.ut(t),l=a?this.ct(a,t,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=n;let o,a;try{o=pi(s).toUint8Array()}catch(l){if(l instanceof Uv)return kr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Rd(o,i,r)}catch(l){return kr(l instanceof Eo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let i=0;return s.forEach((r=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;t.mightContain(a)||(this.et(n,r,null),i++)})),i}Tt(t){const n=new Map;this.ze.forEach(((r,o)=>{const a=this.ot(o);if(a){if(r.current&&Th(a.target)){const l=new ht(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Be.newNoDocument(l,t))}r.Be&&(n.set(o,r.ke()),r.qe())}}));let s=Ct();this.He.forEach(((r,o)=>{let a=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(s=s.add(r))})),this.je.forEach(((r,o)=>o.setReadTime(t)));const i=new Fc(t,n,this.Ye,this.je,s);return this.je=Cs(),this.Je=Ka(),this.He=Ka(),this.Ye=new te(Rt),i}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const i=this.nt(t);this.Et(t,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Fg,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new ve(Rt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new ve(Rt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||rt("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Fg),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Ka(){return new te(ht.comparator)}function Ug(){return new te(ht.comparator)}const NC={asc:"ASCENDING",desc:"DESCENDING"},VC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LC={and:"AND",or:"OR"};class FC{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Ah(e,t){return e.useProto3Json||kc(t)?t:{value:t}}function Hl(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function gb(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function UC(e,t){return Hl(e,t.toTimestamp())}function qn(e){return Vt(!!e,49232),yt.fromTimestamp((function(n){const s=fi(n);return new Yt(s.seconds,s.nanos)})(e))}function Cd(e,t){return Sh(e,t).canonicalString()}function Sh(e,t){const n=(function(i){return new Gt(["projects",i.projectId,"databases",i.database])})(e).child("documents");return t===void 0?n:n.child(t)}function mb(e){const t=Gt.fromString(e);return Vt(wb(t),10190,{key:t.toString()}),t}function Rh(e,t){return Cd(e.databaseId,t.path)}function Mu(e,t){const n=mb(t);if(n.get(1)!==e.databaseId.projectId)throw new at(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new at(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ht(yb(n))}function _b(e,t){return Cd(e.databaseId,t)}function BC(e){const t=mb(e);return t.length===4?Gt.emptyPath():yb(t)}function Ch(e){return new Gt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function yb(e){return Vt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function Bg(e,t,n){return{name:Rh(e,t),fields:n.value.mapValue.fields}}function jC(e,t){let n;if("targetChange"in t){t.targetChange;const s=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:mt(39313,{state:u})})(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],r=(function(u,h){return u.useProto3Json?(Vt(h===void 0||typeof h=="string",58123),Oe.fromBase64String(h||"")):(Vt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Oe.fromUint8Array(h||new Uint8Array))})(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&(function(u){const h=u.code===void 0?q.UNKNOWN:db(u.code);return new at(h,u.message||"")})(o);n=new pb(s,i,r,a||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const i=Mu(e,s.document.name),r=qn(s.document.updateTime),o=s.document.createTime?qn(s.document.createTime):yt.min(),a=new mn({mapValue:{fields:s.document.fields}}),l=Be.newFoundDocument(i,r,o,a),u=s.targetIds||[],h=s.removedTargetIds||[];n=new _l(u,h,l.key,l)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const i=Mu(e,s.document),r=s.readTime?qn(s.readTime):yt.min(),o=Be.newNoDocument(i,r),a=s.removedTargetIds||[];n=new _l([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const i=Mu(e,s.document),r=s.removedTargetIds||[];n=new _l([],r,i,null)}else{if(!("filter"in t))return mt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,o=new PC(i,r),a=s.targetId;n=new fb(a,o)}}return n}function zC(e,t){let n;if(t instanceof ba)n={update:Bg(e,t.key,t.value)};else if(t instanceof hb)n={delete:Rh(e,t.key)};else if(t instanceof tr)n={update:Bg(e,t.key,t.data),updateMask:XC(t.fieldMask)};else{if(!(t instanceof RC))return mt(16599,{Vt:t.type});n={verify:Rh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(r,o){const a=o.transform;if(a instanceof ia)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ra)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof oa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof $l)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw mt(20930,{transform:o.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(i,r){return r.updateTime!==void 0?{updateTime:UC(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:mt(27497)})(e,t.precondition)),n}function $C(e,t){return e&&e.length>0?(Vt(t!==void 0,14353),e.map((n=>(function(i,r){let o=i.updateTime?qn(i.updateTime):qn(r);return o.isEqual(yt.min())&&(o=qn(r)),new IC(o,i.transformResults||[])})(n,t)))):[]}function HC(e,t){return{documents:[_b(e,t.path)]}}function WC(e,t){const n={structuredQuery:{}},s=t.path;let i;t.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=_b(e,i);const r=(function(u){if(u.length!==0)return bb(es.create(u,"and"))})(t.filters);r&&(n.structuredQuery.where=r);const o=(function(u){if(u.length!==0)return u.map((h=>(function(f){return{field:pr(f.field),direction:GC(f.dir)}})(h)))})(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ah(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(t.endAt)),{ft:n,parent:i}}function qC(e){let t=BC(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){Vt(s===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:t=t.child(h.collectionId)}let r=[];n.where&&(r=(function(d){const f=vb(d);return f instanceof es&&Yv(f)?f.getFilters():[f]})(n.where));let o=[];n.orderBy&&(o=(function(d){return d.map((f=>(function(b){return new zl(gr(b.field),(function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(f)))})(n.orderBy));let a=null;n.limit&&(a=(function(d){let f;return f=typeof d=="object"?d.value:d,kc(f)?null:f})(n.limit));let l=null;n.startAt&&(l=(function(d){const f=!!d.before,g=d.values||[];return new jl(g,f)})(n.startAt));let u=null;return n.endAt&&(u=(function(d){const f=!d.before,g=d.values||[];return new jl(g,f)})(n.endAt)),cC(t,i,o,r,a,"F",l,u)}function KC(e,t){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mt(28987,{purpose:i})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function vb(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=gr(n.unaryFilter.field);return ge.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=gr(n.unaryFilter.field);return ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=gr(n.unaryFilter.field);return ge.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=gr(n.unaryFilter.field);return ge.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return mt(61313);default:return mt(60726)}})(e):e.fieldFilter!==void 0?(function(n){return ge.create(gr(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return mt(58110);default:return mt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return es.create(n.compositeFilter.filters.map((s=>vb(s))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return mt(1026)}})(n.compositeFilter.op))})(e):mt(30097,{filter:e})}function GC(e){return NC[e]}function YC(e){return VC[e]}function QC(e){return LC[e]}function pr(e){return{fieldPath:e.canonicalString()}}function gr(e){return ke.fromServerFormat(e.fieldPath)}function bb(e){return e instanceof ge?(function(n){if(n.op==="=="){if(Rg(n.value))return{unaryFilter:{field:pr(n.field),op:"IS_NAN"}};if(Sg(n.value))return{unaryFilter:{field:pr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Rg(n.value))return{unaryFilter:{field:pr(n.field),op:"IS_NOT_NAN"}};if(Sg(n.value))return{unaryFilter:{field:pr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pr(n.field),op:YC(n.op),value:n.value}}})(e):e instanceof es?(function(n){const s=n.getFilters().map((i=>bb(i)));return s.length===1?s[0]:{compositeFilter:{op:QC(n.op),filters:s}}})(e):mt(54877,{filter:e})}function XC(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function wb(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(t,n,s,i,r=yt.min(),o=yt.min(),a=Oe.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new Qs(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(t){this.yt=t}}function ZC(e){const t=qC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Ih(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.Cn=new ex}addToCollectionParentIndex(t,n){return this.Cn.add(n),$.resolve()}getCollectionParents(t,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return $.resolve()}deleteFieldIndex(t,n){return $.resolve()}deleteAllFieldIndexes(t){return $.resolve()}createTargetIndexes(t,n){return $.resolve()}getDocumentsMatchingTarget(t,n){return $.resolve(null)}getIndexType(t,n){return $.resolve(0)}getFieldIndexes(t,n){return $.resolve([])}getNextCollectionGroupToUpdate(t){return $.resolve(null)}getMinOffset(t,n){return $.resolve(di.min())}getMinOffsetFromCollectionGroup(t,n){return $.resolve(di.min())}updateCollectionGroup(t,n,s){return $.resolve()}updateIndexEntries(t,n){return $.resolve()}}class ex{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n]||new ve(Gt.comparator),r=!i.has(s);return this.index[n]=i.add(s),r}has(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(t){return(this.index[t]||new ve(Gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Eb=41943040;class Je{static withCacheSize(t){return new Je(t,Je.DEFAULT_COLLECTION_PERCENTILE,Je.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Je.DEFAULT_COLLECTION_PERCENTILE=10,Je.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Je.DEFAULT=new Je(Eb,Je.DEFAULT_COLLECTION_PERCENTILE,Je.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Je.DISABLED=new Je(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Nr(0)}static cr(){return new Nr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg="LruGarbageCollector",nx=1048576;function $g([e,t],[n,s]){const i=Rt(e,n);return i===0?Rt(t,s):i}class sx{constructor(t){this.Ir=t,this.buffer=new ve($g),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();$g(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ix{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){rt(zg,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){zr(n)?rt(zg,"Ignoring IndexedDB error during garbage collection: ",n):await jr(n)}await this.Vr(3e5)}))}}class rx{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return $.resolve(Pc.ce);const s=new sx(n);return this.mr.forEachTarget(t,(i=>s.Ar(i.sequenceNumber))).next((()=>this.mr.pr(t,(i=>s.Ar(i))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(rt("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(jg)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jg):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,i,r,o,a,l,u;const h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(t,i)))).next((d=>(s=d,a=Date.now(),this.removeTargets(t,s,n)))).next((d=>(r=d,l=Date.now(),this.removeOrphanedDocuments(t,s)))).next((d=>(u=Date.now(),dr()<=St.DEBUG&&rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${r} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:d}))))}}function ox(e,t){return new rx(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(){this.changes=new Zi((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Be.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?$.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(t,n,s,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((i=>(s=i,this.remoteDocumentCache.getEntry(t,n)))).next((i=>(s!==null&&jo(s.mutation,i,In.empty(),Yt.now()),i)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,Ct()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=Ct()){const i=Mi();return this.populateOverlays(t,i,n).next((()=>this.computeViews(t,n,i,s).next((r=>{let o=wo();return r.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(t,n){const s=Mi();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,Ct())))}populateOverlays(t,n,s){const i=[];return s.forEach((r=>{n.has(r)||i.push(r)})),this.documentOverlayCache.getOverlays(t,i).next((r=>{r.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(t,n,s,i){let r=Cs();const o=Bo(),a=(function(){return Bo()})();return n.forEach(((l,u)=>{const h=s.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof tr)?r=r.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),jo(h.mutation,u,h.mutation.getFieldMask(),Yt.now())):o.set(u.key,In.empty())})),this.recalculateAndSaveOverlays(t,r).next((l=>(l.forEach(((u,h)=>o.set(u,h))),n.forEach(((u,h)=>a.set(u,new lx(h,o.get(u)??null)))),a)))}recalculateAndSaveOverlays(t,n){const s=Bo();let i=new te(((o,a)=>o-a)),r=Ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((o=>{for(const a of o)a.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let h=s.get(l)||In.empty();h=a.applyToLocalView(u,h),s.set(l,h);const d=(i.get(a.batchId)||Ct()).add(l);i=i.insert(a.batchId,d)}))})).next((()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=sb();h.forEach((f=>{if(!r.has(f)){const g=cb(n.get(f),s.get(f));g!==null&&d.set(f,g),r=r.add(f)}})),o.push(this.documentOverlayCache.saveOverlays(t,u,d))}return $.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,i){return(function(o){return ht.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):uC(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,i):this.getDocumentsMatchingCollectionQuery(t,n,s,i)}getNextDocuments(t,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,i).next((r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,i-r.size):$.resolve(Mi());let a=ta,l=r;return o.next((u=>$.forEach(u,((h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),r.get(h)?$.resolve():this.remoteDocumentCache.getEntry(t,h).next((f=>{l=l.insert(h,f)}))))).next((()=>this.populateOverlays(t,u,r))).next((()=>this.computeViews(t,l,u,Ct()))).next((h=>({batchId:a,changes:nb(h)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ht(n)).next((s=>{let i=wo();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,i){const r=n.collectionGroup;let o=wo();return this.indexManager.getCollectionParents(t,r).next((a=>$.forEach(a,(l=>{const u=(function(d,f){return new Oc(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(n,l.child(r));return this.getDocumentsMatchingCollectionQuery(t,u,s,i).next((h=>{h.forEach(((d,f)=>{o=o.insert(d,f)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(t,n,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,r,i)))).next((o=>{r.forEach(((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Be.newInvalidDocument(h)))}));let a=wo();return o.forEach(((l,u)=>{const h=r.get(l);h!==void 0&&jo(h.mutation,u,In.empty(),Yt.now()),Nc(n,u)&&(a=a.insert(l,u))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:qn(i.createTime)}})(n)),$.resolve()}getNamedQuery(t,n){return $.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:ZC(i.bundledQuery),readTime:qn(i.readTime)}})(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(){this.overlays=new te(ht.comparator),this.qr=new Map}getOverlay(t,n){return $.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Mi();return $.forEach(n,(i=>this.getOverlay(t,i).next((r=>{r!==null&&s.set(i,r)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((i,r)=>{this.St(t,n,r)})),$.resolve()}removeOverlaysForBatchId(t,n,s){const i=this.qr.get(s);return i!==void 0&&(i.forEach((r=>this.overlays=this.overlays.remove(r))),this.qr.delete(s)),$.resolve()}getOverlaysForCollection(t,n,s){const i=Mi(),r=n.length+1,o=new ht(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===r&&l.largestBatchId>s&&i.set(l.getKey(),l)}return $.resolve(i)}getOverlaysForCollectionGroup(t,n,s,i){let r=new te(((u,h)=>u-h));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=r.get(u.largestBatchId);h===null&&(h=Mi(),r=r.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Mi(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,h)=>a.set(u,h))),!(a.size()>=i)););return $.resolve(a)}St(t,n,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(s.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new xC(n,s));let r=this.qr.get(n);r===void 0&&(r=Ct(),this.qr.set(n,r)),this.qr.set(n,r.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(){this.sessionToken=Oe.EMPTY_BYTE_STRING}getSessionToken(t){return $.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(){this.Qr=new ve(Te.$r),this.Ur=new ve(Te.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new Te(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new Te(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new ht(new Gt([])),s=new Te(n,t),i=new Te(n,t+1),r=[];return this.Ur.forEachInRange([s,i],(o=>{this.Gr(o),r.push(o.key)})),r}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new ht(new Gt([])),s=new Te(n,t),i=new Te(n,t+1);let r=Ct();return this.Ur.forEachInRange([s,i],(o=>{r=r.add(o.key)})),r}containsKey(t){const n=new Te(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Te{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return ht.comparator(t.key,n.key)||Rt(t.Yr,n.Yr)}static Kr(t,n){return Rt(t.Yr,n.Yr)||ht.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ve(Te.$r)}checkEmpty(t){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,i){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new CC(r,n,s,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new Te(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return $.resolve(o)}lookupMutationBatch(t,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,i=this.ei(s),r=i<0?0:i;return $.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?vd:this.tr-1)}getAllMutationBatches(t){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Te(n,0),i=new Te(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([s,i],(o=>{const a=this.Xr(o.Yr);r.push(a)})),$.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new ve(Rt);return n.forEach((i=>{const r=new Te(i,0),o=new Te(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,o],(a=>{s=s.add(a.Yr)}))})),$.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,i=s.length+1;let r=s;ht.isDocumentKey(r)||(r=r.child(""));const o=new Te(new ht(r),0);let a=new ve(Rt);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)}),o),$.resolve(this.ti(a))}ti(t){const n=[];return t.forEach((s=>{const i=this.Xr(s);i!==null&&n.push(i)})),n}removeMutationBatch(t,n){Vt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return $.forEach(n.mutations,(i=>{const r=new Te(i.key,n.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new Te(n,0),i=this.Zr.firstAfterOrEqual(s);return $.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,$.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(t){this.ri=t,this.docs=(function(){return new te(ht.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,i=this.docs.get(s),r=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return $.resolve(s?s.document.mutableCopy():Be.newInvalidDocument(n))}getEntries(t,n){let s=Cs();return n.forEach((i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():Be.newInvalidDocument(i))})),$.resolve(s)}getDocumentsMatchingQuery(t,n,s,i){let r=Cs();const o=n.path,a=new ht(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||jR(BR(h),s)<=0||(i.has(h.key)||Nc(n,h))&&(r=r.insert(h.key,h.mutableCopy()))}return $.resolve(r)}getAllFromCollectionGroup(t,n,s,i){mt(9500)}ii(t,n){return $.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new gx(this)}getSize(t){return $.resolve(this.size)}}class gx extends ax{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(t,i)):this.Nr.removeEntry(s)})),$.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(t){this.persistence=t,this.si=new Zi((n=>Ed(n)),Td),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.oi=0,this._i=new xd,this.targetCount=0,this.ai=Nr.ur()}forEachTarget(t,n){return this.si.forEach(((s,i)=>n(i))),$.resolve()}getLastRemoteSnapshotVersion(t){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return $.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),$.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Nr(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(t,n){return this.Pr(n),$.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(t,n,s){let i=0;const r=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.si.delete(o),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),$.waitFor(r).next((()=>i))}getTargetCount(t){return $.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return $.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),$.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach((o=>{r.push(i.markPotentiallyOrphaned(t,o))})),$.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return $.resolve(s)}containsKey(t,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(t,n){this.ui={},this.overlays={},this.ci=new Pc(0),this.li=!1,this.li=!0,this.hi=new dx,this.referenceDelegate=t(this),this.Pi=new mx(this),this.indexManager=new tx,this.remoteDocumentCache=(function(i){return new px(i)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new JC(n),this.Ii=new ux(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new hx,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new fx(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){rt("MemoryPersistence","Starting transaction:",t);const i=new _x(this.ci.next());return this.referenceDelegate.Ei(),s(i).next((r=>this.referenceDelegate.di(i).next((()=>r)))).toPromise().then((r=>(i.raiseOnCommittedEvent(),r)))}Ai(t,n){return $.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class _x extends $R{constructor(t){super(),this.currentSequenceNumber=t}}class Pd{constructor(t){this.persistence=t,this.Ri=new xd,this.Vi=null}static mi(t){return new Pd(t)}get fi(){if(this.Vi)return this.Vi;throw mt(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),$.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),$.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((i=>{i.forEach((r=>this.fi.add(r.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,(s=>{const i=ht.fromPath(s);return this.gi(t,i).next((r=>{r||n.removeEntry(i,yt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Wl{constructor(t,n){this.persistence=t,this.pi=new Zi((s=>qR(s.path)),((s,i)=>s.isEqual(i))),this.garbageCollector=ox(this,n)}static mi(t,n){return new Wl(t,n)}Ei(){}di(t){return $.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((i=>s+i))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return $.forEach(this.pi,((s,i)=>this.br(t,s,i).next((r=>r?$.resolve():n(i)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.ii(t,(o=>this.br(t,o,n).next((a=>{a||(s++,r.removeEntry(o,yt.min()))})))).next((()=>r.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),$.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),$.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),$.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),$.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=pl(t.data.value)),n}br(t,n,s){return $.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.pi.get(n);return $.resolve(i!==void 0&&i>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(t,n,s,i){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=i}static As(t,n){let s=Ct(),i=Ct();for(const r of n.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new kd(t,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return uS()?8:HR(We())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,i){const r={result:null};return this.ys(t,n).next((o=>{r.result=o})).next((()=>{if(!r.result)return this.ws(t,n,i,s).next((o=>{r.result=o}))})).next((()=>{if(r.result)return;const o=new yx;return this.Ss(t,n,o).next((a=>{if(r.result=a,this.Vs)return this.bs(t,n,o,a.size)}))})).next((()=>r.result))}bs(t,n,s,i){return s.documentReadCount<this.fs?(dr()<=St.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",fr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(dr()<=St.DEBUG&&rt("QueryEngine","Query:",fr(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.gs*i?(dr()<=St.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",fr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Wn(n))):$.resolve())}ys(t,n){if(kg(n))return $.resolve(null);let s=Wn(n);return this.indexManager.getIndexType(t,s).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Ih(n,null,"F"),s=Wn(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((r=>{const o=Ct(...r);return this.ps.getDocuments(t,o).next((a=>this.indexManager.getMinOffset(t,s).next((l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(t,Ih(n,null,"F")):this.vs(t,u,n,l)}))))})))))}ws(t,n,s,i){return kg(n)||i.isEqual(yt.min())?$.resolve(null):this.ps.getDocuments(t,s).next((r=>{const o=this.Ds(n,r);return this.Cs(n,o,s,i)?$.resolve(null):(dr()<=St.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fr(n)),this.vs(t,o,n,UR(i,ta)).next((a=>a)))}))}Ds(t,n){let s=new ve(tb(t));return n.forEach(((i,r)=>{Nc(t,r)&&(s=s.add(r))})),s}Cs(t,n,s,i){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ss(t,n,s){return dr()<=St.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",fr(n)),this.ps.getDocumentsMatchingQuery(t,n,di.min(),s)}vs(t,n,s,i){return this.ps.getDocumentsMatchingQuery(t,s,i).next((r=>(n.forEach((o=>{r=r.insert(o.key,o)})),r)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="LocalStore",bx=3e8;class wx{constructor(t,n,s,i){this.persistence=t,this.Fs=n,this.serializer=i,this.Ms=new te(Rt),this.xs=new Zi((r=>Ed(r)),Td),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new cx(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function Ex(e,t,n,s){return new wx(e,t,n,s)}async function Ib(e,t){const n=vt(e);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next((r=>(i=r,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((r=>{const o=[],a=[];let l=Ct();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of r){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(s,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:a})))}))}))}function Tx(e,t){const n=vt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const i=t.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,u,h){const d=u.batch,f=d.keys();let g=$.resolve();return f.forEach((b=>{g=g.next((()=>h.getEntry(l,b))).next((w=>{const v=u.docVersions.get(b);Vt(v!==null,48541),w.version.compareTo(v)<0&&(d.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),h.addEntry(w)))}))})),g.next((()=>a.mutationQueue.removeMutationBatch(l,d)))})(n,s,t,r).next((()=>r.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(a){let l=Ct();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l})(t)))).next((()=>n.localDocuments.getDocuments(s,i)))}))}function Ab(e){const t=vt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function Ix(e,t){const n=vt(e),s=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(r=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];t.targetChanges.forEach(((h,d)=>{const f=i.get(d);if(!f)return;a.push(n.Pi.removeMatchingKeys(r,h.removedDocuments,d).next((()=>n.Pi.addMatchingKeys(r,h.addedDocuments,d))));let g=f.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(d)!==null?g=g.withResumeToken(Oe.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,s)),i=i.insert(d,g),(function(w,v,S){return w.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=bx?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0})(f,g,h)&&a.push(n.Pi.updateTargetData(r,g))}));let l=Cs(),u=Ct();if(t.documentUpdates.forEach((h=>{t.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,h))})),a.push(Ax(r,o,t.documentUpdates).next((h=>{l=h.ks,u=h.qs}))),!s.isEqual(yt.min())){const h=n.Pi.getLastRemoteSnapshotVersion(r).next((d=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,s)));a.push(h)}return $.waitFor(a).next((()=>o.apply(r))).next((()=>n.localDocuments.getLocalViewOfDocuments(r,l,u))).next((()=>l))})).then((r=>(n.Ms=i,r)))}function Ax(e,t,n){let s=Ct(),i=Ct();return n.forEach((r=>s=s.add(r))),t.getEntries(e,s).next((r=>{let o=Cs();return n.forEach(((a,l)=>{const u=r.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(yt.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):rt(Dd,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:i}}))}function Sx(e,t){const n=vt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=vd),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function Rx(e,t){const n=vt(e);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let i;return n.Pi.getTargetData(s,t).next((r=>r?(i=r,$.resolve(i)):n.Pi.allocateTargetId(s).next((o=>(i=new Qs(t,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,i).next((()=>i)))))))})).then((s=>{const i=n.Ms.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function xh(e,t,n){const s=vt(e),i=s.Ms.get(t),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,(o=>s.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!zr(o))throw o;rt(Dd,`Failed to update sequence numbers for target ${t}: ${o}`)}s.Ms=s.Ms.remove(t),s.xs.delete(i.target)}function Hg(e,t,n){const s=vt(e);let i=yt.min(),r=Ct();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,h){const d=vt(l),f=d.xs.get(h);return f!==void 0?$.resolve(d.Ms.get(f)):d.Pi.getTargetData(u,h)})(s,o,Wn(t)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{r=l}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,t,n?i:yt.min(),n?r:Ct()))).next((a=>(Cx(s,dC(t),a),{documents:a,Qs:r})))))}function Cx(e,t,n){let s=e.Os.get(t)||yt.min();n.forEach(((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)})),e.Os.set(t,s)}class Wg{constructor(){this.activeTargetIds=yC()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class xx{constructor(){this.Mo=new Wg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Wg,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="ConnectivityMonitor";class Kg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){rt(qg,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){rt(qg,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ga=null;function Ph(){return Ga===null?Ga=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ga++,"0x"+Ga.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu="RestConnection",kx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Dx{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${i}`,this.Wo=this.databaseId.database===Ul?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Go(t,n,s,i,r){const o=Ph(),a=this.zo(t,n.toUriEncodedString());rt(Nu,`Sending RPC '${t}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,r);const{host:u}=new URL(a),h=Qi(u);return this.Jo(t,a,l,s,h).then((d=>(rt(Nu,`Received RPC '${t}' ${o}: `,d),d)),(d=>{throw kr(Nu,`RPC '${t}' ${o} failed with error: `,d,"url: ",a,"request:",s),d}))}Ho(t,n,s,i,r,o){return this.Go(t,n,s,i,r)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Br})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,r)=>t[r]=i)),s&&s.headers.forEach(((i,r)=>t[r]=i))}zo(t,n){const s=kx[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ve="WebChannelConnection";class Mx extends Dx{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,i,r){const o=Ph();return new Promise(((a,l)=>{const u=new Cv;u.setWithCredentials(!0),u.listenOnce(xv.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case fl.NO_ERROR:const d=u.getResponseJson();rt(Ve,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(d)),a(d);break;case fl.TIMEOUT:rt(Ve,`RPC '${t}' ${o} timed out`),l(new at(q.DEADLINE_EXCEEDED,"Request time out"));break;case fl.HTTP_ERROR:const f=u.getStatus();if(rt(Ve,`RPC '${t}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const b=g?.error;if(b&&b.status&&b.message){const w=(function(S){const P=S.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(P)>=0?P:q.UNKNOWN})(b.status);l(new at(w,b.message))}else l(new at(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new at(q.UNAVAILABLE,"Connection failed."));break;default:mt(9055,{l_:t,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{rt(Ve,`RPC '${t}' ${o} completed.`)}}));const h=JSON.stringify(i);rt(Ve,`RPC '${t}' ${o} sending request:`,i),u.send(n,"POST",h,s,15)}))}T_(t,n,s){const i=Ph(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Dv(),a=kv(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const h=r.join("");rt(Ve,`Creating RPC '${t}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);this.I_(d);let f=!1,g=!1;const b=new Ox({Yo:v=>{g?rt(Ve,`Not sending because RPC '${t}' stream ${i} is closed:`,v):(f||(rt(Ve,`Opening RPC '${t}' stream ${i} transport.`),d.open(),f=!0),rt(Ve,`RPC '${t}' stream ${i} sending:`,v),d.send(v))},Zo:()=>d.close()}),w=(v,S,P)=>{v.listen(S,(x=>{try{P(x)}catch(D){setTimeout((()=>{throw D}),0)}}))};return w(d,bo.EventType.OPEN,(()=>{g||(rt(Ve,`RPC '${t}' stream ${i} transport opened.`),b.o_())})),w(d,bo.EventType.CLOSE,(()=>{g||(g=!0,rt(Ve,`RPC '${t}' stream ${i} transport closed`),b.a_(),this.E_(d))})),w(d,bo.EventType.ERROR,(v=>{g||(g=!0,kr(Ve,`RPC '${t}' stream ${i} transport errored. Name:`,v.name,"Message:",v.message),b.a_(new at(q.UNAVAILABLE,"The operation could not be completed")))})),w(d,bo.EventType.MESSAGE,(v=>{if(!g){const S=v.data[0];Vt(!!S,16349);const P=S,x=P?.error||P[0]?.error;if(x){rt(Ve,`RPC '${t}' stream ${i} received error:`,x);const D=x.status;let L=(function(_){const E=le[_];if(E!==void 0)return db(E)})(D),W=x.message;L===void 0&&(L=q.INTERNAL,W="Unknown error status: "+D+" with message "+x.message),g=!0,b.a_(new at(L,W)),d.close()}else rt(Ve,`RPC '${t}' stream ${i} received:`,S),b.u_(S)}})),w(a,Pv.STAT_EVENT,(v=>{v.stat===yh.PROXY?rt(Ve,`RPC '${t}' stream ${i} detected buffering proxy`):v.stat===yh.NOPROXY&&rt(Ve,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function Vu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(e){return new FC(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(t,n,s=1e3,i=1.5,r=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=i,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-s);i>0&&rt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg="PersistentStream";class Rb{constructor(t,n,s,i,r,o,a,l){this.Mi=t,this.S_=s,this.b_=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Sb(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Rs(n.toString()),Rs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,i])=>{this.D_===n&&this.G_(s,i)}),(s=>{t((()=>{const i=new at(q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{s((()=>this.z_(i)))})),this.stream.onMessage((i=>{s((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return rt(Gg,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(rt(Gg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Nx extends Rb{constructor(t,n,s,i,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=jC(this.serializer,t),s=(function(r){if(!("targetChange"in r))return yt.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?yt.min():o.readTime?qn(o.readTime):yt.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=Ch(this.serializer),n.addTarget=(function(r,o){let a;const l=o.target;if(a=Th(l)?{documents:HC(r,l)}:{query:WC(r,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=gb(r,o.resumeToken);const u=Ah(r,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(yt.min())>0){a.readTime=Hl(r,o.snapshotVersion.toTimestamp());const u=Ah(r,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,t);const s=KC(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=Ch(this.serializer),n.removeTarget=t,this.q_(n)}}class Vx extends Rb{constructor(t,n,s,i,r,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Vt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Vt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Vt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=$C(t.writeResults,t.commitTime),s=qn(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=Ch(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>zC(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{}class Fx extends Lx{constructor(t,n,s,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new at(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,o])=>this.connection.Go(t,Sh(n,s),i,r,o))).catch((r=>{throw r.name==="FirebaseError"?(r.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new at(q.UNKNOWN,r.toString())}))}Ho(t,n,s,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(t,Sh(n,s),i,o,a,r))).catch((o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new at(q.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Ux{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Rs(n),this.aa=!1):rt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi="RemoteStore";class Bx{constructor(t,n,s,i,r){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{er(this)&&(rt(Wi,"Restarting streams for network reachability change."),await(async function(l){const u=vt(l);u.Ea.add(4),await Ea(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Bc(u)})(this))}))})),this.Ra=new Ux(s,i)}}async function Bc(e){if(er(e))for(const t of e.da)await t(!0)}async function Ea(e){for(const t of e.da)await t(!1)}function Cb(e,t){const n=vt(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Vd(n)?Nd(n):$r(n).O_()&&Md(n,t))}function Od(e,t){const n=vt(e),s=$r(n);n.Ia.delete(t),s.O_()&&xb(n,t),n.Ia.size===0&&(s.O_()?s.L_():er(n)&&n.Ra.set("Unknown"))}function Md(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(yt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}$r(e).Y_(t)}function xb(e,t){e.Va.Ue(t),$r(e).Z_(t)}function Nd(e){e.Va=new MC({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),$r(e).start(),e.Ra.ua()}function Vd(e){return er(e)&&!$r(e).x_()&&e.Ia.size>0}function er(e){return vt(e).Ea.size===0}function Pb(e){e.Va=void 0}async function jx(e){e.Ra.set("Online")}async function zx(e){e.Ia.forEach(((t,n)=>{Md(e,t)}))}async function $x(e,t){Pb(e),Vd(e)?(e.Ra.ha(t),Nd(e)):e.Ra.set("Unknown")}async function Hx(e,t,n){if(e.Ra.set("Online"),t instanceof pb&&t.state===2&&t.cause)try{await(async function(i,r){const o=r.cause;for(const a of r.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(e,t)}catch(s){rt(Wi,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await ql(e,s)}else if(t instanceof _l?e.Va.Ze(t):t instanceof fb?e.Va.st(t):e.Va.tt(t),!n.isEqual(yt.min()))try{const s=await Ab(e.localStore);n.compareTo(s)>=0&&await(function(r,o){const a=r.Va.Tt(o);return a.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=r.Ia.get(u);h&&r.Ia.set(u,h.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,u)=>{const h=r.Ia.get(l);if(!h)return;r.Ia.set(l,h.withResumeToken(Oe.EMPTY_BYTE_STRING,h.snapshotVersion)),xb(r,l);const d=new Qs(h.target,l,u,h.sequenceNumber);Md(r,d)})),r.remoteSyncer.applyRemoteEvent(a)})(e,n)}catch(s){rt(Wi,"Failed to raise snapshot:",s),await ql(e,s)}}async function ql(e,t,n){if(!zr(t))throw t;e.Ea.add(1),await Ea(e),e.Ra.set("Offline"),n||(n=()=>Ab(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{rt(Wi,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Bc(e)}))}function kb(e,t){return t().catch((n=>ql(e,n,t)))}async function jc(e){const t=vt(e),n=mi(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:vd;for(;Wx(t);)try{const i=await Sx(t.localStore,s);if(i===null){t.Ta.length===0&&n.L_();break}s=i.batchId,qx(t,i)}catch(i){await ql(t,i)}Db(t)&&Ob(t)}function Wx(e){return er(e)&&e.Ta.length<10}function qx(e,t){e.Ta.push(t);const n=mi(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Db(e){return er(e)&&!mi(e).x_()&&e.Ta.length>0}function Ob(e){mi(e).start()}async function Kx(e){mi(e).ra()}async function Gx(e){const t=mi(e);for(const n of e.Ta)t.ea(n.mutations)}async function Yx(e,t,n){const s=e.Ta.shift(),i=Sd.from(s,t,n);await kb(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await jc(e)}async function Qx(e,t){t&&mi(e).X_&&await(async function(s,i){if((function(o){return kC(o)&&o!==q.ABORTED})(i.code)){const r=s.Ta.shift();mi(s).B_(),await kb(s,(()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i))),await jc(s)}})(e,t),Db(e)&&Ob(e)}async function Yg(e,t){const n=vt(e);n.asyncQueue.verifyOperationInProgress(),rt(Wi,"RemoteStore received new credentials");const s=er(n);n.Ea.add(3),await Ea(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Bc(n)}async function Xx(e,t){const n=vt(e);t?(n.Ea.delete(2),await Bc(n)):t||(n.Ea.add(2),await Ea(n),n.Ra.set("Unknown"))}function $r(e){return e.ma||(e.ma=(function(n,s,i){const r=vt(n);return r.sa(),new Nx(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)})(e.datastore,e.asyncQueue,{Xo:jx.bind(null,e),t_:zx.bind(null,e),r_:$x.bind(null,e),H_:Hx.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),Vd(e)?Nd(e):e.Ra.set("Unknown")):(await e.ma.stop(),Pb(e))}))),e.ma}function mi(e){return e.fa||(e.fa=(function(n,s,i){const r=vt(n);return r.sa(),new Vx(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)})(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Kx.bind(null,e),r_:Qx.bind(null,e),ta:Gx.bind(null,e),na:Yx.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await jc(e)):(await e.fa.stop(),e.Ta.length>0&&(rt(Wi,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(t,n,s,i,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,i,r){const o=Date.now()+s,a=new Ld(t,n,o,i,r);return a.start(s),a}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new at(q.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fd(e,t){if(Rs("AsyncQueue",`${t}: ${e}`),zr(e))return new at(q.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{static emptySet(t){return new br(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||ht.comparator(n.key,s.key):(n,s)=>ht.comparator(n.key,s.key),this.keyedMap=wo(),this.sortedSet=new te(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof br)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new br;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(){this.ga=new te(ht.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):mt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class Vr{constructor(t,n,s,i,r,o,a,l,u){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,n,s,i,r){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new Vr(t,n,br.emptySet(n),o,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Mc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class Zx{constructor(){this.queries=Xg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const i=vt(n),r=i.queries;i.queries=Xg(),r.forEach(((o,a)=>{for(const l of a.Sa)l.onError(s)}))})(this,new at(q.ABORTED,"Firestore shutting down"))}}function Xg(){return new Zi((e=>Zv(e)),Mc)}async function Mb(e,t){const n=vt(e);let s=3;const i=t.query;let r=n.queries.get(i);r?!r.ba()&&t.Da()&&(s=2):(r=new Jx,s=t.Da()?0:1);try{switch(s){case 0:r.wa=await n.onListen(i,!0);break;case 1:r.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Fd(o,`Initialization of query '${fr(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,r),r.Sa.push(t),t.va(n.onlineState),r.wa&&t.Fa(r.wa)&&Ud(n)}async function Nb(e,t){const n=vt(e),s=t.query;let i=3;const r=n.queries.get(s);if(r){const o=r.Sa.indexOf(t);o>=0&&(r.Sa.splice(o,1),r.Sa.length===0?i=t.Da()?0:1:!r.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function tP(e,t){const n=vt(e);let s=!1;for(const i of t){const r=i.query,o=n.queries.get(r);if(o){for(const a of o.Sa)a.Fa(i)&&(s=!0);o.wa=i}}s&&Ud(n)}function eP(e,t,n){const s=vt(e),i=s.queries.get(t);if(i)for(const r of i.Sa)r.onError(n);s.queries.delete(t)}function Ud(e){e.Ca.forEach((t=>{t.next()}))}var kh,Jg;(Jg=kh||(kh={})).Ma="default",Jg.Cache="cache";class Vb{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const i of t.docChanges)i.type!==3&&s.push(i);t=new Vr(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Vr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==kh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(t){this.key=t}}class Fb{constructor(t){this.key=t}}class nP{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ct(),this.mutatedKeys=Ct(),this.eu=tb(t),this.tu=new br(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new Qg,i=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((h,d)=>{const f=i.get(h),g=Nc(this.query,d)?d:null,b=!!f&&this.mutatedKeys.has(f.key),w=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let v=!1;f&&g?f.data.isEqual(g.data)?b!==w&&(s.track({type:3,doc:g}),v=!0):this.su(f,g)||(s.track({type:2,doc:g}),v=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(a=!0)):!f&&g?(s.track({type:0,doc:g}),v=!0):f&&!g&&(s.track({type:1,doc:f}),v=!0,(l||u)&&(a=!0)),v&&(g?(o=o.add(g),r=w?r.add(h):r.delete(h)):(o=o.delete(h),r=r.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),r=r.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:r}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,i){const r=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort(((h,d)=>(function(g,b){const w=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt(20277,{Rt:v})}};return w(g)-w(b)})(h.type,d.type)||this.eu(h.doc,d.doc))),this.ou(s),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Vr(this.query,t.tu,r,o,t.mutatedKeys,l===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Qg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ct(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new Fb(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new Lb(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=Ct();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Vr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Bd="SyncEngine";class sP{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class iP{constructor(t){this.key=t,this.hu=!1}}class rP{constructor(t,n,s,i,r,o){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Zi((a=>Zv(a)),Mc),this.Iu=new Map,this.Eu=new Set,this.du=new te(ht.comparator),this.Au=new Map,this.Ru=new xd,this.Vu={},this.mu=new Map,this.fu=Nr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function oP(e,t,n=!0){const s=Hb(e);let i;const r=s.Tu.get(t);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.lu()):i=await Ub(s,t,n,!0),i}async function aP(e,t){const n=Hb(e);await Ub(n,t,!0,!1)}async function Ub(e,t,n,s){const i=await Rx(e.localStore,Wn(t)),r=i.targetId,o=e.sharedClientState.addLocalQueryTarget(r,n);let a;return s&&(a=await lP(e,t,r,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&Cb(e.remoteStore,i),a}async function lP(e,t,n,s,i){e.pu=(d,f,g)=>(async function(w,v,S,P){let x=v.view.ru(S);x.Cs&&(x=await Hg(w.localStore,v.query,!1).then((({documents:T})=>v.view.ru(T,x))));const D=P&&P.targetChanges.get(v.targetId),L=P&&P.targetMismatches.get(v.targetId)!=null,W=v.view.applyChanges(x,w.isPrimaryClient,D,L);return tm(w,v.targetId,W.au),W.snapshot})(e,d,f,g);const r=await Hg(e.localStore,t,!0),o=new nP(t,r.Qs),a=o.ru(r.documents),l=wa.createSynthesizedTargetChangeForCurrentChange(n,s&&e.onlineState!=="Offline",i),u=o.applyChanges(a,e.isPrimaryClient,l);tm(e,n,u.au);const h=new sP(t,n,o);return e.Tu.set(t,h),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),u.snapshot}async function cP(e,t,n){const s=vt(e),i=s.Tu.get(t),r=s.Iu.get(i.targetId);if(r.length>1)return s.Iu.set(i.targetId,r.filter((o=>!Mc(o,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await xh(s.localStore,i.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(i.targetId),n&&Od(s.remoteStore,i.targetId),Dh(s,i.targetId)})).catch(jr)):(Dh(s,i.targetId),await xh(s.localStore,i.targetId,!0))}async function uP(e,t){const n=vt(e),s=n.Tu.get(t),i=n.Iu.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Od(n.remoteStore,s.targetId))}async function hP(e,t,n){const s=yP(e);try{const i=await(function(o,a){const l=vt(o),u=Yt.now(),h=a.reduce(((g,b)=>g.add(b.key)),Ct());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let b=Cs(),w=Ct();return l.Ns.getEntries(g,h).next((v=>{b=v,b.forEach(((S,P)=>{P.isValidDocument()||(w=w.add(S))}))})).next((()=>l.localDocuments.getOverlayedDocuments(g,b))).next((v=>{d=v;const S=[];for(const P of a){const x=SC(P,d.get(P.key).overlayedDocument);x!=null&&S.push(new tr(P.key,x,qv(x.value.mapValue),ws.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,S,a)})).next((v=>{f=v;const S=v.applyToLocalDocumentSet(d,w);return l.documentOverlayCache.saveOverlays(g,v.batchId,S)}))})).then((()=>({batchId:f.batchId,changes:nb(d)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(i.batchId),(function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new te(Rt)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u})(s,i.batchId,n),await Ta(s,i.changes),await jc(s.remoteStore)}catch(i){const r=Fd(i,"Failed to persist write");n.reject(r)}}async function Bb(e,t){const n=vt(e);try{const s=await Ix(n.localStore,t);t.targetChanges.forEach(((i,r)=>{const o=n.Au.get(r);o&&(Vt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Vt(o.hu,14607):i.removedDocuments.size>0&&(Vt(o.hu,42227),o.hu=!1))})),await Ta(n,s,t)}catch(s){await jr(s)}}function Zg(e,t,n){const s=vt(e);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.Tu.forEach(((r,o)=>{const a=o.view.va(t);a.snapshot&&i.push(a.snapshot)})),(function(o,a){const l=vt(o);l.onlineState=a;let u=!1;l.queries.forEach(((h,d)=>{for(const f of d.Sa)f.va(a)&&(u=!0)})),u&&Ud(l)})(s.eventManager,t),i.length&&s.Pu.H_(i),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function dP(e,t,n){const s=vt(e);s.sharedClientState.updateQueryState(t,"rejected",n);const i=s.Au.get(t),r=i&&i.key;if(r){let o=new te(ht.comparator);o=o.insert(r,Be.newNoDocument(r,yt.min()));const a=Ct().add(r),l=new Fc(yt.min(),new Map,new te(Rt),o,a);await Bb(s,l),s.du=s.du.remove(r),s.Au.delete(t),jd(s)}else await xh(s.localStore,t,!1).then((()=>Dh(s,t,n))).catch(jr)}async function fP(e,t){const n=vt(e),s=t.batch.batchId;try{const i=await Tx(n.localStore,t);zb(n,s,null),jb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Ta(n,i)}catch(i){await jr(i)}}async function pP(e,t,n){const s=vt(e);try{const i=await(function(o,a){const l=vt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next((d=>(Vt(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>l.localDocuments.getDocuments(u,h)))}))})(s.localStore,t);zb(s,t,n),jb(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Ta(s,i)}catch(i){await jr(i)}}function jb(e,t){(e.mu.get(t)||[]).forEach((n=>{n.resolve()})),e.mu.delete(t)}function zb(e,t,n){const s=vt(e);let i=s.Vu[s.currentUser.toKey()];if(i){const r=i.get(t);r&&(n?r.reject(n):r.resolve(),i=i.remove(t)),s.Vu[s.currentUser.toKey()]=i}}function Dh(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.Iu.get(t))e.Tu.delete(s),n&&e.Pu.yu(s,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((s=>{e.Ru.containsKey(s)||$b(e,s)}))}function $b(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Od(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),jd(e))}function tm(e,t,n){for(const s of n)s instanceof Lb?(e.Ru.addReference(s.key,t),gP(e,s)):s instanceof Fb?(rt(Bd,"Document no longer in limbo: "+s.key),e.Ru.removeReference(s.key,t),e.Ru.containsKey(s.key)||$b(e,s.key)):mt(19791,{wu:s})}function gP(e,t){const n=t.key,s=n.path.canonicalString();e.du.get(n)||e.Eu.has(s)||(rt(Bd,"New document in limbo: "+n),e.Eu.add(s),jd(e))}function jd(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ht(Gt.fromString(t)),s=e.fu.next();e.Au.set(s,new iP(n)),e.du=e.du.insert(n,s),Cb(e.remoteStore,new Qs(Wn(Id(n.path)),s,"TargetPurposeLimboResolution",Pc.ce))}}async function Ta(e,t,n){const s=vt(e),i=[],r=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((a,l)=>{o.push(s.pu(l,t,n).then((u=>{if((u||n)&&s.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=kd.As(l.targetId,u);r.push(h)}})))})),await Promise.all(o),s.Pu.H_(i),await(async function(l,u){const h=vt(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>$.forEach(u,(f=>$.forEach(f.Es,(g=>h.persistence.referenceDelegate.addReference(d,f.targetId,g))).next((()=>$.forEach(f.ds,(g=>h.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))))))}catch(d){if(!zr(d))throw d;rt(Dd,"Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const g=h.Ms.get(f),b=g.snapshotVersion,w=g.withLastLimboFreeSnapshotVersion(b);h.Ms=h.Ms.insert(f,w)}}})(s.localStore,r))}async function mP(e,t){const n=vt(e);if(!n.currentUser.isEqual(t)){rt(Bd,"User change. New user:",t.toKey());const s=await Ib(n.localStore,t);n.currentUser=t,(function(r,o){r.mu.forEach((a=>{a.forEach((l=>{l.reject(new at(q.CANCELLED,o))}))})),r.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Ta(n,s.Ls)}}function _P(e,t){const n=vt(e),s=n.Au.get(t);if(s&&s.hu)return Ct().add(s.key);{let i=Ct();const r=n.Iu.get(t);if(!r)return i;for(const o of r){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function Hb(e){const t=vt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Bb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_P.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=dP.bind(null,t),t.Pu.H_=tP.bind(null,t.eventManager),t.Pu.yu=eP.bind(null,t.eventManager),t}function yP(e){const t=vt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=fP.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=pP.bind(null,t),t}class Kl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Uc(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return Ex(this.persistence,new vx,t.initialUser,this.serializer)}Cu(t){return new Tb(Pd.mi,this.serializer)}Du(t){return new xx}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kl.provider={build:()=>new Kl};class vP extends Kl{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Vt(this.persistence.referenceDelegate instanceof Wl,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new ix(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Je.withCacheSize(this.cacheSizeBytes):Je.DEFAULT;return new Tb((s=>Wl.mi(s,n)),this.serializer)}}class Oh{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Zg(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=mP.bind(null,this.syncEngine),await Xx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new Zx})()}createDatastore(t){const n=Uc(t.databaseInfo.databaseId),s=(function(r){return new Mx(r)})(t.databaseInfo);return(function(r,o,a,l){return new Fx(r,o,a,l)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,i,r,o,a){return new Bx(s,i,r,o,a)})(this.localStore,this.datastore,t.asyncQueue,(n=>Zg(this.syncEngine,n,0)),(function(){return Kg.v()?new Kg:new Px})())}createSyncEngine(t,n){return(function(i,r,o,a,l,u,h){const d=new rP(i,r,o,a,l,u);return h&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=vt(n);rt(Wi,"RemoteStore shutting down."),s.Ea.add(5),await Ea(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Oh.provider={build:()=>new Oh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Rs("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i="FirestoreClient";class bP{constructor(t,n,s,i,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=Fe.UNAUTHENTICATED,this.clientId=_d.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(s,(async o=>{rt(_i,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(rt(_i,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Fd(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function Lu(e,t){e.asyncQueue.verifyOperationInProgress(),rt(_i,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener((async i=>{s.isEqual(i)||(await Ib(t.localStore,i),s=i)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function em(e,t){e.asyncQueue.verifyOperationInProgress();const n=await wP(e);rt(_i,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((s=>Yg(t.remoteStore,s))),e.setAppCheckTokenChangeListener(((s,i)=>Yg(t.remoteStore,i))),e._onlineComponents=t}async function wP(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){rt(_i,"Using user provided OfflineComponentProvider");try{await Lu(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;kr("Error using user provided cache. Falling back to memory cache: "+n),await Lu(e,new Kl)}}else rt(_i,"Using default OfflineComponentProvider"),await Lu(e,new vP(void 0));return e._offlineComponents}async function qb(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(rt(_i,"Using user provided OnlineComponentProvider"),await em(e,e._uninitializedComponentsProvider._online)):(rt(_i,"Using default OnlineComponentProvider"),await em(e,new Oh))),e._onlineComponents}function EP(e){return qb(e).then((t=>t.syncEngine))}async function Kb(e){const t=await qb(e),n=t.eventManager;return n.onListen=oP.bind(null,t.syncEngine),n.onUnlisten=cP.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=aP.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=uP.bind(null,t.syncEngine),n}function TP(e,t,n={}){const s=new bs;return e.asyncQueue.enqueueAndForget((async()=>(function(r,o,a,l,u){const h=new Wb({next:f=>{h.Nu(),o.enqueueAndForget((()=>Nb(r,d)));const g=f.docs.has(a);!g&&f.fromCache?u.reject(new at(q.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?u.reject(new at(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new Vb(Id(a.path),h,{includeMetadataChanges:!0,qa:!0});return Mb(r,d)})(await Kb(e),e.asyncQueue,t,n,s))),s.promise}function IP(e,t,n={}){const s=new bs;return e.asyncQueue.enqueueAndForget((async()=>(function(r,o,a,l,u){const h=new Wb({next:f=>{h.Nu(),o.enqueueAndForget((()=>Nb(r,d))),f.fromCache&&l.source==="server"?u.reject(new at(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new Vb(a,h,{includeMetadataChanges:!0,qa:!0});return Mb(r,d)})(await Kb(e),e.asyncQueue,t,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="firestore.googleapis.com",sm=!0;class im{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new at(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Yb,this.ssl=sm}else this.host=t.host,this.ssl=t.ssl??sm;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Eb;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<nx)throw new at(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}FR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Gb(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new at(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new at(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new at(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,i){return s.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class zc{constructor(t,n,s,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new im({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new at(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new at(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new im(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new CR;switch(s.type){case"firstParty":return new DR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new at(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=nm.get(n);s&&(rt("ComponentProvider","Removing Datastore"),nm.delete(n),s.terminate())})(this),Promise.resolve()}}function AP(e,t,n,s={}){e=Hi(e,zc);const i=Qi(t),r=e._getSettings(),o={...r,emulatorOptions:e._getEmulatorOptions()},a=`${t}:${n}`;i&&(hd(`https://${a}`),dd("Firestore",!0)),r.host!==Yb&&r.host!==a&&kr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...r,host:a,ssl:i,emulatorOptions:s};if(!ji(l,o)&&(e._setSettings(l),s.mockUserToken)){let u,h;if(typeof s.mockUserToken=="string")u=s.mockUserToken,h=Fe.MOCK_USER;else{u=wv(s.mockUserToken,e._app?.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new at(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Fe(d)}e._authCredentials=new xR(new Mv(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new $c(this.firestore,t,this._query)}}class _e{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new _e(this.firestore,t,this._key)}toJSON(){return{type:_e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(va(n,_e._jsonSchema))return new _e(t,s||null,new ht(Gt.fromString(n.referencePath)))}}_e._jsonSchemaVersion="firestore/documentReference/1.0",_e._jsonSchema={type:ce("string",_e._jsonSchemaVersion),referencePath:ce("string")};class oi extends $c{constructor(t,n,s){super(t,n,Id(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new _e(this.firestore,null,new ht(t))}withConverter(t){return new oi(this.firestore,t,this._path)}}function SP(e,t,...n){if(e=nn(e),Nv("collection","path",t),e instanceof zc){const s=Gt.fromString(t,...n);return yg(s),new oi(e,null,s)}{if(!(e instanceof _e||e instanceof oi))throw new at(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Gt.fromString(t,...n));return yg(s),new oi(e.firestore,null,s)}}function ze(e,t,...n){if(e=nn(e),arguments.length===1&&(t=_d.newId()),Nv("doc","path",t),e instanceof zc){const s=Gt.fromString(t,...n);return _g(s),new _e(e,null,new ht(s))}{if(!(e instanceof _e||e instanceof oi))throw new at(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Gt.fromString(t,...n));return _g(s),new _e(e.firestore,e instanceof oi?e.converter:null,new ht(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm="AsyncQueue";class om{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Sb(this,"async_queue_retry"),this._c=()=>{const s=Vu();s&&rt(rm,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=Vu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Vu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new bs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!zr(t))throw t;rt(rm,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,Rs("INTERNAL UNHANDLED ERROR: ",am(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const i=Ld.createAndSchedule(this,t,n,s,(r=>this.hc(r)));return this.tc.push(i),i}uc(){this.nc&&mt(47125,{Pc:am(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function am(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Hc extends zc{constructor(t,n,s,i){super(t,n,s,i),this.type="firestore",this._queue=new om,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new om(t),this._firestoreClient=void 0,await t}}}function RP(e,t){const n=typeof e=="object"?e:gd(),s=typeof e=="string"?e:Ul,i=xc(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=yv("firestore");r&&AP(i,...r)}return i}function zd(e){if(e._terminated)throw new at(q.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||CP(e),e._firestoreClient}function CP(e){const t=e._freezeSettings(),n=(function(i,r,o,a){return new YR(i,r,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,Gb(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new bP(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&(function(i){const r=i?._online.build();return{_offline:i?._offline.build(r),_online:r}})(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(t){this._byteString=t}static fromBase64String(t){try{return new _n(Oe.fromBase64String(t))}catch(n){throw new at(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new _n(Oe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:_n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(va(t,_n._jsonSchema))return _n.fromBase64String(t.bytes)}}_n._jsonSchemaVersion="firestore/bytes/1.0",_n._jsonSchema={type:ce("string",_n._jsonSchemaVersion),bytes:ce("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new at(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ke(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new at(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new at(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Rt(this._lat,t._lat)||Rt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Kn._jsonSchemaVersion}}static fromJSON(t){if(va(t,Kn._jsonSchema))return new Kn(t.latitude,t.longitude)}}Kn._jsonSchemaVersion="firestore/geoPoint/1.0",Kn._jsonSchema={type:ce("string",Kn._jsonSchemaVersion),latitude:ce("number"),longitude:ce("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,i){if(s.length!==i.length)return!1;for(let r=0;r<s.length;++r)if(s[r]!==i[r])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Gn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(va(t,Gn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Gn(t.vectorValues);throw new at(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gn._jsonSchemaVersion="firestore/vectorValue/1.0",Gn._jsonSchema={type:ce("string",Gn._jsonSchemaVersion),vectorValues:ce("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP=/^__.*__$/;class PP{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new tr(t,this.data,this.fieldMask,n,this.fieldTransforms):new ba(t,this.data,n,this.fieldTransforms)}}function Qb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt(40011,{Ac:e})}}class Wd{constructor(t,n,s,i,r,o){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Wd({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Gl(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Qb(this.Ac)&&xP.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class kP{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Uc(t)}Cc(t,n,s,i=!1){return new Wd({Ac:t,methodName:n,Dc:s,path:ke.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function DP(e){const t=e._freezeSettings(),n=Uc(e._databaseId);return new kP(e._databaseId,!!t.ignoreUndefinedProperties,n)}function OP(e,t,n,s,i,r={}){const o=e.Cc(r.merge||r.mergeFields?2:0,t,n,i);tw("Data must be an object, but it was:",o,s);const a=Jb(s,o);let l,u;if(r.merge)l=new In(o.fieldMask),u=o.fieldTransforms;else if(r.mergeFields){const h=[];for(const d of r.mergeFields){const f=MP(t,d,n);if(!o.contains(f))throw new at(q.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);VP(h,f)||h.push(f)}l=new In(h),u=o.fieldTransforms.filter((d=>l.covers(d.field)))}else l=null,u=o.fieldTransforms;return new PP(new mn(a),l,u)}class qd extends Hd{_toFieldTransform(t){return new EC(t.path,new ia)}isEqual(t){return t instanceof qd}}function Xb(e,t){if(Zb(e=nn(e)))return tw("Unsupported field value:",t,e),Jb(e,t);if(e instanceof Hd)return(function(s,i){if(!Qb(i.Ac))throw i.Sc(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,i){const r=[];let o=0;for(const a of s){let l=Xb(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}})(e,t)}return(function(s,i){if((s=nn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return vC(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=Yt.fromDate(s);return{timestampValue:Hl(i.serializer,r)}}if(s instanceof Yt){const r=new Yt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Hl(i.serializer,r)}}if(s instanceof Kn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof _n)return{bytesValue:gb(i.serializer,s._byteString)};if(s instanceof _e){const r=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(r))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Cd(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof Gn)return(function(o,a){return{mapValue:{fields:{[Hv]:{stringValue:Wv},[Bl]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return Ad(a.serializer,u)}))}}}}}})(s,i);throw i.Sc(`Unsupported field value: ${yd(s)}`)})(e,t)}function Jb(e,t){const n={};return Fv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ji(e,((s,i)=>{const r=Xb(i,t.mc(s));r!=null&&(n[s]=r)})),{mapValue:{fields:n}}}function Zb(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Yt||e instanceof Kn||e instanceof _n||e instanceof _e||e instanceof Hd||e instanceof Gn)}function tw(e,t,n){if(!Zb(n)||!Vv(n)){const s=yd(n);throw s==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+s)}}function MP(e,t,n){if((t=nn(t))instanceof $d)return t._internalPath;if(typeof t=="string")return ew(e,t);throw Gl("Field path arguments must be of type string or ",e,!1,void 0,n)}const NP=new RegExp("[~\\*/\\[\\]]");function ew(e,t,n){if(t.search(NP)>=0)throw Gl(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new $d(...t.split("."))._internalPath}catch{throw Gl(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Gl(e,t,n,s,i){const r=s&&!s.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${s}`),o&&(l+=` in document ${i}`),l+=")"),new at(q.INVALID_ARGUMENT,a+e+l)}function VP(e,t){return e.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(t,n,s,i,r){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new _e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new LP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(sw("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class LP extends nw{data(){return super.data()}}function sw(e,t){return typeof t=="string"?ew(e,t):t instanceof $d?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new at(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class UP{convertValue(t,n="none"){switch(gi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ie(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(pi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw mt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Ji(t,((i,r)=>{s[i]=this.convertValue(r,n)})),s}convertVectorValue(t){const n=t.fields?.[Bl].arrayValue?.values?.map((s=>ie(s.doubleValue)));return new Gn(n)}convertGeoPoint(t){return new Kn(ie(t.latitude),ie(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=Dc(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ea(t));default:return null}}convertTimestamp(t){const n=fi(t);return new Yt(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=Gt.fromString(t);Vt(wb(s),9688,{name:t});const i=new na(s.get(1),s.get(3)),r=new ht(s.popFirst(5));return i.isEqual(n)||Rs(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(e,t,n){let s;return s=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,s}class To{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Fi extends nw{constructor(t,n,s,i,r,o){super(t,n,s,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new yl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(sw("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new at(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Fi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Fi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fi._jsonSchema={type:ce("string",Fi._jsonSchemaVersion),bundleSource:ce("string","DocumentSnapshot"),bundleName:ce("string"),bundle:ce("string")};class yl extends Fi{data(t={}){return super.data(t)}}class wr{constructor(t,n,s,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new To(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new yl(this._firestore,this._userDataWriter,s.key,s,new To(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new at(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((a=>{const l=new yl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new To(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>r||a.type!==3)).map((a=>{const l=new yl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new To(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:jP(a.type),doc:l,oldIndex:u,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new at(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=wr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=_d.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],i=[];return this.docs.forEach((r=>{r._document!==null&&(n.push(r._document),s.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),i.push(r.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function jP(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(e){e=Hi(e,_e);const t=Hi(e.firestore,Hc);return TP(zd(t),e._key).then((n=>HP(t,e,n)))}wr._jsonSchemaVersion="firestore/querySnapshot/1.0",wr._jsonSchema={type:ce("string",wr._jsonSchemaVersion),bundleSource:ce("string","QuerySnapshot"),bundleName:ce("string"),bundle:ce("string")};class iw extends UP{constructor(t){super(),this.firestore=t}convertBytes(t){return new _n(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new _e(this.firestore,null,n)}}function zP(e){e=Hi(e,$c);const t=Hi(e.firestore,Hc),n=zd(t),s=new iw(t);return FP(e._query),IP(n,e._query).then((i=>new wr(t,s,e,i)))}function wn(e,t,n){e=Hi(e,_e);const s=Hi(e.firestore,Hc),i=BP(e.converter,t,n);return $P(s,[OP(DP(s),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,ws.none())])}function $P(e,t){return(function(s,i){const r=new bs;return s.asyncQueue.enqueueAndForget((async()=>hP(await EP(s),i,r))),r.promise})(zd(e),t)}function HP(e,t,n){const s=n.docs.get(t._key),i=new iw(e);return new Fi(e,i,t._key,s,new To(n.hasPendingWrites,n.fromCache),t.converter)}function Yn(){return new qd("serverTimestamp")}(function(t,n=!0){(function(i){Br=i})(Xi),zi(new hi("firestore",((s,{instanceIdentifier:i,options:r})=>{const o=s.getProvider("app").getImmediate(),a=new Hc(new PR(s.getProvider("auth-internal")),new OR(o,s.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new at(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new na(u.options.projectId,h)})(o,i),o);return r={useFetchStreams:n,...r},a._setSettings(r),a}),"PUBLIC").setMultipleInstances(!0)),Hn(fg,pg,t),Hn(fg,pg,"esm2020")})();var WP="firebase",qP="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hn(WP,qP,"app");function rw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KP=rw,ow=new _a("auth","Firebase",rw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=new fd("@firebase/auth");function GP(e,...t){Yl.logLevel<=St.WARN&&Yl.warn(`Auth (${Xi}): ${e}`,...t)}function vl(e,...t){Yl.logLevel<=St.ERROR&&Yl.error(`Auth (${Xi}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(e,...t){throw Kd(e,...t)}function Qn(e,...t){return Kd(e,...t)}function aw(e,t,n){const s={...KP(),[t]:n};return new _a("auth","Firebase",s).create(t,{appName:e.name})}function Es(e){return aw(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kd(e,...t){if(typeof e!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=e.name),e._errorFactory.create(n,...s)}return ow.create(e,...t)}function gt(e,t,...n){if(!e)throw Kd(t,...n)}function ms(e){const t="INTERNAL ASSERTION FAILED: "+e;throw vl(t),new Error(t)}function xs(e,t){e||ms(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(){return typeof self<"u"&&self.location?.href||""}function YP(){return lm()==="http:"||lm()==="https:"}function lm(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YP()||aS()||"connection"in navigator)?navigator.onLine:!0}function XP(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(t,n){this.shortDelay=t,this.longDelay=n,xs(n>t,"Short delay should be less than long delay!"),this.isMobile=iS()||lS()}get(){return QP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(e,t){xs(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tk=new Ia(3e4,6e4);function Os(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Ms(e,t,n,s,i={}){return cw(e,i,async()=>{let r={},o={};s&&(t==="GET"?o=s:r={body:JSON.stringify(s)});const a=ya({key:e.config.apiKey,...o}).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:l,...r};return oS()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&Qi(e.emulatorConfig.host)&&(u.credentials="include"),lw.fetch()(await uw(e,e.config.apiHost,n,a),u)})}async function cw(e,t,n){e._canInitEmulator=!1;const s={...JP,...t};try{const i=new nk(e),r=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Ya(e,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ya(e,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ya(e,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ya(e,"user-disabled",o);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw aw(e,h,u);Pn(e,h)}}catch(i){if(i instanceof ss)throw i;Pn(e,"network-request-failed",{message:String(i)})}}async function Aa(e,t,n,s,i={}){const r=await Ms(e,t,n,s,i);return"mfaPendingCredential"in r&&Pn(e,"multi-factor-auth-required",{_serverResponse:r}),r}async function uw(e,t,n,s){const i=`${t}${n}?${s}`,r=e,o=r.config.emulator?Gd(e.config,i):`${e.config.apiScheme}://${i}`;return ZP.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}function ek(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Qn(this.auth,"network-request-failed")),tk.get())})}}function Ya(e,t,n){const s={appName:e.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=Qn(e,t,s);return i.customData._tokenResponse=n,i}function cm(e){return e!==void 0&&e.enterprise!==void 0}class sk{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return ek(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ik(e,t){return Ms(e,"GET","/v2/recaptchaConfig",Os(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rk(e,t){return Ms(e,"POST","/v1/accounts:delete",t)}async function Ql(e,t){return Ms(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function ok(e,t=!1){const n=nn(e),s=await n.getIdToken(t),i=Yd(s);gt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r?.sign_in_provider;return{claims:i,token:s,authTime:zo(Fu(i.auth_time)),issuedAtTime:zo(Fu(i.iat)),expirationTime:zo(Fu(i.exp)),signInProvider:o||null,signInSecondFactor:r?.sign_in_second_factor||null}}function Fu(e){return Number(e)*1e3}function Yd(e){const[t,n,s]=e.split(".");if(t===void 0||n===void 0||s===void 0)return vl("JWT malformed, contained fewer than 3 sections"),null;try{const i=mv(n);return i?JSON.parse(i):(vl("Failed to decode base64 JWT payload"),null)}catch(i){return vl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function um(e){const t=Yd(e);return gt(t,"internal-error"),gt(typeof t.exp<"u","internal-error"),gt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(e,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof ss&&ak(s)&&e.auth.currentUser===e&&await e.auth.signOut(),s}}function ak({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zo(this.lastLoginAt),this.creationTime=zo(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xl(e){const t=e.auth,n=await e.getIdToken(),s=await aa(e,Ql(t,{idToken:n}));gt(s?.users.length,t,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const r=i.providerUserInfo?.length?hw(i.providerUserInfo):[],o=uk(e.providerData,r),a=e.isAnonymous,l=!(e.email&&i.passwordHash)&&!o?.length,u=a?l:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Nh(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(e,h)}async function ck(e){const t=nn(e);await Xl(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function uk(e,t){return[...e.filter(s=>!t.some(i=>i.providerId===s.providerId)),...t]}function hw(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hk(e,t){const n=await cw(e,{},async()=>{const s=ya({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,o=await uw(e,i,"/v1/token",`key=${r}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return e.emulatorConfig&&Qi(e.emulatorConfig.host)&&(l.credentials="include"),lw.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function dk(e,t){return Ms(e,"POST","/v2/accounts:revokeToken",Os(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){gt(t.idToken,"internal-error"),gt(typeof t.idToken<"u","internal-error"),gt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):um(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){gt(t.length!==0,"internal-error");const n=um(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(gt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:i,expiresIn:r}=await hk(t,n);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:i,expirationTime:r}=n,o=new Tr;return s&&(gt(typeof s=="string","internal-error",{appName:t}),o.refreshToken=s),i&&(gt(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),r&&(gt(typeof r=="number","internal-error",{appName:t}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Tr,this.toJSON())}_performRefresh(){return ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(e,t){gt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class An{constructor({uid:t,auth:n,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new lk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Nh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const n=await aa(this,this.stsTokenManager.getToken(this.auth,t));return gt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return ok(this,t)}reload(){return ck(this)}_assign(t){this!==t&&(gt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new An({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){gt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await Xl(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(un(this.auth.app))return Promise.reject(Es(this.auth));const t=await this.getIdToken();return await aa(this,rk(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,i=n.email??void 0,r=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:g,providerData:b,stsTokenManager:w}=n;gt(d&&w,t,"internal-error");const v=Tr.fromJSON(this.name,w);gt(typeof d=="string",t,"internal-error"),zs(s,t.name),zs(i,t.name),gt(typeof f=="boolean",t,"internal-error"),gt(typeof g=="boolean",t,"internal-error"),zs(r,t.name),zs(o,t.name),zs(a,t.name),zs(l,t.name),zs(u,t.name),zs(h,t.name);const S=new An({uid:d,auth:t,email:i,emailVerified:f,displayName:s,isAnonymous:g,photoURL:o,phoneNumber:r,tenantId:a,stsTokenManager:v,createdAt:u,lastLoginAt:h});return b&&Array.isArray(b)&&(S.providerData=b.map(P=>({...P}))),l&&(S._redirectEventId=l),S}static async _fromIdTokenResponse(t,n,s=!1){const i=new Tr;i.updateFromServerResponse(n);const r=new An({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:s});return await Xl(r),r}static async _fromGetAccountInfoResponse(t,n,s){const i=n.users[0];gt(i.localId!==void 0,"internal-error");const r=i.providerUserInfo!==void 0?hw(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!r?.length,a=new Tr;a.updateFromIdToken(s);const l=new An({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new Nh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!r?.length};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm=new Map;function _s(e){xs(e instanceof Function,"Expected a class definition");let t=hm.get(e);return t?(xs(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,hm.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}dw.type="NONE";const dm=dw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(e,t,n){return`firebase:${e}:${t}:${n}`}class Ir{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=bl(this.userKey,i.apiKey,r),this.fullPersistenceKey=bl("persistence",i.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Ql(this.auth,{idToken:t}).catch(()=>{});return n?An._fromGetAccountInfoResponse(this.auth,n,t):null}return An._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new Ir(_s(dm),t,s);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let r=i[0]||_s(dm);const o=bl(s,t.config.apiKey,t.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const f=await Ql(t,{idToken:h}).catch(()=>{});if(!f)break;d=await An._fromGetAccountInfoResponse(t,f,h)}else d=An._fromJSON(t,h);u!==r&&(a=d),r=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new Ir(r,t,s):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==r)try{await u._remove(o)}catch{}})),new Ir(r,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(mw(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(fw(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(yw(t))return"Blackberry";if(vw(t))return"Webos";if(pw(t))return"Safari";if((t.includes("chrome/")||gw(t))&&!t.includes("edge/"))return"Chrome";if(_w(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=e.match(n);if(s?.length===2)return s[1]}return"Other"}function fw(e=We()){return/firefox\//i.test(e)}function pw(e=We()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function gw(e=We()){return/crios\//i.test(e)}function mw(e=We()){return/iemobile/i.test(e)}function _w(e=We()){return/android/i.test(e)}function yw(e=We()){return/blackberry/i.test(e)}function vw(e=We()){return/webos/i.test(e)}function Qd(e=We()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function fk(e=We()){return Qd(e)&&!!window.navigator?.standalone}function pk(){return cS()&&document.documentMode===10}function bw(e=We()){return Qd(e)||_w(e)||vw(e)||yw(e)||/windows phone/i.test(e)||mw(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(e,t=[]){let n;switch(e){case"Browser":n=fm(We());break;case"Worker":n=`${fm(We())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xi}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=r=>new Promise((o,a)=>{try{const l=t(r);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mk(e,t={}){return Ms(e,"GET","/v2/passwordPolicy",Os(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=6;class yk{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??_k,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<t.length;i++)s=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(t,n,s,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pm(this),this.idTokenSubscription=new pm(this),this.beforeStateQueue=new gk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ow,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=_s(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ir.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Ql(this,{idToken:t}),s=await An._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(un(this.app)){const r=this.app.settings.authIdToken;return r?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(r).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(t);(!r||r===o)&&a?.user&&(s=a.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(r){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(r))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return gt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Xl(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=XP()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(un(this.app))return Promise.reject(Es(this));const n=t?nn(t):null;return n&&gt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&gt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return un(this.app)?Promise.reject(Es(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return un(this.app)?Promise.reject(Es(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_s(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await mk(this),n=new yk(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new _a("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await dk(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&_s(t)||this._popupRedirectResolver;gt(n,this,"argument-error"),this.redirectPersistenceManager=await Ir.create(this,[_s(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,i){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(gt(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const l=t.addObserver(n,s,i);return()=>{o=!0,l()}}else{const l=t.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return gt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=ww(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&GP(`Error while retrieving App Check token: ${t.error}`),t?.token}}function vi(e){return nn(e)}class pm{constructor(t){this.auth=t,this.observer=null,this.addObserver=_S(n=>this.observer=n)}get next(){return gt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bk(e){Wc=e}function Ew(e){return Wc.loadJS(e)}function wk(){return Wc.recaptchaEnterpriseScript}function Ek(){return Wc.gapiScript}function Tk(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class Ik{constructor(){this.enterprise=new Ak}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class Ak{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const Sk="recaptcha-enterprise",Tw="NO_RECAPTCHA";class Rk{constructor(t){this.type=Sk,this.auth=vi(t)}async verify(t="verify",n=!1){async function s(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{ik(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new sk(l);return r.tenantId==null?r._agentRecaptchaConfig=u:r._tenantRecaptchaConfigs[r.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(r,o,a){const l=window.grecaptcha;cm(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:t}).then(u=>{o(u)}).catch(()=>{o(Tw)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Ik().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{s(this.auth).then(a=>{if(!n&&cm(window.grecaptcha))i(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=wk();l.length!==0&&(l+=a),Ew(l).then(()=>{i(a,r,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function gm(e,t,n,s=!1,i=!1){const r=new Rk(e);let o;if(i)o=Tw;else try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const a={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Jl(e,t,n,s,i){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await gm(e,t,n,n==="getOobCode");return s(e,r)}else return s(e,t).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await gm(e,t,n,n==="getOobCode");return s(e,o)}else return Promise.reject(r)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(e,t){const n=xc(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),r=n.getOptions();if(ji(r,t??{}))return i;Pn(i,"already-initialized")}return n.initialize({options:t})}function xk(e,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(_s);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(s,t?.popupRedirectResolver)}function Pk(e,t,n){const s=vi(e);gt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const i=!1,r=Iw(t),{host:o,port:a}=kk(t),l=a===null?"":`:${a}`,u={url:`${r}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){gt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),gt(ji(u,s.config.emulator)&&ji(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,Qi(o)?(hd(`${r}//${o}${l}`),dd("Auth",!0)):Dk()}function Iw(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function kk(e){const t=Iw(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:mm(s.substr(r.length+1))}}else{const[r,o]=s.split(":");return{host:r,port:mm(o)}}}function mm(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Dk(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ms("not implemented")}_getIdTokenResponse(t){return ms("not implemented")}_linkToIdToken(t,n){return ms("not implemented")}_getReauthenticationResolver(t){return ms("not implemented")}}async function Ok(e,t){return Ms(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mk(e,t){return Aa(e,"POST","/v1/accounts:signInWithPassword",Os(e,t))}async function Nk(e,t){return Ms(e,"POST","/v1/accounts:sendOobCode",Os(e,t))}async function Vk(e,t){return Nk(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lk(e,t){return Aa(e,"POST","/v1/accounts:signInWithEmailLink",Os(e,t))}async function Fk(e,t){return Aa(e,"POST","/v1/accounts:signInWithEmailLink",Os(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends Xd{constructor(t,n,s,i=null){super("password",s),this._email=t,this._password=n,this._tenantId=i}static _fromEmailAndPassword(t,n){return new la(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new la(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jl(t,n,"signInWithPassword",Mk);case"emailLink":return Lk(t,{email:this._email,oobCode:this._password});default:Pn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jl(t,s,"signUpPassword",Ok);case"emailLink":return Fk(t,{idToken:n,email:this._email,oobCode:this._password});default:Pn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ar(e,t){return Aa(e,"POST","/v1/accounts:signInWithIdp",Os(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk="http://localhost";class qi extends Xd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new qi(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Pn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:i,...r}=n;if(!s||!i)return null;const o=new qi(s,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Ar(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,Ar(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Ar(t,n)}buildRequest(){const t={requestUri:Uk,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=ya(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jk(e){const t=yo(vo(e)).link,n=t?yo(vo(t)).deep_link_id:null,s=yo(vo(e)).deep_link_id;return(s?yo(vo(s)).link:null)||s||n||t||e}class Jd{constructor(t){const n=yo(vo(t)),s=n.apiKey??null,i=n.oobCode??null,r=Bk(n.mode??null);gt(s&&i&&r,"argument-error"),this.apiKey=s,this.operation=r,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=jk(t);try{return new Jd(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(){this.providerId=Hr.PROVIDER_ID}static credential(t,n){return la._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=Jd.parseLink(n);return gt(s,"argument-error"),la._fromEmailAndCode(t,s.code,s.tenantId)}}Hr.PROVIDER_ID="password";Hr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Hr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends Aw{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends Sa{constructor(){super("facebook.com")}static credential(t){return qi._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ks.credentialFromTaggedObject(t)}static credentialFromError(t){return Ks.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ks.credential(t.oauthAccessToken)}catch{return null}}}Ks.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ks.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends Sa{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return qi._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return gs.credentialFromTaggedObject(t)}static credentialFromError(t){return gs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return gs.credential(n,s)}catch{return null}}}gs.GOOGLE_SIGN_IN_METHOD="google.com";gs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends Sa{constructor(){super("github.com")}static credential(t){return qi._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Gs.credentialFromTaggedObject(t)}static credentialFromError(t){return Gs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Gs.credential(t.oauthAccessToken)}catch{return null}}}Gs.GITHUB_SIGN_IN_METHOD="github.com";Gs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys extends Sa{constructor(){super("twitter.com")}static credential(t,n){return qi._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ys.credentialFromTaggedObject(t)}static credentialFromError(t){return Ys.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Ys.credential(n,s)}catch{return null}}}Ys.TWITTER_SIGN_IN_METHOD="twitter.com";Ys.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zk(e,t){return Aa(e,"POST","/v1/accounts:signUp",Os(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,i=!1){const r=await An._fromIdTokenResponse(t,s,i),o=_m(s);return new Ki({user:r,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const i=_m(s);return new Ki({user:t,providerId:i,_tokenResponse:s,operationType:n})}}function _m(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl extends ss{constructor(t,n,s,i){super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Zl.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,i){return new Zl(t,n,s,i)}}function Sw(e,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Zl._fromErrorAndOperation(e,r,t,s):r})}async function $k(e,t,n=!1){const s=await aa(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ki._forOperation(e,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hk(e,t,n=!1){const{auth:s}=e;if(un(s.app))return Promise.reject(Es(s));const i="reauthenticate";try{const r=await aa(e,Sw(s,i,t,e),n);gt(r.idToken,s,"internal-error");const o=Yd(r.idToken);gt(o,s,"internal-error");const{sub:a}=o;return gt(e.uid===a,s,"user-mismatch"),Ki._forOperation(e,i,r)}catch(r){throw r?.code==="auth/user-not-found"&&Pn(s,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rw(e,t,n=!1){if(un(e.app))return Promise.reject(Es(e));const s="signIn",i=await Sw(e,s,t),r=await Ki._fromIdTokenResponse(e,s,i);return n||await e._updateCurrentUser(r.user),r}async function Wk(e,t){return Rw(vi(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cw(e){const t=vi(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function qk(e,t,n){const s=vi(e);await Jl(s,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Vk)}async function Kk(e,t,n){if(un(e.app))return Promise.reject(Es(e));const s=vi(e),o=await Jl(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zk).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Cw(e),l}),a=await Ki._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function Gk(e,t,n){return un(e.app)?Promise.reject(Es(e)):Wk(nn(e),Hr.credential(t,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Cw(e),s})}function Yk(e,t,n,s){return nn(e).onIdTokenChanged(t,n,s)}function Qk(e,t,n){return nn(e).beforeAuthStateChanged(t,n)}function Xk(e){return nn(e).signOut()}const tc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(tc,"1"),this.storage.removeItem(tc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk=1e3,Zk=10;class Pw extends xw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bw(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&t(n,i,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},r=this.storage.getItem(s);pk()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,Zk):i()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},Jk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}Pw.type="LOCAL";const t1=Pw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw extends xw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}kw.type="SESSION";const Dw=kw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const s=new qc(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:i,data:r}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,r)),l=await e1(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:l})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(e="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const u=Zd("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(h),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(f.data.response);break;default:clearTimeout(h),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(){return window}function s1(e){Xn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(){return typeof Xn().WorkerGlobalScope<"u"&&typeof Xn().importScripts=="function"}async function i1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function r1(){return navigator?.serviceWorker?.controller||null}function o1(){return Ow()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="firebaseLocalStorageDb",a1=1,ec="firebaseLocalStorage",Nw="fbase_key";class Ra{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Kc(e,t){return e.transaction([ec],t?"readwrite":"readonly").objectStore(ec)}function l1(){const e=indexedDB.deleteDatabase(Mw);return new Ra(e).toPromise()}function Vh(){const e=indexedDB.open(Mw,a1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const s=e.result;try{s.createObjectStore(ec,{keyPath:Nw})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const s=e.result;s.objectStoreNames.contains(ec)?t(s):(s.close(),await l1(),t(await Vh()))})})}async function ym(e,t,n){const s=Kc(e,!0).put({[Nw]:t,value:n});return new Ra(s).toPromise()}async function c1(e,t){const n=Kc(e,!1).get(t),s=await new Ra(n).toPromise();return s===void 0?null:s.value}function vm(e,t){const n=Kc(e,!0).delete(t);return new Ra(n).toPromise()}const u1=800,h1=3;class Vw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vh(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>h1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ow()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qc._getInstance(o1()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await i1(),!this.activeServiceWorker)return;this.sender=new n1(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||r1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Vh();return await ym(t,tc,"1"),await vm(t,tc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>ym(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>c1(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>vm(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const r=Kc(i,!1).getAll();return new Ra(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:i,value:r}of t)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),u1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Vw.type="LOCAL";const d1=Vw;new Ia(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(e,t){return t?_s(t):(gt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf extends Xd{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ar(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Ar(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Ar(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function p1(e){return Rw(e.auth,new tf(e),e.bypassAuthState)}function g1(e){const{auth:t,user:n}=e;return gt(n,t,"internal-error"),Hk(n,new tf(e),e.bypassAuthState)}async function m1(e){const{auth:t,user:n}=e;return gt(n,t,"internal-error"),$k(n,new tf(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(t,n,s,i,r=!1){this.auth=t,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:i,tenantId:r,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return p1;case"linkViaPopup":case"linkViaRedirect":return m1;case"reauthViaPopup":case"reauthViaRedirect":return g1;default:Pn(this.auth,"internal-error")}}resolve(t){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=new Ia(2e3,1e4);class mr extends Lw{constructor(t,n,s,i,r){super(t,n,i,r),this.provider=s,this.authWindow=null,this.pollId=null,mr.currentPopupAction&&mr.currentPopupAction.cancel(),mr.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return gt(t,this.auth,"internal-error"),t}async onExecution(){xs(this.filter.length===1,"Popup operations only handle one event");const t=Zd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mr.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,_1.get())};t()}}mr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1="pendingRedirect",wl=new Map;class v1 extends Lw{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=wl.get(this.auth._key());if(!t){try{const s=await b1(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}wl.set(this.auth._key(),t)}return this.bypassAuthState||wl.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function b1(e,t){const n=T1(t),s=E1(e);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function w1(e,t){wl.set(e._key(),t)}function E1(e){return _s(e._redirectPersistence)}function T1(e){return bl(y1,e.config.apiKey,e.name)}async function I1(e,t,n=!1){if(un(e.app))return Promise.reject(Es(e));const s=vi(e),i=f1(s,t),o=await new v1(s,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=600*1e3;class S1{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!R1(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!Fw(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Qn(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=A1&&this.cachedEventUids.clear(),this.cachedEventUids.has(bm(t))}saveEventToCache(t){this.cachedEventUids.add(bm(t)),this.lastProcessedEventTime=Date.now()}}function bm(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Fw({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function R1(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fw(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C1(e,t={}){return Ms(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,P1=/^https?/;async function k1(e){if(e.config.emulator)return;const{authorizedDomains:t}=await C1(e);for(const n of t)try{if(D1(n))return}catch{}Pn(e,"unauthorized-domain")}function D1(e){const t=Mh(),{protocol:n,hostname:s}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&s===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!P1.test(n))return!1;if(x1.test(e))return s===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=new Ia(3e4,6e4);function wm(){const e=Xn().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function M1(e){return new Promise((t,n)=>{function s(){wm(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{wm(),n(Qn(e,"network-request-failed"))},timeout:O1.get()})}if(Xn().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Xn().gapi?.load)s();else{const i=Tk("iframefcb");return Xn()[i]=()=>{gapi.load?s():n(Qn(e,"network-request-failed"))},Ew(`${Ek()}?onload=${i}`).catch(r=>n(r))}}).catch(t=>{throw El=null,t})}let El=null;function N1(e){return El=El||M1(e),El}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=new Ia(5e3,15e3),L1="__/auth/iframe",F1="emulator/auth/iframe",U1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function j1(e){const t=e.config;gt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Gd(t,F1):`https://${e.config.authDomain}/${L1}`,s={apiKey:t.apiKey,appName:e.name,v:Xi},i=B1.get(e.config.apiHost);i&&(s.eid=i);const r=e._getFrameworks();return r.length&&(s.fw=r.join(",")),`${n}?${ya(s).slice(1)}`}async function z1(e){const t=await N1(e),n=Xn().gapi;return gt(n,e,"internal-error"),t.open({where:document.body,url:j1(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:U1,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const o=Qn(e,"network-request-failed"),a=Xn().setTimeout(()=>{r(o)},V1.get());function l(){Xn().clearTimeout(a),i(s)}s.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},H1=500,W1=600,q1="_blank",K1="http://localhost";class Em{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function G1(e,t,n,s=H1,i=W1){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...$1,width:s.toString(),height:i.toString(),top:r,left:o},u=We().toLowerCase();n&&(a=gw(u)?q1:n),fw(u)&&(t=t||K1,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[g,b])=>`${f}${g}=${b},`,"");if(fk(u)&&a!=="_self")return Y1(t||"",a),new Em(null);const d=window.open(t||"",a,h);gt(d,e,"popup-blocked");try{d.focus()}catch{}return new Em(d)}function Y1(e,t){const n=document.createElement("a");n.href=e,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="__/auth/handler",X1="emulator/auth/handler",J1=encodeURIComponent("fac");async function Tm(e,t,n,s,i,r){gt(e.config.authDomain,e,"auth-domain-config-required"),gt(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:Xi,eventId:i};if(t instanceof Aw){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",mS(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(t instanceof Sa){const h=t.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await e._getAppCheckToken(),u=l?`#${J1}=${encodeURIComponent(l)}`:"";return`${Z1(e)}?${ya(a).slice(1)}${u}`}function Z1({config:e}){return e.emulator?Gd(e,X1):`https://${e.authDomain}/${Q1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu="webStorageSupport";class tD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Dw,this._completeRedirectFn=I1,this._overrideRedirectResult=w1}async _openPopup(t,n,s,i){xs(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const r=await Tm(t,n,s,Mh(),i);return G1(t,r,Zd())}async _openRedirect(t,n,s,i){await this._originValidation(t);const r=await Tm(t,n,s,Mh(),i);return s1(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:r}=this.eventManagers[n];return i?Promise.resolve(i):(xs(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await z1(t),s=new S1(t);return n.register("authEvent",i=>(gt(i?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Uu,{type:Uu},i=>{const r=i?.[0]?.[Uu];r!==void 0&&n(!!r),Pn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=k1(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return bw()||pw()||Qd()}}const eD=tD;var Im="@firebase/auth",Am="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){gt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iD(e){zi(new hi("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;gt(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ww(e)},u=new vk(s,i,r,l);return xk(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),zi(new hi("auth-internal",t=>{const n=vi(t.getProvider("auth").getImmediate());return(s=>new nD(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hn(Im,Am,sD(e)),Hn(Im,Am,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=300,oD=bv("authIdTokenMaxAge")||rD;let Sm=null;const aD=e=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>oD)return;const i=n?.token;Sm!==i&&(Sm=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Gc(e=gd()){const t=xc(e,"auth");if(t.isInitialized())return t.getImmediate();const n=Ck(e,{popupRedirectResolver:eD,persistence:[d1,t1,Dw]}),s=bv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(s,location.origin);if(location.origin===r.origin){const o=aD(r.toString());Qk(n,o,()=>o(n.currentUser)),Yk(n,a=>o(a))}}const i=_v("auth");return i&&Pk(n,`http://${i}`),n}function lD(){return document.getElementsByTagName("head")?.[0]??document}bk({loadJS(e){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",e),s.onload=t,s.onerror=i=>{const r=Qn("internal-error");r.customData=i,n(r)},s.type="text/javascript",s.charset="UTF-8",lD().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iD("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="firebasestorage.googleapis.com",cD="storageBucket",uD=120*1e3,hD=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends ss{constructor(t,n,s=0){super(Bu(t),`Firebase Storage: ${n} (${Bu(t)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,is.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Bu(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ns;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ns||(ns={}));function Bu(e){return"storage/"+e}function dD(){const e="An unknown error occurred, please check the error payload for server response.";return new is(ns.UNKNOWN,e)}function fD(){return new is(ns.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function pD(){return new is(ns.CANCELED,"User canceled the upload/download.")}function gD(e){return new is(ns.INVALID_URL,"Invalid URL '"+e+"'.")}function mD(e){return new is(ns.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Rm(e){return new is(ns.INVALID_ARGUMENT,e)}function Bw(){return new is(ns.APP_DELETED,"The Firebase app was deleted.")}function _D(e){return new is(ns.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let s;try{s=Sn.makeFromUrl(t,n)}catch{return new Sn(t,"")}if(s.path==="")return s;throw mD(t)}static makeFromUrl(t,n){let s=null;const i="([A-Za-z0-9.\\-_]+)";function r(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(D){D.path_=decodeURIComponent(D.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${d}/${h}/b/${i}/o${f}`,"i"),b={bucket:1,path:3},w=n===Uw?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",S=new RegExp(`^https?://${w}/${i}/${v}`,"i"),x=[{regex:a,indices:l,postModify:r},{regex:g,indices:b,postModify:u},{regex:S,indices:{bucket:1,path:2},postModify:u}];for(let D=0;D<x.length;D++){const L=x[D],W=L.regex.exec(t);if(W){const T=W[L.indices.bucket];let _=W[L.indices.path];_||(_=""),s=new Sn(T,_),L.postModify(s);break}}if(s==null)throw gD(t);return s}}class yD{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(e,t,n){let s=1,i=null,r=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...v){u||(u=!0,t.apply(null,v))}function d(v){i=setTimeout(()=>{i=null,e(g,l())},v)}function f(){r&&clearTimeout(r)}function g(v,...S){if(u){f();return}if(v){f(),h.call(null,v,...S);return}if(l()||o){f(),h.call(null,v,...S);return}s<64&&(s*=2);let x;a===1?(a=2,x=0):x=(s+Math.random())*1e3,d(x)}let b=!1;function w(v){b||(b=!0,f(),!u&&(i!==null?(v||(a=2),clearTimeout(i),d(0)):v||(a=1)))}return d(0),r=setTimeout(()=>{o=!0,w(!0)},n),w}function bD(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(e){return e!==void 0}function Cm(e,t,n,s){if(s<t)throw Rm(`Invalid value for '${e}'. Expected ${t} or greater.`);if(s>n)throw Rm(`Invalid value for '${e}'. Expected ${n} or less.`)}function ED(e){const t=encodeURIComponent;let n="?";for(const s in e)if(e.hasOwnProperty(s)){const i=t(s)+"="+t(e[s]);n=n+i+"&"}return n=n.slice(0,-1),n}var nc;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(nc||(nc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,r=t.indexOf(e)!==-1;return n||i||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(t,n,s,i,r,o,a,l,u,h,d,f=!0,g=!1){this.url_=t,this.method_=n,this.headers_=s,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,w)=>{this.resolve_=b,this.reject_=w,this.start_()})}start_(){const t=(s,i)=>{if(i){s(!1,new Qa(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(o),this.pendingConnection_=null;const a=r.getErrorCode()===nc.NO_ERROR,l=r.getStatus();if(!a||TD(l,this.additionalRetryCodes_)&&this.retry){const h=r.getErrorCode()===nc.ABORT;s(!1,new Qa(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;s(!0,new Qa(u,r))})},n=(s,i)=>{const r=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());wD(l)?r(l):r()}catch(l){o(l)}else if(a!==null){const l=dD();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?Bw():pD();o(l)}else{const l=fD();o(l)}};this.canceled_?n(!1,new Qa(!1,null,!0)):this.backoffId_=vD(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&bD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qa{constructor(t,n,s){this.wasSuccessCode=t,this.connection=n,this.canceled=!!s}}function AD(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function SD(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function RD(e,t){t&&(e["X-Firebase-GMPID"]=t)}function CD(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function xD(e,t,n,s,i,r,o=!0,a=!1){const l=ED(e.urlParams),u=e.url+l,h=Object.assign({},e.headers);return RD(h,t),AD(h,n),SD(h,r),CD(h,s),new ID(u,e.method,h,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function kD(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(t,n){this._service=t,n instanceof Sn?this._location=n:this._location=Sn.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new sc(t,n)}get root(){const t=new Sn(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kD(this._location.path)}get storage(){return this._service}get parent(){const t=PD(this._location.path);if(t===null)return null;const n=new Sn(this._location.bucket,t);return new sc(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw _D(t)}}function xm(e,t){const n=t?.[cD];return n==null?null:Sn.makeFromBucketSpec(n,e)}function DD(e,t,n,s={}){e.host=`${t}:${n}`;const i=Qi(t);i&&(hd(`https://${e.host}/b`),dd("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:r}=s;r&&(e._overrideAuthToken=typeof r=="string"?r:wv(r,e.app.options.projectId))}class OD{constructor(t,n,s,i,r,o=!1){this.app=t,this._authProvider=n,this._appCheckProvider=s,this._url=i,this._firebaseVersion=r,this._isUsingEmulator=o,this._bucket=null,this._host=Uw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=uD,this._maxUploadRetryTime=hD,this._requests=new Set,i!=null?this._bucket=Sn.makeFromBucketSpec(i,this._host):this._bucket=xm(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Sn.makeFromBucketSpec(this._url,t):this._bucket=xm(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Cm("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Cm("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new sc(this,t)}_makeRequest(t,n,s,i,r=!0){if(this._deleted)return new yD(Bw());{const o=xD(t,this._appId,s,i,n,this._firebaseVersion,r,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[s,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,s,i).getPromise()}}const Pm="@firebase/storage",km="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="storage";function MD(e=gd(),t){e=nn(e);const s=xc(e,jw).getImmediate({identifier:t}),i=yv("storage");return i&&ND(s,...i),s}function ND(e,t,n,s={}){DD(e,t,n,s)}function VD(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new OD(n,s,i,t,Xi)}function LD(){zi(new hi(jw,VD,"PUBLIC").setMultipleInstances(!0)),Hn(Pm,km,""),Hn(Pm,km,"esm2020")}LD();const FD={apiKey:"AIzaSyA88mxzUStbuMFKNr9Q0OODtHXmpyuqvBY",authDomain:"findyourfit-93e9f.firebaseapp.com",projectId:"findyourfit-93e9f",storageBucket:"findyourfit-93e9f.firebasestorage.app",messagingSenderId:"715690823951",appId:"1:715690823951:web:f3af86677f7d990c55ae7a",measurementId:"G-2GTC9GRYRL"},ef=Iv(FD),xe=RP(ef),ys=Gc(ef);MD(ef);const pn=F0("user",{state:()=>({userData:null,moodData:null,journalData:null,therapists:null}),actions:{async fetchUserData(){const e=ys.currentUser;if(!e)return;const t=ze(xe,"users",e.uid),n=await Er(t);n.exists()&&(this.userData=n.data(),this.userData.streak||(this.userData.streak={count:1,lastUpdate:Yn()},await wn(t,this.userData,{merge:!0})),await this.updateStreak(),await this.getMood(),await this.getJournalEntries(),await this.getTherapists())},setUserData(e){this.userData=e},setMoodData(e){this.moodData=e},async updateStreak(){const e=ys.currentUser;if(!e||!this.userData?.streak)return;const{count:t,lastUpdate:n}=this.userData.streak;if(!n||typeof n.toDate!="function"){this.userData.streak={count:1,lastUpdate:Yn()},await wn(ze(xe,"users",e.uid),this.userData,{merge:!0});return}const s=n.toDate(),i=new Date;this.isSameDay(s,i)||(this.isYesterday(s,i)?this.userData.streak.count=t+1:this.userData.streak.count=1,this.userData.streak.lastUpdate=Yn(),await wn(ze(xe,"users",e.uid),this.userData,{merge:!0}))},isSameDay(e,t){return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e.getUTCDate()===t.getUTCDate()},isYesterday(e){const t=e,n=new Date,s=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate());return(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate())-s)/(1e3*60*60*24)===1},async getMood(){const e=ys.currentUser;if(!e)return;const t=ze(xe,"mood",e.uid),n=await Er(t);n.exists()&&(this.moodData=n.data())},async getJournalEntries(){const e=ys.currentUser;if(!e)return;const t=ze(xe,"journals",e.uid),n=await Er(t);if(n.exists()){const s=n.data(),i=Object.entries(s).sort((r,o)=>Number(o[0])-Number(r[0])).map(([r,o])=>({id:r,...o}));this.journalData=i}},async getTherapists(){const e=[];return(await zP(SP(xe,"therapists"))).forEach(n=>{e.push({id:n.id,...n.data()})}),this.therapists=e,this.therapists}}}),sn=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},UD={class:"modal_holder"},BD={class:"modal_heading_holder inter font_size_xs"},jD=["innerHTML"],zD={__name:"errorModal",props:{errorMessage:{type:String,required:!0}},setup(e){return(t,n)=>(X(),nt("div",{class:"modal_overlay",onClick:n[1]||(n[1]=cd(s=>t.$emit("close"),["self"])),role:"dialog","aria-modal":"true"},[O("div",UD,[O("div",BD,[n[2]||(n[2]=O("span",null,"Attention!",-1)),O("button",{class:"modal_close_button",onClick:n[0]||(n[0]=s=>t.$emit("close"))},"")]),O("div",{class:"modal_content_holder inter font_size_xs",innerHTML:e.errorMessage},null,8,jD)])]))}},Wr=sn(zD,[["__scopeId","data-v-b33337de"]]),$D={class:"modal_overlay",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},HD={class:"modal_holder"},WD={id:"modal-title",class:"modal_heading_holder inter font_size_xs"},qD={class:"modal_content_holder inter font_size_xs"},KD=["value"],GD=["value"],YD={__name:"userInfoModal",props:{globalUser:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=pn();Rc();const s=e,i=ot([]),r=ot(""),o=ot(""),a=ot(""),l=ot(""),u=ot(""),h=ot([{value:"male",text:"Male"},{value:"female",text:"Female"},{value:"other",text:"Other"}]),d=ot(!1),f=ot("");Ds(async()=>{const P=await(await fetch("https://restcountries.com/v3.1/all?fields=name,cca3,flags")).json();i.value=P.sort((x,D)=>x.name.common.localeCompare(D.name.common))});const g=S=>/^\d{10}$/.test(S),b=S=>{if(!/^\d{4}\/\d{2}\/\d{2}$/.test(S))return!1;const[P,x,D]=S.split("/").map(Number),L=new Date(P,x-1,D);return L.getFullYear()===P&&L.getMonth()===x-1&&L.getDate()===D},w=async()=>{if(Gc().currentUser,f.value="",d.value=!1,!g(a.value)){f.value="Contact Number must be a valid 10-digit number.",d.value=!0;return}if(!b(l.value)){f.value="Date of Birth must be in the format yyyy/mm/dd.",d.value=!0;return}const P={personalInfo:{name:o.value,contactNumber:a.value,dateOfBirth:l.value,email:s.globalUser.email,country:r.value,gender:u.value},streak:{count:1,lastUpdate:Yn()},loginDate:new Date().toISOString(),uid:s.globalUser.uid};await wn(ze(xe,"users",s.globalUser.uid),P),n.setUserData(P),window.location.reload()},v=()=>{d.value=!1,f.value=""};return(S,P)=>(X(),nt("div",$D,[O("div",HD,[O("div",WD,[P[6]||(P[6]=O("span",{style:{width:"80%"}},"User Information",-1)),O("button",{class:"modal_close_button",onClick:P[0]||(P[0]=x=>S.$emit("close"))},"")]),O("div",qD,[P[10]||(P[10]=O("div",{class:"modal_content_description"}," We collect your name, date of birth, and contact number to create your profile, personalize your therapy experience, and stay in touch for updates or support. Your information is kept secure and private at all times. ",-1)),O("form",{class:"modal_form_holder",onSubmit:cd(w,["prevent"])},[Zt(O("input",{class:"modal_input inter font_size_xs",type:"text",placeholder:"Name & Surname","onUpdate:modelValue":P[1]||(P[1]=x=>o.value=x),required:""},null,512),[[Pe,o.value]]),Zt(O("input",{class:"modal_input inter font_size_xs",type:"tel",placeholder:"Contact Number","onUpdate:modelValue":P[2]||(P[2]=x=>a.value=x),required:""},null,512),[[Pe,a.value]]),Zt(O("input",{class:"modal_input inter font_size_xs",type:"text",placeholder:"Date of Birth (yyyy/mm/dd)","onUpdate:modelValue":P[3]||(P[3]=x=>l.value=x),required:""},null,512),[[Pe,l.value]]),Zt(O("select",{class:"modal_input inter font_size_xs","onUpdate:modelValue":P[4]||(P[4]=x=>u.value=x)},[P[7]||(P[7]=O("option",{disabled:"",value:""},"Please select one",-1)),(X(!0),nt(xt,null,re(h.value,x=>(X(),nt("option",{key:x.value,value:x.value},Et(x.text),9,KD))),128))],512),[[ni,u.value]]),Zt(O("select",{class:"modal_input inter font_size_xs","onUpdate:modelValue":P[5]||(P[5]=x=>r.value=x),id:"country"},[P[8]||(P[8]=O("option",{disabled:"",value:""},"Select your country",-1)),(X(!0),nt(xt,null,re(i.value,x=>(X(),nt("option",{key:x.cca3,value:x.cca3},Et(x.name.common),9,GD))),128))],512),[[ni,r.value]]),P[9]||(P[9]=O("button",{type:"submit",class:"modal_button inter font_size_xs"},"Confirm",-1))],32)])]),d.value?(X(),Re(Wr,{key:0,errorMessage:f.value,onClose:v},null,8,["errorMessage"])):me("",!0)]))}},QD=sn(YD,[["__scopeId","data-v-252a7fe2"]]),XD={class:"login_page"},JD={class:"login_page_content"},ZD={class:"login_page_form"},tO={class:"login_page_form_fields"},eO=["type"],nO={class:"show_password_toggle inter font_size_xs"},sO={class:"login_page_toggle_register inter font_size_xs"},iO={__name:"loginRegister",setup(e){const t=pn(),n=Rc(),s=ot("password"),i=ot(null),r=ot(""),o=ot(""),a=ot("login"),l=ot(!1),u=ot(""),h=ot(!1);new gs().addScope("https://www.googleapis.com/auth/contacts.readonly");const f=()=>{s.value=s.value==="password"?"text":"password"},g=()=>{a.value=a.value==="login"?"register":"login"},b=x=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x),w=()=>{if(!r.value){u.value="Please enter your email to reset your password!",l.value=!0;return}qk(ys,r.value).then(()=>{u.value="An email has been sent to reset your password!",l.value=!0})},v=x=>{const D=x.toDate(),L=new Date,W=new Date(L.getFullYear(),L.getMonth(),L.getDate()),T=new Date(W);return T.setDate(W.getDate()-1),D>=T&&D<W},S=async x=>{x.streak&&(v(x.streak.lastUpdate)?x.streak.count+=1:x.streak.count=1,x.streak.lastUpdate=Yn(),x.loginDate=Yn(),await wn(ze(xe,"users",x.uid),x))},P=async()=>{try{if(u.value="",l.value=!1,!b(r.value)){u.value="Invalid email format!",l.value=!0;return}if(a.value==="register"){const D=(await Kk(ys,r.value,o.value)).user;i.value={uid:D.uid,email:D.email},h.value=!0}else{const D=(await Gk(ys,r.value,o.value)).user,L=ze(xe,"users",D.uid),W=await Er(L);if(W.exists()){const T=W.data();T&&(await S(T),t.setUserData(T),n.push({name:"Navigation"}))}}}catch(x){x.code==="auth/invalid-credential"?u.value="Invalid login details.":x.code==="auth/email-already-in-use"?u.value="Email already in use.":u.value="An unexpected error occurred.",l.value=!0}};return(x,D)=>(X(),nt("div",XD,[O("div",JD,[D[4]||(D[4]=O("div",{class:"login_page_intro inter font_size_xs"},[O("div",{class:"login_page_intro_text"},[O("div",{class:"font_size_m licorice_regular"},"Welcome to Finding Your Fit"),O("br"),O("br"),se(" A space designed to help you understand yourself better, build emotional balance, and grow into the life that fits you best. Take a moment to reconnect, reflect, and start working toward your goals  one step at a time. ")])],-1)),O("div",ZD,[O("form",tO,[Zt(O("input",{class:"login_page_input inter font_size_xs",type:"text",placeholder:"Email","onUpdate:modelValue":D[0]||(D[0]=L=>r.value=L)},null,512),[[Pe,r.value]]),Zt(O("input",{class:"login_page_password inter font_size_xs",type:s.value,placeholder:"Password","onUpdate:modelValue":D[1]||(D[1]=L=>o.value=L)},null,8,eO),[[T0,o.value]]),O("div",nO,[O("label",null,[O("input",{type:"checkbox",onChange:f},null,32),D[3]||(D[3]=se(" Show Password ",-1))])])]),O("button",{class:"login_page_button inter font_size_xs",onClick:P},Et(a.value==="login"?"Login":"Register"),1),O("div",{class:"login_page_forgot_password inter font_size_xs",onClick:w},Et(a.value==="login"?"Forgot Password?":""),1)]),O("div",sO,[O("u",{onClick:g},Et(a.value==="login"?"Register":"Login"),1)])]),l.value?(X(),Re(Wr,{key:0,errorMessage:u.value,onClose:D[2]||(D[2]=L=>l.value=!1)},null,8,["errorMessage"])):me("",!0),h.value&&i.value?(X(),Re(QD,{key:1,globalUser:i.value},null,8,["globalUser"])):me("",!0)]))}},rO=sn(iO,[["__scopeId","data-v-3402d151"]]),Dm=[{content:"Success is not final, failure is not fatal: It is the courage to continue that counts.",author:"Winston Churchill"},{content:"The only way to do great work is to love what you do.",author:"Steve Jobs"},{content:"Don't watch the clock; do what it does. Keep going.",author:"Sam Levenson"},{content:"You are never too old to set another goal or to dream a new dream.",author:"C.S. Lewis"},{content:"Believe you can and you're halfway there.",author:"Theodore Roosevelt"},{content:"Your limitationits only your imagination.",author:"Unknown"},{content:"Push yourself, because no one else is going to do it for you.",author:"Unknown"},{content:"Great things never come from comfort zones.",author:"Unknown"},{content:"Dream it. Wish it. Do it.",author:"Unknown"},{content:"Success doesnt just find you. You have to go out and get it.",author:"Unknown"},{content:"The harder you work for something, the greater youll feel when you achieve it.",author:"Unknown"},{content:"Dont stop when youre tired. Stop when youre done.",author:"Unknown"},{content:"Wake up with determination. Go to bed with satisfaction.",author:"Unknown"},{content:"Do something today that your future self will thank you for.",author:"Unknown"},{content:"Little things make big days.",author:"Unknown"},{content:"Its going to be hard, but hard does not mean impossible.",author:"Unknown"},{content:"Dont wait for opportunity. Create it.",author:"Unknown"},{content:"Sometimes were tested not to show our weaknesses, but to discover our strengths.",author:"Unknown"},{content:"The key to success is to focus on goals, not obstacles.",author:"Unknown"},{content:"Dream bigger. Do bigger.",author:"Unknown"},{content:"Dont limit your challenges. Challenge your limits.",author:"Unknown"},{content:"What you get by achieving your goals is not as important as what you become by achieving your goals.",author:"Zig Ziglar"},{content:"Start where you are. Use what you have. Do what you can.",author:"Arthur Ashe"},{content:"The future depends on what you do today.",author:"Mahatma Gandhi"},{content:"Hustle in silence. Let your success make the noise.",author:"Unknown"},{content:"If you want to achieve greatness stop asking for permission.",author:"Unknown"},{content:"Opportunities dont happen. You create them.",author:"Chris Grosser"},{content:"Dont watch the clock; do what it does. Keep going.",author:"Sam Levenson"},{content:"Action is the foundational key to all success.",author:"Pablo Picasso"},{content:"The only limit to our realization of tomorrow is our doubts of today.",author:"Franklin D. Roosevelt"},{content:"Hardships often prepare ordinary people for an extraordinary destiny.",author:"C.S. Lewis"},{content:"Dont wait. The time will never be just right.",author:"Napoleon Hill"},{content:"Believe in yourself and all that you are.",author:"Christian D. Larson"},{content:"Fall seven times and stand up eight.",author:"Japanese Proverb"},{content:"Everything youve ever wanted is on the other side of fear.",author:"George Addair"},{content:"Success is what comes after you stop making excuses.",author:"Luis Galarza"},{content:"Your life does not get better by chance, it gets better by change.",author:"Jim Rohn"},{content:"Dont be pushed around by the fears in your mind. Be led by the dreams in your heart.",author:"Roy T. Bennett"},{content:"Doubt kills more dreams than failure ever will.",author:"Suzy Kassem"},{content:"The only way to achieve the impossible is to believe it is possible.",author:"Charles Kingsleigh"},{content:"Do what you can with all you have, wherever you are.",author:"Theodore Roosevelt"},{content:"Dreams dont work unless you do.",author:"John C. Maxwell"},{content:"Dont wait for the perfect moment. Take the moment and make it perfect.",author:"Unknown"},{content:"Work hard in silence. Let success be your noise.",author:"Frank Ocean"},{content:"Success is not in what you have, but who you are.",author:"Bo Bennett"},{content:"The secret of getting ahead is getting started.",author:"Mark Twain"},{content:"Your passion is waiting for your courage to catch up.",author:"Isabelle Lafleche"},{content:"Great things never come from comfort zones.",author:"Unknown"},{content:"Push yourself, because no one else is going to do it for you.",author:"Unknown"},{content:"Failure is the condiment that gives success its flavor.",author:"Truman Capote"},{content:"Dont quit. Suffer now and live the rest of your life as a champion.",author:"Muhammad Ali"},{content:"The harder you work for something, the greater youll feel when you achieve it.",author:"Unknown"},{content:"Do something today that your future self will thank you for.",author:"Sean Patrick Flanery"},{content:"Little by little, day by day, what is meant for you will find its way.",author:"Unknown"},{content:"You are capable of amazing things.",author:"Unknown"},{content:"Start each day with a positive thought and a grateful heart.",author:"Roy T. Bennett"},{content:"The way to get started is to quit talking and begin doing.",author:"Walt Disney"},{content:"Dont let yesterday take up too much of today.",author:"Will Rogers"},{content:"You dont have to be great to start, but you have to start to be great.",author:"Zig Ziglar"},{content:"Opportunities dont happen. You create them.",author:"Chris Grosser"},{content:"It always seems impossible until its done.",author:"Nelson Mandela"},{content:"Push yourself, because no one else is going to do it for you.",author:"Unknown"},{content:"Great things never come from comfort zones.",author:"Unknown"},{content:"Dream it. Wish it. Do it.",author:"Unknown"},{content:"Success doesnt just find you. You have to go out and get it.",author:"Unknown"},{content:"The harder you work for something, the greater youll feel when you achieve it.",author:"Unknown"},{content:"Dont stop when youre tired. Stop when youre done.",author:"Unknown"},{content:"Wake up with determination. Go to bed with satisfaction.",author:"Unknown"},{content:"Do something today that your future self will thank you for.",author:"Unknown"},{content:"Little things make big days.",author:"Unknown"},{content:"Its going to be hard, but hard does not mean impossible.",author:"Unknown"},{content:"Dont wait for opportunity. Create it.",author:"Unknown"},{content:"Sometimes were tested not to show our weaknesses, but to discover our strengths.",author:"Unknown"},{content:"The key to success is to focus on goals, not obstacles.",author:"Unknown"},{content:"Dream bigger. Do bigger.",author:"Unknown"},{content:"Dont limit your challenges. Challenge your limits.",author:"Unknown"},{content:"What you get by achieving your goals is not as important as what you become by achieving your goals.",author:"Zig Ziglar"},{content:"Start where you are. Use what you have. Do what you can.",author:"Arthur Ashe"},{content:"The future depends on what you do today.",author:"Mahatma Gandhi"},{content:"Hustle in silence. Let your success make the noise.",author:"Unknown"},{content:"If you want to achieve greatness stop asking for permission.",author:"Unknown"},{content:"Action is the foundational key to all success.",author:"Pablo Picasso"},{content:"Hardships often prepare ordinary people for an extraordinary destiny.",author:"C.S. Lewis"},{content:"Fall seven times and stand up eight.",author:"Japanese Proverb"},{content:"Everything youve ever wanted is on the other side of fear.",author:"George Addair"},{content:"Your life does not get better by chance, it gets better by change.",author:"Jim Rohn"},{content:"Dont be pushed around by the fears in your mind. Be led by the dreams in your heart.",author:"Roy T. Bennett"},{content:"Doubt kills more dreams than failure ever will.",author:"Suzy Kassem"},{content:"The only way to achieve the impossible is to believe it is possible.",author:"Charles Kingsleigh"},{content:"Do what you can with all you have, wherever you are.",author:"Theodore Roosevelt"},{content:"Dreams dont work unless you do.",author:"John C. Maxwell"},{content:"Dont wait for the perfect moment. Take the moment and make it perfect.",author:"Unknown"},{content:"Work hard in silence. Let success be your noise.",author:"Frank Ocean"},{content:"Success is not in what you have, but who you are.",author:"Bo Bennett"},{content:"The secret of getting ahead is getting started.",author:"Mark Twain"},{content:"Your passion is waiting for your courage to catch up.",author:"Isabelle Lafleche"},{content:"Great things never come from comfort zones.",author:"Unknown"},{content:"Push yourself, because no one else is going to do it for you.",author:"Unknown"},{content:"Failure is the condiment that gives success its flavor.",author:"Truman Capote"},{content:"Dont quit. Suffer now and live the rest of your life as a champion.",author:"Muhammad Ali"},{content:"The harder you work for something, the greater youll feel when you achieve it.",author:"Unknown"},{content:"Do something today that your future self will thank you for.",author:"Sean Patrick Flanery"},{content:"Little by little, day by day, what is meant for you will find its way.",author:"Unknown"},{content:"You are capable of amazing things.",author:"Unknown"},{content:"Start each day with a positive thought and a grateful heart.",author:"Roy T. Bennett"},{content:"The way to get started is to quit talking and begin doing.",author:"Walt Disney"},{content:"Dont let yesterday take up too much of today.",author:"Will Rogers"},{content:"You dont have to be great to start, but you have to start to be great.",author:"Zig Ziglar"},{content:"Opportunities dont happen. You create them.",author:"Chris Grosser"},{content:"It always seems impossible until its done.",author:"Nelson Mandela"},{content:"Do what you love, love what you do.",author:"Unknown"},{content:"Success is the sum of small efforts, repeated day in and day out.",author:"Robert Collier"},{content:"Motivation is what gets you started. Habit is what keeps you going.",author:"Jim Ryun"},{content:"Dont let fear decide your future.",author:"Shalane Flanagan"},{content:"You miss 100% of the shots you dont take.",author:"Wayne Gretzky"},{content:"Start where you are. Use what you have. Do what you can.",author:"Arthur Ashe"},{content:"Do one thing every day that scares you.",author:"Eleanor Roosevelt"},{content:"The best way to predict the future is to invent it.",author:"Alan Kay"},{content:"Difficult roads often lead to beautiful destinations.",author:"Unknown"},{content:"Believe in yourself, take on your challenges, dig deep within yourself to conquer fears.",author:"Chantal Sutherland"},{content:"If it doesnt challenge you, it wont change you.",author:"Fred DeVito"},{content:"It always seems impossible until its done.",author:"Nelson Mandela"},{content:"The expert in anything was once a beginner.",author:"Helen Hayes"},{content:"Dont count the days, make the days count.",author:"Muhammad Ali"},{content:"The harder the battle, the sweeter the victory.",author:"Les Brown"},{content:"Success is liking yourself, liking what you do, and liking how you do it.",author:"Maya Angelou"},{content:"You dont have to see the whole staircase, just take the first step.",author:"Martin Luther King Jr."},{content:"Small daily improvements over time lead to stunning results.",author:"Robin Sharma"},{content:"Dont let what you cannot do interfere with what you can do.",author:"John Wooden"},{content:"The only limit is the one you set yourself.",author:"Felix Baumgartner"},{content:"Great things are done by a series of small things brought together.",author:"Vincent Van Gogh"},{content:"Your dream doesnt have an expiration date. Take a deep breath and try again.",author:"KT Witten"},{content:"Action is the foundational key to all success.",author:"Pablo Picasso"},{content:"You are braver than you believe, stronger than you seem, and smarter than you think.",author:"A.A. Milne"},{content:"Work until you no longer have to introduce yourself.",author:"Unknown"},{content:"The best revenge is massive success.",author:"Frank Sinatra"},{content:"Your only limit is your mind.",author:"Unknown"},{content:"Stop being afraid of what could go wrong and start being excited about what could go right.",author:"Unknown"},{content:"Do not wait to strike till the iron is hot; but make it hot by striking.",author:"William Butler Yeats"},{content:"Dont let perfectionism get in the way of progress.",author:"Unknown"},{content:"Great minds discuss ideas; average minds discuss events; small minds discuss people.",author:"Eleanor Roosevelt"},{content:"Strive not to be a success, but rather to be of value.",author:"Albert Einstein"},{content:"Your passion is waiting for your courage to catch up.",author:"Isabelle Lafleche"},{content:"Do what you can, with what you have, where you are.",author:"Theodore Roosevelt"},{content:"Success is not about the destination, its about the journey.",author:"Zig Ziglar"},{content:"The key to success is to focus on goals, not obstacles.",author:"Unknown"},{content:"A year from now you may wish you had started today.",author:"Karen Lamb"},{content:"Dont stop until youre proud.",author:"Unknown"},{content:"Dream big. Start small. Act now.",author:"Robin Sharma"},{content:"Hard work beats talent when talent doesnt work hard.",author:"Tim Notke"},{content:"Stay positive, work hard, make it happen.",author:"Unknown"},{content:"Your time is limited, dont waste it living someone elses life.",author:"Steve Jobs"},{content:"The difference between ordinary and extraordinary is that little extra.",author:"Jimmy Johnson"},{content:"Dont let yesterday take up too much of today.",author:"Will Rogers"},{content:"Dont wait for opportunity. Create it.",author:"Unknown"},{content:"Success doesnt come to you, you go to it.",author:"Marva Collins"},{content:"A river cuts through rock not because of its power, but because of its persistence.",author:"Jim Watkins"},{content:"Discipline is the bridge between goals and accomplishment.",author:"Jim Rohn"},{content:"Do what is right, not what is easy nor what is popular.",author:"Unknown"},{content:"Be so good they cant ignore you.",author:"Steve Martin"},{content:"Dont limit yourself. Many people limit themselves to what they think they can do.",author:"Mary Kay Ash"},{content:"Your life does not get better by chance, it gets better by change.",author:"Jim Rohn"},{content:"Success is the progressive realization of a worthy goal or ideal.",author:"Earl Nightingale"},{content:"To succeed in life, you need two things: ignorance and confidence.",author:"Mark Twain"},{content:"Courage doesnt always roar. Sometimes courage is the quiet voice at the end of the day saying, I will try again tomorrow.",author:"Mary Anne Radmacher"},{content:"Start each day with a positive thought and a grateful heart.",author:"Roy T. Bennett"},{content:"Dont let small minds convince you that your dreams are too big.",author:"Unknown"},{content:"Success is no accident. It is hard work, perseverance, learning, studying, sacrifice and most of all, love of what you are doing.",author:"Pel"},{content:"The best way out is always through.",author:"Robert Frost"},{content:"Failure is simply the opportunity to begin again, this time more intelligently.",author:"Henry Ford"},{content:"Dont wish it were easier. Wish you were better.",author:"Jim Rohn"},{content:"The mind is everything. What you think you become.",author:"Buddha"},{content:"When you feel like quitting, remember why you started.",author:"Unknown"},{content:"Success usually comes to those who are too busy to be looking for it.",author:"Henry David Thoreau"},{content:"Dont be afraid to give up the good to go for the great.",author:"John D. Rockefeller"},{content:"Do not be embarrassed by your failures, learn from them and start again.",author:"Richard Branson"},{content:"Dont wait for the perfect moment. Take the moment and make it perfect.",author:"Unknown"},{content:"Small deeds done are better than great deeds planned.",author:"Peter Marshall"},{content:"Act as if what you do makes a difference. It does.",author:"William James"},{content:"Success is not how high you have climbed, but how you make a positive difference to the world.",author:"Roy T. Bennett"},{content:"Your future is created by what you do today, not tomorrow.",author:"Robert Kiyosaki"},{content:"The secret of success is to do the common thing uncommonly well.",author:"John D. Rockefeller Jr."},{content:"What seems to us as bitter trials are often blessings in disguise.",author:"Oscar Wilde"},{content:"The only place where success comes before work is in the dictionary.",author:"Vidal Sassoon"},{content:"Happiness is not something ready-made. It comes from your own actions.",author:"Dalai Lama"},{content:"Opportunities multiply as they are seized.",author:"Sun Tzu"},{content:"Do not go where the path may lead, go instead where there is no path and leave a trail.",author:"Ralph Waldo Emerson"},{content:"Success is liking yourself, liking what you do, and liking how you do it.",author:"Maya Angelou"},{content:"Be not afraid of life. Believe that life is worth living, and your belief will help create the fact.",author:"William James"},{content:"Dont be afraid to start over. Its a chance to build something better.",author:"Unknown"},{content:"Success isnt always about greatness. Its about consistency.",author:"Dwayne Johnson"},{content:"You are confined only by the walls you build yourself.",author:"Andrew Murphy"},{content:"The best time to plant a tree was 20 years ago. The second best time is now.",author:"Chinese Proverb"},{content:"Dreams dont work unless you do.",author:"John C. Maxwell"},{content:"Dont let the fear of losing be greater than the excitement of winning.",author:"Robert Kiyosaki"},{content:"You cant cross the sea merely by standing and staring at the water.",author:"Rabindranath Tagore"},{content:"Success is the sum of small efforts, repeated day in and day out.",author:"Robert Collier"},{content:"Be so good they cant ignore you.",author:"Steve Martin"},{content:"Your limitationits only your imagination.",author:"Unknown"},{content:"The journey of a thousand miles begins with one step.",author:"Lao Tzu"},{content:"Dont limit your challenges. Challenge your limits.",author:"Jerry Dunn"},{content:"Great things never come from comfort zones.",author:"Unknown"},{content:"Its not whether you get knocked down, its whether you get up.",author:"Vince Lombardi"},{content:"Everything you can imagine is real.",author:"Pablo Picasso"},{content:"Success is not in never falling, but in rising every time we fall.",author:"Confucius"},{content:"Dont wait for opportunity. Create it.",author:"George Bernard Shaw"},{content:"The best dreams happen when youre awake.",author:"Cherie Gilderbloom"},{content:"Do something today that your future self will thank you for.",author:"Sean Patrick Flanery"},{content:"What you do today can improve all your tomorrows.",author:"Ralph Marston"}];function oO(){const e=Math.floor(Math.random()*Dm.length);return Dm[e]}const aO="/assets/my_therapist-BGpDoE1u.png",lO="/assets/my_journal-ByAOnFF2.png",cO="/assets/journal-BcWmOkN8.png",uO="/assets/my_courses-DAreBNF0.png",hO="/assets/therapist-sZYqYBaF.png",dO="/assets/mood_track-DScXBvTj.png",fO={class:"home_container"},pO={class:"greeting_section licorice_regular font_size_m"},gO={class:"checkin_section"},mO={class:"feeling_section"},_O={class:"inspiration_section"},yO={class:"quote_text inter font_size_xxs"},vO={class:"offer_section"},bO={class:"offer_list"},wO={class:"offer_icon_wrapper"},EO={class:"offer_content_wrapper"},TO={class:"offer_title inter font_size_xxs"},IO={class:"offer_description inter font_size_xxs"},AO={__name:"home",setup(e){const t=pn(),n=ot({content:"",author:""});ot(!1);const s=Bt(()=>t.userData?.personalInfo.name||"");Bt(()=>[{label:"My Therapist",url:aO},{label:"Journal Entry",url:lO},{label:"Explore Courses",url:uO}]);const i=Bt(()=>[{label:"Expert support at your fingertips",content:"Find and connect with qualified therapists specializing in various areas.",icon:hO},{label:"Personalized mood tracking",content:"Log your daily mood to visualize trends, identify triggers, and gain insights.",icon:dO},{label:"Journaling",content:"A private space for self-reflection, prompts, and gain thoughts.",icon:cO}]);Ds(()=>{console.log("Home mounted"),n.value=oO()});const r=()=>{const o=new Date().getHours();return o<12?"morning":o<18?"afternoon":"evening"};return(o,a)=>(X(),nt("div",fO,[O("div",pO," Good "+Et(r())+", "+Et(s.value)+"! ",1),O("div",gO,[O("div",mO,[a[1]||(a[1]=O("div",{class:"feeling_heading inter font_size_xs"},[O("b",null,"How are you feeling today?")],-1)),a[2]||(a[2]=O("div",{class:"feeling_image"},null,-1)),O("div",{class:"checkin_button inter font_size_xxs",onClick:a[0]||(a[0]=l=>o.$emit("setPage","mood"))}," Check in now ")])]),O("div",_O,[a[3]||(a[3]=O("div",{class:"inspiration_heading inter font_size_xxs"},[O("b",null,"Inspiration")],-1)),O("div",yO,Et(n.value.content),1)]),O("div",vO,[a[4]||(a[4]=O("div",{class:"offer_heading inter font_size_xs"},[O("b",null,"What we offer")],-1)),O("div",bO,[(X(!0),nt(xt,null,re(i.value,l=>(X(),nt("div",{class:"offer_card",key:l.label},[O("div",wO,[O("div",{class:"feature_icon",style:Ts({backgroundImage:`url(${l.icon})`,backgroundSize:"50% 80%",backgroundPosition:"center",backgroundRepeat:"no-repeat"})},null,4)]),O("div",EO,[O("div",TO,[O("b",null,Et(l.label),1)]),O("div",IO,Et(l.content),1)])]))),128))])])]))}},zw=sn(AO,[["__scopeId","data-v-b59b103f"]]),SO={class:"courses_selection_holder inter font_size_xs"},RO=["onClick"],CO={key:0,class:"courses_sub_selection_holder inter"},xO=["onClick"],PO={class:"courses_holder inter"},kO={key:0,class:"empty_courses_holder"},DO={__name:"coursesPage",setup(e){const t=ot("myCourses"),n=ot("saved"),s=[{key:"myCourses",label:"My Courses",cornerClass:"right-rounded"},{key:"discoverCourses",label:"Discover Courses",cornerClass:"left-rounded"}],i=[{key:"saved",label:"Saved",cornerClass:"right-rounded"},{key:"completed",label:"Completed",cornerClass:"left-rounded"}],r=[],o=l=>{t.value=l},a=l=>{n.value=l};return(l,u)=>(X(),nt(xt,null,[u[0]||(u[0]=O("div",{class:"courses_header_holder inter font_size_xs"}," Courses ",-1)),O("div",SO,[(X(),nt(xt,null,re(s,h=>O("div",{key:h.key,class:fn(["courses_selection",{active:t.value===h.key,[h.cornerClass]:!0}]),onClick:d=>o(h.key)},Et(h.label),11,RO)),64))]),u[1]||(u[1]=O("br",null,null,-1)),t.value==="myCourses"?(X(),nt("div",CO,[(X(),nt(xt,null,re(i,h=>O("div",{key:h.key,class:fn(["courses_sub_selection",{active:n.value===h.key,[h.cornerClass]:!0}]),onClick:d=>a(h.key)},Et(h.label),11,xO)),64))])):me("",!0),O("div",PO,[r.length===0?(X(),nt("div",kO," You don't have any courses saved to your profile. ")):me("",!0)])],64))}},$w=sn(DO,[["__scopeId","data-v-4094f417"]]),OO={class:"loading_page_holder"},MO={__name:"loadingPage",setup(e){const t=pn(),n=Rc();return Ds(()=>{t.userData?.uid?n.push({name:"Navigation"}):n.push({name:"Login"})}),(s,i)=>(X(),nt("div",OO))}},NO=sn(MO,[["__scopeId","data-v-5093d853"]]),VO={class:"modal_overlay",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},LO={class:"modal_holder"},FO={id:"modal-title",class:"modal_heading_holder inter font_size_xs"},UO={class:"modal_content_holder inter font_size_xs"},BO=["value"],jO=["value"],ju="editProfileForm",zO={__name:"profileEdit",props:{globalUser:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=pn(),s=t,i=e,r=ot([]),o=ot(""),a=ot(""),l=ot(""),u=ot(""),h=ot(""),d=ot(""),f=ot(!1),g=[{value:"male",text:"Male"},{value:"female",text:"Female"},{value:"other",text:"Other"}];Ds(async()=>{const x=await(await fetch("https://restcountries.com/v3.1/all?fields=name,cca3")).json();r.value=x.sort((L,W)=>L.name.common.localeCompare(W.name.common));const D=JSON.parse(localStorage.getItem(ju));D&&(a.value=D.nameSurname||"",l.value=D.contactNumber||"",u.value=D.dateOfBirth||"",h.value=D.selectedOption||"",o.value=D.selectedCountry||"")}),vs([a,l,u,h,o],()=>{localStorage.setItem(ju,JSON.stringify({nameSurname:a.value,contactNumber:l.value,dateOfBirth:u.value,selectedOption:h.value,selectedCountry:o.value}))},{deep:!0});function b(P){return/^\d{10}$/.test(P)}function w(P){if(!/^\d{4}\/\d{2}\/\d{2}$/.test(P))return!1;const[D,L,W]=P.split("/").map(Number),T=new Date(D,L-1,W);return T.getFullYear()===D&&T.getMonth()===L-1&&T.getDate()===W}const v=async()=>{const x=Gc().currentUser;if(f.value=!1,d.value="",!b(l.value)){d.value="Contact Number must be a valid 10-digit number.",f.value=!0;return}if(!w(u.value)){d.value="Date of Birth must be in the format yyyy/mm/dd.",f.value=!0;return}const D=i.globalUser.userData,L={personalInfo:{name:a.value,contactNumber:l.value,dateOfBirth:u.value,email:D.email||x.email,gender:h.value,country:o.value},uid:D.uid||x.uid,loginDate:D.loginDate,streak:D.streak,profileEdited:Yn()};n.setUserData(L),await wn(ze(xe,"users",L.uid),L),localStorage.removeItem(ju),s("close")},S=()=>{f.value=!1,d.value=""};return(P,x)=>(X(),nt("div",VO,[O("div",LO,[O("div",FO,[x[6]||(x[6]=O("span",{style:{width:"80%"}},"Edit User Information",-1)),O("button",{class:"modal_close_button",onClick:x[0]||(x[0]=D=>P.$emit("close"))},"")]),O("div",UO,[x[10]||(x[10]=O("div",{class:"modal_content_description"}," We collect your name, date of birth, and contact number to create your profile, personalize your therapy experience, and stay in touch for updates or support. Your information is kept secure and private at all times. ",-1)),O("form",{class:"modal_form_holder",onSubmit:cd(v,["prevent"])},[Zt(O("input",{class:"modal_input inter font_size_xs",type:"text",placeholder:"Name & Surname","onUpdate:modelValue":x[1]||(x[1]=D=>a.value=D),required:""},null,512),[[Pe,a.value]]),Zt(O("input",{class:"modal_input inter font_size_xs",type:"tel",placeholder:"Contact Number","onUpdate:modelValue":x[2]||(x[2]=D=>l.value=D),required:""},null,512),[[Pe,l.value]]),Zt(O("input",{class:"modal_input inter font_size_xs",type:"text",placeholder:"Date of Birth (yyyy/mm/dd)","onUpdate:modelValue":x[3]||(x[3]=D=>u.value=D),required:""},null,512),[[Pe,u.value]]),Zt(O("select",{class:"modal_input inter font_size_xs","onUpdate:modelValue":x[4]||(x[4]=D=>h.value=D)},[x[7]||(x[7]=O("option",{disabled:"",value:""},"Please select one",-1)),(X(),nt(xt,null,re(g,D=>O("option",{key:D.value,value:D.value},Et(D.text),9,BO)),64))],512),[[ni,h.value]]),Zt(O("select",{class:"modal_input inter font_size_xs","onUpdate:modelValue":x[5]||(x[5]=D=>o.value=D)},[x[8]||(x[8]=O("option",{disabled:"",value:""},"Select your country",-1)),(X(!0),nt(xt,null,re(r.value,D=>(X(),nt("option",{key:D.cca3,value:D.cca3},Et(D.name.common),9,jO))),128))],512),[[ni,o.value]]),x[9]||(x[9]=O("button",{type:"submit",class:"modal_button inter font_size_xs"},"Confirm",-1))],32)])]),f.value?(X(),Re(Wr,{key:0,errorMessage:d.value,onClose:S},null,8,["errorMessage"])):me("",!0)]))}},Om=sn(zO,[["__scopeId","data-v-f21fc2c6"]]),Hw="/assets/brown_man-DU8HBBmE.png",Ww="/assets/blonde_man-Br_WNAu2.png",qw="/assets/ginger_man-D_7vVZja.png",Kw="/assets/black_man-DZoPS0-N.png",Gw="/assets/brunette_woman-C5YdWLXO.png",Yw="/assets/blonde_woman-IP-2iqnM.png",Qw="/assets/ginger_woman-5AupqmXa.png",Xw="/assets/black_woman-QP95zNq-.png",Lh="/assets/none-BOBk4slU.png",$O={class:"modal_overlay",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},HO={class:"modal_holder"},WO={id:"modal-title",class:"modal_heading_holder inter font_size_xs"},qO={class:"modal_content_holder inter font_size_xs"},KO=["onClick"],GO=["onClick"],YO={__name:"profileAvatar",props:{globalUser:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=pn(),s=Bt(()=>[{label:"Brown Hair",url:Hw,ref:"brown_man"},{label:"Blonde Hair",url:Ww,ref:"blonde_man"},{label:"Ginger Hair",url:qw,ref:"ginger_man"},{label:"Black Hair",url:Kw,ref:"black_man"},{label:"Brown Hair Woman",url:Gw,ref:"brown_woman"},{label:"Blonde Hair Woman",url:Yw,ref:"blonde_woman"},{label:"Ginger Hair Woman",url:Qw,ref:"ginger_woman"},{label:"Black Hair Woman",url:Xw,ref:"black_woman"},{label:"None",url:Lh,ref:"none"}]),i=t,r=e,o=ot("none"),a=u=>{o.value=u,localStorage.setItem("selectedAvatar",u)};Ds(()=>{const u=localStorage.getItem("selectedAvatar");u&&(o.value=u)});const l=async()=>{const u=Gc(),h=r.globalUser.userData,d=u.currentUser;await wn(ze(xe,"users",h.uid||d.uid),{profileAvatar:o.value,profileEdited:Yn()},{merge:!0}),n.userData.profileAvatar=o.value,localStorage.removeItem("selectedAvatar"),i("close")};return(u,h)=>(X(),nt("div",$O,[O("div",HO,[O("div",WO,[h[1]||(h[1]=O("span",{style:{width:"80%"}},"Profile Avatar",-1)),O("button",{class:"modal_close_button",onClick:h[0]||(h[0]=d=>u.$emit("close"))},"")]),O("div",qO,[(X(!0),nt(xt,null,re(s.value,d=>(X(),nt("div",{class:"modal_avatars_holder",key:d.ref},[d.ref===o.value?(X(),nt("div",{key:0,class:"modal_avatar_selected",onClick:f=>a(d.ref),style:Ts({backgroundImage:`url(${d.url})`,backgroundSize:"100% 100%",backgroundPosition:"center center",backgroundRepeat:"no-repeat"})},null,12,KO)):(X(),nt("div",{key:1,class:"modal_avatar",onClick:f=>a(d.ref),style:Ts({backgroundImage:`url(${d.url})`,backgroundSize:"100% 100%",backgroundPosition:"center center",backgroundRepeat:"no-repeat"})},null,12,GO))]))),128))]),O("button",{type:"submit",class:"modal_button inter font_size_xs",onClick:l}," Confirm ")])]))}},Mm=sn(YO,[["__scopeId","data-v-f54a08c5"]]),QO={class:"profile_container"},XO={class:"profile_header"},JO={class:"profile_edit_btn"},ZO={class:"profile_info"},tM={class:"profile_avatar_wrapper"},eM={class:"pfp_edit_button"},nM={class:"profile_user_details font_size_s inter"},sM={class:"font_size_xxs"},iM={class:"profile_stats"},rM=["onClick"],oM={class:"profile_stat_top inter font_size_xs"},aM={key:0,class:"profile_stat_value"},lM={key:0},cM={key:1},uM={key:1,class:"profile_stat_value"},hM={class:"profile_stat_icon"},dM={class:"profile_stat_label inter font_size_xs"},fM={__name:"profile",emits:["setPage"],setup(e,{emit:t}){const n=t,s=Rc(),i=pn(),r=ot(!1),o=ot(!1),a=ot(!1),l=ot(null),u={brown_man:Hw,blonde_man:Ww,ginger_man:qw,black_man:Kw,brown_woman:Gw,blonde_woman:Yw,ginger_woman:Qw,black_woman:Xw,none:Lh},h=Bt(()=>{const W=i.userData?.profileAvatar||"none";return u[W]||Lh}),d=Bt(()=>i.userData?.personalInfo.name||""),f=Bt(()=>i.userData?.personalInfo.email||""),g=Bt(()=>i.userData?.streak?.count||0),b=Bt(()=>i.journalData&&i.journalData.length||0),w=Bt(()=>[{label:"Very Sad",ref:"very_sad",icon:"far fa-sad-tear"},{label:"Sad",ref:"sad",icon:"far fa-frown"},{label:"Neutral",ref:"neutral",icon:"far fa-meh"},{label:"Happy",ref:"happy",icon:"far fa-grin"},{label:"Very Happy",ref:"very_happy",icon:"far fa-grin-beam"}]),v=ot([{label:"App Streak",value:g.value,icon:"fa fa-signal"},{label:"Journal Entries",value:b.value,icon:"fa fa-book"},{label:"Mood Overview",value:"",icon:"fas fa-chart-line"}]);Ds(()=>{l.value=i.userData;const W=new Date().toISOString().split("T")[0];if(!i.moodData||!i.moodData[W])return;r.value=!0;const T=i.moodData[W];for(const _ of w.value)if(_.ref===T.mood){v.value[2].value=_.icon;break}});const S=()=>{o.value=!0},P=async()=>{await Xk(ys),s.push({name:"Login"})},x=()=>{a.value=!0},D=W=>{console.log("Image selected:",W.target.files[0])},L=W=>{W.label=="Mood Overview"&&n("setPage","moodTrends")};return(W,T)=>(X(),nt(xt,null,[O("div",QO,[O("div",XO,[T[5]||(T[5]=O("div",{class:"profile_title font_size_s inter"},null,-1)),O("div",JO,[O("i",{class:"fas fa-edit",onClick:T[0]||(T[0]=_=>S())}),O("i",{class:"fas fa-sign-out-alt",onClick:T[1]||(T[1]=_=>P())})])]),O("div",ZO,[O("div",tM,[O("div",{class:"profile_avatar",style:Ts({backgroundImage:`url(${h.value})`,backgroundSize:"100% 100%",backgroundPosition:"center center",backgroundRepeat:"no-repeat"})},null,4)]),O("div",eM,[O("i",{class:"fas fa-edit",onClick:T[2]||(T[2]=_=>x())}),O("input",{type:"file",ref:"fileInput",style:{display:"none"},accept:"image/*",onChange:D},null,544)]),O("div",nM,[se(Et(d.value)+" ",1),O("span",sM,Et(f.value),1)])]),O("div",iM,[(X(!0),nt(xt,null,re(v.value,(_,E)=>(X(),nt("div",{class:"profile_stat_card",key:E,onClick:R=>L(_)},[O("div",oM,[_.label==="Mood Overview"?(X(),nt("div",aM,[r.value?(X(),nt("div",lM,[O("i",{class:fn(_.value),style:{"font-size":"1.5rem"}},null,2),T[6]||(T[6]=se(" ",-1))])):(X(),nt("div",cM,[...T[7]||(T[7]=[O("i",{class:"far fa-meh",style:{"font-size":"1.5rem"}},null,-1),se(" ",-1)])]))])):(X(),nt("div",uM,Et(_.value),1)),O("div",hM,[O("i",{class:fn(_.icon),style:{color:"#87bfba"}},null,2)])]),O("div",dM,Et(_.label),1)],8,rM))),128))])]),o.value?(X(),Re(Om,{key:0,onClose:T[3]||(T[3]=_=>o.value=!1),globalUser:$n(i),viewPoint:Om},null,8,["globalUser"])):me("",!0),a.value?(X(),Re(Mm,{key:1,onClose:T[4]||(T[4]=_=>a.value=!1),globalUser:$n(i),viewPoint:Mm},null,8,["globalUser"])):me("",!0)],64))}},Jw=sn(fM,[["__scopeId","data-v-64fe8d6d"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ca(e){return e+.5|0}const Xs=(e,t,n)=>Math.max(Math.min(e,n),t);function Io(e){return Xs(Ca(e*2.55),0,255)}function ai(e){return Xs(Ca(e*255),0,255)}function hs(e){return Xs(Ca(e/2.55)/100,0,1)}function Nm(e){return Xs(Ca(e*100),0,100)}const gn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Fh=[..."0123456789ABCDEF"],pM=e=>Fh[e&15],gM=e=>Fh[(e&240)>>4]+Fh[e&15],Xa=e=>(e&240)>>4===(e&15),mM=e=>Xa(e.r)&&Xa(e.g)&&Xa(e.b)&&Xa(e.a);function _M(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&gn[e[1]]*17,g:255&gn[e[2]]*17,b:255&gn[e[3]]*17,a:t===5?gn[e[4]]*17:255}:(t===7||t===9)&&(n={r:gn[e[1]]<<4|gn[e[2]],g:gn[e[3]]<<4|gn[e[4]],b:gn[e[5]]<<4|gn[e[6]],a:t===9?gn[e[7]]<<4|gn[e[8]]:255})),n}const yM=(e,t)=>e<255?t(e):"";function vM(e){var t=mM(e)?pM:gM;return e?"#"+t(e.r)+t(e.g)+t(e.b)+yM(e.a,t):void 0}const bM=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Zw(e,t,n){const s=t*Math.min(n,1-n),i=(r,o=(r+e/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function wM(e,t,n){const s=(i,r=(i+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function EM(e,t,n){const s=Zw(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)s[i]*=1-t-n,s[i]+=t;return s}function TM(e,t,n,s,i){return e===i?(t-n)/s+(t<n?6:0):t===i?(n-e)/s+2:(e-t)/s+4}function nf(e){const n=e.r/255,s=e.g/255,i=e.b/255,r=Math.max(n,s,i),o=Math.min(n,s,i),a=(r+o)/2;let l,u,h;return r!==o&&(h=r-o,u=a>.5?h/(2-r-o):h/(r+o),l=TM(n,s,i,h,r),l=l*60+.5),[l|0,u||0,a]}function sf(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(ai)}function rf(e,t,n){return sf(Zw,e,t,n)}function IM(e,t,n){return sf(EM,e,t,n)}function AM(e,t,n){return sf(wM,e,t,n)}function tE(e){return(e%360+360)%360}function SM(e){const t=bM.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?Io(+t[5]):ai(+t[5]));const i=tE(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=IM(i,r,o):t[1]==="hsv"?s=AM(i,r,o):s=rf(i,r,o),{r:s[0],g:s[1],b:s[2],a:n}}function RM(e,t){var n=nf(e);n[0]=tE(n[0]+t),n=rf(n),e.r=n[0],e.g=n[1],e.b=n[2]}function CM(e){if(!e)return;const t=nf(e),n=t[0],s=Nm(t[1]),i=Nm(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${i}%, ${hs(e.a)})`:`hsl(${n}, ${s}%, ${i}%)`}const Vm={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Lm={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function xM(){const e={},t=Object.keys(Lm),n=Object.keys(Vm);let s,i,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],i=0;i<n.length;i++)r=n[i],a=a.replace(r,Vm[r]);r=parseInt(Lm[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let Ja;function PM(e){Ja||(Ja=xM(),Ja.transparent=[0,0,0,0]);const t=Ja[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const kM=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function DM(e){const t=kM.exec(e);let n=255,s,i,r;if(t){if(t[7]!==s){const o=+t[7];n=t[8]?Io(o):Xs(o*255,0,255)}return s=+t[1],i=+t[3],r=+t[5],s=255&(t[2]?Io(s):Xs(s,0,255)),i=255&(t[4]?Io(i):Xs(i,0,255)),r=255&(t[6]?Io(r):Xs(r,0,255)),{r:s,g:i,b:r,a:n}}}function OM(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${hs(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const zu=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,lr=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function MM(e,t,n){const s=lr(hs(e.r)),i=lr(hs(e.g)),r=lr(hs(e.b));return{r:ai(zu(s+n*(lr(hs(t.r))-s))),g:ai(zu(i+n*(lr(hs(t.g))-i))),b:ai(zu(r+n*(lr(hs(t.b))-r))),a:e.a+n*(t.a-e.a)}}function Za(e,t,n){if(e){let s=nf(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=rf(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function eE(e,t){return e&&Object.assign(t||{},e)}function Fm(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=ai(e[3]))):(t=eE(e,{r:0,g:0,b:0,a:1}),t.a=ai(t.a)),t}function NM(e){return e.charAt(0)==="r"?DM(e):SM(e)}class ca{constructor(t){if(t instanceof ca)return t;const n=typeof t;let s;n==="object"?s=Fm(t):n==="string"&&(s=_M(t)||PM(t)||NM(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=eE(this._rgb);return t&&(t.a=hs(t.a)),t}set rgb(t){this._rgb=Fm(t)}rgbString(){return this._valid?OM(this._rgb):void 0}hexString(){return this._valid?vM(this._rgb):void 0}hslString(){return this._valid?CM(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,i=t.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=s.a-i.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-u,s.r=255&u*s.r+r*i.r+.5,s.g=255&u*s.g+r*i.g+.5,s.b=255&u*s.b+r*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=MM(this._rgb,t._rgb,n)),this}clone(){return new ca(this.rgb)}alpha(t){return this._rgb.a=ai(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Ca(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Za(this._rgb,2,t),this}darken(t){return Za(this._rgb,2,-t),this}saturate(t){return Za(this._rgb,1,t),this}desaturate(t){return Za(this._rgb,1,-t),this}rotate(t){return RM(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function as(){}const VM=(()=>{let e=0;return()=>e++})();function $e(e){return e==null}function De(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ot(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Ps(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Nn(e,t){return Ps(e)?e:t}function Ut(e,t){return typeof e>"u"?t:e}const LM=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,nE=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Kt(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Ft(e,t,n,s){let i,r,o;if(De(e))for(r=e.length,i=0;i<r;i++)t.call(n,e[i],i);else if(Ot(e))for(o=Object.keys(e),r=o.length,i=0;i<r;i++)t.call(n,e[o[i]],o[i])}function ic(e,t){let n,s,i,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(i=e[n],r=t[n],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function rc(e){if(De(e))return e.map(rc);if(Ot(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let i=0;for(;i<s;++i)t[n[i]]=rc(e[n[i]]);return t}return e}function sE(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function FM(e,t,n,s){if(!sE(e))return;const i=t[e],r=n[e];Ot(i)&&Ot(r)?ua(i,r,s):t[e]=rc(r)}function ua(e,t,n){const s=De(t)?t:[t],i=s.length;if(!Ot(e))return e;n=n||{};const r=n.merger||FM;let o;for(let a=0;a<i;++a){if(o=s[a],!Ot(o))continue;const l=Object.keys(o);for(let u=0,h=l.length;u<h;++u)r(l[u],e,o,n)}return e}function $o(e,t){return ua(e,t,{merger:UM})}function UM(e,t,n){if(!sE(e))return;const s=t[e],i=n[e];Ot(s)&&Ot(i)?$o(s,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=rc(i))}const Um={"":e=>e,x:e=>e.x,y:e=>e.y};function BM(e){const t=e.split("."),n=[];let s="";for(const i of t)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function jM(e){const t=BM(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function ha(e,t){return(Um[t]||(Um[t]=jM(t)))(e)}function of(e){return e.charAt(0).toUpperCase()+e.slice(1)}const oc=e=>typeof e<"u",yi=e=>typeof e=="function",Bm=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function zM(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Qt=Math.PI,ue=2*Qt,ac=Number.POSITIVE_INFINITY,$M=Qt/180,ye=Qt/2,Ri=Qt/4,jm=Qt*2/3,zm=Math.sign;function HM(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((i,r)=>i-r).pop(),t}function WM(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function lc(e){return!WM(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Ni(e){return e*(Qt/180)}function qM(e){return e*(180/Qt)}function iE(e,t){const n=t.x-e.x,s=t.y-e.y,i=Math.sqrt(n*n+s*s);let r=Math.atan2(s,n);return r<-.5*Qt&&(r+=ue),{angle:r,distance:i}}function KM(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Bn(e){return(e%ue+ue)%ue}function cc(e,t,n,s){const i=Bn(e),r=Bn(t),o=Bn(n),a=Bn(r-i),l=Bn(o-i),u=Bn(i-r),h=Bn(i-o);return i===r||i===o||s&&r===o||a>l&&u<h}function yn(e,t,n){return Math.max(t,Math.min(n,e))}function GM(e){return yn(e,-32768,32767)}function Ao(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function af(e,t,n){n=n||(o=>e[o]<t);let s=e.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,n(r)?i=r:s=r;return{lo:i,hi:s}}const Uh=(e,t,n,s)=>af(e,n,s?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),YM=(e,t,n)=>af(e,n,s=>e[s][t]>=n);function QM(e,t,n){let s=0,i=e.length;for(;s<i&&e[s]<t;)s++;for(;i>s&&e[i-1]>n;)i--;return s>0||i<e.length?e.slice(s,i):e}const rE=["push","pop","shift","splice","unshift"];function XM(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),rE.forEach(n=>{const s="_onData"+of(n),i=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function $m(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,i=s.indexOf(t);i!==-1&&s.splice(i,1),!(s.length>0)&&(rE.forEach(r=>{delete e[r]}),delete e._chartjs)}function JM(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const oE=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function aE(e,t){let n=[],s=!1;return function(...i){n=i,s||(s=!0,oE.call(window,()=>{s=!1,e.apply(t,n)}))}}function ZM(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const lE=e=>e==="start"?"left":e==="end"?"right":"center",cn=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,tN=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t,tl=e=>e===0||e===1,Hm=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*ue/n)),Wm=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*ue/n)+1,Ho={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*ye)+1,easeOutSine:e=>Math.sin(e*ye),easeInOutSine:e=>-.5*(Math.cos(Qt*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>tl(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>tl(e)?e:Hm(e,.075,.3),easeOutElastic:e=>tl(e)?e:Wm(e,.075,.3),easeInOutElastic(e){return tl(e)?e:e<.5?.5*Hm(e*2,.1125,.45):.5+.5*Wm(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Ho.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Ho.easeInBounce(e*2)*.5:Ho.easeOutBounce(e*2-1)*.5+.5};function cE(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function qm(e){return cE(e)?e:new ca(e)}function $u(e){return cE(e)?e:new ca(e).saturate(.5).darken(.1).hexString()}const eN=["x","y","borderWidth","radius","tension"],nN=["color","borderColor","backgroundColor"];function sN(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:nN},numbers:{type:"number",properties:eN}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function iN(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Km=new Map;function rN(e,t){t=t||{};const n=e+JSON.stringify(t);let s=Km.get(n);return s||(s=new Intl.NumberFormat(e,t),Km.set(n,s)),s}function oN(e,t,n){return rN(t,n).format(e)}const aN={values(e){return De(e)?e:""+e}};var lN={formatters:aN};function cN(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:lN.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Gi=Object.create(null),Bh=Object.create(null);function Wo(e,t){if(!t)return e;const n=t.split(".");for(let s=0,i=n.length;s<i;++s){const r=n[s];e=e[r]||(e[r]=Object.create(null))}return e}function Hu(e,t,n){return typeof t=="string"?ua(Wo(e,t),n):ua(Wo(e,""),t)}class uN{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>$u(i.backgroundColor),this.hoverBorderColor=(s,i)=>$u(i.borderColor),this.hoverColor=(s,i)=>$u(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return Hu(this,t,n)}get(t){return Wo(this,t)}describe(t,n){return Hu(Bh,t,n)}override(t,n){return Hu(Gi,t,n)}route(t,n,s,i){const r=Wo(this,t),o=Wo(this,s),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=o[i];return Ot(l)?Object.assign({},u,l):Ut(l,u)},set(l){this[a]=l}}})}apply(t){t.forEach(n=>n(this))}}var oe=new uN({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[sN,iN,cN]);function hN(e){return!e||$e(e.size)||$e(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Gm(e,t,n,s,i){let r=t[i];return r||(r=t[i]=e.measureText(i).width,n.push(i)),r>s&&(s=r),s}function Ci(e,t,n){const s=e.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((t-i)*s)/s+i}function Ym(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Qm(e,t,n,s){uE(e,t,n,s,null)}function uE(e,t,n,s,i){let r,o,a,l,u,h,d,f;const g=t.pointStyle,b=t.rotation,w=t.radius;let v=(b||0)*$M;if(g&&typeof g=="object"&&(r=g.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(v),e.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),e.restore();return}if(!(isNaN(w)||w<=0)){switch(e.beginPath(),g){default:i?e.ellipse(n,s,i/2,w,0,0,ue):e.arc(n,s,w,0,ue),e.closePath();break;case"triangle":h=i?i/2:w,e.moveTo(n+Math.sin(v)*h,s-Math.cos(v)*w),v+=jm,e.lineTo(n+Math.sin(v)*h,s-Math.cos(v)*w),v+=jm,e.lineTo(n+Math.sin(v)*h,s-Math.cos(v)*w),e.closePath();break;case"rectRounded":u=w*.516,l=w-u,o=Math.cos(v+Ri)*l,d=Math.cos(v+Ri)*(i?i/2-u:l),a=Math.sin(v+Ri)*l,f=Math.sin(v+Ri)*(i?i/2-u:l),e.arc(n-d,s-a,u,v-Qt,v-ye),e.arc(n+f,s-o,u,v-ye,v),e.arc(n+d,s+a,u,v,v+ye),e.arc(n-f,s+o,u,v+ye,v+Qt),e.closePath();break;case"rect":if(!b){l=Math.SQRT1_2*w,h=i?i/2:l,e.rect(n-h,s-l,2*h,2*l);break}v+=Ri;case"rectRot":d=Math.cos(v)*(i?i/2:w),o=Math.cos(v)*w,a=Math.sin(v)*w,f=Math.sin(v)*(i?i/2:w),e.moveTo(n-d,s-a),e.lineTo(n+f,s-o),e.lineTo(n+d,s+a),e.lineTo(n-f,s+o),e.closePath();break;case"crossRot":v+=Ri;case"cross":d=Math.cos(v)*(i?i/2:w),o=Math.cos(v)*w,a=Math.sin(v)*w,f=Math.sin(v)*(i?i/2:w),e.moveTo(n-d,s-a),e.lineTo(n+d,s+a),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o);break;case"star":d=Math.cos(v)*(i?i/2:w),o=Math.cos(v)*w,a=Math.sin(v)*w,f=Math.sin(v)*(i?i/2:w),e.moveTo(n-d,s-a),e.lineTo(n+d,s+a),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o),v+=Ri,d=Math.cos(v)*(i?i/2:w),o=Math.cos(v)*w,a=Math.sin(v)*w,f=Math.sin(v)*(i?i/2:w),e.moveTo(n-d,s-a),e.lineTo(n+d,s+a),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o);break;case"line":o=i?i/2:Math.cos(v)*w,a=Math.sin(v)*w,e.moveTo(n-o,s-a),e.lineTo(n+o,s+a);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(v)*(i?i/2:w),s+Math.sin(v)*w);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function hE(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function lf(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function cf(e){e.restore()}function dN(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),$e(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function fN(e,t,n,s,i){if(i.strikethrough||i.underline){const r=e.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,u=n+r.actualBoundingBoxDescent,h=i.strikethrough?(l+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,h),e.lineTo(a,h),e.stroke()}}function pN(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function uc(e,t,n,s,i,r={}){const o=De(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,u;for(e.save(),e.font=i.string,dN(e,r),l=0;l<o.length;++l)u=o[l],r.backdrop&&pN(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),$e(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(u,n,s,r.maxWidth)),e.fillText(u,n,s,r.maxWidth),fN(e,n,s,u,r),s+=Number(i.lineHeight);e.restore()}function jh(e,t){const{x:n,y:s,w:i,h:r,radius:o}=t;e.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*Qt,Qt,!0),e.lineTo(n,s+r-o.bottomLeft),e.arc(n+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,Qt,ye,!0),e.lineTo(n+i-o.bottomRight,s+r),e.arc(n+i-o.bottomRight,s+r-o.bottomRight,o.bottomRight,ye,0,!0),e.lineTo(n+i,s+o.topRight),e.arc(n+i-o.topRight,s+o.topRight,o.topRight,0,-ye,!0),e.lineTo(n+o.topLeft,s)}const gN=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,mN=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function _N(e,t){const n=(""+e).match(gN);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const yN=e=>+e||0;function uf(e,t){const n={},s=Ot(t),i=s?Object.keys(t):t,r=Ot(e)?s?o=>Ut(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of i)n[o]=yN(r(o));return n}function vN(e){return uf(e,{top:"y",right:"x",bottom:"y",left:"x"})}function qo(e){return uf(e,["topLeft","topRight","bottomLeft","bottomRight"])}function kn(e){const t=vN(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function en(e,t){e=e||{},t=t||oe.font;let n=Ut(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=Ut(e.style,t.style);s&&!(""+s).match(mN)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:Ut(e.family,t.family),lineHeight:_N(Ut(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:Ut(e.weight,t.weight),string:""};return i.string=hN(i),i}function el(e,t,n,s){let i,r,o;for(i=0,r=e.length;i<r;++i)if(o=e[i],o!==void 0&&o!==void 0)return o}function bN(e,t,n){const{min:s,max:i}=e,r=nE(t,(i-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(i,r)}}function qr(e,t){return Object.assign(Object.create(e),t)}function hf(e,t=[""],n,s,i=()=>e[0]){const r=n||e;typeof s>"u"&&(s=gE("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:s,_getTarget:i,override:a=>hf([a,...e],t,r,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return fE(a,l,()=>CN(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return Jm(a).includes(l)},ownKeys(a){return Jm(a)},set(a,l,u){const h=a._storage||(a._storage=i());return a[l]=h[l]=u,delete a._keys,!0}})}function Lr(e,t,n,s){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:dE(e,s),setContext:r=>Lr(e,r,n,s),override:r=>Lr(e.override(r),t,n,s)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return fE(r,o,()=>EN(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function dE(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:s,isScriptable:yi(n)?n:()=>n,isIndexable:yi(s)?s:()=>s}}const wN=(e,t)=>e?e+of(t):t,df=(e,t)=>Ot(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function fE(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=n();return e[t]=s,s}function EN(e,t,n){const{_proxy:s,_context:i,_subProxy:r,_descriptors:o}=e;let a=s[t];return yi(a)&&o.isScriptable(t)&&(a=TN(t,a,e,n)),De(a)&&a.length&&(a=IN(t,a,e,o.isIndexable)),df(t,a)&&(a=Lr(a,i,r&&r[t],o)),a}function TN(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||s);return a.delete(e),df(e,l)&&(l=ff(i._scopes,i,e,l)),l}function IN(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&s(e))return t[r.index%t.length];if(Ot(t[0])){const l=t,u=i._scopes.filter(h=>h!==l);t=[];for(const h of l){const d=ff(u,i,e,h);t.push(Lr(d,r,o&&o[e],a))}}return t}function pE(e,t,n){return yi(e)?e(t,n):e}const AN=(e,t)=>e===!0?t:typeof e=="string"?ha(t,e):void 0;function SN(e,t,n,s,i){for(const r of t){const o=AN(n,r);if(o){e.add(o);const a=pE(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function ff(e,t,n,s){const i=t._rootScopes,r=pE(t._fallback,n,s),o=[...e,...i],a=new Set;a.add(s);let l=Xm(a,o,n,r||n,s);return l===null||typeof r<"u"&&r!==n&&(l=Xm(a,o,r,l,s),l===null)?!1:hf(Array.from(a),[""],i,r,()=>RN(t,n,s))}function Xm(e,t,n,s,i){for(;n;)n=SN(e,t,n,s,i);return n}function RN(e,t,n){const s=e._getTarget();t in s||(s[t]={});const i=s[t];return De(i)&&Ot(n)?n:i||{}}function CN(e,t,n,s){let i;for(const r of t)if(i=gE(wN(r,e),n),typeof i<"u")return df(e,i)?ff(n,s,e,i):i}function gE(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function Jm(e){let t=e._keys;return t||(t=e._keys=xN(e._scopes)),t}function xN(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(i=>!i.startsWith("_")))t.add(s);return Array.from(t)}function pf(){return typeof window<"u"&&typeof document<"u"}function gf(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function hc(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const Yc=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function PN(e,t){return Yc(e).getPropertyValue(t)}const kN=["top","right","bottom","left"];function Ui(e,t,n){const s={};n=n?"-"+n:"";for(let i=0;i<4;i++){const r=kN[i];s[r]=parseFloat(e[t+"-"+r+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const DN=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function ON(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:i,offsetY:r}=s;let o=!1,a,l;if(DN(i,r,e.target))a=i,l=r;else{const u=t.getBoundingClientRect();a=s.clientX-u.left,l=s.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function Di(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,i=Yc(n),r=i.boxSizing==="border-box",o=Ui(i,"padding"),a=Ui(i,"border","width"),{x:l,y:u,box:h}=ON(e,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:g,height:b}=t;return r&&(g-=o.width+a.width,b-=o.height+a.height),{x:Math.round((l-d)/g*n.width/s),y:Math.round((u-f)/b*n.height/s)}}function MN(e,t,n){let s,i;if(t===void 0||n===void 0){const r=e&&gf(e);if(!r)t=e.clientWidth,n=e.clientHeight;else{const o=r.getBoundingClientRect(),a=Yc(r),l=Ui(a,"border","width"),u=Ui(a,"padding");t=o.width-u.width-l.width,n=o.height-u.height-l.height,s=hc(a.maxWidth,r,"clientWidth"),i=hc(a.maxHeight,r,"clientHeight")}}return{width:t,height:n,maxWidth:s||ac,maxHeight:i||ac}}const Js=e=>Math.round(e*10)/10;function NN(e,t,n,s){const i=Yc(e),r=Ui(i,"margin"),o=hc(i.maxWidth,e,"clientWidth")||ac,a=hc(i.maxHeight,e,"clientHeight")||ac,l=MN(e,t,n);let{width:u,height:h}=l;if(i.boxSizing==="content-box"){const f=Ui(i,"border","width"),g=Ui(i,"padding");u-=g.width+f.width,h-=g.height+f.height}return u=Math.max(0,u-r.width),h=Math.max(0,s?u/s:h-r.height),u=Js(Math.min(u,o,l.maxWidth)),h=Js(Math.min(h,a,l.maxHeight)),u&&!h&&(h=Js(u/2)),(t!==void 0||n!==void 0)&&s&&l.height&&h>l.height&&(h=l.height,u=Js(Math.floor(h*s))),{width:u,height:h}}function Zm(e,t,n){const s=t||1,i=Js(e.height*s),r=Js(e.width*s);e.height=Js(e.height),e.width=Js(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==i||o.width!==r?(e.currentDevicePixelRatio=s,o.height=i,o.width=r,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const VN=(function(){let e=!1;try{const t={get passive(){return e=!0,!1}};pf()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e})();function t_(e,t){const n=PN(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}const LN=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},FN=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Sr(e,t,n){return e?LN(t,n):FN()}function mE(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function _E(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function nl(e,t,n){return e.options.clip?e[n]:t[n]}function UN(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:nl(n,t,"left"),right:nl(n,t,"right"),top:nl(s,t,"top"),bottom:nl(s,t,"bottom")}:t}function BN(e,t){const n=t._clip;if(n.disabled)return!1;const s=UN(t,e.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class jN{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,i){const r=n.listeners[i],o=n.duration;r.forEach(a=>a({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=oE.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,s,t,"progress")),r.length||(s.running=!1,this._notify(i,s,t,"complete"),s.initial=!1),n+=r.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ls=new jN;const e_="transparent",zN={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=qm(e||e_),i=s.valid&&qm(t||e_);return i&&i.valid?i.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class $N{constructor(t,n,s,i){const r=n[s];i=el([t.to,i,r,t.from]);const o=el([t.from,r,i]);this._active=!0,this._fn=t.fn||zN[t.type||typeof o],this._easing=Ho[t.easing]||Ho.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=el([t.to,n,i,t.from]),this._from=el([t.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<s),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=r;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][n]()}}class yE{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Ot(t))return;const n=Object.keys(oe.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!Ot(r))return;const o={};for(const a of n)o[a]=r[a];(De(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,n){const s=n.options,i=WN(t,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&HN(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,n){const s=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){i.push(...this._animateOptions(t,n));continue}const h=n[u];let d=r[u];const f=s.get(u);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){t[u]=h;continue}r[u]=d=new $N(f,t,u,h),i.push(d)}return i}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return ls.add(this._chart,s),!0}}function HN(e,t){const n=[],s=Object.keys(t);for(let i=0;i<s.length;i++){const r=e[s[i]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function WN(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function n_(e,t){const n=e&&e.options||{},s=n.reverse,i=n.min===void 0?t:0,r=n.max===void 0?t:0;return{start:s?r:i,end:s?i:r}}function qN(e,t,n){if(n===!1)return!1;const s=n_(e,n),i=n_(t,n);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function KN(e){let t,n,s,i;return Ot(e)?(t=e.top,n=e.right,s=e.bottom,i=e.left):t=n=s=i=e,{top:t,right:n,bottom:s,left:i,disabled:e===!1}}function vE(e,t){const n=[],s=e._getSortedDatasetMetas(t);let i,r;for(i=0,r=s.length;i<r;++i)n.push(s[i].index);return n}function s_(e,t,n,s={}){const i=e.keys,r=s.mode==="single";let o,a,l,u;if(t===null)return;let h=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(h=!0,s.all)continue;break}u=e.values[l],Ps(u)&&(r||t===0||zm(t)===zm(u))&&(t+=u)}return!h&&!s.all?0:t}function GN(e,t){const{iScale:n,vScale:s}=t,i=n.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,u,h;for(l=0,u=o.length;l<u;++l)h=o[l],a[l]={[i]:h,[r]:e[h]};return a}function Wu(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function YN(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function QN(e){const{min:t,max:n,minDefined:s,maxDefined:i}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function XN(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function i_(e,t,n,s){for(const i of t.getMatchingVisibleMetas(s).reverse()){const r=e[i.index];if(n&&r>0||!n&&r<0)return i.index}return null}function r_(e,t){const{chart:n,_cachedMeta:s}=e,i=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,u=o.axis,h=YN(r,o,s),d=t.length;let f;for(let g=0;g<d;++g){const b=t[g],{[l]:w,[u]:v}=b,S=b._stacks||(b._stacks={});f=S[u]=XN(i,h,w),f[a]=v,f._top=i_(f,o,!0,s.type),f._bottom=i_(f,o,!1,s.type);const P=f._visualValues||(f._visualValues={});P[a]=v}}function qu(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function JN(e,t){return qr(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function ZN(e,t,n){return qr(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function ho(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const i of t){const r=i._stacks;if(!r||r[s]===void 0||r[s][n]===void 0)return;delete r[s][n],r[s]._visualValues!==void 0&&r[s]._visualValues[n]!==void 0&&delete r[s]._visualValues[n]}}}const Ku=e=>e==="reset"||e==="none",o_=(e,t)=>t?e:Object.assign({},e),tV=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:vE(n,!0),values:null};class bE{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Wu(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ho(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),i=(d,f,g,b)=>d==="x"?f:d==="r"?b:g,r=n.xAxisID=Ut(s.xAxisID,qu(t,"x")),o=n.yAxisID=Ut(s.yAxisID,qu(t,"y")),a=n.rAxisID=Ut(s.rAxisID,qu(t,"r")),l=n.indexAxis,u=n.iAxisID=i(l,r,o,a),h=n.vAxisID=i(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&$m(this._data,this),t._stacked&&ho(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(Ot(n)){const i=this._cachedMeta;this._data=GN(n,i)}else if(s!==n){if(s){$m(s,this);const i=this._cachedMeta;ho(i),i._parsed=[]}n&&Object.isExtensible(n)&&XM(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=n._stacked;n._stacked=Wu(n.vScale,n),n.stack!==s.stack&&(i=!0,ho(n),n.stack=s.stack),this._resyncElements(t),(i||r!==n._stacked)&&(r_(this,n._parsed),n._stacked=Wu(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:o}=s,a=r.axis;let l=t===0&&n===i.length?!0:s._sorted,u=t>0&&s._parsed[t-1],h,d,f;if(this._parsing===!1)s._parsed=i,s._sorted=!0,f=i;else{De(i[t])?f=this.parseArrayData(s,i,t,n):Ot(i[t])?f=this.parseObjectData(s,i,t,n):f=this.parsePrimitiveData(s,i,t,n);const g=()=>d[a]===null||u&&d[a]<u[a];for(h=0;h<n;++h)s._parsed[h+t]=d=f[h],l&&(g()&&(l=!1),u=d);s._sorted=l}o&&r_(this,f)}parsePrimitiveData(t,n,s,i){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,u=r.getLabels(),h=r===o,d=new Array(i);let f,g,b;for(f=0,g=i;f<g;++f)b=f+s,d[f]={[a]:h||r.parse(u[b],b),[l]:o.parse(n[b],b)};return d}parseArrayData(t,n,s,i){const{xScale:r,yScale:o}=t,a=new Array(i);let l,u,h,d;for(l=0,u=i;l<u;++l)h=l+s,d=n[h],a[l]={x:r.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(t,n,s,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(i);let h,d,f,g;for(h=0,d=i;h<d;++h)f=h+s,g=n[f],u[h]={x:r.parse(ha(g,a),f),y:o.parse(ha(g,l),f)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const i=this.chart,r=this._cachedMeta,o=n[t.axis],a={keys:vE(i,!0),values:n._stacks[t.axis]._visualValues};return s_(a,o,r.index,{mode:s})}updateRangeFromParsed(t,n,s,i){const r=s[n.axis];let o=r===null?NaN:r;const a=i&&s._stacks[n.axis];i&&a&&(i.values=a,o=s_(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&t===s.iScale,o=i.length,a=this._getOtherScale(t),l=tV(n,s,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=QN(a);let f,g;function b(){g=i[f];const w=g[a.axis];return!Ps(g[t.axis])||h>w||d<w}for(f=0;f<o&&!(!b()&&(this.updateRangeFromParsed(u,t,g,l),r));++f);if(r){for(f=o-1;f>=0;--f)if(!b()){this.updateRangeFromParsed(u,t,g,l);break}}return u}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let i,r,o;for(i=0,r=n.length;i<r;++i)o=n[i][t.axis],Ps(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,i=n.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=KN(Ut(this.options.clip,qN(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,i=s.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,u=this.options.drawActiveElementsOnTop;let h;for(s.dataset&&s.dataset.draw(t,r,a,l),h=a;h<a+l;++h){const d=i[h];d.hidden||(d.active&&u?o.push(d):d.draw(t,r))}for(h=0;h<o.length;++h)o[h].draw(t,r)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=ZN(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=JN(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const i=n==="active",r=this._cachedDataOpts,o=t+"-"+n,a=r[o],l=this.enableOptionSharing&&oc(s);if(a)return o_(a,l);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,t),d=i?[`${t}Hover`,"hover",t,""]:[t,""],f=u.getOptionScopes(this.getDataset(),h),g=Object.keys(oe.elements[t]),b=()=>this.getContext(s,i,n),w=u.resolveNamedOptions(f,g,b,d);return w.$shared&&(w.$shared=l,r[o]=Object.freeze(o_(w,l))),w}_resolveAnimations(t,n,s){const i=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(i.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(t,s,n))}const u=new yE(i,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||Ku(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),i=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(n,r)||r!==i;return this.updateSharedOptions(r,n,s),{sharedOptions:r,includeOptions:o}}updateElement(t,n,s,i){Ku(i)?Object.assign(t,s):this._resolveAnimations(n,i).update(t,s)}updateSharedOptions(t,n,s){t&&!Ku(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,i){t.active=i;const r=this.getStyle(n,i);this._resolveAnimations(n,s,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const i=s.length,r=n.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,n,s=!0){const i=this._cachedMeta,r=i.data,o=t+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=o;a--)u[a]=u[a-n]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,n),s&&this.updateElements(r,t,n,"reset")}updateElements(t,n,s,i){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(t,n);s._stacked&&ho(s,i)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,i]=t;this[n](s,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function eV(e,t,n){let s=1,i=1,r=0,o=0;if(t<ue){const a=e,l=a+t,u=Math.cos(a),h=Math.sin(a),d=Math.cos(l),f=Math.sin(l),g=(x,D,L)=>cc(x,a,l,!0)?1:Math.max(D,D*n,L,L*n),b=(x,D,L)=>cc(x,a,l,!0)?-1:Math.min(D,D*n,L,L*n),w=g(0,u,d),v=g(ye,h,f),S=b(Qt,u,d),P=b(Qt+ye,h,f);s=(w-S)/2,i=(v-P)/2,r=-(w+S)/2,o=-(v+P)/2}return{ratioX:s,ratioY:i,offsetX:r,offsetY:o}}class nV extends bE{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data,{labels:{pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=t.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,u)=>{const d=t.getDatasetMeta(0).controller.getStyle(u);return{text:l,fillStyle:d.backgroundColor,fontColor:r,hidden:!t.getDataVisibility(u),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:i,pointStyle:s,borderRadius:o&&(a||d.borderRadius),index:u}}):[]}},onClick(t,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}};constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let r=l=>+s[l];if(Ot(s[t])){const{key:l="value"}=this._parsing;r=u=>+ha(s[u],l)}let o,a;for(o=t,a=t+n;o<a;++o)i._parsed[o]=r(o)}}_getRotation(){return Ni(this.options.rotation-90)}_getCircumference(){return Ni(this.options.circumference)}_getRotationExtents(){let t=ue,n=-ue;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),n=Math.max(n,r+o)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:s}=n,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(LM(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:g,offsetX:b,offsetY:w}=eV(d,h,l),v=(s.width-o)/f,S=(s.height-o)/g,P=Math.max(Math.min(v,S)/2,0),x=nE(this.options.radius,P),D=Math.max(x*l,0),L=(x-D)/this._getVisibleDatasetWeightTotal();this.offsetX=b*x,this.offsetY=w*x,i.total=this.calculateTotal(),this.outerRadius=x-L*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-L*u,0),this.updateElements(r,0,r.length,t)}_circumference(t,n){const s=this.options,i=this._cachedMeta,r=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/ue)}updateElements(t,n,s,i){const r=i==="reset",o=this.chart,a=o.chartArea,u=o.options.animation,h=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=r&&u.animateScale,g=f?0:this.innerRadius,b=f?0:this.outerRadius,{sharedOptions:w,includeOptions:v}=this._getSharedOptions(n,i);let S=this._getRotation(),P;for(P=0;P<n;++P)S+=this._circumference(P,r);for(P=n;P<n+s;++P){const x=this._circumference(P,r),D=t[P],L={x:h+this.offsetX,y:d+this.offsetY,startAngle:S,endAngle:S+x,circumference:x,outerRadius:b,innerRadius:g};v&&(L.options=w||this.resolveDataElementOptions(P,D.active?"active":i)),S+=x,this.updateElement(D,P,L,i)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let s=0,i;for(i=0;i<n.length;i++){const r=t._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?ue*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=oN(n._parsed[t],s.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let n=0;const s=this.chart;let i,r,o,a,l;if(!t){for(i=0,r=s.data.datasets.length;i<r;++i)if(s.isDatasetVisible(i)){o=s.getDatasetMeta(i),t=o.data,a=o.controller;break}}if(!t)return 0;for(i=0,r=t.length;i<r;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let s=0,i=t.length;s<i;++s){const r=this.resolveDataElementOptions(s);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(t){return Math.max(Ut(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class sV extends nV{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function xi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class mf{static override(t){Object.assign(mf.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return xi()}parse(){return xi()}format(){return xi()}add(){return xi()}diff(){return xi()}startOf(){return xi()}endOf(){return xi()}}var iV={_date:mf};function rV(e,t,n,s){const{controller:i,data:r,_sorted:o}=e,a=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const u=a._reversePixels?YM:Uh;if(s){if(i._sharedOptions){const h=r[0],d=typeof h.getRange=="function"&&h.getRange(t);if(d){const f=u(r,t,n-d),g=u(r,t,n+d);return{lo:f.lo,hi:g.hi}}}}else{const h=u(r,t,n);if(l){const{vScale:d}=i._cachedMeta,{_parsed:f}=e,g=f.slice(0,h.lo+1).reverse().findIndex(w=>!$e(w[d.axis]));h.lo-=Math.max(0,g);const b=f.slice(h.hi).findIndex(w=>!$e(w[d.axis]));h.hi+=Math.max(0,b)}return h}}return{lo:0,hi:r.length-1}}function Qc(e,t,n,s,i){const r=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=r.length;a<l;++a){const{index:u,data:h}=r[a],{lo:d,hi:f}=rV(r[a],t,o,i);for(let g=d;g<=f;++g){const b=h[g];b.skip||s(b,u,g)}}}function oV(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,i){const r=t?Math.abs(s.x-i.x):0,o=n?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Gu(e,t,n,s,i){const r=[];return!i&&!e.isPointInArea(t)||Qc(e,n,t,function(a,l,u){!i&&!hE(a,e.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:l,index:u})},!0),r}function aV(e,t,n,s){let i=[];function r(o,a,l){const{startAngle:u,endAngle:h}=o.getProps(["startAngle","endAngle"],s),{angle:d}=iE(o,{x:t.x,y:t.y});cc(d,u,h)&&i.push({element:o,datasetIndex:a,index:l})}return Qc(e,n,t,r),i}function lV(e,t,n,s,i,r){let o=[];const a=oV(n);let l=Number.POSITIVE_INFINITY;function u(h,d,f){const g=h.inRange(t.x,t.y,i);if(s&&!g)return;const b=h.getCenterPoint(i);if(!(!!r||e.isPointInArea(b))&&!g)return;const v=a(t,b);v<l?(o=[{element:h,datasetIndex:d,index:f}],l=v):v===l&&o.push({element:h,datasetIndex:d,index:f})}return Qc(e,n,t,u),o}function Yu(e,t,n,s,i,r){return!r&&!e.isPointInArea(t)?[]:n==="r"&&!s?aV(e,t,n,i):lV(e,t,n,s,i,r)}function a_(e,t,n,s,i){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Qc(e,n,t,(l,u,h)=>{l[o]&&l[o](t[n],i)&&(r.push({element:l,datasetIndex:u,index:h}),a=a||l.inRange(t.x,t.y,i))}),s&&!a?[]:r}var cV={modes:{index(e,t,n,s){const i=Di(t,e),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Gu(e,i,r,s,o):Yu(e,i,r,!1,s,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(u=>{const h=a[0].index,d=u.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:u.index,index:h})}),l):[]},dataset(e,t,n,s){const i=Di(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Gu(e,i,r,s,o):Yu(e,i,r,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,u=e.getDatasetMeta(l).data;a=[];for(let h=0;h<u.length;++h)a.push({element:u[h],datasetIndex:l,index:h})}return a},point(e,t,n,s){const i=Di(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return Gu(e,i,r,s,o)},nearest(e,t,n,s){const i=Di(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return Yu(e,i,r,n.intersect,s,o)},x(e,t,n,s){const i=Di(t,e);return a_(e,i,"x",n.intersect,s)},y(e,t,n,s){const i=Di(t,e);return a_(e,i,"y",n.intersect,s)}}};const wE=["left","top","right","bottom"];function fo(e,t){return e.filter(n=>n.pos===t)}function l_(e,t){return e.filter(n=>wE.indexOf(n.pos)===-1&&n.box.axis===t)}function po(e,t){return e.sort((n,s)=>{const i=t?s:n,r=t?n:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function uV(e){const t=[];let n,s,i,r,o,a;for(n=0,s=(e||[]).length;n<s;++n)i=e[n],{position:r,options:{stack:o,stackWeight:a=1}}=i,t.push({index:n,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return t}function hV(e){const t={};for(const n of e){const{stack:s,pos:i,stackWeight:r}=n;if(!s||!wE.includes(i))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function dV(e,t){const n=hV(e),{vBoxMaxWidth:s,hBoxMaxHeight:i}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,u=n[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*s:l&&t.availableWidth,a.height=i):(a.width=s,a.height=h?h*i:l&&t.availableHeight)}return n}function fV(e){const t=uV(e),n=po(t.filter(u=>u.box.fullSize),!0),s=po(fo(t,"left"),!0),i=po(fo(t,"right")),r=po(fo(t,"top"),!0),o=po(fo(t,"bottom")),a=l_(t,"x"),l=l_(t,"y");return{fullSize:n,leftAndTop:s.concat(r),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:fo(t,"chartArea"),vertical:s.concat(i).concat(l),horizontal:r.concat(o).concat(a)}}function c_(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function EE(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function pV(e,t,n,s){const{pos:i,box:r}=n,o=e.maxPadding;if(!Ot(i)){n.size&&(e[i]-=n.size);const d=s[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?r.height:r.width),n.size=d.size/d.count,e[i]+=n.size}r.getPadding&&EE(o,r.getPadding());const a=Math.max(0,t.outerWidth-c_(o,e,"left","right")),l=Math.max(0,t.outerHeight-c_(o,e,"top","bottom")),u=a!==e.w,h=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:u,other:h}:{same:h,other:u}}function gV(e){const t=e.maxPadding;function n(s){const i=Math.max(t[s]-e[s],0);return e[s]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function mV(e,t){const n=t.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(t[o],n[o])}),r}return s(e?["left","right"]:["top","bottom"])}function So(e,t,n,s){const i=[];let r,o,a,l,u,h;for(r=0,o=e.length,u=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,mV(a.horizontal,t));const{same:d,other:f}=pV(t,n,a,s);u|=d&&i.length,h=h||f,l.fullSize||i.push(a)}return u&&So(i,t,n,s)||h}function sl(e,t,n,s,i){e.top=n,e.left=t,e.right=t+s,e.bottom=n+i,e.width=s,e.height=i}function u_(e,t,n,s){const i=n.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,u=s[a.stack]||{placed:0,weight:1},h=a.stackWeight/u.weight||1;if(a.horizontal){const d=t.w*h,f=u.size||l.height;oc(u.start)&&(o=u.start),l.fullSize?sl(l,i.left,o,n.outerWidth-i.right-i.left,f):sl(l,t.left+u.placed,o,d,f),u.start=o,u.placed+=d,o=l.bottom}else{const d=t.h*h,f=u.size||l.width;oc(u.start)&&(r=u.start),l.fullSize?sl(l,r,i.top,f,n.outerHeight-i.bottom-i.top):sl(l,r,t.top+u.placed,f,d),u.start=r,u.placed+=d,r=l.right}}t.x=r,t.y=o}var Zs={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const i=kn(e.options.layout.padding),r=Math.max(t-i.width,0),o=Math.max(n-i.height,0),a=fV(e.boxes),l=a.vertical,u=a.horizontal;Ft(e.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const h=l.reduce((w,v)=>v.box.options&&v.box.options.display===!1?w:w+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},i);EE(f,kn(s));const g=Object.assign({maxPadding:f,w:r,h:o,x:i.left,y:i.top},i),b=dV(l.concat(u),d);So(a.fullSize,g,d,b),So(l,g,d,b),So(u,g,d,b)&&So(l,g,d,b),gV(g),u_(a.leftAndTop,g,d,b),g.x+=g.w,g.y+=g.h,u_(a.rightAndBottom,g,d,b),e.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},Ft(a.chartArea,w=>{const v=w.box;Object.assign(v,e.chartArea),v.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class TE{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,i){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,i?Math.floor(n/i):s)}}isAttached(t){return!0}updateConfig(t){}}class _V extends TE{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Tl="$chartjs",yV={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},h_=e=>e===null||e==="";function vV(e,t){const n=e.style,s=e.getAttribute("height"),i=e.getAttribute("width");if(e[Tl]={initial:{height:s,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",h_(i)){const r=t_(e,"width");r!==void 0&&(e.width=r)}if(h_(s))if(e.style.height==="")e.height=e.width/(t||2);else{const r=t_(e,"height");r!==void 0&&(e.height=r)}return e}const IE=VN?{passive:!0}:!1;function bV(e,t,n){e&&e.addEventListener(t,n,IE)}function wV(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,IE)}function EV(e,t){const n=yV[e.type]||e.type,{x:s,y:i}=Di(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:i!==void 0?i:null}}function dc(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function TV(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||dc(a.addedNodes,s),o=o&&!dc(a.removedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function IV(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||dc(a.removedNodes,s),o=o&&!dc(a.addedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const da=new Map;let d_=0;function AE(){const e=window.devicePixelRatio;e!==d_&&(d_=e,da.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function AV(e,t){da.size||window.addEventListener("resize",AE),da.set(e,t)}function SV(e){da.delete(e),da.size||window.removeEventListener("resize",AE)}function RV(e,t,n){const s=e.canvas,i=s&&gf(s);if(!i)return;const r=aE((a,l)=>{const u=i.clientWidth;n(a,l),u<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,h=l.contentRect.height;u===0&&h===0||r(u,h)});return o.observe(i),AV(e,r),o}function Qu(e,t,n){n&&n.disconnect(),t==="resize"&&SV(e)}function CV(e,t,n){const s=e.canvas,i=aE(r=>{e.ctx!==null&&n(EV(r,e))},e);return bV(s,t,i),i}class xV extends TE{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(vV(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[Tl])return!1;const s=n[Tl].initial;["height","width"].forEach(r=>{const o=s[r];$e(o)?n.removeAttribute(r):n.setAttribute(r,o)});const i=s.style||{};return Object.keys(i).forEach(r=>{n.style[r]=i[r]}),n.width=n.width,delete n[Tl],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const i=t.$proxies||(t.$proxies={}),o={attach:TV,detach:IV,resize:RV}[n]||CV;i[n]=o(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),i=s[n];if(!i)return;({attach:Qu,detach:Qu,resize:Qu}[n]||wV)(t,n,i),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,i){return NN(t,n,s,i)}isAttached(t){const n=t&&gf(t);return!!(n&&n.isConnected)}}function PV(e){return!pf()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?_V:xV}let xa=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return lc(this.x)&&lc(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const i={};return t.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}};function kV(e,t){const n=e.options.ticks,s=DV(e),i=Math.min(n.maxTicksLimit||s,s),r=n.major.enabled?MV(t):[],o=r.length,a=r[0],l=r[o-1],u=[];if(o>i)return NV(t,u,r,o/i),u;const h=OV(r,t,i);if(o>0){let d,f;const g=o>1?Math.round((l-a)/(o-1)):null;for(il(t,u,h,$e(g)?0:a-g,a),d=0,f=o-1;d<f;d++)il(t,u,h,r[d],r[d+1]);return il(t,u,h,l,$e(g)?t.length:l+g),u}return il(t,u,h),u}function DV(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(s,i))}function OV(e,t,n){const s=VV(e),i=t.length/n;if(!s)return Math.max(i,1);const r=HM(s);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>i)return l}return Math.max(i,1)}function MV(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function NV(e,t,n,s){let i=0,r=n[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===r&&(t.push(e[o]),i++,r=n[i*s])}function il(e,t,n,s,i){const r=Ut(s,0),o=Math.min(Ut(i,e.length),e.length);let a=0,l,u,h;for(n=Math.ceil(n),i&&(l=i-s,n=l/Math.floor(l/n)),h=r;h<0;)a++,h=Math.round(r+a*n);for(u=Math.max(r,0);u<o;u++)u===h&&(t.push(e[u]),a++,h=Math.round(r+a*n))}function VV(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const LV=e=>e==="left"?"right":e==="right"?"left":e,f_=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,p_=(e,t)=>Math.min(t||e,e);function g_(e,t){const n=[],s=e.length/t,i=e.length;let r=0;for(;r<i;r+=s)n.push(e[Math.floor(r)]);return n}function FV(e,t,n){const s=e.ticks.length,i=Math.min(t,s-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(i),u;if(!(n&&(s===1?u=Math.max(l-r,o-l):t===0?u=(e.getPixelForTick(1)-l)/2:u=(l-e.getPixelForTick(i-1))/2,l+=i<t?u:-u,l<r-a||l>o+a)))return l}function UV(e,t){Ft(e,n=>{const s=n.gc,i=s.length/2;let r;if(i>t){for(r=0;r<i;++r)delete n.data[s[r]];s.splice(0,i)}})}function go(e){return e.drawTicks?e.tickLength:0}function m_(e,t){if(!e.display)return 0;const n=en(e.font,t),s=kn(e.padding);return(De(e.text)?e.text.length:1)*n.lineHeight+s.height}function BV(e,t){return qr(e,{scale:t,type:"scale"})}function jV(e,t,n){return qr(e,{tick:n,index:t,type:"tick"})}function zV(e,t,n){let s=lE(e);return(n&&t!=="right"||!n&&t==="right")&&(s=LV(s)),s}function $V(e,t,n,s){const{top:i,left:r,bottom:o,right:a,chart:l}=e,{chartArea:u,scales:h}=l;let d=0,f,g,b;const w=o-i,v=a-r;if(e.isHorizontal()){if(g=cn(s,r,a),Ot(n)){const S=Object.keys(n)[0],P=n[S];b=h[S].getPixelForValue(P)+w-t}else n==="center"?b=(u.bottom+u.top)/2+w-t:b=f_(e,n,t);f=a-r}else{if(Ot(n)){const S=Object.keys(n)[0],P=n[S];g=h[S].getPixelForValue(P)-v+t}else n==="center"?g=(u.left+u.right)/2-v+t:g=f_(e,n,t);b=cn(s,o,i),d=n==="left"?-ye:ye}return{titleX:g,titleY:b,maxWidth:f,rotation:d}}class Xc extends xa{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:i}=this;return t=Nn(t,Number.POSITIVE_INFINITY),n=Nn(n,Number.NEGATIVE_INFINITY),s=Nn(s,Number.POSITIVE_INFINITY),i=Nn(i,Number.NEGATIVE_INFINITY),{min:Nn(t,s),max:Nn(n,i),minDefined:Ps(t),maxDefined:Ps(n)}}getMinMax(t){let{min:n,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,t),i||(n=Math.min(n,o.min)),r||(s=Math.max(s,o.max));return n=r&&n>s?s:n,s=i&&n>s?n:s,{min:Nn(n,Nn(s,n)),max:Nn(s,Nn(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Kt(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=bN(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?g_(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=kV(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Kt(this.options.afterUpdate,[this])}beforeSetDimensions(){Kt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Kt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Kt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Kt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,i,r;for(s=0,i=t.length;s<i;s++)r=t[s],r.label=Kt(n.callback,[r.value,s,t],this)}afterTickToLabelConversion(){Kt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Kt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=p_(this.ticks.length,t.ticks.maxTicksLimit),i=n.minRotation||0,r=n.maxRotation;let o=i,a,l,u;if(!this._isVisible()||!n.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,g=yn(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/s:g/(s-1),d+6>a&&(a=g/(s-(t.offset?.5:1)),l=this.maxHeight-go(t.grid)-n.padding-m_(t.title,this.chart.options.font),u=Math.sqrt(d*d+f*f),o=qM(Math.min(Math.asin(yn((h.highest.height+6)/a,-1,1)),Math.asin(yn(l/u,-1,1))-Math.asin(yn(f/u,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Kt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Kt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=m_(i,n.options.font);if(a?(t.width=this.maxWidth,t.height=go(r)+l):(t.height=this.maxHeight,t.width=go(r)+l),s.display&&this.ticks.length){const{first:u,last:h,widest:d,highest:f}=this._getLabelSizes(),g=s.padding*2,b=Ni(this.labelRotation),w=Math.cos(b),v=Math.sin(b);if(a){const S=s.mirror?0:v*d.width+w*f.height;t.height=Math.min(this.maxHeight,t.height+S+g)}else{const S=s.mirror?0:w*d.width+v*f.height;t.width=Math.min(this.maxWidth,t.width+S+g)}this._calculatePadding(u,h,v,w)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,i){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,g=0;l?u?(f=i*t.width,g=s*n.height):(f=s*t.height,g=i*n.width):r==="start"?g=n.width:r==="end"?f=t.width:r!=="inner"&&(f=t.width/2,g=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=t.height/2;r==="start"?(h=0,d=t.height):r==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Kt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)$e(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=g_(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(n/p_(n,s));let u=0,h=0,d,f,g,b,w,v,S,P,x,D,L;for(d=0;d<n;d+=l){if(b=t[d].label,w=this._resolveTickFontOptions(d),i.font=v=w.string,S=r[v]=r[v]||{data:{},gc:[]},P=w.lineHeight,x=D=0,!$e(b)&&!De(b))x=Gm(i,S.data,S.gc,x,b),D=P;else if(De(b))for(f=0,g=b.length;f<g;++f)L=b[f],!$e(L)&&!De(L)&&(x=Gm(i,S.data,S.gc,x,L),D+=P);o.push(x),a.push(D),u=Math.max(x,u),h=Math.max(D,h)}UV(r,n);const W=o.indexOf(u),T=a.indexOf(h),_=E=>({width:o[E]||0,height:a[E]||0});return{first:_(0),last:_(n-1),widest:_(W),highest:_(T),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return GM(this._alignToPixels?Ci(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=jV(this.getContext(),t,s))}return this.$context||(this.$context=BV(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=Ni(this.labelRotation),s=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*i?a/s:l/i:l*i<a*s?l/s:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,i=this.options,{grid:r,position:o,border:a}=i,l=r.offset,u=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=go(r),g=[],b=a.setContext(this.getContext()),w=b.display?b.width:0,v=w/2,S=function(ut){return Ci(s,ut,w)};let P,x,D,L,W,T,_,E,R,C,M,I;if(o==="top")P=S(this.bottom),T=this.bottom-f,E=P-v,C=S(t.top)+v,I=t.bottom;else if(o==="bottom")P=S(this.top),C=t.top,I=S(t.bottom)-v,T=P+v,E=this.top+f;else if(o==="left")P=S(this.right),W=this.right-f,_=P-v,R=S(t.left)+v,M=t.right;else if(o==="right")P=S(this.left),R=t.left,M=S(t.right)-v,W=P+v,_=this.left+f;else if(n==="x"){if(o==="center")P=S((t.top+t.bottom)/2+.5);else if(Ot(o)){const ut=Object.keys(o)[0],Y=o[ut];P=S(this.chart.scales[ut].getPixelForValue(Y))}C=t.top,I=t.bottom,T=P+v,E=T+f}else if(n==="y"){if(o==="center")P=S((t.left+t.right)/2);else if(Ot(o)){const ut=Object.keys(o)[0],Y=o[ut];P=S(this.chart.scales[ut].getPixelForValue(Y))}W=P-v,_=W-f,R=t.left,M=t.right}const Tt=Ut(i.ticks.maxTicksLimit,d),_t=Math.max(1,Math.ceil(d/Tt));for(x=0;x<d;x+=_t){const ut=this.getContext(x),Y=r.setContext(ut),U=a.setContext(ut),J=Y.lineWidth,Wt=Y.color,be=U.dash||[],Xt=U.dashOffset,qe=Y.tickWidth,de=Y.tickColor,Ie=Y.tickBorderDash||[],Jt=Y.tickBorderDashOffset;D=FV(this,x,l),D!==void 0&&(L=Ci(s,D,J),u?W=_=R=M=L:T=E=C=I=L,g.push({tx1:W,ty1:T,tx2:_,ty2:E,x1:R,y1:C,x2:M,y2:I,width:J,color:Wt,borderDash:be,borderDashOffset:Xt,tickWidth:qe,tickColor:de,tickBorderDash:Ie,tickBorderDashOffset:Jt}))}return this._ticksLength=d,this._borderValue=P,g}_computeLabelItems(t){const n=this.axis,s=this.options,{position:i,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:h,mirror:d}=r,f=go(s.grid),g=f+h,b=d?-h:g,w=-Ni(this.labelRotation),v=[];let S,P,x,D,L,W,T,_,E,R,C,M,I="middle";if(i==="top")W=this.bottom-b,T=this._getXAxisLabelAlignment();else if(i==="bottom")W=this.top+b,T=this._getXAxisLabelAlignment();else if(i==="left"){const _t=this._getYAxisLabelAlignment(f);T=_t.textAlign,L=_t.x}else if(i==="right"){const _t=this._getYAxisLabelAlignment(f);T=_t.textAlign,L=_t.x}else if(n==="x"){if(i==="center")W=(t.top+t.bottom)/2+g;else if(Ot(i)){const _t=Object.keys(i)[0],ut=i[_t];W=this.chart.scales[_t].getPixelForValue(ut)+g}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")L=(t.left+t.right)/2-g;else if(Ot(i)){const _t=Object.keys(i)[0],ut=i[_t];L=this.chart.scales[_t].getPixelForValue(ut)}T=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?I="top":l==="end"&&(I="bottom"));const Tt=this._getLabelSizes();for(S=0,P=a.length;S<P;++S){x=a[S],D=x.label;const _t=r.setContext(this.getContext(S));_=this.getPixelForTick(S)+r.labelOffset,E=this._resolveTickFontOptions(S),R=E.lineHeight,C=De(D)?D.length:1;const ut=C/2,Y=_t.color,U=_t.textStrokeColor,J=_t.textStrokeWidth;let Wt=T;o?(L=_,T==="inner"&&(S===P-1?Wt=this.options.reverse?"left":"right":S===0?Wt=this.options.reverse?"right":"left":Wt="center"),i==="top"?u==="near"||w!==0?M=-C*R+R/2:u==="center"?M=-Tt.highest.height/2-ut*R+R:M=-Tt.highest.height+R/2:u==="near"||w!==0?M=R/2:u==="center"?M=Tt.highest.height/2-ut*R:M=Tt.highest.height-C*R,d&&(M*=-1),w!==0&&!_t.showLabelBackdrop&&(L+=R/2*Math.sin(w))):(W=_,M=(1-C)*R/2);let be;if(_t.showLabelBackdrop){const Xt=kn(_t.backdropPadding),qe=Tt.heights[S],de=Tt.widths[S];let Ie=M-Xt.top,Jt=0-Xt.left;switch(I){case"middle":Ie-=qe/2;break;case"bottom":Ie-=qe;break}switch(T){case"center":Jt-=de/2;break;case"right":Jt-=de;break;case"inner":S===P-1?Jt-=de:S>0&&(Jt-=de/2);break}be={left:Jt,top:Ie,width:de+Xt.width,height:qe+Xt.height,color:_t.backdropColor}}v.push({label:D,font:E,textOffset:M,options:{rotation:w,color:Y,strokeColor:U,strokeWidth:J,textAlign:Wt,textBaseline:I,translation:[L,W],backdrop:be}})}return v}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-Ni(this.labelRotation))return t==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let u,h;return n==="left"?i?(h=this.right+r,s==="near"?u="left":s==="center"?(u="center",h+=l/2):(u="right",h+=l)):(h=this.right-a,s==="near"?u="right":s==="center"?(u="center",h-=l/2):(u="left",h=this.left)):n==="right"?i?(h=this.left+r,s==="near"?u="right":s==="center"?(u="center",h-=l/2):(u="left",h-=l)):(h=this.left+a,s==="near"?u="left":s==="center"?(u="center",h+=l/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:i,width:r,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,i,r,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(r=>r.value===t);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,u,h)=>{!h.width||!h.color||(s.save(),s.lineWidth=h.width,s.strokeStyle=h.color,s.setLineDash(h.borderDash||[]),s.lineDashOffset=h.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(u.x,u.y),s.stroke(),s.restore())};if(n.display)for(r=0,o=i.length;r<o;++r){const l=i[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,h,d,f;this.isHorizontal()?(u=Ci(t,this.left,o)-o/2,h=Ci(t,this.right,a)+a/2,d=f=l):(d=Ci(t,this.top,o)-o/2,f=Ci(t,this.bottom,a)+a/2,u=h=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(u,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&lf(s,i);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,u=o.label,h=o.textOffset;uc(s,u,0,h,l,a)}i&&cf(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:i}}=this;if(!s.display)return;const r=en(s.font),o=kn(s.padding),a=s.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||Ot(n)?(l+=o.bottom,De(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:u,titleY:h,maxWidth:d,rotation:f}=$V(this,l,n,a);uc(t,s.text,0,0,r,{color:s.color,maxWidth:d,rotation:f,textAlign:zV(a,n,i),textBaseline:"middle",translation:[u,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=Ut(t.grid&&t.grid.z,-1),i=Ut(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Xc.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[s]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return en(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class rl{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;qV(n)&&(s=this.register(n));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,HV(t,o,s),this.override&&oe.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,i=this.scope;s in n&&delete n[s],i&&s in oe[i]&&(delete oe[i][s],this.override&&delete Gi[s])}}function HV(e,t,n){const s=ua(Object.create(null),[n?oe.get(n):{},oe.get(t),e.defaults]);oe.set(t,s),e.defaultRoutes&&WV(t,e.defaultRoutes),e.descriptors&&oe.describe(t,e.descriptors)}function WV(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),i=s.pop(),r=[e].concat(s).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");oe.route(r,i,l,a)})}function qV(e){return"id"in e&&"defaults"in e}class KV{constructor(){this.controllers=new rl(bE,"datasets",!0),this.elements=new rl(xa,"elements"),this.plugins=new rl(Object,"plugins"),this.scales=new rl(Xc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(t,r,i):Ft(i,o=>{const a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,n,s){const i=of(t);Kt(s["before"+i],[],s),n[t](s),Kt(s["after"+i],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const i=n.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return i}}var Fn=new KV;class GV{constructor(){this._init=void 0}notify(t,n,s,i){if(n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,n,s);return n==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,n,s,i){i=i||{};for(const r of t){const o=r.plugin,a=o[s],l=[n,i,r.options];if(Kt(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){$e(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,i=Ut(s.options&&s.options.plugins,{}),r=YV(s);return i===!1&&!n?[]:XV(t,r,i,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,i=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,s),t,"stop"),this._notify(i(s,n),t,"start")}}function YV(e){const t={},n=[],s=Object.keys(Fn.plugins.items);for(let r=0;r<s.length;r++)n.push(Fn.getPlugin(s[r]));const i=e.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function QV(e,t){return!t&&e===!1?null:e===!0?{}:e}function XV(e,{plugins:t,localIds:n},s,i){const r=[],o=e.getContext();for(const a of t){const l=a.id,u=QV(s[l],i);u!==null&&r.push({plugin:a,options:JV(e.config,{plugin:a,local:n[l]},u,o)})}return r}function JV(e,{plugin:t,local:n},s,i){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(s,r);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function zh(e,t){const n=oe.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function ZV(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function t2(e,t){return e===t?"_index_":"_value_"}function __(e){if(e==="x"||e==="y"||e==="r")return e}function e2(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function $h(e,...t){if(__(e))return e;for(const n of t){const s=n.axis||e2(n.position)||e.length>1&&__(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function y_(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function n2(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return y_(e,"x",n[0])||y_(e,"y",n[0])}return{}}function s2(e,t){const n=Gi[e.type]||{scales:{}},s=t.scales||{},i=zh(e.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!Ot(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=$h(o,a,n2(o,e),oe.scales[a.type]),u=t2(l,i),h=n.scales||{};r[o]=$o(Object.create(null),[{axis:l},a,h[l],h[u]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||zh(a,t),h=(Gi[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=ZV(d,l),g=o[f+"AxisID"]||f;r[g]=r[g]||Object.create(null),$o(r[g],[{axis:f},s[g],h[d]])})}),Object.keys(r).forEach(o=>{const a=r[o];$o(a,[oe.scales[a.type],oe.scale])}),r}function SE(e){const t=e.options||(e.options={});t.plugins=Ut(t.plugins,{}),t.scales=s2(e,t)}function RE(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function i2(e){return e=e||{},e.data=RE(e.data),SE(e),e}const v_=new Map,CE=new Set;function ol(e,t){let n=v_.get(e);return n||(n=t(),v_.set(e,n),CE.add(n)),n}const mo=(e,t,n)=>{const s=ha(t,n);s!==void 0&&e.add(s)};class r2{constructor(t){this._config=i2(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=RE(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),SE(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return ol(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return ol(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return ol(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return ol(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let i=s.get(t);return(!i||n)&&(i=new Map,s.set(t,i)),i}getOptionScopes(t,n,s){const{options:i,type:r}=this,o=this._cachedScopes(t,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{t&&(l.add(t),h.forEach(d=>mo(l,t,d))),h.forEach(d=>mo(l,i,d)),h.forEach(d=>mo(l,Gi[r]||{},d)),h.forEach(d=>mo(l,oe,d)),h.forEach(d=>mo(l,Bh,d))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),CE.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:t,type:n}=this;return[t,Gi[n]||{},oe.datasets[n]||{},{type:n},oe,Bh]}resolveNamedOptions(t,n,s,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=b_(this._resolverCache,t,i);let l=o;if(a2(o,n)){r.$shared=!1,s=yi(s)?s():s;const u=this.createResolver(t,s,a);l=Lr(o,s,u)}for(const u of n)r[u]=l[u];return r}createResolver(t,n,s=[""],i){const{resolver:r}=b_(this._resolverCache,t,s);return Ot(n)?Lr(r,n,void 0,i):r}}function b_(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const i=n.join();let r=s.get(i);return r||(r={resolver:hf(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(i,r)),r}const o2=e=>Ot(e)&&Object.getOwnPropertyNames(e).some(t=>yi(e[t]));function a2(e,t){const{isScriptable:n,isIndexable:s}=dE(e);for(const i of t){const r=n(i),o=s(i),a=(o||r)&&e[i];if(r&&(yi(a)||o2(a))||o&&De(a))return!0}return!1}var l2="4.5.1";const c2=["top","bottom","left","right","chartArea"];function w_(e,t){return e==="top"||e==="bottom"||c2.indexOf(e)===-1&&t==="x"}function E_(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function T_(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Kt(n&&n.onComplete,[e],t)}function u2(e){const t=e.chart,n=t.options.animation;Kt(n&&n.onProgress,[e],t)}function xE(e){return pf()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Il={},I_=e=>{const t=xE(e);return Object.values(Il).filter(n=>n.canvas===t).pop()};function h2(e,t,n){const s=Object.keys(e);for(const i of s){const r=+i;if(r>=t){const o=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=o)}}}function d2(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}class Hh{static defaults=oe;static instances=Il;static overrides=Gi;static registry=Fn;static version=l2;static getChart=I_;static register(...t){Fn.add(...t),A_()}static unregister(...t){Fn.remove(...t),A_()}constructor(t,n){const s=this.config=new r2(n),i=xE(t),r=I_(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||PV(i)),this.platform.updateConfig(s);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,h=l&&l.width;if(this.id=VM(),this.ctx=a,this.canvas=l,this.width=h,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new GV,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ZM(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Il[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ls.listen(this,"complete",T_),ls.listen(this,"progress",u2),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:i,_aspectRatio:r}=this;return $e(t)?n&&r?r:i?s/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Fn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Zm(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ym(this.canvas,this.ctx),this}stop(){return ls.stop(this),this}resize(t,n){ls.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,n,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Zm(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Kt(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ft(n,(s,i)=>{s.id=i})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,i=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=$h(o,a),u=l==="r",h=l==="x";return{options:a,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),Ft(r,o=>{const a=o.options,l=a.id,u=$h(l,a),h=Ut(a.type,o.dtype);(a.position===void 0||w_(a.position,u)!==w_(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in s&&s[l].type===h)d=s[l];else{const f=Fn.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),s[d.id]=d}d.init(a,t)}),Ft(i,(o,a)=>{o||delete s[a]}),Ft(s,o=>{Zs.configure(this,o,o.options),Zs.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((i,r)=>i.index-r.index),s>n){for(let i=n;i<s;++i)this._destroyDatasetMeta(i);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(E_("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,i)=>{n.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=n.length;s<i;s++){const r=n[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||zh(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=Fn.getController(a),{datasetElementType:u,dataElementType:h}=oe.datasets[a];Object.assign(l,{dataElementType:Fn.getElement(h),datasetElementType:u&&Fn.getElement(u)}),o.controller=new l(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Ft(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:d}=this.getDatasetMeta(u),f=!i&&r.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||Ft(r,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(E_("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ft(this.scales,t=>{Zs.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!Bm(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of n){const o=s==="_removeElements"?-r:r;h2(t,i,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=s(0);for(let r=1;r<n;r++)if(!Bm(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Zs.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],Ft(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,yi(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),i={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ls.has(this)?this.attached&&!ls.running(this)&&ls.start(this):(this.draw(),T_({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let i,r;for(i=0,r=n.length;i<r;++i){const o=n[i];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s={meta:t,index:t.index,cancelable:!0},i=BN(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&lf(n,i),t.controller.draw(),i&&cf(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return hE(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,i){const r=cV.modes[n];return typeof r=="function"?r(this,t,s,i):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let i=s.filter(r=>r&&r._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=qr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const i=s?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);oc(n)?(r.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),ls.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Ym(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Il[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(r,o)=>{n.addEventListener(this,r,o),t[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};Ft(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(l,u)=>{n.addEventListener(this,l,u),t[l]=u},i=(l,u)=>{t[l]&&(n.removeEventListener(this,l,u),delete t[l])},r=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ft(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Ft(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const i=s?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!ic(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const i=this.options.hover,r=(l,u)=>l.filter(h=>!u.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=r(n,t),a=s?t:r(t,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},i=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:i=[],options:r}=this,o=n,a=this._getActiveElements(t,i,s,o),l=zM(t),u=d2(t,this._lastEvent,s,l);s&&(this._lastEvent=null,Kt(r.onHover,[t,a,this],this),l&&Kt(r.onClick,[t,a,this],this));const h=!ic(a,i);return(h||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=u,h}_getActiveElements(t,n,s,i){if(t.type==="mouseout")return[];if(!s)return n;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}}function A_(){return Ft(Hh.instances,e=>e._plugins.invalidate())}function f2(e,t,n){const{startAngle:s,x:i,y:r,outerRadius:o,innerRadius:a,options:l}=t,{borderWidth:u,borderJoinStyle:h}=l,d=Math.min(u/o,Bn(s-n));if(e.beginPath(),e.arc(i,r,o-u/2,s+d/2,n-d/2),a>0){const f=Math.min(u/a,Bn(s-n));e.arc(i,r,a+u/2,n-f/2,s+f/2,!0)}else{const f=Math.min(u/2,o*Bn(s-n));if(h==="round")e.arc(i,r,f,n-Qt/2,s+Qt/2,!0);else if(h==="bevel"){const g=2*f*f,b=-g*Math.cos(n+Qt/2)+i,w=-g*Math.sin(n+Qt/2)+r,v=g*Math.cos(s+Qt/2)+i,S=g*Math.sin(s+Qt/2)+r;e.lineTo(b,w),e.lineTo(v,S)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function p2(e,t,n){const{startAngle:s,pixelMargin:i,x:r,y:o,outerRadius:a,innerRadius:l}=t;let u=i/a;e.beginPath(),e.arc(r,o,a,s-u,n+u),l>i?(u=i/l,e.arc(r,o,l,n+u,s-u,!0)):e.arc(r,o,i,n+ye,s-ye),e.closePath(),e.clip()}function g2(e){return uf(e,["outerStart","outerEnd","innerStart","innerEnd"])}function m2(e,t,n,s){const i=g2(e.options.borderRadius),r=(n-t)/2,o=Math.min(r,s*t/2),a=l=>{const u=(n-Math.min(r,l))*s/2;return yn(l,0,Math.min(r,u))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:yn(i.innerStart,0,o),innerEnd:yn(i.innerEnd,0,o)}}function cr(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function fc(e,t,n,s,i,r){const{x:o,y:a,startAngle:l,pixelMargin:u,innerRadius:h}=t,d=Math.max(t.outerRadius+s+n-u,0),f=h>0?h+s+n+u:0;let g=0;const b=i-l;if(s){const _t=h>0?h-s:0,ut=d>0?d-s:0,Y=(_t+ut)/2,U=Y!==0?b*Y/(Y+s):b;g=(b-U)/2}const w=Math.max(.001,b*d-n/Qt)/d,v=(b-w)/2,S=l+v+g,P=i-v-g,{outerStart:x,outerEnd:D,innerStart:L,innerEnd:W}=m2(t,f,d,P-S),T=d-x,_=d-D,E=S+x/T,R=P-D/_,C=f+L,M=f+W,I=S+L/C,Tt=P-W/M;if(e.beginPath(),r){const _t=(E+R)/2;if(e.arc(o,a,d,E,_t),e.arc(o,a,d,_t,R),D>0){const J=cr(_,R,o,a);e.arc(J.x,J.y,D,R,P+ye)}const ut=cr(M,P,o,a);if(e.lineTo(ut.x,ut.y),W>0){const J=cr(M,Tt,o,a);e.arc(J.x,J.y,W,P+ye,Tt+Math.PI)}const Y=(P-W/f+(S+L/f))/2;if(e.arc(o,a,f,P-W/f,Y,!0),e.arc(o,a,f,Y,S+L/f,!0),L>0){const J=cr(C,I,o,a);e.arc(J.x,J.y,L,I+Math.PI,S-ye)}const U=cr(T,S,o,a);if(e.lineTo(U.x,U.y),x>0){const J=cr(T,E,o,a);e.arc(J.x,J.y,x,S-ye,E)}}else{e.moveTo(o,a);const _t=Math.cos(E)*d+o,ut=Math.sin(E)*d+a;e.lineTo(_t,ut);const Y=Math.cos(R)*d+o,U=Math.sin(R)*d+a;e.lineTo(Y,U)}e.closePath()}function _2(e,t,n,s,i){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){fc(e,t,n,s,l,i);for(let u=0;u<r;++u)e.fill();isNaN(a)||(l=o+(a%ue||ue))}return fc(e,t,n,s,l,i),e.fill(),l}function y2(e,t,n,s,i){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:u,borderJoinStyle:h,borderDash:d,borderDashOffset:f,borderRadius:g}=l,b=l.borderAlign==="inner";if(!u)return;e.setLineDash(d||[]),e.lineDashOffset=f,b?(e.lineWidth=u*2,e.lineJoin=h||"round"):(e.lineWidth=u,e.lineJoin=h||"bevel");let w=t.endAngle;if(r){fc(e,t,n,s,w,i);for(let v=0;v<r;++v)e.stroke();isNaN(a)||(w=o+(a%ue||ue))}b&&p2(e,t,w),l.selfJoin&&w-o>=Qt&&g===0&&h!=="miter"&&f2(e,t,w),r||(fc(e,t,n,s,w,i),e.stroke())}class v2 extends xa{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,n,s){const i=this.getProps(["x","y"],s),{angle:r,distance:o}=iE(i,{x:t,y:n}),{startAngle:a,endAngle:l,innerRadius:u,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),f=(this.options.spacing+this.options.borderWidth)/2,g=Ut(d,l-a),b=cc(r,a,l)&&a!==l,w=g>=ue||b,v=Ao(o,u+f,h+f);return w&&v}getCenterPoint(t){const{x:n,y:s,startAngle:i,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:u}=this.options,h=(i+r)/2,d=(o+a+u+l)/2;return{x:n+Math.cos(h)*d,y:s+Math.sin(h)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:n,circumference:s}=this,i=(n.offset||0)/4,r=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>ue?Math.floor(s/ue):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*i,Math.sin(a)*i);const l=1-Math.sin(Math.min(Qt,s||0)),u=i*l;t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,_2(t,this,u,r,o),y2(t,this,u,r,o),t.restore()}}const S_=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},b2=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class R_ extends xa{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Kt(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,i)=>t.sort(s,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,i=en(s.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=S_(s,r);let u,h;n.font=i.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(o,r,a,l)+10):(h=this.maxHeight,u=this._fitCols(o,i,a,l)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],h=i+a;let d=t;r.textAlign="left",r.textBaseline="middle";let f=-1,g=-h;return this.legendItems.forEach((b,w)=>{const v=s+n/2+r.measureText(b.text).width;(w===0||u[u.length-1]+v+2*a>o)&&(d+=h,u[u.length-(w>0?0:1)]=0,g+=h,f++),l[w]={left:0,top:g,row:f,width:v,height:i},u[u.length-1]+=v+a}),d}_fitCols(t,n,s,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],h=o-t;let d=a,f=0,g=0,b=0,w=0;return this.legendItems.forEach((v,S)=>{const{itemWidth:P,itemHeight:x}=w2(s,n,r,v,i);S>0&&g+x+2*a>h&&(d+=f+a,u.push({width:f,height:g}),b+=f+a,w++,f=g=0),l[S]={left:b,top:g,col:w,width:P,height:x},f=Math.max(f,P),g+=x+a}),d+=f,u.push({width:f,height:g}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:i},rtl:r}}=this,o=Sr(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=cn(s,this.left+i,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=cn(s,this.left+i,this.right-this.lineWidths[a])),u.top+=this.top+t+i,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+i}else{let a=0,l=cn(s,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=cn(s,this.top+t+i,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+i,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;lf(t,this),this._draw(),cf(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:i}=this,{align:r,labels:o}=t,a=oe.color,l=Sr(t.rtl,this.left,this.width),u=en(o.font),{padding:h}=o,d=u.size,f=d/2;let g;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=u.string;const{boxWidth:b,boxHeight:w,itemHeight:v}=S_(o,d),S=function(W,T,_){if(isNaN(b)||b<=0||isNaN(w)||w<0)return;i.save();const E=Ut(_.lineWidth,1);if(i.fillStyle=Ut(_.fillStyle,a),i.lineCap=Ut(_.lineCap,"butt"),i.lineDashOffset=Ut(_.lineDashOffset,0),i.lineJoin=Ut(_.lineJoin,"miter"),i.lineWidth=E,i.strokeStyle=Ut(_.strokeStyle,a),i.setLineDash(Ut(_.lineDash,[])),o.usePointStyle){const R={radius:w*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:E},C=l.xPlus(W,b/2),M=T+f;uE(i,R,C,M,o.pointStyleWidth&&b)}else{const R=T+Math.max((d-w)/2,0),C=l.leftForLtr(W,b),M=qo(_.borderRadius);i.beginPath(),Object.values(M).some(I=>I!==0)?jh(i,{x:C,y:R,w:b,h:w,radius:M}):i.rect(C,R,b,w),i.fill(),E!==0&&i.stroke()}i.restore()},P=function(W,T,_){uc(i,_.text,W,T+v/2,u,{strikethrough:_.hidden,textAlign:l.textAlign(_.textAlign)})},x=this.isHorizontal(),D=this._computeTitleHeight();x?g={x:cn(r,this.left+h,this.right-s[0]),y:this.top+h+D,line:0}:g={x:this.left+h,y:cn(r,this.top+D+h,this.bottom-n[0].height),line:0},mE(this.ctx,t.textDirection);const L=v+h;this.legendItems.forEach((W,T)=>{i.strokeStyle=W.fontColor,i.fillStyle=W.fontColor;const _=i.measureText(W.text).width,E=l.textAlign(W.textAlign||(W.textAlign=o.textAlign)),R=b+f+_;let C=g.x,M=g.y;l.setWidth(this.width),x?T>0&&C+R+h>this.right&&(M=g.y+=L,g.line++,C=g.x=cn(r,this.left+h,this.right-s[g.line])):T>0&&M+L>this.bottom&&(C=g.x=C+n[g.line].width+h,g.line++,M=g.y=cn(r,this.top+D+h,this.bottom-n[g.line].height));const I=l.x(C);if(S(I,M,W),C=tN(E,C+b+f,x?C+R:this.right,t.rtl),P(l.x(C),M,W),x)g.x+=R+h;else if(typeof W.text!="string"){const Tt=u.lineHeight;g.y+=PE(W,Tt)+h}else g.y+=L}),_E(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=en(n.font),i=kn(n.padding);if(!n.display)return;const r=Sr(t.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,u=i.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+u,d=cn(t.align,d,this.right-f);else{const b=this.columnSizes.reduce((w,v)=>Math.max(w,v.height),0);h=u+cn(t.align,this.top,this.bottom-b-t.labels.padding-this._computeTitleHeight())}const g=cn(a,d,d+f);o.textAlign=r.textAlign(lE(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,uc(o,n.text,g,h,s)}_computeTitleHeight(){const t=this.options.title,n=en(t.font),s=kn(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,i,r;if(Ao(t,this.left,this.right)&&Ao(n,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],Ao(t,i.left,i.left+i.width)&&Ao(n,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!I2(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,r=b2(i,s);i&&!r&&Kt(n.onLeave,[t,i,this],this),this._hoveredItem=s,s&&!r&&Kt(n.onHover,[t,s,this],this)}else s&&Kt(n.onClick,[t,s,this],this)}}function w2(e,t,n,s,i){const r=E2(s,e,t,n),o=T2(i,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function E2(e,t,n,s){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),t+n.size/2+s.measureText(i).width}function T2(e,t,n){let s=e;return typeof t.text!="string"&&(s=PE(t,n)),s}function PE(e,t){const n=e.text?e.text.length:0;return t*n}function I2(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var A2={id:"legend",_element:R_,start(e,t,n){const s=e.legend=new R_({ctx:e.ctx,options:n,chart:e});Zs.configure(e,s,n),Zs.addBox(e,s)},stop(e){Zs.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;Zs.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,i=n.chart;i.isDatasetVisible(s)?(i.hide(s),t.hidden=!0):(i.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(n?0:void 0),h=kn(u.borderWidth);return{text:t[l.index].label,fillStyle:u.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:s||u.pointStyle,rotation:u.rotation,textAlign:i||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};const Ro={average(e){if(!e.length)return!1;let t,n,s=new Set,i=0,r=0;for(t=0,n=e.length;t<n;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),i+=l.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:i/r}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),h=KM(t,u);h<i&&(i=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function Vn(e,t){return t&&(De(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function cs(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function S2(e,t){const{element:n,datasetIndex:s,index:i}=t,r=e.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:e,label:o,parsed:r.getParsed(i),raw:e.data.datasets[s].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:n}}function C_(e,t){const n=e.chart.ctx,{body:s,footer:i,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=en(t.bodyFont),u=en(t.titleFont),h=en(t.footerFont),d=r.length,f=i.length,g=s.length,b=kn(t.padding);let w=b.height,v=0,S=s.reduce((D,L)=>D+L.before.length+L.lines.length+L.after.length,0);if(S+=e.beforeBody.length+e.afterBody.length,d&&(w+=d*u.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),S){const D=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;w+=g*D+(S-g)*l.lineHeight+(S-1)*t.bodySpacing}f&&(w+=t.footerMarginTop+f*h.lineHeight+(f-1)*t.footerSpacing);let P=0;const x=function(D){v=Math.max(v,n.measureText(D).width+P)};return n.save(),n.font=u.string,Ft(e.title,x),n.font=l.string,Ft(e.beforeBody.concat(e.afterBody),x),P=t.displayColors?o+2+t.boxPadding:0,Ft(s,D=>{Ft(D.before,x),Ft(D.lines,x),Ft(D.after,x)}),P=0,n.font=h.string,Ft(e.footer,x),n.restore(),v+=b.width,{width:v,height:w}}function R2(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function C2(e,t,n,s){const{x:i,width:r}=s,o=n.caretSize+n.caretPadding;if(e==="left"&&i+r+o>t.width||e==="right"&&i-r-o<0)return!0}function x2(e,t,n,s){const{x:i,width:r}=n,{width:o,chartArea:{left:a,right:l}}=e;let u="center";return s==="center"?u=i<=(a+l)/2?"left":"right":i<=r/2?u="left":i>=o-r/2&&(u="right"),C2(u,e,t,n)&&(u="center"),u}function x_(e,t,n){const s=n.yAlign||t.yAlign||R2(e,n);return{xAlign:n.xAlign||t.xAlign||x2(e,t,n,s),yAlign:s}}function P2(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function k2(e,t,n){let{y:s,height:i}=e;return t==="top"?s+=n:t==="bottom"?s-=i+n:s-=i/2,s}function P_(e,t,n,s){const{caretSize:i,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,u=i+r,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:g}=qo(o);let b=P2(t,a);const w=k2(t,l,u);return l==="center"?a==="left"?b+=u:a==="right"&&(b-=u):a==="left"?b-=Math.max(h,f)+i:a==="right"&&(b+=Math.max(d,g)+i),{x:yn(b,0,s.width-t.width),y:yn(w,0,s.height-t.height)}}function al(e,t,n){const s=kn(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function k_(e){return Vn([],cs(e))}function D2(e,t,n){return qr(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function D_(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const kE={beforeTitle:as,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:as,beforeBody:as,beforeLabel:as,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return $e(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:as,afterBody:as,beforeFooter:as,footer:as,afterFooter:as};function Xe(e,t,n,s){const i=e[t].call(n,s);return typeof i>"u"?kE[t].call(n,s):i}class O_ extends xa{static positioners=Ro;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&n.options.animation&&s.animations,r=new yE(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=D2(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,i=Xe(s,"beforeTitle",this,t),r=Xe(s,"title",this,t),o=Xe(s,"afterTitle",this,t);let a=[];return a=Vn(a,cs(i)),a=Vn(a,cs(r)),a=Vn(a,cs(o)),a}getBeforeBody(t,n){return k_(Xe(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,i=[];return Ft(t,r=>{const o={before:[],lines:[],after:[]},a=D_(s,r);Vn(o.before,cs(Xe(a,"beforeLabel",this,r))),Vn(o.lines,Xe(a,"label",this,r)),Vn(o.after,cs(Xe(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(t,n){return k_(Xe(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,i=Xe(s,"beforeFooter",this,t),r=Xe(s,"footer",this,t),o=Xe(s,"afterFooter",this,t);let a=[];return a=Vn(a,cs(i)),a=Vn(a,cs(r)),a=Vn(a,cs(o)),a}_createItems(t){const n=this._active,s=this.chart.data,i=[],r=[],o=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(S2(this.chart,n[l]));return t.filter&&(a=a.filter((h,d,f)=>t.filter(h,d,f,s))),t.itemSort&&(a=a.sort((h,d)=>t.itemSort(h,d,s))),Ft(a,h=>{const d=D_(t.callbacks,h);i.push(Xe(d,"labelColor",this,h)),r.push(Xe(d,"labelPointStyle",this,h)),o.push(Xe(d,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,n){const s=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=Ro[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=C_(this,s),u=Object.assign({},a,l),h=x_(this.chart,s,u),d=P_(s,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,i){const r=this.getCaretPosition(t,s,i);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(t,n,s){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:d}=qo(a),{x:f,y:g}=t,{width:b,height:w}=n;let v,S,P,x,D,L;return r==="center"?(D=g+w/2,i==="left"?(v=f,S=v-o,x=D+o,L=D-o):(v=f+b,S=v+o,x=D-o,L=D+o),P=v):(i==="left"?S=f+Math.max(l,h)+o:i==="right"?S=f+b-Math.max(u,d)-o:S=this.caretX,r==="top"?(x=g,D=x-o,v=S-o,P=S+o):(x=g+w,D=x+o,v=S+o,P=S-o),L=x),{x1:v,x2:S,x3:P,y1:x,y2:D,y3:L}}drawTitle(t,n,s){const i=this.title,r=i.length;let o,a,l;if(r){const u=Sr(s.rtl,this.x,this.width);for(t.x=al(this,s.titleAlign,s),n.textAlign=u.textAlign(s.titleAlign),n.textBaseline="middle",o=en(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(i[l],u.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,n,s,i,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:u}=r,h=en(r.bodyFont),d=al(this,"left",r),f=i.x(d),g=l<h.lineHeight?(h.lineHeight-l)/2:0,b=n.y+g;if(r.usePointStyle){const w={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},v=i.leftForLtr(f,u)+u/2,S=b+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Qm(t,w,v,S),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Qm(t,w,v,S)}else{t.lineWidth=Ot(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const w=i.leftForLtr(f,u),v=i.leftForLtr(i.xPlus(f,1),u-2),S=qo(o.borderRadius);Object.values(S).some(P=>P!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,jh(t,{x:w,y:b,w:u,h:l,radius:S}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),jh(t,{x:v,y:b+1,w:u-2,h:l-2,radius:S}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(w,b,u,l),t.strokeRect(w,b,u,l),t.fillStyle=o.backgroundColor,t.fillRect(v,b+1,u-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:h}=s,d=en(s.bodyFont);let f=d.lineHeight,g=0;const b=Sr(s.rtl,this.x,this.width),w=function(_){n.fillText(_,b.x(t.x+g),t.y+f/2),t.y+=f+r},v=b.textAlign(o);let S,P,x,D,L,W,T;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,t.x=al(this,v,s),n.fillStyle=s.bodyColor,Ft(this.beforeBody,w),g=a&&v!=="right"?o==="center"?u/2+h:u+2+h:0,D=0,W=i.length;D<W;++D){for(S=i[D],P=this.labelTextColors[D],n.fillStyle=P,Ft(S.before,w),x=S.lines,a&&x.length&&(this._drawColorBox(n,t,D,b,s),f=Math.max(d.lineHeight,l)),L=0,T=x.length;L<T;++L)w(x[L]),f=d.lineHeight;Ft(S.after,w)}g=0,f=d.lineHeight,Ft(this.afterBody,w),t.y-=r}drawFooter(t,n,s){const i=this.footer,r=i.length;let o,a;if(r){const l=Sr(s.rtl,this.x,this.width);for(t.x=al(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=en(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(i[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,n,s,i){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:u,height:h}=s,{topLeft:d,topRight:f,bottomLeft:g,bottomRight:b}=qo(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(t,n,s,i),n.lineTo(a+u-f,l),n.quadraticCurveTo(a+u,l,a+u,l+f),o==="center"&&r==="right"&&this.drawCaret(t,n,s,i),n.lineTo(a+u,l+h-b),n.quadraticCurveTo(a+u,l+h,a+u-b,l+h),o==="bottom"&&this.drawCaret(t,n,s,i),n.lineTo(a+g,l+h),n.quadraticCurveTo(a,l+h,a,l+h-g),o==="center"&&r==="left"&&this.drawCaret(t,n,s,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const o=Ro[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=C_(this,t),l=Object.assign({},o,this._size),u=x_(n,t,l),h=P_(t,l,u,n);(i._to!==h.x||r._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=kn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,i,n),mE(t,n.textDirection),r.y+=o.top,this.drawTitle(r,t,n),this.drawBody(r,t,n),this.drawFooter(r,t,n),_E(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,i=t.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),r=!ic(s,i),o=this._positionChanged(i,n);(r||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,n,s),a=this._positionChanged(o,t),l=n||!ic(o,r)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,s,i){const r=this.options;if(t.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:s,caretY:i,options:r}=this,o=Ro[r.position].call(this,t,n);return o!==!1&&(s!==o.x||i!==o.y)}}var O2={id:"tooltip",_element:O_,positioners:Ro,afterInit(e,t,n){n&&(e.tooltip=new O_({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:kE},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Jc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ze=Object.keys(Jc);function M_(e,t){return e-t}function N_(e,t){if($e(t))return null;const n=e._adapter,{parser:s,round:i,isoWeekday:r}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),Ps(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(lc(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,i)),+o)}function V_(e,t,n,s){const i=Ze.length;for(let r=Ze.indexOf(e);r<i-1;++r){const o=Jc[Ze[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(a*o.size))<=s)return Ze[r]}return Ze[i-1]}function M2(e,t,n,s,i){for(let r=Ze.length-1;r>=Ze.indexOf(n);r--){const o=Ze[r];if(Jc[o].common&&e._adapter.diff(i,s,o)>=t-1)return o}return Ze[n?Ze.indexOf(n):0]}function N2(e){for(let t=Ze.indexOf(e)+1,n=Ze.length;t<n;++t)if(Jc[Ze[t]].common)return Ze[t]}function L_(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:i}=af(n,t),r=n[s]>=t?n[s]:n[i];e[r]=!0}}function V2(e,t,n,s){const i=e._adapter,r=+i.startOf(t[0].value,s),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+i.add(a,1,s))l=n[a],l>=0&&(t[l].major=!0);return t}function F_(e,t,n){const s=[],i={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],i[a]=o,s.push({value:a,major:!1});return r===0||!n?s:V2(e,s,i,n)}class U_ extends Xc{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),i=this._adapter=new iV._date(t.adapters.date);i.init(n),$o(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:N_(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(i=Math.min(i,u.min)),!a&&!isNaN(u.max)&&(r=Math.max(r,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Ps(i)&&!isNaN(i)?i:+n.startOf(Date.now(),s),r=Ps(r)&&!isNaN(r)?r:+n.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=QM(i,r,o);return this._unit=n.unit||(s.autoSkip?V_(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):M2(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:N2(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),F_(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,i,r;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?n=1-i:n=(this.getDecimalForValue(t[1])-i)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=yn(n,0,o),s=yn(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,i=this.options,r=i.time,o=r.unit||V_(r.minUnit,n,s,this._getLabelCapacity(n)),a=Ut(i.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,u=lc(l)||l===!0,h={};let d=n,f,g;if(u&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,u?"day":o),t.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const b=i.ticks.source==="data"&&this.getDataTimestamps();for(f=d,g=0;f<s;f=+t.add(f,a,o),g++)L_(h,f,b);return(f===s||i.bounds==="ticks"||g===1)&&L_(h,f,b),Object.keys(h).sort(M_).map(w=>+w)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const i=this.options.time.displayFormats,r=this._unit,o=n||i[r];return this._adapter.format(t,o)}_tickFormatFunction(t,n,s,i){const r=this.options,o=r.ticks.callback;if(o)return Kt(o,[t,n,s],this);const a=r.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&a[l],d=u&&a[u],f=s[n],g=u&&d&&f&&f.major;return this._adapter.format(t,i||(g?d:h))}generateTickLabels(t){let n,s,i;for(n=0,s=t.length;n<s;++n)i=t[n],i.label=this._tickFormatFunction(i.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,i=Ni(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,i=s[n.unit]||s.millisecond,r=this._tickFormatFunction(t,0,F_(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,s=i.length;n<s;++n)t=t.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const i=this.getLabels();for(n=0,s=i.length;n<s;++n)t.push(N_(this,i[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return JM(t.sort(M_))}}function ll(e,t,n){let s=0,i=e.length-1,r,o,a,l;n?(t>=e[s].pos&&t<=e[i].pos&&({lo:s,hi:i}=Uh(e,"pos",t)),{pos:r,time:a}=e[s],{pos:o,time:l}=e[i]):(t>=e[s].time&&t<=e[i].time&&({lo:s,hi:i}=Uh(e,"time",t)),{time:r,pos:a}=e[s],{time:o,pos:l}=e[i]);const u=o-r;return u?a+(l-a)*(t-r)/u:a}class GL extends U_{static id="timeseries";static defaults=U_.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=ll(n,this.min),this._tableRange=ll(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,i=[],r=[];let o,a,l,u,h;for(o=0,a=t.length;o<a;++o)u=t[o],u>=n&&u<=s&&i.push(u);if(i.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=i.length;o<a;++o)h=i[o+1],l=i[o-1],u=i[o],Math.round((h+l)/2)!==u&&r.push({time:u,pos:o/(a-1)});return r}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(ll(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return ll(this._table,s*this._tableRange+this._minPos,!0)}}const L2={class:"mood_trends_holder"},F2={key:0,class:"mood_trends_timerange_holder"},U2=["onClick"],B2={key:1,class:"mood_trends_graph_holder"},j2={key:2,class:"mood_trends_items"},z2={class:"mood_trend_explained_holder"},$2={key:3,class:"inter font_size_xs"},H2={__name:"moodTrends",setup(e){Hh.register(sV,v2,O2,A2);const t=Bt(()=>[{label:"Very Sad",ref:"very_sad",icon:"far fa-sad-tear",color:"#6A5D7B"},{label:"Sad",ref:"sad",icon:"far fa-frown",color:"#9FB1BC"},{label:"Neutral",ref:"neutral",icon:"far fa-meh",color:"#87BFBA"},{label:"Happy",ref:"happy",icon:"far fa-grin",color:"#F3C677"},{label:"Very Happy",ref:"very_happy",icon:"far fa-grin-beam",color:"#F28C8C"}]),n=pn(),s=ot("7_days"),i=ot([]),r=ot(null),o=[{key:"7_days",label:"7 Days",days:7},{key:"30_days",label:"30 Days",days:30},{key:"90_days",label:"3 Months",days:90}],a=n.userData.uid;function l(f){const g=o.find(v=>v.key===f),b=new Date,w=new Date;return w.setDate(b.getDate()-g.days),{start:w,end:b}}async function u(){const f=await Er(ze(xe,"mood",a));if(!f.exists()){i.value=[],d();return}const g=f.data(),{start:b,end:w}=l(s.value);i.value=Object.values(g).filter(v=>{if(!v.mood_logged)return!1;let S;return v.mood_logged.toDate?S=v.mood_logged.toDate():S=new Date(v.mood_logged),S>=b&&S<=w}),d()}function h(){const f={};return i.value.forEach(g=>{const b=g.mood_value||g.mood||"Unknown";f[b]=(f[b]||0)+1}),{labels:Object.keys(f),data:Object.values(f)}}function d(){Ur(()=>{const f=document.getElementById("moodPieChart")?.getContext("2d");if(!f)return;const{data:g}=h();r.value?(r.value.data.datasets[0].data=g,r.value.update()):r.value=new Hh(f,{type:"pie",data:{datasets:[{data:g,backgroundColor:["#6A5D7B","#9FB1BC","#87BFBA","#F3C677","#F28C8C"]}]},options:{responsive:!0,plugins:{legend:{position:"bottom"},tooltip:{enabled:!0}}}})})}return vs(s,u),Ds(u),(f,g)=>(X(),nt("div",L2,[g[3]||(g[3]=O("div",{class:"mood_trends_heading_holder inter font_size_xs"}," My Mood Overview ",-1)),g[4]||(g[4]=O("br",null,null,-1)),i.value.length>0?(X(),nt("div",F2,[(X(),nt(xt,null,re(o,b=>O("div",{key:b.key,class:fn(["mood_trends_timerange inter font_size_xxs",{mood_trends_timerange_selected:s.value===b.key}]),onClick:w=>s.value=b.key},Et(b.label),11,U2)),64))])):me("",!0),g[5]||(g[5]=O("br",null,null,-1)),g[6]||(g[6]=O("br",null,null,-1)),i.value.length>0?(X(),nt("div",B2,[...g[0]||(g[0]=[O("canvas",{id:"moodPieChart",width:"400",height:"300"},null,-1)])])):me("",!0),g[7]||(g[7]=O("br",null,null,-1)),i.value.length>0?(X(),nt("div",j2,[(X(!0),nt(xt,null,re(t.value,b=>(X(),nt("div",z2,[O("div",{class:"mood_trend_color",style:Ts({backgroundColor:b.color})},null,4),g[1]||(g[1]=se("  ",-1)),O("i",{class:fn(b.icon),style:Ts([{"font-size":"1.4rem"},{color:b.color}])},null,6),g[2]||(g[2]=se(" ",-1))]))),256))])):me("",!0),i.value.length===0?(X(),nt("div",$2,"You have not logged any moods as of yet.")):me("",!0)]))}},DE=sn(H2,[["__scopeId","data-v-cefbfe3a"]]),W2={class:"journal_selection_holder inter font_size_xs"},q2=["onClick"],K2={key:0,class:"journal_entry_holder"},G2={class:"journal_entry_date_holder inter font_size_xs"},Y2={class:"journal_entry_content_holder"},Q2={key:1},X2={class:"journal_list_holder"},J2={class:"journal_list_heading inter font_size_sm"},Z2={class:"journal_list_content inter font_size_xs"},tL={class:"journal_list_timestamp inter font_size_xxs"},eL={key:1,class:"inter font_size_sm"},nL={__name:"journal",emits:["close"],setup(e,{emit:t}){const n=t,s=pn(),i=ot("journalEntry"),r=[{key:"journalEntry",label:"New Journal Entry",cornerClass:"right-rounded"},{key:"journalList",label:"Journal List",cornerClass:"left-rounded"}],o=ot(new Date().toDateString()),a=ot(new Date().toLocaleTimeString()),l=ot(""),u=ot(""),h=ot(!1),d=ot(""),f=w=>{i.value=w,o.value=new Date().toDateString(),a.value=new Date().toLocaleTimeString()},g=()=>{h.value=!1,d.value=""},b=async()=>{if(!l.value){h.value=!0,d.value="Please give a journal title.";return}if(!u.value){h.value=!0,d.value="Please give journal content.";return}const v={[Date.now()]:{journalEntryHeading:l.value,journalEntryContent:u.value,journalEntryLogged:Yn()}};try{await wn(ze(xe,"journals",s.userData.uid),v,{merge:!0}),h.value=!0,d.value="Your journal entry has been logged.",l.value="",u.value="",o.value=new Date().toDateString(),a.value=new Date().toLocaleTimeString(),n("close")}catch(S){console.error("Failed to save journal:",S),h.value=!0,d.value="Failed to save journal. Please try again."}};return(w,v)=>(X(),nt(xt,null,[v[4]||(v[4]=O("div",{class:"journal_header_holder inter font_size_xs"}," My Journal ",-1)),O("div",W2,[(X(),nt(xt,null,re(r,S=>O("div",{key:S.key,class:fn(["journal_selection",{active:i.value===S.key,[S.cornerClass]:!0}]),onClick:P=>f(S.key)},Et(S.label),11,q2)),64))]),i.value==="journalEntry"?(X(),nt("div",K2,[O("div",G2,[O("div",null,[se(Et(o.value)+" ",1),v[2]||(v[2]=O("br",null,null,-1)),se(" "+Et(a.value),1)])]),O("div",Y2,[Zt(O("input",{placeholder:"Give us a title.",class:"journal_input inter font_size_xs","onUpdate:modelValue":v[0]||(v[0]=S=>l.value=S)},null,512),[[Pe,l.value]]),Zt(O("textarea",{placeholder:"What's weighing on your mind today? Or what's a small win?",class:"journal_textarea inter font_size_xs","onUpdate:modelValue":v[1]||(v[1]=S=>u.value=S)},null,512),[[Pe,u.value]])]),v[3]||(v[3]=O("br",null,null,-1)),O("div",{class:"save_button inter font_size_xxs",onClick:b}," Save "),h.value?(X(),Re(Wr,{key:0,errorMessage:d.value,onClose:g},null,8,["errorMessage"])):me("",!0)])):(X(),nt("div",Q2,[O("div",X2,[$n(s).journalData?(X(!0),nt(xt,{key:0},re($n(s).journalData,(S,P)=>(X(),nt("div",{key:P,class:"journal_list_item inter"},[O("div",J2,Et(S.journalEntryHeading),1),O("div",Z2,Et(S.journalEntryContent),1),O("div",tL," Logged on: "+Et(new Date(S.journalEntryLogged.seconds*1e3).toLocaleString()),1)]))),128)):(X(),nt("div",eL,"You don't have any journals logged as of yet."))])]))],64))}},OE=sn(nL,[["__scopeId","data-v-bb8458c7"]]),sL={class:"mood_tracker_holder"},iL={class:"mood_icons_holder"},rL=["onClick"],oL=["onClick"],aL={class:"influence_holder",style:{height:"25rem"}},lL={class:"influence_items_holder"},cL=["value"],uL={class:"influence_holder"},hL={style:{width:"100%",height:"15rem",display:"flex","flex-flow":"column nowrap","align-items":"center","justify-content":"center"}},dL={__name:"mood",emits:["close"],setup(e,{emit:t}){const n=pn(),s=t,i=Bt(()=>[{label:"Very Sad",ref:"very_sad",icon:"far fa-sad-tear"},{label:"Sad",ref:"sad",icon:"far fa-frown"},{label:"Neutral",ref:"neutral",icon:"far fa-meh"},{label:"Happy",ref:"happy",icon:"far fa-grin"},{label:"Very Happy",ref:"very_happy",icon:"far fa-grin-beam"}]),r=Bt(()=>[{label:"Sleep Quality",ref:"sleep_quality"},{label:"Nutrition",ref:"nutrition"},{label:"Physical Activity",ref:"physical_activity"},{label:"Social Connection",ref:"social_connection"},{label:"Mindset",ref:"mindset"},{label:"Environment",ref:"environment"},{label:"None",ref:"none"}]),o=ot(!1),a=ot(""),l=ot([]),u=ot(""),h=ot("neutral"),d=b=>{h.value=b},f=async()=>{if(l.value.length===0){o.value=!0,a.value="Please select an influence.";return}const w={[new Date().toISOString().split("T")[0]]:{mood:h.value,influences:l.value,optional_notes:u.value,mood_logged:Yn()}};await wn(ze(xe,"mood",n.userData.uid),w,{merge:!0}),o.value=!0,a.value="Thank you for logging your mood. It will be taken into consideration.",n.setMoodData(w),s("close")},g=()=>{o.value=!1,a.value=""};return(b,w)=>(X(),nt(xt,null,[O("div",sL,[w[6]||(w[6]=O("div",{class:"mood_heading_holder inter font_size_xs"},"How am I feeling today?",-1)),O("div",iL,[(X(!0),nt(xt,null,re(i.value,v=>(X(),nt("div",{class:"mood_icon_holder",key:v.ref},[h.value===v.ref?(X(),nt("div",{key:0,class:fn(v.icon),style:{"font-size":"3rem",border:"0.2rem solid #87bfba",padding:"0.5rem","border-radius":"50%"},onClick:S=>d(v.ref)},null,10,rL)):(X(),nt("div",{key:1,class:fn(v.icon),style:{"font-size":"3rem"},onClick:S=>d(v.ref)},null,10,oL))]))),128))]),O("div",aL,[w[4]||(w[4]=O("div",{class:"influence_heading_holder inter font_size_xs"},[O("b",null,"What might be influencing this?")],-1)),O("div",lL,[(X(!0),nt(xt,null,re(r.value,v=>(X(),nt("div",{class:"influence_item_holder inter font_size_xxs",key:v.ref,style:{height:"12%"}},[w[3]||(w[3]=se(" ",-1)),Zt(O("input",{type:"checkbox","onUpdate:modelValue":w[0]||(w[0]=S=>l.value=S),value:v.ref},null,8,cL),[[Yy,l.value]]),se(""+Et(v.label),1)]))),128))])]),O("div",uL,[O("div",hL,[w[5]||(w[5]=O("div",{class:"influence_heading_holder inter font_size_xs"},[O("b",null,"Optional Notes")],-1)),Zt(O("textarea",{placeholder:"Write a few words about why you feel the way you feel",style:{width:"90%",height:"60%",padding:"0.5rem",border:"0.1rem solid #87bfba","border-radius":"1rem"},class:"inter font_size_xs","onUpdate:modelValue":w[1]||(w[1]=v=>u.value=v)},null,512),[[Pe,u.value]])])]),O("div",{class:"save_button inter font_size_xxs",onClick:w[2]||(w[2]=v=>f())},"Save")]),o.value?(X(),Re(Wr,{key:0,errorMessage:a.value,onClose:g},null,8,["errorMessage"])):me("",!0)],64))}},fL=sn(dL,[["__scopeId","data-v-7618c925"]]),pL={key:0,class:"empty_therapy_list inter font_size_xs"},gL={key:1,class:"therapy_sign_up"},mL={key:0,class:"therapy_sign_up_step_1"},_L={class:"therapist_sign_up_form_holder"},yL=["value"],vL=["value"],bL=["value"],wL={key:1,style:{width:"80%"}},EL={key:0,style:{width:"100%"}},TL={class:"therapist_item_holder"},IL={class:"contact_buttons_holder"},AL=["onClick"],SL=["onClick"],RL={key:1,class:"empty_therapy_list inter font_size_xs"},CL={key:2,style:{width:"100%"}},xL={class:"search_therapists_holder"},PL={class:"search_input_holder"},kL={key:0,class:"empty_therapy_list inter font_size_xs"},DL={class:"therapist_item_holder"},OL={style:{display:"flex","flex-flow":"row nowrap"}},ML=["onClick"],NL=["onClick"],VL={key:3,class:"sign_up_button_holder inter font_size_s"},LL={key:4,class:"verify_therapists_holder inter font_size_s"},FL={__name:"therapists",setup(e){const t=pn(),n=ot(""),s=ot(t.userData.personalInfo.email),i=ot(t.userData.personalInfo.contactNumber),r=ot(t.userData.personalInfo.name),o=ot(""),a=ot(""),l=ot(""),u=ot(""),h=ot(null),d=ot(null),f=ot("home_list"),g=ot(!!t.userData.admin),b=ot(!1),w=ot(""),v=[{value:"dr",text:"Dr."},{value:"mr",text:"Mr."},{value:"mrs",text:"Mrs."},{value:"miss",text:"Miss."},{value:"ms",text:"Ms."}],S=[{value:"phd",text:"PhD"},{value:"msc",text:"MSc"},{value:"ma",text:"MA"}],P=[{value:"psychologist",text:"Psychologist"},{value:"psychiatrist",text:"Psychiatrist"},{value:"social_worker",text:"Social Worker"}],x=Y=>Y?Y.replace("_"," ").replace(/^./,U=>U.toUpperCase()):"",D=Bt(()=>(t.therapists||[]).filter(Y=>Y.isVerified)),L=Bt(()=>(t.therapists||[]).filter(Y=>!Y.isVerified)),W=Bt(()=>{if(!n.value)return D.value;const Y=n.value.toLowerCase();return D.value.filter(U=>U.nameSurname.toLowerCase().includes(Y))});vs(L,Y=>{f.value==="verify_therapist"&&Y.length===0&&(f.value="home_list")});const T=()=>f.value="step_1",_=()=>f.value="verify_therapist",E=()=>f.value="home_list",R=async()=>{if(!h.value){w.value="Please select an address",b.value=!0;return}const Y=ze(xe,"therapists",t.userData.uid);if((await Er(Y)).exists()){w.value="You are already registered as a therapist.",b.value=!0;return}await wn(Y,{email:s.value,nameSurname:r.value,userName:o.value,title:a.value,academicTitle:l.value,credential:u.value,address:h.value,isVerified:!1,createdAt:new Date}),w.value="Thank you. You will be redirected shortly.",b.value=!0},C=async Y=>{await wn(ze(xe,"therapists",Y.id),{isVerified:!0},{merge:!0}),f.value="home_list",window.location.reload()},M=Y=>wn(ze(xe,"therapists",Y.id),{declined:!0},{merge:!0}),I=()=>new Promise(Y=>{if(window.google?.maps?.places)return Y();const U=document.createElement("script");U.src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY&libraries=places",U.onload=Y,document.head.appendChild(U)});vs(f,async Y=>{if(Y!=="step_1")return;await Ur(),await I();const U=new google.maps.places.Autocomplete(d.value,{types:["address"],componentRestrictions:{country:"za"}});U.addListener("place_changed",()=>{const J=U.getPlace();h.value={city:J.address_components?.find(Wt=>Wt.types.includes("locality"))?.long_name||"",province:J.address_components?.find(Wt=>Wt.types.includes("administrative_area_level_1"))?.long_name||""}})});const Tt=async Y=>[],_t=Y=>{console.log(Y.contactNumber),window.location.href=`tel:${Y.contactNumber}`},ut=Y=>{const U=encodeURIComponent("Therapy Session Enquiry");window.location.href=`mailto:${Y.email}?subject=${U}`};return(Y,U)=>f.value==="home_list"&&D.value.length===0&&L.value.length===0?(X(),nt("div",pL,[...U[10]||(U[10]=[O("br",null,null,-1),se(" No therapists are listed at this moment. ",-1)])])):(X(),nt("div",gL,[f.value==="step_1"?(X(),nt("div",mL,[U[14]||(U[14]=O("div",{class:"therapy_sign_up_heading inter font_size_xs"},[O("br"),O("b",null,"Let's get you signed up and listed!"),O("br"),O("br")],-1)),O("form",_L,[Zt(O("input",{class:"form_input inter font_size_xs",type:"text",placeholder:"Email Address","onUpdate:modelValue":U[0]||(U[0]=J=>s.value=J)},null,512),[[Pe,s.value]]),Zt(O("input",{class:"form_input inter font_size_xs",type:"text",placeholder:"Contact Number","onUpdate:modelValue":U[1]||(U[1]=J=>i.value=J)},null,512),[[Pe,i.value]]),Zt(O("input",{class:"form_input inter font_size_xs",type:"text",placeholder:"Username","onUpdate:modelValue":U[2]||(U[2]=J=>o.value=J)},null,512),[[Pe,o.value]]),Zt(O("select",{class:"form_input inter font_size_xs","onUpdate:modelValue":U[3]||(U[3]=J=>a.value=J)},[U[11]||(U[11]=O("option",{disabled:"",value:""},"Select your title",-1)),(X(),nt(xt,null,re(v,J=>O("option",{key:J.value,value:J.value},Et(J.text),9,yL)),64))],512),[[ni,a.value]]),Zt(O("input",{class:"form_input inter font_size_xs",type:"text",placeholder:"Name & Surname","onUpdate:modelValue":U[4]||(U[4]=J=>r.value=J)},null,512),[[Pe,r.value]]),Zt(O("select",{class:"form_input inter font_size_xs","onUpdate:modelValue":U[5]||(U[5]=J=>l.value=J)},[U[12]||(U[12]=O("option",{disabled:"",value:""},"Select your academic title",-1)),(X(),nt(xt,null,re(S,J=>O("option",{key:J.value,value:J.value},Et(J.text),9,vL)),64))],512),[[ni,l.value]]),Zt(O("select",{class:"form_input inter font_size_xs","onUpdate:modelValue":U[6]||(U[6]=J=>u.value=J)},[U[13]||(U[13]=O("option",{disabled:"",value:""},"Select your credential",-1)),(X(),nt(xt,null,re(P,J=>O("option",{key:J.value,value:J.value},Et(J.text),9,bL)),64))],512),[[ni,u.value]]),O("input",{ref_key:"addressInput",ref:d,class:"form_input inter font_size_xs",type:"text",placeholder:"Search address"},null,512)]),O("button",{class:"form_button inter font_size_xs",onClick:R}," Confirm "),O("div",{class:"sign_up_button_holder inter font_size_s"},[O("i",{class:"fas fa-times",onClick:E})])])):f.value==="verify_therapist"&&g.value?(X(),nt("div",wL,[L.value.length?(X(),nt("div",EL,[(X(!0),nt(xt,null,re(L.value,J=>(X(),nt("div",{class:"therapist_items_holder inter font_size_xs",key:J.id},[O("div",TL,[O("b",null,Et(J.nameSurname),1),U[17]||(U[17]=O("br",null,null,-1)),se(" "+Et(J.email),1),U[18]||(U[18]=O("br",null,null,-1)),se(" "+Et(x(J.credential)),1),U[19]||(U[19]=O("br",null,null,-1)),se(" "+Et(J.address.city)+", "+Et(J.address.province)+" ",1),O("div",IL,[O("div",{class:"contact_button",onClick:Wt=>C(J)},[...U[15]||(U[15]=[O("i",{class:"fas fa-user-check"},null,-1)])],8,AL),O("div",{class:"contact_button",onClick:Wt=>M(J)},[...U[16]||(U[16]=[O("i",{class:"fas fa-user-times"},null,-1)])],8,SL)])])]))),128))])):(X(),nt("div",RL,[...U[20]||(U[20]=[O("br",null,null,-1),se(" No therapists need verifying at this moment. ",-1)])])),O("div",{class:"sign_up_button_holder inter font_size_s"},[O("i",{class:"fas fa-times",onClick:E})])])):f.value==="home_list"?(X(),nt("div",CL,[O("div",xL,[O("div",PL,[Zt(O("input",{class:"search_input inter font_size_xs",type:"text",placeholder:"Search Therapist","onUpdate:modelValue":U[7]||(U[7]=J=>n.value=J)},null,512),[[Pe,n.value]]),O("div",{class:"search_button_holder",onClick:U[8]||(U[8]=J=>Tt())},[...U[21]||(U[21]=[O("i",{class:"fa fa-search"},null,-1)])])]),W.value.length===0?(X(),nt("div",kL,[...U[22]||(U[22]=[O("br",null,null,-1),se(" No verified therapists available yet. ",-1)])])):(X(!0),nt(xt,{key:1},re(W.value,J=>(X(),nt("div",{class:"therapist_items_holder inter font_size_xs",key:J.id},[O("div",DL,[O("b",null,Et(J.nameSurname),1),U[26]||(U[26]=O("br",null,null,-1)),se(" "+Et(x(J.credential)),1),U[27]||(U[27]=O("br",null,null,-1)),se(" "+Et(J.address.city)+", "+Et(J.address.province)+" ",1),U[28]||(U[28]=O("br",null,null,-1)),U[29]||(U[29]=O("br",null,null,-1)),O("div",OL,[O("div",{style:{width:"3rem",height:"1.5rem","background-color":"#87bfba",color:"white",display:"flex","flex-flow":"row nowrap","justify-content":"center","align-items":"center","border-radius":"1rem"},onClick:Wt=>_t(J)},[...U[23]||(U[23]=[O("i",{class:"fa fa-phone"},null,-1)])],8,ML),U[25]||(U[25]=se("  ",-1)),O("div",{style:{width:"3rem",height:"1.5rem","background-color":"#87bfba",color:"white",display:"flex","flex-flow":"row nowrap","justify-content":"center","align-items":"center","border-radius":"1rem"},onClick:Wt=>ut(J)},[...U[24]||(U[24]=[O("i",{class:"fa fa-envelope"},null,-1)])],8,NL)])])]))),128))])])):me("",!0),f.value==="home_list"?(X(),nt("div",VL,[O("i",{class:"fas fa-plus",onClick:T})])):me("",!0),f.value==="home_list"&&g.value?(X(),nt("div",LL,[O("i",{class:"fas fa-award",onClick:_})])):me("",!0),b.value?(X(),Re(Wr,{key:5,errorMessage:w.value,onClose:U[9]||(U[9]=J=>b.value=!1)},null,8,["errorMessage"])):me("",!0)]))}},UL=sn(FL,[["__scopeId","data-v-b19bbb05"]]),BL={class:"navigation_bar_holder"},jL=["onClick"],zL=["innerHTML"],$L={__name:"navigation",setup(e){const t={home:{name:"Home",icon:'<i class="fa fa-home"></i>'},journal:{name:"Journal",icon:'<i class="fa fa-book"></i>'},therapists:{name:"Therapists",icon:'<i class="fa fa-address-book"></i>'},courses:{name:"Courses",icon:'<i class="fas fa-graduation-cap"></i>'},profile:{name:"Profile",icon:'<i class="fa fa-id-card"></i>'}};pn();const n=ot("home"),s=i=>{n.value=i,localStorage.setItem("currentPage",i)};return Ds(()=>{const i=localStorage.getItem("currentPage");i&&t[i]&&(n.value=i)}),(i,r)=>(X(),nt(xt,null,[n.value==="profile"?(X(),Re(Jw,{key:0,onSetPage:s})):n.value==="home"?(X(),Re(zw,{key:1,onSetPage:s})):n.value==="mood"?(X(),Re(fL,{key:2})):n.value==="journal"?(X(),Re(OE,{key:3})):n.value==="therapists"?(X(),Re(UL,{key:4})):n.value==="moodTrends"?(X(),Re(DE,{key:5})):n.value==="courses"?(X(),Re($w,{key:6})):me("",!0),O("div",BL,[(X(),nt(xt,null,re(t,(o,a)=>O("div",{class:"navigation_item_holder inter font_size_xxs",key:a},[O("div",{class:fn(["navigation_item",{active:n.value===a}]),onClick:l=>s(a)},[O("div",{innerHTML:o.icon},null,8,zL),O("div",null,Et(o.name),1)],10,jL)])),64))])],64))}},HL=sn($L,[["__scopeId","data-v-65f10304"]]),WL=[{path:"/",name:"Loading",component:NO},{path:"/login",name:"Login",component:rO},{path:"/navigation",name:"Navigation",component:HL},{path:"/home/",name:"Home",component:zw,props:!0},{path:"/profile/",name:"Profile",component:Jw,props:!0},{path:"/journal/",name:"JournalEntry",component:OE,props:!0},{path:"/mood/",name:"MoodTrends",component:DE,props:!0},{path:"/courses/",name:"Courses",component:$w,props:!0}],ME=qA({history:IA(),routes:WL});ME.beforeEach(async(e,t,n)=>{const s=pn();if(s.userData||await s.fetchUserData(),!s.userData?.uid&&e.name!=="Login")return n({name:"Login"});n()});let B_=null;ys.onAuthStateChanged(()=>{if(!B_){const e=x0(B0);e.use(D0()),e.use(ME),e.mount("#app"),B_=e}});
